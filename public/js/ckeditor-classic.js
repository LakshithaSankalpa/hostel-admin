/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/@babel/runtime/regenerator/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/@babel/runtime/regenerator/index.js ***!
  \**********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__(/*! regenerator-runtime */ "./node_modules/regenerator-runtime/runtime.js");


/***/ }),

/***/ "./node_modules/regenerator-runtime/runtime.js":
/*!*****************************************************!*\
  !*** ./node_modules/regenerator-runtime/runtime.js ***!
  \*****************************************************/
/***/ ((module) => {

/**
 * Copyright (c) 2014-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

var runtime = (function (exports) {
  "use strict";

  var Op = Object.prototype;
  var hasOwn = Op.hasOwnProperty;
  var undefined; // More compressible than void 0.
  var $Symbol = typeof Symbol === "function" ? Symbol : {};
  var iteratorSymbol = $Symbol.iterator || "@@iterator";
  var asyncIteratorSymbol = $Symbol.asyncIterator || "@@asyncIterator";
  var toStringTagSymbol = $Symbol.toStringTag || "@@toStringTag";

  function define(obj, key, value) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
    return obj[key];
  }
  try {
    // IE 8 has a broken Object.defineProperty that only works on DOM objects.
    define({}, "");
  } catch (err) {
    define = function(obj, key, value) {
      return obj[key] = value;
    };
  }

  function wrap(innerFn, outerFn, self, tryLocsList) {
    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.
    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;
    var generator = Object.create(protoGenerator.prototype);
    var context = new Context(tryLocsList || []);

    // The ._invoke method unifies the implementations of the .next,
    // .throw, and .return methods.
    generator._invoke = makeInvokeMethod(innerFn, self, context);

    return generator;
  }
  exports.wrap = wrap;

  // Try/catch helper to minimize deoptimizations. Returns a completion
  // record like context.tryEntries[i].completion. This interface could
  // have been (and was previously) designed to take a closure to be
  // invoked without arguments, but in all the cases we care about we
  // already have an existing method we want to call, so there's no need
  // to create a new function object. We can even get away with assuming
  // the method takes exactly one argument, since that happens to be true
  // in every case, so we don't have to touch the arguments object. The
  // only additional allocation required is the completion record, which
  // has a stable shape and so hopefully should be cheap to allocate.
  function tryCatch(fn, obj, arg) {
    try {
      return { type: "normal", arg: fn.call(obj, arg) };
    } catch (err) {
      return { type: "throw", arg: err };
    }
  }

  var GenStateSuspendedStart = "suspendedStart";
  var GenStateSuspendedYield = "suspendedYield";
  var GenStateExecuting = "executing";
  var GenStateCompleted = "completed";

  // Returning this object from the innerFn has the same effect as
  // breaking out of the dispatch switch statement.
  var ContinueSentinel = {};

  // Dummy constructor functions that we use as the .constructor and
  // .constructor.prototype properties for functions that return Generator
  // objects. For full spec compliance, you may wish to configure your
  // minifier not to mangle the names of these two functions.
  function Generator() {}
  function GeneratorFunction() {}
  function GeneratorFunctionPrototype() {}

  // This is a polyfill for %IteratorPrototype% for environments that
  // don't natively support it.
  var IteratorPrototype = {};
  define(IteratorPrototype, iteratorSymbol, function () {
    return this;
  });

  var getProto = Object.getPrototypeOf;
  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));
  if (NativeIteratorPrototype &&
      NativeIteratorPrototype !== Op &&
      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {
    // This environment has a native %IteratorPrototype%; use it instead
    // of the polyfill.
    IteratorPrototype = NativeIteratorPrototype;
  }

  var Gp = GeneratorFunctionPrototype.prototype =
    Generator.prototype = Object.create(IteratorPrototype);
  GeneratorFunction.prototype = GeneratorFunctionPrototype;
  define(Gp, "constructor", GeneratorFunctionPrototype);
  define(GeneratorFunctionPrototype, "constructor", GeneratorFunction);
  GeneratorFunction.displayName = define(
    GeneratorFunctionPrototype,
    toStringTagSymbol,
    "GeneratorFunction"
  );

  // Helper for defining the .next, .throw, and .return methods of the
  // Iterator interface in terms of a single ._invoke method.
  function defineIteratorMethods(prototype) {
    ["next", "throw", "return"].forEach(function(method) {
      define(prototype, method, function(arg) {
        return this._invoke(method, arg);
      });
    });
  }

  exports.isGeneratorFunction = function(genFun) {
    var ctor = typeof genFun === "function" && genFun.constructor;
    return ctor
      ? ctor === GeneratorFunction ||
        // For the native GeneratorFunction constructor, the best we can
        // do is to check its .name property.
        (ctor.displayName || ctor.name) === "GeneratorFunction"
      : false;
  };

  exports.mark = function(genFun) {
    if (Object.setPrototypeOf) {
      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);
    } else {
      genFun.__proto__ = GeneratorFunctionPrototype;
      define(genFun, toStringTagSymbol, "GeneratorFunction");
    }
    genFun.prototype = Object.create(Gp);
    return genFun;
  };

  // Within the body of any async function, `await x` is transformed to
  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test
  // `hasOwn.call(value, "__await")` to determine if the yielded value is
  // meant to be awaited.
  exports.awrap = function(arg) {
    return { __await: arg };
  };

  function AsyncIterator(generator, PromiseImpl) {
    function invoke(method, arg, resolve, reject) {
      var record = tryCatch(generator[method], generator, arg);
      if (record.type === "throw") {
        reject(record.arg);
      } else {
        var result = record.arg;
        var value = result.value;
        if (value &&
            typeof value === "object" &&
            hasOwn.call(value, "__await")) {
          return PromiseImpl.resolve(value.__await).then(function(value) {
            invoke("next", value, resolve, reject);
          }, function(err) {
            invoke("throw", err, resolve, reject);
          });
        }

        return PromiseImpl.resolve(value).then(function(unwrapped) {
          // When a yielded Promise is resolved, its final value becomes
          // the .value of the Promise<{value,done}> result for the
          // current iteration.
          result.value = unwrapped;
          resolve(result);
        }, function(error) {
          // If a rejected Promise was yielded, throw the rejection back
          // into the async generator function so it can be handled there.
          return invoke("throw", error, resolve, reject);
        });
      }
    }

    var previousPromise;

    function enqueue(method, arg) {
      function callInvokeWithMethodAndArg() {
        return new PromiseImpl(function(resolve, reject) {
          invoke(method, arg, resolve, reject);
        });
      }

      return previousPromise =
        // If enqueue has been called before, then we want to wait until
        // all previous Promises have been resolved before calling invoke,
        // so that results are always delivered in the correct order. If
        // enqueue has not been called before, then it is important to
        // call invoke immediately, without waiting on a callback to fire,
        // so that the async generator function has the opportunity to do
        // any necessary setup in a predictable way. This predictability
        // is why the Promise constructor synchronously invokes its
        // executor callback, and why async functions synchronously
        // execute code before the first await. Since we implement simple
        // async functions in terms of async generators, it is especially
        // important to get this right, even though it requires care.
        previousPromise ? previousPromise.then(
          callInvokeWithMethodAndArg,
          // Avoid propagating failures to Promises returned by later
          // invocations of the iterator.
          callInvokeWithMethodAndArg
        ) : callInvokeWithMethodAndArg();
    }

    // Define the unified helper method that is used to implement .next,
    // .throw, and .return (see defineIteratorMethods).
    this._invoke = enqueue;
  }

  defineIteratorMethods(AsyncIterator.prototype);
  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {
    return this;
  });
  exports.AsyncIterator = AsyncIterator;

  // Note that simple async functions are implemented on top of
  // AsyncIterator objects; they just return a Promise for the value of
  // the final result produced by the iterator.
  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {
    if (PromiseImpl === void 0) PromiseImpl = Promise;

    var iter = new AsyncIterator(
      wrap(innerFn, outerFn, self, tryLocsList),
      PromiseImpl
    );

    return exports.isGeneratorFunction(outerFn)
      ? iter // If outerFn is a generator, return the full iterator.
      : iter.next().then(function(result) {
          return result.done ? result.value : iter.next();
        });
  };

  function makeInvokeMethod(innerFn, self, context) {
    var state = GenStateSuspendedStart;

    return function invoke(method, arg) {
      if (state === GenStateExecuting) {
        throw new Error("Generator is already running");
      }

      if (state === GenStateCompleted) {
        if (method === "throw") {
          throw arg;
        }

        // Be forgiving, per 25.3.3.3.3 of the spec:
        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume
        return doneResult();
      }

      context.method = method;
      context.arg = arg;

      while (true) {
        var delegate = context.delegate;
        if (delegate) {
          var delegateResult = maybeInvokeDelegate(delegate, context);
          if (delegateResult) {
            if (delegateResult === ContinueSentinel) continue;
            return delegateResult;
          }
        }

        if (context.method === "next") {
          // Setting context._sent for legacy support of Babel's
          // function.sent implementation.
          context.sent = context._sent = context.arg;

        } else if (context.method === "throw") {
          if (state === GenStateSuspendedStart) {
            state = GenStateCompleted;
            throw context.arg;
          }

          context.dispatchException(context.arg);

        } else if (context.method === "return") {
          context.abrupt("return", context.arg);
        }

        state = GenStateExecuting;

        var record = tryCatch(innerFn, self, context);
        if (record.type === "normal") {
          // If an exception is thrown from innerFn, we leave state ===
          // GenStateExecuting and loop back for another invocation.
          state = context.done
            ? GenStateCompleted
            : GenStateSuspendedYield;

          if (record.arg === ContinueSentinel) {
            continue;
          }

          return {
            value: record.arg,
            done: context.done
          };

        } else if (record.type === "throw") {
          state = GenStateCompleted;
          // Dispatch the exception by looping back around to the
          // context.dispatchException(context.arg) call above.
          context.method = "throw";
          context.arg = record.arg;
        }
      }
    };
  }

  // Call delegate.iterator[context.method](context.arg) and handle the
  // result, either by returning a { value, done } result from the
  // delegate iterator, or by modifying context.method and context.arg,
  // setting context.delegate to null, and returning the ContinueSentinel.
  function maybeInvokeDelegate(delegate, context) {
    var method = delegate.iterator[context.method];
    if (method === undefined) {
      // A .throw or .return when the delegate iterator has no .throw
      // method always terminates the yield* loop.
      context.delegate = null;

      if (context.method === "throw") {
        // Note: ["return"] must be used for ES3 parsing compatibility.
        if (delegate.iterator["return"]) {
          // If the delegate iterator has a return method, give it a
          // chance to clean up.
          context.method = "return";
          context.arg = undefined;
          maybeInvokeDelegate(delegate, context);

          if (context.method === "throw") {
            // If maybeInvokeDelegate(context) changed context.method from
            // "return" to "throw", let that override the TypeError below.
            return ContinueSentinel;
          }
        }

        context.method = "throw";
        context.arg = new TypeError(
          "The iterator does not provide a 'throw' method");
      }

      return ContinueSentinel;
    }

    var record = tryCatch(method, delegate.iterator, context.arg);

    if (record.type === "throw") {
      context.method = "throw";
      context.arg = record.arg;
      context.delegate = null;
      return ContinueSentinel;
    }

    var info = record.arg;

    if (! info) {
      context.method = "throw";
      context.arg = new TypeError("iterator result is not an object");
      context.delegate = null;
      return ContinueSentinel;
    }

    if (info.done) {
      // Assign the result of the finished delegate to the temporary
      // variable specified by delegate.resultName (see delegateYield).
      context[delegate.resultName] = info.value;

      // Resume execution at the desired location (see delegateYield).
      context.next = delegate.nextLoc;

      // If context.method was "throw" but the delegate handled the
      // exception, let the outer generator proceed normally. If
      // context.method was "next", forget context.arg since it has been
      // "consumed" by the delegate iterator. If context.method was
      // "return", allow the original .return call to continue in the
      // outer generator.
      if (context.method !== "return") {
        context.method = "next";
        context.arg = undefined;
      }

    } else {
      // Re-yield the result returned by the delegate method.
      return info;
    }

    // The delegate iterator is finished, so forget it and continue with
    // the outer generator.
    context.delegate = null;
    return ContinueSentinel;
  }

  // Define Generator.prototype.{next,throw,return} in terms of the
  // unified ._invoke helper method.
  defineIteratorMethods(Gp);

  define(Gp, toStringTagSymbol, "Generator");

  // A Generator should always return itself as the iterator object when the
  // @@iterator function is called on it. Some browsers' implementations of the
  // iterator prototype chain incorrectly implement this, causing the Generator
  // object to not be returned from this call. This ensures that doesn't happen.
  // See https://github.com/facebook/regenerator/issues/274 for more details.
  define(Gp, iteratorSymbol, function() {
    return this;
  });

  define(Gp, "toString", function() {
    return "[object Generator]";
  });

  function pushTryEntry(locs) {
    var entry = { tryLoc: locs[0] };

    if (1 in locs) {
      entry.catchLoc = locs[1];
    }

    if (2 in locs) {
      entry.finallyLoc = locs[2];
      entry.afterLoc = locs[3];
    }

    this.tryEntries.push(entry);
  }

  function resetTryEntry(entry) {
    var record = entry.completion || {};
    record.type = "normal";
    delete record.arg;
    entry.completion = record;
  }

  function Context(tryLocsList) {
    // The root entry object (effectively a try statement without a catch
    // or a finally block) gives us a place to store values thrown from
    // locations where there is no enclosing try statement.
    this.tryEntries = [{ tryLoc: "root" }];
    tryLocsList.forEach(pushTryEntry, this);
    this.reset(true);
  }

  exports.keys = function(object) {
    var keys = [];
    for (var key in object) {
      keys.push(key);
    }
    keys.reverse();

    // Rather than returning an object with a next method, we keep
    // things simple and return the next function itself.
    return function next() {
      while (keys.length) {
        var key = keys.pop();
        if (key in object) {
          next.value = key;
          next.done = false;
          return next;
        }
      }

      // To avoid creating an additional object, we just hang the .value
      // and .done properties off the next function object itself. This
      // also ensures that the minifier will not anonymize the function.
      next.done = true;
      return next;
    };
  };

  function values(iterable) {
    if (iterable) {
      var iteratorMethod = iterable[iteratorSymbol];
      if (iteratorMethod) {
        return iteratorMethod.call(iterable);
      }

      if (typeof iterable.next === "function") {
        return iterable;
      }

      if (!isNaN(iterable.length)) {
        var i = -1, next = function next() {
          while (++i < iterable.length) {
            if (hasOwn.call(iterable, i)) {
              next.value = iterable[i];
              next.done = false;
              return next;
            }
          }

          next.value = undefined;
          next.done = true;

          return next;
        };

        return next.next = next;
      }
    }

    // Return an iterator with no values.
    return { next: doneResult };
  }
  exports.values = values;

  function doneResult() {
    return { value: undefined, done: true };
  }

  Context.prototype = {
    constructor: Context,

    reset: function(skipTempReset) {
      this.prev = 0;
      this.next = 0;
      // Resetting context._sent for legacy support of Babel's
      // function.sent implementation.
      this.sent = this._sent = undefined;
      this.done = false;
      this.delegate = null;

      this.method = "next";
      this.arg = undefined;

      this.tryEntries.forEach(resetTryEntry);

      if (!skipTempReset) {
        for (var name in this) {
          // Not sure about the optimal order of these conditions:
          if (name.charAt(0) === "t" &&
              hasOwn.call(this, name) &&
              !isNaN(+name.slice(1))) {
            this[name] = undefined;
          }
        }
      }
    },

    stop: function() {
      this.done = true;

      var rootEntry = this.tryEntries[0];
      var rootRecord = rootEntry.completion;
      if (rootRecord.type === "throw") {
        throw rootRecord.arg;
      }

      return this.rval;
    },

    dispatchException: function(exception) {
      if (this.done) {
        throw exception;
      }

      var context = this;
      function handle(loc, caught) {
        record.type = "throw";
        record.arg = exception;
        context.next = loc;

        if (caught) {
          // If the dispatched exception was caught by a catch block,
          // then let that catch block handle the exception normally.
          context.method = "next";
          context.arg = undefined;
        }

        return !! caught;
      }

      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        var record = entry.completion;

        if (entry.tryLoc === "root") {
          // Exception thrown outside of any try block that could handle
          // it, so set the completion value of the entire function to
          // throw the exception.
          return handle("end");
        }

        if (entry.tryLoc <= this.prev) {
          var hasCatch = hasOwn.call(entry, "catchLoc");
          var hasFinally = hasOwn.call(entry, "finallyLoc");

          if (hasCatch && hasFinally) {
            if (this.prev < entry.catchLoc) {
              return handle(entry.catchLoc, true);
            } else if (this.prev < entry.finallyLoc) {
              return handle(entry.finallyLoc);
            }

          } else if (hasCatch) {
            if (this.prev < entry.catchLoc) {
              return handle(entry.catchLoc, true);
            }

          } else if (hasFinally) {
            if (this.prev < entry.finallyLoc) {
              return handle(entry.finallyLoc);
            }

          } else {
            throw new Error("try statement without catch or finally");
          }
        }
      }
    },

    abrupt: function(type, arg) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.tryLoc <= this.prev &&
            hasOwn.call(entry, "finallyLoc") &&
            this.prev < entry.finallyLoc) {
          var finallyEntry = entry;
          break;
        }
      }

      if (finallyEntry &&
          (type === "break" ||
           type === "continue") &&
          finallyEntry.tryLoc <= arg &&
          arg <= finallyEntry.finallyLoc) {
        // Ignore the finally entry if control is not jumping to a
        // location outside the try/catch block.
        finallyEntry = null;
      }

      var record = finallyEntry ? finallyEntry.completion : {};
      record.type = type;
      record.arg = arg;

      if (finallyEntry) {
        this.method = "next";
        this.next = finallyEntry.finallyLoc;
        return ContinueSentinel;
      }

      return this.complete(record);
    },

    complete: function(record, afterLoc) {
      if (record.type === "throw") {
        throw record.arg;
      }

      if (record.type === "break" ||
          record.type === "continue") {
        this.next = record.arg;
      } else if (record.type === "return") {
        this.rval = this.arg = record.arg;
        this.method = "return";
        this.next = "end";
      } else if (record.type === "normal" && afterLoc) {
        this.next = afterLoc;
      }

      return ContinueSentinel;
    },

    finish: function(finallyLoc) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.finallyLoc === finallyLoc) {
          this.complete(entry.completion, entry.afterLoc);
          resetTryEntry(entry);
          return ContinueSentinel;
        }
      }
    },

    "catch": function(tryLoc) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.tryLoc === tryLoc) {
          var record = entry.completion;
          if (record.type === "throw") {
            var thrown = record.arg;
            resetTryEntry(entry);
          }
          return thrown;
        }
      }

      // The context.catch method must only be called with a location
      // argument that corresponds to a known catch block.
      throw new Error("illegal catch attempt");
    },

    delegateYield: function(iterable, resultName, nextLoc) {
      this.delegate = {
        iterator: values(iterable),
        resultName: resultName,
        nextLoc: nextLoc
      };

      if (this.method === "next") {
        // Deliberately forget the last sent value so that we don't
        // accidentally pass it on to the delegate.
        this.arg = undefined;
      }

      return ContinueSentinel;
    }
  };

  // Regardless of whether this script is executing as a CommonJS module
  // or not, return the runtime object so that we can declare the variable
  // regeneratorRuntime in the outer scope, which allows this module to be
  // injected easily by `bin/regenerator --include-runtime script.js`.
  return exports;

}(
  // If this script is executing as a CommonJS module, use module.exports
  // as the regeneratorRuntime namespace. Otherwise create a new empty
  // object. Either way, the resulting object will be used to initialize
  // the regeneratorRuntime variable at the top of this file.
   true ? module.exports : 0
));

try {
  regeneratorRuntime = runtime;
} catch (accidentalStrictMode) {
  // This module should not be running in strict mode, so the above
  // assignment should always work unless something is misconfigured. Just
  // in case runtime.js accidentally runs in strict mode, in modern engines
  // we can explicitly access globalThis. In older engines we can escape
  // strict mode using a global Function call. This could conceivably fail
  // if a Content Security Policy forbids using Function, but in that case
  // the proper solution is to fix the accidental strict mode problem. If
  // you've misconfigured your bundler to force strict mode and applied a
  // CSP to forbid Function, and you're not willing to fix either of those
  // problems, please detail your unique predicament in a GitHub issue.
  if (typeof globalThis === "object") {
    globalThis.regeneratorRuntime = runtime;
  } else {
    Function("r", "regeneratorRuntime = r")(runtime);
  }
}


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
/*!******************************************!*\
  !*** ./resources/js/ckeditor-classic.js ***!
  \******************************************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "./node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _get(){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get;}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(arguments.length<3?target:receiver);}return desc.value;};}return _get.apply(this,arguments);}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break;}return object;}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"]!=null)_i["return"]();}finally{if(_d)throw _e;}}return _arr;}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e391){throw _e391;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e392){didErr=true;err=_e392;},f:function f(){try{if(!normalCompletion&&it["return"]!=null)it["return"]();}finally{if(didErr)throw err;}}};}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map():undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function");}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper);}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor);}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class);};return _wrapNativeSuper(Class);}function _construct(Parent,args,Class){if(_isNativeReflectConstruct()){_construct=Reflect.construct;}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor();if(Class)_setPrototypeOf(instance,Class.prototype);return instance;};}return _construct.apply(null,arguments);}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1;}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}/******/(function(){// webpackBootstrap
/******/var __webpack_modules__={/***/"./node_modules/@ckeditor/ckeditor5-build-classic/build/ckeditor.js":/*!**************************************************************************!*\
  !*** ./node_modules/@ckeditor/ckeditor5-build-classic/build/ckeditor.js ***!
  \**************************************************************************/ /***/function node_modulesCkeditorCkeditor5BuildClassicBuildCkeditorJs(module,exports){/*!
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */!function(e){var t=e.en=e.en||{};t.dictionary=Object.assign(t.dictionary||{},{"%0 of %1":"%0 of %1",Aquamarine:"Aquamarine",Black:"Black","Block quote":"Block quote",Blue:"Blue",Bold:"Bold","Break text":"Break text","Bulleted List":"Bulleted List",Cancel:"Cancel","Cannot upload file:":"Cannot upload file:","Centered image":"Centered image","Change image text alternative":"Change image text alternative","Choose heading":"Choose heading",Column:"Column","Could not insert image at the current position.":"Could not insert image at the current position.","Could not obtain resized image URL.":"Could not obtain resized image URL.","Decrease indent":"Decrease indent","Delete column":"Delete column","Delete row":"Delete row","Dim grey":"Dim grey",Downloadable:"Downloadable","Dropdown toolbar":"Dropdown toolbar","Edit block":"Edit block","Edit link":"Edit link","Editor toolbar":"Editor toolbar","Enter image caption":"Enter image caption","Full size image":"Full size image",Green:"Green",Grey:"Grey","Header column":"Header column","Header row":"Header row",Heading:"Heading","Heading 1":"Heading 1","Heading 2":"Heading 2","Heading 3":"Heading 3","Heading 4":"Heading 4","Heading 5":"Heading 5","Heading 6":"Heading 6","Image toolbar":"Image toolbar","image widget":"image widget","In line":"In line","Increase indent":"Increase indent","Insert column left":"Insert column left","Insert column right":"Insert column right","Insert image":"Insert image","Insert image or file":"Insert image or file","Insert media":"Insert media","Insert paragraph after block":"Insert paragraph after block","Insert paragraph before block":"Insert paragraph before block","Insert row above":"Insert row above","Insert row below":"Insert row below","Insert table":"Insert table","Inserting image failed":"Inserting image failed",Italic:"Italic","Left aligned image":"Left aligned image","Light blue":"Light blue","Light green":"Light green","Light grey":"Light grey",Link:"Link","Link URL":"Link URL","Media URL":"Media URL","media widget":"media widget","Merge cell down":"Merge cell down","Merge cell left":"Merge cell left","Merge cell right":"Merge cell right","Merge cell up":"Merge cell up","Merge cells":"Merge cells",Next:"Next","Numbered List":"Numbered List","Open in a new tab":"Open in a new tab","Open link in new tab":"Open link in new tab",Orange:"Orange",Paragraph:"Paragraph","Paste the media URL in the input.":"Paste the media URL in the input.",Previous:"Previous",Purple:"Purple",Red:"Red",Redo:"Redo","Rich Text Editor":"Rich Text Editor","Rich Text Editor, %0":"Rich Text Editor, %0","Right aligned image":"Right aligned image",Row:"Row",Save:"Save","Select all":"Select all","Select column":"Select column","Select row":"Select row","Selecting resized image failed":"Selecting resized image failed","Show more items":"Show more items","Side image":"Side image","Split cell horizontally":"Split cell horizontally","Split cell vertically":"Split cell vertically","Table toolbar":"Table toolbar","Text alternative":"Text alternative","The URL must not be empty.":"The URL must not be empty.","This link has no URL":"This link has no URL","This media URL is not supported.":"This media URL is not supported.","Tip: Paste the URL into the content to embed faster.":"Tip: Paste the URL into the content to embed faster.","Toggle caption off":"Toggle caption off","Toggle caption on":"Toggle caption on",Turquoise:"Turquoise",Undo:"Undo",Unlink:"Unlink","Upload failed":"Upload failed","Upload in progress":"Upload in progress",White:"White","Widget toolbar":"Widget toolbar","Wrap text":"Wrap text",Yellow:"Yellow"});}(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})),function(e,t){ true?module.exports=t():0;}(window,function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports;}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n});},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0});},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==_typeof(e)&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e){i.d(n,o,function(t){return e[t];}.bind(null,o));}return n;},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"];}:function(){return e;};return i.d(t,"a",t),t;},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t);},i.p="",i(i.s=108);}([function(e,t,i){"use strict";i.d(t,"a",function(){return n;}),i.d(t,"b",function(){return o;});var n=/*#__PURE__*/function(_Error){_inherits(n,_Error);var _super=_createSuper(n);function n(e,t,i){var _this;_classCallCheck(this,n);_this=_super.call(this,"".concat(e).concat(i?" "+JSON.stringify(i):"").concat(r(e))),_this.name="CKEditorError",_this.context=t,_this.data=i;return _this;}_createClass(n,[{key:"is",value:function is(e){return"CKEditorError"===e;}}],[{key:"rethrowUnexpectedError",value:function rethrowUnexpectedError(e,t){if(e.is&&e.is("CKEditorError"))throw e;var i=new n(e.message,t);throw i.stack=e.stack,i;}}]);return n;}(/*#__PURE__*/_wrapNativeSuper(Error));function o(e,t){var _console;(_console=console).warn.apply(_console,_toConsumableArray(s(e,t)));}function r(e){return"\nRead more: https://ckeditor.com/docs/ckeditor5/latest/framework/guides/support/error-codes.html#error-"+e;}function s(e,t){var i=r(e);return t?[e,t,i]:[e,i];}},function(e,t,i){"use strict";var n,o=function o(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n;},r=function(){var e={};return function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head;}catch(e){i=null;}e[t]=i;}return e[t];};}(),s=[];function a(e){for(var t=-1,i=0;i<s.length;i++){if(s[i].identifier===e){t=i;break;}}return t;}function c(e,t){for(var i={},n=[],o=0;o<e.length;o++){var r=e[o],c=t.base?r[0]+t.base:r[0],l=i[c]||0,d="".concat(c," ").concat(l);i[c]=l+1;var h=a(d),u={css:r[1],media:r[2],sourceMap:r[3]};-1!==h?(s[h].references++,s[h].updater(u)):s.push({identifier:d,updater:p(u,t),references:1}),n.push(d);}return n;}function l(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var o=i.nc;o&&(n.nonce=o);}if(Object.keys(n).forEach(function(e){t.setAttribute(e,n[e]);}),"function"==typeof e.insert)e.insert(t);else{var s=r(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t);}return t;}var d,h=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n");});function u(e,t,i,n){var o=i?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=h(t,o);else{var r=document.createTextNode(o),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(r,s[t]):e.appendChild(r);}}function g(e,t,i){var n=i.css,o=i.media,r=i.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;){e.removeChild(e.firstChild);}e.appendChild(document.createTextNode(n));}}var m=null,f=0;function p(e,t){var i,n,o;if(t.singleton){var r=f++;i=m||(m=l(t)),n=u.bind(null,i,r,!1),o=u.bind(null,i,r,!0);}else i=l(t),n=g.bind(null,i,t),o=function o(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);}(i);};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t);}else o();};}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=o());var i=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<i.length;n++){var o=a(i[n]);s[o].references--;}for(var r=c(e,t),l=0;l<i.length;l++){var d=a(i[l]);0===s[d].references&&(s[d].updater(),s.splice(d,1));}i=r;}};};},,function(e,t,i){"use strict";var n=i(8),o="object"==(typeof self==="undefined"?"undefined":_typeof(self))&&self&&self.Object===Object&&self,r=n.a||o||Function("return this")();t.a=r;},function(e,t,i){"use strict";(function(e){var n=i(3),o=i(14),r= true&&exports&&!exports.nodeType&&exports,s=r&&"object"==_typeof(e)&&e&&!e.nodeType&&e,a=s&&s.exports===r?n.a.Buffer:void 0,c=(a?a.isBuffer:void 0)||o.a;t.a=c;}).call(this,i(10)(e));},function(e,t,i){"use strict";(function(e){var n=i(8),o= true&&exports&&!exports.nodeType&&exports,r=o&&"object"==_typeof(e)&&e&&!e.nodeType&&e,s=r&&r.exports===o&&n.a.process,a=function(){try{var e=r&&r.require&&r.require("util").types;return e||s&&s.binding&&s.binding("util");}catch(e){}}();t.a=a;}).call(this,i(10)(e));},function(e,t,i){"use strict";(function(e){var t=i(0);var n="object"==(typeof window==="undefined"?"undefined":_typeof(window))?window:e;if(n.CKEDITOR_VERSION)throw new t.a("ckeditor-duplicated-modules",null);n.CKEDITOR_VERSION="29.2.0";}).call(this,i(12));},function(e,t,i){var n=i(1),o=i(76);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t,i){"use strict";(function(e){var i="object"==_typeof(e)&&e&&e.Object===Object&&e;t.a=i;}).call(this,i(12));},function(e,t,i){"use strict";(function(e){var n=i(3),o= true&&exports&&!exports.nodeType&&exports,r=o&&"object"==_typeof(e)&&e&&!e.nodeType&&e,s=r&&r.exports===o?n.a.Buffer:void 0,a=s?s.allocUnsafe:void 0;t.a=function(e,t){if(t)return e.slice();var i=e.length,n=a?a(i):new e.constructor(i);return e.copy(n),n;};}).call(this,i(10)(e));},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function get(){return t.l;}}),Object.defineProperty(t,"id",{enumerable:!0,get:function get(){return t.i;}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1;}return t;};},function(e,t,i){var n=i(1),o=i(77);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){var i;i=function(){return this;}();try{i=i||new Function("return this")();}catch(e){"object"==(typeof window==="undefined"?"undefined":_typeof(window))&&(i=window);}e.exports=i;},function(e,t,i){var n=i(1),o=i(71);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t,i){"use strict";t.a=function(){return!1;};},function(e,t,i){var n=i(1),o=i(16);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck-hidden{display:none!important}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all *{box-sizing:border-box;width:auto;height:auto;position:static}:root{--ck-z-default:1;--ck-z-modal:calc(var(--ck-z-default) + 999)}.ck-transitions-disabled,.ck-transitions-disabled *{transition:none!important}:root{--ck-color-base-foreground:#fafafa;--ck-color-base-background:#fff;--ck-color-base-border:#c4c4c4;--ck-color-base-action:#61b045;--ck-color-base-focus:#6cb5f9;--ck-color-base-text:#333;--ck-color-base-active:#198cf0;--ck-color-base-active-focus:#0e7fe1;--ck-color-base-error:#db3700;--ck-color-focus-border-coordinates:208,79%,51%;--ck-color-focus-border:hsl(var(--ck-color-focus-border-coordinates));--ck-color-focus-outer-shadow:#bcdefb;--ck-color-focus-disabled-shadow:rgba(119,186,248,0.3);--ck-color-focus-error-shadow:rgba(255,64,31,0.3);--ck-color-text:var(--ck-color-base-text);--ck-color-shadow-drop:rgba(0,0,0,0.15);--ck-color-shadow-drop-active:rgba(0,0,0,0.2);--ck-color-shadow-inner:rgba(0,0,0,0.1);--ck-color-button-default-background:transparent;--ck-color-button-default-hover-background:#e6e6e6;--ck-color-button-default-active-background:#d9d9d9;--ck-color-button-default-active-shadow:#bfbfbf;--ck-color-button-default-disabled-background:transparent;--ck-color-button-on-background:#dedede;--ck-color-button-on-hover-background:#c4c4c4;--ck-color-button-on-active-background:#bababa;--ck-color-button-on-active-shadow:#a1a1a1;--ck-color-button-on-disabled-background:#dedede;--ck-color-button-action-background:var(--ck-color-base-action);--ck-color-button-action-hover-background:#579e3d;--ck-color-button-action-active-background:#53973b;--ck-color-button-action-active-shadow:#498433;--ck-color-button-action-disabled-background:#7ec365;--ck-color-button-action-text:var(--ck-color-base-background);--ck-color-button-save:#008a00;--ck-color-button-cancel:#db3700;--ck-color-switch-button-off-background:#b0b0b0;--ck-color-switch-button-off-hover-background:#a3a3a3;--ck-color-switch-button-on-background:var(--ck-color-button-action-background);--ck-color-switch-button-on-hover-background:#579e3d;--ck-color-switch-button-inner-background:var(--ck-color-base-background);--ck-color-switch-button-inner-shadow:rgba(0,0,0,0.1);--ck-color-dropdown-panel-background:var(--ck-color-base-background);--ck-color-dropdown-panel-border:var(--ck-color-base-border);--ck-color-input-background:var(--ck-color-base-background);--ck-color-input-border:#c7c7c7;--ck-color-input-error-border:var(--ck-color-base-error);--ck-color-input-text:var(--ck-color-base-text);--ck-color-input-disabled-background:#f2f2f2;--ck-color-input-disabled-border:#c7c7c7;--ck-color-input-disabled-text:#757575;--ck-color-list-background:var(--ck-color-base-background);--ck-color-list-button-hover-background:var(--ck-color-button-default-hover-background);--ck-color-list-button-on-background:var(--ck-color-base-active);--ck-color-list-button-on-background-focus:var(--ck-color-base-active-focus);--ck-color-list-button-on-text:var(--ck-color-base-background);--ck-color-panel-background:var(--ck-color-base-background);--ck-color-panel-border:var(--ck-color-base-border);--ck-color-toolbar-background:var(--ck-color-base-foreground);--ck-color-toolbar-border:var(--ck-color-base-border);--ck-color-tooltip-background:var(--ck-color-base-text);--ck-color-tooltip-text:var(--ck-color-base-background);--ck-color-engine-placeholder-text:#707070;--ck-color-upload-bar-background:#6cb5f9;--ck-color-link-default:#0000f0;--ck-color-link-selected-background:rgba(31,177,255,0.1);--ck-color-link-fake-selection:rgba(31,177,255,0.3);--ck-disabled-opacity:.5;--ck-focus-outer-shadow-geometry:0 0 0 3px;--ck-focus-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-outer-shadow);--ck-focus-disabled-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-disabled-shadow);--ck-focus-error-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-error-shadow);--ck-focus-ring:1px solid var(--ck-color-focus-border);--ck-font-size-base:13px;--ck-line-height-base:1.84615;--ck-font-face:Helvetica,Arial,Tahoma,Verdana,Sans-Serif;--ck-font-size-tiny:0.7em;--ck-font-size-small:0.75em;--ck-font-size-normal:1em;--ck-font-size-big:1.4em;--ck-font-size-large:1.8em;--ck-ui-component-min-height:2.3em}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all *{margin:0;padding:0;border:0;background:transparent;text-decoration:none;vertical-align:middle;transition:none;word-wrap:break-word}.ck.ck-reset_all,.ck.ck-reset_all *{border-collapse:collapse;font:normal normal normal var(--ck-font-size-base)/var(--ck-line-height-base) var(--ck-font-face);color:var(--ck-color-text);text-align:left;white-space:nowrap;cursor:auto;float:none}.ck.ck-reset_all .ck-rtl *{text-align:right}.ck.ck-reset_all iframe{vertical-align:inherit}.ck.ck-reset_all textarea{white-space:pre-wrap}.ck.ck-reset_all input[type=password],.ck.ck-reset_all input[type=text],.ck.ck-reset_all textarea{cursor:text}.ck.ck-reset_all input[type=password][disabled],.ck.ck-reset_all input[type=text][disabled],.ck.ck-reset_all textarea[disabled]{cursor:default}.ck.ck-reset_all fieldset{padding:10px;border:2px groove #dfdee3}.ck.ck-reset_all button::-moz-focus-inner{padding:0;border:0}.ck[dir=rtl],.ck[dir=rtl] .ck{text-align:right}:root{--ck-border-radius:2px;--ck-inner-shadow:2px 2px 3px var(--ck-color-shadow-inner) inset;--ck-drop-shadow:0 1px 2px 1px var(--ck-color-shadow-drop);--ck-drop-shadow-active:0 3px 6px 1px var(--ck-color-shadow-drop-active);--ck-spacing-unit:0.6em;--ck-spacing-large:calc(var(--ck-spacing-unit)*1.5);--ck-spacing-standard:var(--ck-spacing-unit);--ck-spacing-medium:calc(var(--ck-spacing-unit)*0.8);--ck-spacing-small:calc(var(--ck-spacing-unit)*0.5);--ck-spacing-tiny:calc(var(--ck-spacing-unit)*0.3);--ck-spacing-extra-tiny:calc(var(--ck-spacing-unit)*0.16)}";},function(e,t,i){var n=i(1),o=i(18);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck.ck-icon{vertical-align:middle}:root{--ck-icon-size:calc(var(--ck-line-height-base)*var(--ck-font-size-normal))}.ck.ck-icon{width:var(--ck-icon-size);height:var(--ck-icon-size);font-size:.8333350694em;will-change:transform}.ck.ck-icon,.ck.ck-icon *{color:inherit;cursor:inherit}.ck.ck-icon :not([fill]){fill:currentColor}";},function(e,t,i){var n=i(1),o=i(20);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports='.ck.ck-tooltip,.ck.ck-tooltip .ck-tooltip__text:after{position:absolute;pointer-events:none;-webkit-backface-visibility:hidden}.ck.ck-tooltip{visibility:hidden;opacity:0;display:none;z-index:var(--ck-z-modal)}.ck.ck-tooltip .ck-tooltip__text{display:inline-block}.ck.ck-tooltip .ck-tooltip__text:after{content:"";width:0;height:0}:root{--ck-tooltip-arrow-size:5px}.ck.ck-tooltip{left:50%;top:0;transition:opacity .2s ease-in-out .2s}.ck.ck-tooltip .ck-tooltip__text{border-radius:0}.ck-rounded-corners .ck.ck-tooltip .ck-tooltip__text,.ck.ck-tooltip .ck-tooltip__text.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-tooltip .ck-tooltip__text{font-size:.9em;line-height:1.5;color:var(--ck-color-tooltip-text);padding:var(--ck-spacing-small) var(--ck-spacing-medium);background:var(--ck-color-tooltip-background);position:relative;left:-50%}.ck.ck-tooltip .ck-tooltip__text:after{transition:opacity .2s ease-in-out .2s;border-style:solid;left:50%}.ck.ck-tooltip.ck-tooltip_s,.ck.ck-tooltip.ck-tooltip_se,.ck.ck-tooltip.ck-tooltip_sw{bottom:calc(var(--ck-tooltip-arrow-size)*-1);transform:translateY(100%)}.ck.ck-tooltip.ck-tooltip_s .ck-tooltip__text:after,.ck.ck-tooltip.ck-tooltip_se .ck-tooltip__text:after,.ck.ck-tooltip.ck-tooltip_sw .ck-tooltip__text:after{top:calc(var(--ck-tooltip-arrow-size)*-1 + 1px);transform:translateX(-50%);border-left-color:transparent;border-bottom-color:var(--ck-color-tooltip-background);border-right-color:transparent;border-top-color:transparent;border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:var(--ck-tooltip-arrow-size);border-right-width:var(--ck-tooltip-arrow-size);border-top-width:0}.ck.ck-tooltip.ck-tooltip_sw{right:50%;left:auto}.ck.ck-tooltip.ck-tooltip_sw .ck-tooltip__text{left:auto;right:calc(var(--ck-tooltip-arrow-size)*-2)}.ck.ck-tooltip.ck-tooltip_sw .ck-tooltip__text:after{left:auto;right:0}.ck.ck-tooltip.ck-tooltip_se{left:50%;right:auto}.ck.ck-tooltip.ck-tooltip_se .ck-tooltip__text{right:auto;left:calc(var(--ck-tooltip-arrow-size)*-2)}.ck.ck-tooltip.ck-tooltip_se .ck-tooltip__text:after{right:auto;left:0;transform:translateX(50%)}.ck.ck-tooltip.ck-tooltip_n{top:calc(var(--ck-tooltip-arrow-size)*-1);transform:translateY(-100%)}.ck.ck-tooltip.ck-tooltip_n .ck-tooltip__text:after{bottom:calc(var(--ck-tooltip-arrow-size)*-1);transform:translateX(-50%);border-left-color:transparent;border-bottom-color:transparent;border-right-color:transparent;border-top-color:var(--ck-color-tooltip-background);border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:0;border-right-width:var(--ck-tooltip-arrow-size);border-top-width:var(--ck-tooltip-arrow-size)}.ck.ck-tooltip.ck-tooltip_e{left:calc(100% + var(--ck-tooltip-arrow-size));top:50%}.ck.ck-tooltip.ck-tooltip_e .ck-tooltip__text{left:0;transform:translateY(-50%)}.ck.ck-tooltip.ck-tooltip_e .ck-tooltip__text:after{left:calc(var(--ck-tooltip-arrow-size)*-1);top:calc(50% - var(--ck-tooltip-arrow-size)*1);border-left-color:transparent;border-bottom-color:transparent;border-right-color:var(--ck-color-tooltip-background);border-top-color:transparent;border-left-width:0;border-bottom-width:var(--ck-tooltip-arrow-size);border-right-width:var(--ck-tooltip-arrow-size);border-top-width:var(--ck-tooltip-arrow-size)}.ck.ck-tooltip.ck-tooltip_w{right:calc(100% + var(--ck-tooltip-arrow-size));left:auto;top:50%}.ck.ck-tooltip.ck-tooltip_w .ck-tooltip__text{left:0;transform:translateY(-50%)}.ck.ck-tooltip.ck-tooltip_w .ck-tooltip__text:after{left:100%;top:calc(50% - var(--ck-tooltip-arrow-size)*1);border-left-color:var(--ck-color-tooltip-background);border-bottom-color:transparent;border-right-color:transparent;border-top-color:transparent;border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:var(--ck-tooltip-arrow-size);border-right-width:0;border-top-width:var(--ck-tooltip-arrow-size)}';},function(e,t,i){var n=i(1),o=i(22);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck.ck-button,a.ck.ck-button{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ck.ck-button .ck-tooltip,a.ck.ck-button .ck-tooltip{display:block}@media (hover:none){.ck.ck-button .ck-tooltip,a.ck.ck-button .ck-tooltip{display:none}}.ck.ck-button,a.ck.ck-button{position:relative;display:inline-flex;align-items:center;justify-content:left}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{display:none}.ck.ck-button.ck-button_with-text .ck-button__label,a.ck.ck-button.ck-button_with-text .ck-button__label{display:inline-block}.ck.ck-button:not(.ck-button_with-text),a.ck.ck-button:not(.ck-button_with-text){justify-content:center}.ck.ck-button:hover .ck-tooltip,a.ck.ck-button:hover .ck-tooltip{visibility:visible;opacity:1}.ck.ck-button:focus:not(:hover) .ck-tooltip,a.ck.ck-button:focus:not(:hover) .ck-tooltip{display:none}.ck.ck-button,a.ck.ck-button{background:var(--ck-color-button-default-background)}.ck.ck-button:not(.ck-disabled):hover,a.ck.ck-button:not(.ck-disabled):hover{background:var(--ck-color-button-default-hover-background)}.ck.ck-button:not(.ck-disabled):active,a.ck.ck-button:not(.ck-disabled):active{background:var(--ck-color-button-default-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-default-active-shadow)}.ck.ck-button.ck-disabled,a.ck.ck-button.ck-disabled{background:var(--ck-color-button-default-disabled-background)}.ck.ck-button,a.ck.ck-button{border-radius:0}.ck-rounded-corners .ck.ck-button,.ck-rounded-corners a.ck.ck-button,.ck.ck-button.ck-rounded-corners,a.ck.ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-button,a.ck.ck-button{white-space:nowrap;cursor:default;vertical-align:middle;padding:var(--ck-spacing-tiny);text-align:center;min-width:var(--ck-ui-component-min-height);min-height:var(--ck-ui-component-min-height);line-height:1;font-size:inherit;border:1px solid transparent;transition:box-shadow .2s ease-in-out,border .2s ease-in-out;-webkit-appearance:none}.ck.ck-button:active,.ck.ck-button:focus,a.ck.ck-button:active,a.ck.ck-button:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-button .ck-button__icon use,.ck.ck-button .ck-button__icon use *,a.ck.ck-button .ck-button__icon use,a.ck.ck-button .ck-button__icon use *{color:inherit}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{font-size:inherit;font-weight:inherit;color:inherit;cursor:inherit;vertical-align:middle}[dir=ltr] .ck.ck-button .ck-button__label,[dir=ltr] a.ck.ck-button .ck-button__label{text-align:left}[dir=rtl] .ck.ck-button .ck-button__label,[dir=rtl] a.ck.ck-button .ck-button__label{text-align:right}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{color:inherit}[dir=ltr] .ck.ck-button .ck-button__keystroke,[dir=ltr] a.ck.ck-button .ck-button__keystroke{margin-left:var(--ck-spacing-large)}[dir=rtl] .ck.ck-button .ck-button__keystroke,[dir=rtl] a.ck.ck-button .ck-button__keystroke{margin-right:var(--ck-spacing-large)}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{font-weight:700;opacity:.7}.ck.ck-button.ck-disabled:active,.ck.ck-button.ck-disabled:focus,a.ck.ck-button.ck-disabled:active,a.ck.ck-button.ck-disabled:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-button.ck-disabled .ck-button__icon,a.ck.ck-button.ck-disabled .ck-button__icon{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__label,a.ck.ck-button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__keystroke,a.ck.ck-button.ck-disabled .ck-button__keystroke{opacity:.3}.ck.ck-button.ck-button_with-text,a.ck.ck-button.ck-button_with-text{padding:var(--ck-spacing-tiny) var(--ck-spacing-standard)}[dir=ltr] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=ltr] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-left:calc(var(--ck-spacing-small)*-1);margin-right:var(--ck-spacing-small)}[dir=rtl] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=rtl] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-right:calc(var(--ck-spacing-small)*-1);margin-left:var(--ck-spacing-small)}.ck.ck-button.ck-button_with-keystroke .ck-button__label,a.ck.ck-button.ck-button_with-keystroke .ck-button__label{flex-grow:1}.ck.ck-button.ck-on,a.ck.ck-button.ck-on{background:var(--ck-color-button-on-background)}.ck.ck-button.ck-on:not(.ck-disabled):hover,a.ck.ck-button.ck-on:not(.ck-disabled):hover{background:var(--ck-color-button-on-hover-background)}.ck.ck-button.ck-on:not(.ck-disabled):active,a.ck.ck-button.ck-on:not(.ck-disabled):active{background:var(--ck-color-button-on-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-on-active-shadow)}.ck.ck-button.ck-on.ck-disabled,a.ck.ck-button.ck-on.ck-disabled{background:var(--ck-color-button-on-disabled-background)}.ck.ck-button.ck-button-save,a.ck.ck-button.ck-button-save{color:var(--ck-color-button-save)}.ck.ck-button.ck-button-cancel,a.ck.ck-button.ck-button-cancel{color:var(--ck-color-button-cancel)}.ck.ck-button-action,a.ck.ck-button-action{background:var(--ck-color-button-action-background)}.ck.ck-button-action:not(.ck-disabled):hover,a.ck.ck-button-action:not(.ck-disabled):hover{background:var(--ck-color-button-action-hover-background)}.ck.ck-button-action:not(.ck-disabled):active,a.ck.ck-button-action:not(.ck-disabled):active{background:var(--ck-color-button-action-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-action-active-shadow)}.ck.ck-button-action.ck-disabled,a.ck.ck-button-action.ck-disabled{background:var(--ck-color-button-action-disabled-background)}.ck.ck-button-action,a.ck.ck-button-action{color:var(--ck-color-button-action-text)}.ck.ck-button-bold,a.ck.ck-button-bold{font-weight:700}";},function(e,t,i){var n=i(1),o=i(24);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{display:block}:root{--ck-switch-button-toggle-width:2.6153846154em;--ck-switch-button-toggle-inner-size:1.0769230769em;--ck-switch-button-toggle-spacing:1px;--ck-switch-button-translation:calc(var(--ck-switch-button-toggle-width) - var(--ck-switch-button-toggle-inner-size) - var(--ck-switch-button-toggle-spacing)*2)}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__label{margin-right:calc(var(--ck-spacing-large)*2)}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__label{margin-left:calc(var(--ck-spacing-large)*2)}.ck.ck-button.ck-switchbutton .ck-button__toggle{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle.ck-rounded-corners{border-radius:var(--ck-border-radius)}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-left:auto}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-right:auto}.ck.ck-button.ck-switchbutton .ck-button__toggle{transition:background .4s ease;width:var(--ck-switch-button-toggle-width);background:var(--ck-color-switch-button-off-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:calc(var(--ck-border-radius)*0.5)}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{margin:var(--ck-switch-button-toggle-spacing);width:var(--ck-switch-button-toggle-inner-size);height:var(--ck-switch-button-toggle-inner-size);background:var(--ck-color-switch-button-inner-background);transition:all .3s ease}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover{background:var(--ck-color-switch-button-off-hover-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover .ck-button__toggle__inner{box-shadow:0 0 0 5px var(--ck-color-switch-button-inner-shadow)}.ck.ck-button.ck-switchbutton.ck-disabled .ck-button__toggle{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle{background:var(--ck-color-switch-button-on-background)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle:hover{background:var(--ck-color-switch-button-on-hover-background)}[dir=ltr] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(var(--ck-switch-button-translation))}[dir=rtl] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(calc(var(--ck-switch-button-translation)*-1))}";},function(e,t,i){var n=i(1),o=i(26);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck.ck-color-grid{display:grid}:root{--ck-color-grid-tile-size:24px;--ck-color-color-grid-check-icon:#000}.ck.ck-color-grid{grid-gap:5px;padding:8px}.ck.ck-color-grid__tile{width:var(--ck-color-grid-tile-size);height:var(--ck-color-grid-tile-size);min-width:var(--ck-color-grid-tile-size);min-height:var(--ck-color-grid-tile-size);padding:0;transition:box-shadow .2s ease;border:0}.ck.ck-color-grid__tile.ck-disabled{cursor:unset;transition:unset}.ck.ck-color-grid__tile.ck-color-table__color-tile_bordered{box-shadow:0 0 0 1px var(--ck-color-base-border)}.ck.ck-color-grid__tile .ck.ck-icon{display:none;color:var(--ck-color-color-grid-check-icon)}.ck.ck-color-grid__tile.ck-on{box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-base-text)}.ck.ck-color-grid__tile.ck-on .ck.ck-icon{display:block}.ck.ck-color-grid__tile.ck-on,.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){border:0}.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-focus-border)}.ck.ck-color-grid__label{padding:0 var(--ck-spacing-standard)}";},function(e,t,i){var n=i(1),o=i(28);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports='.ck.ck-splitbutton{font-size:inherit}.ck.ck-splitbutton .ck-splitbutton__action:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-button .ck-tooltip{display:none}:root{--ck-color-split-button-hover-background:#ebebeb;--ck-color-split-button-hover-border:#b3b3b3}[dir=ltr] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,[dir=ltr] .ck.ck-splitbutton:hover>.ck-splitbutton__action{border-top-right-radius:unset;border-bottom-right-radius:unset}[dir=rtl] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,[dir=rtl] .ck.ck-splitbutton:hover>.ck-splitbutton__action{border-top-left-radius:unset;border-bottom-left-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow{min-width:unset}[dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-top-left-radius:unset;border-bottom-left-radius:unset}[dir=rtl] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-top-right-radius:unset;border-bottom-right-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow svg{width:var(--ck-dropdown-arrow-size)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover),.ck.ck-splitbutton:hover>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover){background:var(--ck-color-split-button-hover-background)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,.ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{content:"";position:absolute;width:1px;height:100%;background-color:var(--ck-color-split-button-hover-border)}[dir=ltr] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,[dir=ltr] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{left:-1px}[dir=rtl] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,[dir=rtl] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{right:-1px}.ck.ck-splitbutton.ck-splitbutton_open{border-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__action{border-bottom-left-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__arrow{border-bottom-right-radius:0}';},function(e,t,i){var n=i(1),o=i(30);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=":root{--ck-dropdown-max-width:75vw}.ck.ck-dropdown{display:inline-block;position:relative}.ck.ck-dropdown .ck-dropdown__arrow{pointer-events:none;z-index:var(--ck-z-default)}.ck.ck-dropdown .ck-button.ck-dropdown__button{width:100%}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on .ck-tooltip{display:none}.ck.ck-dropdown .ck-dropdown__panel{-webkit-backface-visibility:hidden;display:none;z-index:var(--ck-z-modal);max-width:var(--ck-dropdown-max-width);position:absolute}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel-visible{display:inline-block}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_n,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nmw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw{bottom:100%}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_s,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_smw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{top:100%;bottom:auto}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se{left:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{right:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_n,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_s{left:50%;transform:translateX(-50%)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nmw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_smw{left:75%;transform:translateX(-75%)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sme{left:25%;transform:translateX(-25%)}.ck.ck-toolbar .ck-dropdown__panel{z-index:calc(var(--ck-z-modal) + 1)}:root{--ck-dropdown-arrow-size:calc(var(--ck-icon-size)*0.5)}.ck.ck-dropdown{font-size:inherit}.ck.ck-dropdown .ck-dropdown__arrow{width:var(--ck-dropdown-arrow-size)}[dir=ltr] .ck.ck-dropdown .ck-dropdown__arrow{right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-dropdown .ck-dropdown__arrow{left:var(--ck-spacing-standard);margin-right:var(--ck-spacing-small)}.ck.ck-dropdown.ck-disabled .ck-dropdown__arrow{opacity:var(--ck-disabled-opacity)}[dir=ltr] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-right:var(--ck-spacing-small)}.ck.ck-dropdown .ck-button.ck-dropdown__button .ck-button__label{width:7em;overflow:hidden;text-overflow:ellipsis}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on{border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-dropdown__button_label-width_auto .ck-button__label{width:auto}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-off:active,.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on:active{box-shadow:none}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-off:active:focus,.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on:active:focus{box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-dropdown__panel{border-radius:0}.ck-rounded-corners .ck.ck-dropdown__panel,.ck.ck-dropdown__panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-dropdown__panel{box-shadow:var(--ck-drop-shadow),0 0;background:var(--ck-color-dropdown-panel-background);border:1px solid var(--ck-color-dropdown-panel-border);bottom:0;min-width:100%}.ck.ck-dropdown__panel.ck-dropdown__panel_se{border-top-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_sw{border-top-right-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_ne{border-bottom-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_nw{border-bottom-right-radius:0}";},function(e,t,i){var n=i(1),o=i(32);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck.ck-toolbar{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-flow:row nowrap;align-items:center}.ck.ck-toolbar>.ck-toolbar__items{display:flex;flex-flow:row wrap;align-items:center;flex-grow:1}.ck.ck-toolbar .ck.ck-toolbar__separator{display:inline-block}.ck.ck-toolbar .ck.ck-toolbar__separator:first-child,.ck.ck-toolbar .ck.ck-toolbar__separator:last-child{display:none}.ck.ck-toolbar .ck-toolbar__line-break{flex-basis:100%}.ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items{flex-direction:column}.ck.ck-toolbar.ck-toolbar_floating>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck-dropdown__button .ck-dropdown__arrow{display:none}.ck.ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-toolbar,.ck.ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-toolbar{background:var(--ck-color-toolbar-background);padding:0 var(--ck-spacing-small);border:1px solid var(--ck-color-toolbar-border)}.ck.ck-toolbar .ck.ck-toolbar__separator{align-self:stretch;width:1px;min-width:1px;background:var(--ck-color-toolbar-border);margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck.ck-toolbar .ck-toolbar__line-break{height:0}.ck.ck-toolbar>.ck-toolbar__items>:not(.ck-toolbar__line-break){margin-right:var(--ck-spacing-small)}.ck.ck-toolbar>.ck-toolbar__items:empty+.ck.ck-toolbar__separator{display:none}.ck.ck-toolbar>.ck-toolbar__items>:not(.ck-toolbar__line-break),.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown{margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck.ck-toolbar.ck-toolbar_vertical{padding:0}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items>.ck{width:100%;margin:0;border-radius:0;border:0}.ck.ck-toolbar.ck-toolbar_compact{padding:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>*{margin:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>:not(:first-child):not(:last-child){border-radius:0}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck.ck-button.ck-dropdown__button{padding-left:var(--ck-spacing-tiny)}.ck-toolbar-container .ck.ck-toolbar{border:0}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck{margin-right:0}.ck.ck-toolbar[dir=rtl]:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-left:0}.ck.ck-toolbar[dir=rtl].ck-toolbar_compact>.ck-toolbar__items>.ck:first-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-top-left-radius:0;border-bottom-left-radius:0}.ck.ck-toolbar[dir=rtl].ck-toolbar_compact>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-top-right-radius:0;border-bottom-right-radius:0}.ck.ck-toolbar[dir=rtl]>.ck.ck-toolbar__separator,[dir=rtl] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=rtl].ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=rtl] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child){margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=ltr]>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-right:0}.ck.ck-toolbar[dir=ltr].ck-toolbar_compact>.ck-toolbar__items>.ck:first-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-top-right-radius:0;border-bottom-right-radius:0}.ck.ck-toolbar[dir=ltr].ck-toolbar_compact>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-top-left-radius:0;border-bottom-left-radius:0}.ck.ck-toolbar[dir=ltr]>.ck.ck-toolbar__separator,[dir=ltr] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-right:var(--ck-spacing-small)}.ck.ck-toolbar[dir=ltr].ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=ltr] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child){margin-right:var(--ck-spacing-small)}";},function(e,t,i){var n=i(1),o=i(34);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck.ck-list{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-direction:column}.ck.ck-list .ck-list__item,.ck.ck-list .ck-list__separator{display:block}.ck.ck-list .ck-list__item>:focus{position:relative;z-index:var(--ck-z-default)}.ck.ck-list{border-radius:0}.ck-rounded-corners .ck.ck-list,.ck.ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-list{list-style-type:none;background:var(--ck-color-list-background)}.ck.ck-list__item{cursor:default;min-width:12em}.ck.ck-list__item .ck-button{min-height:unset;width:100%;text-align:left;border-radius:0;padding:calc(var(--ck-line-height-base)*0.2*var(--ck-font-size-base)) calc(var(--ck-line-height-base)*0.4*var(--ck-font-size-base))}.ck.ck-list__item .ck-button .ck-button__label{line-height:calc(var(--ck-line-height-base)*1.2*var(--ck-font-size-base))}.ck.ck-list__item .ck-button:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on{background:var(--ck-color-list-button-on-background);color:var(--ck-color-list-button-on-text)}.ck.ck-list__item .ck-button.ck-on:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-on-background-focus)}.ck.ck-list__item .ck-button.ck-on:focus:not(.ck-disabled){border-color:var(--ck-color-base-background)}.ck.ck-list__item .ck-button:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background)}.ck.ck-list__item .ck-switchbutton.ck-on{background:var(--ck-color-list-background);color:inherit}.ck.ck-list__item .ck-switchbutton.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background);color:inherit}.ck.ck-list__separator{height:1px;width:100%;background:var(--ck-color-base-border)}";},function(e,t,i){var n=i(1),o=i(36);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=":root{--ck-toolbar-dropdown-max-width:60vw}.ck.ck-toolbar-dropdown>.ck-dropdown__panel{width:max-content;max-width:var(--ck-toolbar-dropdown-max-width)}.ck.ck-toolbar-dropdown>.ck-dropdown__panel .ck-button:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-toolbar-dropdown .ck-toolbar{border:0}";},function(e,t,i){var n=i(1),o=i(38);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck.ck-dropdown .ck-dropdown__panel .ck-list{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list,.ck.ck-dropdown .ck-dropdown__panel .ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}";},function(e,t,i){var n=i(1),o=i(40);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=":root{--ck-color-editable-blur-selection:#d9d9d9}.ck.ck-editor__editable:not(.ck-editor__nested-editable){border-radius:0}.ck-rounded-corners .ck.ck-editor__editable:not(.ck-editor__nested-editable),.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-focused{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0}.ck.ck-editor__editable_inline{overflow:auto;padding:0 var(--ck-spacing-standard);border:1px solid transparent}.ck.ck-editor__editable_inline[dir=ltr]{text-align:left}.ck.ck-editor__editable_inline[dir=rtl]{text-align:right}.ck.ck-editor__editable_inline>:first-child{margin-top:var(--ck-spacing-large)}.ck.ck-editor__editable_inline>:last-child{margin-bottom:var(--ck-spacing-large)}.ck.ck-editor__editable_inline.ck-blurred ::selection{background:var(--ck-color-editable-blur-selection)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_n]:after{border-bottom-color:var(--ck-color-base-foreground)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_s]:after{border-top-color:var(--ck-color-base-foreground)}";},function(e,t,i){var n=i(1),o=i(42);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck.ck-label{display:block}.ck.ck-voice-label{display:none}.ck.ck-label{font-weight:700}";},function(e,t,i){var n=i(1),o=i(44);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck.ck-form__header{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;justify-content:space-between}:root{--ck-form-header-height:38px}.ck.ck-form__header{padding:var(--ck-spacing-small) var(--ck-spacing-large);height:var(--ck-form-header-height);line-height:var(--ck-form-header-height);border-bottom:1px solid var(--ck-color-base-border)}.ck.ck-form__header .ck-form__header__label{font-weight:700}";},function(e,t,i){var n=i(1),o=i(46);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=":root{--ck-input-text-width:18em}.ck.ck-input-text{border-radius:0}.ck-rounded-corners .ck.ck-input-text,.ck.ck-input-text.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-input-text{background:var(--ck-color-input-background);border:1px solid var(--ck-color-input-border);padding:var(--ck-spacing-extra-tiny) var(--ck-spacing-medium);min-width:var(--ck-input-text-width);min-height:var(--ck-ui-component-min-height);transition:box-shadow .1s ease-in-out,border .1s ease-in-out}.ck.ck-input-text:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-input-text[readonly]{border:1px solid var(--ck-color-input-disabled-border);background:var(--ck-color-input-disabled-background);color:var(--ck-color-input-disabled-text)}.ck.ck-input-text[readonly]:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-input-text.ck-error{border-color:var(--ck-color-input-error-border);animation:ck-text-input-shake .3s ease both}.ck.ck-input-text.ck-error:focus{box-shadow:var(--ck-focus-error-outer-shadow),0 0}@keyframes ck-text-input-shake{20%{transform:translateX(-2px)}40%{transform:translateX(2px)}60%{transform:translateX(-1px)}80%{transform:translateX(1px)}}";},function(e,t,i){var n=i(1),o=i(48);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper{display:flex;position:relative}.ck.ck-labeled-field-view .ck.ck-label{display:block;position:absolute}:root{--ck-labeled-field-view-transition:.1s cubic-bezier(0,0,0.24,0.95);--ck-labeled-field-empty-unfocused-max-width:100% - 2 * var(--ck-spacing-medium);--ck-color-labeled-field-label-background:var(--ck-color-base-background)}.ck.ck-labeled-field-view{border-radius:0}.ck-rounded-corners .ck.ck-labeled-field-view,.ck.ck-labeled-field-view.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper{width:100%}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{top:0}[dir=ltr] .ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{left:0}[dir=rtl] .ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{right:0}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{pointer-events:none;transform-origin:0 0;transform:translate(var(--ck-spacing-medium),-6px) scale(.75);background:var(--ck-color-labeled-field-label-background);padding:0 calc(var(--ck-font-size-tiny)*0.5);line-height:normal;font-weight:400;text-overflow:ellipsis;overflow:hidden;max-width:100%;transition:transform var(--ck-labeled-field-view-transition),padding var(--ck-labeled-field-view-transition),background var(--ck-labeled-field-view-transition)}.ck.ck-labeled-field-view.ck-error .ck-input:not([readonly])+.ck.ck-label,.ck.ck-labeled-field-view.ck-error>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{color:var(--ck-color-base-error)}.ck.ck-labeled-field-view .ck-labeled-field-view__status{font-size:var(--ck-font-size-small);margin-top:var(--ck-spacing-small);white-space:normal}.ck.ck-labeled-field-view .ck-labeled-field-view__status.ck-labeled-field-view__status_error{color:var(--ck-color-base-error)}.ck.ck-labeled-field-view.ck-disabled>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{color:var(--ck-color-input-disabled-text)}[dir=ltr] .ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,[dir=ltr] .ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{transform:translate(var(--ck-spacing-medium),calc(var(--ck-font-size-base)*0.6)) scale(1)}[dir=rtl] .ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,[dir=rtl] .ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{transform:translate(calc(var(--ck-spacing-medium)*-1),calc(var(--ck-font-size-base)*0.6)) scale(1)}.ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{max-width:calc(var(--ck-labeled-field-empty-unfocused-max-width));background:transparent;padding:0}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown>.ck.ck-button{background:transparent}.ck.ck-labeled-field-view.ck-labeled-field-view_empty>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown>.ck-button>.ck-button__label{opacity:0}.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown+.ck-label{max-width:calc(var(--ck-labeled-field-empty-unfocused-max-width) - var(--ck-dropdown-arrow-size) - var(--ck-spacing-standard))}";},function(e,t,i){var n=i(1),o=i(50);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=':root{--ck-balloon-panel-arrow-z-index:calc(var(--ck-z-default) - 3)}.ck.ck-balloon-panel{display:none;position:absolute;z-index:var(--ck-z-modal)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{content:"";position:absolute}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_n]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_n]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_s]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_s]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel.ck-balloon-panel_visible{display:block}:root{--ck-balloon-arrow-offset:2px;--ck-balloon-arrow-height:10px;--ck-balloon-arrow-half-width:8px;--ck-balloon-arrow-drop-shadow:0 2px 2px var(--ck-color-shadow-drop)}.ck.ck-balloon-panel{border-radius:0}.ck-rounded-corners .ck.ck-balloon-panel,.ck.ck-balloon-panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-balloon-panel{box-shadow:var(--ck-drop-shadow),0 0;min-height:15px;background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{width:0;height:0;border-style:solid}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-left-width:var(--ck-balloon-arrow-half-width);border-bottom-width:var(--ck-balloon-arrow-height);border-right-width:var(--ck-balloon-arrow-half-width);border-top-width:0}.ck.ck-balloon-panel[class*=arrow_n]:before{border-bottom-color:var(--ck-color-panel-border)}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-left-color:transparent;border-right-color:transparent;border-top-color:transparent}.ck.ck-balloon-panel[class*=arrow_n]:after{border-bottom-color:var(--ck-color-panel-background);margin-top:var(--ck-balloon-arrow-offset)}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-left-width:var(--ck-balloon-arrow-half-width);border-bottom-width:0;border-right-width:var(--ck-balloon-arrow-half-width);border-top-width:var(--ck-balloon-arrow-height)}.ck.ck-balloon-panel[class*=arrow_s]:before{border-top-color:var(--ck-color-panel-border);filter:drop-shadow(var(--ck-balloon-arrow-drop-shadow))}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-left-color:transparent;border-bottom-color:transparent;border-right-color:transparent}.ck.ck-balloon-panel[class*=arrow_s]:after{border-top-color:var(--ck-color-panel-background);margin-bottom:var(--ck-balloon-arrow-offset)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:before{left:50%;margin-left:calc(var(--ck-balloon-arrow-half-width)*-1);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:before{left:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:before{right:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:before{left:50%;margin-left:calc(var(--ck-balloon-arrow-half-width)*-1);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:before{left:calc(var(--ck-balloon-arrow-half-width)*2);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:before{right:calc(var(--ck-balloon-arrow-half-width)*2);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:before{right:25%;margin-right:calc(var(--ck-balloon-arrow-half-width)*2);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:before{left:25%;margin-left:calc(var(--ck-balloon-arrow-half-width)*2);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:before{right:25%;margin-right:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:before{left:25%;margin-left:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}';},function(e,t,i){var n=i(1),o=i(52);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck .ck-balloon-rotator__navigation{display:flex;align-items:center;justify-content:center}.ck .ck-balloon-rotator__content .ck-toolbar{justify-content:center}.ck .ck-balloon-rotator__navigation{background:var(--ck-color-toolbar-background);border-bottom:1px solid var(--ck-color-toolbar-border);padding:0 var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation>*{margin-right:var(--ck-spacing-small);margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation .ck-balloon-rotator__counter{margin-right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-small)}.ck .ck-balloon-rotator__content .ck.ck-annotation-wrapper{box-shadow:none}";},function(e,t,i){var n=i(1),o=i(54);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck .ck-fake-panel{position:absolute;z-index:calc(var(--ck-z-modal) - 1)}.ck .ck-fake-panel div{position:absolute}.ck .ck-fake-panel div:first-child{z-index:2}.ck .ck-fake-panel div:nth-child(2){z-index:1}:root{--ck-balloon-fake-panel-offset-horizontal:6px;--ck-balloon-fake-panel-offset-vertical:6px}.ck .ck-fake-panel div{box-shadow:var(--ck-drop-shadow),0 0;min-height:15px;background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border);border-radius:var(--ck-border-radius);width:100%;height:100%}.ck .ck-fake-panel div:first-child{margin-left:var(--ck-balloon-fake-panel-offset-horizontal);margin-top:var(--ck-balloon-fake-panel-offset-vertical)}.ck .ck-fake-panel div:nth-child(2){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*2);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*2)}.ck .ck-fake-panel div:nth-child(3){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*3);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*3)}.ck .ck-balloon-panel_arrow_s+.ck-fake-panel,.ck .ck-balloon-panel_arrow_se+.ck-fake-panel,.ck .ck-balloon-panel_arrow_sw+.ck-fake-panel{--ck-balloon-fake-panel-offset-vertical:-6px}";},function(e,t,i){var n=i(1),o=i(56);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck.ck-sticky-panel .ck-sticky-panel__content_sticky{z-index:var(--ck-z-modal);position:fixed;top:0}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky_bottom-limit{top:auto;position:absolute}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky{box-shadow:var(--ck-drop-shadow),0 0;border-width:0 1px 1px;border-top-left-radius:0;border-top-right-radius:0}";},function(e,t,i){var n=i(1),o=i(58);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck.ck-block-toolbar-button{position:absolute;z-index:var(--ck-z-default)}:root{--ck-color-block-toolbar-button:var(--ck-color-text);--ck-block-toolbar-button-size:var(--ck-font-size-normal)}.ck.ck-block-toolbar-button{color:var(--ck-color-block-toolbar-button);font-size:var(--ck-block-toolbar-size)}";},function(e,t,i){var n=i(1),o=i(60);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck.ck-placeholder,.ck .ck-placeholder{position:relative}.ck.ck-placeholder:before,.ck .ck-placeholder:before{position:absolute;left:0;right:0;content:attr(data-placeholder);pointer-events:none}.ck.ck-read-only .ck-placeholder:before{display:none}.ck.ck-placeholder:before,.ck .ck-placeholder:before{cursor:text;color:var(--ck-color-engine-placeholder-text)}";},function(e,t,i){var n=i(1),o=i(62);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck.ck-editor{position:relative}.ck.ck-editor .ck-editor__top .ck-sticky-panel .ck-toolbar{z-index:var(--ck-z-modal)}.ck.ck-editor__top .ck-sticky-panel .ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-toolbar,.ck.ck-editor__top .ck-sticky-panel .ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius);border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-editor__top .ck-sticky-panel .ck-toolbar{border-bottom-width:0}.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar{border-bottom-width:1px;border-radius:0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar,.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:0}.ck.ck-editor__main>.ck-editor__editable{background:var(--ck-color-base-background);border-radius:0}.ck-rounded-corners .ck.ck-editor__main>.ck-editor__editable,.ck.ck-editor__main>.ck-editor__editable.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}.ck.ck-editor__main>.ck-editor__editable:not(.ck-focused){border-color:var(--ck-color-base-border)}";},function(e,t,i){var n=i(1),o=i(64);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports='.ck .ck-widget .ck-widget__type-around__button{display:block;position:absolute;overflow:hidden;z-index:var(--ck-z-default)}.ck .ck-widget .ck-widget__type-around__button svg{position:absolute;top:50%;left:50%;z-index:calc(var(--ck-z-default) + 2)}.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_before{top:calc(var(--ck-widget-outline-thickness)*-0.5);left:min(10%,30px);transform:translateY(-50%)}.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_after{bottom:calc(var(--ck-widget-outline-thickness)*-0.5);right:min(10%,30px);transform:translateY(50%)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:after,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover:after{content:"";display:block;position:absolute;top:1px;left:1px;z-index:calc(var(--ck-z-default) + 1)}.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__fake-caret{display:none;position:absolute;left:0;right:0}.ck .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__fake-caret{left:calc(var(--ck-widget-outline-thickness)*-1);right:calc(var(--ck-widget-outline-thickness)*-1)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__fake-caret{top:calc(var(--ck-widget-outline-thickness)*-1 - 1px);display:block}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__fake-caret{bottom:calc(var(--ck-widget-outline-thickness)*-1 - 1px);display:block}.ck.ck-editor__editable.ck-read-only .ck-widget__type-around,.ck.ck-editor__editable.ck-restricted-editing_mode_restricted .ck-widget__type-around,.ck.ck-editor__editable.ck-widget__type-around_disabled .ck-widget__type-around{display:none}:root{--ck-widget-type-around-button-size:20px;--ck-color-widget-type-around-button-active:var(--ck-color-focus-border);--ck-color-widget-type-around-button-hover:var(--ck-color-widget-hover-border);--ck-color-widget-type-around-button-blurred-editable:var(--ck-color-widget-blurred-border);--ck-color-widget-type-around-button-radar-start-alpha:0;--ck-color-widget-type-around-button-radar-end-alpha:.3;--ck-color-widget-type-around-button-icon:var(--ck-color-base-background)}.ck .ck-widget .ck-widget__type-around__button{width:var(--ck-widget-type-around-button-size);height:var(--ck-widget-type-around-button-size);background:var(--ck-color-widget-type-around-button);border-radius:100px;transition:opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);opacity:0;pointer-events:none}.ck .ck-widget .ck-widget__type-around__button svg{width:10px;height:8px;transform:translate(-50%,-50%);transition:transform .5s ease;margin-top:1px}.ck .ck-widget .ck-widget__type-around__button svg *{stroke-dasharray:10;stroke-dashoffset:0;fill:none;stroke:var(--ck-color-widget-type-around-button-icon);stroke-width:1.5px;stroke-linecap:round;stroke-linejoin:round}.ck .ck-widget .ck-widget__type-around__button svg line{stroke-dasharray:7}.ck .ck-widget .ck-widget__type-around__button:hover{animation:ck-widget-type-around-button-sonar 1s ease infinite}.ck .ck-widget .ck-widget__type-around__button:hover svg polyline{animation:ck-widget-type-around-arrow-dash 2s linear}.ck .ck-widget .ck-widget__type-around__button:hover svg line{animation:ck-widget-type-around-arrow-tip-dash 2s linear}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__button{opacity:1;pointer-events:auto}.ck .ck-widget:not(.ck-widget_selected)>.ck-widget__type-around>.ck-widget__type-around__button{background:var(--ck-color-widget-type-around-button-hover)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover{background:var(--ck-color-widget-type-around-button-active)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:after,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover:after{width:calc(var(--ck-widget-type-around-button-size) - 2px);height:calc(var(--ck-widget-type-around-button-size) - 2px);border-radius:100px;background:linear-gradient(135deg,hsla(0,0%,100%,0),hsla(0,0%,100%,.3))}.ck .ck-widget.ck-widget_with-selection-handle>.ck-widget__type-around>.ck-widget__type-around__button_before{margin-left:20px}.ck .ck-widget .ck-widget__type-around__fake-caret{pointer-events:none;height:1px;animation:ck-widget-type-around-fake-caret-pulse 1s linear infinite normal forwards;outline:1px solid hsla(0,0%,100%,.5);background:var(--ck-color-base-text)}.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_after,.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_before{outline-color:transparent}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected:hover,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle{opacity:0}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected.ck-widget_with-resizer>.ck-widget__resizer,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected.ck-widget_with-resizer>.ck-widget__resizer{opacity:0}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__type-around>.ck-widget__type-around__button_before{margin-left:0;margin-right:20px}.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:not(:hover){background:var(--ck-color-widget-type-around-button-blurred-editable)}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:not(:hover) svg *{stroke:#999}@keyframes ck-widget-type-around-arrow-dash{0%{stroke-dashoffset:10}20%,to{stroke-dashoffset:0}}@keyframes ck-widget-type-around-arrow-tip-dash{0%,20%{stroke-dashoffset:7}40%,to{stroke-dashoffset:0}}@keyframes ck-widget-type-around-button-sonar{0%{box-shadow:0 0 0 0 hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-start-alpha))}50%{box-shadow:0 0 0 5px hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-end-alpha))}to{box-shadow:0 0 0 5px hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-start-alpha))}}@keyframes ck-widget-type-around-fake-caret-pulse{0%{opacity:1}49%{opacity:1}50%{opacity:0}99%{opacity:0}to{opacity:1}}';},function(e,t,i){var n=i(1),o=i(66);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=":root{--ck-color-resizer:var(--ck-color-focus-border);--ck-color-resizer-tooltip-background:#262626;--ck-color-resizer-tooltip-text:#f2f2f2;--ck-resizer-border-radius:var(--ck-border-radius);--ck-resizer-tooltip-offset:10px;--ck-resizer-tooltip-height:calc(var(--ck-spacing-small)*2 + 10px)}.ck .ck-widget,.ck .ck-widget.ck-widget_with-selection-handle{position:relative}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{position:absolute}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{display:block}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle{visibility:visible}.ck .ck-size-view{background:var(--ck-color-resizer-tooltip-background);color:var(--ck-color-resizer-tooltip-text);border:1px solid var(--ck-color-resizer-tooltip-text);border-radius:var(--ck-resizer-border-radius);font-size:var(--ck-font-size-tiny);display:block;padding:0 var(--ck-spacing-small);height:var(--ck-resizer-tooltip-height);line-height:var(--ck-resizer-tooltip-height)}.ck .ck-size-view.ck-orientation-above-center,.ck .ck-size-view.ck-orientation-bottom-left,.ck .ck-size-view.ck-orientation-bottom-right,.ck .ck-size-view.ck-orientation-top-left,.ck .ck-size-view.ck-orientation-top-right{position:absolute}.ck .ck-size-view.ck-orientation-top-left{top:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-top-right{top:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-right{bottom:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-left{bottom:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-above-center{top:calc(var(--ck-resizer-tooltip-height)*-1);left:50%;transform:translate(-50%)}:root{--ck-widget-outline-thickness:3px;--ck-widget-handler-icon-size:16px;--ck-widget-handler-animation-duration:200ms;--ck-widget-handler-animation-curve:ease;--ck-color-widget-blurred-border:#dedede;--ck-color-widget-hover-border:#ffc83d;--ck-color-widget-editable-focus-background:var(--ck-color-base-background);--ck-color-widget-drag-handler-icon-color:var(--ck-color-base-background)}.ck .ck-widget{outline-width:var(--ck-widget-outline-thickness);outline-style:solid;outline-color:transparent;transition:outline-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_selected,.ck .ck-widget.ck-widget_selected:hover{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-focus-border)}.ck .ck-widget:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-editor__nested-editable{border:1px solid transparent}.ck .ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck .ck-editor__nested-editable:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0;background-color:var(--ck-color-widget-editable-focus-background)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{padding:4px;box-sizing:border-box;background-color:transparent;opacity:0;transition:background-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),visibility var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);border-radius:var(--ck-border-radius) var(--ck-border-radius) 0 0;transform:translateY(-100%);left:calc(0px - var(--ck-widget-outline-thickness));top:0}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{width:var(--ck-widget-handler-icon-size);height:var(--ck-widget-handler-icon-size);color:var(--ck-color-widget-drag-handler-icon-color)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:0;transition:opacity .3s var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover .ck-icon .ck-icon__selected-indicator{opacity:1}.ck .ck-widget.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle{opacity:1;background-color:var(--ck-color-widget-hover-border)}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle{opacity:1;background-color:var(--ck-color-focus-border)}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:1}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{left:auto;right:calc(0px - var(--ck-widget-outline-thickness))}.ck.ck-editor__editable.ck-read-only .ck-widget{transition:none}.ck.ck-editor__editable.ck-read-only .ck-widget:not(.ck-widget_selected){--ck-widget-outline-thickness:0px}.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle,.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover{outline-color:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle>.ck-widget__selection-handle,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle>.ck-widget__selection-handle:hover,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover.ck-widget_with-selection-handle>.ck-widget__selection-handle,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover.ck-widget_with-selection-handle>.ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable>.ck-widget.ck-widget_with-selection-handle:first-child,.ck.ck-editor__editable blockquote>.ck-widget.ck-widget_with-selection-handle:first-child{margin-top:calc(1em + var(--ck-widget-handler-icon-size))}";},function(e,t,i){var n=i(1),o=i(68);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports='.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position{display:inline;position:relative;pointer-events:none}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span{position:absolute;width:0}.ck.ck-editor__editable .ck-widget:-webkit-drag>.ck-widget__selection-handle,.ck.ck-editor__editable .ck-widget:-webkit-drag>.ck-widget__type-around{display:none}:root{--ck-clipboard-drop-target-dot-width:12px;--ck-clipboard-drop-target-dot-height:8px;--ck-clipboard-drop-target-color:var(--ck-color-focus-border)}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span{bottom:calc(var(--ck-clipboard-drop-target-dot-height)*-0.5);top:calc(var(--ck-clipboard-drop-target-dot-height)*-0.5);border:1px solid var(--ck-clipboard-drop-target-color);background:var(--ck-clipboard-drop-target-color);margin-left:-1px}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span:after{content:"";width:0;height:0;display:block;position:absolute;left:50%;top:calc(var(--ck-clipboard-drop-target-dot-height)*-0.5);transform:translateX(-50%);border-left:calc(var(--ck-clipboard-drop-target-dot-width)*0.5) solid transparent;border-bottom:0 solid transparent;border-right:calc(var(--ck-clipboard-drop-target-dot-width)*0.5) solid transparent;border-top:calc(var(--ck-clipboard-drop-target-dot-height)) solid var(--ck-clipboard-drop-target-color)}.ck.ck-editor__editable .ck-widget.ck-clipboard-drop-target-range{outline:var(--ck-widget-outline-thickness) solid var(--ck-clipboard-drop-target-color)!important}.ck.ck-editor__editable .ck-widget:-webkit-drag{zoom:.6;outline:none!important}';},function(e,t,i){var n=i(1),o=i(70);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck-content blockquote{overflow:hidden;padding-right:1.5em;padding-left:1.5em;margin-left:0;margin-right:0;font-style:italic;border-left:5px solid #ccc}.ck-content[dir=rtl] blockquote{border-left:0;border-right:5px solid #ccc}";},function(e,t){e.exports=".ck.ck-heading_heading1{font-size:20px}.ck.ck-heading_heading2{font-size:17px}.ck.ck-heading_heading3{font-size:14px}.ck[class*=ck-heading_heading]{font-weight:700}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__button .ck-button__label{width:8em}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__panel .ck-list__item{min-width:18em}";},function(e,t,i){var n=i(1),o=i(73);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck .ck-widget_with-resizer{position:relative}.ck .ck-widget__resizer{display:none;position:absolute;pointer-events:none;left:0;top:0}.ck-focused .ck-widget_with-resizer.ck-widget_selected>.ck-widget__resizer{display:block}.ck .ck-widget__resizer__handle{position:absolute;pointer-events:all}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-right,.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-left{cursor:nwse-resize}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-left,.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-right{cursor:nesw-resize}:root{--ck-resizer-size:10px;--ck-resizer-offset:calc(var(--ck-resizer-size)/-2 - 2px);--ck-resizer-border-width:1px}.ck .ck-widget__resizer{outline:1px solid var(--ck-color-resizer)}.ck .ck-widget__resizer__handle{width:var(--ck-resizer-size);height:var(--ck-resizer-size);background:var(--ck-color-focus-border);border:var(--ck-resizer-border-width) solid #fff;border-radius:var(--ck-resizer-border-radius)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-left{top:var(--ck-resizer-offset);left:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-right{top:var(--ck-resizer-offset);right:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-right{bottom:var(--ck-resizer-offset);right:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-left{bottom:var(--ck-resizer-offset);left:var(--ck-resizer-offset)}";},function(e,t,i){var n=i(1),o=i(75);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck.ck-text-alternative-form{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-text-alternative-form .ck-labeled-field-view{display:inline-block}.ck.ck-text-alternative-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-text-alternative-form{flex-wrap:wrap}.ck.ck-text-alternative-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-text-alternative-form .ck-button{flex-basis:50%}}";},function(e,t){e.exports='.ck-vertical-form .ck-button:after{content:"";width:0;position:absolute;right:-1px;top:var(--ck-spacing-small);bottom:var(--ck-spacing-small);z-index:1}@media screen and (max-width:600px){.ck.ck-responsive-form .ck-button:after{content:"";width:0;position:absolute;right:-1px;top:var(--ck-spacing-small);bottom:var(--ck-spacing-small);z-index:1}}.ck-vertical-form>.ck-button:nth-last-child(2):after{border-right:1px solid var(--ck-color-base-border)}.ck.ck-responsive-form{padding:var(--ck-spacing-large)}.ck.ck-responsive-form:focus{outline:none}[dir=ltr] .ck.ck-responsive-form>:not(:first-child),[dir=rtl] .ck.ck-responsive-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-responsive-form{padding:0;width:calc(var(--ck-input-text-width)*0.8)}.ck.ck-responsive-form .ck-labeled-field-view{margin:var(--ck-spacing-large) var(--ck-spacing-large) 0}.ck.ck-responsive-form .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-responsive-form .ck-labeled-field-view .ck-labeled-field-view__error{white-space:normal}.ck.ck-responsive-form>.ck-button:last-child,.ck.ck-responsive-form>.ck-button:nth-last-child(2){padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-large);border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-responsive-form>.ck-button:last-child,[dir=ltr] .ck.ck-responsive-form>.ck-button:nth-last-child(2),[dir=rtl] .ck.ck-responsive-form>.ck-button:last-child,[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2){margin-left:0}.ck.ck-responsive-form>.ck-button:nth-last-child(2):after,[dir=rtl] .ck.ck-responsive-form>.ck-button:last-child:last-of-type,[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2):last-of-type{border-right:1px solid var(--ck-color-base-border)}}';},function(e,t){e.exports=".ck-content .image{display:table;clear:both;text-align:center;margin:.9em auto;min-width:50px}.ck-content .image img{display:block;margin:0 auto;max-width:100%;min-width:100%}.ck-content .image-inline{display:inline-flex;max-width:100%;align-items:flex-start}.ck-content .image-inline picture{display:flex}.ck-content .image-inline img,.ck-content .image-inline picture{flex-grow:1;flex-shrink:1;max-width:100%}.ck.ck-editor__editable .image>figcaption.ck-placeholder:before{padding-left:inherit;padding-right:inherit;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ck.ck-editor__editable .image-inline.ck-widget_selected,.ck.ck-editor__editable .image.ck-widget_selected{z-index:1}.ck.ck-editor__editable .image-inline.ck-widget_selected ::selection{display:none}.ck.ck-editor__editable td .image-inline img,.ck.ck-editor__editable th .image-inline img{max-width:none}";},function(e,t,i){var n=i(1),o=i(79);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=":root{--ck-color-image-caption-background:#f7f7f7;--ck-color-image-caption-text:#333;--ck-color-image-caption-highligted-background:#fd0}.ck-content .image>figcaption{display:table-caption;caption-side:bottom;word-break:break-word;color:var(--ck-color-image-caption-text);background-color:var(--ck-color-image-caption-background);padding:.6em;font-size:.75em;outline-offset:-1px}.ck.ck-editor__editable .image>figcaption.image__caption_highlighted{animation:ck-image-caption-highlight .6s ease-out}@keyframes ck-image-caption-highlight{0%{background-color:var(--ck-color-image-caption-highligted-background)}to{background-color:var(--ck-color-image-caption-background)}}";},function(e,t,i){var n=i(1),o=i(81);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=":root{--ck-image-style-spacing:1.5em;--ck-inline-image-style-spacing:calc(var(--ck-image-style-spacing)/2)}.ck-content .image-style-block-align-left,.ck-content .image-style-block-align-right{max-width:calc(100% - var(--ck-image-style-spacing))}.ck-content .image-style-align-left,.ck-content .image-style-align-right{clear:none}.ck-content .image-style-side{float:right;margin-left:var(--ck-image-style-spacing);max-width:50%}.ck-content .image-style-align-left{float:left;margin-right:var(--ck-image-style-spacing)}.ck-content .image-style-align-center{margin-left:auto;margin-right:auto}.ck-content .image-style-align-right{float:right;margin-left:var(--ck-image-style-spacing)}.ck-content .image-style-block-align-right{margin-right:0;margin-left:auto}.ck-content .image-style-block-align-left{margin-left:0;margin-right:auto}.ck-content p+.image-style-align-left,.ck-content p+.image-style-align-right,.ck-content p+.image-style-side{margin-top:0}.ck-content .image-inline.image-style-align-left,.ck-content .image-inline.image-style-align-right{margin-top:var(--ck-inline-image-style-spacing);margin-bottom:var(--ck-inline-image-style-spacing)}.ck-content .image-inline.image-style-align-left{margin-right:var(--ck-inline-image-style-spacing)}.ck-content .image-inline.image-style-align-right{margin-left:var(--ck-inline-image-style-spacing)}.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__action:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover),.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__action:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover){background-color:var(--ck-color-button-on-background)}.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__action:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover):after,.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__action:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover):after{display:none}.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open:hover>.ck-splitbutton__action:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open:hover>.ck-splitbutton__arrow:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open:hover>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover){background-color:var(--ck-color-button-on-hover-background)}";},function(e,t,i){var n=i(1),o=i(83);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck.ck-editor__editable .image,.ck.ck-editor__editable .image-inline{position:relative}.ck.ck-editor__editable .image-inline .ck-progress-bar,.ck.ck-editor__editable .image .ck-progress-bar{position:absolute;top:0;left:0}.ck.ck-editor__editable .image-inline.ck-appear,.ck.ck-editor__editable .image.ck-appear{animation:fadeIn .7s}.ck.ck-editor__editable .image-inline .ck-progress-bar,.ck.ck-editor__editable .image .ck-progress-bar{height:2px;width:0;background:var(--ck-color-upload-bar-background);transition:width .1s}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}";},function(e,t,i){var n=i(1),o=i(85);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports='.ck-image-upload-complete-icon{display:block;position:absolute;top:min(var(--ck-spacing-medium),6%);right:min(var(--ck-spacing-medium),6%);border-radius:50%;z-index:1}.ck-image-upload-complete-icon:after{content:"";position:absolute}:root{--ck-color-image-upload-icon:#fff;--ck-color-image-upload-icon-background:#008a00;--ck-image-upload-icon-size:20;--ck-image-upload-icon-width:2px;--ck-image-upload-icon-is-visible:clamp(0px,100% - 50px,1px)}.ck-image-upload-complete-icon{opacity:0;background:var(--ck-color-image-upload-icon-background);animation-name:ck-upload-complete-icon-show,ck-upload-complete-icon-hide;animation-fill-mode:forwards,forwards;animation-duration:.5s,.5s;font-size:calc(1px*var(--ck-image-upload-icon-size));animation-delay:0ms,3s;overflow:hidden;width:calc(var(--ck-image-upload-icon-is-visible)*var(--ck-image-upload-icon-size));height:calc(var(--ck-image-upload-icon-is-visible)*var(--ck-image-upload-icon-size))}.ck-image-upload-complete-icon:after{left:25%;top:50%;opacity:0;height:0;width:0;transform:scaleX(-1) rotate(135deg);transform-origin:left top;border-top:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);border-right:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);animation-name:ck-upload-complete-icon-check;animation-duration:.5s;animation-delay:.5s;animation-fill-mode:forwards;box-sizing:border-box}@keyframes ck-upload-complete-icon-show{0%{opacity:0}to{opacity:1}}@keyframes ck-upload-complete-icon-hide{0%{opacity:1}to{opacity:0}}@keyframes ck-upload-complete-icon-check{0%{opacity:1;width:0;height:0}33%{width:.3em;height:0}to{opacity:1;width:.3em;height:.45em}}';},function(e,t,i){var n=i(1),o=i(87);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports='.ck .ck-upload-placeholder-loader{position:absolute;display:flex;align-items:center;justify-content:center;top:0;left:0}.ck .ck-upload-placeholder-loader:before{content:"";position:relative}:root{--ck-color-upload-placeholder-loader:#b3b3b3;--ck-upload-placeholder-loader-size:32px}.ck .ck-image-upload-placeholder{width:100%;margin:0}.ck .ck-upload-placeholder-loader{width:100%;height:100%}.ck .ck-upload-placeholder-loader:before{width:var(--ck-upload-placeholder-loader-size);height:var(--ck-upload-placeholder-loader-size);border-radius:50%;border-top:3px solid var(--ck-color-upload-placeholder-loader);border-right:2px solid transparent;animation:ck-upload-placeholder-loader 1s linear infinite}@keyframes ck-upload-placeholder-loader{to{transform:rotate(1turn)}}';},function(e,t,i){var n=i(1),o=i(89);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck .ck-link_selected{background:var(--ck-color-link-selected-background)}.ck .ck-link_selected span.image-inline{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-link-selected-background)}.ck .ck-fake-link-selection{background:var(--ck-color-link-fake-selection)}.ck .ck-fake-link-selection_collapsed{height:100%;border-right:1px solid var(--ck-color-base-text);margin-right:-1px;outline:1px solid hsla(0,0%,100%,.5)}";},function(e,t,i){var n=i(1),o=i(91);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck.ck-link-form{display:flex}.ck.ck-link-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-link-form{flex-wrap:wrap}.ck.ck-link-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-link-form .ck-button{flex-basis:50%}}.ck.ck-link-form_layout-vertical{display:block}.ck.ck-link-form_layout-vertical .ck-button.ck-button-cancel,.ck.ck-link-form_layout-vertical .ck-button.ck-button-save{margin-top:var(--ck-spacing-medium)}.ck.ck-link-form_layout-vertical{padding:0;min-width:var(--ck-input-text-width)}.ck.ck-link-form_layout-vertical .ck-labeled-field-view{margin:var(--ck-spacing-large) var(--ck-spacing-large) var(--ck-spacing-small)}.ck.ck-link-form_layout-vertical .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-link-form_layout-vertical .ck-button{padding:var(--ck-spacing-standard);margin:0;border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border);width:50%}[dir=ltr] .ck.ck-link-form_layout-vertical .ck-button,[dir=rtl] .ck.ck-link-form_layout-vertical .ck-button{margin-left:0}[dir=rtl] .ck.ck-link-form_layout-vertical .ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}.ck.ck-link-form_layout-vertical .ck.ck-list{margin:var(--ck-spacing-standard) var(--ck-spacing-large)}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton{border:0;padding:0;width:100%}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton:hover{background:none}";},function(e,t,i){var n=i(1),o=i(93);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck.ck-link-actions{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-link-actions .ck-link-actions__preview{display:inline-block}.ck.ck-link-actions .ck-link-actions__preview .ck-button__label{overflow:hidden}@media screen and (max-width:600px){.ck.ck-link-actions{flex-wrap:wrap}.ck.ck-link-actions .ck-link-actions__preview{flex-basis:100%}.ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){flex-basis:50%}}.ck.ck-link-actions .ck-button.ck-link-actions__preview{padding-left:0;padding-right:0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{padding:0 var(--ck-spacing-medium);color:var(--ck-color-link-default);text-overflow:ellipsis;cursor:pointer;max-width:var(--ck-input-text-width);min-width:3em;text-align:center}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label:hover{text-decoration:underline}.ck.ck-link-actions .ck-button.ck-link-actions__preview,.ck.ck-link-actions .ck-button.ck-link-actions__preview:active,.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus,.ck.ck-link-actions .ck-button.ck-link-actions__preview:hover{background:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:active{box-shadow:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus .ck-button__label{text-decoration:underline}[dir=ltr] .ck.ck-link-actions .ck-button:not(:first-child),[dir=rtl] .ck.ck-link-actions .ck-button:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-link-actions .ck-button.ck-link-actions__preview{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{min-width:0;max-width:100%}[dir=ltr] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview),[dir=rtl] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){margin-left:0}}";},function(e,t,i){var n=i(1),o=i(95);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports='.ck-media__wrapper .ck-media__placeholder{display:flex;flex-direction:column;align-items:center}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-tooltip{display:block}@media (hover:none){.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-tooltip{display:none}}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url{max-width:100%;position:relative}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url:hover .ck-tooltip{visibility:visible;opacity:1}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-media__placeholder__url__text{overflow:hidden;display:block}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="goo.gl/maps"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="maps.app.goo.gl"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="maps.google.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck-media__placeholder__icon *{display:none}.ck-editor__editable:not(.ck-read-only) .ck-media__wrapper>:not(.ck-media__placeholder),.ck-editor__editable:not(.ck-read-only) .ck-widget:not(.ck-widget_selected) .ck-media__placeholder{pointer-events:none}:root{--ck-media-embed-placeholder-icon-size:3em;--ck-color-media-embed-placeholder-url-text:#757575;--ck-color-media-embed-placeholder-url-text-hover:var(--ck-color-base-text)}.ck-media__wrapper{margin:0 auto}.ck-media__wrapper .ck-media__placeholder{padding:calc(var(--ck-spacing-standard)*3);background:var(--ck-color-base-foreground)}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon{min-width:var(--ck-media-embed-placeholder-icon-size);height:var(--ck-media-embed-placeholder-icon-size);margin-bottom:var(--ck-spacing-large);background-position:50%;background-size:cover}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon .ck-icon{width:100%;height:100%}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text{color:var(--ck-color-media-embed-placeholder-url-text);white-space:nowrap;text-align:center;font-style:italic;text-overflow:ellipsis}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:var(--ck-color-media-embed-placeholder-url-text-hover);cursor:pointer;text-decoration:underline}.ck-media__wrapper[data-oembed-url*="open.spotify.com"]{max-width:300px;max-height:380px}.ck-media__wrapper[data-oembed-url*="goo.gl/maps"] .ck-media__placeholder__icon,.ck-media__wrapper[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon,.ck-media__wrapper[data-oembed-url*="maps.app.goo.gl"] .ck-media__placeholder__icon,.ck-media__wrapper[data-oembed-url*="maps.google.com"] .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTAuMzc4IiBoZWlnaHQ9IjI1NC4xNjciIHZpZXdCb3g9IjAgMCA2Ni4yNDYgNjcuMjQ4Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTcyLjUzMSAtMjE4LjQ1NSkgc2NhbGUoLjk4MDEyKSI+PHJlY3Qgcnk9IjUuMjM4IiByeD0iNS4yMzgiIHk9IjIzMS4zOTkiIHg9IjE3Ni4wMzEiIGhlaWdodD0iNjAuMDk5IiB3aWR0aD0iNjAuMDk5IiBmaWxsPSIjMzRhNjY4IiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxwYXRoIGQ9Ik0yMDYuNDc3IDI2MC45bC0yOC45ODcgMjguOTg3YTUuMjE4IDUuMjE4IDAgMDAzLjc4IDEuNjFoNDkuNjIxYzEuNjk0IDAgMy4xOS0uNzk4IDQuMTQ2LTIuMDM3eiIgZmlsbD0iIzVjODhjNSIvPjxwYXRoIGQ9Ik0yMjYuNzQyIDIyMi45ODhjLTkuMjY2IDAtMTYuNzc3IDcuMTctMTYuNzc3IDE2LjAxNC4wMDcgMi43NjIuNjYzIDUuNDc0IDIuMDkzIDcuODc1LjQzLjcwMy44MyAxLjQwOCAxLjE5IDIuMTA3LjMzMy41MDIuNjUgMS4wMDUuOTUgMS41MDguMzQzLjQ3Ny42NzMuOTU3Ljk4OCAxLjQ0IDEuMzEgMS43NjkgMi41IDMuNTAyIDMuNjM3IDUuMTY4Ljc5MyAxLjI3NSAxLjY4MyAyLjY0IDIuNDY2IDMuOTkgMi4zNjMgNC4wOTQgNC4wMDcgOC4wOTIgNC42IDEzLjkxNHYuMDEyYy4xODIuNDEyLjUxNi42NjYuODc5LjY2Ny40MDMtLjAwMS43NjgtLjMxNC45My0uNzk5LjYwMy01Ljc1NiAyLjIzOC05LjcyOSA0LjU4NS0xMy43OTQuNzgyLTEuMzUgMS42NzMtMi43MTUgMi40NjUtMy45OSAxLjEzNy0xLjY2NiAyLjMyOC0zLjQgMy42MzgtNS4xNjkuMzE1LS40ODIuNjQ1LS45NjIuOTg4LTEuNDM5LjMtLjUwMy42MTctMS4wMDYuOTUtMS41MDguMzU5LS43Ljc2LTEuNDA0IDEuMTktMi4xMDcgMS40MjYtMi40MDIgMi01LjExNCAyLjAwNC03Ljg3NSAwLTguODQ0LTcuNTExLTE2LjAxNC0xNi43NzYtMTYuMDE0eiIgZmlsbD0iI2RkNGIzZSIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48ZWxsaXBzZSByeT0iNS41NjQiIHJ4PSI1LjgyOCIgY3k9IjIzOS4wMDIiIGN4PSIyMjYuNzQyIiBmaWxsPSIjODAyZDI3IiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxwYXRoIGQ9Ik0xOTAuMzAxIDIzNy4yODNjLTQuNjcgMC04LjQ1NyAzLjg1My04LjQ1NyA4LjYwNnMzLjc4NiA4LjYwNyA4LjQ1NyA4LjYwN2MzLjA0MyAwIDQuODA2LS45NTggNi4zMzctMi41MTYgMS41My0xLjU1NyAyLjA4Ny0zLjkxMyAyLjA4Ny02LjI5IDAtLjM2Mi0uMDIzLS43MjItLjA2NC0xLjA3OWgtOC4yNTd2My4wNDNoNC44NWMtLjE5Ny43NTktLjUzMSAxLjQ1LTEuMDU4IDEuOTg2LS45NDIuOTU4LTIuMDI4IDEuNTQ4LTMuOTAxIDEuNTQ4LTIuODc2IDAtNS4yMDgtMi4zNzItNS4yMDgtNS4yOTkgMC0yLjkyNiAyLjMzMi01LjI5OSA1LjIwOC01LjI5OSAxLjM5OSAwIDIuNjE4LjQwNyAzLjU4NCAxLjI5M2wyLjM4MS0yLjM4YzAtLjAwMi0uMDAzLS4wMDQtLjAwNC0uMDA1LTEuNTg4LTEuNTI0LTMuNjItMi4yMTUtNS45NTUtMi4yMTV6bTQuNDMgNS42NmwuMDAzLjAwNnYtLjAwM3oiIGZpbGw9IiNmZmYiIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PHBhdGggZD0iTTIxNS4xODQgMjUxLjkyOWwtNy45OCA3Ljk3OSAyOC40NzcgMjguNDc1YTUuMjMzIDUuMjMzIDAgMDAuNDQ5LTIuMTIzdi0zMS4xNjVjLS40NjkuNjc1LS45MzQgMS4zNDktMS4zODIgMi4wMDUtLjc5MiAxLjI3NS0xLjY4MiAyLjY0LTIuNDY1IDMuOTktMi4zNDcgNC4wNjUtMy45ODIgOC4wMzgtNC41ODUgMTMuNzk0LS4xNjIuNDg1LS41MjcuNzk4LS45My43OTktLjM2My0uMDAxLS42OTctLjI1NS0uODc5LS42Njd2LS4wMTJjLS41OTMtNS44MjItMi4yMzctOS44Mi00LjYtMTMuOTE0LS43ODMtMS4zNS0xLjY3My0yLjcxNS0yLjQ2Ni0zLjk5LTEuMTM3LTEuNjY2LTIuMzI3LTMuNC0zLjYzNy01LjE2OWwtLjAwMi0uMDAzeiIgZmlsbD0iI2MzYzNjMyIvPjxwYXRoIGQ9Ik0yMTIuOTgzIDI0OC40OTVsLTM2Ljk1MiAzNi45NTN2LjgxMmE1LjIyNyA1LjIyNyAwIDAwNS4yMzggNS4yMzhoMS4wMTVsMzUuNjY2LTM1LjY2NmExMzYuMjc1IDEzNi4yNzUgMCAwMC0yLjc2NC0zLjkgMzcuNTc1IDM3LjU3NSAwIDAwLS45ODktMS40NCAzNS4xMjcgMzUuMTI3IDAgMDAtLjk1LTEuNTA4Yy0uMDgzLS4xNjItLjE3Ni0uMzI2LS4yNjQtLjQ4OXoiIGZpbGw9IiNmZGRjNGYiIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PHBhdGggZD0iTTIxMS45OTggMjYxLjA4M2wtNi4xNTIgNi4xNTEgMjQuMjY0IDI0LjI2NGguNzgxYTUuMjI3IDUuMjI3IDAgMDA1LjIzOS01LjIzOHYtMS4wNDV6IiBmaWxsPSIjZmZmIiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjwvZz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder{background:#4268b3}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik05NjcuNDg0IDBINTYuNTE3QzI1LjMwNCAwIDAgMjUuMzA0IDAgNTYuNTE3djkxMC45NjZDMCA5OTguNjk0IDI1LjI5NyAxMDI0IDU2LjUyMiAxMDI0SDU0N1Y2MjhINDE0VjQ3M2gxMzNWMzU5LjAyOWMwLTEzMi4yNjIgODAuNzczLTIwNC4yODIgMTk4Ljc1Ni0yMDQuMjgyIDU2LjUxMyAwIDEwNS4wODYgNC4yMDggMTE5LjI0NCA2LjA4OVYyOTlsLTgxLjYxNi4wMzdjLTYzLjk5MyAwLTc2LjM4NCAzMC40OTItNzYuMzg0IDc1LjIzNlY0NzNoMTUzLjQ4N2wtMTkuOTg2IDE1NUg3MDd2Mzk2aDI2MC40ODRjMzEuMjEzIDAgNTYuNTE2LTI1LjMwMyA1Ni41MTYtNTYuNTE2VjU2LjUxNUMxMDI0IDI1LjMwMyA5OTguNjk3IDAgOTY3LjQ4NCAwIiBmaWxsPSIjRkZGRkZFIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#cdf}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder{background:linear-gradient(-135deg,#1400c7,#b800b1,#f50000)}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTA0IiBoZWlnaHQ9IjUwNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0wIC4xNTloNTAzLjg0MVY1MDMuOTRIMHoiLz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48bWFzayBpZD0iYiIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYSIvPjwvbWFzaz48cGF0aCBkPSJNMjUxLjkyMS4xNTljLTY4LjQxOCAwLTc2Ljk5Ny4yOS0xMDMuODY3IDEuNTE2LTI2LjgxNCAxLjIyMy00NS4xMjcgNS40ODItNjEuMTUxIDExLjcxLTE2LjU2NiA2LjQzNy0zMC42MTUgMTUuMDUxLTQ0LjYyMSAyOS4wNTYtMTQuMDA1IDE0LjAwNi0yMi42MTkgMjguMDU1LTI5LjA1NiA0NC42MjEtNi4yMjggMTYuMDI0LTEwLjQ4NyAzNC4zMzctMTEuNzEgNjEuMTUxQy4yOSAxNzUuMDgzIDAgMTgzLjY2MiAwIDI1Mi4wOGMwIDY4LjQxNy4yOSA3Ni45OTYgMS41MTYgMTAzLjg2NiAxLjIyMyAyNi44MTQgNS40ODIgNDUuMTI3IDExLjcxIDYxLjE1MSA2LjQzNyAxNi41NjYgMTUuMDUxIDMwLjYxNSAyOS4wNTYgNDQuNjIxIDE0LjAwNiAxNC4wMDUgMjguMDU1IDIyLjYxOSA0NC42MjEgMjkuMDU3IDE2LjAyNCA2LjIyNyAzNC4zMzcgMTAuNDg2IDYxLjE1MSAxMS43MDkgMjYuODcgMS4yMjYgMzUuNDQ5IDEuNTE2IDEwMy44NjcgMS41MTYgNjguNDE3IDAgNzYuOTk2LS4yOSAxMDMuODY2LTEuNTE2IDI2LjgxNC0xLjIyMyA0NS4xMjctNS40ODIgNjEuMTUxLTExLjcwOSAxNi41NjYtNi40MzggMzAuNjE1LTE1LjA1MiA0NC42MjEtMjkuMDU3IDE0LjAwNS0xNC4wMDYgMjIuNjE5LTI4LjA1NSAyOS4wNTctNDQuNjIxIDYuMjI3LTE2LjAyNCAxMC40ODYtMzQuMzM3IDExLjcwOS02MS4xNTEgMS4yMjYtMjYuODcgMS41MTYtMzUuNDQ5IDEuNTE2LTEwMy44NjYgMC02OC40MTgtLjI5LTc2Ljk5Ny0xLjUxNi0xMDMuODY3LTEuMjIzLTI2LjgxNC01LjQ4Mi00NS4xMjctMTEuNzA5LTYxLjE1MS02LjQzOC0xNi41NjYtMTUuMDUyLTMwLjYxNS0yOS4wNTctNDQuNjIxLTE0LjAwNi0xNC4wMDUtMjguMDU1LTIyLjYxOS00NC42MjEtMjkuMDU2LTE2LjAyNC02LjIyOC0zNC4zMzctMTAuNDg3LTYxLjE1MS0xMS43MUMzMjguOTE3LjQ0OSAzMjAuMzM4LjE1OSAyNTEuOTIxLjE1OXptMCA0NS4zOTFjNjcuMjY1IDAgNzUuMjMzLjI1NyAxMDEuNzk3IDEuNDY5IDI0LjU2MiAxLjEyIDM3LjkwMSA1LjIyNCA0Ni43NzggOC42NzQgMTEuNzU5IDQuNTcgMjAuMTUxIDEwLjAyOSAyOC45NjYgMTguODQ1IDguODE2IDguODE1IDE0LjI3NSAxNy4yMDcgMTguODQ1IDI4Ljk2NiAzLjQ1IDguODc3IDcuNTU0IDIyLjIxNiA4LjY3NCA0Ni43NzggMS4yMTIgMjYuNTY0IDEuNDY5IDM0LjUzMiAxLjQ2OSAxMDEuNzk4IDAgNjcuMjY1LS4yNTcgNzUuMjMzLTEuNDY5IDEwMS43OTctMS4xMiAyNC41NjItNS4yMjQgMzcuOTAxLTguNjc0IDQ2Ljc3OC00LjU3IDExLjc1OS0xMC4wMjkgMjAuMTUxLTE4Ljg0NSAyOC45NjYtOC44MTUgOC44MTYtMTcuMjA3IDE0LjI3NS0yOC45NjYgMTguODQ1LTguODc3IDMuNDUtMjIuMjE2IDcuNTU0LTQ2Ljc3OCA4LjY3NC0yNi41NiAxLjIxMi0zNC41MjcgMS40NjktMTAxLjc5NyAxLjQ2OS02Ny4yNzEgMC03NS4yMzctLjI1Ny0xMDEuNzk4LTEuNDY5LTI0LjU2Mi0xLjEyLTM3LjkwMS01LjIyNC00Ni43NzgtOC42NzQtMTEuNzU5LTQuNTctMjAuMTUxLTEwLjAyOS0yOC45NjYtMTguODQ1LTguODE1LTguODE1LTE0LjI3NS0xNy4yMDctMTguODQ1LTI4Ljk2Ni0zLjQ1LTguODc3LTcuNTU0LTIyLjIxNi04LjY3NC00Ni43NzgtMS4yMTItMjYuNTY0LTEuNDY5LTM0LjUzMi0xLjQ2OS0xMDEuNzk3IDAtNjcuMjY2LjI1Ny03NS4yMzQgMS40NjktMTAxLjc5OCAxLjEyLTI0LjU2MiA1LjIyNC0zNy45MDEgOC42NzQtNDYuNzc4IDQuNTctMTEuNzU5IDEwLjAyOS0yMC4xNTEgMTguODQ1LTI4Ljk2NiA4LjgxNS04LjgxNiAxNy4yMDctMTQuMjc1IDI4Ljk2Ni0xOC44NDUgOC44NzctMy40NSAyMi4yMTYtNy41NTQgNDYuNzc4LTguNjc0IDI2LjU2NC0xLjIxMiAzNC41MzItMS40NjkgMTAxLjc5OC0xLjQ2OXoiIGZpbGw9IiNGRkYiIG1hc2s9InVybCgjYikiLz48cGF0aCBkPSJNMjUxLjkyMSAzMzYuMDUzYy00Ni4zNzggMC04My45NzQtMzcuNTk2LTgzLjk3NC04My45NzMgMC00Ni4zNzggMzcuNTk2LTgzLjk3NCA4My45NzQtODMuOTc0IDQ2LjM3NyAwIDgzLjk3MyAzNy41OTYgODMuOTczIDgzLjk3NCAwIDQ2LjM3Ny0zNy41OTYgODMuOTczLTgzLjk3MyA4My45NzN6bTAtMjEzLjMzOGMtNzEuNDQ3IDAtMTI5LjM2NSA1Ny45MTgtMTI5LjM2NSAxMjkuMzY1IDAgNzEuNDQ2IDU3LjkxOCAxMjkuMzY0IDEyOS4zNjUgMTI5LjM2NCA3MS40NDYgMCAxMjkuMzY0LTU3LjkxOCAxMjkuMzY0LTEyOS4zNjQgMC03MS40NDctNTcuOTE4LTEyOS4zNjUtMTI5LjM2NC0xMjkuMzY1ek00MTYuNjI3IDExNy42MDRjMCAxNi42OTYtMTMuNTM1IDMwLjIzLTMwLjIzMSAzMC4yMy0xNi42OTUgMC0zMC4yMy0xMy41MzQtMzAuMjMtMzAuMjMgMC0xNi42OTYgMTMuNTM1LTMwLjIzMSAzMC4yMy0zMC4yMzEgMTYuNjk2IDAgMzAuMjMxIDEzLjUzNSAzMC4yMzEgMzAuMjMxIiBmaWxsPSIjRkZGIi8+PC9nPjwvc3ZnPg==)}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#ffe0fe}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder{background:linear-gradient(90deg,#71c6f4,#0d70a5)}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MDAgNDAwIj48cGF0aCBkPSJNNDAwIDIwMGMwIDExMC41LTg5LjUgMjAwLTIwMCAyMDBTMCAzMTAuNSAwIDIwMCA4OS41IDAgMjAwIDBzMjAwIDg5LjUgMjAwIDIwMHpNMTYzLjQgMzA1LjVjODguNyAwIDEzNy4yLTczLjUgMTM3LjItMTM3LjIgMC0yLjEgMC00LjItLjEtNi4yIDkuNC02LjggMTcuNi0xNS4zIDI0LjEtMjUtOC42IDMuOC0xNy45IDYuNC0yNy43IDcuNiAxMC02IDE3LjYtMTUuNCAyMS4yLTI2LjctOS4zIDUuNS0xOS42IDkuNS0zMC42IDExLjctOC44LTkuNC0yMS4zLTE1LjItMzUuMi0xNS4yLTI2LjYgMC00OC4yIDIxLjYtNDguMiA0OC4yIDAgMy44LjQgNy41IDEuMyAxMS00MC4xLTItNzUuNi0yMS4yLTk5LjQtNTAuNC00LjEgNy4xLTYuNSAxNS40LTYuNSAyNC4yIDAgMTYuNyA4LjUgMzEuNSAyMS41IDQwLjEtNy45LS4yLTE1LjMtMi40LTIxLjgtNnYuNmMwIDIzLjQgMTYuNiA0Mi44IDM4LjcgNDcuMy00IDEuMS04LjMgMS43LTEyLjcgMS43LTMuMSAwLTYuMS0uMy05LjEtLjkgNi4xIDE5LjIgMjMuOSAzMy4xIDQ1IDMzLjUtMTYuNSAxMi45LTM3LjMgMjAuNi01OS45IDIwLjYtMy45IDAtNy43LS4yLTExLjUtLjcgMjEuMSAxMy44IDQ2LjUgMjEuOCA3My43IDIxLjgiIGZpbGw9IiNmZmYiLz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__url__text{color:#b8e6ff}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}';},function(e,t,i){var n=i(1),o=i(97);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck.ck-media-form{display:flex;align-items:flex-start;flex-direction:row;flex-wrap:nowrap}.ck.ck-media-form .ck-labeled-field-view{display:inline-block}.ck.ck-media-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-media-form{flex-wrap:wrap}.ck.ck-media-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-media-form .ck-button{flex-basis:50%}}";},function(e,t,i){var n=i(1),o=i(99);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck-content .media{clear:both;margin:.9em 0;display:block;min-width:15em}";},function(e,t,i){var n=i(1),o=i(101);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=":root{--ck-color-table-focused-cell-background:rgba(158,207,250,0.3)}.ck-widget.table td.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table td.ck-editor__nested-editable:focus,.ck-widget.table th.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table th.ck-editor__nested-editable:focus{background:var(--ck-color-table-focused-cell-background);border-style:none;outline:1px solid var(--ck-color-focus-border);outline-offset:-1px}";},function(e,t,i){var n=i(1),o=i(103);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck .ck-insert-table-dropdown__grid{display:flex;flex-direction:row;flex-wrap:wrap}:root{--ck-insert-table-dropdown-padding:10px;--ck-insert-table-dropdown-box-height:11px;--ck-insert-table-dropdown-box-width:12px;--ck-insert-table-dropdown-box-margin:1px}.ck .ck-insert-table-dropdown__grid{width:calc(var(--ck-insert-table-dropdown-box-width)*10 + var(--ck-insert-table-dropdown-box-margin)*20 + var(--ck-insert-table-dropdown-padding)*2);padding:var(--ck-insert-table-dropdown-padding) var(--ck-insert-table-dropdown-padding) 0}.ck .ck-insert-table-dropdown__label{text-align:center}.ck .ck-insert-table-dropdown-grid-box{width:var(--ck-insert-table-dropdown-box-width);height:var(--ck-insert-table-dropdown-box-height);margin:var(--ck-insert-table-dropdown-box-margin);border:1px solid var(--ck-color-base-border);border-radius:1px}.ck .ck-insert-table-dropdown-grid-box.ck-on{border-color:var(--ck-color-focus-border);background:var(--ck-color-focus-outer-shadow)}";},function(e,t,i){var n=i(1),o=i(105);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=':root{--ck-table-selected-cell-background:rgba(158,207,250,0.3)}.ck.ck-editor__editable .table table td.ck-editor__editable_selected,.ck.ck-editor__editable .table table th.ck-editor__editable_selected{position:relative;caret-color:transparent;outline:unset;box-shadow:unset}.ck.ck-editor__editable .table table td.ck-editor__editable_selected:after,.ck.ck-editor__editable .table table th.ck-editor__editable_selected:after{content:"";pointer-events:none;background-color:var(--ck-table-selected-cell-background);position:absolute;top:0;left:0;right:0;bottom:0}.ck.ck-editor__editable .table table td.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table td.ck-editor__editable_selected:focus,.ck.ck-editor__editable .table table th.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table th.ck-editor__editable_selected:focus{background-color:transparent}.ck.ck-editor__editable .table table td.ck-editor__editable_selected .ck-widget_selected,.ck.ck-editor__editable .table table th.ck-editor__editable_selected .ck-widget_selected{outline:unset}';},function(e,t,i){var n=i(1),o=i(107);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck-content .table{margin:.9em auto;display:table}.ck-content .table table{border-collapse:collapse;border-spacing:0;width:100%;height:100%;border:1px double #b3b3b3}.ck-content .table table td,.ck-content .table table th{min-width:2em;padding:.4em;border:1px solid #bfbfbf}.ck-content .table table th{font-weight:700;background:hsla(0,0%,0%,5%)}.ck-content[dir=rtl] .table th{text-align:right}.ck-content[dir=ltr] .table th{text-align:left}.ck-editor__editable .ck-table-bogus-paragraph{display:inline-block;width:100%}";},function(e,t,i){"use strict";var _marked=/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(uc),_marked2=/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(gc),_marked3=/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(vh);i.r(t),i.d(t,"default",function(){return Ew;});var n=function n(){return function e(){e.called=!0;};};var o=/*#__PURE__*/_createClass(function o(e,t){_classCallCheck(this,o);this.source=e,this.name=t,this.path=[],this.stop=n(),this.off=n();});var r=new Array(256).fill().map(function(e,t){return("0"+t.toString(16)).slice(-2);});function s(){var e=4294967296*Math.random()>>>0,t=4294967296*Math.random()>>>0,i=4294967296*Math.random()>>>0,n=4294967296*Math.random()>>>0;return"e"+r[e>>0&255]+r[e>>8&255]+r[e>>16&255]+r[e>>24&255]+r[t>>0&255]+r[t>>8&255]+r[t>>16&255]+r[t>>24&255]+r[i>>0&255]+r[i>>8&255]+r[i>>16&255]+r[i>>24&255]+r[n>>0&255]+r[n>>8&255]+r[n>>16&255]+r[n>>24&255];}var a={get:function get(e){return"number"!=typeof e?this[e]||this.normal:e;},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5},c=(i(6),i(0));var l=Symbol("listeningTo"),d=Symbol("emitterId");var h={on:function on(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};this.listenTo(this,e,t,i);},once:function once(e,t,i){var n=!1;this.listenTo(this,e,function(e){for(var _len=arguments.length,i=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){i[_key-1]=arguments[_key];}n||(n=!0,e.off(),t.call.apply(t,[this,e].concat(i)));},i);},off:function off(e,t){this.stopListening(this,e,t);},listenTo:function listenTo(e,t,i){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var o,r;this[l]||(this[l]={});var s=this[l];g(e)||u(e);var a=g(e);(o=s[a])||(o=s[a]={emitter:e,callbacks:{}}),(r=o.callbacks[t])||(r=o.callbacks[t]=[]),r.push(i),function(e,t,i,n,o){t._addEventListener?t._addEventListener(i,n,o):e._addEventListener.call(t,i,n,o);}(this,e,t,i,n);},stopListening:function stopListening(e,t,i){var n=this[l];var o=e&&g(e);var r=n&&o&&n[o],s=r&&t&&r.callbacks[t];if(!(!n||e&&!r||t&&!s))if(i){b(this,e,t,i);-1!==s.indexOf(i)&&(1===s.length?delete r.callbacks[t]:b(this,e,t,i));}else if(s){for(;i=s.pop();){b(this,e,t,i);}delete r.callbacks[t];}else if(r){for(t in r.callbacks){this.stopListening(e,t);}delete n[o];}else{for(o in n){this.stopListening(n[o].emitter);}delete this[l];}},fire:function fire(e){try{var _i2=e instanceof o?e:new o(this,e),_n2=_i2.name;var _r2=function e(t,i){var n;if(!t._events||!(n=t._events[i])||!n.callbacks.length)return i.indexOf(":")>-1?e(t,i.substr(0,i.lastIndexOf(":"))):null;return n.callbacks;}(this,_n2);for(var _len2=arguments.length,t=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++){t[_key2-1]=arguments[_key2];}if(_i2.path.push(this),_r2){var _e2=[_i2].concat(t);_r2=Array.from(_r2);for(var _t2=0;_t2<_r2.length&&(_r2[_t2].callback.apply(this,_e2),_i2.off.called&&(delete _i2.off.called,this._removeEventListener(_n2,_r2[_t2].callback)),!_i2.stop.called);_t2++){;}}if(this._delegations){var _e3=this._delegations.get(_n2),_o2=this._delegations.get("*");_e3&&p(_e3,_i2,t),_o2&&p(_o2,_i2,t);}return _i2["return"];}catch(e){c.a.rethrowUnexpectedError(e,this);}},delegate:function delegate(){var _this2=this;for(var _len3=arguments.length,e=new Array(_len3),_key3=0;_key3<_len3;_key3++){e[_key3]=arguments[_key3];}return{to:function to(t,i){_this2._delegations||(_this2._delegations=new Map()),e.forEach(function(e){var n=_this2._delegations.get(e);n?n.set(t,i):_this2._delegations.set(e,new Map([[t,i]]));});}};},stopDelegating:function stopDelegating(e,t){if(this._delegations)if(e){if(t){var _i3=this._delegations.get(e);_i3&&_i3["delete"](t);}else this._delegations["delete"](e);}else this._delegations.clear();},_addEventListener:function _addEventListener(e,t,i){!function(e,t){var i=m(e);if(i[t])return;var n=t,o=null;var r=[];for(;""!==n&&!i[n];){i[n]={callbacks:[],childEvents:[]},r.push(i[n]),o&&i[n].childEvents.push(o),o=n,n=n.substr(0,n.lastIndexOf(":"));}if(""!==n){var _iterator=_createForOfIteratorHelper(r),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _e4=_step.value;_e4.callbacks=i[n].callbacks.slice();}}catch(err){_iterator.e(err);}finally{_iterator.f();}i[n].childEvents.push(o);}}(this,e);var n=f(this,e),o=a.get(i.priority),r={callback:t,priority:o};var _iterator2=_createForOfIteratorHelper(n),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _e5=_step2.value;var _t3=!1;for(var _i4=0;_i4<_e5.length;_i4++){if(_e5[_i4].priority<o){_e5.splice(_i4,0,r),_t3=!0;break;}}_t3||_e5.push(r);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}},_removeEventListener:function _removeEventListener(e,t){var i=f(this,e);var _iterator3=_createForOfIteratorHelper(i),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var _e6=_step3.value;for(var _i5=0;_i5<_e6.length;_i5++){_e6[_i5].callback==t&&(_e6.splice(_i5,1),_i5--);}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}};function u(e,t){e[d]||(e[d]=t||s());}function g(e){return e[d];}function m(e){return e._events||Object.defineProperty(e,"_events",{value:{}}),e._events;}function f(e,t){var i=m(e)[t];if(!i)return[];var n=[i.callbacks];for(var _t4=0;_t4<i.childEvents.length;_t4++){var _o3=f(e,i.childEvents[_t4]);n=n.concat(_o3);}return n;}function p(e,t,i){var _iterator4=_createForOfIteratorHelper(e),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _step4$value=_slicedToArray(_step4.value,2),_n3=_step4$value[0],_r3=_step4$value[1];_r3?"function"==typeof _r3&&(_r3=_r3(t.name)):_r3=t.name;var _e7=new o(t.source,_r3);_e7.path=_toConsumableArray(t.path),_n3.fire.apply(_n3,[_e7].concat(_toConsumableArray(i)));}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}}function b(e,t,i,n){t._removeEventListener?t._removeEventListener(i,n):e._removeEventListener.call(t,i,n);}var w=function w(e){var t=_typeof(e);return null!=e&&("object"==t||"function"==t);},k=i(3),_=k.a.Symbol,v=Object.prototype,y=v.hasOwnProperty,x=v.toString,A=_?_.toStringTag:void 0;var C=function C(e){var t=y.call(e,A),i=e[A];try{e[A]=void 0;var n=!0;}catch(e){}var o=x.call(e);return n&&(t?e[A]=i:delete e[A]),o;},T=Object.prototype.toString;var E=function E(e){return T.call(e);},I=_?_.toStringTag:void 0;var S=function S(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":I&&I in Object(e)?C(e):E(e);};var P,M=function M(e){if(!w(e))return!1;var t=S(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t;},N=k.a["__core-js_shared__"],R=(P=/[^.]+$/.exec(N&&N.keys&&N.keys.IE_PROTO||""))?"Symbol(src)_1."+P:"";var O=function O(e){return!!R&&R in e;},z=Function.prototype.toString;var D=function D(e){if(null!=e){try{return z.call(e);}catch(e){}try{return e+"";}catch(e){}}return"";},L=/^\[object .+?Constructor\]$/,V=Function.prototype,j=Object.prototype,B=V.toString,F=j.hasOwnProperty,H=RegExp("^"+B.call(F).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var U=function U(e){return!(!w(e)||O(e))&&(M(e)?H:L).test(D(e));};var W=function W(e,t){return null==e?void 0:e[t];};var q=function q(e,t){var i=W(e,t);return U(i)?i:void 0;},$=function(){try{var e=q(Object,"defineProperty");return e({},"",{}),e;}catch(e){}}();var Y=function Y(e,t,i){"__proto__"==t&&$?$(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i;};var G=function G(e,t){return e===t||e!=e&&t!=t;},K=Object.prototype.hasOwnProperty;var Q=function Q(e,t,i){var n=e[t];K.call(e,t)&&G(n,i)&&(void 0!==i||t in e)||Y(e,t,i);};var J=function J(e,t,i,n){var o=!i;i||(i={});for(var r=-1,s=t.length;++r<s;){var a=t[r],c=n?n(i[a],e[a],a,i,e):void 0;void 0===c&&(c=e[a]),o?Y(i,a,c):Q(i,a,c);}return i;};var Z=function Z(e){return e;};var X=function X(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2]);}return e.apply(t,i);},ee=Math.max;var te=function te(e,t,i){return t=ee(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,r=ee(n.length-t,0),s=Array(r);++o<r;){s[o]=n[t+o];}o=-1;for(var a=Array(t+1);++o<t;){a[o]=n[o];}return a[t]=i(s),X(e,this,a);};};var ie=function ie(e){return function(){return e;};},ne=$?function(e,t){return $(e,"toString",{configurable:!0,enumerable:!1,value:ie(t),writable:!0});}:Z,oe=Date.now;var re=function(e){var t=0,i=0;return function(){var n=oe(),o=16-(n-i);if(i=n,o>0){if(++t>=800)return arguments[0];}else t=0;return e.apply(void 0,arguments);};}(ne);var se=function se(e,t){return re(te(e,t,Z),e+"");};var ae=function ae(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991;};var ce=function ce(e){return null!=e&&ae(e.length)&&!M(e);},le=/^(?:0|[1-9]\d*)$/;var de=function de(e,t){var i=_typeof(e);return!!(t=null==t?9007199254740991:t)&&("number"==i||"symbol"!=i&&le.test(e))&&e>-1&&e%1==0&&e<t;};var he=function he(e,t,i){if(!w(i))return!1;var n=_typeof(t);return!!("number"==n?ce(i)&&de(t,i.length):"string"==n&&t in i)&&G(i[t],e);};var ue=function ue(e){return se(function(t,i){var n=-1,o=i.length,r=o>1?i[o-1]:void 0,s=o>2?i[2]:void 0;for(r=e.length>3&&"function"==typeof r?(o--,r):void 0,s&&he(i[0],i[1],s)&&(r=o<3?void 0:r,o=1),t=Object(t);++n<o;){var a=i[n];a&&e(t,a,n,r);}return t;});};var ge=function ge(e,t){for(var i=-1,n=Array(e);++i<e;){n[i]=t(i);}return n;};var me=function me(e){return null!=e&&"object"==_typeof(e);};var fe=function fe(e){return me(e)&&"[object Arguments]"==S(e);},pe=Object.prototype,be=pe.hasOwnProperty,we=pe.propertyIsEnumerable,ke=fe(function(){return arguments;}())?fe:function(e){return me(e)&&be.call(e,"callee")&&!we.call(e,"callee");},_e=Array.isArray,ve=i(4),ye={};ye["[object Float32Array]"]=ye["[object Float64Array]"]=ye["[object Int8Array]"]=ye["[object Int16Array]"]=ye["[object Int32Array]"]=ye["[object Uint8Array]"]=ye["[object Uint8ClampedArray]"]=ye["[object Uint16Array]"]=ye["[object Uint32Array]"]=!0,ye["[object Arguments]"]=ye["[object Array]"]=ye["[object ArrayBuffer]"]=ye["[object Boolean]"]=ye["[object DataView]"]=ye["[object Date]"]=ye["[object Error]"]=ye["[object Function]"]=ye["[object Map]"]=ye["[object Number]"]=ye["[object Object]"]=ye["[object RegExp]"]=ye["[object Set]"]=ye["[object String]"]=ye["[object WeakMap]"]=!1;var xe=function xe(e){return me(e)&&ae(e.length)&&!!ye[S(e)];};var Ae=function Ae(e){return function(t){return e(t);};},Ce=i(5),Te=Ce.a&&Ce.a.isTypedArray,Ee=Te?Ae(Te):xe,Ie=Object.prototype.hasOwnProperty;var Se=function Se(e,t){var i=_e(e),n=!i&&ke(e),o=!i&&!n&&Object(ve.a)(e),r=!i&&!n&&!o&&Ee(e),s=i||n||o||r,a=s?ge(e.length,String):[],c=a.length;for(var l in e){!t&&!Ie.call(e,l)||s&&("length"==l||o&&("offset"==l||"parent"==l)||r&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||de(l,c))||a.push(l);}return a;},Pe=Object.prototype;var Me=function Me(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Pe);};var Ne=function Ne(e){var t=[];if(null!=e)for(var i in Object(e)){t.push(i);}return t;},Re=Object.prototype.hasOwnProperty;var Oe=function Oe(e){if(!w(e))return Ne(e);var t=Me(e),i=[];for(var n in e){("constructor"!=n||!t&&Re.call(e,n))&&i.push(n);}return i;};var ze=function ze(e){return ce(e)?Se(e,!0):Oe(e);},De=ue(function(e,t){J(t,ze(t),e);});var Le=Symbol("observableProperties"),Ve=Symbol("boundObservables"),je=Symbol("boundProperties"),Be=Symbol("decoratedMethods"),Fe=Symbol("decoratedOriginal"),He={set:function set(e,t){var _this3=this;if(w(e))return void Object.keys(e).forEach(function(t){_this3.set(t,e[t]);},this);We(this);var i=this[Le];if(e in this&&!i.has(e))throw new c.a("observable-set-cannot-override",this);Object.defineProperty(this,e,{enumerable:!0,configurable:!0,get:function get(){return i.get(e);},set:function set(t){var n=i.get(e);var o=this.fire("set:"+e,e,t,n);void 0===o&&(o=t),n===o&&i.has(e)||(i.set(e,o),this.fire("change:"+e,e,o,n));}}),this[e]=t;},bind:function bind(){var _this4=this;for(var _len4=arguments.length,e=new Array(_len4),_key4=0;_key4<_len4;_key4++){e[_key4]=arguments[_key4];}if(!e.length||!Ye(e))throw new c.a("observable-bind-wrong-properties",this);if(new Set(e).size!==e.length)throw new c.a("observable-bind-duplicate-properties",this);We(this);var t=this[je];e.forEach(function(e){if(t.has(e))throw new c.a("observable-bind-rebind",_this4);});var i=new Map();return e.forEach(function(e){var n={property:e,to:[]};t.set(e,n),i.set(e,n);}),{to:qe,toMany:$e,_observable:this,_bindProperties:e,_to:[],_bindings:i};},unbind:function unbind(){var _this5=this;if(!this[Le])return;var t=this[je],i=this[Ve];for(var _len5=arguments.length,e=new Array(_len5),_key5=0;_key5<_len5;_key5++){e[_key5]=arguments[_key5];}if(e.length){if(!Ye(e))throw new c.a("observable-unbind-wrong-properties",this);e.forEach(function(e){var n=t.get(e);if(!n)return;var o,r,s,a;n.to.forEach(function(e){o=e[0],r=e[1],s=i.get(o),a=s[r],a["delete"](n),a.size||delete s[r],Object.keys(s).length||(i["delete"](o),_this5.stopListening(o,"change"));}),t["delete"](e);});}else i.forEach(function(e,t){_this5.stopListening(t,"change");}),i.clear(),t.clear();},decorate:function decorate(e){var _this6=this;var t=this[e];if(!t)throw new c.a("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:e});this.on(e,function(e,i){e["return"]=t.apply(_this6,i);}),this[e]=function(){for(var _len6=arguments.length,t=new Array(_len6),_key6=0;_key6<_len6;_key6++){t[_key6]=arguments[_key6];}return this.fire(e,t);},this[e][Fe]=t,this[Be]||(this[Be]=[]),this[Be].push(e);}};De(He,h),He.stopListening=function(e,t,i){if(!e&&this[Be]){var _iterator5=_createForOfIteratorHelper(this[Be]),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var _e8=_step5.value;this[_e8]=this[_e8][Fe];}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}delete this[Be];}h.stopListening.call(this,e,t,i);};var Ue=He;function We(e){e[Le]||(Object.defineProperty(e,Le,{value:new Map()}),Object.defineProperty(e,Ve,{value:new Map()}),Object.defineProperty(e,je,{value:new Map()}));}function qe(){var _this7=this;var t=function(){for(var _len7=arguments.length,e=new Array(_len7),_key7=0;_key7<_len7;_key7++){e[_key7]=arguments[_key7];}if(!e.length)throw new c.a("observable-bind-to-parse-error",null);var t={to:[]};var i;"function"==typeof e[e.length-1]&&(t.callback=e.pop());return e.forEach(function(e){if("string"==typeof e)i.properties.push(e);else{if("object"!=_typeof(e))throw new c.a("observable-bind-to-parse-error",null);i={observable:e,properties:[]},t.to.push(i);}}),t;}.apply(void 0,arguments),i=Array.from(this._bindings.keys()),n=i.length;if(!t.callback&&t.to.length>1)throw new c.a("observable-bind-to-no-callback",this);if(n>1&&t.callback)throw new c.a("observable-bind-to-extra-callback",this);var o;t.to.forEach(function(e){if(e.properties.length&&e.properties.length!==n)throw new c.a("observable-bind-to-properties-length",_this7);e.properties.length||(e.properties=_this7._bindProperties);}),this._to=t.to,t.callback&&(this._bindings.get(i[0]).callback=t.callback),o=this._observable,this._to.forEach(function(e){var t=o[Ve];var i;t.get(e.observable)||o.listenTo(e.observable,"change",function(n,r){i=t.get(e.observable)[r],i&&i.forEach(function(e){Ge(o,e.property);});});}),function(e){var t;e._bindings.forEach(function(i,n){e._to.forEach(function(o){t=o.properties[i.callback?0:e._bindProperties.indexOf(n)],i.to.push([o.observable,t]),function(e,t,i,n){var o=e[Ve],r=o.get(i),s=r||{};s[n]||(s[n]=new Set());s[n].add(t),r||o.set(i,s);}(e._observable,i,o.observable,t);});});}(this),this._bindProperties.forEach(function(e){Ge(_this7._observable,e);});}function $e(e,t,i){if(this._bindings.size>1)throw new c.a("observable-bind-to-many-not-one-binding",this);this.to.apply(this,_toConsumableArray(function(e,t){var i=e.map(function(e){return[e,t];});return Array.prototype.concat.apply([],i);}(e,t)).concat([i]));}function Ye(e){return e.every(function(e){return"string"==typeof e;});}function Ge(e,t){var i=e[je].get(t);var n;i.callback?n=i.callback.apply(e,i.to.map(function(e){return e[0][e[1]];})):(n=i.to[0],n=n[0][n[1]]),Object.prototype.hasOwnProperty.call(e,t)?e[t]=n:e.set(t,n);}function Ke(e){for(var _len8=arguments.length,t=new Array(_len8>1?_len8-1:0),_key8=1;_key8<_len8;_key8++){t[_key8-1]=arguments[_key8];}t.forEach(function(t){Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t)).forEach(function(i){if(i in e.prototype)return;var n=Object.getOwnPropertyDescriptor(t,i);n.enumerable=!1,Object.defineProperty(e.prototype,i,n);});});}var Qe=/*#__PURE__*/function(){function Qe(e){_classCallCheck(this,Qe);this.editor=e,this.set("isEnabled",!0),this._disableStack=new Set();}_createClass(Qe,[{key:"forceDisabled",value:function forceDisabled(e){this._disableStack.add(e),1==this._disableStack.size&&(this.on("set:isEnabled",Je,{priority:"highest"}),this.isEnabled=!1);}},{key:"clearForceDisabled",value:function clearForceDisabled(e){this._disableStack["delete"](e),0==this._disableStack.size&&(this.off("set:isEnabled",Je),this.isEnabled=!0);}},{key:"destroy",value:function destroy(){this.stopListening();}}],[{key:"isContextPlugin",get:function get(){return!1;}}]);return Qe;}();function Je(e){e["return"]=!1,e.stop();}Ke(Qe,Ue);var Ze=/*#__PURE__*/function(){function Ze(e){var _this8=this;_classCallCheck(this,Ze);this.editor=e,this.set("value",void 0),this.set("isEnabled",!1),this._disableStack=new Set(),this.decorate("execute"),this.listenTo(this.editor.model.document,"change",function(){_this8.refresh();}),this.on("execute",function(e){_this8.isEnabled||e.stop();},{priority:"high"}),this.listenTo(e,"change:isReadOnly",function(e,t,i){i?_this8.forceDisabled("readOnlyMode"):_this8.clearForceDisabled("readOnlyMode");});}_createClass(Ze,[{key:"refresh",value:function refresh(){this.isEnabled=!0;}},{key:"forceDisabled",value:function forceDisabled(e){this._disableStack.add(e),1==this._disableStack.size&&(this.on("set:isEnabled",Xe,{priority:"highest"}),this.isEnabled=!1);}},{key:"clearForceDisabled",value:function clearForceDisabled(e){this._disableStack["delete"](e),0==this._disableStack.size&&(this.off("set:isEnabled",Xe),this.refresh());}},{key:"execute",value:function execute(){}},{key:"destroy",value:function destroy(){this.stopListening();}}]);return Ze;}();function Xe(e){e["return"]=!1,e.stop();}Ke(Ze,Ue);var et=/*#__PURE__*/function(_Ze){_inherits(et,_Ze);var _super2=_createSuper(et);function et(e){var _this9;_classCallCheck(this,et);_this9=_super2.call(this,e),_this9._childCommands=[];return _this9;}_createClass(et,[{key:"refresh",value:function refresh(){}},{key:"execute",value:function execute(){var t=this._getFirstEnabledCommand();for(var _len9=arguments.length,e=new Array(_len9),_key9=0;_key9<_len9;_key9++){e[_key9]=arguments[_key9];}return null!=t&&t.execute(e);}},{key:"registerChildCommand",value:function registerChildCommand(e){var _this10=this;this._childCommands.push(e),e.on("change:isEnabled",function(){return _this10._checkEnabled();}),this._checkEnabled();}},{key:"_checkEnabled",value:function _checkEnabled(){this.isEnabled=!!this._getFirstEnabledCommand();}},{key:"_getFirstEnabledCommand",value:function _getFirstEnabledCommand(){return this._childCommands.find(function(e){return e.isEnabled;});}}]);return et;}(Ze);var tt=function tt(e,t){return function(i){return e(t(i));};},it=tt(Object.getPrototypeOf,Object),nt=Function.prototype,ot=Object.prototype,rt=nt.toString,st=ot.hasOwnProperty,at=rt.call(Object);var ct=function ct(e){if(!me(e)||"[object Object]"!=S(e))return!1;var t=it(e);if(null===t)return!0;var i=st.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&rt.call(i)==at;};var lt=function lt(){this.__data__=[],this.size=0;};var dt=function dt(e,t){for(var i=e.length;i--;){if(G(e[i][0],t))return i;}return-1;},ht=Array.prototype.splice;var ut=function ut(e){var t=this.__data__,i=dt(t,e);return!(i<0)&&(i==t.length-1?t.pop():ht.call(t,i,1),--this.size,!0);};var gt=function gt(e){var t=this.__data__,i=dt(t,e);return i<0?void 0:t[i][1];};var mt=function mt(e){return dt(this.__data__,e)>-1;};var ft=function ft(e,t){var i=this.__data__,n=dt(i,e);return n<0?(++this.size,i.push([e,t])):i[n][1]=t,this;};function pt(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1]);}}pt.prototype.clear=lt,pt.prototype["delete"]=ut,pt.prototype.get=gt,pt.prototype.has=mt,pt.prototype.set=ft;var bt=pt;var wt=function wt(){this.__data__=new bt(),this.size=0;};var kt=function kt(e){var t=this.__data__,i=t["delete"](e);return this.size=t.size,i;};var _t=function _t(e){return this.__data__.get(e);};var vt=function vt(e){return this.__data__.has(e);},yt=q(k.a,"Map"),xt=q(Object,"create");var At=function At(){this.__data__=xt?xt(null):{},this.size=0;};var Ct=function Ct(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t;},Tt=Object.prototype.hasOwnProperty;var Et=function Et(e){var t=this.__data__;if(xt){var i=t[e];return"__lodash_hash_undefined__"===i?void 0:i;}return Tt.call(t,e)?t[e]:void 0;},It=Object.prototype.hasOwnProperty;var St=function St(e){var t=this.__data__;return xt?void 0!==t[e]:It.call(t,e);};var Pt=function Pt(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=xt&&void 0===t?"__lodash_hash_undefined__":t,this;};function Mt(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1]);}}Mt.prototype.clear=At,Mt.prototype["delete"]=Ct,Mt.prototype.get=Et,Mt.prototype.has=St,Mt.prototype.set=Pt;var Nt=Mt;var Rt=function Rt(){this.size=0,this.__data__={hash:new Nt(),map:new(yt||bt)(),string:new Nt()};};var Ot=function Ot(e){var t=_typeof(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e;};var zt=function zt(e,t){var i=e.__data__;return Ot(t)?i["string"==typeof t?"string":"hash"]:i.map;};var Dt=function Dt(e){var t=zt(this,e)["delete"](e);return this.size-=t?1:0,t;};var Lt=function Lt(e){return zt(this,e).get(e);};var Vt=function Vt(e){return zt(this,e).has(e);};var jt=function jt(e,t){var i=zt(this,e),n=i.size;return i.set(e,t),this.size+=i.size==n?0:1,this;};function Bt(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1]);}}Bt.prototype.clear=Rt,Bt.prototype["delete"]=Dt,Bt.prototype.get=Lt,Bt.prototype.has=Vt,Bt.prototype.set=jt;var Ft=Bt;var Ht=function Ht(e,t){var i=this.__data__;if(i instanceof bt){var n=i.__data__;if(!yt||n.length<199)return n.push([e,t]),this.size=++i.size,this;i=this.__data__=new Ft(n);}return i.set(e,t),this.size=i.size,this;};function Ut(e){var t=this.__data__=new bt(e);this.size=t.size;}Ut.prototype.clear=wt,Ut.prototype["delete"]=kt,Ut.prototype.get=_t,Ut.prototype.has=vt,Ut.prototype.set=Ht;var Wt=Ut;var qt=function qt(e,t){for(var i=-1,n=null==e?0:e.length;++i<n&&!1!==t(e[i],i,e);){;}return e;},$t=tt(Object.keys,Object),Yt=Object.prototype.hasOwnProperty;var Gt=function Gt(e){if(!Me(e))return $t(e);var t=[];for(var i in Object(e)){Yt.call(e,i)&&"constructor"!=i&&t.push(i);}return t;};var Kt=function Kt(e){return ce(e)?Se(e):Gt(e);};var Qt=function Qt(e,t){return e&&J(t,Kt(t),e);};var Jt=function Jt(e,t){return e&&J(t,ze(t),e);},Zt=i(9);var Xt=function Xt(e,t){var i=-1,n=e.length;for(t||(t=Array(n));++i<n;){t[i]=e[i];}return t;};var ei=function ei(e,t){for(var i=-1,n=null==e?0:e.length,o=0,r=[];++i<n;){var s=e[i];t(s,i,e)&&(r[o++]=s);}return r;};var ti=function ti(){return[];},ii=Object.prototype.propertyIsEnumerable,ni=Object.getOwnPropertySymbols,oi=ni?function(e){return null==e?[]:(e=Object(e),ei(ni(e),function(t){return ii.call(e,t);}));}:ti;var ri=function ri(e,t){return J(e,oi(e),t);};var si=function si(e,t){for(var i=-1,n=t.length,o=e.length;++i<n;){e[o+i]=t[i];}return e;},ai=Object.getOwnPropertySymbols?function(e){for(var t=[];e;){si(t,oi(e)),e=it(e);}return t;}:ti;var ci=function ci(e,t){return J(e,ai(e),t);};var li=function li(e,t,i){var n=t(e);return _e(e)?n:si(n,i(e));};var di=function di(e){return li(e,Kt,oi);};var hi=function hi(e){return li(e,ze,ai);},ui=q(k.a,"DataView"),gi=q(k.a,"Promise"),mi=q(k.a,"Set"),fi=q(k.a,"WeakMap"),pi=D(ui),bi=D(yt),wi=D(gi),ki=D(mi),_i=D(fi),vi=S;(ui&&"[object DataView]"!=vi(new ui(new ArrayBuffer(1)))||yt&&"[object Map]"!=vi(new yt())||gi&&"[object Promise]"!=vi(gi.resolve())||mi&&"[object Set]"!=vi(new mi())||fi&&"[object WeakMap]"!=vi(new fi()))&&(vi=function vi(e){var t=S(e),i="[object Object]"==t?e.constructor:void 0,n=i?D(i):"";if(n)switch(n){case pi:return"[object DataView]";case bi:return"[object Map]";case wi:return"[object Promise]";case ki:return"[object Set]";case _i:return"[object WeakMap]";}return t;});var yi=vi,xi=Object.prototype.hasOwnProperty;var Ai=function Ai(e){var t=e.length,i=new e.constructor(t);return t&&"string"==typeof e[0]&&xi.call(e,"index")&&(i.index=e.index,i.input=e.input),i;},Ci=k.a.Uint8Array;var Ti=function Ti(e){var t=new e.constructor(e.byteLength);return new Ci(t).set(new Ci(e)),t;};var Ei=function Ei(e,t){var i=t?Ti(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength);},Ii=/\w*$/;var Si=function Si(e){var t=new e.constructor(e.source,Ii.exec(e));return t.lastIndex=e.lastIndex,t;},Pi=_?_.prototype:void 0,Mi=Pi?Pi.valueOf:void 0;var Ni=function Ni(e){return Mi?Object(Mi.call(e)):{};};var Ri=function Ri(e,t){var i=t?Ti(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length);};var Oi=function Oi(e,t,i){var n=e.constructor;switch(t){case"[object ArrayBuffer]":return Ti(e);case"[object Boolean]":case"[object Date]":return new n(+e);case"[object DataView]":return Ei(e,i);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Ri(e,i);case"[object Map]":return new n();case"[object Number]":case"[object String]":return new n(e);case"[object RegExp]":return Si(e);case"[object Set]":return new n();case"[object Symbol]":return Ni(e);}},zi=Object.create,Di=function(){function e(){}return function(t){if(!w(t))return{};if(zi)return zi(t);e.prototype=t;var i=new e();return e.prototype=void 0,i;};}();var Li=function Li(e){return"function"!=typeof e.constructor||Me(e)?{}:Di(it(e));};var Vi=function Vi(e){return me(e)&&"[object Map]"==yi(e);},ji=Ce.a&&Ce.a.isMap,Bi=ji?Ae(ji):Vi;var Fi=function Fi(e){return me(e)&&"[object Set]"==yi(e);},Hi=Ce.a&&Ce.a.isSet,Ui=Hi?Ae(Hi):Fi,Wi={};Wi["[object Arguments]"]=Wi["[object Array]"]=Wi["[object ArrayBuffer]"]=Wi["[object DataView]"]=Wi["[object Boolean]"]=Wi["[object Date]"]=Wi["[object Float32Array]"]=Wi["[object Float64Array]"]=Wi["[object Int8Array]"]=Wi["[object Int16Array]"]=Wi["[object Int32Array]"]=Wi["[object Map]"]=Wi["[object Number]"]=Wi["[object Object]"]=Wi["[object RegExp]"]=Wi["[object Set]"]=Wi["[object String]"]=Wi["[object Symbol]"]=Wi["[object Uint8Array]"]=Wi["[object Uint8ClampedArray]"]=Wi["[object Uint16Array]"]=Wi["[object Uint32Array]"]=!0,Wi["[object Error]"]=Wi["[object Function]"]=Wi["[object WeakMap]"]=!1;var qi=function e(t,i,n,o,r,s){var a,c=1&i,l=2&i,d=4&i;if(n&&(a=r?n(t,o,r,s):n(t)),void 0!==a)return a;if(!w(t))return t;var h=_e(t);if(h){if(a=Ai(t),!c)return Xt(t,a);}else{var u=yi(t),g="[object Function]"==u||"[object GeneratorFunction]"==u;if(Object(ve.a)(t))return Object(Zt.a)(t,c);if("[object Object]"==u||"[object Arguments]"==u||g&&!r){if(a=l||g?{}:Li(t),!c)return l?ci(t,Jt(a,t)):ri(t,Qt(a,t));}else{if(!Wi[u])return r?t:{};a=Oi(t,u,c);}}s||(s=new Wt());var m=s.get(t);if(m)return m;s.set(t,a),Ui(t)?t.forEach(function(o){a.add(e(o,i,n,o,t,s));}):Bi(t)&&t.forEach(function(o,r){a.set(r,e(o,i,n,r,t,s));});var f=h?void 0:(d?l?hi:di:l?ze:Kt)(t);return qt(f||t,function(o,r){f&&(o=t[r=o]),Q(a,r,e(o,i,n,r,t,s));}),a;};var $i=function $i(e,t){return qi(e,5,t="function"==typeof t?t:void 0);};var Yi=function Yi(e){return me(e)&&1===e.nodeType&&!ct(e);};var Gi=/*#__PURE__*/function(){function Gi(e,t){_classCallCheck(this,Gi);this._config={},t&&this.define(Ki(t)),e&&this._setObjectToTarget(this._config,e);}_createClass(Gi,[{key:"set",value:function set(e,t){this._setToTarget(this._config,e,t);}},{key:"define",value:function define(e,t){this._setToTarget(this._config,e,t,!0);}},{key:"get",value:function get(e){return this._getFromSource(this._config,e);}},{key:"names",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function names(){var _i6,_Object$keys,_e9;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function names$(_context){while(1){switch(_context.prev=_context.next){case 0:_i6=0,_Object$keys=Object.keys(this._config);case 1:if(!(_i6<_Object$keys.length)){_context.next=8;break;}_e9=_Object$keys[_i6];_context.next=5;return _e9;case 5:_i6++;_context.next=1;break;case 8:case"end":return _context.stop();}}},names,this);})},{key:"_setToTarget",value:function _setToTarget(e,t,i){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:!1;if(ct(t))return void this._setObjectToTarget(e,t,n);var o=t.split(".");t=o.pop();var _iterator6=_createForOfIteratorHelper(o),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var _t5=_step6.value;ct(e[_t5])||(e[_t5]={}),e=e[_t5];}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}if(ct(i))return ct(e[t])||(e[t]={}),e=e[t],void this._setObjectToTarget(e,i,n);n&&void 0!==e[t]||(e[t]=i);}},{key:"_getFromSource",value:function _getFromSource(e,t){var i=t.split(".");t=i.pop();var _iterator7=_createForOfIteratorHelper(i),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var _t6=_step7.value;if(!ct(e[_t6])){e=null;break;}e=e[_t6];}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}return e?Ki(e[t]):void 0;}},{key:"_setObjectToTarget",value:function _setObjectToTarget(e,t,i){var _this11=this;Object.keys(t).forEach(function(n){_this11._setToTarget(e,n,t[n],i);});}}]);return Gi;}();function Ki(e){return $i(e,Qi);}function Qi(e){return Yi(e)?e:void 0;}function Ji(e){return!(!e||!e[Symbol.iterator]);}var Zi=/*#__PURE__*/function(_Symbol$iterator){function Zi(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,Zi);var i=Ji(e);if(i||(t=e),this._items=[],this._itemMap=new Map(),this._idProperty=t.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap(),this._bindToInternalToExternalMap=new WeakMap(),this._skippedIndexesFromExternal=[],i){var _iterator8=_createForOfIteratorHelper(e),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var _t7=_step8.value;this._items.push(_t7),this._itemMap.set(this._getItemIdBeforeAdding(_t7),_t7);}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}}}_createClass(Zi,[{key:"length",get:function get(){return this._items.length;}},{key:"first",get:function get(){return this._items[0]||null;}},{key:"last",get:function get(){return this._items[this.length-1]||null;}},{key:"add",value:function add(e,t){return this.addMany([e],t);}},{key:"addMany",value:function addMany(e,t){if(void 0===t)t=this._items.length;else if(t>this._items.length||t<0)throw new c.a("collection-add-item-invalid-index",this);for(var _i7=0;_i7<e.length;_i7++){var _n4=e[_i7],_o4=this._getItemIdBeforeAdding(_n4),_r4=t+_i7;this._items.splice(_r4,0,_n4),this._itemMap.set(_o4,_n4),this.fire("add",_n4,_r4);}return this.fire("change",{added:e,removed:[],index:t}),this;}},{key:"get",value:function get(e){var t;if("string"==typeof e)t=this._itemMap.get(e);else{if("number"!=typeof e)throw new c.a("collection-get-invalid-arg",this);t=this._items[e];}return t||null;}},{key:"has",value:function has(e){if("string"==typeof e)return this._itemMap.has(e);{var _t8=e[this._idProperty];return this._itemMap.has(_t8);}}},{key:"getIndex",value:function getIndex(e){var t;return t="string"==typeof e?this._itemMap.get(e):e,this._items.indexOf(t);}},{key:"remove",value:function remove(e){var _this$_remove=this._remove(e),_this$_remove2=_slicedToArray(_this$_remove,2),t=_this$_remove2[0],i=_this$_remove2[1];return this.fire("change",{added:[],removed:[t],index:i}),t;}},{key:"map",value:function map(e,t){return this._items.map(e,t);}},{key:"find",value:function find(e,t){return this._items.find(e,t);}},{key:"filter",value:function filter(e,t){return this._items.filter(e,t);}},{key:"clear",value:function clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);var e=Array.from(this._items);for(;this.length;){this._remove(0);}this.fire("change",{added:[],removed:e,index:0});}},{key:"bindTo",value:function bindTo(e){var _this12=this;if(this._bindToCollection)throw new c.a("collection-bind-to-rebind",this);return this._bindToCollection=e,{as:function as(e){_this12._setUpBindToBinding(function(t){return new e(t);});},using:function using(e){"function"==typeof e?_this12._setUpBindToBinding(function(t){return e(t);}):_this12._setUpBindToBinding(function(t){return t[e];});}};}},{key:"_setUpBindToBinding",value:function _setUpBindToBinding(e){var _this13=this;var t=this._bindToCollection,i=function i(_i9,n,o){var r=t._bindToCollection==_this13,s=t._bindToInternalToExternalMap.get(n);if(r&&s)_this13._bindToExternalToInternalMap.set(n,s),_this13._bindToInternalToExternalMap.set(s,n);else{var _i8=e(n);if(!_i8)return void _this13._skippedIndexesFromExternal.push(o);var _r5=o;var _iterator9=_createForOfIteratorHelper(_this13._skippedIndexesFromExternal),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var _e11=_step9.value;o>_e11&&_r5--;}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}var _iterator10=_createForOfIteratorHelper(t._skippedIndexesFromExternal),_step10;try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var _e12=_step10.value;_r5>=_e12&&_r5++;}}catch(err){_iterator10.e(err);}finally{_iterator10.f();}_this13._bindToExternalToInternalMap.set(n,_i8),_this13._bindToInternalToExternalMap.set(_i8,n),_this13.add(_i8,_r5);for(var _e10=0;_e10<t._skippedIndexesFromExternal.length;_e10++){_r5<=t._skippedIndexesFromExternal[_e10]&&t._skippedIndexesFromExternal[_e10]++;}}};var _iterator11=_createForOfIteratorHelper(t),_step11;try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var _e13=_step11.value;i(0,_e13,t.getIndex(_e13));}}catch(err){_iterator11.e(err);}finally{_iterator11.f();}this.listenTo(t,"add",i),this.listenTo(t,"remove",function(e,t,i){var n=_this13._bindToExternalToInternalMap.get(t);n&&_this13.remove(n),_this13._skippedIndexesFromExternal=_this13._skippedIndexesFromExternal.reduce(function(e,t){return i<t&&e.push(t-1),i>t&&e.push(t),e;},[]);});}},{key:"_getItemIdBeforeAdding",value:function _getItemIdBeforeAdding(e){var t=this._idProperty;var i;if(t in e){if(i=e[t],"string"!=typeof i)throw new c.a("collection-add-invalid-id",this);if(this.get(i))throw new c.a("collection-add-item-already-exists",this);}else e[t]=i=s();return i;}},{key:"_remove",value:function _remove(e){var t,i,n,o=!1;var r=this._idProperty;if("string"==typeof e?(i=e,n=this._itemMap.get(i),o=!n,n&&(t=this._items.indexOf(n))):"number"==typeof e?(t=e,n=this._items[t],o=!n,n&&(i=n[r])):(n=e,i=n[r],t=this._items.indexOf(n),o=-1==t||!this._itemMap.get(i)),o)throw new c.a("collection-remove-404",this);this._items.splice(t,1),this._itemMap["delete"](i);var s=this._bindToInternalToExternalMap.get(n);return this._bindToInternalToExternalMap["delete"](n),this._bindToExternalToInternalMap["delete"](s),this.fire("remove",n,t),[n,t];}},{key:_Symbol$iterator,value:function value(){return this._items[Symbol.iterator]();}}]);return Zi;}(Symbol.iterator);Ke(Zi,h);var Xi=/*#__PURE__*/function(_Symbol$iterator2){function Xi(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];_classCallCheck(this,Xi);this._context=e,this._plugins=new Map(),this._availablePlugins=new Map();var _iterator12=_createForOfIteratorHelper(t),_step12;try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var _e14=_step12.value;_e14.pluginName&&this._availablePlugins.set(_e14.pluginName,_e14);}}catch(err){_iterator12.e(err);}finally{_iterator12.f();}this._contextPlugins=new Map();var _iterator13=_createForOfIteratorHelper(i),_step13;try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var _step13$value=_slicedToArray(_step13.value,2),_e15=_step13$value[0],_t9=_step13$value[1];this._contextPlugins.set(_e15,_t9),this._contextPlugins.set(_t9,_e15),_e15.pluginName&&this._availablePlugins.set(_e15.pluginName,_e15);}}catch(err){_iterator13.e(err);}finally{_iterator13.f();}}_createClass(Xi,[{key:_Symbol$iterator2,value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function value(){var _iterator14,_step14,_e16;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function value$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_iterator14=_createForOfIteratorHelper(this._plugins);_context2.prev=1;_iterator14.s();case 3:if((_step14=_iterator14.n()).done){_context2.next=11;break;}_e16=_step14.value;_context2.t0="function"==typeof _e16[0];if(!_context2.t0){_context2.next=9;break;}_context2.next=9;return _e16;case 9:_context2.next=3;break;case 11:_context2.next=16;break;case 13:_context2.prev=13;_context2.t1=_context2["catch"](1);_iterator14.e(_context2.t1);case 16:_context2.prev=16;_iterator14.f();return _context2.finish(16);case 19:case"end":return _context2.stop();}}},value,this,[[1,13,16,19]]);})},{key:"get",value:function get(e){var t=this._plugins.get(e);if(!t){var _t10=e;throw"function"==typeof e&&(_t10=e.pluginName||e.name),new c.a("plugincollection-plugin-not-loaded",this._context,{plugin:_t10});}return t;}},{key:"has",value:function has(e){return this._plugins.has(e);}},{key:"init",value:function init(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var n=this,o=this._context;!function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new Set();t.forEach(function(t){a(t)&&(i.has(t)||(i.add(t),t.pluginName&&!n._availablePlugins.has(t.pluginName)&&n._availablePlugins.set(t.pluginName,t),t.requires&&e(t.requires,i)));});}(e),u(e);var r=_toConsumableArray(function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new Set();return t.map(function(e){return a(e)?e:n._availablePlugins.get(e);}).reduce(function(t,n){return i.has(n)?t:(i.add(n),n.requires&&(u(n.requires,n),e(n.requires,i).forEach(function(e){return t.add(e);})),t.add(n));},new Set());}(e.filter(function(e){return!d(e,t);})));!function(e,t){var _iterator15=_createForOfIteratorHelper(t),_step15;try{for(_iterator15.s();!(_step15=_iterator15.n()).done;){var _i10=_step15.value;if("function"!=typeof _i10)throw new c.a("plugincollection-replace-plugin-invalid-type",null,{pluginItem:_i10});var _t11=_i10.pluginName;if(!_t11)throw new c.a("plugincollection-replace-plugin-missing-name",null,{pluginItem:_i10});if(_i10.requires&&_i10.requires.length)throw new c.a("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:_t11});var _o5=n._availablePlugins.get(_t11);if(!_o5)throw new c.a("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:_t11});var _r6=e.indexOf(_o5);if(-1===_r6){if(n._contextPlugins.has(_o5))return;throw new c.a("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:_t11});}if(_o5.requires&&_o5.requires.length)throw new c.a("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:_t11});e.splice(_r6,1,_i10),n._availablePlugins.set(_t11,_i10);}}catch(err){_iterator15.e(err);}finally{_iterator15.f();}}(r,i);var s=function(e){return e.map(function(e){var t=n._contextPlugins.get(e)||new e(o);return n._add(e,t),t;});}(r);return g(s,"init").then(function(){return g(s,"afterInit");}).then(function(){return s;});function a(e){return"function"==typeof e;}function l(e){return a(e)&&e.isContextPlugin;}function d(e,t){return t.some(function(t){return t===e||h(e)===t||h(t)===e;});}function h(e){return a(e)?e.pluginName||e.name:e;}function u(e){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;e.map(function(e){return a(e)?e:n._availablePlugins.get(e)||e;}).forEach(function(e){!function(e,t){if(a(e))return;if(t)throw new c.a("plugincollection-soft-required",o,{missingPlugin:e,requiredBy:h(t)});throw new c.a("plugincollection-plugin-not-found",o,{plugin:e});}(e,i),function(e,t){if(!l(t))return;if(l(e))return;throw new c.a("plugincollection-context-required",o,{plugin:h(e),requiredBy:h(t)});}(e,i),function(e,i){if(!i)return;if(!d(e,t))return;throw new c.a("plugincollection-required",o,{plugin:h(e),requiredBy:h(i)});}(e,i);});}function g(e,t){return e.reduce(function(e,i){return i[t]?n._contextPlugins.has(i)?e:e.then(i[t].bind(i)):e;},Promise.resolve());}}},{key:"destroy",value:function destroy(){var e=[];var _iterator16=_createForOfIteratorHelper(this),_step16;try{for(_iterator16.s();!(_step16=_iterator16.n()).done;){var _step16$value=_slicedToArray(_step16.value,2),_t12=_step16$value[1];"function"!=typeof _t12.destroy||this._contextPlugins.has(_t12)||e.push(_t12.destroy());}}catch(err){_iterator16.e(err);}finally{_iterator16.f();}return Promise.all(e);}},{key:"_add",value:function _add(e,t){this._plugins.set(e,t);var i=e.pluginName;if(i){if(this._plugins.has(i))throw new c.a("plugincollection-plugin-name-conflict",null,{pluginName:i,plugin1:this._plugins.get(i).constructor,plugin2:e});this._plugins.set(i,t);}}}]);return Xi;}(Symbol.iterator);function en(e){return Array.isArray(e)?e:[e];}function tn(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;if("number"!=typeof i)throw new c.a("translation-service-quantity-not-a-number",null,{quantity:i});var n=Object.keys(window.CKEDITOR_TRANSLATIONS).length;1===n&&(e=Object.keys(window.CKEDITOR_TRANSLATIONS)[0]);var o=t.id||t.string;if(0===n||!function(e,t){return!!window.CKEDITOR_TRANSLATIONS[e]&&!!window.CKEDITOR_TRANSLATIONS[e].dictionary[t];}(e,o))return 1!==i?t.plural:t.string;var r=window.CKEDITOR_TRANSLATIONS[e].dictionary,s=window.CKEDITOR_TRANSLATIONS[e].getPluralForm||function(e){return 1===e?0:1;};if("string"==typeof r[o])return r[o];var a=Number(s(i));return r[o][a];}Ke(Xi,h),window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={});var nn=["ar","ara","fa","per","fas","he","heb","ku","kur","ug","uig"];function on(e){return nn.includes(e)?"rtl":"ltr";}var rn=/*#__PURE__*/function(){function rn(){var _this14=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,rn);this.uiLanguage=e.uiLanguage||"en",this.contentLanguage=e.contentLanguage||this.uiLanguage,this.uiLanguageDirection=on(this.uiLanguage),this.contentLanguageDirection=on(this.contentLanguage),this.t=function(e,t){return _this14._t(e,t);};}_createClass(rn,[{key:"language",get:function get(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage;}},{key:"_t",value:function _t(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];t=en(t),"string"==typeof e&&(e={string:e});var i=!!e.plural?t[0]:1;return function(e,t){return e.replace(/%(\d+)/g,function(e,i){return i<t.length?t[i]:e;});}(tn(this.uiLanguage,e,i),t);}}]);return rn;}();var sn=/*#__PURE__*/function(){function sn(e){_classCallCheck(this,sn);this.config=new Gi(e,this.constructor.defaultConfig);var t=this.constructor.builtinPlugins;this.config.define("plugins",t),this.plugins=new Xi(this,t);var i=this.config.get("language")||{};this.locale=new rn({uiLanguage:"string"==typeof i?i:i.ui,contentLanguage:this.config.get("language.content")}),this.t=this.locale.t,this.editors=new Zi(),this._contextOwner=null;}_createClass(sn,[{key:"initPlugins",value:function initPlugins(){var e=this.config.get("plugins")||[],t=this.config.get("substitutePlugins")||[];var _iterator17=_createForOfIteratorHelper(e.concat(t)),_step17;try{for(_iterator17.s();!(_step17=_iterator17.n()).done;){var _i11=_step17.value;if("function"!=typeof _i11)throw new c.a("context-initplugins-constructor-only",null,{Plugin:_i11});if(!0!==_i11.isContextPlugin)throw new c.a("context-initplugins-invalid-plugin",null,{Plugin:_i11});}}catch(err){_iterator17.e(err);}finally{_iterator17.f();}return this.plugins.init(e,[],t);}},{key:"destroy",value:function destroy(){var _this15=this;return Promise.all(Array.from(this.editors,function(e){return e.destroy();})).then(function(){return _this15.plugins.destroy();});}},{key:"_addEditor",value:function _addEditor(e,t){if(this._contextOwner)throw new c.a("context-addeditor-private-context");this.editors.add(e),t&&(this._contextOwner=e);}},{key:"_removeEditor",value:function _removeEditor(e){return this.editors.has(e)&&this.editors.remove(e),this._contextOwner===e?this.destroy():Promise.resolve();}},{key:"_getEditorConfig",value:function _getEditorConfig(){var e={};var _iterator18=_createForOfIteratorHelper(this.config.names()),_step18;try{for(_iterator18.s();!(_step18=_iterator18.n()).done;){var _t13=_step18.value;["plugins","removePlugins","extraPlugins"].includes(_t13)||(e[_t13]=this.config.get(_t13));}}catch(err){_iterator18.e(err);}finally{_iterator18.f();}return e;}}],[{key:"create",value:function create(e){var _this16=this;return new Promise(function(t){var i=new _this16(e);t(i.initPlugins().then(function(){return i;}));});}}]);return sn;}();var an=/*#__PURE__*/function(){function an(e){_classCallCheck(this,an);this.context=e;}_createClass(an,[{key:"destroy",value:function destroy(){this.stopListening();}}],[{key:"isContextPlugin",get:function get(){return!0;}}]);return an;}();function cn(e,t){var i=Math.min(e.length,t.length);for(var _n5=0;_n5<i;_n5++){if(e[_n5]!=t[_n5])return _n5;}return e.length==t.length?"same":e.length<t.length?"prefix":"extension";}Ke(an,Ue);var ln=function ln(e){return qi(e,4);};var dn=/*#__PURE__*/function(){function dn(e){_classCallCheck(this,dn);this.document=e,this.parent=null;}_createClass(dn,[{key:"index",get:function get(){var e;if(!this.parent)return null;if(-1==(e=this.parent.getChildIndex(this)))throw new c.a("view-node-not-found-in-parent",this);return e;}},{key:"nextSibling",get:function get(){var e=this.index;return null!==e&&this.parent.getChild(e+1)||null;}},{key:"previousSibling",get:function get(){var e=this.index;return null!==e&&this.parent.getChild(e-1)||null;}},{key:"root",get:function get(){var e=this;for(;e.parent;){e=e.parent;}return e;}},{key:"isAttached",value:function isAttached(){return this.root.is("rootElement");}},{key:"getPath",value:function getPath(){var e=[];var t=this;for(;t.parent;){e.unshift(t.index),t=t.parent;}return e;}},{key:"getAncestors",value:function getAncestors(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{includeSelf:!1,parentFirst:!1};var t=[];var i=e.includeSelf?this:this.parent;for(;i;){t[e.parentFirst?"push":"unshift"](i),i=i.parent;}return t;}},{key:"getCommonAncestor",value:function getCommonAncestor(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=this.getAncestors(t),n=e.getAncestors(t);var o=0;for(;i[o]==n[o]&&i[o];){o++;}return 0===o?null:i[o-1];}},{key:"isBefore",value:function isBefore(e){if(this==e)return!1;if(this.root!==e.root)return!1;var t=this.getPath(),i=e.getPath(),n=cn(t,i);switch(n){case"prefix":return!0;case"extension":return!1;default:return t[n]<i[n];}}},{key:"isAfter",value:function isAfter(e){return this!=e&&this.root===e.root&&!this.isBefore(e);}},{key:"_remove",value:function _remove(){this.parent._removeChildren(this.index);}},{key:"_fireChange",value:function _fireChange(e,t){this.fire("change:"+e,t),this.parent&&this.parent._fireChange(e,t);}},{key:"toJSON",value:function toJSON(){var e=ln(this);return delete e.parent,e;}},{key:"is",value:function is(e){return"node"===e||"view:node"===e;}}]);return dn;}();Ke(dn,h);var hn=/*#__PURE__*/function(_dn){_inherits(hn,_dn);var _super3=_createSuper(hn);function hn(e,t){var _this17;_classCallCheck(this,hn);_this17=_super3.call(this,e),_this17._textData=t;return _this17;}_createClass(hn,[{key:"is",value:function is(e){return"$text"===e||"view:$text"===e||"text"===e||"view:text"===e||"node"===e||"view:node"===e;}},{key:"data",get:function get(){return this._textData;}},{key:"_data",get:function get(){return this.data;},set:function set(e){this._fireChange("text",this),this._textData=e;}},{key:"isSimilar",value:function isSimilar(e){return e instanceof hn&&(this===e||this.data===e.data);}},{key:"_clone",value:function _clone(){return new hn(this.document,this.data);}}]);return hn;}(dn);var un=/*#__PURE__*/function(){function un(e,t,i){_classCallCheck(this,un);if(this.textNode=e,t<0||t>e.data.length)throw new c.a("view-textproxy-wrong-offsetintext",this);if(i<0||t+i>e.data.length)throw new c.a("view-textproxy-wrong-length",this);this.data=e.data.substring(t,t+i),this.offsetInText=t;}_createClass(un,[{key:"offsetSize",get:function get(){return this.data.length;}},{key:"isPartial",get:function get(){return this.data.length!==this.textNode.data.length;}},{key:"parent",get:function get(){return this.textNode.parent;}},{key:"root",get:function get(){return this.textNode.root;}},{key:"document",get:function get(){return this.textNode.document;}},{key:"is",value:function is(e){return"$textProxy"===e||"view:$textProxy"===e||"textProxy"===e||"view:textProxy"===e;}},{key:"getAncestors",value:function getAncestors(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{includeSelf:!1,parentFirst:!1};var t=[];var i=e.includeSelf?this.textNode:this.parent;for(;null!==i;){t[e.parentFirst?"push":"unshift"](i),i=i.parent;}return t;}}]);return un;}();function gn(e){return Ji(e)?new Map(e):function(e){var t=new Map();for(var _i12 in e){t.set(_i12,e[_i12]);}return t;}(e);}var mn=/*#__PURE__*/function(){function mn(){_classCallCheck(this,mn);this._patterns=[],this.add.apply(this,arguments);}_createClass(mn,[{key:"add",value:function add(){for(var _len10=arguments.length,e=new Array(_len10),_key10=0;_key10<_len10;_key10++){e[_key10]=arguments[_key10];}for(var _i13=0,_e17=e;_i13<_e17.length;_i13++){var _t14=_e17[_i13];("string"==typeof _t14||_t14 instanceof RegExp)&&(_t14={name:_t14}),this._patterns.push(_t14);}}},{key:"match",value:function match(){for(var _len11=arguments.length,e=new Array(_len11),_key11=0;_key11<_len11;_key11++){e[_key11]=arguments[_key11];}for(var _i14=0,_e18=e;_i14<_e18.length;_i14++){var _t15=_e18[_i14];var _iterator19=_createForOfIteratorHelper(this._patterns),_step19;try{for(_iterator19.s();!(_step19=_iterator19.n()).done;){var _e19=_step19.value;var _i15=fn(_t15,_e19);if(_i15)return{element:_t15,pattern:_e19,match:_i15};}}catch(err){_iterator19.e(err);}finally{_iterator19.f();}}return null;}},{key:"matchAll",value:function matchAll(){var t=[];for(var _len12=arguments.length,e=new Array(_len12),_key12=0;_key12<_len12;_key12++){e[_key12]=arguments[_key12];}for(var _i16=0,_e20=e;_i16<_e20.length;_i16++){var _i17=_e20[_i16];var _iterator20=_createForOfIteratorHelper(this._patterns),_step20;try{for(_iterator20.s();!(_step20=_iterator20.n()).done;){var _e21=_step20.value;var _n6=fn(_i17,_e21);_n6&&t.push({element:_i17,pattern:_e21,match:_n6});}}catch(err){_iterator20.e(err);}finally{_iterator20.f();}}return t.length>0?t:null;}},{key:"getElementName",value:function getElementName(){if(1!==this._patterns.length)return null;var e=this._patterns[0],t=e.name;return"function"==typeof e||!t||t instanceof RegExp?null:t;}}]);return mn;}();function fn(e,t){if("function"==typeof t)return t(e);var i={};return t.name&&(i.name=function(e,t){if(e instanceof RegExp)return e.test(t);return e===t;}(t.name,e.name),!i.name)||t.attributes&&(i.attributes=function(e,t){var i=new Set(t.getAttributeKeys());ct(e)?(void 0!==e.style&&Object(c.b)("matcher-pattern-deprecated-attributes-style-key",e),void 0!==e["class"]&&Object(c.b)("matcher-pattern-deprecated-attributes-class-key",e)):(i["delete"]("style"),i["delete"]("class"));return pn(e,i,function(e){return t.getAttribute(e);});}(t.attributes,e),!i.attributes)?null:!(t.classes&&(i.classes=function(e,t){return pn(e,t.getClassNames());}(t.classes,e),!i.classes))&&!(t.styles&&(i.styles=function(e,t){return pn(e,t.getStyleNames(!0),function(e){return t.getStyle(e);});}(t.styles,e),!i.styles))&&i;}function pn(e,t,i){var n=function(e){if(Array.isArray(e))return e.map(function(e){return ct(e)?(void 0!==e.key&&void 0!==e.value||Object(c.b)("matcher-pattern-missing-key-or-value",e),[e.key,e.value]):[e,!0];});if(ct(e))return Object.entries(e);return[[e,!0]];}(e),o=Array.from(t),r=[];return n.forEach(function(_ref){var _ref2=_slicedToArray(_ref,2),e=_ref2[0],t=_ref2[1];o.forEach(function(n){(function(e,t){return!0===e||e===t||e instanceof RegExp&&e.test(t);})(e,n)&&function(e,t,i){if(!0===e)return!0;var n=i(t);return e===n||e instanceof RegExp&&e.test(n);}(t,n,i)&&r.push(n);});}),!n.length||r.length<n.length?null:r;}var bn=function bn(e){return"symbol"==_typeof(e)||me(e)&&"[object Symbol]"==S(e);},wn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kn=/^\w*$/;var _n=function _n(e,t){if(_e(e))return!1;var i=_typeof(e);return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!bn(e))||kn.test(e)||!wn.test(e)||null!=t&&e in Object(t);};function vn(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var i=function i(){var n=arguments,o=t?t.apply(this,n):n[0],r=i.cache;if(r.has(o))return r.get(o);var s=e.apply(this,n);return i.cache=r.set(o,s)||r,s;};return i.cache=new(vn.Cache||Ft)(),i;}vn.Cache=Ft;var yn=vn;var xn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,An=/\\(\\)?/g,Cn=function(e){var t=yn(e,function(e){return 500===i.size&&i.clear(),e;}),i=t.cache;return t;}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(xn,function(e,i,n,o){t.push(n?o.replace(An,"$1"):i||e);}),t;});var Tn=function Tn(e,t){for(var i=-1,n=null==e?0:e.length,o=Array(n);++i<n;){o[i]=t(e[i],i,e);}return o;},En=_?_.prototype:void 0,In=En?En.toString:void 0;var Sn=function e(t){if("string"==typeof t)return t;if(_e(t))return Tn(t,e)+"";if(bn(t))return In?In.call(t):"";var i=t+"";return"0"==i&&1/t==-1/0?"-0":i;};var Pn=function Pn(e){return null==e?"":Sn(e);};var Mn=function Mn(e,t){return _e(e)?e:_n(e,t)?[e]:Cn(Pn(e));};var Nn=function Nn(e){var t=null==e?0:e.length;return t?e[t-1]:void 0;};var Rn=function Rn(e){if("string"==typeof e||bn(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t;};var On=function On(e,t){for(var i=0,n=(t=Mn(t,e)).length;null!=e&&i<n;){e=e[Rn(t[i++])];}return i&&i==n?e:void 0;};var zn=function zn(e,t,i){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(i=i>o?o:i)<0&&(i+=o),o=t>i?0:i-t>>>0,t>>>=0;for(var r=Array(o);++n<o;){r[n]=e[n+t];}return r;};var Dn=function Dn(e,t){return t.length<2?e:On(e,zn(t,0,-1));};var Ln=function Ln(e,t){return t=Mn(t,e),null==(e=Dn(e,t))||delete e[Rn(Nn(t))];};var Vn=function Vn(e,t){return null==e||Ln(e,t);};var jn=function jn(e,t,i){var n=null==e?void 0:On(e,t);return void 0===n?i:n;};var Bn=function Bn(e,t,i){(void 0!==i&&!G(e[t],i)||void 0===i&&!(t in e))&&Y(e,t,i);};var Fn=function(e){return function(t,i,n){for(var o=-1,r=Object(t),s=n(t),a=s.length;a--;){var c=s[e?a:++o];if(!1===i(r[c],c,r))break;}return t;};}();var Hn=function Hn(e){return me(e)&&ce(e);};var Un=function Un(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t];};var Wn=function Wn(e){return J(e,ze(e));};var qn=function qn(e,t,i,n,o,r,s){var a=Un(e,i),c=Un(t,i),l=s.get(c);if(l)Bn(e,i,l);else{var d=r?r(a,c,i+"",e,t,s):void 0,h=void 0===d;if(h){var u=_e(c),g=!u&&Object(ve.a)(c),m=!u&&!g&&Ee(c);d=c,u||g||m?_e(a)?d=a:Hn(a)?d=Xt(a):g?(h=!1,d=Object(Zt.a)(c,!0)):m?(h=!1,d=Ri(c,!0)):d=[]:ct(c)||ke(c)?(d=a,ke(a)?d=Wn(a):w(a)&&!M(a)||(d=Li(c))):h=!1;}h&&(s.set(c,d),o(d,c,n,r,s),s["delete"](c)),Bn(e,i,d);}};var $n=function e(t,i,n,o,r){t!==i&&Fn(i,function(s,a){if(r||(r=new Wt()),w(s))qn(t,i,a,n,e,o,r);else{var c=o?o(Un(t,a),s,a+"",t,i,r):void 0;void 0===c&&(c=s),Bn(t,a,c);}},ze);},Yn=ue(function(e,t,i){$n(e,t,i);});var Gn=function Gn(e,t,i,n){if(!w(e))return e;for(var o=-1,r=(t=Mn(t,e)).length,s=r-1,a=e;null!=a&&++o<r;){var c=Rn(t[o]),l=i;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(o!=s){var d=a[c];void 0===(l=n?n(d,c,a):void 0)&&(l=w(d)?d:de(t[o+1])?[]:{});}Q(a,c,l),a=a[c];}return e;};var Kn=function Kn(e,t,i){return null==e?e:Gn(e,t,i);};var Qn=/*#__PURE__*/function(){function Qn(e){_classCallCheck(this,Qn);this._styles={},this._styleProcessor=e;}_createClass(Qn,[{key:"isEmpty",get:function get(){var e=Object.entries(this._styles);return!Array.from(e).length;}},{key:"size",get:function get(){return this.isEmpty?0:this.getStyleNames().length;}},{key:"setTo",value:function setTo(e){this.clear();var t=Array.from(function(e){var t=null,i=0,n=0,o=null;var r=new Map();if(""===e)return r;";"!=e.charAt(e.length-1)&&(e+=";");for(var _s2=0;_s2<e.length;_s2++){var _a2=e.charAt(_s2);if(null===t)switch(_a2){case":":o||(o=e.substr(i,_s2-i),n=_s2+1);break;case'"':case"'":t=_a2;break;case";":{var _t16=e.substr(n,_s2-n);o&&r.set(o.trim(),_t16.trim()),o=null,i=_s2+1;break;}}else _a2===t&&(t=null);}return r;}(e).entries());for(var _i18=0,_t17=t;_i18<_t17.length;_i18++){var _t17$_i=_slicedToArray(_t17[_i18],2),_e22=_t17$_i[0],_i19=_t17$_i[1];this._styleProcessor.toNormalizedForm(_e22,_i19,this._styles);}}},{key:"has",value:function has(e){if(this.isEmpty)return!1;var t=this._styleProcessor.getReducedForm(e,this._styles).find(function(_ref3){var _ref4=_slicedToArray(_ref3,1),t=_ref4[0];return t===e;});return Array.isArray(t);}},{key:"set",value:function set(e,t){if(w(e))for(var _i20=0,_Object$entries=Object.entries(e);_i20<_Object$entries.length;_i20++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i20],2),_t18=_Object$entries$_i[0],_i21=_Object$entries$_i[1];this._styleProcessor.toNormalizedForm(_t18,_i21,this._styles);}else this._styleProcessor.toNormalizedForm(e,t,this._styles);}},{key:"remove",value:function remove(e){var t=Zn(e);Vn(this._styles,t),delete this._styles[e],this._cleanEmptyObjectsOnPath(t);}},{key:"getNormalized",value:function getNormalized(e){return this._styleProcessor.getNormalized(e,this._styles);}},{key:"toString",value:function toString(){return this.isEmpty?"":this._getStylesEntries().map(function(e){return e.join(":");}).sort().join(";")+";";}},{key:"getAsString",value:function getAsString(e){if(this.isEmpty)return;if(this._styles[e]&&!w(this._styles[e]))return this._styles[e];var t=this._styleProcessor.getReducedForm(e,this._styles).find(function(_ref5){var _ref6=_slicedToArray(_ref5,1),t=_ref6[0];return t===e;});return Array.isArray(t)?t[1]:void 0;}},{key:"getStyleNames",value:function getStyleNames(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:!1;if(this.isEmpty)return[];if(e)return this._styleProcessor.getStyleNames(this._styles);return this._getStylesEntries().map(function(_ref7){var _ref8=_slicedToArray(_ref7,1),e=_ref8[0];return e;});}},{key:"clear",value:function clear(){this._styles={};}},{key:"_getStylesEntries",value:function _getStylesEntries(){var e=[],t=Object.keys(this._styles);for(var _i22=0,_t19=t;_i22<_t19.length;_i22++){var _i23=_t19[_i22];e.push.apply(e,_toConsumableArray(this._styleProcessor.getReducedForm(_i23,this._styles)));}return e;}},{key:"_cleanEmptyObjectsOnPath",value:function _cleanEmptyObjectsOnPath(e){var t=e.split(".");if(!(t.length>1))return;var i=t.splice(0,t.length-1).join("."),n=jn(this._styles,i);if(!n)return;!Array.from(Object.keys(n)).length&&this.remove(i);}}]);return Qn;}();var Jn=/*#__PURE__*/function(){function Jn(){_classCallCheck(this,Jn);this._normalizers=new Map(),this._extractors=new Map(),this._reducers=new Map(),this._consumables=new Map();}_createClass(Jn,[{key:"toNormalizedForm",value:function toNormalizedForm(e,t,i){if(w(t))Xn(i,Zn(e),t);else if(this._normalizers.has(e)){var _n7=this._normalizers.get(e),_n8=_n7(t),_o6=_n8.path,_r7=_n8.value;Xn(i,_o6,_r7);}else Xn(i,e,t);}},{key:"getNormalized",value:function getNormalized(e,t){if(!e)return Yn({},t);if(void 0!==t[e])return t[e];if(this._extractors.has(e)){var _i24=this._extractors.get(e);if("string"==typeof _i24)return jn(t,_i24);var _n9=_i24(e,t);if(_n9)return _n9;}return jn(t,Zn(e));}},{key:"getReducedForm",value:function getReducedForm(e,t){var i=this.getNormalized(e,t);if(void 0===i)return[];if(this._reducers.has(e)){return this._reducers.get(e)(i);}return[[e,i]];}},{key:"getStyleNames",value:function getStyleNames(e){var _this18=this;var t=Array.from(this._consumables.keys()).filter(function(t){var i=_this18.getNormalized(t,e);return i&&"object"==_typeof(i)?Object.keys(i).length:i;}),i=new Set([].concat(_toConsumableArray(t),_toConsumableArray(Object.keys(e))));return Array.from(i.values());}},{key:"getRelatedStyles",value:function getRelatedStyles(e){return this._consumables.get(e)||[];}},{key:"setNormalizer",value:function setNormalizer(e,t){this._normalizers.set(e,t);}},{key:"setExtractor",value:function setExtractor(e,t){this._extractors.set(e,t);}},{key:"setReducer",value:function setReducer(e,t){this._reducers.set(e,t);}},{key:"setStyleRelation",value:function setStyleRelation(e,t){this._mapStyleNames(e,t);var _iterator21=_createForOfIteratorHelper(t),_step21;try{for(_iterator21.s();!(_step21=_iterator21.n()).done;){var _i25=_step21.value;this._mapStyleNames(_i25,[e]);}}catch(err){_iterator21.e(err);}finally{_iterator21.f();}}},{key:"_mapStyleNames",value:function _mapStyleNames(e,t){var _this$_consumables$ge;this._consumables.has(e)||this._consumables.set(e,[]),(_this$_consumables$ge=this._consumables.get(e)).push.apply(_this$_consumables$ge,_toConsumableArray(t));}}]);return Jn;}();function Zn(e){return e.replace("-",".");}function Xn(e,t,i){var n=i;w(i)&&(n=Yn({},jn(e,t),i)),Kn(e,t,n);}var eo=/*#__PURE__*/function(_dn2){_inherits(eo,_dn2);var _super4=_createSuper(eo);function eo(e,t,i,n){var _this19;_classCallCheck(this,eo);if(_this19=_super4.call(this,e),_this19.name=t,_this19._attrs=function(e){e=gn(e);var _iterator22=_createForOfIteratorHelper(e),_step22;try{for(_iterator22.s();!(_step22=_iterator22.n()).done;){var _step22$value=_slicedToArray(_step22.value,2),_t20=_step22$value[0],_i26=_step22$value[1];null===_i26?e["delete"](_t20):"string"!=typeof _i26&&e.set(_t20,String(_i26));}}catch(err){_iterator22.e(err);}finally{_iterator22.f();}return e;}(i),_this19._children=[],n&&_this19._insertChild(0,n),_this19._classes=new Set(),_this19._attrs.has("class")){var _e23=_this19._attrs.get("class");to(_this19._classes,_e23),_this19._attrs["delete"]("class");}_this19._styles=new Qn(_this19.document.stylesProcessor),_this19._attrs.has("style")&&(_this19._styles.setTo(_this19._attrs.get("style")),_this19._attrs["delete"]("style")),_this19._customProperties=new Map(),_this19._isAllowedInsideAttributeElement=!1;return _possibleConstructorReturn(_this19);}_createClass(eo,[{key:"childCount",get:function get(){return this._children.length;}},{key:"isEmpty",get:function get(){return 0===this._children.length;}},{key:"isAllowedInsideAttributeElement",get:function get(){return this._isAllowedInsideAttributeElement;}},{key:"is",value:function is(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return t?t===this.name&&("element"===e||"view:element"===e):"element"===e||"view:element"===e||"node"===e||"view:node"===e;}},{key:"getChild",value:function getChild(e){return this._children[e];}},{key:"getChildIndex",value:function getChildIndex(e){return this._children.indexOf(e);}},{key:"getChildren",value:function getChildren(){return this._children[Symbol.iterator]();}},{key:"getAttributeKeys",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getAttributeKeys(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getAttributeKeys$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.t0=this._classes.size>0;if(!_context3.t0){_context3.next=4;break;}_context3.next=4;return"class";case 4:_context3.t1=this._styles.isEmpty;if(_context3.t1){_context3.next=8;break;}_context3.next=8;return"style";case 8:return _context3.delegateYield(this._attrs.keys(),"t2",9);case 9:case"end":return _context3.stop();}}},getAttributeKeys,this);})},{key:"getAttributes",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getAttributes(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getAttributes$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:return _context4.delegateYield(this._attrs.entries(),"t0",1);case 1:_context4.t1=this._classes.size>0;if(!_context4.t1){_context4.next=5;break;}_context4.next=5;return["class",this.getAttribute("class")];case 5:_context4.t2=this._styles.isEmpty;if(_context4.t2){_context4.next=9;break;}_context4.next=9;return["style",this.getAttribute("style")];case 9:case"end":return _context4.stop();}}},getAttributes,this);})},{key:"getAttribute",value:function getAttribute(e){if("class"==e)return this._classes.size>0?_toConsumableArray(this._classes).join(" "):void 0;if("style"==e){var _e24=this._styles.toString();return""==_e24?void 0:_e24;}return this._attrs.get(e);}},{key:"hasAttribute",value:function hasAttribute(e){return"class"==e?this._classes.size>0:"style"==e?!this._styles.isEmpty:this._attrs.has(e);}},{key:"isSimilar",value:function isSimilar(e){if(!(e instanceof eo))return!1;if(this===e)return!0;if(this.name!=e.name)return!1;if(this.isAllowedInsideAttributeElement!=e.isAllowedInsideAttributeElement)return!1;if(this._attrs.size!==e._attrs.size||this._classes.size!==e._classes.size||this._styles.size!==e._styles.size)return!1;var _iterator23=_createForOfIteratorHelper(this._attrs),_step23;try{for(_iterator23.s();!(_step23=_iterator23.n()).done;){var _step23$value=_slicedToArray(_step23.value,2),_t21=_step23$value[0],_i27=_step23$value[1];if(!e._attrs.has(_t21)||e._attrs.get(_t21)!==_i27)return!1;}}catch(err){_iterator23.e(err);}finally{_iterator23.f();}var _iterator24=_createForOfIteratorHelper(this._classes),_step24;try{for(_iterator24.s();!(_step24=_iterator24.n()).done;){var _t22=_step24.value;if(!e._classes.has(_t22))return!1;}}catch(err){_iterator24.e(err);}finally{_iterator24.f();}var _iterator25=_createForOfIteratorHelper(this._styles.getStyleNames()),_step25;try{for(_iterator25.s();!(_step25=_iterator25.n()).done;){var _t23=_step25.value;if(!e._styles.has(_t23)||e._styles.getAsString(_t23)!==this._styles.getAsString(_t23))return!1;}}catch(err){_iterator25.e(err);}finally{_iterator25.f();}return!0;}},{key:"hasClass",value:function hasClass(){for(var _len13=arguments.length,e=new Array(_len13),_key13=0;_key13<_len13;_key13++){e[_key13]=arguments[_key13];}for(var _i28=0,_e25=e;_i28<_e25.length;_i28++){var _t24=_e25[_i28];if(!this._classes.has(_t24))return!1;}return!0;}},{key:"getClassNames",value:function getClassNames(){return this._classes.keys();}},{key:"getStyle",value:function getStyle(e){return this._styles.getAsString(e);}},{key:"getNormalizedStyle",value:function getNormalizedStyle(e){return this._styles.getNormalized(e);}},{key:"getStyleNames",value:function getStyleNames(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:!1;return this._styles.getStyleNames(e);}},{key:"hasStyle",value:function hasStyle(){for(var _len14=arguments.length,e=new Array(_len14),_key14=0;_key14<_len14;_key14++){e[_key14]=arguments[_key14];}for(var _i29=0,_e26=e;_i29<_e26.length;_i29++){var _t25=_e26[_i29];if(!this._styles.has(_t25))return!1;}return!0;}},{key:"findAncestor",value:function findAncestor(){for(var _len15=arguments.length,e=new Array(_len15),_key15=0;_key15<_len15;_key15++){e[_key15]=arguments[_key15];}var t=_construct(mn,e);var i=this.parent;for(;i;){if(t.match(i))return i;i=i.parent;}return null;}},{key:"getCustomProperty",value:function getCustomProperty(e){return this._customProperties.get(e);}},{key:"getCustomProperties",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getCustomProperties(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getCustomProperties$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:return _context5.delegateYield(this._customProperties.entries(),"t0",1);case 1:case"end":return _context5.stop();}}},getCustomProperties,this);})},{key:"getIdentity",value:function getIdentity(){var e=Array.from(this._classes).sort().join(","),t=this._styles.toString(),i=Array.from(this._attrs).map(function(e){return"".concat(e[0],"=\"").concat(e[1],"\"");}).sort().join(" ");return this.name+(""==e?"":" class=\"".concat(e,"\""))+(t?" style=\"".concat(t,"\""):"")+(""==i?"":" "+i);}},{key:"_clone",value:function _clone(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:!1;var t=[];if(e){var _iterator26=_createForOfIteratorHelper(this.getChildren()),_step26;try{for(_iterator26.s();!(_step26=_iterator26.n()).done;){var _i30=_step26.value;t.push(_i30._clone(e));}}catch(err){_iterator26.e(err);}finally{_iterator26.f();}}var i=new this.constructor(this.document,this.name,this._attrs,t);return i._classes=new Set(this._classes),i._styles.set(this._styles.getNormalized()),i._customProperties=new Map(this._customProperties),i.getFillerOffset=this.getFillerOffset,i._isAllowedInsideAttributeElement=this.isAllowedInsideAttributeElement,i;}},{key:"_appendChild",value:function _appendChild(e){return this._insertChild(this.childCount,e);}},{key:"_insertChild",value:function _insertChild(e,t){this._fireChange("children",this);var i=0;var n=function(e,t){if("string"==typeof t)return[new hn(e,t)];Ji(t)||(t=[t]);return Array.from(t).map(function(t){return"string"==typeof t?new hn(e,t):t instanceof un?new hn(e,t.data):t;});}(this.document,t);var _iterator27=_createForOfIteratorHelper(n),_step27;try{for(_iterator27.s();!(_step27=_iterator27.n()).done;){var _t26=_step27.value;null!==_t26.parent&&_t26._remove(),_t26.parent=this,_t26.document=this.document,this._children.splice(e,0,_t26),e++,i++;}}catch(err){_iterator27.e(err);}finally{_iterator27.f();}return i;}},{key:"_removeChildren",value:function _removeChildren(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;this._fireChange("children",this);for(var _i31=e;_i31<e+t;_i31++){this._children[_i31].parent=null;}return this._children.splice(e,t);}},{key:"_setAttribute",value:function _setAttribute(e,t){t=String(t),this._fireChange("attributes",this),"class"==e?to(this._classes,t):"style"==e?this._styles.setTo(t):this._attrs.set(e,t);}},{key:"_removeAttribute",value:function _removeAttribute(e){return this._fireChange("attributes",this),"class"==e?this._classes.size>0&&(this._classes.clear(),!0):"style"==e?!this._styles.isEmpty&&(this._styles.clear(),!0):this._attrs["delete"](e);}},{key:"_addClass",value:function _addClass(e){this._fireChange("attributes",this);var _iterator28=_createForOfIteratorHelper(en(e)),_step28;try{for(_iterator28.s();!(_step28=_iterator28.n()).done;){var _t27=_step28.value;this._classes.add(_t27);}}catch(err){_iterator28.e(err);}finally{_iterator28.f();}}},{key:"_removeClass",value:function _removeClass(e){this._fireChange("attributes",this);var _iterator29=_createForOfIteratorHelper(en(e)),_step29;try{for(_iterator29.s();!(_step29=_iterator29.n()).done;){var _t28=_step29.value;this._classes["delete"](_t28);}}catch(err){_iterator29.e(err);}finally{_iterator29.f();}}},{key:"_setStyle",value:function _setStyle(e,t){this._fireChange("attributes",this),this._styles.set(e,t);}},{key:"_removeStyle",value:function _removeStyle(e){this._fireChange("attributes",this);var _iterator30=_createForOfIteratorHelper(en(e)),_step30;try{for(_iterator30.s();!(_step30=_iterator30.n()).done;){var _t29=_step30.value;this._styles.remove(_t29);}}catch(err){_iterator30.e(err);}finally{_iterator30.f();}}},{key:"_setCustomProperty",value:function _setCustomProperty(e,t){this._customProperties.set(e,t);}},{key:"_removeCustomProperty",value:function _removeCustomProperty(e){return this._customProperties["delete"](e);}}]);return eo;}(dn);function to(e,t){var i=t.split(/\s+/);e.clear(),i.forEach(function(t){return e.add(t);});}var io=/*#__PURE__*/function(_eo){_inherits(io,_eo);var _super5=_createSuper(io);function io(e,t,i,n){var _this20;_classCallCheck(this,io);_this20=_super5.call(this,e,t,i,n),_this20.getFillerOffset=no;return _this20;}_createClass(io,[{key:"is",value:function is(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return t?t===this.name&&("containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e):"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e;}}]);return io;}(eo);function no(){var e=_toConsumableArray(this.getChildren()),t=e[this.childCount-1];if(t&&t.is("element","br"))return this.childCount;var _iterator31=_createForOfIteratorHelper(e),_step31;try{for(_iterator31.s();!(_step31=_iterator31.n()).done;){var _t30=_step31.value;if(!_t30.is("uiElement"))return null;}}catch(err){_iterator31.e(err);}finally{_iterator31.f();}return this.childCount;}var oo=/*#__PURE__*/function(_io){_inherits(oo,_io);var _super6=_createSuper(oo);function oo(e,t,i,n){var _this21;_classCallCheck(this,oo);_this21=_super6.call(this,e,t,i,n),_this21.set("isReadOnly",!1),_this21.set("isFocused",!1),_this21.bind("isReadOnly").to(e),_this21.bind("isFocused").to(e,"isFocused",function(t){return t&&e.selection.editableElement==_assertThisInitialized(_this21);}),_this21.listenTo(e.selection,"change",function(){_this21.isFocused=e.isFocused&&e.selection.editableElement==_assertThisInitialized(_this21);});return _this21;}_createClass(oo,[{key:"is",value:function is(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return t?t===this.name&&("editableElement"===e||"view:editableElement"===e||"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e):"editableElement"===e||"view:editableElement"===e||"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e;}},{key:"destroy",value:function destroy(){this.stopListening();}}]);return oo;}(io);Ke(oo,Ue);var ro=Symbol("rootName");var so=/*#__PURE__*/function(_oo){_inherits(so,_oo);var _super7=_createSuper(so);function so(e,t){var _this22;_classCallCheck(this,so);_this22=_super7.call(this,e,t),_this22.rootName="main";return _this22;}_createClass(so,[{key:"is",value:function is(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return t?t===this.name&&("rootElement"===e||"view:rootElement"===e||"editableElement"===e||"view:editableElement"===e||"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e):"rootElement"===e||"view:rootElement"===e||"editableElement"===e||"view:editableElement"===e||"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e;}},{key:"rootName",get:function get(){return this.getCustomProperty(ro);},set:function set(e){this._setCustomProperty(ro,e);}},{key:"_name",set:function set(e){this.name=e;}}]);return so;}(oo);var ao=/*#__PURE__*/function(_Symbol$iterator3){function ao(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,ao);if(!e.boundaries&&!e.startPosition)throw new c.a("view-tree-walker-no-start-position",null);if(e.direction&&"forward"!=e.direction&&"backward"!=e.direction)throw new c.a("view-tree-walker-unknown-direction",e.startPosition,{direction:e.direction});this.boundaries=e.boundaries||null,e.startPosition?this.position=co._createAt(e.startPosition):this.position=co._createAt(e.boundaries["backward"==e.direction?"end":"start"]),this.direction=e.direction||"forward",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null;}_createClass(ao,[{key:_Symbol$iterator3,value:function value(){return this;}},{key:"skip",value:function skip(e){var t,i,n;do{var _this$next;n=this.position,(_this$next=this.next(),t=_this$next.done,i=_this$next.value,_this$next);}while(!t&&e(i));t||(this.position=n);}},{key:"next",value:function next(){return"forward"==this.direction?this._next():this._previous();}},{key:"_next",value:function _next(){var e=this.position.clone();var t=this.position,i=e.parent;if(null===i.parent&&e.offset===i.childCount)return{done:!0};if(i===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0};var n;if(i instanceof hn){if(e.isAtEnd)return this.position=co._createAfter(i),this._next();n=i.data[e.offset];}else n=i.getChild(e.offset);if(n instanceof eo)return this.shallow?e.offset++:e=new co(n,0),this.position=e,this._formatReturnValue("elementStart",n,t,e,1);if(n instanceof hn){if(this.singleCharacters)return e=new co(n,0),this.position=e,this._next();{var _i32,_o7=n.data.length;return n==this._boundaryEndParent?(_o7=this.boundaries.end.offset,_i32=new un(n,0,_o7),e=co._createAfter(_i32)):(_i32=new un(n,0,n.data.length),e.offset++),this.position=e,this._formatReturnValue("text",_i32,t,e,_o7);}}if("string"==typeof n){var _n10;if(this.singleCharacters)_n10=1;else{_n10=(i===this._boundaryEndParent?this.boundaries.end.offset:i.data.length)-e.offset;}var _o8=new un(i,e.offset,_n10);return e.offset+=_n10,this.position=e,this._formatReturnValue("text",_o8,t,e,_n10);}return e=co._createAfter(i),this.position=e,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",i,t,e);}},{key:"_previous",value:function _previous(){var e=this.position.clone();var t=this.position,i=e.parent;if(null===i.parent&&0===e.offset)return{done:!0};if(i==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0};var n;if(i instanceof hn){if(e.isAtStart)return this.position=co._createBefore(i),this._previous();n=i.data[e.offset-1];}else n=i.getChild(e.offset-1);if(n instanceof eo)return this.shallow?(e.offset--,this.position=e,this._formatReturnValue("elementStart",n,t,e,1)):(e=new co(n,n.childCount),this.position=e,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",n,t,e));if(n instanceof hn){if(this.singleCharacters)return e=new co(n,n.data.length),this.position=e,this._previous();{var _i33,_o9=n.data.length;if(n==this._boundaryStartParent){var _t31=this.boundaries.start.offset;_i33=new un(n,_t31,n.data.length-_t31),_o9=_i33.data.length,e=co._createBefore(_i33);}else _i33=new un(n,0,n.data.length),e.offset--;return this.position=e,this._formatReturnValue("text",_i33,t,e,_o9);}}if("string"==typeof n){var _n11;if(this.singleCharacters)_n11=1;else{var _t32=i===this._boundaryStartParent?this.boundaries.start.offset:0;_n11=e.offset-_t32;}e.offset-=_n11;var _o10=new un(i,e.offset,_n11);return this.position=e,this._formatReturnValue("text",_o10,t,e,_n11);}return e=co._createBefore(i),this.position=e,this._formatReturnValue("elementStart",i,t,e,1);}},{key:"_formatReturnValue",value:function _formatReturnValue(e,t,i,n,o){return t instanceof un&&(t.offsetInText+t.data.length==t.textNode.data.length&&("forward"!=this.direction||this.boundaries&&this.boundaries.end.isEqual(this.position)?i=co._createAfter(t.textNode):(n=co._createAfter(t.textNode),this.position=n)),0===t.offsetInText&&("backward"!=this.direction||this.boundaries&&this.boundaries.start.isEqual(this.position)?i=co._createBefore(t.textNode):(n=co._createBefore(t.textNode),this.position=n))),{done:!1,value:{type:e,item:t,previousPosition:i,nextPosition:n,length:o}};}}]);return ao;}(Symbol.iterator);var co=/*#__PURE__*/function(){function co(e,t){_classCallCheck(this,co);this.parent=e,this.offset=t;}_createClass(co,[{key:"nodeAfter",get:function get(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null;}},{key:"nodeBefore",get:function get(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null;}},{key:"isAtStart",get:function get(){return 0===this.offset;}},{key:"isAtEnd",get:function get(){var e=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===e;}},{key:"root",get:function get(){return this.parent.root;}},{key:"editableElement",get:function get(){var e=this.parent;for(;!(e instanceof oo);){if(!e.parent)return null;e=e.parent;}return e;}},{key:"getShiftedBy",value:function getShiftedBy(e){var t=co._createAt(this),i=t.offset+e;return t.offset=i<0?0:i,t;}},{key:"getLastMatchingPosition",value:function getLastMatchingPosition(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};t.startPosition=this;var i=new ao(t);return i.skip(e),i.position;}},{key:"getAncestors",value:function getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0});}},{key:"getCommonAncestor",value:function getCommonAncestor(e){var t=this.getAncestors(),i=e.getAncestors();var n=0;for(;t[n]==i[n]&&t[n];){n++;}return 0===n?null:t[n-1];}},{key:"is",value:function is(e){return"position"===e||"view:position"===e;}},{key:"isEqual",value:function isEqual(e){return this.parent==e.parent&&this.offset==e.offset;}},{key:"isBefore",value:function isBefore(e){return"before"==this.compareWith(e);}},{key:"isAfter",value:function isAfter(e){return"after"==this.compareWith(e);}},{key:"compareWith",value:function compareWith(e){if(this.root!==e.root)return"different";if(this.isEqual(e))return"same";var t=this.parent.is("node")?this.parent.getPath():[],i=e.parent.is("node")?e.parent.getPath():[];t.push(this.offset),i.push(e.offset);var n=cn(t,i);switch(n){case"prefix":return"before";case"extension":return"after";default:return t[n]<i[n]?"before":"after";}}},{key:"getWalker",value:function getWalker(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return e.startPosition=this,new ao(e);}},{key:"clone",value:function clone(){return new co(this.parent,this.offset);}}],[{key:"_createAt",value:function _createAt(e,t){if(e instanceof co)return new this(e.parent,e.offset);{var _i34=e;if("end"==t)t=_i34.is("$text")?_i34.data.length:_i34.childCount;else{if("before"==t)return this._createBefore(_i34);if("after"==t)return this._createAfter(_i34);if(0!==t&&!t)throw new c.a("view-createpositionat-offset-required",_i34);}return new co(_i34,t);}}},{key:"_createAfter",value:function _createAfter(e){if(e.is("$textProxy"))return new co(e.textNode,e.offsetInText+e.data.length);if(!e.parent)throw new c.a("view-position-after-root",e,{root:e});return new co(e.parent,e.index+1);}},{key:"_createBefore",value:function _createBefore(e){if(e.is("$textProxy"))return new co(e.textNode,e.offsetInText);if(!e.parent)throw new c.a("view-position-before-root",e,{root:e});return new co(e.parent,e.index);}}]);return co;}();var lo=/*#__PURE__*/function(_Symbol$iterator4){function lo(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;_classCallCheck(this,lo);this.start=e.clone(),this.end=t?t.clone():e.clone();}_createClass(lo,[{key:_Symbol$iterator4,value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function value(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function value$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:return _context6.delegateYield(new ao({boundaries:this,ignoreElementEnd:!0}),"t0",1);case 1:case"end":return _context6.stop();}}},value,this);})},{key:"isCollapsed",get:function get(){return this.start.isEqual(this.end);}},{key:"isFlat",get:function get(){return this.start.parent===this.end.parent;}},{key:"root",get:function get(){return this.start.root;}},{key:"getEnlarged",value:function getEnlarged(){var e=this.start.getLastMatchingPosition(ho,{direction:"backward"}),t=this.end.getLastMatchingPosition(ho);return e.parent.is("$text")&&e.isAtStart&&(e=co._createBefore(e.parent)),t.parent.is("$text")&&t.isAtEnd&&(t=co._createAfter(t.parent)),new lo(e,t);}},{key:"getTrimmed",value:function getTrimmed(){var e=this.start.getLastMatchingPosition(ho);if(e.isAfter(this.end)||e.isEqual(this.end))return new lo(e,e);var t=this.end.getLastMatchingPosition(ho,{direction:"backward"});var i=e.nodeAfter,n=t.nodeBefore;return i&&i.is("$text")&&(e=new co(i,0)),n&&n.is("$text")&&(t=new co(n,n.data.length)),new lo(e,t);}},{key:"isEqual",value:function isEqual(e){return this==e||this.start.isEqual(e.start)&&this.end.isEqual(e.end);}},{key:"containsPosition",value:function containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end);}},{key:"containsRange",value:function containsRange(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;e.isCollapsed&&(t=!1);var i=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),n=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return i&&n;}},{key:"getDifference",value:function getDifference(e){var t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new lo(this.start,e.start)),this.containsPosition(e.end)&&t.push(new lo(e.end,this.end))):t.push(this.clone()),t;}},{key:"getIntersection",value:function getIntersection(e){if(this.isIntersecting(e)){var _t33=this.start,_i35=this.end;return this.containsPosition(e.start)&&(_t33=e.start),this.containsPosition(e.end)&&(_i35=e.end),new lo(_t33,_i35);}return null;}},{key:"getWalker",value:function getWalker(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return e.boundaries=this,new ao(e);}},{key:"getCommonAncestor",value:function getCommonAncestor(){return this.start.getCommonAncestor(this.end);}},{key:"getContainedElement",value:function getContainedElement(){if(this.isCollapsed)return null;var e=this.start.nodeAfter,t=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(e=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(t=this.end.parent.previousSibling),e&&e.is("element")&&e===t?e:null;}},{key:"clone",value:function clone(){return new lo(this.start,this.end);}},{key:"getItems",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getItems(){var e,t,_iterator32,_step32,_e27,_args7=arguments;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getItems$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:e=_args7.length>0&&_args7[0]!==undefined?_args7[0]:{};e.boundaries=this,e.ignoreElementEnd=!0;t=new ao(e);_iterator32=_createForOfIteratorHelper(t);_context7.prev=4;_iterator32.s();case 6:if((_step32=_iterator32.n()).done){_context7.next=12;break;}_e27=_step32.value;_context7.next=10;return _e27.item;case 10:_context7.next=6;break;case 12:_context7.next=17;break;case 14:_context7.prev=14;_context7.t0=_context7["catch"](4);_iterator32.e(_context7.t0);case 17:_context7.prev=17;_iterator32.f();return _context7.finish(17);case 20:case"end":return _context7.stop();}}},getItems,this,[[4,14,17,20]]);})},{key:"getPositions",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getPositions(){var e,t,_iterator33,_step33,_e28,_args8=arguments;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getPositions$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:e=_args8.length>0&&_args8[0]!==undefined?_args8[0]:{};e.boundaries=this;t=new ao(e);_context8.next=5;return t.position;case 5:_iterator33=_createForOfIteratorHelper(t);_context8.prev=6;_iterator33.s();case 8:if((_step33=_iterator33.n()).done){_context8.next=14;break;}_e28=_step33.value;_context8.next=12;return _e28.nextPosition;case 12:_context8.next=8;break;case 14:_context8.next=19;break;case 16:_context8.prev=16;_context8.t0=_context8["catch"](6);_iterator33.e(_context8.t0);case 19:_context8.prev=19;_iterator33.f();return _context8.finish(19);case 22:case"end":return _context8.stop();}}},getPositions,this,[[6,16,19,22]]);})},{key:"is",value:function is(e){return"range"===e||"view:range"===e;}},{key:"isIntersecting",value:function isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start);}}],[{key:"_createFromParentsAndOffsets",value:function _createFromParentsAndOffsets(e,t,i,n){return new this(new co(e,t),new co(i,n));}},{key:"_createFromPositionAndShift",value:function _createFromPositionAndShift(e,t){var i=e,n=e.getShiftedBy(t);return t>0?new this(i,n):new this(n,i);}},{key:"_createIn",value:function _createIn(e){return this._createFromParentsAndOffsets(e,0,e,e.childCount);}},{key:"_createOn",value:function _createOn(e){var t=e.is("$textProxy")?e.offsetSize:1;return this._createFromPositionAndShift(co._createBefore(e),t);}}]);return lo;}(Symbol.iterator);function ho(e){return!(!e.item.is("attributeElement")&&!e.item.is("uiElement"));}function uo(e){var t=0;var _iterator34=_createForOfIteratorHelper(e),_step34;try{for(_iterator34.s();!(_step34=_iterator34.n()).done;){var _i36=_step34.value;t++;}}catch(err){_iterator34.e(err);}finally{_iterator34.f();}return t;}var go=/*#__PURE__*/function(){function go(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var t=arguments.length>1?arguments[1]:undefined;var i=arguments.length>2?arguments[2]:undefined;_classCallCheck(this,go);this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",this.setTo(e,t,i);}_createClass(go,[{key:"isFake",get:function get(){return this._isFake;}},{key:"fakeSelectionLabel",get:function get(){return this._fakeSelectionLabel;}},{key:"anchor",get:function get(){if(!this._ranges.length)return null;var e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.end:e.start).clone();}},{key:"focus",get:function get(){if(!this._ranges.length)return null;var e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.start:e.end).clone();}},{key:"isCollapsed",get:function get(){return 1===this.rangeCount&&this._ranges[0].isCollapsed;}},{key:"rangeCount",get:function get(){return this._ranges.length;}},{key:"isBackward",get:function get(){return!this.isCollapsed&&this._lastRangeBackward;}},{key:"editableElement",get:function get(){return this.anchor?this.anchor.editableElement:null;}},{key:"getRanges",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getRanges(){var _iterator35,_step35,_e29;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getRanges$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_iterator35=_createForOfIteratorHelper(this._ranges);_context9.prev=1;_iterator35.s();case 3:if((_step35=_iterator35.n()).done){_context9.next=9;break;}_e29=_step35.value;_context9.next=7;return _e29.clone();case 7:_context9.next=3;break;case 9:_context9.next=14;break;case 11:_context9.prev=11;_context9.t0=_context9["catch"](1);_iterator35.e(_context9.t0);case 14:_context9.prev=14;_iterator35.f();return _context9.finish(14);case 17:case"end":return _context9.stop();}}},getRanges,this,[[1,11,14,17]]);})},{key:"getFirstRange",value:function getFirstRange(){var e=null;var _iterator36=_createForOfIteratorHelper(this._ranges),_step36;try{for(_iterator36.s();!(_step36=_iterator36.n()).done;){var _t34=_step36.value;e&&!_t34.start.isBefore(e.start)||(e=_t34);}}catch(err){_iterator36.e(err);}finally{_iterator36.f();}return e?e.clone():null;}},{key:"getLastRange",value:function getLastRange(){var e=null;var _iterator37=_createForOfIteratorHelper(this._ranges),_step37;try{for(_iterator37.s();!(_step37=_iterator37.n()).done;){var _t35=_step37.value;e&&!_t35.end.isAfter(e.end)||(e=_t35);}}catch(err){_iterator37.e(err);}finally{_iterator37.f();}return e?e.clone():null;}},{key:"getFirstPosition",value:function getFirstPosition(){var e=this.getFirstRange();return e?e.start.clone():null;}},{key:"getLastPosition",value:function getLastPosition(){var e=this.getLastRange();return e?e.end.clone():null;}},{key:"isEqual",value:function isEqual(e){if(this.isFake!=e.isFake)return!1;if(this.isFake&&this.fakeSelectionLabel!=e.fakeSelectionLabel)return!1;if(this.rangeCount!=e.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;var _iterator38=_createForOfIteratorHelper(this._ranges),_step38;try{for(_iterator38.s();!(_step38=_iterator38.n()).done;){var _t36=_step38.value;var _i37=!1;var _iterator39=_createForOfIteratorHelper(e._ranges),_step39;try{for(_iterator39.s();!(_step39=_iterator39.n()).done;){var _n12=_step39.value;if(_t36.isEqual(_n12)){_i37=!0;break;}}}catch(err){_iterator39.e(err);}finally{_iterator39.f();}if(!_i37)return!1;}}catch(err){_iterator38.e(err);}finally{_iterator38.f();}return!0;}},{key:"isSimilar",value:function isSimilar(e){if(this.isBackward!=e.isBackward)return!1;var t=uo(this.getRanges());if(t!=uo(e.getRanges()))return!1;if(0==t)return!0;var _iterator40=_createForOfIteratorHelper(this.getRanges()),_step40;try{for(_iterator40.s();!(_step40=_iterator40.n()).done;){var _t37=_step40.value;_t37=_t37.getTrimmed();var _i38=!1;var _iterator41=_createForOfIteratorHelper(e.getRanges()),_step41;try{for(_iterator41.s();!(_step41=_iterator41.n()).done;){var _n13=_step41.value;if(_n13=_n13.getTrimmed(),_t37.start.isEqual(_n13.start)&&_t37.end.isEqual(_n13.end)){_i38=!0;break;}}}catch(err){_iterator41.e(err);}finally{_iterator41.f();}if(!_i38)return!1;}}catch(err){_iterator40.e(err);}finally{_iterator40.f();}return!0;}},{key:"getSelectedElement",value:function getSelectedElement(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement();}},{key:"setTo",value:function setTo(e,t,i){if(null===e)this._setRanges([]),this._setFakeOptions(t);else if(e instanceof go||e instanceof mo)this._setRanges(e.getRanges(),e.isBackward),this._setFakeOptions({fake:e.isFake,label:e.fakeSelectionLabel});else if(e instanceof lo)this._setRanges([e],t&&t.backward),this._setFakeOptions(t);else if(e instanceof co)this._setRanges([new lo(e)]),this._setFakeOptions(t);else if(e instanceof dn){var _n14=!!i&&!!i.backward;var _o11;if(void 0===t)throw new c.a("view-selection-setto-required-second-parameter",this);_o11="in"==t?lo._createIn(e):"on"==t?lo._createOn(e):new lo(co._createAt(e,t)),this._setRanges([_o11],_n14),this._setFakeOptions(i);}else{if(!Ji(e))throw new c.a("view-selection-setto-not-selectable",this);this._setRanges(e,t&&t.backward),this._setFakeOptions(t);}this.fire("change");}},{key:"setFocus",value:function setFocus(e,t){if(null===this.anchor)throw new c.a("view-selection-setfocus-no-ranges",this);var i=co._createAt(e,t);if("same"==i.compareWith(this.focus))return;var n=this.anchor;this._ranges.pop(),"before"==i.compareWith(n)?this._addRange(new lo(i,n),!0):this._addRange(new lo(n,i)),this.fire("change");}},{key:"is",value:function is(e){return"selection"===e||"view:selection"===e;}},{key:"_setRanges",value:function _setRanges(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;e=Array.from(e),this._ranges=[];var _iterator42=_createForOfIteratorHelper(e),_step42;try{for(_iterator42.s();!(_step42=_iterator42.n()).done;){var _t38=_step42.value;this._addRange(_t38);}}catch(err){_iterator42.e(err);}finally{_iterator42.f();}this._lastRangeBackward=!!t;}},{key:"_setFakeOptions",value:function _setFakeOptions(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};this._isFake=!!e.fake,this._fakeSelectionLabel=e.fake&&e.label||"";}},{key:"_addRange",value:function _addRange(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;if(!(e instanceof lo))throw new c.a("view-selection-add-range-not-range",this);this._pushRange(e),this._lastRangeBackward=!!t;}},{key:"_pushRange",value:function _pushRange(e){var _iterator43=_createForOfIteratorHelper(this._ranges),_step43;try{for(_iterator43.s();!(_step43=_iterator43.n()).done;){var _t39=_step43.value;if(e.isIntersecting(_t39))throw new c.a("view-selection-range-intersects",this,{addedRange:e,intersectingRange:_t39});}}catch(err){_iterator43.e(err);}finally{_iterator43.f();}this._ranges.push(new lo(e.start,e.end));}}]);return go;}();Ke(go,h);var mo=/*#__PURE__*/function(){function mo(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var t=arguments.length>1?arguments[1]:undefined;var i=arguments.length>2?arguments[2]:undefined;_classCallCheck(this,mo);this._selection=new go(),this._selection.delegate("change").to(this),this._selection.setTo(e,t,i);}_createClass(mo,[{key:"isFake",get:function get(){return this._selection.isFake;}},{key:"fakeSelectionLabel",get:function get(){return this._selection.fakeSelectionLabel;}},{key:"anchor",get:function get(){return this._selection.anchor;}},{key:"focus",get:function get(){return this._selection.focus;}},{key:"isCollapsed",get:function get(){return this._selection.isCollapsed;}},{key:"rangeCount",get:function get(){return this._selection.rangeCount;}},{key:"isBackward",get:function get(){return this._selection.isBackward;}},{key:"editableElement",get:function get(){return this._selection.editableElement;}},{key:"_ranges",get:function get(){return this._selection._ranges;}},{key:"getRanges",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getRanges(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getRanges$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:return _context10.delegateYield(this._selection.getRanges(),"t0",1);case 1:case"end":return _context10.stop();}}},getRanges,this);})},{key:"getFirstRange",value:function getFirstRange(){return this._selection.getFirstRange();}},{key:"getLastRange",value:function getLastRange(){return this._selection.getLastRange();}},{key:"getFirstPosition",value:function getFirstPosition(){return this._selection.getFirstPosition();}},{key:"getLastPosition",value:function getLastPosition(){return this._selection.getLastPosition();}},{key:"getSelectedElement",value:function getSelectedElement(){return this._selection.getSelectedElement();}},{key:"isEqual",value:function isEqual(e){return this._selection.isEqual(e);}},{key:"isSimilar",value:function isSimilar(e){return this._selection.isSimilar(e);}},{key:"is",value:function is(e){return"selection"===e||"documentSelection"==e||"view:selection"==e||"view:documentSelection"==e;}},{key:"_setTo",value:function _setTo(e,t,i){this._selection.setTo(e,t,i);}},{key:"_setFocus",value:function _setFocus(e,t){this._selection.setFocus(e,t);}}]);return mo;}();Ke(mo,h);var fo=/*#__PURE__*/function(_o12){_inherits(fo,_o12);var _super8=_createSuper(fo);function fo(e,t,i){var _this23;_classCallCheck(this,fo);_this23=_super8.call(this,e,t),_this23.startRange=i,_this23._eventPhase="none",_this23._currentTarget=null;return _this23;}_createClass(fo,[{key:"eventPhase",get:function get(){return this._eventPhase;}},{key:"currentTarget",get:function get(){return this._currentTarget;}}]);return fo;}(o);var po=Symbol("bubbling contexts");var bo={fire:function fire(e){try{var _i39=e instanceof o?e:new o(this,e),_n15=vo(this);if(!_n15.size)return;for(var _len16=arguments.length,t=new Array(_len16>1?_len16-1:0),_key16=1;_key16<_len16;_key16++){t[_key16-1]=arguments[_key16];}if(wo(_i39,"capturing",this),ko.apply(void 0,[_n15,"$capture",_i39].concat(t)))return _i39["return"];var _r8=_i39.startRange||this.selection.getFirstRange(),_s3=_r8?_r8.getContainedElement():null,_a3=!!_s3&&Boolean(_o(_n15,_s3));var _c2=_s3||function(e){if(!e)return null;var t=e.start.parent,i=e.end.parent,n=t.getPath(),o=i.getPath();return n.length>o.length?t:i;}(_r8);if(wo(_i39,"atTarget",_c2),!_a3){if(ko.apply(void 0,[_n15,"$text",_i39].concat(t)))return _i39["return"];wo(_i39,"bubbling",_c2);}for(;_c2;){if(_c2.is("rootElement")){if(ko.apply(void 0,[_n15,"$root",_i39].concat(t)))return _i39["return"];}else if(_c2.is("element")&&ko.apply(void 0,[_n15,_c2.name,_i39].concat(t)))return _i39["return"];if(ko.apply(void 0,[_n15,_c2,_i39].concat(t)))return _i39["return"];_c2=_c2.parent,wo(_i39,"bubbling",_c2);}return wo(_i39,"bubbling",this),ko.apply(void 0,[_n15,"$document",_i39].concat(t)),_i39["return"];}catch(e){c.a.rethrowUnexpectedError(e,this);}},_addEventListener:function _addEventListener(e,t,i){var n=en(i.context||"$document"),o=vo(this);var _iterator44=_createForOfIteratorHelper(n),_step44;try{for(_iterator44.s();!(_step44=_iterator44.n()).done;){var _r9=_step44.value;var _n16=o.get(_r9);_n16||(_n16=Object.create(h),o.set(_r9,_n16)),this.listenTo(_n16,e,t,i);}}catch(err){_iterator44.e(err);}finally{_iterator44.f();}},_removeEventListener:function _removeEventListener(e,t){var i=vo(this);var _iterator45=_createForOfIteratorHelper(i.values()),_step45;try{for(_iterator45.s();!(_step45=_iterator45.n()).done;){var _n17=_step45.value;this.stopListening(_n17,e,t);}}catch(err){_iterator45.e(err);}finally{_iterator45.f();}}};function wo(e,t,i){e instanceof fo&&(e._eventPhase=t,e._currentTarget=i);}function ko(e,t,i){var o="string"==typeof t?e.get(t):_o(e,t);for(var _len17=arguments.length,n=new Array(_len17>3?_len17-3:0),_key17=3;_key17<_len17;_key17++){n[_key17-3]=arguments[_key17];}return!!o&&(o.fire.apply(o,[i].concat(n)),i.stop.called);}function _o(e,t){var _iterator46=_createForOfIteratorHelper(e),_step46;try{for(_iterator46.s();!(_step46=_iterator46.n()).done;){var _step46$value=_slicedToArray(_step46.value,2),_i40=_step46$value[0],_n18=_step46$value[1];if("function"==typeof _i40&&_i40(t))return _n18;}}catch(err){_iterator46.e(err);}finally{_iterator46.f();}return null;}function vo(e){return e[po]||(e[po]=new Map()),e[po];}var yo=/*#__PURE__*/function(){function yo(e){_classCallCheck(this,yo);this.selection=new mo(),this.roots=new Zi({idProperty:"rootName"}),this.stylesProcessor=e,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isComposing",!1),this._postFixers=new Set();}_createClass(yo,[{key:"getRoot",value:function getRoot(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"main";return this.roots.get(e);}},{key:"registerPostFixer",value:function registerPostFixer(e){this._postFixers.add(e);}},{key:"destroy",value:function destroy(){this.roots.map(function(e){return e.destroy();}),this.stopListening();}},{key:"_callPostFixers",value:function _callPostFixers(e){var t=!1;do{var _iterator47=_createForOfIteratorHelper(this._postFixers),_step47;try{for(_iterator47.s();!(_step47=_iterator47.n()).done;){var _i41=_step47.value;if(t=_i41(e),t)break;}}catch(err){_iterator47.e(err);}finally{_iterator47.f();}}while(t);}}]);return yo;}();Ke(yo,bo),Ke(yo,Ue);var xo=/*#__PURE__*/function(_eo2){_inherits(xo,_eo2);var _super9=_createSuper(xo);function xo(e,t,i,n){var _this24;_classCallCheck(this,xo);_this24=_super9.call(this,e,t,i,n),_this24.getFillerOffset=Ao,_this24._priority=10,_this24._id=null,_this24._clonesGroup=null;return _this24;}_createClass(xo,[{key:"priority",get:function get(){return this._priority;}},{key:"id",get:function get(){return this._id;}},{key:"getElementsWithSameId",value:function getElementsWithSameId(){if(null===this.id)throw new c.a("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup);}},{key:"is",value:function is(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return t?t===this.name&&("attributeElement"===e||"view:attributeElement"===e||"element"===e||"view:element"===e):"attributeElement"===e||"view:attributeElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e;}},{key:"isSimilar",value:function isSimilar(e){return null!==this.id||null!==e.id?this.id===e.id:_get(_getPrototypeOf(xo.prototype),"isSimilar",this).call(this,e)&&this.priority==e.priority;}},{key:"_clone",value:function _clone(e){var t=_get(_getPrototypeOf(xo.prototype),"_clone",this).call(this,e);return t._priority=this._priority,t._id=this._id,t;}}]);return xo;}(eo);function Ao(){if(Co(this))return null;var e=this.parent;for(;e&&e.is("attributeElement");){if(Co(e)>1)return null;e=e.parent;}return!e||Co(e)>1?null:this.childCount;}function Co(e){return Array.from(e.getChildren()).filter(function(e){return!e.is("uiElement");}).length;}xo.DEFAULT_PRIORITY=10;var To=/*#__PURE__*/function(_eo3){_inherits(To,_eo3);var _super10=_createSuper(To);function To(e,t,i,n){var _this25;_classCallCheck(this,To);_this25=_super10.call(this,e,t,i,n),_this25._isAllowedInsideAttributeElement=!0,_this25.getFillerOffset=Eo;return _this25;}_createClass(To,[{key:"is",value:function is(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return t?t===this.name&&("emptyElement"===e||"view:emptyElement"===e||"element"===e||"view:element"===e):"emptyElement"===e||"view:emptyElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e;}},{key:"_insertChild",value:function _insertChild(e,t){if(t&&(t instanceof dn||Array.from(t).length>0))throw new c.a("view-emptyelement-cannot-add",[this,t]);}}]);return To;}(eo);function Eo(){return null;}var Io=navigator.userAgent.toLowerCase();var So={isMac:function(e){return e.indexOf("macintosh")>-1;}(Io),isGecko:function(e){return!!e.match(/gecko\/\d+/);}(Io),isSafari:function(e){return e.indexOf(" applewebkit/")>-1&&-1===e.indexOf("chrome");}(Io),isAndroid:function(e){return e.indexOf("android")>-1;}(Io),isBlink:function(e){return e.indexOf("chrome/")>-1&&e.indexOf("edge/")<0;}(Io),features:{isRegExpUnicodePropertySupported:function(){var e=!1;try{e=0==="".search(new RegExp("[\\p{L}]","u"));}catch(e){}return e;}()}};var Po={ctrl:"",cmd:"",alt:"",shift:""},Mo={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},No=function(){var e={arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,"delete":46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(var _t40=65;_t40<=90;_t40++){var _i42=String.fromCharCode(_t40);e[_i42.toLowerCase()]=_t40;}for(var _t41=48;_t41<=57;_t41++){e[_t41-48]=_t41;}for(var _t42=112;_t42<=123;_t42++){e["f"+(_t42-111)]=_t42;}return e;}(),Ro=Object.fromEntries(Object.entries(No).map(function(_ref9){var _ref10=_slicedToArray(_ref9,2),e=_ref10[0],t=_ref10[1];return[t,e.charAt(0).toUpperCase()+e.slice(1)];}));function Oo(e){var t;if("string"==typeof e){if(t=No[e.toLowerCase()],!t)throw new c.a("keyboard-unknown-key",null,{key:e});}else t=e.keyCode+(e.altKey?No.alt:0)+(e.ctrlKey?No.ctrl:0)+(e.shiftKey?No.shift:0)+(e.metaKey?No.cmd:0);return t;}function zo(e){return"string"==typeof e&&(e=function(e){return e.split("+").map(function(e){return e.trim();});}(e)),e.map(function(e){return"string"==typeof e?function(e){if(e.endsWith("!"))return Oo(e.slice(0,-1));var t=Oo(e);return So.isMac&&t==No.ctrl?No.cmd:t;}(e):e;}).reduce(function(e,t){return t+e;},0);}function Do(e){var t=zo(e);return Object.entries(So.isMac?Po:Mo).reduce(function(e,_ref11){var _ref12=_slicedToArray(_ref11,2),i=_ref12[0],n=_ref12[1];return 0!=(t&No[i])&&(t&=~No[i],e+=n),e;},"")+(t?Ro[t]:"");}function Lo(e,t){var i="ltr"===t;switch(e){case No.arrowleft:return i?"left":"right";case No.arrowright:return i?"right":"left";case No.arrowup:return"up";case No.arrowdown:return"down";}}function Vo(e,t){var i=Lo(e,t);return"down"===i||"right"===i;}var jo=/*#__PURE__*/function(_eo4){_inherits(jo,_eo4);var _super11=_createSuper(jo);function jo(e,t,i,n){var _this26;_classCallCheck(this,jo);_this26=_super11.call(this,e,t,i,n),_this26._isAllowedInsideAttributeElement=!0,_this26.getFillerOffset=Fo;return _this26;}_createClass(jo,[{key:"is",value:function is(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return t?t===this.name&&("uiElement"===e||"view:uiElement"===e||"element"===e||"view:element"===e):"uiElement"===e||"view:uiElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e;}},{key:"_insertChild",value:function _insertChild(e,t){if(t&&(t instanceof dn||Array.from(t).length>0))throw new c.a("view-uielement-cannot-add",this);}},{key:"render",value:function render(e){return this.toDomElement(e);}},{key:"toDomElement",value:function toDomElement(e){var t=e.createElement(this.name);var _iterator48=_createForOfIteratorHelper(this.getAttributeKeys()),_step48;try{for(_iterator48.s();!(_step48=_iterator48.n()).done;){var _e30=_step48.value;t.setAttribute(_e30,this.getAttribute(_e30));}}catch(err){_iterator48.e(err);}finally{_iterator48.f();}return t;}}]);return jo;}(eo);function Bo(e){e.document.on("arrowKey",function(t,i){return function(e,t,i){if(t.keyCode==No.arrowright){var _e31=t.domTarget.ownerDocument.defaultView.getSelection(),_n19=1==_e31.rangeCount&&_e31.getRangeAt(0).collapsed;if(_n19||t.shiftKey){var _t43=_e31.focusNode,_o13=_e31.focusOffset,_r10=i.domPositionToView(_t43,_o13);if(null===_r10)return;var _s4=!1;var _a4=_r10.getLastMatchingPosition(function(e){return e.item.is("uiElement")&&(_s4=!0),!(!e.item.is("uiElement")&&!e.item.is("attributeElement"));});if(_s4){var _t44=i.viewPositionToDom(_a4);_n19?_e31.collapse(_t44.parent,_t44.offset):_e31.extend(_t44.parent,_t44.offset);}}}}(0,i,e.domConverter);},{priority:"low"});}function Fo(){return null;}var Ho=/*#__PURE__*/function(_eo5){_inherits(Ho,_eo5);var _super12=_createSuper(Ho);function Ho(e,t,i,n){var _this27;_classCallCheck(this,Ho);_this27=_super12.call(this,e,t,i,n),_this27._isAllowedInsideAttributeElement=!0,_this27.getFillerOffset=Uo;return _this27;}_createClass(Ho,[{key:"is",value:function is(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return t?t===this.name&&("rawElement"===e||"view:rawElement"===e||"element"===e||"view:element"===e):"rawElement"===e||"view:rawElement"===e||e===this.name||e==="view:"+this.name||"element"===e||"view:element"===e||"node"===e||"view:node"===e;}},{key:"_insertChild",value:function _insertChild(e,t){if(t&&(t instanceof dn||Array.from(t).length>0))throw new c.a("view-rawelement-cannot-add",[this,t]);}}]);return Ho;}(eo);function Uo(){return null;}var Wo=/*#__PURE__*/function(_Symbol$iterator5){function Wo(e,t){_classCallCheck(this,Wo);this.document=e,this._children=[],t&&this._insertChild(0,t);}_createClass(Wo,[{key:_Symbol$iterator5,value:function value(){return this._children[Symbol.iterator]();}},{key:"childCount",get:function get(){return this._children.length;}},{key:"isEmpty",get:function get(){return 0===this.childCount;}},{key:"root",get:function get(){return this;}},{key:"parent",get:function get(){return null;}},{key:"is",value:function is(e){return"documentFragment"===e||"view:documentFragment"===e;}},{key:"_appendChild",value:function _appendChild(e){return this._insertChild(this.childCount,e);}},{key:"getChild",value:function getChild(e){return this._children[e];}},{key:"getChildIndex",value:function getChildIndex(e){return this._children.indexOf(e);}},{key:"getChildren",value:function getChildren(){return this._children[Symbol.iterator]();}},{key:"_insertChild",value:function _insertChild(e,t){this._fireChange("children",this);var i=0;var n=function(e,t){if("string"==typeof t)return[new hn(e,t)];Ji(t)||(t=[t]);return Array.from(t).map(function(t){return"string"==typeof t?new hn(e,t):t instanceof un?new hn(e,t.data):t;});}(this.document,t);var _iterator49=_createForOfIteratorHelper(n),_step49;try{for(_iterator49.s();!(_step49=_iterator49.n()).done;){var _t45=_step49.value;null!==_t45.parent&&_t45._remove(),_t45.parent=this,this._children.splice(e,0,_t45),e++,i++;}}catch(err){_iterator49.e(err);}finally{_iterator49.f();}return i;}},{key:"_removeChildren",value:function _removeChildren(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;this._fireChange("children",this);for(var _i43=e;_i43<e+t;_i43++){this._children[_i43].parent=null;}return this._children.splice(e,t);}},{key:"_fireChange",value:function _fireChange(e,t){this.fire("change:"+e,t);}}]);return Wo;}(Symbol.iterator);Ke(Wo,h);var qo=/*#__PURE__*/function(){function qo(e){_classCallCheck(this,qo);this.document=e,this._cloneGroups=new Map();}_createClass(qo,[{key:"setSelection",value:function setSelection(e,t,i){this.document.selection._setTo(e,t,i);}},{key:"setSelectionFocus",value:function setSelectionFocus(e,t){this.document.selection._setFocus(e,t);}},{key:"createDocumentFragment",value:function createDocumentFragment(e){return new Wo(this.document,e);}},{key:"createText",value:function createText(e){return new hn(this.document,e);}},{key:"createAttributeElement",value:function createAttributeElement(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var n=new xo(this.document,e,t);return"number"==typeof i.priority&&(n._priority=i.priority),i.id&&(n._id=i.id),n;}},{key:"createContainerElement",value:function createContainerElement(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var n=new io(this.document,e,t);return void 0!==i.isAllowedInsideAttributeElement&&(n._isAllowedInsideAttributeElement=i.isAllowedInsideAttributeElement),n;}},{key:"createEditableElement",value:function createEditableElement(e,t){var i=new oo(this.document,e,t);return i._document=this.document,i;}},{key:"createEmptyElement",value:function createEmptyElement(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var n=new To(this.document,e,t);return void 0!==i.isAllowedInsideAttributeElement&&(n._isAllowedInsideAttributeElement=i.isAllowedInsideAttributeElement),n;}},{key:"createUIElement",value:function createUIElement(e,t,i){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var o=new jo(this.document,e,t);return i&&(o.render=i),void 0!==n.isAllowedInsideAttributeElement&&(o._isAllowedInsideAttributeElement=n.isAllowedInsideAttributeElement),o;}},{key:"createRawElement",value:function createRawElement(e,t,i){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var o=new Ho(this.document,e,t);return o.render=i||function(){},void 0!==n.isAllowedInsideAttributeElement&&(o._isAllowedInsideAttributeElement=n.isAllowedInsideAttributeElement),o;}},{key:"setAttribute",value:function setAttribute(e,t,i){i._setAttribute(e,t);}},{key:"removeAttribute",value:function removeAttribute(e,t){t._removeAttribute(e);}},{key:"addClass",value:function addClass(e,t){t._addClass(e);}},{key:"removeClass",value:function removeClass(e,t){t._removeClass(e);}},{key:"setStyle",value:function setStyle(e,t,i){ct(e)&&void 0===i&&(i=t),i._setStyle(e,t);}},{key:"removeStyle",value:function removeStyle(e,t){t._removeStyle(e);}},{key:"setCustomProperty",value:function setCustomProperty(e,t,i){i._setCustomProperty(e,t);}},{key:"removeCustomProperty",value:function removeCustomProperty(e,t){return t._removeCustomProperty(e);}},{key:"breakAttributes",value:function breakAttributes(e){return e instanceof co?this._breakAttributes(e):this._breakAttributesRange(e);}},{key:"breakContainer",value:function breakContainer(e){var t=e.parent;if(!t.is("containerElement"))throw new c.a("view-writer-break-non-container-element",this.document);if(!t.parent)throw new c.a("view-writer-break-root",this.document);if(e.isAtStart)return co._createBefore(t);if(!e.isAtEnd){var _i44=t._clone(!1);this.insert(co._createAfter(t),_i44);var _n20=new lo(e,co._createAt(t,"end")),_o14=new co(_i44,0);this.move(_n20,_o14);}return co._createAfter(t);}},{key:"mergeAttributes",value:function mergeAttributes(e){var t=e.offset,i=e.parent;if(i.is("$text"))return e;if(i.is("attributeElement")&&0===i.childCount){var _e32=i.parent,_t46=i.index;return i._remove(),this._removeFromClonedElementsGroup(i),this.mergeAttributes(new co(_e32,_t46));}var n=i.getChild(t-1),o=i.getChild(t);if(!n||!o)return e;if(n.is("$text")&&o.is("$text"))return Qo(n,o);if(n.is("attributeElement")&&o.is("attributeElement")&&n.isSimilar(o)){var _e33=n.childCount;return n._appendChild(o.getChildren()),o._remove(),this._removeFromClonedElementsGroup(o),this.mergeAttributes(new co(n,_e33));}return e;}},{key:"mergeContainers",value:function mergeContainers(e){var t=e.nodeBefore,i=e.nodeAfter;if(!(t&&i&&t.is("containerElement")&&i.is("containerElement")))throw new c.a("view-writer-merge-containers-invalid-position",this.document);var n=t.getChild(t.childCount-1),o=n instanceof hn?co._createAt(n,"end"):co._createAt(t,"end");return this.move(lo._createIn(i),co._createAt(t,"end")),this.remove(lo._createOn(i)),o;}},{key:"insert",value:function insert(e,t){(function e(t,i){var _iterator50=_createForOfIteratorHelper(t),_step50;try{var _loop=function _loop(){var n=_step50.value;if(!Jo.some(function(e){return n instanceof e;}))throw new c.a("view-writer-insert-invalid-node-type",i);n.is("$text")||e(n.getChildren(),i);};for(_iterator50.s();!(_step50=_iterator50.n()).done;){_loop();}}catch(err){_iterator50.e(err);}finally{_iterator50.f();}})(t=Ji(t)?_toConsumableArray(t):[t],this.document);var i=t.reduce(function(e,t){var i=e[e.length-1],n=!(t.is("uiElement")&&t.isAllowedInsideAttributeElement);return i&&i.breakAttributes==n?i.nodes.push(t):e.push({breakAttributes:n,nodes:[t]}),e;},[]);var n=null,o=e;var _iterator51=_createForOfIteratorHelper(i),_step51;try{for(_iterator51.s();!(_step51=_iterator51.n()).done;){var _step51$value=_step51.value,_e34=_step51$value.nodes,_t47=_step51$value.breakAttributes;var _i45=this._insertNodes(o,_e34,_t47);n||(n=_i45.start),o=_i45.end;}}catch(err){_iterator51.e(err);}finally{_iterator51.f();}return n?new lo(n,o):new lo(e);}},{key:"remove",value:function remove(e){var t=e instanceof lo?e:lo._createOn(e);if(Xo(t,this.document),t.isCollapsed)return new Wo(this.document);var _this$_breakAttribute=this._breakAttributesRange(t,!0),i=_this$_breakAttribute.start,n=_this$_breakAttribute.end,o=i.parent,r=n.offset-i.offset,s=o._removeChildren(i.offset,r);var _iterator52=_createForOfIteratorHelper(s),_step52;try{for(_iterator52.s();!(_step52=_iterator52.n()).done;){var _e35=_step52.value;this._removeFromClonedElementsGroup(_e35);}}catch(err){_iterator52.e(err);}finally{_iterator52.f();}var a=this.mergeAttributes(i);return t.start=a,t.end=a.clone(),new Wo(this.document,s);}},{key:"clear",value:function clear(e,t){Xo(e,this.document);var i=e.getWalker({direction:"backward",ignoreElementEnd:!0});var _iterator53=_createForOfIteratorHelper(i),_step53;try{for(_iterator53.s();!(_step53=_iterator53.n()).done;){var _n21=_step53.value;var _i46=_n21.item;var _o15=void 0;if(_i46.is("element")&&t.isSimilar(_i46))_o15=lo._createOn(_i46);else if(!_n21.nextPosition.isAfter(e.start)&&_i46.is("$textProxy")){var _e36=_i46.getAncestors().find(function(e){return e.is("element")&&t.isSimilar(e);});_e36&&(_o15=lo._createIn(_e36));}_o15&&(_o15.end.isAfter(e.end)&&(_o15.end=e.end),_o15.start.isBefore(e.start)&&(_o15.start=e.start),this.remove(_o15));}}catch(err){_iterator53.e(err);}finally{_iterator53.f();}}},{key:"move",value:function move(e,t){var i;if(t.isAfter(e.end)){var _n22=(t=this._breakAttributes(t,!0)).parent,_o16=_n22.childCount;e=this._breakAttributesRange(e,!0),i=this.remove(e),t.offset+=_n22.childCount-_o16;}else i=this.remove(e);return this.insert(t,i);}},{key:"wrap",value:function wrap(e,t){if(!(t instanceof xo))throw new c.a("view-writer-wrap-invalid-attribute",this.document);if(Xo(e,this.document),e.isCollapsed){var _n23=e.start;_n23.parent.is("element")&&(i=_n23.parent,!Array.from(i.getChildren()).some(function(e){return!e.is("uiElement");}))&&(_n23=_n23.getLastMatchingPosition(function(e){return e.item.is("uiElement");})),_n23=this._wrapPosition(_n23,t);var _o17=this.document.selection;return _o17.isCollapsed&&_o17.getFirstPosition().isEqual(e.start)&&this.setSelection(_n23),new lo(_n23);}return this._wrapRange(e,t);var i;}},{key:"unwrap",value:function unwrap(e,t){if(!(t instanceof xo))throw new c.a("view-writer-unwrap-invalid-attribute",this.document);if(Xo(e,this.document),e.isCollapsed)return e;var _this$_breakAttribute2=this._breakAttributesRange(e,!0),i=_this$_breakAttribute2.start,n=_this$_breakAttribute2.end,o=i.parent,r=this._unwrapChildren(o,i.offset,n.offset,t),s=this.mergeAttributes(r.start);s.isEqual(r.start)||r.end.offset--;var a=this.mergeAttributes(r.end);return new lo(s,a);}},{key:"rename",value:function rename(e,t){var i=new io(this.document,e,t.getAttributes());return this.insert(co._createAfter(t),i),this.move(lo._createIn(t),co._createAt(i,0)),this.remove(lo._createOn(t)),i;}},{key:"clearClonedElementsGroup",value:function clearClonedElementsGroup(e){this._cloneGroups["delete"](e);}},{key:"createPositionAt",value:function createPositionAt(e,t){return co._createAt(e,t);}},{key:"createPositionAfter",value:function createPositionAfter(e){return co._createAfter(e);}},{key:"createPositionBefore",value:function createPositionBefore(e){return co._createBefore(e);}},{key:"createRange",value:function createRange(e,t){return new lo(e,t);}},{key:"createRangeOn",value:function createRangeOn(e){return lo._createOn(e);}},{key:"createRangeIn",value:function createRangeIn(e){return lo._createIn(e);}},{key:"createSelection",value:function createSelection(e,t,i){return new go(e,t,i);}},{key:"_insertNodes",value:function _insertNodes(e,t,i){var n,o;if(n=i?$o(e):e.parent.is("$text")?e.parent.parent:e.parent,!n)throw new c.a("view-writer-invalid-position-container",this.document);o=i?this._breakAttributes(e,!0):e.parent.is("$text")?Ko(e):e;var r=n._insertChild(o.offset,t);var _iterator54=_createForOfIteratorHelper(t),_step54;try{for(_iterator54.s();!(_step54=_iterator54.n()).done;){var _e37=_step54.value;this._addToClonedElementsGroup(_e37);}}catch(err){_iterator54.e(err);}finally{_iterator54.f();}var s=o.getShiftedBy(r),a=this.mergeAttributes(o);a.isEqual(o)||s.offset--;var l=this.mergeAttributes(s);return new lo(a,l);}},{key:"_wrapChildren",value:function _wrapChildren(e,t,i,n){var o=t;var r=[];for(;o<i;){var _t48=e.getChild(o),_i47=_t48.is("$text"),_s5=_t48.is("attributeElement"),_a5=_t48.isAllowedInsideAttributeElement;if(_s5&&this._wrapAttributeElement(n,_t48))r.push(new co(e,o));else if(_i47||_a5||_s5&&Yo(n,_t48)){var _i48=n._clone();_t48._remove(),_i48._appendChild(_t48),e._insertChild(o,_i48),this._addToClonedElementsGroup(_i48),r.push(new co(e,o));}else _s5&&this._wrapChildren(_t48,0,_t48.childCount,n);o++;}var s=0;for(var _i49=0,_r11=r;_i49<_r11.length;_i49++){var _e38=_r11[_i49];if(_e38.offset-=s,_e38.offset==t)continue;this.mergeAttributes(_e38).isEqual(_e38)||(s++,i--);}return lo._createFromParentsAndOffsets(e,t,e,i);}},{key:"_unwrapChildren",value:function _unwrapChildren(e,t,i,n){var o=t;var r=[];for(;o<i;){var _t49=e.getChild(o);if(_t49.is("attributeElement")){if(_t49.isSimilar(n)){var _n24=_t49.getChildren(),_s6=_t49.childCount;_t49._remove(),e._insertChild(o,_n24),this._removeFromClonedElementsGroup(_t49),r.push(new co(e,o),new co(e,o+_s6)),o+=_s6,i+=_s6-1;}else this._unwrapAttributeElement(n,_t49)?(r.push(new co(e,o),new co(e,o+1)),o++):(this._unwrapChildren(_t49,0,_t49.childCount,n),o++);}else o++;}var s=0;for(var _i50=0,_r12=r;_i50<_r12.length;_i50++){var _e39=_r12[_i50];if(_e39.offset-=s,_e39.offset==t||_e39.offset==i)continue;this.mergeAttributes(_e39).isEqual(_e39)||(s++,i--);}return lo._createFromParentsAndOffsets(e,t,e,i);}},{key:"_wrapRange",value:function _wrapRange(e,t){var _this$_breakAttribute3=this._breakAttributesRange(e,!0),i=_this$_breakAttribute3.start,n=_this$_breakAttribute3.end,o=i.parent,r=this._wrapChildren(o,i.offset,n.offset,t),s=this.mergeAttributes(r.start);s.isEqual(r.start)||r.end.offset--;var a=this.mergeAttributes(r.end);return new lo(s,a);}},{key:"_wrapPosition",value:function _wrapPosition(e,t){if(t.isSimilar(e.parent))return Go(e.clone());e.parent.is("$text")&&(e=Ko(e));var i=this.createAttributeElement();i._priority=Number.POSITIVE_INFINITY,i.isSimilar=function(){return!1;},e.parent._insertChild(e.offset,i);var n=new lo(e,e.getShiftedBy(1));this.wrap(n,t);var o=new co(i.parent,i.index);i._remove();var r=o.nodeBefore,s=o.nodeAfter;return r instanceof hn&&s instanceof hn?Qo(r,s):Go(o);}},{key:"_wrapAttributeElement",value:function _wrapAttributeElement(e,t){if(!er(e,t))return!1;if(e.name!==t.name||e.priority!==t.priority)return!1;var _iterator55=_createForOfIteratorHelper(e.getAttributeKeys()),_step55;try{for(_iterator55.s();!(_step55=_iterator55.n()).done;){var _i51=_step55.value;if("class"!==_i51&&"style"!==_i51&&t.hasAttribute(_i51)&&t.getAttribute(_i51)!==e.getAttribute(_i51))return!1;}}catch(err){_iterator55.e(err);}finally{_iterator55.f();}var _iterator56=_createForOfIteratorHelper(e.getStyleNames()),_step56;try{for(_iterator56.s();!(_step56=_iterator56.n()).done;){var _i52=_step56.value;if(t.hasStyle(_i52)&&t.getStyle(_i52)!==e.getStyle(_i52))return!1;}}catch(err){_iterator56.e(err);}finally{_iterator56.f();}var _iterator57=_createForOfIteratorHelper(e.getAttributeKeys()),_step57;try{for(_iterator57.s();!(_step57=_iterator57.n()).done;){var _i53=_step57.value;"class"!==_i53&&"style"!==_i53&&(t.hasAttribute(_i53)||this.setAttribute(_i53,e.getAttribute(_i53),t));}}catch(err){_iterator57.e(err);}finally{_iterator57.f();}var _iterator58=_createForOfIteratorHelper(e.getStyleNames()),_step58;try{for(_iterator58.s();!(_step58=_iterator58.n()).done;){var _i54=_step58.value;t.hasStyle(_i54)||this.setStyle(_i54,e.getStyle(_i54),t);}}catch(err){_iterator58.e(err);}finally{_iterator58.f();}var _iterator59=_createForOfIteratorHelper(e.getClassNames()),_step59;try{for(_iterator59.s();!(_step59=_iterator59.n()).done;){var _i55=_step59.value;t.hasClass(_i55)||this.addClass(_i55,t);}}catch(err){_iterator59.e(err);}finally{_iterator59.f();}return!0;}},{key:"_unwrapAttributeElement",value:function _unwrapAttributeElement(e,t){if(!er(e,t))return!1;if(e.name!==t.name||e.priority!==t.priority)return!1;var _iterator60=_createForOfIteratorHelper(e.getAttributeKeys()),_step60;try{for(_iterator60.s();!(_step60=_iterator60.n()).done;){var _i56=_step60.value;if("class"!==_i56&&"style"!==_i56&&(!t.hasAttribute(_i56)||t.getAttribute(_i56)!==e.getAttribute(_i56)))return!1;}}catch(err){_iterator60.e(err);}finally{_iterator60.f();}if(!t.hasClass.apply(t,_toConsumableArray(e.getClassNames())))return!1;var _iterator61=_createForOfIteratorHelper(e.getStyleNames()),_step61;try{for(_iterator61.s();!(_step61=_iterator61.n()).done;){var _i57=_step61.value;if(!t.hasStyle(_i57)||t.getStyle(_i57)!==e.getStyle(_i57))return!1;}}catch(err){_iterator61.e(err);}finally{_iterator61.f();}var _iterator62=_createForOfIteratorHelper(e.getAttributeKeys()),_step62;try{for(_iterator62.s();!(_step62=_iterator62.n()).done;){var _i58=_step62.value;"class"!==_i58&&"style"!==_i58&&this.removeAttribute(_i58,t);}}catch(err){_iterator62.e(err);}finally{_iterator62.f();}return this.removeClass(Array.from(e.getClassNames()),t),this.removeStyle(Array.from(e.getStyleNames()),t),!0;}},{key:"_breakAttributesRange",value:function _breakAttributesRange(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;var i=e.start,n=e.end;if(Xo(e,this.document),e.isCollapsed){var _i59=this._breakAttributes(e.start,t);return new lo(_i59,_i59);}var o=this._breakAttributes(n,t),r=o.parent.childCount,s=this._breakAttributes(i,t);return o.offset+=o.parent.childCount-r,new lo(s,o);}},{key:"_breakAttributes",value:function _breakAttributes(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;var i=e.offset,n=e.parent;if(e.parent.is("emptyElement"))throw new c.a("view-writer-cannot-break-empty-element",this.document);if(e.parent.is("uiElement"))throw new c.a("view-writer-cannot-break-ui-element",this.document);if(e.parent.is("rawElement"))throw new c.a("view-writer-cannot-break-raw-element",this.document);if(!t&&n.is("$text")&&Zo(n.parent))return e.clone();if(Zo(n))return e.clone();if(n.is("$text"))return this._breakAttributes(Ko(e),t);if(i==n.childCount){var _e40=new co(n.parent,n.index+1);return this._breakAttributes(_e40,t);}if(0===i){var _e41=new co(n.parent,n.index);return this._breakAttributes(_e41,t);}{var _e42=n.index+1,_o18=n._clone();n.parent._insertChild(_e42,_o18),this._addToClonedElementsGroup(_o18);var _r13=n.childCount-i,_s7=n._removeChildren(i,_r13);_o18._appendChild(_s7);var _a6=new co(n.parent,_e42);return this._breakAttributes(_a6,t);}}},{key:"_addToClonedElementsGroup",value:function _addToClonedElementsGroup(e){if(!e.root.is("rootElement"))return;if(e.is("element")){var _iterator63=_createForOfIteratorHelper(e.getChildren()),_step63;try{for(_iterator63.s();!(_step63=_iterator63.n()).done;){var _t50=_step63.value;this._addToClonedElementsGroup(_t50);}}catch(err){_iterator63.e(err);}finally{_iterator63.f();}}var t=e.id;if(!t)return;var i=this._cloneGroups.get(t);i||(i=new Set(),this._cloneGroups.set(t,i)),i.add(e),e._clonesGroup=i;}},{key:"_removeFromClonedElementsGroup",value:function _removeFromClonedElementsGroup(e){if(e.is("element")){var _iterator64=_createForOfIteratorHelper(e.getChildren()),_step64;try{for(_iterator64.s();!(_step64=_iterator64.n()).done;){var _t51=_step64.value;this._removeFromClonedElementsGroup(_t51);}}catch(err){_iterator64.e(err);}finally{_iterator64.f();}}var t=e.id;if(!t)return;var i=this._cloneGroups.get(t);i&&i["delete"](e);}}]);return qo;}();function $o(e){var t=e.parent;for(;!Zo(t);){if(!t)return;t=t.parent;}return t;}function Yo(e,t){return e.priority<t.priority||!(e.priority>t.priority)&&e.getIdentity()<t.getIdentity();}function Go(e){var t=e.nodeBefore;if(t&&t.is("$text"))return new co(t,t.data.length);var i=e.nodeAfter;return i&&i.is("$text")?new co(i,0):e;}function Ko(e){if(e.offset==e.parent.data.length)return new co(e.parent.parent,e.parent.index+1);if(0===e.offset)return new co(e.parent.parent,e.parent.index);var t=e.parent.data.slice(e.offset);return e.parent._data=e.parent.data.slice(0,e.offset),e.parent.parent._insertChild(e.parent.index+1,new hn(e.root.document,t)),new co(e.parent.parent,e.parent.index+1);}function Qo(e,t){var i=e.data.length;return e._data+=t.data,t._remove(),new co(e,i);}var Jo=[hn,xo,io,To,Ho,jo];function Zo(e){return e&&(e.is("containerElement")||e.is("documentFragment"));}function Xo(e,t){var i=$o(e.start),n=$o(e.end);if(!i||!n||i!==n)throw new c.a("view-writer-invalid-range-container",t);}function er(e,t){return null===e.id&&null===t.id;}function tr(e){return"[object Text]"==Object.prototype.toString.call(e);}var ir=function ir(e){return e.createTextNode("");},nr=function nr(e){var t=e.createElement("span");return t.dataset.ckeFiller=!0,t.innerHTML="",t;},or=function or(e){var t=e.createElement("br");return t.dataset.ckeFiller=!0,t;},rr="".repeat(7);function sr(e){return tr(e)&&e.data.substr(0,7)===rr;}function ar(e){return 7==e.data.length&&sr(e);}function cr(e){return sr(e)?e.data.slice(7):e.data;}function lr(e,t){if(t.keyCode==No.arrowleft){var _e43=t.domTarget.ownerDocument.defaultView.getSelection();if(1==_e43.rangeCount&&_e43.getRangeAt(0).collapsed){var _t52=_e43.getRangeAt(0).startContainer,_i60=_e43.getRangeAt(0).startOffset;sr(_t52)&&_i60<=7&&_e43.collapse(_t52,0);}}}function dr(e,t,i){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:!1;i=i||function(e,t){return e===t;},Array.isArray(e)||(e=Array.prototype.slice.call(e)),Array.isArray(t)||(t=Array.prototype.slice.call(t));var o=function(e,t,i){var n=hr(e,t,i);if(-1===n)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};var o=ur(e,n),r=ur(t,n),s=hr(o,r,i),a=e.length-s,c=t.length-s;return{firstIndex:n,lastIndexOld:a,lastIndexNew:c};}(e,t,i);return n?function(e,t){var i=e.firstIndex,n=e.lastIndexOld,o=e.lastIndexNew;if(-1===i)return Array(t).fill("equal");var r=[];i>0&&(r=r.concat(Array(i).fill("equal")));o-i>0&&(r=r.concat(Array(o-i).fill("insert")));n-i>0&&(r=r.concat(Array(n-i).fill("delete")));o<t&&(r=r.concat(Array(t-o).fill("equal")));return r;}(o,t.length):function(e,t){var i=[],n=t.firstIndex,o=t.lastIndexOld,r=t.lastIndexNew;r-n>0&&i.push({index:n,type:"insert",values:e.slice(n,r)});o-n>0&&i.push({index:n+(r-n),type:"delete",howMany:o-n});return i;}(t,o);}function hr(e,t,i){for(var _n25=0;_n25<Math.max(e.length,t.length);_n25++){if(void 0===e[_n25]||void 0===t[_n25]||!i(e[_n25],t[_n25]))return _n25;}return-1;}function ur(e,t){return e.slice(t).reverse();}function gr(e,t,i){i=i||function(e,t){return e===t;};var n=e.length,o=t.length;if(n>200||o>200||n+o>300)return gr.fastDiff(e,t,i,!0);var r,s;if(o<n){var _i61=e;e=t,t=_i61,r="delete",s="insert";}else r="insert",s="delete";var a=e.length,c=t.length,l=c-a,d={},h={};function u(n){var o=(void 0!==h[n-1]?h[n-1]:-1)+1,l=void 0!==h[n+1]?h[n+1]:-1,u=o>l?-1:1;d[n+u]&&(d[n]=d[n+u].slice(0)),d[n]||(d[n]=[]),d[n].push(o>l?r:s);var g=Math.max(o,l),m=g-n;for(;m<a&&g<c&&i(e[m],t[g]);){m++,g++,d[n].push("equal");}return g;}var g,m=0;do{for(g=-m;g<l;g++){h[g]=u(g);}for(g=l+m;g>l;g--){h[g]=u(g);}h[l]=u(l),m++;}while(h[l]!==c);return d[l].slice(1);}function mr(e,t,i){e.insertBefore(i,e.childNodes[t]||null);}function fr(e){var t=e.parentNode;t&&t.removeChild(e);}function pr(e){if(e){if(e.defaultView)return e instanceof e.defaultView.Document;if(e.ownerDocument&&e.ownerDocument.defaultView)return e instanceof e.ownerDocument.defaultView.Node;}return!1;}gr.fastDiff=dr;var br=/*#__PURE__*/function(){function br(e,t){_classCallCheck(this,br);this.domDocuments=new Set(),this.domConverter=e,this.markedAttributes=new Set(),this.markedChildren=new Set(),this.markedTexts=new Set(),this.selection=t,this.isFocused=!1,this._inlineFiller=null,this._fakeSelectionContainer=null;}_createClass(br,[{key:"markToSync",value:function markToSync(e,t){if("text"===e)this.domConverter.mapViewToDom(t.parent)&&this.markedTexts.add(t);else{if(!this.domConverter.mapViewToDom(t))return;if("attributes"===e)this.markedAttributes.add(t);else{if("children"!==e)throw new c.a("view-renderer-unknown-type",this);this.markedChildren.add(t);}}}},{key:"render",value:function render(){var e;var _iterator65=_createForOfIteratorHelper(this.markedChildren),_step65;try{for(_iterator65.s();!(_step65=_iterator65.n()).done;){var _e44=_step65.value;this._updateChildrenMappings(_e44);}}catch(err){_iterator65.e(err);}finally{_iterator65.f();}this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?e=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(e=this.selection.getFirstPosition(),this.markedChildren.add(e.parent));var _iterator66=_createForOfIteratorHelper(this.markedAttributes),_step66;try{for(_iterator66.s();!(_step66=_iterator66.n()).done;){var _e45=_step66.value;this._updateAttrs(_e45);}}catch(err){_iterator66.e(err);}finally{_iterator66.f();}var _iterator67=_createForOfIteratorHelper(this.markedChildren),_step67;try{for(_iterator67.s();!(_step67=_iterator67.n()).done;){var _t54=_step67.value;this._updateChildren(_t54,{inlineFillerPosition:e});}}catch(err){_iterator67.e(err);}finally{_iterator67.f();}var _iterator68=_createForOfIteratorHelper(this.markedTexts),_step68;try{for(_iterator68.s();!(_step68=_iterator68.n()).done;){var _t55=_step68.value;!this.markedChildren.has(_t55.parent)&&this.domConverter.mapViewToDom(_t55.parent)&&this._updateText(_t55,{inlineFillerPosition:e});}}catch(err){_iterator68.e(err);}finally{_iterator68.f();}if(e){var _t53=this.domConverter.viewPositionToDom(e),_i62=_t53.parent.ownerDocument;sr(_t53.parent)?this._inlineFiller=_t53.parent:this._inlineFiller=wr(_i62,_t53.parent,_t53.offset);}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear();}},{key:"_updateChildrenMappings",value:function _updateChildrenMappings(e){var t=this.domConverter.mapViewToDom(e);if(!t)return;var i=Array.from(this.domConverter.mapViewToDom(e).childNodes),n=Array.from(this.domConverter.viewChildrenToDom(e,t.ownerDocument,{withChildren:!1})),o=this._diffNodeLists(i,n),r=this._findReplaceActions(o,i,n);if(-1!==r.indexOf("replace")){var _t56={equal:0,insert:0,"delete":0};var _iterator69=_createForOfIteratorHelper(r),_step69;try{for(_iterator69.s();!(_step69=_iterator69.n()).done;){var _o19=_step69.value;if("replace"===_o19){var _o20=_t56.equal+_t56.insert,_r14=_t56.equal+_t56["delete"],_s8=e.getChild(_o20);!_s8||_s8.is("uiElement")||_s8.is("rawElement")||this._updateElementMappings(_s8,i[_r14]),fr(n[_o20]),_t56.equal++;}else _t56[_o19]++;}}catch(err){_iterator69.e(err);}finally{_iterator69.f();}}}},{key:"_updateElementMappings",value:function _updateElementMappings(e,t){this.domConverter.unbindDomElement(t),this.domConverter.bindElements(t,e),this.markedChildren.add(e),this.markedAttributes.add(e);}},{key:"_getInlineFillerPosition",value:function _getInlineFillerPosition(){var e=this.selection.getFirstPosition();return e.parent.is("$text")?co._createBefore(this.selection.getFirstPosition().parent):e;}},{key:"_isSelectionInInlineFiller",value:function _isSelectionInInlineFiller(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;var e=this.selection.getFirstPosition(),t=this.domConverter.viewPositionToDom(e);return!!(t&&tr(t.parent)&&sr(t.parent));}},{key:"_removeInlineFiller",value:function _removeInlineFiller(){var e=this._inlineFiller;if(!sr(e))throw new c.a("view-renderer-filler-was-lost",this);ar(e)?e.parentNode.removeChild(e):e.data=e.data.substr(7),this._inlineFiller=null;}},{key:"_needsInlineFillerAtSelection",value:function _needsInlineFillerAtSelection(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;var e=this.selection.getFirstPosition(),t=e.parent,i=e.offset;if(!this.domConverter.mapViewToDom(t.root))return!1;if(!t.is("element"))return!1;if(!function(e){if("false"==e.getAttribute("contenteditable"))return!1;var t=e.findAncestor(function(e){return e.hasAttribute("contenteditable");});return!t||"true"==t.getAttribute("contenteditable");}(t))return!1;if(i===t.getFillerOffset())return!1;var n=e.nodeBefore,o=e.nodeAfter;return!(n instanceof hn||o instanceof hn);}},{key:"_updateText",value:function _updateText(e,t){var i=this.domConverter.findCorrespondingDomText(e),n=this.domConverter.viewToDom(e,i.ownerDocument),o=i.data;var r=n.data;var s=t.inlineFillerPosition;if(s&&s.parent==e.parent&&s.offset==e.index&&(r=rr+r),o!=r){var _e46=dr(o,r);var _iterator70=_createForOfIteratorHelper(_e46),_step70;try{for(_iterator70.s();!(_step70=_iterator70.n()).done;){var _t57=_step70.value;"insert"===_t57.type?i.insertData(_t57.index,_t57.values.join("")):i.deleteData(_t57.index,_t57.howMany);}}catch(err){_iterator70.e(err);}finally{_iterator70.f();}}}},{key:"_updateAttrs",value:function _updateAttrs(e){var t=this.domConverter.mapViewToDom(e);if(!t)return;var i=Array.from(t.attributes).map(function(e){return e.name;}),n=e.getAttributeKeys();var _iterator71=_createForOfIteratorHelper(n),_step71;try{for(_iterator71.s();!(_step71=_iterator71.n()).done;){var _i63=_step71.value;t.setAttribute(_i63,e.getAttribute(_i63));}}catch(err){_iterator71.e(err);}finally{_iterator71.f();}var _iterator72=_createForOfIteratorHelper(i),_step72;try{for(_iterator72.s();!(_step72=_iterator72.n()).done;){var _n26=_step72.value;e.hasAttribute(_n26)||t.removeAttribute(_n26);}}catch(err){_iterator72.e(err);}finally{_iterator72.f();}}},{key:"_updateChildren",value:function _updateChildren(e,t){var i=this.domConverter.mapViewToDom(e);if(!i)return;var n=t.inlineFillerPosition,o=this.domConverter.mapViewToDom(e).childNodes,r=Array.from(this.domConverter.viewChildrenToDom(e,i.ownerDocument,{bind:!0,inlineFillerPosition:n}));n&&n.parent===e&&wr(i.ownerDocument,r,n.offset);var s=this._diffNodeLists(o,r);var a=0;var c=new Set();var _iterator73=_createForOfIteratorHelper(s),_step73;try{for(_iterator73.s();!(_step73=_iterator73.n()).done;){var _e47=_step73.value;"delete"===_e47?(c.add(o[a]),fr(o[a])):"equal"===_e47&&a++;}}catch(err){_iterator73.e(err);}finally{_iterator73.f();}a=0;var _iterator74=_createForOfIteratorHelper(s),_step74;try{for(_iterator74.s();!(_step74=_iterator74.n()).done;){var _e48=_step74.value;"insert"===_e48?(mr(i,a,r[a]),a++):"equal"===_e48&&(this._markDescendantTextToSync(this.domConverter.domToView(r[a])),a++);}}catch(err){_iterator74.e(err);}finally{_iterator74.f();}var _iterator75=_createForOfIteratorHelper(c),_step75;try{for(_iterator75.s();!(_step75=_iterator75.n()).done;){var _e49=_step75.value;_e49.parentNode||this.domConverter.unbindDomElement(_e49);}}catch(err){_iterator75.e(err);}finally{_iterator75.f();}}},{key:"_diffNodeLists",value:function _diffNodeLists(e,t){return gr(e=function(e,t){var i=Array.from(e);if(0==i.length||!t)return i;i[i.length-1]==t&&i.pop();return i;}(e,this._fakeSelectionContainer),t,_r.bind(null,this.domConverter));}},{key:"_findReplaceActions",value:function _findReplaceActions(e,t,i){if(-1===e.indexOf("insert")||-1===e.indexOf("delete"))return e;var n=[],o=[],r=[];var s={equal:0,insert:0,"delete":0};var _iterator76=_createForOfIteratorHelper(e),_step76;try{for(_iterator76.s();!(_step76=_iterator76.n()).done;){var _a7=_step76.value;"insert"===_a7?r.push(i[s.equal+s.insert]):"delete"===_a7?o.push(t[s.equal+s["delete"]]):(n=n.concat(gr(o,r,kr).map(function(e){return"equal"===e?"replace":e;})),n.push("equal"),o=[],r=[]),s[_a7]++;}}catch(err){_iterator76.e(err);}finally{_iterator76.f();}return n.concat(gr(o,r,kr).map(function(e){return"equal"===e?"replace":e;}));}},{key:"_markDescendantTextToSync",value:function _markDescendantTextToSync(e){if(e)if(e.is("$text"))this.markedTexts.add(e);else if(e.is("element")){var _iterator77=_createForOfIteratorHelper(e.getChildren()),_step77;try{for(_iterator77.s();!(_step77=_iterator77.n()).done;){var _t58=_step77.value;this._markDescendantTextToSync(_t58);}}catch(err){_iterator77.e(err);}finally{_iterator77.f();}}}},{key:"_updateSelection",value:function _updateSelection(){if(0===this.selection.rangeCount)return this._removeDomSelection(),void this._removeFakeSelection();var e=this.domConverter.mapViewToDom(this.selection.editableElement);this.isFocused&&e&&(this.selection.isFake?this._updateFakeSelection(e):(this._removeFakeSelection(),this._updateDomSelection(e)));}},{key:"_updateFakeSelection",value:function _updateFakeSelection(e){var t=e.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=function(e){var t=e.createElement("div");return t.className="ck-fake-selection-container",Object.assign(t.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),t.textContent="",t;}(t));var i=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(i,this.selection),!this._fakeSelectionNeedsUpdate(e))return;i.parentElement&&i.parentElement==e||e.appendChild(i),i.textContent=this.selection.fakeSelectionLabel||"";var n=t.getSelection(),o=t.createRange();n.removeAllRanges(),o.selectNodeContents(i),n.addRange(o);}},{key:"_updateDomSelection",value:function _updateDomSelection(e){var t=e.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(t))return;var i=this.domConverter.viewPositionToDom(this.selection.anchor),n=this.domConverter.viewPositionToDom(this.selection.focus);t.collapse(i.parent,i.offset),t.extend(n.parent,n.offset),So.isGecko&&function(e,t){var i=e.parent;if(i.nodeType!=Node.ELEMENT_NODE||e.offset!=i.childNodes.length-1)return;var n=i.childNodes[e.offset];n&&"BR"==n.tagName&&t.addRange(t.getRangeAt(0));}(n,t);}},{key:"_domSelectionNeedsUpdate",value:function _domSelectionNeedsUpdate(e){if(!this.domConverter.isDomSelectionCorrect(e))return!0;var t=e&&this.domConverter.domSelectionToView(e);return(!t||!this.selection.isEqual(t))&&!(!this.selection.isCollapsed&&this.selection.isSimilar(t));}},{key:"_fakeSelectionNeedsUpdate",value:function _fakeSelectionNeedsUpdate(e){var t=this._fakeSelectionContainer,i=e.ownerDocument.getSelection();return!t||t.parentElement!==e||i.anchorNode!==t&&!t.contains(i.anchorNode)||t.textContent!==this.selection.fakeSelectionLabel;}},{key:"_removeDomSelection",value:function _removeDomSelection(){var _iterator78=_createForOfIteratorHelper(this.domDocuments),_step78;try{for(_iterator78.s();!(_step78=_iterator78.n()).done;){var _e50=_step78.value;if(_e50.getSelection().rangeCount){var _t59=_e50.activeElement,_i64=this.domConverter.mapDomToView(_t59);_t59&&_i64&&_e50.getSelection().removeAllRanges();}}}catch(err){_iterator78.e(err);}finally{_iterator78.f();}}},{key:"_removeFakeSelection",value:function _removeFakeSelection(){var e=this._fakeSelectionContainer;e&&e.remove();}},{key:"_updateFocus",value:function _updateFocus(){if(this.isFocused){var _e51=this.selection.editableElement;_e51&&this.domConverter.focus(_e51);}}}]);return br;}();function wr(e,t,i){var n=t instanceof Array?t:t.childNodes,o=n[i];if(tr(o))return o.data=rr+o.data,o;{var _o21=e.createTextNode(rr);return Array.isArray(t)?n.splice(i,0,_o21):mr(t,i,_o21),_o21;}}function kr(e,t){return pr(e)&&pr(t)&&!tr(e)&&!tr(t)&&e.nodeType!==Node.COMMENT_NODE&&t.nodeType!==Node.COMMENT_NODE&&e.tagName.toLowerCase()===t.tagName.toLowerCase();}function _r(e,t,i){return t===i||(tr(t)&&tr(i)?t.data===i.data:!(!e.isBlockFiller(t)||!e.isBlockFiller(i)));}Ke(br,Ue);var vr={window:window,document:document};function yr(e){var t=0;for(;e.previousSibling;){e=e.previousSibling,t++;}return t;}function xr(e){var t=[];for(;e&&e.nodeType!=Node.DOCUMENT_NODE;){t.unshift(e),e=e.parentNode;}return t;}var Ar=or(document),Cr=ir(document),Tr=nr(document);var Er=/*#__PURE__*/function(){function Er(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,Er);this.document=e,this.blockFillerMode=t.blockFillerMode||"br",this.preElements=["pre"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this._domToViewMapping=new WeakMap(),this._viewToDomMapping=new WeakMap(),this._fakeSelectionMapping=new WeakMap(),this._rawContentElementMatcher=new mn(),this._encounteredRawContentDomNodes=new WeakSet();}_createClass(Er,[{key:"bindFakeSelection",value:function bindFakeSelection(e,t){this._fakeSelectionMapping.set(e,new go(t));}},{key:"fakeSelectionToView",value:function fakeSelectionToView(e){return this._fakeSelectionMapping.get(e);}},{key:"bindElements",value:function bindElements(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e);}},{key:"unbindDomElement",value:function unbindDomElement(e){var t=this._domToViewMapping.get(e);if(t){this._domToViewMapping["delete"](e),this._viewToDomMapping["delete"](t);var _iterator79=_createForOfIteratorHelper(e.childNodes),_step79;try{for(_iterator79.s();!(_step79=_iterator79.n()).done;){var _t60=_step79.value;this.unbindDomElement(_t60);}}catch(err){_iterator79.e(err);}finally{_iterator79.f();}}}},{key:"bindDocumentFragments",value:function bindDocumentFragments(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e);}},{key:"viewToDom",value:function viewToDom(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(e.is("$text")){var _i65=this._processDataFromViewText(e);return t.createTextNode(_i65);}{if(this.mapViewToDom(e))return this.mapViewToDom(e);var _n27;if(e.is("documentFragment"))_n27=t.createDocumentFragment(),i.bind&&this.bindDocumentFragments(_n27,e);else{if(e.is("uiElement"))return _n27="$comment"===e.name?t.createComment(e.getCustomProperty("$rawContent")):e.render(t),i.bind&&this.bindElements(_n27,e),_n27;_n27=e.hasAttribute("xmlns")?t.createElementNS(e.getAttribute("xmlns"),e.name):t.createElement(e.name),e.is("rawElement")&&e.render(_n27),i.bind&&this.bindElements(_n27,e);var _iterator80=_createForOfIteratorHelper(e.getAttributeKeys()),_step80;try{for(_iterator80.s();!(_step80=_iterator80.n()).done;){var _t61=_step80.value;_n27.setAttribute(_t61,e.getAttribute(_t61));}}catch(err){_iterator80.e(err);}finally{_iterator80.f();}}if(!1!==i.withChildren){var _iterator81=_createForOfIteratorHelper(this.viewChildrenToDom(e,t,i)),_step81;try{for(_iterator81.s();!(_step81=_iterator81.n()).done;){var _o22=_step81.value;_n27.appendChild(_o22);}}catch(err){_iterator81.e(err);}finally{_iterator81.f();}}return _n27;}}},{key:"viewChildrenToDom",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function viewChildrenToDom(e,t){var i,n,o,_iterator82,_step82,_r15,_args11=arguments;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function viewChildrenToDom$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:i=_args11.length>2&&_args11[2]!==undefined?_args11[2]:{};n=e.getFillerOffset&&e.getFillerOffset();o=0;_iterator82=_createForOfIteratorHelper(e.getChildren());_context11.prev=4;_iterator82.s();case 6:if((_step82=_iterator82.n()).done){_context11.next=17;break;}_r15=_step82.value;_context11.t0=n===o;if(!_context11.t0){_context11.next=12;break;}_context11.next=12;return this._getBlockFiller(t);case 12:_context11.next=14;return this.viewToDom(_r15,t,i);case 14:o++;case 15:_context11.next=6;break;case 17:_context11.next=22;break;case 19:_context11.prev=19;_context11.t1=_context11["catch"](4);_iterator82.e(_context11.t1);case 22:_context11.prev=22;_iterator82.f();return _context11.finish(22);case 25:_context11.t2=n===o;if(!_context11.t2){_context11.next=29;break;}_context11.next=29;return this._getBlockFiller(t);case 29:case"end":return _context11.stop();}}},viewChildrenToDom,this,[[4,19,22,25]]);})},{key:"viewRangeToDom",value:function viewRangeToDom(e){var t=this.viewPositionToDom(e.start),i=this.viewPositionToDom(e.end),n=document.createRange();return n.setStart(t.parent,t.offset),n.setEnd(i.parent,i.offset),n;}},{key:"viewPositionToDom",value:function viewPositionToDom(e){var t=e.parent;if(t.is("$text")){var _i66=this.findCorrespondingDomText(t);if(!_i66)return null;var _n28=e.offset;return sr(_i66)&&(_n28+=7),{parent:_i66,offset:_n28};}{var _i67,_n29,_o23;if(0===e.offset){if(_i67=this.mapViewToDom(t),!_i67)return null;_o23=_i67.childNodes[0];}else{var _t62=e.nodeBefore;if(_n29=_t62.is("$text")?this.findCorrespondingDomText(_t62):this.mapViewToDom(e.nodeBefore),!_n29)return null;_i67=_n29.parentNode,_o23=_n29.nextSibling;}if(tr(_o23)&&sr(_o23))return{parent:_o23,offset:7};return{parent:_i67,offset:_n29?yr(_n29)+1:0};}}},{key:"domToView",value:function domToView(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(this.isBlockFiller(e))return null;var i=this.getHostViewElement(e);if(i)return i;if(this.isComment(e)&&t.skipComments)return null;if(tr(e)){if(ar(e))return null;{var _t63=this._processDataFromDomText(e);return""===_t63?null:new hn(this.document,_t63);}}{if(this.mapDomToView(e))return this.mapDomToView(e);var _i68;if(this.isDocumentFragment(e))_i68=new Wo(this.document),t.bind&&this.bindDocumentFragments(e,_i68);else{_i68=this._createViewElement(e,t),t.bind&&this.bindElements(e,_i68);var _n30=e.attributes;if(_n30)for(var _e52=_n30.length-1;_e52>=0;_e52--){_i68._setAttribute(_n30[_e52].name,_n30[_e52].value);}if(this._isViewElementWithRawContent(_i68,t)||this.isComment(e)){var _t64=this.isComment(e)?e.data:e.innerHTML;return _i68._setCustomProperty("$rawContent",_t64),this._encounteredRawContentDomNodes.add(e),_i68;}}if(!1!==t.withChildren){var _iterator83=_createForOfIteratorHelper(this.domChildrenToView(e,t)),_step83;try{for(_iterator83.s();!(_step83=_iterator83.n()).done;){var _n31=_step83.value;_i68._appendChild(_n31);}}catch(err){_iterator83.e(err);}finally{_iterator83.f();}}return _i68;}}},{key:"domChildrenToView",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function domChildrenToView(e){var t,_i69,_n32,_o24,_args12=arguments;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function domChildrenToView$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:t=_args12.length>1&&_args12[1]!==undefined?_args12[1]:{};_i69=0;case 2:if(!(_i69<e.childNodes.length)){_context12.next=11;break;}_n32=e.childNodes[_i69],_o24=this.domToView(_n32,t);_context12.t0=null!==_o24;if(!_context12.t0){_context12.next=8;break;}_context12.next=8;return _o24;case 8:_i69++;_context12.next=2;break;case 11:case"end":return _context12.stop();}}},domChildrenToView,this);})},{key:"domSelectionToView",value:function domSelectionToView(e){if(1===e.rangeCount){var _t65=e.getRangeAt(0).startContainer;tr(_t65)&&(_t65=_t65.parentNode);var _i70=this.fakeSelectionToView(_t65);if(_i70)return _i70;}var t=this.isDomSelectionBackward(e),i=[];for(var _t66=0;_t66<e.rangeCount;_t66++){var _n33=e.getRangeAt(_t66),_o25=this.domRangeToView(_n33);_o25&&i.push(_o25);}return new go(i,{backward:t});}},{key:"domRangeToView",value:function domRangeToView(e){var t=this.domPositionToView(e.startContainer,e.startOffset),i=this.domPositionToView(e.endContainer,e.endOffset);return t&&i?new lo(t,i):null;}},{key:"domPositionToView",value:function domPositionToView(e,t){if(this.isBlockFiller(e))return this.domPositionToView(e.parentNode,yr(e));var i=this.mapDomToView(e);if(i&&(i.is("uiElement")||i.is("rawElement")))return co._createBefore(i);if(tr(e)){if(ar(e))return this.domPositionToView(e.parentNode,yr(e));var _i71=this.findCorrespondingViewText(e);var _n34=t;return _i71?(sr(e)&&(_n34-=7,_n34=_n34<0?0:_n34),new co(_i71,_n34)):null;}if(0===t){var _t67=this.mapDomToView(e);if(_t67)return new co(_t67,0);}else{var _i72=e.childNodes[t-1],_n35=tr(_i72)?this.findCorrespondingViewText(_i72):this.mapDomToView(_i72);if(_n35&&_n35.parent)return new co(_n35.parent,_n35.index+1);}return null;}},{key:"mapDomToView",value:function mapDomToView(e){return this.getHostViewElement(e)||this._domToViewMapping.get(e);}},{key:"findCorrespondingViewText",value:function findCorrespondingViewText(e){if(ar(e))return null;var t=this.getHostViewElement(e);if(t)return t;var i=e.previousSibling;if(i){if(!this.isElement(i))return null;var _e53=this.mapDomToView(i);if(_e53){return _e53.nextSibling instanceof hn?_e53.nextSibling:null;}}else{var _t68=this.mapDomToView(e.parentNode);if(_t68){var _e54=_t68.getChild(0);return _e54 instanceof hn?_e54:null;}}return null;}},{key:"mapViewToDom",value:function mapViewToDom(e){return this._viewToDomMapping.get(e);}},{key:"findCorrespondingDomText",value:function findCorrespondingDomText(e){var t=e.previousSibling;return t&&this.mapViewToDom(t)?this.mapViewToDom(t).nextSibling:!t&&e.parent&&this.mapViewToDom(e.parent)?this.mapViewToDom(e.parent).childNodes[0]:null;}},{key:"focus",value:function focus(e){var t=this.mapViewToDom(e);if(t&&t.ownerDocument.activeElement!==t){var _vr$window=vr.window,_e55=_vr$window.scrollX,_i73=_vr$window.scrollY,_n36=[];Ir(t,function(e){var t=e.scrollLeft,i=e.scrollTop;_n36.push([t,i]);}),t.focus(),Ir(t,function(e){var _n36$shift=_n36.shift(),_n36$shift2=_slicedToArray(_n36$shift,2),t=_n36$shift2[0],i=_n36$shift2[1];e.scrollLeft=t,e.scrollTop=i;}),vr.window.scrollTo(_e55,_i73);}}},{key:"isElement",value:function isElement(e){return e&&e.nodeType==Node.ELEMENT_NODE;}},{key:"isDocumentFragment",value:function isDocumentFragment(e){return e&&e.nodeType==Node.DOCUMENT_FRAGMENT_NODE;}},{key:"isComment",value:function isComment(e){return e&&e.nodeType==Node.COMMENT_NODE;}},{key:"isBlockFiller",value:function isBlockFiller(e){return"br"==this.blockFillerMode?e.isEqualNode(Ar):!("BR"!==e.tagName||!Sr(e,this.blockElements)||1!==e.parentNode.childNodes.length)||e.isEqualNode(Tr)||function(e,t){return e.isEqualNode(Cr)&&Sr(e,t)&&1===e.parentNode.childNodes.length;}(e,this.blockElements);}},{key:"isDomSelectionBackward",value:function isDomSelectionBackward(e){if(e.isCollapsed)return!1;var t=document.createRange();t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset);var i=t.collapsed;return t.detach(),i;}},{key:"getHostViewElement",value:function getHostViewElement(e){var t=xr(e);for(t.pop();t.length;){var _e56=t.pop(),_i74=this._domToViewMapping.get(_e56);if(_i74&&(_i74.is("uiElement")||_i74.is("rawElement")))return _i74;}return null;}},{key:"isDomSelectionCorrect",value:function isDomSelectionCorrect(e){return this._isDomSelectionPositionCorrect(e.anchorNode,e.anchorOffset)&&this._isDomSelectionPositionCorrect(e.focusNode,e.focusOffset);}},{key:"registerRawContentMatcher",value:function registerRawContentMatcher(e){this._rawContentElementMatcher.add(e);}},{key:"_getBlockFiller",value:function _getBlockFiller(e){switch(this.blockFillerMode){case"nbsp":return ir(e);case"markedNbsp":return nr(e);case"br":return or(e);}}},{key:"_isDomSelectionPositionCorrect",value:function _isDomSelectionPositionCorrect(e,t){if(tr(e)&&sr(e)&&t<7)return!1;if(this.isElement(e)&&sr(e.childNodes[t]))return!1;var i=this.mapDomToView(e);return!i||!i.is("uiElement")&&!i.is("rawElement");}},{key:"_processDataFromViewText",value:function _processDataFromViewText(e){var _this28=this;var t=e.data;if(e.getAncestors().some(function(e){return _this28.preElements.includes(e.name);}))return t;if(" "==t.charAt(0)){var _i75=this._getTouchingInlineViewNode(e,!1);!(_i75&&_i75.is("$textProxy")&&this._nodeEndsWithSpace(_i75))&&_i75||(t=""+t.substr(1));}if(" "==t.charAt(t.length-1)){var _i76=this._getTouchingInlineViewNode(e,!0),_n37=_i76&&_i76.is("$textProxy")&&" "==_i76.data.charAt(0);" "!=t.charAt(t.length-2)&&_i76&&!_n37||(t=t.substr(0,t.length-1)+"");}return t.replace(/ {2}/g," ");}},{key:"_nodeEndsWithSpace",value:function _nodeEndsWithSpace(e){var _this29=this;if(e.getAncestors().some(function(e){return _this29.preElements.includes(e.name);}))return!1;var t=this._processDataFromViewText(e);return" "==t.charAt(t.length-1);}},{key:"_processDataFromDomText",value:function _processDataFromDomText(e){var t=e.data;if(function(e,t){return xr(e).some(function(e){return e.tagName&&t.includes(e.tagName.toLowerCase());});}(e,this.preElements))return cr(e);t=t.replace(/[ \n\t\r]{1,}/g," ");var i=this._getTouchingInlineDomNode(e,!1),n=this._getTouchingInlineDomNode(e,!0),o=this._checkShouldLeftTrimDomText(e,i),r=this._checkShouldRightTrimDomText(e,n);o&&(t=t.replace(/^ /,"")),r&&(t=t.replace(/ $/,"")),t=cr(new Text(t)),t=t.replace(/ \u00A0/g,"  ");var s=n&&this.isElement(n)&&"BR"!=n.tagName,a=n&&tr(n)&&" "==n.data.charAt(0);return(/( |\u00A0)\u00A0$/.test(t)||!n||s||a)&&(t=t.replace(/\u00A0$/," ")),(o||i&&this.isElement(i)&&"BR"!=i.tagName)&&(t=t.replace(/^\u00A0/," ")),t;}},{key:"_checkShouldLeftTrimDomText",value:function _checkShouldLeftTrimDomText(e,t){return!t||(this.isElement(t)?"BR"===t.tagName:!this._encounteredRawContentDomNodes.has(e.previousSibling)&&/[^\S\u00A0]/.test(t.data.charAt(t.data.length-1)));}},{key:"_checkShouldRightTrimDomText",value:function _checkShouldRightTrimDomText(e,t){return!t&&!sr(e);}},{key:"_getTouchingInlineViewNode",value:function _getTouchingInlineViewNode(e,t){var i=new ao({startPosition:t?co._createAfter(e):co._createBefore(e),direction:t?"forward":"backward"});var _iterator84=_createForOfIteratorHelper(i),_step84;try{for(_iterator84.s();!(_step84=_iterator84.n()).done;){var _e57=_step84.value;if(_e57.item.is("element")&&this.inlineObjectElements.includes(_e57.item.name))return _e57.item;if(_e57.item.is("containerElement"))return null;if(_e57.item.is("element","br"))return null;if(_e57.item.is("$textProxy"))return _e57.item;}}catch(err){_iterator84.e(err);}finally{_iterator84.f();}return null;}},{key:"_getTouchingInlineDomNode",value:function _getTouchingInlineDomNode(e,t){if(!e.parentNode)return null;var i=t?"firstChild":"lastChild",n=t?"nextSibling":"previousSibling";var o=!0;do{if(!o&&e[i]?e=e[i]:e[n]?(e=e[n],o=!1):(e=e.parentNode,o=!0),!e||this._isBlockElement(e))return null;}while(!tr(e)&&"BR"!=e.tagName&&!this._isInlineObjectElement(e));return e;}},{key:"_isBlockElement",value:function _isBlockElement(e){return this.isElement(e)&&this.blockElements.includes(e.tagName.toLowerCase());}},{key:"_isInlineObjectElement",value:function _isInlineObjectElement(e){return this.isElement(e)&&this.inlineObjectElements.includes(e.tagName.toLowerCase());}},{key:"_createViewElement",value:function _createViewElement(e,t){if(this.isComment(e))return new jo(this.document,"$comment");var i=t.keepOriginalCase?e.tagName:e.tagName.toLowerCase();return new eo(this.document,i);}},{key:"_isViewElementWithRawContent",value:function _isViewElementWithRawContent(e,t){return!1!==t.withChildren&&this._rawContentElementMatcher.match(e);}}]);return Er;}();function Ir(e,t){for(;e&&e!=vr.document;){t(e),e=e.parentNode;}}function Sr(e,t){var i=e.parentNode;return i&&i.tagName&&t.includes(i.tagName.toLowerCase());}function Pr(e){var t=Object.prototype.toString.apply(e);return"[object Window]"==t||"[object global]"==t;}var Mr=De({},h,{listenTo:function listenTo(e){var _h$listenTo;for(var _len18=arguments.length,t=new Array(_len18>1?_len18-1:0),_key18=1;_key18<_len18;_key18++){t[_key18-1]=arguments[_key18];}if(pr(e)||Pr(e)){var _i77=this._getProxyEmitter(e)||new Nr(e);_i77.attach.apply(_i77,t),e=_i77;}(_h$listenTo=h.listenTo).call.apply(_h$listenTo,[this,e].concat(t));},stopListening:function stopListening(e,t,i){if(pr(e)||Pr(e)){var _t69=this._getProxyEmitter(e);if(!_t69)return;e=_t69;}h.stopListening.call(this,e,t,i),e instanceof Nr&&e.detach(t);},_getProxyEmitter:function _getProxyEmitter(e){return t=this,i=Rr(e),t[l]&&t[l][i]?t[l][i].emitter:null;var t,i;}});var Nr=/*#__PURE__*/_createClass(function Nr(e){_classCallCheck(this,Nr);u(this,Rr(e)),this._domNode=e;});function Rr(e){return e["data-ck-expando"]||(e["data-ck-expando"]=s());}De(Nr.prototype,h,{attach:function attach(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(this._domListeners&&this._domListeners[e])return;var n={capture:!!i.useCapture,passive:!!i.usePassive},o=this._createDomListener(e,n);this._domNode.addEventListener(e,o,n),this._domListeners||(this._domListeners={}),this._domListeners[e]=o;},detach:function detach(e){var t;!this._domListeners[e]||(t=this._events[e])&&t.callbacks.length||this._domListeners[e].removeListener();},_createDomListener:function _createDomListener(e,t){var _this30=this;var i=function i(t){_this30.fire(e,t);};return i.removeListener=function(){_this30._domNode.removeEventListener(e,i,t),delete _this30._domListeners[e];},i;}});var Or=/*#__PURE__*/function(){function Or(e){_classCallCheck(this,Or);this.view=e,this.document=e.document,this.isEnabled=!1;}_createClass(Or,[{key:"enable",value:function enable(){this.isEnabled=!0;}},{key:"disable",value:function disable(){this.isEnabled=!1;}},{key:"destroy",value:function destroy(){this.disable(),this.stopListening();}},{key:"checkShouldIgnoreEventFromTarget",value:function checkShouldIgnoreEventFromTarget(e){return e&&3===e.nodeType&&(e=e.parentNode),!(!e||1!==e.nodeType)&&e.matches("[data-cke-ignore-events], [data-cke-ignore-events] *");}}]);return Or;}();Ke(Or,Mr);var zr=function zr(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this;};var Dr=function Dr(e){return this.__data__.has(e);};function Lr(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new Ft();++t<i;){this.add(e[t]);}}Lr.prototype.add=Lr.prototype.push=zr,Lr.prototype.has=Dr;var Vr=Lr;var jr=function jr(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;){if(t(e[i],i,e))return!0;}return!1;};var Br=function Br(e,t){return e.has(t);};var Fr=function Fr(e,t,i,n,o,r){var s=1&i,a=e.length,c=t.length;if(a!=c&&!(s&&c>a))return!1;var l=r.get(e),d=r.get(t);if(l&&d)return l==t&&d==e;var h=-1,u=!0,g=2&i?new Vr():void 0;for(r.set(e,t),r.set(t,e);++h<a;){var m=e[h],f=t[h];if(n)var p=s?n(f,m,h,t,e,r):n(m,f,h,e,t,r);if(void 0!==p){if(p)continue;u=!1;break;}if(g){if(!jr(t,function(e,t){if(!Br(g,t)&&(m===e||o(m,e,i,n,r)))return g.push(t);})){u=!1;break;}}else if(m!==f&&!o(m,f,i,n,r)){u=!1;break;}}return r["delete"](e),r["delete"](t),u;};var Hr=function Hr(e){var t=-1,i=Array(e.size);return e.forEach(function(e,n){i[++t]=[n,e];}),i;};var Ur=function Ur(e){var t=-1,i=Array(e.size);return e.forEach(function(e){i[++t]=e;}),i;},Wr=_?_.prototype:void 0,qr=Wr?Wr.valueOf:void 0;var $r=function $r(e,t,i,n,o,r,s){switch(i){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!r(new Ci(e),new Ci(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return G(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=Hr;case"[object Set]":var c=1&n;if(a||(a=Ur),e.size!=t.size&&!c)return!1;var l=s.get(e);if(l)return l==t;n|=2,s.set(e,t);var d=Fr(a(e),a(t),n,o,r,s);return s["delete"](e),d;case"[object Symbol]":if(qr)return qr.call(e)==qr.call(t);}return!1;},Yr=Object.prototype.hasOwnProperty;var Gr=function Gr(e,t,i,n,o,r){var s=1&i,a=di(e),c=a.length;if(c!=di(t).length&&!s)return!1;for(var l=c;l--;){var d=a[l];if(!(s?d in t:Yr.call(t,d)))return!1;}var h=r.get(e),u=r.get(t);if(h&&u)return h==t&&u==e;var g=!0;r.set(e,t),r.set(t,e);for(var m=s;++l<c;){var f=e[d=a[l]],p=t[d];if(n)var b=s?n(p,f,d,t,e,r):n(f,p,d,e,t,r);if(!(void 0===b?f===p||o(f,p,i,n,r):b)){g=!1;break;}m||(m="constructor"==d);}if(g&&!m){var w=e.constructor,k=t.constructor;w==k||!("constructor"in e)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof k&&k instanceof k||(g=!1);}return r["delete"](e),r["delete"](t),g;},Kr=Object.prototype.hasOwnProperty;var Qr=function Qr(e,t,i,n,o,r){var s=_e(e),a=_e(t),c=s?"[object Array]":yi(e),l=a?"[object Array]":yi(t),d="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c),h="[object Object]"==(l="[object Arguments]"==l?"[object Object]":l),u=c==l;if(u&&Object(ve.a)(e)){if(!Object(ve.a)(t))return!1;s=!0,d=!1;}if(u&&!d)return r||(r=new Wt()),s||Ee(e)?Fr(e,t,i,n,o,r):$r(e,t,c,i,n,o,r);if(!(1&i)){var g=d&&Kr.call(e,"__wrapped__"),m=h&&Kr.call(t,"__wrapped__");if(g||m){var f=g?e.value():e,p=m?t.value():t;return r||(r=new Wt()),o(f,p,i,n,r);}}return!!u&&(r||(r=new Wt()),Gr(e,t,i,n,o,r));};var Jr=function e(t,i,n,o,r){return t===i||(null==t||null==i||!me(t)&&!me(i)?t!=t&&i!=i:Qr(t,i,n,o,e,r));};var Zr=function Zr(e,t,i){var n=(i="function"==typeof i?i:void 0)?i(e,t):void 0;return void 0===n?Jr(e,t,void 0,i):!!n;};var Xr=/*#__PURE__*/function(_Or){_inherits(Xr,_Or);var _super13=_createSuper(Xr);function Xr(e){var _this31;_classCallCheck(this,Xr);_this31=_super13.call(this,e),_this31._config={childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0},_this31.domConverter=e.domConverter,_this31.renderer=e._renderer,_this31._domElements=[],_this31._mutationObserver=new window.MutationObserver(_this31._onMutations.bind(_assertThisInitialized(_this31)));return _this31;}_createClass(Xr,[{key:"flush",value:function flush(){this._onMutations(this._mutationObserver.takeRecords());}},{key:"observe",value:function observe(e){this._domElements.push(e),this.isEnabled&&this._mutationObserver.observe(e,this._config);}},{key:"enable",value:function enable(){_get(_getPrototypeOf(Xr.prototype),"enable",this).call(this);var _iterator85=_createForOfIteratorHelper(this._domElements),_step85;try{for(_iterator85.s();!(_step85=_iterator85.n()).done;){var _e58=_step85.value;this._mutationObserver.observe(_e58,this._config);}}catch(err){_iterator85.e(err);}finally{_iterator85.f();}}},{key:"disable",value:function disable(){_get(_getPrototypeOf(Xr.prototype),"disable",this).call(this),this._mutationObserver.disconnect();}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Xr.prototype),"destroy",this).call(this),this._mutationObserver.disconnect();}},{key:"_onMutations",value:function _onMutations(e){if(0===e.length)return;var t=this.domConverter,i=new Map(),n=new Set();var _iterator86=_createForOfIteratorHelper(e),_step86;try{for(_iterator86.s();!(_step86=_iterator86.n()).done;){var _i79=_step86.value;if("childList"===_i79.type){var _e60=t.mapDomToView(_i79.target);if(_e60&&(_e60.is("uiElement")||_e60.is("rawElement")))continue;_e60&&!this._isBogusBrMutation(_i79)&&n.add(_e60);}}}catch(err){_iterator86.e(err);}finally{_iterator86.f();}var _iterator87=_createForOfIteratorHelper(e),_step87;try{for(_iterator87.s();!(_step87=_iterator87.n()).done;){var _o26=_step87.value;var _e61=t.mapDomToView(_o26.target);if((!_e61||!_e61.is("uiElement")&&!_e61.is("rawElement"))&&"characterData"===_o26.type){var _e62=t.findCorrespondingViewText(_o26.target);_e62&&!n.has(_e62.parent)?i.set(_e62,{type:"text",oldText:_e62.data,newText:cr(_o26.target),node:_e62}):!_e62&&sr(_o26.target)&&n.add(t.mapDomToView(_o26.target.parentNode));}}}catch(err){_iterator87.e(err);}finally{_iterator87.f();}var o=[];var _iterator88=_createForOfIteratorHelper(i.values()),_step88;try{for(_iterator88.s();!(_step88=_iterator88.n()).done;){var _e63=_step88.value;this.renderer.markToSync("text",_e63.node),o.push(_e63);}}catch(err){_iterator88.e(err);}finally{_iterator88.f();}var _iterator89=_createForOfIteratorHelper(n),_step89;try{for(_iterator89.s();!(_step89=_iterator89.n()).done;){var _e64=_step89.value;var _i80=t.mapViewToDom(_e64),_n38=Array.from(_e64.getChildren()),_r16=Array.from(t.domChildrenToView(_i80,{withChildren:!1}));Zr(_n38,_r16,a)||(this.renderer.markToSync("children",_e64),o.push({type:"children",oldChildren:_n38,newChildren:_r16,node:_e64}));}}catch(err){_iterator89.e(err);}finally{_iterator89.f();}var r=e[0].target.ownerDocument.getSelection();var s=null;if(r&&r.anchorNode){var _e59=t.domPositionToView(r.anchorNode,r.anchorOffset),_i78=t.domPositionToView(r.focusNode,r.focusOffset);_e59&&_i78&&(s=new go(_e59),s.setFocus(_i78));}function a(e,t){if(!Array.isArray(e))return e===t||!(!e.is("$text")||!t.is("$text"))&&e.data===t.data;}o.length&&(this.document.fire("mutations",o,s),this.view.forceRender());}},{key:"_isBogusBrMutation",value:function _isBogusBrMutation(e){var t=null;return null===e.nextSibling&&0===e.removedNodes.length&&1==e.addedNodes.length&&(t=this.domConverter.domToView(e.addedNodes[0],{withChildren:!1})),t&&t.is("element","br");}}]);return Xr;}(Or);var es=/*#__PURE__*/function(){function es(e,t,i){_classCallCheck(this,es);this.view=e,this.document=e.document,this.domEvent=t,this.domTarget=t.target,De(this,i);}_createClass(es,[{key:"target",get:function get(){return this.view.domConverter.mapDomToView(this.domTarget);}},{key:"preventDefault",value:function preventDefault(){this.domEvent.preventDefault();}},{key:"stopPropagation",value:function stopPropagation(){this.domEvent.stopPropagation();}}]);return es;}();var ts=/*#__PURE__*/function(_Or2){_inherits(ts,_Or2);var _super14=_createSuper(ts);function ts(e){var _this32;_classCallCheck(this,ts);_this32=_super14.call(this,e),_this32.useCapture=!1;return _this32;}_createClass(ts,[{key:"observe",value:function observe(e){var _this33=this;("string"==typeof this.domEventType?[this.domEventType]:this.domEventType).forEach(function(t){_this33.listenTo(e,t,function(e,t){_this33.isEnabled&&!_this33.checkShouldIgnoreEventFromTarget(t.target)&&_this33.onDomEvent(t);},{useCapture:_this33.useCapture});});}},{key:"fire",value:function fire(e,t,i){this.isEnabled&&this.document.fire(e,new es(this.view,t,i));}}]);return ts;}(Or);var is=/*#__PURE__*/function(_ts){_inherits(is,_ts);var _super15=_createSuper(is);function is(e){var _this34;_classCallCheck(this,is);_this34=_super15.call(this,e),_this34.domEventType=["keydown","keyup"];return _this34;}_createClass(is,[{key:"onDomEvent",value:function onDomEvent(e){this.fire(e.type,e,{keyCode:e.keyCode,altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,get keystroke(){return Oo(this);}});}}]);return is;}(ts);var ns=function ns(){return k.a.Date.now();},os=/\s/;var rs=function rs(e){for(var t=e.length;t--&&os.test(e.charAt(t));){;}return t;},ss=/^\s+/;var as=function as(e){return e?e.slice(0,rs(e)+1).replace(ss,""):e;},cs=/^[-+]0x[0-9a-f]+$/i,ls=/^0b[01]+$/i,ds=/^0o[0-7]+$/i,hs=parseInt;var us=function us(e){if("number"==typeof e)return e;if(bn(e))return NaN;if(w(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=w(t)?t+"":t;}if("string"!=typeof e)return 0===e?e:+e;e=as(e);var i=ls.test(e);return i||ds.test(e)?hs(e.slice(2),i?2:8):cs.test(e)?NaN:+e;},gs=Math.max,ms=Math.min;var fs=function fs(e,t,i){var n,o,r,s,a,c,l=0,d=!1,h=!1,u=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function g(t){var i=n,r=o;return n=o=void 0,l=t,s=e.apply(r,i);}function m(e){return l=e,a=setTimeout(p,t),d?g(e):s;}function f(e){var i=e-c;return void 0===c||i>=t||i<0||h&&e-l>=r;}function p(){var e=ns();if(f(e))return b(e);a=setTimeout(p,function(e){var i=t-(e-c);return h?ms(i,r-(e-l)):i;}(e));}function b(e){return a=void 0,u&&n?g(e):(n=o=void 0,s);}function k(){var e=ns(),i=f(e);if(n=arguments,o=this,c=e,i){if(void 0===a)return m(c);if(h)return clearTimeout(a),a=setTimeout(p,t),g(c);}return void 0===a&&(a=setTimeout(p,t)),s;}return t=us(t)||0,w(i)&&(d=!!i.leading,r=(h="maxWait"in i)?gs(us(i.maxWait)||0,t):r,u="trailing"in i?!!i.trailing:u),k.cancel=function(){void 0!==a&&clearTimeout(a),l=0,n=c=o=a=void 0;},k.flush=function(){return void 0===a?s:b(ns());},k;};var ps=/*#__PURE__*/function(_Or3){_inherits(ps,_Or3);var _super16=_createSuper(ps);function ps(e){var _this35;_classCallCheck(this,ps);_this35=_super16.call(this,e),_this35._fireSelectionChangeDoneDebounced=fs(function(e){return _this35.document.fire("selectionChangeDone",e);},200);return _this35;}_createClass(ps,[{key:"observe",value:function observe(){var _this36=this;var e=this.document;e.on("arrowKey",function(t,i){e.selection.isFake&&_this36.isEnabled&&i.preventDefault();},{context:"$capture"}),e.on("arrowKey",function(t,i){e.selection.isFake&&_this36.isEnabled&&_this36._handleSelectionMove(i.keyCode);},{priority:"lowest"});}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(ps.prototype),"destroy",this).call(this),this._fireSelectionChangeDoneDebounced.cancel();}},{key:"_handleSelectionMove",value:function _handleSelectionMove(e){var t=this.document.selection,i=new go(t.getRanges(),{backward:t.isBackward,fake:!1});e!=No.arrowleft&&e!=No.arrowup||i.setTo(i.getFirstPosition()),e!=No.arrowright&&e!=No.arrowdown||i.setTo(i.getLastPosition());var n={oldSelection:t,newSelection:i,domSelection:null};this.document.fire("selectionChange",n),this._fireSelectionChangeDoneDebounced(n);}}]);return ps;}(Or);var bs=/*#__PURE__*/function(_Or4){_inherits(bs,_Or4);var _super17=_createSuper(bs);function bs(e){var _this37;_classCallCheck(this,bs);_this37=_super17.call(this,e),_this37.mutationObserver=e.getObserver(Xr),_this37.selection=_this37.document.selection,_this37.domConverter=e.domConverter,_this37._documents=new WeakSet(),_this37._fireSelectionChangeDoneDebounced=fs(function(e){return _this37.document.fire("selectionChangeDone",e);},200),_this37._clearInfiniteLoopInterval=setInterval(function(){return _this37._clearInfiniteLoop();},1e3),_this37._loopbackCounter=0;return _this37;}_createClass(bs,[{key:"observe",value:function observe(e){var _this38=this;var t=e.ownerDocument;this._documents.has(t)||(this.listenTo(t,"selectionchange",function(e,i){_this38._handleSelectionChange(i,t);}),this._documents.add(t));}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(bs.prototype),"destroy",this).call(this),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel();}},{key:"_handleSelectionChange",value:function _handleSelectionChange(e,t){if(!this.isEnabled)return;var i=t.defaultView.getSelection();if(this.checkShouldIgnoreEventFromTarget(i.anchorNode))return;this.mutationObserver.flush();var n=this.domConverter.domSelectionToView(i);if(0!=n.rangeCount){if(this.view.hasDomSelection=!0,!(this.selection.isEqual(n)&&this.domConverter.isDomSelectionCorrect(i)||++this._loopbackCounter>60))if(this.selection.isSimilar(n))this.view.forceRender();else{var _e65={oldSelection:this.selection,newSelection:n,domSelection:i};this.document.fire("selectionChange",_e65),this._fireSelectionChangeDoneDebounced(_e65);}}else this.view.hasDomSelection=!1;}},{key:"_clearInfiniteLoop",value:function _clearInfiniteLoop(){this._loopbackCounter=0;}}]);return bs;}(Or);var ws=/*#__PURE__*/function(_ts2){_inherits(ws,_ts2);var _super18=_createSuper(ws);function ws(e){var _this39;_classCallCheck(this,ws);_this39=_super18.call(this,e),_this39.domEventType=["focus","blur"],_this39.useCapture=!0;var t=_this39.document;t.on("focus",function(){t.isFocused=!0,_this39._renderTimeoutId=setTimeout(function(){return e.change(function(){});},50);}),t.on("blur",function(i,n){var o=t.selection.editableElement;null!==o&&o!==n.target||(t.isFocused=!1,e.change(function(){}));});return _this39;}_createClass(ws,[{key:"onDomEvent",value:function onDomEvent(e){this.fire(e.type,e);}},{key:"destroy",value:function destroy(){this._renderTimeoutId&&clearTimeout(this._renderTimeoutId),_get(_getPrototypeOf(ws.prototype),"destroy",this).call(this);}}]);return ws;}(ts);var ks=/*#__PURE__*/function(_ts3){_inherits(ks,_ts3);var _super19=_createSuper(ks);function ks(e){var _this40;_classCallCheck(this,ks);_this40=_super19.call(this,e),_this40.domEventType=["compositionstart","compositionupdate","compositionend"];var t=_this40.document;t.on("compositionstart",function(){t.isComposing=!0;}),t.on("compositionend",function(){t.isComposing=!1;});return _this40;}_createClass(ks,[{key:"onDomEvent",value:function onDomEvent(e){this.fire(e.type,e);}}]);return ks;}(ts);var _s=/*#__PURE__*/function(_ts4){_inherits(_s,_ts4);var _super20=_createSuper(_s);function _s(e){var _this41;_classCallCheck(this,_s);_this41=_super20.call(this,e),_this41.domEventType=["beforeinput"];return _this41;}_createClass(_s,[{key:"onDomEvent",value:function onDomEvent(e){this.fire(e.type,e);}}]);return _s;}(ts);var vs=/*#__PURE__*/function(){function vs(){_classCallCheck(this,vs);this._replacedElements=[];}_createClass(vs,[{key:"replace",value:function replace(e,t){this._replacedElements.push({element:e,newElement:t}),e.style.display="none",t&&e.parentNode.insertBefore(t,e.nextSibling);}},{key:"restore",value:function restore(){this._replacedElements.forEach(function(_ref13){var e=_ref13.element,t=_ref13.newElement;e.style.display="",t&&t.remove();}),this._replacedElements=[];}}]);return vs;}();var ys=function ys(e){return"string"==typeof e||!_e(e)&&me(e)&&"[object String]"==S(e);};function xs(e){return"[object Range]"==Object.prototype.toString.apply(e);}function As(e){var t=e.ownerDocument.defaultView.getComputedStyle(e);return{top:parseInt(t.borderTopWidth,10),right:parseInt(t.borderRightWidth,10),bottom:parseInt(t.borderBottomWidth,10),left:parseInt(t.borderLeftWidth,10)};}var Cs=["top","right","bottom","left","width","height"];var Ts=/*#__PURE__*/function(){function Ts(e){_classCallCheck(this,Ts);var t=xs(e);if(Object.defineProperty(this,"_source",{value:e._source||e,writable:!0,enumerable:!1}),Yi(e)||t){if(t){var _t70=Ts.getDomRangeRects(e);Es(this,Ts.getBoundingRect(_t70));}else Es(this,e.getBoundingClientRect());}else if(Pr(e)){var _t71=e.innerWidth,_i81=e.innerHeight;Es(this,{top:0,right:_t71,bottom:_i81,left:0,width:_t71,height:_i81});}else Es(this,e);}_createClass(Ts,[{key:"clone",value:function clone(){return new Ts(this);}},{key:"moveTo",value:function moveTo(e,t){return this.top=t,this.right=e+this.width,this.bottom=t+this.height,this.left=e,this;}},{key:"moveBy",value:function moveBy(e,t){return this.top+=t,this.right+=e,this.left+=e,this.bottom+=t,this;}},{key:"getIntersection",value:function getIntersection(e){var t={top:Math.max(this.top,e.top),right:Math.min(this.right,e.right),bottom:Math.min(this.bottom,e.bottom),left:Math.max(this.left,e.left)};return t.width=t.right-t.left,t.height=t.bottom-t.top,t.width<0||t.height<0?null:new Ts(t);}},{key:"getIntersectionArea",value:function getIntersectionArea(e){var t=this.getIntersection(e);return t?t.getArea():0;}},{key:"getArea",value:function getArea(){return this.width*this.height;}},{key:"getVisible",value:function getVisible(){var e=this._source;var t=this.clone();if(!Is(e)){var _i82=e.parentNode||e.commonAncestorContainer;for(;_i82&&!Is(_i82);){var _e66=new Ts(_i82),_n39=t.getIntersection(_e66);if(!_n39)return null;_n39.getArea()<t.getArea()&&(t=_n39),_i82=_i82.parentNode;}}return t;}},{key:"isEqual",value:function isEqual(e){var _iterator90=_createForOfIteratorHelper(Cs),_step90;try{for(_iterator90.s();!(_step90=_iterator90.n()).done;){var _t72=_step90.value;if(this[_t72]!==e[_t72])return!1;}}catch(err){_iterator90.e(err);}finally{_iterator90.f();}return!0;}},{key:"contains",value:function contains(e){var t=this.getIntersection(e);return!(!t||!t.isEqual(e));}},{key:"excludeScrollbarsAndBorders",value:function excludeScrollbarsAndBorders(){var e=this._source;var t,i,n;if(Pr(e))t=e.innerWidth-e.document.documentElement.clientWidth,i=e.innerHeight-e.document.documentElement.clientHeight,n=e.getComputedStyle(e.document.documentElement).direction;else{var _o27=As(this._source);t=e.offsetWidth-e.clientWidth-_o27.left-_o27.right,i=e.offsetHeight-e.clientHeight-_o27.top-_o27.bottom,n=e.ownerDocument.defaultView.getComputedStyle(e).direction,this.left+=_o27.left,this.top+=_o27.top,this.right-=_o27.right,this.bottom-=_o27.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top;}return this.width-=t,"ltr"===n?this.right-=t:this.left+=t,this.height-=i,this.bottom-=i,this;}}],[{key:"getDomRangeRects",value:function getDomRangeRects(e){var t=[],i=Array.from(e.getClientRects());if(i.length){var _iterator91=_createForOfIteratorHelper(i),_step91;try{for(_iterator91.s();!(_step91=_iterator91.n()).done;){var _e67=_step91.value;t.push(new Ts(_e67));}}catch(err){_iterator91.e(err);}finally{_iterator91.f();}}else{var _i83=e.startContainer;tr(_i83)&&(_i83=_i83.parentNode);var _n40=new Ts(_i83.getBoundingClientRect());_n40.right=_n40.left,_n40.width=0,t.push(_n40);}return t;}},{key:"getBoundingRect",value:function getBoundingRect(e){var t={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY};var i=0;var _iterator92=_createForOfIteratorHelper(e),_step92;try{for(_iterator92.s();!(_step92=_iterator92.n()).done;){var _n41=_step92.value;i++,t.left=Math.min(t.left,_n41.left),t.top=Math.min(t.top,_n41.top),t.right=Math.max(t.right,_n41.right),t.bottom=Math.max(t.bottom,_n41.bottom);}}catch(err){_iterator92.e(err);}finally{_iterator92.f();}return 0==i?null:(t.width=t.right-t.left,t.height=t.bottom-t.top,new Ts(t));}}]);return Ts;}();function Es(e,t){var _iterator93=_createForOfIteratorHelper(Cs),_step93;try{for(_iterator93.s();!(_step93=_iterator93.n()).done;){var _i84=_step93.value;e[_i84]=t[_i84];}}catch(err){_iterator93.e(err);}finally{_iterator93.f();}}function Is(e){return!!Yi(e)&&e===e.ownerDocument.body;}var Ss=/*#__PURE__*/function(){function Ss(e,t){_classCallCheck(this,Ss);Ss._observerInstance||Ss._createObserver(),this._element=e,this._callback=t,Ss._addElementCallback(e,t),Ss._observerInstance.observe(e);}_createClass(Ss,[{key:"destroy",value:function destroy(){Ss._deleteElementCallback(this._element,this._callback);}}],[{key:"_addElementCallback",value:function _addElementCallback(e,t){Ss._elementCallbacks||(Ss._elementCallbacks=new Map());var i=Ss._elementCallbacks.get(e);i||(i=new Set(),Ss._elementCallbacks.set(e,i)),i.add(t);}},{key:"_deleteElementCallback",value:function _deleteElementCallback(e,t){var i=Ss._getElementCallbacks(e);i&&(i["delete"](t),i.size||(Ss._elementCallbacks["delete"](e),Ss._observerInstance.unobserve(e))),Ss._elementCallbacks&&!Ss._elementCallbacks.size&&(Ss._observerInstance=null,Ss._elementCallbacks=null);}},{key:"_getElementCallbacks",value:function _getElementCallbacks(e){return Ss._elementCallbacks?Ss._elementCallbacks.get(e):null;}},{key:"_createObserver",value:function _createObserver(){var e;e="function"==typeof vr.window.ResizeObserver?vr.window.ResizeObserver:Ps,Ss._observerInstance=new e(function(e){var _iterator94=_createForOfIteratorHelper(e),_step94;try{for(_iterator94.s();!(_step94=_iterator94.n()).done;){var _t73=_step94.value;var _e68=Ss._getElementCallbacks(_t73.target);if(_e68){var _iterator95=_createForOfIteratorHelper(_e68),_step95;try{for(_iterator95.s();!(_step95=_iterator95.n()).done;){var _i85=_step95.value;_i85(_t73);}}catch(err){_iterator95.e(err);}finally{_iterator95.f();}}}}catch(err){_iterator94.e(err);}finally{_iterator94.f();}});}}]);return Ss;}();Ss._observerInstance=null,Ss._elementCallbacks=null;var Ps=/*#__PURE__*/function(){function Ps(e){_classCallCheck(this,Ps);this._callback=e,this._elements=new Set(),this._previousRects=new Map(),this._periodicCheckTimeout=null;}_createClass(Ps,[{key:"observe",value:function observe(e){this._elements.add(e),this._checkElementRectsAndExecuteCallback(),1===this._elements.size&&this._startPeriodicCheck();}},{key:"unobserve",value:function unobserve(e){this._elements["delete"](e),this._previousRects["delete"](e),this._elements.size||this._stopPeriodicCheck();}},{key:"_startPeriodicCheck",value:function _startPeriodicCheck(){var _this42=this;var e=function e(){_this42._checkElementRectsAndExecuteCallback(),_this42._periodicCheckTimeout=setTimeout(e,100);};this.listenTo(vr.window,"resize",function(){_this42._checkElementRectsAndExecuteCallback();}),this._periodicCheckTimeout=setTimeout(e,100);}},{key:"_stopPeriodicCheck",value:function _stopPeriodicCheck(){clearTimeout(this._periodicCheckTimeout),this.stopListening(),this._previousRects.clear();}},{key:"_checkElementRectsAndExecuteCallback",value:function _checkElementRectsAndExecuteCallback(){var e=[];var _iterator96=_createForOfIteratorHelper(this._elements),_step96;try{for(_iterator96.s();!(_step96=_iterator96.n()).done;){var _t74=_step96.value;this._hasRectChanged(_t74)&&e.push({target:_t74,contentRect:this._previousRects.get(_t74)});}}catch(err){_iterator96.e(err);}finally{_iterator96.f();}e.length&&this._callback(e);}},{key:"_hasRectChanged",value:function _hasRectChanged(e){if(!e.ownerDocument.body.contains(e))return!1;var t=new Ts(e),i=this._previousRects.get(e),n=!i||!i.isEqual(t);return this._previousRects.set(e,t),n;}}]);return Ps;}();function Ms(e){return function(t){return t+e;};}function Ns(e){var t=e.next();return t.done?null:t.value;}Ke(Ps,Mr);var Rs=/*#__PURE__*/function(){function Rs(){_classCallCheck(this,Rs);this.set("isFocused",!1),this.set("focusedElement",null),this._elements=new Set(),this._nextEventLoopTimeout=null;}_createClass(Rs,[{key:"add",value:function add(e){var _this43=this;if(this._elements.has(e))throw new c.a("focustracker-add-element-already-exist",this);this.listenTo(e,"focus",function(){return _this43._focus(e);},{useCapture:!0}),this.listenTo(e,"blur",function(){return _this43._blur();},{useCapture:!0}),this._elements.add(e);}},{key:"remove",value:function remove(e){e===this.focusedElement&&this._blur(e),this._elements.has(e)&&(this.stopListening(e),this._elements["delete"](e));}},{key:"destroy",value:function destroy(){this.stopListening();}},{key:"_focus",value:function _focus(e){clearTimeout(this._nextEventLoopTimeout),this.focusedElement=e,this.isFocused=!0;}},{key:"_blur",value:function _blur(){var _this44=this;clearTimeout(this._nextEventLoopTimeout),this._nextEventLoopTimeout=setTimeout(function(){_this44.focusedElement=null,_this44.isFocused=!1;},0);}}]);return Rs;}();Ke(Rs,Mr),Ke(Rs,Ue);var Os=/*#__PURE__*/function(){function Os(){_classCallCheck(this,Os);this._listener=Object.create(Mr);}_createClass(Os,[{key:"listenTo",value:function listenTo(e){var _this45=this;this._listener.listenTo(e,"keydown",function(e,t){_this45._listener.fire("_keydown:"+Oo(t),t);});}},{key:"set",value:function set(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var n=zo(e),o=i.priority;this._listener.listenTo(this._listener,"_keydown:"+n,function(e,i){t(i,function(){i.preventDefault(),i.stopPropagation(),e.stop();}),e["return"]=!0;},{priority:o});}},{key:"press",value:function press(e){return!!this._listener.fire("_keydown:"+Oo(e),e);}},{key:"destroy",value:function destroy(){this._listener.stopListening();}}]);return Os;}();var zs=/*#__PURE__*/function(_Or5){_inherits(zs,_Or5);var _super21=_createSuper(zs);function zs(e){var _this46;_classCallCheck(this,zs);_this46=_super21.call(this,e),_this46.document.on("keydown",function(e,t){if(_this46.isEnabled&&((i=t.keyCode)==No.arrowright||i==No.arrowleft||i==No.arrowup||i==No.arrowdown)){var _i86=new fo(_this46.document,"arrowKey",_this46.document.selection.getFirstRange());_this46.document.fire(_i86,t),_i86.stop.called&&e.stop();}var i;});return _this46;}_createClass(zs,[{key:"observe",value:function observe(){}}]);return zs;}(Or);function Ds(_ref14){var e=_ref14.target,_ref14$viewportOffset=_ref14.viewportOffset,t=_ref14$viewportOffset===void 0?0:_ref14$viewportOffset;var i=Us(e);var n=i,o=null;for(;n;){var _r17=void 0;_r17=Ws(n==i?e:o),Vs(_r17,function(){return qs(e,n);});var _s9=qs(e,n);if(Ls(n,_s9,t),n.parent!=n){if(o=n.frameElement,n=n.parent,!o)return;}else n=null;}}function Ls(e,t,i){var n=t.clone().moveBy(0,i),o=t.clone().moveBy(0,-i),r=new Ts(e).excludeScrollbarsAndBorders();if(![o,n].every(function(e){return r.contains(e);})){var _s10=e.scrollX,_a8=e.scrollY;Bs(o,r)?_a8-=r.top-t.top+i:js(n,r)&&(_a8+=t.bottom-r.bottom+i),Fs(t,r)?_s10-=r.left-t.left+i:Hs(t,r)&&(_s10+=t.right-r.right+i),e.scrollTo(_s10,_a8);}}function Vs(e,t){var i=Us(e);var n,o;for(;e!=i.document.body;){o=t(),n=new Ts(e).excludeScrollbarsAndBorders(),n.contains(o)||(Bs(o,n)?e.scrollTop-=n.top-o.top:js(o,n)&&(e.scrollTop+=o.bottom-n.bottom),Fs(o,n)?e.scrollLeft-=n.left-o.left:Hs(o,n)&&(e.scrollLeft+=o.right-n.right)),e=e.parentNode;}}function js(e,t){return e.bottom>t.bottom;}function Bs(e,t){return e.top<t.top;}function Fs(e,t){return e.left<t.left;}function Hs(e,t){return e.right>t.right;}function Us(e){return xs(e)?e.startContainer.ownerDocument.defaultView:e.ownerDocument.defaultView;}function Ws(e){if(xs(e)){var _t75=e.commonAncestorContainer;return tr(_t75)&&(_t75=_t75.parentNode),_t75;}return e.parentNode;}function qs(e,t){var i=Us(e),n=new Ts(e);if(i===t)return n;{var _e69=i;for(;_e69!=t;){var _t76=_e69.frameElement,_i87=new Ts(_t76).excludeScrollbarsAndBorders();n.moveBy(_i87.left,_i87.top),_e69=_e69.parent;}}return n;}Object.assign({},{scrollViewportToShowTarget:Ds,scrollAncestorsToShowTarget:function scrollAncestorsToShowTarget(e){Vs(Ws(e),function(){return new Ts(e);});}});var $s=/*#__PURE__*/function(){function $s(e){var _this47=this;_classCallCheck(this,$s);this.document=new yo(e),this.domConverter=new Er(this.document),this.domRoots=new Map(),this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new br(this.domConverter,this.document.selection),this._renderer.bind("isFocused").to(this.document),this._initialDomRootAttributes=new WeakMap(),this._observers=new Map(),this._ongoingChange=!1,this._postFixersInProgress=!1,this._renderingDisabled=!1,this._hasChangedSinceTheLastRendering=!1,this._writer=new qo(this.document),this.addObserver(Xr),this.addObserver(bs),this.addObserver(ws),this.addObserver(is),this.addObserver(ps),this.addObserver(ks),this.addObserver(zs),So.isAndroid&&this.addObserver(_s),this.document.on("arrowKey",lr,{priority:"low"}),Bo(this),this.on("render",function(){_this47._render(),_this47.document.fire("layoutChanged"),_this47._hasChangedSinceTheLastRendering=!1;}),this.listenTo(this.document.selection,"change",function(){_this47._hasChangedSinceTheLastRendering=!0;}),this.listenTo(this.document,"change:isFocused",function(){_this47._hasChangedSinceTheLastRendering=!0;});}_createClass($s,[{key:"attachDomRoot",value:function attachDomRoot(e){var _this48=this;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"main";var i=this.document.getRoot(t);i._name=e.tagName.toLowerCase();var n={};for(var _i88=0,_Array$from=Array.from(e.attributes);_i88<_Array$from.length;_i88++){var _Array$from$_i=_Array$from[_i88],_t77=_Array$from$_i.name,_o28=_Array$from$_i.value;n[_t77]=_o28,"class"===_t77?this._writer.addClass(_o28.split(" "),i):this._writer.setAttribute(_t77,_o28,i);}this._initialDomRootAttributes.set(e,n);var o=function o(){_this48._writer.setAttribute("contenteditable",!i.isReadOnly,i),i.isReadOnly?_this48._writer.addClass("ck-read-only",i):_this48._writer.removeClass("ck-read-only",i);};o(),this.domRoots.set(t,e),this.domConverter.bindElements(e,i),this._renderer.markToSync("children",i),this._renderer.markToSync("attributes",i),this._renderer.domDocuments.add(e.ownerDocument),i.on("change:children",function(e,t){return _this48._renderer.markToSync("children",t);}),i.on("change:attributes",function(e,t){return _this48._renderer.markToSync("attributes",t);}),i.on("change:text",function(e,t){return _this48._renderer.markToSync("text",t);}),i.on("change:isReadOnly",function(){return _this48.change(o);}),i.on("change",function(){_this48._hasChangedSinceTheLastRendering=!0;});var _iterator97=_createForOfIteratorHelper(this._observers.values()),_step97;try{for(_iterator97.s();!(_step97=_iterator97.n()).done;){var _i89=_step97.value;_i89.observe(e,t);}}catch(err){_iterator97.e(err);}finally{_iterator97.f();}}},{key:"detachDomRoot",value:function detachDomRoot(e){var t=this.domRoots.get(e);Array.from(t.attributes).forEach(function(_ref15){var e=_ref15.name;return t.removeAttribute(e);});var i=this._initialDomRootAttributes.get(t);for(var _e70 in i){t.setAttribute(_e70,i[_e70]);}this.domRoots["delete"](e),this.domConverter.unbindDomElement(t);}},{key:"getDomRoot",value:function getDomRoot(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"main";return this.domRoots.get(e);}},{key:"addObserver",value:function addObserver(e){var t=this._observers.get(e);if(t)return t;t=new e(this),this._observers.set(e,t);var _iterator98=_createForOfIteratorHelper(this.domRoots),_step98;try{for(_iterator98.s();!(_step98=_iterator98.n()).done;){var _step98$value=_slicedToArray(_step98.value,2),_e71=_step98$value[0],_i90=_step98$value[1];t.observe(_i90,_e71);}}catch(err){_iterator98.e(err);}finally{_iterator98.f();}return t.enable(),t;}},{key:"getObserver",value:function getObserver(e){return this._observers.get(e);}},{key:"disableObservers",value:function disableObservers(){var _iterator99=_createForOfIteratorHelper(this._observers.values()),_step99;try{for(_iterator99.s();!(_step99=_iterator99.n()).done;){var _e72=_step99.value;_e72.disable();}}catch(err){_iterator99.e(err);}finally{_iterator99.f();}}},{key:"enableObservers",value:function enableObservers(){var _iterator100=_createForOfIteratorHelper(this._observers.values()),_step100;try{for(_iterator100.s();!(_step100=_iterator100.n()).done;){var _e73=_step100.value;_e73.enable();}}catch(err){_iterator100.e(err);}finally{_iterator100.f();}}},{key:"scrollToTheSelection",value:function scrollToTheSelection(){var e=this.document.selection.getFirstRange();e&&Ds({target:this.domConverter.viewRangeToDom(e),viewportOffset:20});}},{key:"focus",value:function focus(){if(!this.document.isFocused){var _e74=this.document.selection.editableElement;_e74&&(this.domConverter.focus(_e74),this.forceRender());}}},{key:"change",value:function change(e){if(this.isRenderingInProgress||this._postFixersInProgress)throw new c.a("cannot-change-view-tree",this);try{if(this._ongoingChange)return e(this._writer);this._ongoingChange=!0;var _t78=e(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),_t78;}catch(e){c.a.rethrowUnexpectedError(e,this);}}},{key:"forceRender",value:function forceRender(){this._hasChangedSinceTheLastRendering=!0,this.change(function(){});}},{key:"destroy",value:function destroy(){var _iterator101=_createForOfIteratorHelper(this._observers.values()),_step101;try{for(_iterator101.s();!(_step101=_iterator101.n()).done;){var _e75=_step101.value;_e75.destroy();}}catch(err){_iterator101.e(err);}finally{_iterator101.f();}this.document.destroy(),this.stopListening();}},{key:"createPositionAt",value:function createPositionAt(e,t){return co._createAt(e,t);}},{key:"createPositionAfter",value:function createPositionAfter(e){return co._createAfter(e);}},{key:"createPositionBefore",value:function createPositionBefore(e){return co._createBefore(e);}},{key:"createRange",value:function createRange(e,t){return new lo(e,t);}},{key:"createRangeOn",value:function createRangeOn(e){return lo._createOn(e);}},{key:"createRangeIn",value:function createRangeIn(e){return lo._createIn(e);}},{key:"createSelection",value:function createSelection(e,t,i){return new go(e,t,i);}},{key:"_disableRendering",value:function _disableRendering(e){this._renderingDisabled=e,0==e&&this.change(function(){});}},{key:"_render",value:function _render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1;}}]);return $s;}();Ke($s,Ue);var Ys=/*#__PURE__*/function(){function Ys(e){_classCallCheck(this,Ys);this.parent=null,this._attrs=gn(e);}_createClass(Ys,[{key:"index",get:function get(){var e;if(!this.parent)return null;if(null===(e=this.parent.getChildIndex(this)))throw new c.a("model-node-not-found-in-parent",this);return e;}},{key:"startOffset",get:function get(){var e;if(!this.parent)return null;if(null===(e=this.parent.getChildStartOffset(this)))throw new c.a("model-node-not-found-in-parent",this);return e;}},{key:"offsetSize",get:function get(){return 1;}},{key:"endOffset",get:function get(){return this.parent?this.startOffset+this.offsetSize:null;}},{key:"nextSibling",get:function get(){var e=this.index;return null!==e&&this.parent.getChild(e+1)||null;}},{key:"previousSibling",get:function get(){var e=this.index;return null!==e&&this.parent.getChild(e-1)||null;}},{key:"root",get:function get(){var e=this;for(;e.parent;){e=e.parent;}return e;}},{key:"isAttached",value:function isAttached(){return this.root.is("rootElement");}},{key:"getPath",value:function getPath(){var e=[];var t=this;for(;t.parent;){e.unshift(t.startOffset),t=t.parent;}return e;}},{key:"getAncestors",value:function getAncestors(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{includeSelf:!1,parentFirst:!1};var t=[];var i=e.includeSelf?this:this.parent;for(;i;){t[e.parentFirst?"push":"unshift"](i),i=i.parent;}return t;}},{key:"getCommonAncestor",value:function getCommonAncestor(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=this.getAncestors(t),n=e.getAncestors(t);var o=0;for(;i[o]==n[o]&&i[o];){o++;}return 0===o?null:i[o-1];}},{key:"isBefore",value:function isBefore(e){if(this==e)return!1;if(this.root!==e.root)return!1;var t=this.getPath(),i=e.getPath(),n=cn(t,i);switch(n){case"prefix":return!0;case"extension":return!1;default:return t[n]<i[n];}}},{key:"isAfter",value:function isAfter(e){return this!=e&&this.root===e.root&&!this.isBefore(e);}},{key:"hasAttribute",value:function hasAttribute(e){return this._attrs.has(e);}},{key:"getAttribute",value:function getAttribute(e){return this._attrs.get(e);}},{key:"getAttributes",value:function getAttributes(){return this._attrs.entries();}},{key:"getAttributeKeys",value:function getAttributeKeys(){return this._attrs.keys();}},{key:"toJSON",value:function toJSON(){var e={};return this._attrs.size&&(e.attributes=Array.from(this._attrs).reduce(function(e,t){return e[t[0]]=t[1],e;},{})),e;}},{key:"is",value:function is(e){return"node"===e||"model:node"===e;}},{key:"_clone",value:function _clone(){return new Ys(this._attrs);}},{key:"_remove",value:function _remove(){this.parent._removeChildren(this.index);}},{key:"_setAttribute",value:function _setAttribute(e,t){this._attrs.set(e,t);}},{key:"_setAttributesTo",value:function _setAttributesTo(e){this._attrs=gn(e);}},{key:"_removeAttribute",value:function _removeAttribute(e){return this._attrs["delete"](e);}},{key:"_clearAttributes",value:function _clearAttributes(){this._attrs.clear();}}]);return Ys;}();var Gs=/*#__PURE__*/function(_Ys){_inherits(Gs,_Ys);var _super22=_createSuper(Gs);function Gs(e,t){var _this49;_classCallCheck(this,Gs);_this49=_super22.call(this,t),_this49._data=e||"";return _this49;}_createClass(Gs,[{key:"offsetSize",get:function get(){return this.data.length;}},{key:"data",get:function get(){return this._data;}},{key:"is",value:function is(e){return"$text"===e||"model:$text"===e||"text"===e||"model:text"===e||"node"===e||"model:node"===e;}},{key:"toJSON",value:function toJSON(){var e=_get(_getPrototypeOf(Gs.prototype),"toJSON",this).call(this);return e.data=this.data,e;}},{key:"_clone",value:function _clone(){return new Gs(this.data,this.getAttributes());}}],[{key:"fromJSON",value:function fromJSON(e){return new Gs(e.data,e.attributes);}}]);return Gs;}(Ys);var Ks=/*#__PURE__*/function(){function Ks(e,t,i){_classCallCheck(this,Ks);if(this.textNode=e,t<0||t>e.offsetSize)throw new c.a("model-textproxy-wrong-offsetintext",this);if(i<0||t+i>e.offsetSize)throw new c.a("model-textproxy-wrong-length",this);this.data=e.data.substring(t,t+i),this.offsetInText=t;}_createClass(Ks,[{key:"startOffset",get:function get(){return null!==this.textNode.startOffset?this.textNode.startOffset+this.offsetInText:null;}},{key:"offsetSize",get:function get(){return this.data.length;}},{key:"endOffset",get:function get(){return null!==this.startOffset?this.startOffset+this.offsetSize:null;}},{key:"isPartial",get:function get(){return this.offsetSize!==this.textNode.offsetSize;}},{key:"parent",get:function get(){return this.textNode.parent;}},{key:"root",get:function get(){return this.textNode.root;}},{key:"is",value:function is(e){return"$textProxy"===e||"model:$textProxy"===e||"textProxy"===e||"model:textProxy"===e;}},{key:"getPath",value:function getPath(){var e=this.textNode.getPath();return e.length>0&&(e[e.length-1]+=this.offsetInText),e;}},{key:"getAncestors",value:function getAncestors(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{includeSelf:!1,parentFirst:!1};var t=[];var i=e.includeSelf?this:this.parent;for(;i;){t[e.parentFirst?"push":"unshift"](i),i=i.parent;}return t;}},{key:"hasAttribute",value:function hasAttribute(e){return this.textNode.hasAttribute(e);}},{key:"getAttribute",value:function getAttribute(e){return this.textNode.getAttribute(e);}},{key:"getAttributes",value:function getAttributes(){return this.textNode.getAttributes();}},{key:"getAttributeKeys",value:function getAttributeKeys(){return this.textNode.getAttributeKeys();}}]);return Ks;}();var Qs=/*#__PURE__*/function(_Symbol$iterator6){function Qs(e){_classCallCheck(this,Qs);this._nodes=[],e&&this._insertNodes(0,e);}_createClass(Qs,[{key:_Symbol$iterator6,value:function value(){return this._nodes[Symbol.iterator]();}},{key:"length",get:function get(){return this._nodes.length;}},{key:"maxOffset",get:function get(){return this._nodes.reduce(function(e,t){return e+t.offsetSize;},0);}},{key:"getNode",value:function getNode(e){return this._nodes[e]||null;}},{key:"getNodeIndex",value:function getNodeIndex(e){var t=this._nodes.indexOf(e);return-1==t?null:t;}},{key:"getNodeStartOffset",value:function getNodeStartOffset(e){var t=this.getNodeIndex(e);return null===t?null:this._nodes.slice(0,t).reduce(function(e,t){return e+t.offsetSize;},0);}},{key:"indexToOffset",value:function indexToOffset(e){if(e==this._nodes.length)return this.maxOffset;var t=this._nodes[e];if(!t)throw new c.a("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(t);}},{key:"offsetToIndex",value:function offsetToIndex(e){var t=0;var _iterator102=_createForOfIteratorHelper(this._nodes),_step102;try{for(_iterator102.s();!(_step102=_iterator102.n()).done;){var _i91=_step102.value;if(e>=t&&e<t+_i91.offsetSize)return this.getNodeIndex(_i91);t+=_i91.offsetSize;}}catch(err){_iterator102.e(err);}finally{_iterator102.f();}if(t!=e)throw new c.a("model-nodelist-offset-out-of-bounds",this,{offset:e,nodeList:this});return this.length;}},{key:"_insertNodes",value:function _insertNodes(e,t){var _this$_nodes;var _iterator103=_createForOfIteratorHelper(t),_step103;try{for(_iterator103.s();!(_step103=_iterator103.n()).done;){var _e76=_step103.value;if(!(_e76 instanceof Ys))throw new c.a("model-nodelist-insertnodes-not-node",this);}}catch(err){_iterator103.e(err);}finally{_iterator103.f();}(_this$_nodes=this._nodes).splice.apply(_this$_nodes,[e,0].concat(_toConsumableArray(t)));}},{key:"_removeNodes",value:function _removeNodes(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;return this._nodes.splice(e,t);}},{key:"toJSON",value:function toJSON(){return this._nodes.map(function(e){return e.toJSON();});}}]);return Qs;}(Symbol.iterator);var Js=/*#__PURE__*/function(_Ys2){_inherits(Js,_Ys2);var _super23=_createSuper(Js);function Js(e,t,i){var _this50;_classCallCheck(this,Js);_this50=_super23.call(this,t),_this50.name=e,_this50._children=new Qs(),i&&_this50._insertChild(0,i);return _this50;}_createClass(Js,[{key:"childCount",get:function get(){return this._children.length;}},{key:"maxOffset",get:function get(){return this._children.maxOffset;}},{key:"isEmpty",get:function get(){return 0===this.childCount;}},{key:"is",value:function is(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return t?t===this.name&&("element"===e||"model:element"===e):"element"===e||"model:element"===e||"node"===e||"model:node"===e;}},{key:"getChild",value:function getChild(e){return this._children.getNode(e);}},{key:"getChildren",value:function getChildren(){return this._children[Symbol.iterator]();}},{key:"getChildIndex",value:function getChildIndex(e){return this._children.getNodeIndex(e);}},{key:"getChildStartOffset",value:function getChildStartOffset(e){return this._children.getNodeStartOffset(e);}},{key:"offsetToIndex",value:function offsetToIndex(e){return this._children.offsetToIndex(e);}},{key:"getNodeByPath",value:function getNodeByPath(e){var t=this;var _iterator104=_createForOfIteratorHelper(e),_step104;try{for(_iterator104.s();!(_step104=_iterator104.n()).done;){var _i92=_step104.value;t=t.getChild(t.offsetToIndex(_i92));}}catch(err){_iterator104.e(err);}finally{_iterator104.f();}return t;}},{key:"findAncestor",value:function findAncestor(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{includeSelf:!1};var i=t.includeSelf?this:this.parent;for(;i;){if(i.name===e)return i;i=i.parent;}return null;}},{key:"toJSON",value:function toJSON(){var e=_get(_getPrototypeOf(Js.prototype),"toJSON",this).call(this);if(e.name=this.name,this._children.length>0){e.children=[];var _iterator105=_createForOfIteratorHelper(this._children),_step105;try{for(_iterator105.s();!(_step105=_iterator105.n()).done;){var _t79=_step105.value;e.children.push(_t79.toJSON());}}catch(err){_iterator105.e(err);}finally{_iterator105.f();}}return e;}},{key:"_clone",value:function _clone(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:!1;var t=e?Array.from(this._children).map(function(e){return e._clone(!0);}):null;return new Js(this.name,this.getAttributes(),t);}},{key:"_appendChild",value:function _appendChild(e){this._insertChild(this.childCount,e);}},{key:"_insertChild",value:function _insertChild(e,t){var i=function(e){if("string"==typeof e)return[new Gs(e)];Ji(e)||(e=[e]);return Array.from(e).map(function(e){return"string"==typeof e?new Gs(e):e instanceof Ks?new Gs(e.data,e.getAttributes()):e;});}(t);var _iterator106=_createForOfIteratorHelper(i),_step106;try{for(_iterator106.s();!(_step106=_iterator106.n()).done;){var _e77=_step106.value;null!==_e77.parent&&_e77._remove(),_e77.parent=this;}}catch(err){_iterator106.e(err);}finally{_iterator106.f();}this._children._insertNodes(e,i);}},{key:"_removeChildren",value:function _removeChildren(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var i=this._children._removeNodes(e,t);var _iterator107=_createForOfIteratorHelper(i),_step107;try{for(_iterator107.s();!(_step107=_iterator107.n()).done;){var _e78=_step107.value;_e78.parent=null;}}catch(err){_iterator107.e(err);}finally{_iterator107.f();}return i;}}],[{key:"fromJSON",value:function fromJSON(e){var t=null;if(e.children){t=[];var _iterator108=_createForOfIteratorHelper(e.children),_step108;try{for(_iterator108.s();!(_step108=_iterator108.n()).done;){var _i93=_step108.value;_i93.name?t.push(Js.fromJSON(_i93)):t.push(Gs.fromJSON(_i93));}}catch(err){_iterator108.e(err);}finally{_iterator108.f();}}return new Js(e.name,e.attributes,t);}}]);return Js;}(Ys);var Zs=/*#__PURE__*/function(_Symbol$iterator7){function Zs(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,Zs);if(!e.boundaries&&!e.startPosition)throw new c.a("model-tree-walker-no-start-position",null);var t=e.direction||"forward";if("forward"!=t&&"backward"!=t)throw new c.a("model-tree-walker-unknown-direction",e,{direction:t});this.direction=t,this.boundaries=e.boundaries||null,e.startPosition?this.position=e.startPosition.clone():this.position=ea._createAt(this.boundaries["backward"==this.direction?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent;}_createClass(Zs,[{key:_Symbol$iterator7,value:function value(){return this;}},{key:"skip",value:function skip(e){var t,i,n,o;do{var _this$next2;n=this.position,o=this._visitedParent,(_this$next2=this.next(),t=_this$next2.done,i=_this$next2.value,_this$next2);}while(!t&&e(i));t||(this.position=n,this._visitedParent=o);}},{key:"next",value:function next(){return"forward"==this.direction?this._next():this._previous();}},{key:"_next",value:function _next(){var e=this.position,t=this.position.clone(),i=this._visitedParent;if(null===i.parent&&t.offset===i.maxOffset)return{done:!0};if(i===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0};var n=t.parent,o=ta(t,n),r=o||ia(t,n,o);if(r instanceof Js)return this.shallow?t.offset++:(t.path.push(0),this._visitedParent=r),this.position=t,Xs("elementStart",r,e,t,1);if(r instanceof Gs){var _n42;if(this.singleCharacters)_n42=1;else{var _e79=r.endOffset;this._boundaryEndParent==i&&this.boundaries.end.offset<_e79&&(_e79=this.boundaries.end.offset),_n42=_e79-t.offset;}var _o29=t.offset-r.startOffset,_s11=new Ks(r,_o29,_n42);return t.offset+=_n42,this.position=t,Xs("text",_s11,e,t,_n42);}return t.path.pop(),t.offset++,this.position=t,this._visitedParent=i.parent,this.ignoreElementEnd?this._next():Xs("elementEnd",i,e,t);}},{key:"_previous",value:function _previous(){var e=this.position,t=this.position.clone(),i=this._visitedParent;if(null===i.parent&&0===t.offset)return{done:!0};if(i==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0};var n=t.parent,o=ta(t,n),r=o||na(t,n,o);if(r instanceof Js)return t.offset--,this.shallow?(this.position=t,Xs("elementStart",r,e,t,1)):(t.path.push(r.maxOffset),this.position=t,this._visitedParent=r,this.ignoreElementEnd?this._previous():Xs("elementEnd",r,e,t));if(r instanceof Gs){var _n43;if(this.singleCharacters)_n43=1;else{var _e80=r.startOffset;this._boundaryStartParent==i&&this.boundaries.start.offset>_e80&&(_e80=this.boundaries.start.offset),_n43=t.offset-_e80;}var _o30=t.offset-r.startOffset,_s12=new Ks(r,_o30-_n43,_n43);return t.offset-=_n43,this.position=t,Xs("text",_s12,e,t,_n43);}return t.path.pop(),this.position=t,this._visitedParent=i.parent,Xs("elementStart",i,e,t,1);}}]);return Zs;}(Symbol.iterator);function Xs(e,t,i,n,o){return{done:!1,value:{type:e,item:t,previousPosition:i,nextPosition:n,length:o}};}var ea=/*#__PURE__*/function(){function ea(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"toNone";_classCallCheck(this,ea);if(!e.is("element")&&!e.is("documentFragment"))throw new c.a("model-position-root-invalid",e);if(!(t instanceof Array)||0===t.length)throw new c.a("model-position-path-incorrect-format",e,{path:t});e.is("rootElement")?t=t.slice():(t=[].concat(_toConsumableArray(e.getPath()),_toConsumableArray(t)),e=e.root),this.root=e,this.path=t,this.stickiness=i;}_createClass(ea,[{key:"offset",get:function get(){return this.path[this.path.length-1];},set:function set(e){this.path[this.path.length-1]=e;}},{key:"parent",get:function get(){var e=this.root;for(var _t80=0;_t80<this.path.length-1;_t80++){if(e=e.getChild(e.offsetToIndex(this.path[_t80])),!e)throw new c.a("model-position-path-incorrect",this,{position:this});}if(e.is("$text"))throw new c.a("model-position-path-incorrect",this,{position:this});return e;}},{key:"index",get:function get(){return this.parent.offsetToIndex(this.offset);}},{key:"textNode",get:function get(){return ta(this,this.parent);}},{key:"nodeAfter",get:function get(){var e=this.parent;return ia(this,e,ta(this,e));}},{key:"nodeBefore",get:function get(){var e=this.parent;return na(this,e,ta(this,e));}},{key:"isAtStart",get:function get(){return 0===this.offset;}},{key:"isAtEnd",get:function get(){return this.offset==this.parent.maxOffset;}},{key:"compareWith",value:function compareWith(e){if(this.root!=e.root)return"different";var t=cn(this.path,e.path);switch(t){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[t]<e.path[t]?"before":"after";}}},{key:"getLastMatchingPosition",value:function getLastMatchingPosition(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};t.startPosition=this;var i=new Zs(t);return i.skip(e),i.position;}},{key:"getParentPath",value:function getParentPath(){return this.path.slice(0,-1);}},{key:"getAncestors",value:function getAncestors(){var e=this.parent;return e.is("documentFragment")?[e]:e.getAncestors({includeSelf:!0});}},{key:"findAncestor",value:function findAncestor(e){var t=this.parent;return t.is("element")?t.findAncestor(e,{includeSelf:!0}):null;}},{key:"getCommonPath",value:function getCommonPath(e){if(this.root!=e.root)return[];var t=cn(this.path,e.path),i="string"==typeof t?Math.min(this.path.length,e.path.length):t;return this.path.slice(0,i);}},{key:"getCommonAncestor",value:function getCommonAncestor(e){var t=this.getAncestors(),i=e.getAncestors();var n=0;for(;t[n]==i[n]&&t[n];){n++;}return 0===n?null:t[n-1];}},{key:"getShiftedBy",value:function getShiftedBy(e){var t=this.clone(),i=t.offset+e;return t.offset=i<0?0:i,t;}},{key:"isAfter",value:function isAfter(e){return"after"==this.compareWith(e);}},{key:"isBefore",value:function isBefore(e){return"before"==this.compareWith(e);}},{key:"isEqual",value:function isEqual(e){return"same"==this.compareWith(e);}},{key:"isTouching",value:function isTouching(e){var t=null,i=null;switch(this.compareWith(e)){case"same":return!0;case"before":t=ea._createAt(this),i=ea._createAt(e);break;case"after":t=ea._createAt(e),i=ea._createAt(this);break;default:return!1;}var n=t.parent;for(;t.path.length+i.path.length;){if(t.isEqual(i))return!0;if(t.path.length>i.path.length){if(t.offset!==n.maxOffset)return!1;t.path=t.path.slice(0,-1),n=n.parent,t.offset++;}else{if(0!==i.offset)return!1;i.path=i.path.slice(0,-1);}}}},{key:"is",value:function is(e){return"position"===e||"model:position"===e;}},{key:"hasSameParentAs",value:function hasSameParentAs(e){if(this.root!==e.root)return!1;return"same"==cn(this.getParentPath(),e.getParentPath());}},{key:"getTransformedByOperation",value:function getTransformedByOperation(e){var t;switch(e.type){case"insert":t=this._getTransformedByInsertOperation(e);break;case"move":case"remove":case"reinsert":t=this._getTransformedByMoveOperation(e);break;case"split":t=this._getTransformedBySplitOperation(e);break;case"merge":t=this._getTransformedByMergeOperation(e);break;default:t=ea._createAt(this);}return t;}},{key:"_getTransformedByInsertOperation",value:function _getTransformedByInsertOperation(e){return this._getTransformedByInsertion(e.position,e.howMany);}},{key:"_getTransformedByMoveOperation",value:function _getTransformedByMoveOperation(e){return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany);}},{key:"_getTransformedBySplitOperation",value:function _getTransformedBySplitOperation(e){var t=e.movedRange;return t.containsPosition(this)||t.start.isEqual(this)&&"toNext"==this.stickiness?this._getCombined(e.splitPosition,e.moveTargetPosition):e.graveyardPosition?this._getTransformedByMove(e.graveyardPosition,e.insertionPosition,1):this._getTransformedByInsertion(e.insertionPosition,1);}},{key:"_getTransformedByMergeOperation",value:function _getTransformedByMergeOperation(e){var t=e.movedRange;var i;return t.containsPosition(this)||t.start.isEqual(this)?(i=this._getCombined(e.sourcePosition,e.targetPosition),e.sourcePosition.isBefore(e.targetPosition)&&(i=i._getTransformedByDeletion(e.deletionPosition,1))):i=this.isEqual(e.deletionPosition)?ea._createAt(e.deletionPosition):this._getTransformedByMove(e.deletionPosition,e.graveyardPosition,1),i;}},{key:"_getTransformedByDeletion",value:function _getTransformedByDeletion(e,t){var i=ea._createAt(this);if(this.root!=e.root)return i;if("same"==cn(e.getParentPath(),this.getParentPath())){if(e.offset<this.offset){if(e.offset+t>this.offset)return null;i.offset-=t;}}else if("prefix"==cn(e.getParentPath(),this.getParentPath())){var _n44=e.path.length-1;if(e.offset<=this.path[_n44]){if(e.offset+t>this.path[_n44])return null;i.path[_n44]-=t;}}return i;}},{key:"_getTransformedByInsertion",value:function _getTransformedByInsertion(e,t){var i=ea._createAt(this);if(this.root!=e.root)return i;if("same"==cn(e.getParentPath(),this.getParentPath()))(e.offset<this.offset||e.offset==this.offset&&"toPrevious"!=this.stickiness)&&(i.offset+=t);else if("prefix"==cn(e.getParentPath(),this.getParentPath())){var _n45=e.path.length-1;e.offset<=this.path[_n45]&&(i.path[_n45]+=t);}return i;}},{key:"_getTransformedByMove",value:function _getTransformedByMove(e,t,i){if(t=t._getTransformedByDeletion(e,i),e.isEqual(t))return ea._createAt(this);var n=this._getTransformedByDeletion(e,i);return null===n||e.isEqual(this)&&"toNext"==this.stickiness||e.getShiftedBy(i).isEqual(this)&&"toPrevious"==this.stickiness?this._getCombined(e,t):n._getTransformedByInsertion(t,i);}},{key:"_getCombined",value:function _getCombined(e,t){var i=e.path.length-1,n=ea._createAt(t);return n.stickiness=this.stickiness,n.offset=n.offset+this.path[i]-e.offset,n.path=[].concat(_toConsumableArray(n.path),_toConsumableArray(this.path.slice(i+1))),n;}},{key:"toJSON",value:function toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness};}},{key:"clone",value:function clone(){return new this.constructor(this.root,this.path,this.stickiness);}}],[{key:"_createAt",value:function _createAt(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"toNone";if(e instanceof ea)return new ea(e.root,e.path,e.stickiness);{var _n46=e;if("end"==t)t=_n46.maxOffset;else{if("before"==t)return this._createBefore(_n46,i);if("after"==t)return this._createAfter(_n46,i);if(0!==t&&!t)throw new c.a("model-createpositionat-offset-required",[this,e]);}if(!_n46.is("element")&&!_n46.is("documentFragment"))throw new c.a("model-position-parent-incorrect",[this,e]);var _o31=_n46.getPath();return _o31.push(t),new this(_n46.root,_o31,i);}}},{key:"_createAfter",value:function _createAfter(e,t){if(!e.parent)throw new c.a("model-position-after-root",[this,e],{root:e});return this._createAt(e.parent,e.endOffset,t);}},{key:"_createBefore",value:function _createBefore(e,t){if(!e.parent)throw new c.a("model-position-before-root",e,{root:e});return this._createAt(e.parent,e.startOffset,t);}},{key:"fromJSON",value:function fromJSON(e,t){if("$graveyard"===e.root){var _i94=new ea(t.graveyard,e.path);return _i94.stickiness=e.stickiness,_i94;}if(!t.getRoot(e.root))throw new c.a("model-position-fromjson-no-root",t,{rootName:e.root});return new ea(t.getRoot(e.root),e.path,e.stickiness);}}]);return ea;}();function ta(e,t){var i=t.getChild(t.offsetToIndex(e.offset));return i&&i.is("$text")&&i.startOffset<e.offset?i:null;}function ia(e,t,i){return null!==i?null:t.getChild(t.offsetToIndex(e.offset));}function na(e,t,i){return null!==i?null:t.getChild(t.offsetToIndex(e.offset)-1);}var oa=/*#__PURE__*/function(_Symbol$iterator8){function oa(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;_classCallCheck(this,oa);this.start=ea._createAt(e),this.end=t?ea._createAt(t):ea._createAt(e),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious";}_createClass(oa,[{key:_Symbol$iterator8,value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function value(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function value$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:return _context13.delegateYield(new Zs({boundaries:this,ignoreElementEnd:!0}),"t0",1);case 1:case"end":return _context13.stop();}}},value,this);})},{key:"isCollapsed",get:function get(){return this.start.isEqual(this.end);}},{key:"isFlat",get:function get(){return"same"==cn(this.start.getParentPath(),this.end.getParentPath());}},{key:"root",get:function get(){return this.start.root;}},{key:"containsPosition",value:function containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end);}},{key:"containsRange",value:function containsRange(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;e.isCollapsed&&(t=!1);var i=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),n=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return i&&n;}},{key:"containsItem",value:function containsItem(e){var t=ea._createBefore(e);return this.containsPosition(t)||this.start.isEqual(t);}},{key:"is",value:function is(e){return"range"===e||"model:range"===e;}},{key:"isEqual",value:function isEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end);}},{key:"isIntersecting",value:function isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start);}},{key:"getDifference",value:function getDifference(e){var t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new oa(this.start,e.start)),this.containsPosition(e.end)&&t.push(new oa(e.end,this.end))):t.push(new oa(this.start,this.end)),t;}},{key:"getIntersection",value:function getIntersection(e){if(this.isIntersecting(e)){var _t81=this.start,_i95=this.end;return this.containsPosition(e.start)&&(_t81=e.start),this.containsPosition(e.end)&&(_i95=e.end),new oa(_t81,_i95);}return null;}},{key:"getJoined",value:function getJoined(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;var i=this.isIntersecting(e);if(i||(i=this.start.isBefore(e.start)?t?this.end.isTouching(e.start):this.end.isEqual(e.start):t?e.end.isTouching(this.start):e.end.isEqual(this.start)),!i)return null;var n=this.start,o=this.end;return e.start.isBefore(n)&&(n=e.start),e.end.isAfter(o)&&(o=e.end),new oa(n,o);}},{key:"getMinimalFlatRanges",value:function getMinimalFlatRanges(){var e=[],t=this.start.getCommonPath(this.end).length,i=ea._createAt(this.start);var n=i.parent;for(;i.path.length>t+1;){var _t82=n.maxOffset-i.offset;0!==_t82&&e.push(new oa(i,i.getShiftedBy(_t82))),i.path=i.path.slice(0,-1),i.offset++,n=n.parent;}for(;i.path.length<=this.end.path.length;){var _t83=this.end.path[i.path.length-1],_n47=_t83-i.offset;0!==_n47&&e.push(new oa(i,i.getShiftedBy(_n47))),i.offset=_t83,i.path.push(0);}return e;}},{key:"getWalker",value:function getWalker(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return e.boundaries=this,new Zs(e);}},{key:"getItems",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getItems(){var e,t,_iterator109,_step109,_e81,_args14=arguments;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getItems$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:e=_args14.length>0&&_args14[0]!==undefined?_args14[0]:{};e.boundaries=this,e.ignoreElementEnd=!0;t=new Zs(e);_iterator109=_createForOfIteratorHelper(t);_context14.prev=4;_iterator109.s();case 6:if((_step109=_iterator109.n()).done){_context14.next=12;break;}_e81=_step109.value;_context14.next=10;return _e81.item;case 10:_context14.next=6;break;case 12:_context14.next=17;break;case 14:_context14.prev=14;_context14.t0=_context14["catch"](4);_iterator109.e(_context14.t0);case 17:_context14.prev=17;_iterator109.f();return _context14.finish(17);case 20:case"end":return _context14.stop();}}},getItems,this,[[4,14,17,20]]);})},{key:"getPositions",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getPositions(){var e,t,_iterator110,_step110,_e82,_args15=arguments;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getPositions$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:e=_args15.length>0&&_args15[0]!==undefined?_args15[0]:{};e.boundaries=this;t=new Zs(e);_context15.next=5;return t.position;case 5:_iterator110=_createForOfIteratorHelper(t);_context15.prev=6;_iterator110.s();case 8:if((_step110=_iterator110.n()).done){_context15.next=14;break;}_e82=_step110.value;_context15.next=12;return _e82.nextPosition;case 12:_context15.next=8;break;case 14:_context15.next=19;break;case 16:_context15.prev=16;_context15.t0=_context15["catch"](6);_iterator110.e(_context15.t0);case 19:_context15.prev=19;_iterator110.f();return _context15.finish(19);case 22:case"end":return _context15.stop();}}},getPositions,this,[[6,16,19,22]]);})},{key:"getTransformedByOperation",value:function getTransformedByOperation(e){switch(e.type){case"insert":return this._getTransformedByInsertOperation(e);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(e);case"split":return[this._getTransformedBySplitOperation(e)];case"merge":return[this._getTransformedByMergeOperation(e)];}return[new oa(this.start,this.end)];}},{key:"getTransformedByOperations",value:function getTransformedByOperations(e){var t=[new oa(this.start,this.end)];var _iterator111=_createForOfIteratorHelper(e),_step111;try{for(_iterator111.s();!(_step111=_iterator111.n()).done;){var _i97=_step111.value;for(var _e85=0;_e85<t.length;_e85++){var _n49=t[_e85].getTransformedByOperation(_i97);t.splice.apply(t,[_e85,1].concat(_toConsumableArray(_n49))),_e85+=_n49.length-1;}}}catch(err){_iterator111.e(err);}finally{_iterator111.f();}for(var _e83=0;_e83<t.length;_e83++){var _i96=t[_e83];for(var _n48=_e83+1;_n48<t.length;_n48++){var _e84=t[_n48];(_i96.containsRange(_e84)||_e84.containsRange(_i96)||_i96.isEqual(_e84))&&t.splice(_n48,1);}}return t;}},{key:"getCommonAncestor",value:function getCommonAncestor(){return this.start.getCommonAncestor(this.end);}},{key:"getContainedElement",value:function getContainedElement(){if(this.isCollapsed)return null;var e=this.start.nodeAfter,t=this.end.nodeBefore;return e&&e.is("element")&&e===t?e:null;}},{key:"toJSON",value:function toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()};}},{key:"clone",value:function clone(){return new this.constructor(this.start,this.end);}},{key:"_getTransformedByInsertOperation",value:function _getTransformedByInsertOperation(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;return this._getTransformedByInsertion(e.position,e.howMany,t);}},{key:"_getTransformedByMoveOperation",value:function _getTransformedByMoveOperation(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;var i=e.sourcePosition,n=e.howMany,o=e.targetPosition;return this._getTransformedByMove(i,o,n,t);}},{key:"_getTransformedBySplitOperation",value:function _getTransformedBySplitOperation(e){var t=this.start._getTransformedBySplitOperation(e);var i=this.end._getTransformedBySplitOperation(e);return this.end.isEqual(e.insertionPosition)&&(i=this.end.getShiftedBy(1)),t.root!=i.root&&(i=this.end.getShiftedBy(-1)),new oa(t,i);}},{key:"_getTransformedByMergeOperation",value:function _getTransformedByMergeOperation(e){if(this.start.isEqual(e.targetPosition)&&this.end.isEqual(e.deletionPosition))return new oa(this.start);var t=this.start._getTransformedByMergeOperation(e),i=this.end._getTransformedByMergeOperation(e);return t.root!=i.root&&(i=this.end.getShiftedBy(-1)),t.isAfter(i)?(e.sourcePosition.isBefore(e.targetPosition)?(t=ea._createAt(i),t.offset=0):(e.deletionPosition.isEqual(t)||(i=e.deletionPosition),t=e.targetPosition),new oa(t,i)):new oa(t,i);}},{key:"_getTransformedByInsertion",value:function _getTransformedByInsertion(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!1;if(i&&this.containsPosition(e))return[new oa(this.start,e),new oa(e.getShiftedBy(t),this.end._getTransformedByInsertion(e,t))];{var _i98=new oa(this.start,this.end);return _i98.start=_i98.start._getTransformedByInsertion(e,t),_i98.end=_i98.end._getTransformedByInsertion(e,t),[_i98];}}},{key:"_getTransformedByMove",value:function _getTransformedByMove(e,t,i){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:!1;if(this.isCollapsed){var _n50=this.start._getTransformedByMove(e,t,i);return[new oa(_n50)];}var o=oa._createFromPositionAndShift(e,i),r=t._getTransformedByDeletion(e,i);if(this.containsPosition(t)&&!n&&(o.containsPosition(this.start)||o.containsPosition(this.end))){var _n51=this.start._getTransformedByMove(e,t,i),_o32=this.end._getTransformedByMove(e,t,i);return[new oa(_n51,_o32)];}var s;var a=this.getDifference(o);var c=null;var l=this.getIntersection(o);if(1==a.length?c=new oa(a[0].start._getTransformedByDeletion(e,i),a[0].end._getTransformedByDeletion(e,i)):2==a.length&&(c=new oa(this.start,this.end._getTransformedByDeletion(e,i))),s=c?c._getTransformedByInsertion(r,i,null!==l||n):[],l){var _e86=new oa(l.start._getCombined(o.start,r),l.end._getCombined(o.start,r));2==s.length?s.splice(1,0,_e86):s.push(_e86);}return s;}},{key:"_getTransformedByDeletion",value:function _getTransformedByDeletion(e,t){var i=this.start._getTransformedByDeletion(e,t),n=this.end._getTransformedByDeletion(e,t);return null==i&&null==n?null:(null==i&&(i=e),null==n&&(n=e),new oa(i,n));}}],[{key:"_createFromPositionAndShift",value:function _createFromPositionAndShift(e,t){var i=e,n=e.getShiftedBy(t);return t>0?new this(i,n):new this(n,i);}},{key:"_createIn",value:function _createIn(e){return new this(ea._createAt(e,0),ea._createAt(e,e.maxOffset));}},{key:"_createOn",value:function _createOn(e){return this._createFromPositionAndShift(ea._createBefore(e),e.offsetSize);}},{key:"_createFromRanges",value:function _createFromRanges(e){if(0===e.length)throw new c.a("range-create-from-ranges-empty-array",null);if(1==e.length)return e[0].clone();var t=e[0];e.sort(function(e,t){return e.start.isAfter(t.start)?1:-1;});var i=e.indexOf(t),n=new this(t.start,t.end);if(i>0)for(var _t84=i-1;e[_t84].end.isEqual(n.start);_t84++){n.start=ea._createAt(e[_t84].start);}for(var _t85=i+1;_t85<e.length&&e[_t85].start.isEqual(n.end);_t85++){n.end=ea._createAt(e[_t85].end);}return n;}},{key:"fromJSON",value:function fromJSON(e,t){return new this(ea.fromJSON(e.start,t),ea.fromJSON(e.end,t));}}]);return oa;}(Symbol.iterator);var ra=/*#__PURE__*/function(){function ra(){var _this51=this;_classCallCheck(this,ra);this._modelToViewMapping=new WeakMap(),this._viewToModelMapping=new WeakMap(),this._viewToModelLengthCallbacks=new Map(),this._markerNameToElements=new Map(),this._elementToMarkerNames=new Map(),this._unboundMarkerNames=new Set(),this.on("modelToViewPosition",function(e,t){if(t.viewPosition)return;var i=_this51._modelToViewMapping.get(t.modelPosition.parent);t.viewPosition=_this51.findPositionIn(i,t.modelPosition.offset);},{priority:"low"}),this.on("viewToModelPosition",function(e,t){if(t.modelPosition)return;var i=_this51.findMappedViewAncestor(t.viewPosition),n=_this51._viewToModelMapping.get(i),o=_this51._toModelOffset(t.viewPosition.parent,t.viewPosition.offset,i);t.modelPosition=ea._createAt(n,o);},{priority:"low"});}_createClass(ra,[{key:"bindElements",value:function bindElements(e,t){this._modelToViewMapping.set(e,t),this._viewToModelMapping.set(t,e);}},{key:"unbindViewElement",value:function unbindViewElement(e){var t=this.toModelElement(e);if(this._viewToModelMapping["delete"](e),this._elementToMarkerNames.has(e)){var _iterator112=_createForOfIteratorHelper(this._elementToMarkerNames.get(e)),_step112;try{for(_iterator112.s();!(_step112=_iterator112.n()).done;){var _t86=_step112.value;this._unboundMarkerNames.add(_t86);}}catch(err){_iterator112.e(err);}finally{_iterator112.f();}}this._modelToViewMapping.get(t)==e&&this._modelToViewMapping["delete"](t);}},{key:"unbindModelElement",value:function unbindModelElement(e){var t=this.toViewElement(e);this._modelToViewMapping["delete"](e),this._viewToModelMapping.get(t)==e&&this._viewToModelMapping["delete"](t);}},{key:"bindElementToMarker",value:function bindElementToMarker(e,t){var i=this._markerNameToElements.get(t)||new Set();i.add(e);var n=this._elementToMarkerNames.get(e)||new Set();n.add(t),this._markerNameToElements.set(t,i),this._elementToMarkerNames.set(e,n);}},{key:"unbindElementFromMarkerName",value:function unbindElementFromMarkerName(e,t){var i=this._markerNameToElements.get(t);i&&(i["delete"](e),0==i.size&&this._markerNameToElements["delete"](t));var n=this._elementToMarkerNames.get(e);n&&(n["delete"](t),0==n.size&&this._elementToMarkerNames["delete"](e));}},{key:"flushUnboundMarkerNames",value:function flushUnboundMarkerNames(){var e=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),e;}},{key:"clearBindings",value:function clearBindings(){this._modelToViewMapping=new WeakMap(),this._viewToModelMapping=new WeakMap(),this._markerNameToElements=new Map(),this._elementToMarkerNames=new Map(),this._unboundMarkerNames=new Set();}},{key:"toModelElement",value:function toModelElement(e){return this._viewToModelMapping.get(e);}},{key:"toViewElement",value:function toViewElement(e){return this._modelToViewMapping.get(e);}},{key:"toModelRange",value:function toModelRange(e){return new oa(this.toModelPosition(e.start),this.toModelPosition(e.end));}},{key:"toViewRange",value:function toViewRange(e){return new lo(this.toViewPosition(e.start),this.toViewPosition(e.end));}},{key:"toModelPosition",value:function toModelPosition(e){var t={viewPosition:e,mapper:this};return this.fire("viewToModelPosition",t),t.modelPosition;}},{key:"toViewPosition",value:function toViewPosition(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{isPhantom:!1};var i={modelPosition:e,mapper:this,isPhantom:t.isPhantom};return this.fire("modelToViewPosition",i),i.viewPosition;}},{key:"markerNameToElements",value:function markerNameToElements(e){var t=this._markerNameToElements.get(e);if(!t)return null;var i=new Set();var _iterator113=_createForOfIteratorHelper(t),_step113;try{for(_iterator113.s();!(_step113=_iterator113.n()).done;){var _e87=_step113.value;if(_e87.is("attributeElement")){var _iterator114=_createForOfIteratorHelper(_e87.getElementsWithSameId()),_step114;try{for(_iterator114.s();!(_step114=_iterator114.n()).done;){var _t87=_step114.value;i.add(_t87);}}catch(err){_iterator114.e(err);}finally{_iterator114.f();}}else i.add(_e87);}}catch(err){_iterator113.e(err);}finally{_iterator113.f();}return i;}},{key:"registerViewToModelLength",value:function registerViewToModelLength(e,t){this._viewToModelLengthCallbacks.set(e,t);}},{key:"findMappedViewAncestor",value:function findMappedViewAncestor(e){var t=e.parent;for(;!this._viewToModelMapping.has(t);){t=t.parent;}return t;}},{key:"_toModelOffset",value:function _toModelOffset(e,t,i){if(i!=e){return this._toModelOffset(e.parent,e.index,i)+this._toModelOffset(e,t,e);}if(e.is("$text"))return t;var n=0;for(var _i99=0;_i99<t;_i99++){n+=this.getModelLength(e.getChild(_i99));}return n;}},{key:"getModelLength",value:function getModelLength(e){if(this._viewToModelLengthCallbacks.get(e.name)){return this._viewToModelLengthCallbacks.get(e.name)(e);}if(this._viewToModelMapping.has(e))return 1;if(e.is("$text"))return e.data.length;if(e.is("uiElement"))return 0;{var _t88=0;var _iterator115=_createForOfIteratorHelper(e.getChildren()),_step115;try{for(_iterator115.s();!(_step115=_iterator115.n()).done;){var _i100=_step115.value;_t88+=this.getModelLength(_i100);}}catch(err){_iterator115.e(err);}finally{_iterator115.f();}return _t88;}}},{key:"findPositionIn",value:function findPositionIn(e,t){var i,n=0,o=0,r=0;if(e.is("$text"))return new co(e,t);for(;o<t;){i=e.getChild(r),n=this.getModelLength(i),o+=n,r++;}return o==t?this._moveViewPositionToTextNode(new co(e,r)):this.findPositionIn(i,t-(o-n));}},{key:"_moveViewPositionToTextNode",value:function _moveViewPositionToTextNode(e){var t=e.nodeBefore,i=e.nodeAfter;return t instanceof hn?new co(t,t.data.length):i instanceof hn?new co(i,0):e;}}]);return ra;}();Ke(ra,h);var sa=/*#__PURE__*/function(){function sa(){_classCallCheck(this,sa);this._consumable=new Map(),this._textProxyRegistry=new Map();}_createClass(sa,[{key:"add",value:function add(e,t){t=aa(t),e instanceof Ks&&(e=this._getSymbolForTextProxy(e)),this._consumable.has(e)||this._consumable.set(e,new Map()),this._consumable.get(e).set(t,!0);}},{key:"consume",value:function consume(e,t){return t=aa(t),e instanceof Ks&&(e=this._getSymbolForTextProxy(e)),!!this.test(e,t)&&(this._consumable.get(e).set(t,!1),!0);}},{key:"test",value:function test(e,t){t=aa(t),e instanceof Ks&&(e=this._getSymbolForTextProxy(e));var i=this._consumable.get(e);if(void 0===i)return null;var n=i.get(t);return void 0===n?null:n;}},{key:"revert",value:function revert(e,t){t=aa(t),e instanceof Ks&&(e=this._getSymbolForTextProxy(e));var i=this.test(e,t);return!1===i?(this._consumable.get(e).set(t,!0),!0):!0!==i&&null;}},{key:"_getSymbolForTextProxy",value:function _getSymbolForTextProxy(e){var t=null;var i=this._textProxyRegistry.get(e.startOffset);if(i){var _n52=i.get(e.endOffset);_n52&&(t=_n52.get(e.parent));}return t||(t=this._addSymbolForTextProxy(e.startOffset,e.endOffset,e.parent)),t;}},{key:"_addSymbolForTextProxy",value:function _addSymbolForTextProxy(e,t,i){var n=Symbol("textProxySymbol");var o,r;return o=this._textProxyRegistry.get(e),o||(o=new Map(),this._textProxyRegistry.set(e,o)),r=o.get(t),r||(r=new Map(),o.set(t,r)),r.set(i,n),n;}}]);return sa;}();function aa(e){var t=e.split(":");return"addMarker"==t[0]||"removeMarker"==t[0]?e:t.length>1?t[0]+":"+t[1]:t[0];}var ca=/*#__PURE__*/function(){function ca(e){_classCallCheck(this,ca);this.conversionApi=Object.assign({dispatcher:this},e),this._reconversionEventsMapping=new Map();}_createClass(ca,[{key:"convertChanges",value:function convertChanges(e,t,i){var _iterator116=_createForOfIteratorHelper(e.getMarkersToRemove()),_step116;try{for(_iterator116.s();!(_step116=_iterator116.n()).done;){var _t89=_step116.value;this.convertMarkerRemove(_t89.name,_t89.range,i);}}catch(err){_iterator116.e(err);}finally{_iterator116.f();}var n=this._mapChangesWithAutomaticReconversion(e);var _iterator117=_createForOfIteratorHelper(n),_step117;try{for(_iterator117.s();!(_step117=_iterator117.n()).done;){var _e88=_step117.value;"insert"===_e88.type?this.convertInsert(oa._createFromPositionAndShift(_e88.position,_e88.length),i):"remove"===_e88.type?this.convertRemove(_e88.position,_e88.length,_e88.name,i):"reconvert"===_e88.type?this.reconvertElement(_e88.element,i):this.convertAttribute(_e88.range,_e88.attributeKey,_e88.attributeOldValue,_e88.attributeNewValue,i);}}catch(err){_iterator117.e(err);}finally{_iterator117.f();}var _iterator118=_createForOfIteratorHelper(this.conversionApi.mapper.flushUnboundMarkerNames()),_step118;try{for(_iterator118.s();!(_step118=_iterator118.n()).done;){var _e89=_step118.value;var _n53=t.get(_e89).getRange();this.convertMarkerRemove(_e89,_n53,i),this.convertMarkerAdd(_e89,_n53,i);}}catch(err){_iterator118.e(err);}finally{_iterator118.f();}var _iterator119=_createForOfIteratorHelper(e.getMarkersToAdd()),_step119;try{for(_iterator119.s();!(_step119=_iterator119.n()).done;){var _t90=_step119.value;this.convertMarkerAdd(_t90.name,_t90.range,i);}}catch(err){_iterator119.e(err);}finally{_iterator119.f();}}},{key:"convertInsert",value:function convertInsert(e,t){this.conversionApi.writer=t,this.conversionApi.consumable=this._createInsertConsumable(e);var _iterator120=_createForOfIteratorHelper(Array.from(e).map(da)),_step120;try{for(_iterator120.s();!(_step120=_iterator120.n()).done;){var _t91=_step120.value;this._convertInsertWithAttributes(_t91);}}catch(err){_iterator120.e(err);}finally{_iterator120.f();}this._clearConversionApi();}},{key:"convertRemove",value:function convertRemove(e,t,i,n){this.conversionApi.writer=n,this.fire("remove:"+i,{position:e,length:t},this.conversionApi),this._clearConversionApi();}},{key:"convertAttribute",value:function convertAttribute(e,t,i,n,o){this.conversionApi.writer=o,this.conversionApi.consumable=this._createConsumableForRange(e,"attribute:"+t);var _iterator121=_createForOfIteratorHelper(e),_step121;try{for(_iterator121.s();!(_step121=_iterator121.n()).done;){var _o33=_step121.value;var _e90={item:_o33.item,range:oa._createFromPositionAndShift(_o33.previousPosition,_o33.length),attributeKey:t,attributeOldValue:i,attributeNewValue:n};this._testAndFire("attribute:"+t,_e90);}}catch(err){_iterator121.e(err);}finally{_iterator121.f();}this._clearConversionApi();}},{key:"reconvertElement",value:function reconvertElement(e,t){var i=oa._createOn(e);this.conversionApi.writer=t,this.conversionApi.consumable=this._createInsertConsumable(i);var n=this.conversionApi.mapper,o=n.toViewElement(e);t.remove(o),this._convertInsertWithAttributes({item:e,range:i});var r=n.toViewElement(e);var _iterator122=_createForOfIteratorHelper(oa._createIn(e)),_step122;try{for(_iterator122.s();!(_step122=_iterator122.n()).done;){var _i101=_step122.value;var _e91=_i101.item,_o34=ha(_e91,n);_o34?_o34.root!==r.root&&t.move(t.createRangeOn(_o34),n.toViewPosition(ea._createBefore(_e91))):this._convertInsertWithAttributes(da(_i101));}}catch(err){_iterator122.e(err);}finally{_iterator122.f();}n.unbindViewElement(o),this._clearConversionApi();}},{key:"convertSelection",value:function convertSelection(e,t,i){var n=Array.from(t.getMarkersAtPosition(e.getFirstPosition()));if(this.conversionApi.writer=i,this.conversionApi.consumable=this._createSelectionConsumable(e,n),this.fire("selection",{selection:e},this.conversionApi),e.isCollapsed){var _iterator123=_createForOfIteratorHelper(n),_step123;try{for(_iterator123.s();!(_step123=_iterator123.n()).done;){var _t92=_step123.value;var _i102=_t92.getRange();if(!la(e.getFirstPosition(),_t92,this.conversionApi.mapper))continue;var _n54={item:e,markerName:_t92.name,markerRange:_i102};this.conversionApi.consumable.test(e,"addMarker:"+_t92.name)&&this.fire("addMarker:"+_t92.name,_n54,this.conversionApi);}}catch(err){_iterator123.e(err);}finally{_iterator123.f();}var _iterator124=_createForOfIteratorHelper(e.getAttributeKeys()),_step124;try{for(_iterator124.s();!(_step124=_iterator124.n()).done;){var _t93=_step124.value;var _i103={item:e,range:e.getFirstRange(),attributeKey:_t93,attributeOldValue:null,attributeNewValue:e.getAttribute(_t93)};this.conversionApi.consumable.test(e,"attribute:"+_i103.attributeKey)&&this.fire("attribute:"+_i103.attributeKey+":$text",_i103,this.conversionApi);}}catch(err){_iterator124.e(err);}finally{_iterator124.f();}this._clearConversionApi();}else this._clearConversionApi();}},{key:"convertMarkerAdd",value:function convertMarkerAdd(e,t,i){if("$graveyard"==t.root.rootName)return;this.conversionApi.writer=i;var n="addMarker:"+e,o=new sa();if(o.add(t,n),this.conversionApi.consumable=o,this.fire(n,{markerName:e,markerRange:t},this.conversionApi),o.test(t,n)){this.conversionApi.consumable=this._createConsumableForRange(t,n);var _iterator125=_createForOfIteratorHelper(t.getItems()),_step125;try{for(_iterator125.s();!(_step125=_iterator125.n()).done;){var _i104=_step125.value;if(!this.conversionApi.consumable.test(_i104,n))continue;var _o35={item:_i104,range:oa._createOn(_i104),markerName:e,markerRange:t};this.fire(n,_o35,this.conversionApi);}}catch(err){_iterator125.e(err);}finally{_iterator125.f();}this._clearConversionApi();}else this._clearConversionApi();}},{key:"convertMarkerRemove",value:function convertMarkerRemove(e,t,i){"$graveyard"!=t.root.rootName&&(this.conversionApi.writer=i,this.fire("removeMarker:"+e,{markerName:e,markerRange:t},this.conversionApi),this._clearConversionApi());}},{key:"_mapReconversionTriggerEvent",value:function _mapReconversionTriggerEvent(e,t){this._reconversionEventsMapping.set(t,e);}},{key:"_createInsertConsumable",value:function _createInsertConsumable(e){var t=new sa();var _iterator126=_createForOfIteratorHelper(e),_step126;try{for(_iterator126.s();!(_step126=_iterator126.n()).done;){var _i105=_step126.value;var _e92=_i105.item;t.add(_e92,"insert");var _iterator127=_createForOfIteratorHelper(_e92.getAttributeKeys()),_step127;try{for(_iterator127.s();!(_step127=_iterator127.n()).done;){var _i106=_step127.value;t.add(_e92,"attribute:"+_i106);}}catch(err){_iterator127.e(err);}finally{_iterator127.f();}}}catch(err){_iterator126.e(err);}finally{_iterator126.f();}return t;}},{key:"_createConsumableForRange",value:function _createConsumableForRange(e,t){var i=new sa();var _iterator128=_createForOfIteratorHelper(e.getItems()),_step128;try{for(_iterator128.s();!(_step128=_iterator128.n()).done;){var _n55=_step128.value;i.add(_n55,t);}}catch(err){_iterator128.e(err);}finally{_iterator128.f();}return i;}},{key:"_createSelectionConsumable",value:function _createSelectionConsumable(e,t){var i=new sa();i.add(e,"selection");var _iterator129=_createForOfIteratorHelper(t),_step129;try{for(_iterator129.s();!(_step129=_iterator129.n()).done;){var _n56=_step129.value;i.add(e,"addMarker:"+_n56.name);}}catch(err){_iterator129.e(err);}finally{_iterator129.f();}var _iterator130=_createForOfIteratorHelper(e.getAttributeKeys()),_step130;try{for(_iterator130.s();!(_step130=_iterator130.n()).done;){var _t94=_step130.value;i.add(e,"attribute:"+_t94);}}catch(err){_iterator130.e(err);}finally{_iterator130.f();}return i;}},{key:"_testAndFire",value:function _testAndFire(e,t){this.conversionApi.consumable.test(t.item,e)&&this.fire(function(e,t){var i=t.item.name||"$text";return"".concat(e,":").concat(i);}(e,t),t,this.conversionApi);}},{key:"_clearConversionApi",value:function _clearConversionApi(){delete this.conversionApi.writer,delete this.conversionApi.consumable;}},{key:"_convertInsertWithAttributes",value:function _convertInsertWithAttributes(e){this._testAndFire("insert",e);var _iterator131=_createForOfIteratorHelper(e.item.getAttributeKeys()),_step131;try{for(_iterator131.s();!(_step131=_iterator131.n()).done;){var _t95=_step131.value;e.attributeKey=_t95,e.attributeOldValue=null,e.attributeNewValue=e.item.getAttribute(_t95),this._testAndFire("attribute:"+_t95,e);}}catch(err){_iterator131.e(err);}finally{_iterator131.f();}}},{key:"_mapChangesWithAutomaticReconversion",value:function _mapChangesWithAutomaticReconversion(e){var t=new Set(),i=[];var _iterator132=_createForOfIteratorHelper(e.getChanges()),_step132;try{for(_iterator132.s();!(_step132=_iterator132.n()).done;){var _n57=_step132.value;var _e93=_n57.position||_n57.range.start,_o36=_e93.parent;if(ta(_e93,_o36)){i.push(_n57);continue;}var _r18="attribute"===_n57.type?ia(_e93,_o36,null):_o36;if(_r18.is("$text")){i.push(_n57);continue;}var _s13=void 0;if(_s13="attribute"===_n57.type?"attribute:".concat(_n57.attributeKey,":").concat(_r18.name):"".concat(_n57.type,":").concat(_n57.name),this._isReconvertTriggerEvent(_s13,_r18.name)){if(t.has(_r18))continue;t.add(_r18),i.push({type:"reconvert",element:_r18});}else i.push(_n57);}}catch(err){_iterator132.e(err);}finally{_iterator132.f();}return i;}},{key:"_isReconvertTriggerEvent",value:function _isReconvertTriggerEvent(e,t){return this._reconversionEventsMapping.get(e)===t;}}]);return ca;}();function la(e,t,i){var n=t.getRange(),o=Array.from(e.getAncestors());o.shift(),o.reverse();return!o.some(function(e){if(n.containsItem(e)){return!!i.toViewElement(e).getCustomProperty("addHighlight");}});}function da(e){return{item:e.item,range:oa._createFromPositionAndShift(e.previousPosition,e.length)};}function ha(e,t){if(e.is("textProxy")){var _i107=t.toViewPosition(ea._createBefore(e)).parent;return _i107.is("$text")?_i107:null;}return t.toViewElement(e);}Ke(ca,h);var ua=/*#__PURE__*/function(){function ua(e,t,i){_classCallCheck(this,ua);this._lastRangeBackward=!1,this._ranges=[],this._attrs=new Map(),e&&this.setTo(e,t,i);}_createClass(ua,[{key:"anchor",get:function get(){if(this._ranges.length>0){var _e94=this._ranges[this._ranges.length-1];return this._lastRangeBackward?_e94.end:_e94.start;}return null;}},{key:"focus",get:function get(){if(this._ranges.length>0){var _e95=this._ranges[this._ranges.length-1];return this._lastRangeBackward?_e95.start:_e95.end;}return null;}},{key:"isCollapsed",get:function get(){return 1===this._ranges.length&&this._ranges[0].isCollapsed;}},{key:"rangeCount",get:function get(){return this._ranges.length;}},{key:"isBackward",get:function get(){return!this.isCollapsed&&this._lastRangeBackward;}},{key:"isEqual",value:function isEqual(e){if(this.rangeCount!=e.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;var _iterator133=_createForOfIteratorHelper(this._ranges),_step133;try{for(_iterator133.s();!(_step133=_iterator133.n()).done;){var _t96=_step133.value;var _i108=!1;var _iterator134=_createForOfIteratorHelper(e._ranges),_step134;try{for(_iterator134.s();!(_step134=_iterator134.n()).done;){var _n58=_step134.value;if(_t96.isEqual(_n58)){_i108=!0;break;}}}catch(err){_iterator134.e(err);}finally{_iterator134.f();}if(!_i108)return!1;}}catch(err){_iterator133.e(err);}finally{_iterator133.f();}return!0;}},{key:"getRanges",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getRanges(){var _iterator135,_step135,_e96;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getRanges$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:_iterator135=_createForOfIteratorHelper(this._ranges);_context16.prev=1;_iterator135.s();case 3:if((_step135=_iterator135.n()).done){_context16.next=9;break;}_e96=_step135.value;_context16.next=7;return new oa(_e96.start,_e96.end);case 7:_context16.next=3;break;case 9:_context16.next=14;break;case 11:_context16.prev=11;_context16.t0=_context16["catch"](1);_iterator135.e(_context16.t0);case 14:_context16.prev=14;_iterator135.f();return _context16.finish(14);case 17:case"end":return _context16.stop();}}},getRanges,this,[[1,11,14,17]]);})},{key:"getFirstRange",value:function getFirstRange(){var e=null;var _iterator136=_createForOfIteratorHelper(this._ranges),_step136;try{for(_iterator136.s();!(_step136=_iterator136.n()).done;){var _t97=_step136.value;e&&!_t97.start.isBefore(e.start)||(e=_t97);}}catch(err){_iterator136.e(err);}finally{_iterator136.f();}return e?new oa(e.start,e.end):null;}},{key:"getLastRange",value:function getLastRange(){var e=null;var _iterator137=_createForOfIteratorHelper(this._ranges),_step137;try{for(_iterator137.s();!(_step137=_iterator137.n()).done;){var _t98=_step137.value;e&&!_t98.end.isAfter(e.end)||(e=_t98);}}catch(err){_iterator137.e(err);}finally{_iterator137.f();}return e?new oa(e.start,e.end):null;}},{key:"getFirstPosition",value:function getFirstPosition(){var e=this.getFirstRange();return e?e.start.clone():null;}},{key:"getLastPosition",value:function getLastPosition(){var e=this.getLastRange();return e?e.end.clone():null;}},{key:"setTo",value:function setTo(e,t,i){if(null===e)this._setRanges([]);else if(e instanceof ua)this._setRanges(e.getRanges(),e.isBackward);else if(e&&"function"==typeof e.getRanges)this._setRanges(e.getRanges(),e.isBackward);else if(e instanceof oa)this._setRanges([e],!!t&&!!t.backward);else if(e instanceof ea)this._setRanges([new oa(e)]);else if(e instanceof Ys){var _n59=!!i&&!!i.backward;var _o37;if("in"==t)_o37=oa._createIn(e);else if("on"==t)_o37=oa._createOn(e);else{if(void 0===t)throw new c.a("model-selection-setto-required-second-parameter",[this,e]);_o37=new oa(ea._createAt(e,t));}this._setRanges([_o37],_n59);}else{if(!Ji(e))throw new c.a("model-selection-setto-not-selectable",[this,e]);this._setRanges(e,t&&!!t.backward);}}},{key:"_setRanges",value:function _setRanges(e){var _this52=this;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;var i=(e=Array.from(e)).some(function(t){if(!(t instanceof oa))throw new c.a("model-selection-set-ranges-not-range",[_this52,e]);return _this52._ranges.every(function(e){return!e.isEqual(t);});});if(e.length!==this._ranges.length||i){this._removeAllRanges();var _iterator138=_createForOfIteratorHelper(e),_step138;try{for(_iterator138.s();!(_step138=_iterator138.n()).done;){var _t99=_step138.value;this._pushRange(_t99);}}catch(err){_iterator138.e(err);}finally{_iterator138.f();}this._lastRangeBackward=!!t,this.fire("change:range",{directChange:!0});}}},{key:"setFocus",value:function setFocus(e,t){if(null===this.anchor)throw new c.a("model-selection-setfocus-no-ranges",[this,e]);var i=ea._createAt(e,t);if("same"==i.compareWith(this.focus))return;var n=this.anchor;this._ranges.length&&this._popRange(),"before"==i.compareWith(n)?(this._pushRange(new oa(i,n)),this._lastRangeBackward=!0):(this._pushRange(new oa(n,i)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0});}},{key:"getAttribute",value:function getAttribute(e){return this._attrs.get(e);}},{key:"getAttributes",value:function getAttributes(){return this._attrs.entries();}},{key:"getAttributeKeys",value:function getAttributeKeys(){return this._attrs.keys();}},{key:"hasAttribute",value:function hasAttribute(e){return this._attrs.has(e);}},{key:"removeAttribute",value:function removeAttribute(e){this.hasAttribute(e)&&(this._attrs["delete"](e),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}));}},{key:"setAttribute",value:function setAttribute(e,t){this.getAttribute(e)!==t&&(this._attrs.set(e,t),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}));}},{key:"getSelectedElement",value:function getSelectedElement(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement();}},{key:"is",value:function is(e){return"selection"===e||"model:selection"===e;}},{key:"getSelectedBlocks",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getSelectedBlocks(){var e,_iterator139,_step139,_t100,_i109,_iterator140,_step140,_i110,_n61,_n60;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getSelectedBlocks$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:e=new WeakSet();_iterator139=_createForOfIteratorHelper(this.getRanges());_context17.prev=2;_iterator139.s();case 4:if((_step139=_iterator139.n()).done){_context17.next=38;break;}_t100=_step139.value;_i109=fa(_t100.start,e);_context17.t0=_i109&&pa(_i109,_t100);if(!_context17.t0){_context17.next=11;break;}_context17.next=11;return _i109;case 11:_iterator140=_createForOfIteratorHelper(_t100.getWalker());_context17.prev=12;_iterator140.s();case 14:if((_step140=_iterator140.n()).done){_context17.next=23;break;}_i110=_step140.value;_n61=_i110.item;_context17.t1="elementEnd"==_i110.type&&ma(_n61,e,_t100);if(!_context17.t1){_context17.next=21;break;}_context17.next=21;return _n61;case 21:_context17.next=14;break;case 23:_context17.next=28;break;case 25:_context17.prev=25;_context17.t2=_context17["catch"](12);_iterator140.e(_context17.t2);case 28:_context17.prev=28;_iterator140.f();return _context17.finish(28);case 31:_n60=fa(_t100.end,e);_context17.t3=_n60&&!_t100.end.isTouching(ea._createAt(_n60,0))&&pa(_n60,_t100);if(!_context17.t3){_context17.next=36;break;}_context17.next=36;return _n60;case 36:_context17.next=4;break;case 38:_context17.next=43;break;case 40:_context17.prev=40;_context17.t4=_context17["catch"](2);_iterator139.e(_context17.t4);case 43:_context17.prev=43;_iterator139.f();return _context17.finish(43);case 46:case"end":return _context17.stop();}}},getSelectedBlocks,this,[[2,40,43,46],[12,25,28,31]]);})},{key:"containsEntireContent",value:function containsEntireContent(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.anchor.root;var t=ea._createAt(e,0),i=ea._createAt(e,"end");return t.isTouching(this.getFirstPosition())&&i.isTouching(this.getLastPosition());}},{key:"_pushRange",value:function _pushRange(e){this._checkRange(e),this._ranges.push(new oa(e.start,e.end));}},{key:"_checkRange",value:function _checkRange(e){for(var _t101=0;_t101<this._ranges.length;_t101++){if(e.isIntersecting(this._ranges[_t101]))throw new c.a("model-selection-range-intersects",[this,e],{addedRange:e,intersectingRange:this._ranges[_t101]});}}},{key:"_removeAllRanges",value:function _removeAllRanges(){for(;this._ranges.length>0;){this._popRange();}}},{key:"_popRange",value:function _popRange(){this._ranges.pop();}}]);return ua;}();function ga(e,t){return!t.has(e)&&(t.add(e),e.root.document.model.schema.isBlock(e)&&e.parent);}function ma(e,t,i){return ga(e,t)&&pa(e,i);}function fa(e,t){var i=e.parent.root.document.model.schema,n=e.parent.getAncestors({parentFirst:!0,includeSelf:!0});var o=!1;var r=n.find(function(e){return!o&&(o=i.isLimit(e),!o&&ga(e,t));});return n.forEach(function(e){return t.add(e);}),r;}function pa(e,t){var i=function(e){var t=e.root.document.model.schema;var i=e.parent;for(;i;){if(t.isBlock(i))return i;i=i.parent;}}(e);if(!i)return!0;return!t.containsRange(oa._createOn(i),!0);}Ke(ua,h);var ba=/*#__PURE__*/function(_oa){_inherits(ba,_oa);var _super24=_createSuper(ba);function ba(e,t){var _this53;_classCallCheck(this,ba);_this53=_super24.call(this,e,t),wa.call(_assertThisInitialized(_this53));return _this53;}_createClass(ba,[{key:"detach",value:function detach(){this.stopListening();}},{key:"is",value:function is(e){return"liveRange"===e||"model:liveRange"===e||"range"==e||"model:range"===e;}},{key:"toRange",value:function toRange(){return new oa(this.start,this.end);}}],[{key:"fromRange",value:function fromRange(e){return new ba(e.start,e.end);}}]);return ba;}(oa);function wa(){var _this54=this;this.listenTo(this.root.document.model,"applyOperation",function(e,t){var i=t[0];i.isDocumentOperation&&ka.call(_this54,i);},{priority:"low"});}function ka(e){var t=this.getTransformedByOperation(e),i=oa._createFromRanges(t),n=!i.isEqual(this),o=function(e,t){switch(t.type){case"insert":return e.containsPosition(t.position);case"move":case"remove":case"reinsert":case"merge":return e.containsPosition(t.sourcePosition)||e.start.isEqual(t.sourcePosition)||e.containsPosition(t.targetPosition);case"split":return e.containsPosition(t.splitPosition)||e.containsPosition(t.insertionPosition);}return!1;}(this,e);var r=null;if(n){"$graveyard"==i.root.rootName&&(r="remove"==e.type?e.sourcePosition:e.deletionPosition);var _t102=this.toRange();this.start=i.start,this.end=i.end,this.fire("change:range",_t102,{deletionPosition:r});}else o&&this.fire("change:content",this.toRange(),{deletionPosition:r});}Ke(ba,h);var _a=/*#__PURE__*/function(){function _a(e){_classCallCheck(this,_a);this._selection=new va(e),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this);}_createClass(_a,[{key:"isCollapsed",get:function get(){return this._selection.isCollapsed;}},{key:"anchor",get:function get(){return this._selection.anchor;}},{key:"focus",get:function get(){return this._selection.focus;}},{key:"rangeCount",get:function get(){return this._selection.rangeCount;}},{key:"hasOwnRange",get:function get(){return this._selection.hasOwnRange;}},{key:"isBackward",get:function get(){return this._selection.isBackward;}},{key:"isGravityOverridden",get:function get(){return this._selection.isGravityOverridden;}},{key:"markers",get:function get(){return this._selection.markers;}},{key:"_ranges",get:function get(){return this._selection._ranges;}},{key:"getRanges",value:function getRanges(){return this._selection.getRanges();}},{key:"getFirstPosition",value:function getFirstPosition(){return this._selection.getFirstPosition();}},{key:"getLastPosition",value:function getLastPosition(){return this._selection.getLastPosition();}},{key:"getFirstRange",value:function getFirstRange(){return this._selection.getFirstRange();}},{key:"getLastRange",value:function getLastRange(){return this._selection.getLastRange();}},{key:"getSelectedBlocks",value:function getSelectedBlocks(){return this._selection.getSelectedBlocks();}},{key:"getSelectedElement",value:function getSelectedElement(){return this._selection.getSelectedElement();}},{key:"containsEntireContent",value:function containsEntireContent(e){return this._selection.containsEntireContent(e);}},{key:"destroy",value:function destroy(){this._selection.destroy();}},{key:"getAttributeKeys",value:function getAttributeKeys(){return this._selection.getAttributeKeys();}},{key:"getAttributes",value:function getAttributes(){return this._selection.getAttributes();}},{key:"getAttribute",value:function getAttribute(e){return this._selection.getAttribute(e);}},{key:"hasAttribute",value:function hasAttribute(e){return this._selection.hasAttribute(e);}},{key:"refresh",value:function refresh(){this._selection._updateMarkers(),this._selection._updateAttributes(!1);}},{key:"observeMarkers",value:function observeMarkers(e){this._selection.observeMarkers(e);}},{key:"is",value:function is(e){return"selection"===e||"model:selection"==e||"documentSelection"==e||"model:documentSelection"==e;}},{key:"_setFocus",value:function _setFocus(e,t){this._selection.setFocus(e,t);}},{key:"_setTo",value:function _setTo(e,t,i){this._selection.setTo(e,t,i);}},{key:"_setAttribute",value:function _setAttribute(e,t){this._selection.setAttribute(e,t);}},{key:"_removeAttribute",value:function _removeAttribute(e){this._selection.removeAttribute(e);}},{key:"_getStoredAttributes",value:function _getStoredAttributes(){return this._selection._getStoredAttributes();}},{key:"_overrideGravity",value:function _overrideGravity(){return this._selection.overrideGravity();}},{key:"_restoreGravity",value:function _restoreGravity(e){this._selection.restoreGravity(e);}}],[{key:"_getStoreAttributeKey",value:function _getStoreAttributeKey(e){return"selection:"+e;}},{key:"_isStoreAttributeKey",value:function _isStoreAttributeKey(e){return e.startsWith("selection:");}}]);return _a;}();Ke(_a,h);var va=/*#__PURE__*/function(_ua){_inherits(va,_ua);var _super25=_createSuper(va);function va(e){var _this55;_classCallCheck(this,va);_this55=_super25.call(this),_this55.markers=new Zi({idProperty:"name"}),_this55._model=e.model,_this55._document=e,_this55._attributePriority=new Map(),_this55._selectionRestorePosition=null,_this55._hasChangedRange=!1,_this55._overriddenGravityRegister=new Set(),_this55._observedMarkers=new Set(),_this55.listenTo(_this55._model,"applyOperation",function(e,t){var i=t[0];i.isDocumentOperation&&"marker"!=i.type&&"rename"!=i.type&&"noop"!=i.type&&(0==_this55._ranges.length&&_this55._selectionRestorePosition&&_this55._fixGraveyardSelection(_this55._selectionRestorePosition),_this55._selectionRestorePosition=null,_this55._hasChangedRange&&(_this55._hasChangedRange=!1,_this55.fire("change:range",{directChange:!1})));},{priority:"lowest"}),_this55.on("change:range",function(){var _iterator141=_createForOfIteratorHelper(_this55.getRanges()),_step141;try{for(_iterator141.s();!(_step141=_iterator141.n()).done;){var _e97=_step141.value;if(!_this55._document._validateSelectionRange(_e97))throw new c.a("document-selection-wrong-position",_assertThisInitialized(_this55),{range:_e97});}}catch(err){_iterator141.e(err);}finally{_iterator141.f();}}),_this55.listenTo(_this55._model.markers,"update",function(e,t,i,n){_this55._updateMarker(t,n);}),_this55.listenTo(_this55._document,"change",function(e,t){!function(e,t){var i=e.document.differ;var _iterator142=_createForOfIteratorHelper(i.getChanges()),_step142;try{var _loop2=function _loop2(){var n=_step142.value;if("insert"!=n.type)return"continue";var i=n.position.parent;n.length===i.maxOffset&&e.enqueueChange(t,function(e){var t=Array.from(i.getAttributeKeys()).filter(function(e){return e.startsWith("selection:");});var _iterator143=_createForOfIteratorHelper(t),_step143;try{for(_iterator143.s();!(_step143=_iterator143.n()).done;){var _n62=_step143.value;e.removeAttribute(_n62,i);}}catch(err){_iterator143.e(err);}finally{_iterator143.f();}});};for(_iterator142.s();!(_step142=_iterator142.n()).done;){var _ret=_loop2();if(_ret==="continue")continue;}}catch(err){_iterator142.e(err);}finally{_iterator142.f();}}(_this55._model,t);});return _this55;}_createClass(va,[{key:"isCollapsed",get:function get(){return 0===this._ranges.length?this._document._getDefaultRange().isCollapsed:_get(_getPrototypeOf(va.prototype),"isCollapsed",this);}},{key:"anchor",get:function get(){return _get(_getPrototypeOf(va.prototype),"anchor",this)||this._document._getDefaultRange().start;}},{key:"focus",get:function get(){return _get(_getPrototypeOf(va.prototype),"focus",this)||this._document._getDefaultRange().end;}},{key:"rangeCount",get:function get(){return this._ranges.length?this._ranges.length:1;}},{key:"hasOwnRange",get:function get(){return this._ranges.length>0;}},{key:"isGravityOverridden",get:function get(){return!!this._overriddenGravityRegister.size;}},{key:"destroy",value:function destroy(){for(var _e98=0;_e98<this._ranges.length;_e98++){this._ranges[_e98].detach();}this.stopListening();}},{key:"getRanges",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getRanges(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getRanges$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:if(!this._ranges.length){_context18.next=4;break;}return _context18.delegateYield(_get(_getPrototypeOf(va.prototype),"getRanges",this).call(this),"t0",2);case 2:_context18.next=6;break;case 4:_context18.next=6;return this._document._getDefaultRange();case 6:case"end":return _context18.stop();}}},getRanges,this);})},{key:"getFirstRange",value:function getFirstRange(){return _get(_getPrototypeOf(va.prototype),"getFirstRange",this).call(this)||this._document._getDefaultRange();}},{key:"getLastRange",value:function getLastRange(){return _get(_getPrototypeOf(va.prototype),"getLastRange",this).call(this)||this._document._getDefaultRange();}},{key:"setTo",value:function setTo(e,t,i){_get(_getPrototypeOf(va.prototype),"setTo",this).call(this,e,t,i),this._updateAttributes(!0),this._updateMarkers();}},{key:"setFocus",value:function setFocus(e,t){_get(_getPrototypeOf(va.prototype),"setFocus",this).call(this,e,t),this._updateAttributes(!0),this._updateMarkers();}},{key:"setAttribute",value:function setAttribute(e,t){if(this._setAttribute(e,t)){var _t103=[e];this.fire("change:attribute",{attributeKeys:_t103,directChange:!0});}}},{key:"removeAttribute",value:function removeAttribute(e){if(this._removeAttribute(e)){var _t104=[e];this.fire("change:attribute",{attributeKeys:_t104,directChange:!0});}}},{key:"overrideGravity",value:function overrideGravity(){var e=s();return this._overriddenGravityRegister.add(e),1===this._overriddenGravityRegister.size&&this._updateAttributes(!0),e;}},{key:"restoreGravity",value:function restoreGravity(e){if(!this._overriddenGravityRegister.has(e))throw new c.a("document-selection-gravity-wrong-restore",this,{uid:e});this._overriddenGravityRegister["delete"](e),this.isGravityOverridden||this._updateAttributes(!0);}},{key:"observeMarkers",value:function observeMarkers(e){this._observedMarkers.add(e),this._updateMarkers();}},{key:"_popRange",value:function _popRange(){this._ranges.pop().detach();}},{key:"_pushRange",value:function _pushRange(e){var t=this._prepareRange(e);t&&this._ranges.push(t);}},{key:"_prepareRange",value:function _prepareRange(e){var _this56=this;if(this._checkRange(e),e.root==this._document.graveyard)return;var t=ba.fromRange(e);return t.on("change:range",function(e,i,n){if(_this56._hasChangedRange=!0,t.root==_this56._document.graveyard){_this56._selectionRestorePosition=n.deletionPosition;var _e99=_this56._ranges.indexOf(t);_this56._ranges.splice(_e99,1),t.detach();}}),t;}},{key:"_updateMarkers",value:function _updateMarkers(){if(!this._observedMarkers.size)return;var e=[];var t=!1;var _iterator144=_createForOfIteratorHelper(this._model.markers),_step144;try{for(_iterator144.s();!(_step144=_iterator144.n()).done;){var _t105=_step144.value;var _i115=_t105.name.split(":",1)[0];if(!this._observedMarkers.has(_i115))continue;var _n63=_t105.getRange();var _iterator145=_createForOfIteratorHelper(this.getRanges()),_step145;try{for(_iterator145.s();!(_step145=_iterator145.n()).done;){var _i116=_step145.value;_n63.containsRange(_i116,!_i116.isCollapsed)&&e.push(_t105);}}catch(err){_iterator145.e(err);}finally{_iterator145.f();}}}catch(err){_iterator144.e(err);}finally{_iterator144.f();}var i=Array.from(this.markers);for(var _i111=0,_e100=e;_i111<_e100.length;_i111++){var _i112=_e100[_i111];this.markers.has(_i112)||(this.markers.add(_i112),t=!0);}for(var _i113=0,_Array$from2=Array.from(this.markers);_i113<_Array$from2.length;_i113++){var _i114=_Array$from2[_i113];e.includes(_i114)||(this.markers.remove(_i114),t=!0);}t&&this.fire("change:marker",{oldMarkers:i,directChange:!1});}},{key:"_updateMarker",value:function _updateMarker(e,t){var i=e.name.split(":",1)[0];if(!this._observedMarkers.has(i))return;var n=!1;var o=Array.from(this.markers),r=this.markers.has(e);if(t){var _i117=!1;var _iterator146=_createForOfIteratorHelper(this.getRanges()),_step146;try{for(_iterator146.s();!(_step146=_iterator146.n()).done;){var _e101=_step146.value;if(t.containsRange(_e101,!_e101.isCollapsed)){_i117=!0;break;}}}catch(err){_iterator146.e(err);}finally{_iterator146.f();}_i117&&!r?(this.markers.add(e),n=!0):!_i117&&r&&(this.markers.remove(e),n=!0);}else r&&(this.markers.remove(e),n=!0);n&&this.fire("change:marker",{oldMarkers:o,directChange:!1});}},{key:"_updateAttributes",value:function _updateAttributes(e){var t=gn(this._getSurroundingAttributes()),i=gn(this.getAttributes());if(e)this._attributePriority=new Map(),this._attrs=new Map();else{var _iterator147=_createForOfIteratorHelper(this._attributePriority),_step147;try{for(_iterator147.s();!(_step147=_iterator147.n()).done;){var _step147$value=_slicedToArray(_step147.value,2),_e102=_step147$value[0],_t106=_step147$value[1];"low"==_t106&&(this._attrs["delete"](_e102),this._attributePriority["delete"](_e102));}}catch(err){_iterator147.e(err);}finally{_iterator147.f();}}this._setAttributesTo(t);var n=[];var _iterator148=_createForOfIteratorHelper(this.getAttributes()),_step148;try{for(_iterator148.s();!(_step148=_iterator148.n()).done;){var _step148$value=_slicedToArray(_step148.value,2),_e103=_step148$value[0],_t107=_step148$value[1];i.has(_e103)&&i.get(_e103)===_t107||n.push(_e103);}}catch(err){_iterator148.e(err);}finally{_iterator148.f();}var _iterator149=_createForOfIteratorHelper(i),_step149;try{for(_iterator149.s();!(_step149=_iterator149.n()).done;){var _step149$value=_slicedToArray(_step149.value,1),_e104=_step149$value[0];this.hasAttribute(_e104)||n.push(_e104);}}catch(err){_iterator149.e(err);}finally{_iterator149.f();}n.length>0&&this.fire("change:attribute",{attributeKeys:n,directChange:!1});}},{key:"_setAttribute",value:function _setAttribute(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!0;var n=i?"normal":"low";if("low"==n&&"normal"==this._attributePriority.get(e))return!1;return _get(_getPrototypeOf(va.prototype),"getAttribute",this).call(this,e)!==t&&(this._attrs.set(e,t),this._attributePriority.set(e,n),!0);}},{key:"_removeAttribute",value:function _removeAttribute(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!0;var i=t?"normal":"low";return("low"!=i||"normal"!=this._attributePriority.get(e))&&(this._attributePriority.set(e,i),!!_get(_getPrototypeOf(va.prototype),"hasAttribute",this).call(this,e)&&(this._attrs["delete"](e),!0));}},{key:"_setAttributesTo",value:function _setAttributesTo(e){var t=new Set();var _iterator150=_createForOfIteratorHelper(this.getAttributes()),_step150;try{for(_iterator150.s();!(_step150=_iterator150.n()).done;){var _step150$value=_slicedToArray(_step150.value,2),_t108=_step150$value[0],_i118=_step150$value[1];e.get(_t108)!==_i118&&this._removeAttribute(_t108,!1);}}catch(err){_iterator150.e(err);}finally{_iterator150.f();}var _iterator151=_createForOfIteratorHelper(e),_step151;try{for(_iterator151.s();!(_step151=_iterator151.n()).done;){var _step151$value=_slicedToArray(_step151.value,2),_i119=_step151$value[0],_n64=_step151$value[1];this._setAttribute(_i119,_n64,!1)&&t.add(_i119);}}catch(err){_iterator151.e(err);}finally{_iterator151.f();}return t;}},{key:"_getStoredAttributes",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function _getStoredAttributes(){var e,_iterator152,_step152,_t109,_i120;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _getStoredAttributes$(_context19){while(1){switch(_context19.prev=_context19.next){case 0:e=this.getFirstPosition().parent;if(!(this.isCollapsed&&e.isEmpty)){_context19.next=21;break;}_iterator152=_createForOfIteratorHelper(e.getAttributeKeys());_context19.prev=3;_iterator152.s();case 5:if((_step152=_iterator152.n()).done){_context19.next=13;break;}_t109=_step152.value;if(!_t109.startsWith("selection:")){_context19.next=11;break;}_i120=_t109.substr("selection:".length);_context19.next=11;return[_i120,e.getAttribute(_t109)];case 11:_context19.next=5;break;case 13:_context19.next=18;break;case 15:_context19.prev=15;_context19.t0=_context19["catch"](3);_iterator152.e(_context19.t0);case 18:_context19.prev=18;_iterator152.f();return _context19.finish(18);case 21:case"end":return _context19.stop();}}},_getStoredAttributes,this,[[3,15,18,21]]);})},{key:"_getSurroundingAttributes",value:function _getSurroundingAttributes(){var e=this.getFirstPosition(),t=this._model.schema;var i=null;if(this.isCollapsed){var _n65=e.textNode?e.textNode:e.nodeBefore,_o38=e.textNode?e.textNode:e.nodeAfter;if(this.isGravityOverridden||(i=ya(_n65)),i||(i=ya(_o38)),!this.isGravityOverridden&&!i){var _e105=_n65;for(;_e105&&!t.isInline(_e105)&&!i;){_e105=_e105.previousSibling,i=ya(_e105);}}if(!i){var _e106=_o38;for(;_e106&&!t.isInline(_e106)&&!i;){_e106=_e106.nextSibling,i=ya(_e106);}}i||(i=this._getStoredAttributes());}else{var _e107=this.getFirstRange();var _iterator153=_createForOfIteratorHelper(_e107),_step153;try{for(_iterator153.s();!(_step153=_iterator153.n()).done;){var _n66=_step153.value;if(_n66.item.is("element")&&t.isObject(_n66.item))break;if("text"==_n66.type){i=_n66.item.getAttributes();break;}}}catch(err){_iterator153.e(err);}finally{_iterator153.f();}}return i;}},{key:"_fixGraveyardSelection",value:function _fixGraveyardSelection(e){var t=this._model.schema.getNearestSelectionRange(e);t&&this._pushRange(t);}}]);return va;}(ua);function ya(e){return e instanceof Ks||e instanceof Gs?e.getAttributes():null;}var xa=/*#__PURE__*/function(){function xa(e){_classCallCheck(this,xa);this._dispatchers=e;}_createClass(xa,[{key:"add",value:function add(e){var _iterator154=_createForOfIteratorHelper(this._dispatchers),_step154;try{for(_iterator154.s();!(_step154=_iterator154.n()).done;){var _t110=_step154.value;e(_t110);}}catch(err){_iterator154.e(err);}finally{_iterator154.f();}return this;}}]);return xa;}();var Aa=function Aa(e){return qi(e,5);};var Ca=/*#__PURE__*/function(_xa){_inherits(Ca,_xa);var _super26=_createSuper(Ca);function Ca(){_classCallCheck(this,Ca);return _super26.apply(this,arguments);}_createClass(Ca,[{key:"elementToElement",value:function elementToElement(e){return this.add(function(e){return(e=Aa(e)).view=Ia(e.view,"container"),function(t){var i;if(t.on("insert:"+e.model,(i=e.view,function(e,t,n){var o=i(t.item,n);if(!o)return;if(!n.consumable.consume(t.item,"insert"))return;var r=n.mapper.toViewPosition(t.range.start);n.mapper.bindElements(t.item,o),n.writer.insert(r,o);}),{priority:e.converterPriority||"normal"}),e.triggerBy){if(e.triggerBy.attributes){var _iterator155=_createForOfIteratorHelper(e.triggerBy.attributes),_step155;try{for(_iterator155.s();!(_step155=_iterator155.n()).done;){var _i121=_step155.value;t._mapReconversionTriggerEvent(e.model,"attribute:".concat(_i121,":").concat(e.model));}}catch(err){_iterator155.e(err);}finally{_iterator155.f();}}if(e.triggerBy.children){var _iterator156=_createForOfIteratorHelper(e.triggerBy.children),_step156;try{for(_iterator156.s();!(_step156=_iterator156.n()).done;){var _i122=_step156.value;t._mapReconversionTriggerEvent(e.model,"insert:"+_i122),t._mapReconversionTriggerEvent(e.model,"remove:"+_i122);}}catch(err){_iterator156.e(err);}finally{_iterator156.f();}}}};}(e));}},{key:"attributeToElement",value:function attributeToElement(e){return this.add(function(e){e=Aa(e);var t="attribute:"+(e.model.key?e.model.key:e.model);e.model.name&&(t+=":"+e.model.name);if(e.model.values){var _iterator157=_createForOfIteratorHelper(e.model.values),_step157;try{for(_iterator157.s();!(_step157=_iterator157.n()).done;){var _t111=_step157.value;e.view[_t111]=Ia(e.view[_t111],"attribute");}}catch(err){_iterator157.e(err);}finally{_iterator157.f();}}else e.view=Ia(e.view,"attribute");var i=Sa(e);return function(n){n.on(t,function(e){return function(t,i,n){var o=e(i.attributeOldValue,n),r=e(i.attributeNewValue,n);if(!o&&!r)return;if(!n.consumable.consume(i.item,t.name))return;var s=n.writer,a=s.document.selection;if(i.item instanceof ua||i.item instanceof _a)s.wrap(a.getFirstRange(),r);else{var _e108=n.mapper.toViewRange(i.range);null!==i.attributeOldValue&&o&&(_e108=s.unwrap(_e108,o)),null!==i.attributeNewValue&&r&&s.wrap(_e108,r);}};}(i),{priority:e.converterPriority||"normal"});};}(e));}},{key:"attributeToAttribute",value:function attributeToAttribute(e){return this.add(function(e){e=Aa(e);var t="attribute:"+(e.model.key?e.model.key:e.model);e.model.name&&(t+=":"+e.model.name);if(e.model.values){var _iterator158=_createForOfIteratorHelper(e.model.values),_step158;try{for(_iterator158.s();!(_step158=_iterator158.n()).done;){var _t112=_step158.value;e.view[_t112]=Pa(e.view[_t112]);}}catch(err){_iterator158.e(err);}finally{_iterator158.f();}}else e.view=Pa(e.view);var i=Sa(e);return function(n){var o;n.on(t,(o=i,function(e,t,i){var n=o(t.attributeOldValue,i),r=o(t.attributeNewValue,i);if(!n&&!r)return;if(!i.consumable.consume(t.item,e.name))return;var s=i.mapper.toViewElement(t.item),a=i.writer;if(!s)throw new c.a("conversion-attribute-to-attribute-on-text",[t,i]);if(null!==t.attributeOldValue&&n)if("class"==n.key){var _e109=en(n.value);var _iterator159=_createForOfIteratorHelper(_e109),_step159;try{for(_iterator159.s();!(_step159=_iterator159.n()).done;){var _t113=_step159.value;a.removeClass(_t113,s);}}catch(err){_iterator159.e(err);}finally{_iterator159.f();}}else if("style"==n.key){var _e110=Object.keys(n.value);for(var _i123=0,_e111=_e110;_i123<_e111.length;_i123++){var _t114=_e111[_i123];a.removeStyle(_t114,s);}}else a.removeAttribute(n.key,s);if(null!==t.attributeNewValue&&r)if("class"==r.key){var _e112=en(r.value);var _iterator160=_createForOfIteratorHelper(_e112),_step160;try{for(_iterator160.s();!(_step160=_iterator160.n()).done;){var _t115=_step160.value;a.addClass(_t115,s);}}catch(err){_iterator160.e(err);}finally{_iterator160.f();}}else if("style"==r.key){var _e113=Object.keys(r.value);for(var _i124=0,_e114=_e113;_i124<_e114.length;_i124++){var _t116=_e114[_i124];a.setStyle(_t116,r.value[_t116],s);}}else a.setAttribute(r.key,r.value,s);}),{priority:e.converterPriority||"normal"});};}(e));}},{key:"markerToElement",value:function markerToElement(e){return this.add(function(e){return(e=Aa(e)).view=Ia(e.view,"ui"),function(t){var i;t.on("addMarker:"+e.model,(i=e.view,function(e,t,n){t.isOpening=!0;var o=i(t,n);t.isOpening=!1;var r=i(t,n);if(!o||!r)return;var s=t.markerRange;if(s.isCollapsed&&!n.consumable.consume(s,e.name))return;var _iterator161=_createForOfIteratorHelper(s),_step161;try{for(_iterator161.s();!(_step161=_iterator161.n()).done;){var _t117=_step161.value;if(!n.consumable.consume(_t117.item,e.name))return;}}catch(err){_iterator161.e(err);}finally{_iterator161.f();}var a=n.mapper,c=n.writer;c.insert(a.toViewPosition(s.start),o),n.mapper.bindElementToMarker(o,t.markerName),s.isCollapsed||(c.insert(a.toViewPosition(s.end),r),n.mapper.bindElementToMarker(r,t.markerName)),e.stop();}),{priority:e.converterPriority||"normal"}),t.on("removeMarker:"+e.model,(e.view,function(e,t,i){var n=i.mapper.markerNameToElements(t.markerName);if(n){var _iterator162=_createForOfIteratorHelper(n),_step162;try{for(_iterator162.s();!(_step162=_iterator162.n()).done;){var _e115=_step162.value;i.mapper.unbindElementFromMarkerName(_e115,t.markerName),i.writer.clear(i.writer.createRangeOn(_e115),_e115);}}catch(err){_iterator162.e(err);}finally{_iterator162.f();}i.writer.clearClonedElementsGroup(t.markerName),e.stop();}}),{priority:e.converterPriority||"normal"});};}(e));}},{key:"markerToHighlight",value:function markerToHighlight(e){return this.add(function(e){return function(t){var i;t.on("addMarker:"+e.model,(i=e.view,function(e,t,n){if(!t.item)return;if(!(t.item instanceof ua||t.item instanceof _a||t.item.is("$textProxy")))return;var o=Ma(i,t,n);if(!o)return;if(!n.consumable.consume(t.item,e.name))return;var r=n.writer,s=Ta(r,o),a=r.document.selection;if(t.item instanceof ua||t.item instanceof _a)r.wrap(a.getFirstRange(),s,a);else{var _e116=n.mapper.toViewRange(t.range),_i125=r.wrap(_e116,s);var _iterator163=_createForOfIteratorHelper(_i125.getItems()),_step163;try{for(_iterator163.s();!(_step163=_iterator163.n()).done;){var _e117=_step163.value;if(_e117.is("attributeElement")&&_e117.isSimilar(s)){n.mapper.bindElementToMarker(_e117,t.markerName);break;}}}catch(err){_iterator163.e(err);}finally{_iterator163.f();}}}),{priority:e.converterPriority||"normal"}),t.on("addMarker:"+e.model,function(e){return function(t,i,n){if(!i.item)return;if(!(i.item instanceof Js))return;var o=Ma(e,i,n);if(!o)return;if(!n.consumable.test(i.item,t.name))return;var r=n.mapper.toViewElement(i.item);if(r&&r.getCustomProperty("addHighlight")){n.consumable.consume(i.item,t.name);var _iterator164=_createForOfIteratorHelper(oa._createIn(i.item)),_step164;try{for(_iterator164.s();!(_step164=_iterator164.n()).done;){var _e118=_step164.value;n.consumable.consume(_e118.item,t.name);}}catch(err){_iterator164.e(err);}finally{_iterator164.f();}r.getCustomProperty("addHighlight")(r,o,n.writer),n.mapper.bindElementToMarker(r,i.markerName);}};}(e.view),{priority:e.converterPriority||"normal"}),t.on("removeMarker:"+e.model,function(e){return function(t,i,n){if(i.markerRange.isCollapsed)return;var o=Ma(e,i,n);if(!o)return;var r=Ta(n.writer,o),s=n.mapper.markerNameToElements(i.markerName);if(s){var _iterator165=_createForOfIteratorHelper(s),_step165;try{for(_iterator165.s();!(_step165=_iterator165.n()).done;){var _e119=_step165.value;n.mapper.unbindElementFromMarkerName(_e119,i.markerName),_e119.is("attributeElement")?n.writer.unwrap(n.writer.createRangeOn(_e119),r):_e119.getCustomProperty("removeHighlight")(_e119,o.id,n.writer);}}catch(err){_iterator165.e(err);}finally{_iterator165.f();}n.writer.clearClonedElementsGroup(i.markerName),t.stop();}};}(e.view),{priority:e.converterPriority||"normal"});};}(e));}},{key:"markerToData",value:function markerToData(e){return this.add(function(e){var t=(e=Aa(e)).model;e.view||(e.view=function(i){return{group:t,name:i.substr(e.model.length+1)};});return function(i){var n;i.on("addMarker:"+t,(n=e.view,function(e,t,i){var o=n(t.markerName,i);if(!o)return;var r=t.markerRange;i.consumable.consume(r,e.name)&&(Ea(r,!1,i,t,o),Ea(r,!0,i,t,o),e.stop());}),{priority:e.converterPriority||"normal"}),i.on("removeMarker:"+t,function(e){return function(t,i,n){var o=e(i.markerName,n);if(!o)return;var r=n.mapper.markerNameToElements(i.markerName);if(r){var _iterator166=_createForOfIteratorHelper(r),_step166;try{for(_iterator166.s();!(_step166=_iterator166.n()).done;){var _e120=_step166.value;n.mapper.unbindElementFromMarkerName(_e120,i.markerName),_e120.is("containerElement")?(s("data-".concat(o.group,"-start-before"),_e120),s("data-".concat(o.group,"-start-after"),_e120),s("data-".concat(o.group,"-end-before"),_e120),s("data-".concat(o.group,"-end-after"),_e120)):n.writer.clear(n.writer.createRangeOn(_e120),_e120);}}catch(err){_iterator166.e(err);}finally{_iterator166.f();}n.writer.clearClonedElementsGroup(i.markerName),t.stop();}function s(e,t){if(t.hasAttribute(e)){var _i126=new Set(t.getAttribute(e).split(","));_i126["delete"](o.name),0==_i126.size?n.writer.removeAttribute(e,t):n.writer.setAttribute(e,Array.from(_i126).join(","),t);}}};}(e.view),{priority:e.converterPriority||"normal"});};}(e));}}]);return Ca;}(xa);function Ta(e,t){var i=e.createAttributeElement("span",t.attributes);return t.classes&&i._addClass(t.classes),"number"==typeof t.priority&&(i._priority=t.priority),i._id=t.id,i;}function Ea(e,t,i,n,o){var r=t?e.start:e.end,s=r.nodeAfter&&r.nodeAfter.is("element")?r.nodeAfter:null,a=r.nodeBefore&&r.nodeBefore.is("element")?r.nodeBefore:null;if(s||a){var _e121,_r19;t&&s||!t&&!a?(_e121=s,_r19=!0):(_e121=a,_r19=!1);var _c3=i.mapper.toViewElement(_e121);if(_c3)return void function(e,t,i,n,o,r){var s="data-".concat(r.group,"-").concat(t?"start":"end","-").concat(i?"before":"after"),a=e.hasAttribute(s)?e.getAttribute(s).split(","):[];a.unshift(r.name),n.writer.setAttribute(s,a.join(","),e),n.mapper.bindElementToMarker(e,o.markerName);}(_c3,t,_r19,i,n,o);}!function(e,t,i,n,o){var r="".concat(o.group,"-").concat(t?"start":"end"),s=o.name?{name:o.name}:null,a=i.writer.createUIElement(r,s);i.writer.insert(e,a),i.mapper.bindElementToMarker(a,n.markerName);}(i.mapper.toViewPosition(r),t,i,n,o);}function Ia(e,t){return"function"==typeof e?e:function(i,n){return function(e,t,i){"string"==typeof e&&(e={name:e});var n;var o=t.writer,r=Object.assign({},e.attributes);if("container"==i)n=o.createContainerElement(e.name,r);else if("attribute"==i){var _t118={priority:e.priority||xo.DEFAULT_PRIORITY};n=o.createAttributeElement(e.name,r,_t118);}else n=o.createUIElement(e.name,r);if(e.styles){var _t119=Object.keys(e.styles);for(var _i127=0,_t120=_t119;_i127<_t120.length;_i127++){var _i128=_t120[_i127];o.setStyle(_i128,e.styles[_i128],n);}}if(e.classes){var _t121=e.classes;if("string"==typeof _t121)o.addClass(_t121,n);else{var _iterator167=_createForOfIteratorHelper(_t121),_step167;try{for(_iterator167.s();!(_step167=_iterator167.n()).done;){var _e122=_step167.value;o.addClass(_e122,n);}}catch(err){_iterator167.e(err);}finally{_iterator167.f();}}}return n;}(e,n,t);};}function Sa(e){return e.model.values?function(t,i){var n=e.view[t];return n?n(t,i):null;}:e.view;}function Pa(e){return"string"==typeof e?function(t){return{key:e,value:t};}:"object"==_typeof(e)?e.value?function(){return e;}:function(t){return{key:e.key,value:t};}:e;}function Ma(e,t,i){var n="function"==typeof e?e(t,i):e;return n?(n.priority||(n.priority=10),n.id||(n.id=t.markerName),n):null;}function Na(e){var _e$model=e.model,t=_e$model.schema,i=_e$model.document;var _iterator168=_createForOfIteratorHelper(i.getRootNames()),_step168;try{for(_iterator168.s();!(_step168=_iterator168.n()).done;){var _n67=_step168.value;var _o39=i.getRoot(_n67);if(_o39.isEmpty&&!t.checkChild(_o39,"$text")&&t.checkChild(_o39,"paragraph"))return e.insertElement("paragraph",_o39),!0;}}catch(err){_iterator168.e(err);}finally{_iterator168.f();}return!1;}function Ra(e,t,i){var n=i.createContext(e);return!!i.checkChild(n,"paragraph")&&!!i.checkChild(n.push("paragraph"),t);}function Oa(e,t){var i=t.createElement("paragraph");return t.insert(i,e),t.createPositionAt(i,0);}var za=/*#__PURE__*/function(_xa2){_inherits(za,_xa2);var _super27=_createSuper(za);function za(){_classCallCheck(this,za);return _super27.apply(this,arguments);}_createClass(za,[{key:"elementToElement",value:function elementToElement(e){return this.add(Da(e));}},{key:"elementToAttribute",value:function elementToAttribute(e){return this.add(function(e){ja(e=Aa(e));var t=Ba(e,!1),i=La(e.view),n=i?"element:"+i:"element";return function(i){i.on(n,t,{priority:e.converterPriority||"low"});};}(e));}},{key:"attributeToAttribute",value:function attributeToAttribute(e){return this.add(function(e){e=Aa(e);var t=null;("string"==typeof e.view||e.view.key)&&(t=function(e){"string"==typeof e.view&&(e.view={key:e.view});var t=e.view.key;var i;if("class"==t||"style"==t){i=_defineProperty({},"class"==t?"classes":"styles",e.view.value);}else{var _n68=void 0===e.view.value?/[\s\S]*/:e.view.value;i={attributes:_defineProperty({},t,_n68)};}e.view.name&&(i.name=e.view.name);return e.view=i,t;}(e));ja(e,t);var i=Ba(e,!0);return function(t){t.on("element",i,{priority:e.converterPriority||"low"});};}(e));}},{key:"elementToMarker",value:function elementToMarker(e){return this.add(function(e){return function(e){var t=e.model;e.model=function(e,i){var n="string"==typeof t?t:t(e,i);return i.writer.createElement("$marker",{"data-name":n});};}(e=Aa(e)),Da(e);}(e));}},{key:"dataToMarker",value:function dataToMarker(e){return this.add(function(e){(e=Aa(e)).model||(e.model=function(t){return t?e.view+":"+t:e.view;});var t=Va(Fa(e,"start")),i=Va(Fa(e,"end"));return function(n){n.on("element:"+e.view+"-start",t,{priority:e.converterPriority||"normal"}),n.on("element:"+e.view+"-end",i,{priority:e.converterPriority||"normal"});var o=a.get("low"),r=a.get("highest"),s=a.get(e.converterPriority)/r;n.on("element",function(e){return function(t,i,n){var o="data-"+e.view;function r(t,o){var _iterator169=_createForOfIteratorHelper(o),_step169;try{for(_iterator169.s();!(_step169=_iterator169.n()).done;){var _r20=_step169.value;var _o40=e.model(_r20,n),_s14=n.writer.createElement("$marker",{"data-name":_o40});n.writer.insert(_s14,t),i.modelCursor.isEqual(t)?i.modelCursor=i.modelCursor.getShiftedBy(1):i.modelCursor=i.modelCursor._getTransformedByInsertion(t,1),i.modelRange=i.modelRange._getTransformedByInsertion(t,1)[0];}}catch(err){_iterator169.e(err);}finally{_iterator169.f();}}(n.consumable.test(i.viewItem,{attributes:o+"-end-after"})||n.consumable.test(i.viewItem,{attributes:o+"-start-after"})||n.consumable.test(i.viewItem,{attributes:o+"-end-before"})||n.consumable.test(i.viewItem,{attributes:o+"-start-before"}))&&(i.modelRange||Object.assign(i,n.convertChildren(i.viewItem,i.modelCursor)),n.consumable.consume(i.viewItem,{attributes:o+"-end-after"})&&r(i.modelRange.end,i.viewItem.getAttribute(o+"-end-after").split(",")),n.consumable.consume(i.viewItem,{attributes:o+"-start-after"})&&r(i.modelRange.end,i.viewItem.getAttribute(o+"-start-after").split(",")),n.consumable.consume(i.viewItem,{attributes:o+"-end-before"})&&r(i.modelRange.start,i.viewItem.getAttribute(o+"-end-before").split(",")),n.consumable.consume(i.viewItem,{attributes:o+"-start-before"})&&r(i.modelRange.start,i.viewItem.getAttribute(o+"-start-before").split(",")));};}(e),{priority:o+s});};}(e));}}]);return za;}(xa);function Da(e){var t=Va(e=Aa(e)),i=La(e.view),n=i?"element:"+i:"element";return function(i){i.on(n,t,{priority:e.converterPriority||"normal"});};}function La(e){return"string"==typeof e?e:"object"==_typeof(e)&&"string"==typeof e.name?e.name:null;}function Va(e){var t=new mn(e.view);return function(i,n,o){var r=t.match(n.viewItem);if(!r)return;var s=r.match;if(s.name=!0,!o.consumable.test(n.viewItem,s))return;var a=function(e,t,i){return e instanceof Function?e(t,i):i.writer.createElement(e);}(e.model,n.viewItem,o);a&&o.safeInsert(a,n.modelCursor)&&(o.consumable.consume(n.viewItem,s),o.convertChildren(n.viewItem,a),o.updateConversionResult(a,n));};}function ja(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var i=null===t||function(e){return e.getAttribute(t);},n="object"!=_typeof(e.model)?e.model:e.model.key,o="object"!=_typeof(e.model)||void 0===e.model.value?i:e.model.value;e.model={key:n,value:o};}function Ba(e,t){var i=new mn(e.view);return function(n,o,r){var s=i.match(o.viewItem);if(!s)return;if(!function(e,t){var i="function"==typeof e?e(t):e;if("object"==_typeof(i)&&!La(i))return!1;return!i.classes&&!i.attributes&&!i.styles;}(e.view,o.viewItem)?delete s.match.name:s.match.name=!0,!r.consumable.test(o.viewItem,s.match))return;var a=e.model.key,c="function"==typeof e.model.value?e.model.value(o.viewItem,r):e.model.value;if(null===c)return;o.modelRange||Object.assign(o,r.convertChildren(o.viewItem,o.modelCursor));(function(e,t,i,n){var o=!1;for(var _i130=0,_Array$from3=Array.from(e.getItems({shallow:i}));_i130<_Array$from3.length;_i130++){var _r21=_Array$from3[_i130];n.schema.checkAttribute(_r21,t.key)&&(o=!0,_r21.hasAttribute(t.key)||n.writer.setAttribute(t.key,t.value,_r21));}return o;})(o.modelRange,{key:a,value:c},t,r)&&r.consumable.consume(o.viewItem,s.match);};}function Fa(e,t){var i={};return i.view=e.view+"-"+t,i.model=function(t,i){var n=t.getAttribute("name"),o=e.model(n,i);return i.writer.createElement("$marker",{"data-name":o});},i;}var Ha=/*#__PURE__*/function(){function Ha(e,t){var _this57=this;_classCallCheck(this,Ha);this.model=e,this.view=new $s(t),this.mapper=new ra(),this.downcastDispatcher=new ca({mapper:this.mapper,schema:e.schema});var i=this.model.document,n=i.selection,o=this.model.markers;this.listenTo(this.model,"_beforeChanges",function(){_this57.view._disableRendering(!0);},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",function(){_this57.view._disableRendering(!1);},{priority:"lowest"}),this.listenTo(i,"change",function(){_this57.view.change(function(e){_this57.downcastDispatcher.convertChanges(i.differ,o,e),_this57.downcastDispatcher.convertSelection(n,o,e);});},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",function(e,t){return function(i,n){var o=n.newSelection,r=[];var _iterator170=_createForOfIteratorHelper(o.getRanges()),_step170;try{for(_iterator170.s();!(_step170=_iterator170.n()).done;){var _e123=_step170.value;r.push(t.toModelRange(_e123));}}catch(err){_iterator170.e(err);}finally{_iterator170.f();}var s=e.createSelection(r,{backward:o.isBackward});s.isEqual(e.document.selection)||e.change(function(e){e.setSelection(s);});};}(this.model,this.mapper)),this.downcastDispatcher.on("insert:$text",function(e,t,i){if(!i.consumable.consume(t.item,"insert"))return;var n=i.writer,o=i.mapper.toViewPosition(t.range.start),r=n.createText(t.item.data);n.insert(o,r);},{priority:"lowest"}),this.downcastDispatcher.on("remove",function(e,t,i){var n=i.mapper.toViewPosition(t.position),o=t.position.getShiftedBy(t.length),r=i.mapper.toViewPosition(o,{isPhantom:!0}),s=i.writer.createRange(n,r),a=i.writer.remove(s.getTrimmed());var _iterator171=_createForOfIteratorHelper(i.writer.createRangeIn(a).getItems()),_step171;try{for(_iterator171.s();!(_step171=_iterator171.n()).done;){var _e124=_step171.value;i.mapper.unbindViewElement(_e124);}}catch(err){_iterator171.e(err);}finally{_iterator171.f();}},{priority:"low"}),this.downcastDispatcher.on("selection",function(e,t,i){var n=i.writer,o=n.document.selection;var _iterator172=_createForOfIteratorHelper(o.getRanges()),_step172;try{for(_iterator172.s();!(_step172=_iterator172.n()).done;){var _e125=_step172.value;_e125.isCollapsed&&_e125.end.parent.isAttached()&&i.writer.mergeAttributes(_e125.start);}}catch(err){_iterator172.e(err);}finally{_iterator172.f();}n.setSelection(null);},{priority:"high"}),this.downcastDispatcher.on("selection",function(e,t,i){var n=t.selection;if(n.isCollapsed)return;if(!i.consumable.consume(n,"selection"))return;var o=[];var _iterator173=_createForOfIteratorHelper(n.getRanges()),_step173;try{for(_iterator173.s();!(_step173=_iterator173.n()).done;){var _e126=_step173.value;var _t122=i.mapper.toViewRange(_e126);o.push(_t122);}}catch(err){_iterator173.e(err);}finally{_iterator173.f();}i.writer.setSelection(o,{backward:n.isBackward});},{priority:"low"}),this.downcastDispatcher.on("selection",function(e,t,i){var n=t.selection;if(!n.isCollapsed)return;if(!i.consumable.consume(n,"selection"))return;var o=i.writer,r=n.getFirstPosition(),s=i.mapper.toViewPosition(r),a=o.breakAttributes(s);o.setSelection(a);},{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(function(e){if("$graveyard"==e.rootName)return null;var t=new so(_this57.view.document,e.name);return t.rootName=e.rootName,_this57.mapper.bindElements(e,t),t;});}_createClass(Ha,[{key:"destroy",value:function destroy(){this.view.destroy(),this.stopListening();}}]);return Ha;}();Ke(Ha,Ue);var Ua=/*#__PURE__*/function(_Symbol$iterator9){function Ua(){_classCallCheck(this,Ua);this._commands=new Map();}_createClass(Ua,[{key:"add",value:function add(e,t){this._commands.set(e,t);}},{key:"get",value:function get(e){return this._commands.get(e);}},{key:"execute",value:function execute(e){var i=this.get(e);if(!i)throw new c.a("commandcollection-command-not-found",this,{commandName:e});for(var _len19=arguments.length,t=new Array(_len19>1?_len19-1:0),_key19=1;_key19<_len19;_key19++){t[_key19-1]=arguments[_key19];}return i.execute.apply(i,t);}},{key:"names",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function names(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function names$(_context20){while(1){switch(_context20.prev=_context20.next){case 0:return _context20.delegateYield(this._commands.keys(),"t0",1);case 1:case"end":return _context20.stop();}}},names,this);})},{key:"commands",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function commands(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function commands$(_context21){while(1){switch(_context21.prev=_context21.next){case 0:return _context21.delegateYield(this._commands.values(),"t0",1);case 1:case"end":return _context21.stop();}}},commands,this);})},{key:_Symbol$iterator9,value:function value(){return this._commands[Symbol.iterator]();}},{key:"destroy",value:function destroy(){var _iterator174=_createForOfIteratorHelper(this.commands()),_step174;try{for(_iterator174.s();!(_step174=_iterator174.n()).done;){var _e127=_step174.value;_e127.destroy();}}catch(err){_iterator174.e(err);}finally{_iterator174.f();}}}]);return Ua;}(Symbol.iterator);var Wa=/*#__PURE__*/function(){function Wa(){_classCallCheck(this,Wa);this._consumables=new Map();}_createClass(Wa,[{key:"add",value:function add(e,t){var i;e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):(this._consumables.has(e)?i=this._consumables.get(e):(i=new qa(e),this._consumables.set(e,i)),i.add(t));}},{key:"test",value:function test(e,t){var i=this._consumables.get(e);return void 0===i?null:e.is("$text")||e.is("documentFragment")?i:i.test(t);}},{key:"consume",value:function consume(e,t){return!!this.test(e,t)&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!1):this._consumables.get(e).consume(t),!0);}},{key:"revert",value:function revert(e,t){var i=this._consumables.get(e);void 0!==i&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):i.revert(t));}}],[{key:"consumablesFromElement",value:function consumablesFromElement(e){var t={element:e,name:!0,attributes:[],classes:[],styles:[]},i=e.getAttributeKeys();var _iterator175=_createForOfIteratorHelper(i),_step175;try{for(_iterator175.s();!(_step175=_iterator175.n()).done;){var _e128=_step175.value;"style"!=_e128&&"class"!=_e128&&t.attributes.push(_e128);}}catch(err){_iterator175.e(err);}finally{_iterator175.f();}var n=e.getClassNames();var _iterator176=_createForOfIteratorHelper(n),_step176;try{for(_iterator176.s();!(_step176=_iterator176.n()).done;){var _e129=_step176.value;t.classes.push(_e129);}}catch(err){_iterator176.e(err);}finally{_iterator176.f();}var o=e.getStyleNames();var _iterator177=_createForOfIteratorHelper(o),_step177;try{for(_iterator177.s();!(_step177=_iterator177.n()).done;){var _e130=_step177.value;t.styles.push(_e130);}}catch(err){_iterator177.e(err);}finally{_iterator177.f();}return t;}},{key:"createFrom",value:function createFrom(e,t){if(t||(t=new Wa(e)),e.is("$text"))return t.add(e),t;e.is("element")&&t.add(e,Wa.consumablesFromElement(e)),e.is("documentFragment")&&t.add(e);var _iterator178=_createForOfIteratorHelper(e.getChildren()),_step178;try{for(_iterator178.s();!(_step178=_iterator178.n()).done;){var _i131=_step178.value;t=Wa.createFrom(_i131,t);}}catch(err){_iterator178.e(err);}finally{_iterator178.f();}return t;}}]);return Wa;}();var qa=/*#__PURE__*/function(){function qa(e){_classCallCheck(this,qa);this.element=e,this._canConsumeName=null,this._consumables={attributes:new Map(),styles:new Map(),classes:new Map()};}_createClass(qa,[{key:"add",value:function add(e){e.name&&(this._canConsumeName=!0);for(var _t123 in this._consumables){_t123 in e&&this._add(_t123,e[_t123]);}}},{key:"test",value:function test(e){if(e.name&&!this._canConsumeName)return this._canConsumeName;for(var _t124 in this._consumables){if(_t124 in e){var _i132=this._test(_t124,e[_t124]);if(!0!==_i132)return _i132;}}return!0;}},{key:"consume",value:function consume(e){e.name&&(this._canConsumeName=!1);for(var _t125 in this._consumables){_t125 in e&&this._consume(_t125,e[_t125]);}}},{key:"revert",value:function revert(e){e.name&&(this._canConsumeName=!0);for(var _t126 in this._consumables){_t126 in e&&this._revert(_t126,e[_t126]);}}},{key:"_add",value:function _add(e,t){var i=_e(t)?t:[t],n=this._consumables[e];var _iterator179=_createForOfIteratorHelper(i),_step179;try{for(_iterator179.s();!(_step179=_iterator179.n()).done;){var _t127=_step179.value;if("attributes"===e&&("class"===_t127||"style"===_t127))throw new c.a("viewconsumable-invalid-attribute",this);if(n.set(_t127,!0),"styles"===e){var _iterator180=_createForOfIteratorHelper(this.element.document.stylesProcessor.getRelatedStyles(_t127)),_step180;try{for(_iterator180.s();!(_step180=_iterator180.n()).done;){var _e131=_step180.value;n.set(_e131,!0);}}catch(err){_iterator180.e(err);}finally{_iterator180.f();}}}}catch(err){_iterator179.e(err);}finally{_iterator179.f();}}},{key:"_test",value:function _test(e,t){var i=_e(t)?t:[t],n=this._consumables[e];var _iterator181=_createForOfIteratorHelper(i),_step181;try{for(_iterator181.s();!(_step181=_iterator181.n()).done;){var _t128=_step181.value;if("attributes"!==e||"class"!==_t128&&"style"!==_t128){var _e132=n.get(_t128);if(void 0===_e132)return null;if(!_e132)return!1;}else{var _e133="class"==_t128?"classes":"styles",_i133=this._test(_e133,_toConsumableArray(this._consumables[_e133].keys()));if(!0!==_i133)return _i133;}}}catch(err){_iterator181.e(err);}finally{_iterator181.f();}return!0;}},{key:"_consume",value:function _consume(e,t){var i=_e(t)?t:[t],n=this._consumables[e];var _iterator182=_createForOfIteratorHelper(i),_step182;try{for(_iterator182.s();!(_step182=_iterator182.n()).done;){var _t129=_step182.value;if("attributes"!==e||"class"!==_t129&&"style"!==_t129){if(n.set(_t129,!1),"styles"==e){var _iterator183=_createForOfIteratorHelper(this.element.document.stylesProcessor.getRelatedStyles(_t129)),_step183;try{for(_iterator183.s();!(_step183=_iterator183.n()).done;){var _e134=_step183.value;n.set(_e134,!1);}}catch(err){_iterator183.e(err);}finally{_iterator183.f();}}}else{var _e135="class"==_t129?"classes":"styles";this._consume(_e135,_toConsumableArray(this._consumables[_e135].keys()));}}}catch(err){_iterator182.e(err);}finally{_iterator182.f();}}},{key:"_revert",value:function _revert(e,t){var i=_e(t)?t:[t],n=this._consumables[e];var _iterator184=_createForOfIteratorHelper(i),_step184;try{for(_iterator184.s();!(_step184=_iterator184.n()).done;){var _t130=_step184.value;if("attributes"!==e||"class"!==_t130&&"style"!==_t130){!1===n.get(_t130)&&n.set(_t130,!0);}else{var _e136="class"==_t130?"classes":"styles";this._revert(_e136,_toConsumableArray(this._consumables[_e136].keys()));}}}catch(err){_iterator184.e(err);}finally{_iterator184.f();}}}]);return qa;}();var $a=/*#__PURE__*/function(){function $a(){var _this58=this;_classCallCheck(this,$a);this._sourceDefinitions={},this._attributeProperties={},this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",function(e,t){t[0]=new Ya(t[0]);},{priority:"highest"}),this.on("checkChild",function(e,t){t[0]=new Ya(t[0]),t[1]=_this58.getDefinition(t[1]);},{priority:"highest"});}_createClass($a,[{key:"register",value:function register(e,t){if(this._sourceDefinitions[e])throw new c.a("schema-cannot-register-item-twice",this,{itemName:e});this._sourceDefinitions[e]=[Object.assign({},t)],this._clearCache();}},{key:"extend",value:function extend(e,t){if(!this._sourceDefinitions[e])throw new c.a("schema-cannot-extend-missing-item",this,{itemName:e});this._sourceDefinitions[e].push(Object.assign({},t)),this._clearCache();}},{key:"getDefinitions",value:function getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions;}},{key:"getDefinition",value:function getDefinition(e){var t;return t="string"==typeof e?e:e.is&&(e.is("$text")||e.is("$textProxy"))?"$text":e.name,this.getDefinitions()[t];}},{key:"isRegistered",value:function isRegistered(e){return!!this.getDefinition(e);}},{key:"isBlock",value:function isBlock(e){var t=this.getDefinition(e);return!(!t||!t.isBlock);}},{key:"isLimit",value:function isLimit(e){var t=this.getDefinition(e);return!!t&&!(!t.isLimit&&!t.isObject);}},{key:"isObject",value:function isObject(e){var t=this.getDefinition(e);return!!t&&!!(t.isObject||t.isLimit&&t.isSelectable&&t.isContent);}},{key:"isInline",value:function isInline(e){var t=this.getDefinition(e);return!(!t||!t.isInline);}},{key:"isSelectable",value:function isSelectable(e){var t=this.getDefinition(e);return!!t&&!(!t.isSelectable&&!t.isObject);}},{key:"isContent",value:function isContent(e){var t=this.getDefinition(e);return!!t&&!(!t.isContent&&!t.isObject);}},{key:"checkChild",value:function checkChild(e,t){return!!t&&this._checkContextMatch(t,e);}},{key:"checkAttribute",value:function checkAttribute(e,t){var i=this.getDefinition(e.last);return!!i&&i.allowAttributes.includes(t);}},{key:"checkMerge",value:function checkMerge(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(e instanceof ea){var _t131=e.nodeBefore,_i134=e.nodeAfter;if(!(_t131 instanceof Js))throw new c.a("schema-check-merge-no-element-before",this);if(!(_i134 instanceof Js))throw new c.a("schema-check-merge-no-element-after",this);return this.checkMerge(_t131,_i134);}var _iterator185=_createForOfIteratorHelper(t.getChildren()),_step185;try{for(_iterator185.s();!(_step185=_iterator185.n()).done;){var _i135=_step185.value;if(!this.checkChild(e,_i135))return!1;}}catch(err){_iterator185.e(err);}finally{_iterator185.f();}return!0;}},{key:"addChildCheck",value:function addChildCheck(e){this.on("checkChild",function(t,_ref16){var _ref17=_slicedToArray(_ref16,2),i=_ref17[0],n=_ref17[1];if(!n)return;var o=e(i,n);"boolean"==typeof o&&(t.stop(),t["return"]=o);},{priority:"high"});}},{key:"addAttributeCheck",value:function addAttributeCheck(e){this.on("checkAttribute",function(t,_ref18){var _ref19=_slicedToArray(_ref18,2),i=_ref19[0],n=_ref19[1];var o=e(i,n);"boolean"==typeof o&&(t.stop(),t["return"]=o);},{priority:"high"});}},{key:"setAttributeProperties",value:function setAttributeProperties(e,t){this._attributeProperties[e]=Object.assign(this.getAttributeProperties(e),t);}},{key:"getAttributeProperties",value:function getAttributeProperties(e){return this._attributeProperties[e]||{};}},{key:"getLimitElement",value:function getLimitElement(e){var t;if(e instanceof ea)t=e.parent;else{t=(e instanceof oa?[e]:Array.from(e.getRanges())).reduce(function(e,t){var i=t.getCommonAncestor();return e?e.getCommonAncestor(i,{includeSelf:!0}):i;},null);}for(;!this.isLimit(t)&&t.parent;){t=t.parent;}return t;}},{key:"checkAttributeInSelection",value:function checkAttributeInSelection(e,t){if(e.isCollapsed){var _i136=[].concat(_toConsumableArray(e.getFirstPosition().getAncestors()),[new Gs("",e.getAttributes())]);return this.checkAttribute(_i136,t);}{var _i137=e.getRanges();var _iterator186=_createForOfIteratorHelper(_i137),_step186;try{for(_iterator186.s();!(_step186=_iterator186.n()).done;){var _e137=_step186.value;var _iterator187=_createForOfIteratorHelper(_e137),_step187;try{for(_iterator187.s();!(_step187=_iterator187.n()).done;){var _i138=_step187.value;if(this.checkAttribute(_i138.item,t))return!0;}}catch(err){_iterator187.e(err);}finally{_iterator187.f();}}}catch(err){_iterator186.e(err);}finally{_iterator186.f();}}return!1;}},{key:"getValidRanges",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getValidRanges(e,t){var _iterator189,_step189,_i139;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getValidRanges$(_context23){while(1){switch(_context23.prev=_context23.next){case 0:e=/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function _callee(e){var _iterator188,_step188,_t132;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _callee$(_context22){while(1){switch(_context22.prev=_context22.next){case 0:_iterator188=_createForOfIteratorHelper(e);_context22.prev=1;_iterator188.s();case 3:if((_step188=_iterator188.n()).done){_context22.next=8;break;}_t132=_step188.value;return _context22.delegateYield(_t132.getMinimalFlatRanges(),"t0",6);case 6:_context22.next=3;break;case 8:_context22.next=13;break;case 10:_context22.prev=10;_context22.t1=_context22["catch"](1);_iterator188.e(_context22.t1);case 13:_context22.prev=13;_iterator188.f();return _context22.finish(13);case 16:case"end":return _context22.stop();}}},_callee,null,[[1,10,13,16]]);})(e);_iterator189=_createForOfIteratorHelper(e);_context23.prev=2;_iterator189.s();case 4:if((_step189=_iterator189.n()).done){_context23.next=9;break;}_i139=_step189.value;return _context23.delegateYield(this._getValidRangesForRange(_i139,t),"t0",7);case 7:_context23.next=4;break;case 9:_context23.next=14;break;case 11:_context23.prev=11;_context23.t1=_context23["catch"](2);_iterator189.e(_context23.t1);case 14:_context23.prev=14;_iterator189.f();return _context23.finish(14);case 17:case"end":return _context23.stop();}}},getValidRanges,this,[[2,11,14,17]]);})},{key:"getNearestSelectionRange",value:function getNearestSelectionRange(e){var _this59=this;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"both";if(this.checkChild(e,"$text"))return new oa(e);var i,n;var o=e.getAncestors().reverse().find(function(e){return _this59.isLimit(e);})||e.root;"both"!=t&&"backward"!=t||(i=new Zs({boundaries:oa._createIn(o),startPosition:e,direction:"backward"})),"both"!=t&&"forward"!=t||(n=new Zs({boundaries:oa._createIn(o),startPosition:e}));var _iterator190=_createForOfIteratorHelper(/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function _callee2(e,t){var i,_t133,_e138;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _callee2$(_context24){while(1){switch(_context24.prev=_context24.next){case 0:i=!1;case 1:if(i){_context24.next=18;break;}if(!(i=!0,e)){_context24.next=9;break;}_t133=e.next();_context24.t0=_t133.done;if(_context24.t0){_context24.next=9;break;}i=!1;_context24.next=9;return{walker:e,value:_t133.value};case 9:if(!t){_context24.next=16;break;}_e138=t.next();_context24.t1=_e138.done;if(_context24.t1){_context24.next=16;break;}i=!1;_context24.next=16;return{walker:t,value:_e138.value};case 16:_context24.next=1;break;case 18:case"end":return _context24.stop();}}},_callee2);})(i,n)),_step190;try{for(_iterator190.s();!(_step190=_iterator190.n()).done;){var _e139=_step190.value;var _t134=_e139.walker==i?"elementEnd":"elementStart",_n69=_e139.value;if(_n69.type==_t134&&this.isObject(_n69.item))return oa._createOn(_n69.item);if(this.checkChild(_n69.nextPosition,"$text"))return new oa(_n69.nextPosition);}}catch(err){_iterator190.e(err);}finally{_iterator190.f();}return null;}},{key:"findAllowedParent",value:function findAllowedParent(e,t){var i=e.parent;for(;i;){if(this.checkChild(i,t))return i;if(this.isLimit(i))return null;i=i.parent;}return null;}},{key:"removeDisallowedAttributes",value:function removeDisallowedAttributes(e,t){var _iterator191=_createForOfIteratorHelper(e),_step191;try{for(_iterator191.s();!(_step191=_iterator191.n()).done;){var _i140=_step191.value;if(_i140.is("$text"))sc(this,_i140,t);else{var _e140=oa._createIn(_i140).getPositions();var _iterator192=_createForOfIteratorHelper(_e140),_step192;try{for(_iterator192.s();!(_step192=_iterator192.n()).done;){var _i141=_step192.value;sc(this,_i141.nodeBefore||_i141.parent,t);}}catch(err){_iterator192.e(err);}finally{_iterator192.f();}}}}catch(err){_iterator191.e(err);}finally{_iterator191.f();}}},{key:"createContext",value:function createContext(e){return new Ya(e);}},{key:"_clearCache",value:function _clearCache(){this._compiledDefinitions=null;}},{key:"_compile",value:function _compile(){var e={},t=this._sourceDefinitions,i=Object.keys(t);for(var _i143=0,_i142=i;_i143<_i142.length;_i143++){var _n70=_i142[_i143];e[_n70]=Ga(t[_n70],_n70);}for(var _i145=0,_i144=i;_i145<_i144.length;_i145++){var _t135=_i144[_i145];Ka(e,_t135);}for(var _i147=0,_i146=i;_i147<_i146.length;_i147++){var _t136=_i146[_i147];Qa(e,_t136);}for(var _i149=0,_i148=i;_i149<_i148.length;_i149++){var _t137=_i148[_i149];Ja(e,_t137);}for(var _i151=0,_i150=i;_i151<_i150.length;_i151++){var _t138=_i150[_i151];Za(e,_t138),Xa(e,_t138);}for(var _i153=0,_i152=i;_i153<_i152.length;_i153++){var _t139=_i152[_i153];ec(e,_t139),tc(e,_t139),ic(e,_t139);}this._compiledDefinitions=e;}},{key:"_checkContextMatch",value:function _checkContextMatch(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:t.length-1;var n=t.getItem(i);if(e.allowIn.includes(n.name)){if(0==i)return!0;{var _e141=this.getDefinition(n);return this._checkContextMatch(_e141,t,i-1);}}return!1;}},{key:"_getValidRangesForRange",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function _getValidRangesForRange(e,t){var i,n,_iterator193,_step193,_o41;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _getValidRangesForRange$(_context25){while(1){switch(_context25.prev=_context25.next){case 0:i=e.start,n=e.start;_iterator193=_createForOfIteratorHelper(e.getItems({shallow:!0}));_context25.prev=2;_iterator193.s();case 4:if((_step193=_iterator193.n()).done){_context25.next=19;break;}_o41=_step193.value;_context25.t0=_o41.is("element");if(!_context25.t0){_context25.next=9;break;}return _context25.delegateYield(this._getValidRangesForRange(oa._createIn(_o41),t),"t1",9);case 9:_context25.t2=this.checkAttribute(_o41,t);if(_context25.t2){_context25.next=16;break;}_context25.t3=i.isEqual(n);if(_context25.t3){_context25.next=15;break;}_context25.next=15;return new oa(i,n);case 15:i=ea._createAfter(_o41);case 16:n=ea._createAfter(_o41);case 17:_context25.next=4;break;case 19:_context25.next=24;break;case 21:_context25.prev=21;_context25.t4=_context25["catch"](2);_iterator193.e(_context25.t4);case 24:_context25.prev=24;_iterator193.f();return _context25.finish(24);case 27:_context25.t5=i.isEqual(n);if(_context25.t5){_context25.next=31;break;}_context25.next=31;return new oa(i,n);case 31:case"end":return _context25.stop();}}},_getValidRangesForRange,this,[[2,21,24,27]]);})}]);return $a;}();Ke($a,Ue);var Ya=/*#__PURE__*/function(_Symbol$iterator10){function Ya(e){_classCallCheck(this,Ya);if(e instanceof Ya)return e;"string"==typeof e?e=[e]:Array.isArray(e)||(e=e.getAncestors({includeSelf:!0})),this._items=e.map(rc);}_createClass(Ya,[{key:"length",get:function get(){return this._items.length;}},{key:"last",get:function get(){return this._items[this._items.length-1];}},{key:_Symbol$iterator10,value:function value(){return this._items[Symbol.iterator]();}},{key:"push",value:function push(e){var t=new Ya([e]);return t._items=[].concat(_toConsumableArray(this._items),_toConsumableArray(t._items)),t;}},{key:"getItem",value:function getItem(e){return this._items[e];}},{key:"getNames",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getNames(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getNames$(_context26){while(1){switch(_context26.prev=_context26.next){case 0:return _context26.delegateYield(this._items.map(function(e){return e.name;}),"t0",1);case 1:case"end":return _context26.stop();}}},getNames,this);})},{key:"endsWith",value:function endsWith(e){return Array.from(this.getNames()).join(" ").endsWith(e);}},{key:"startsWith",value:function startsWith(e){return Array.from(this.getNames()).join(" ").startsWith(e);}}]);return Ya;}(Symbol.iterator);function Ga(e,t){var i={name:t,allowIn:[],allowContentOf:[],allowWhere:[],allowAttributes:[],allowAttributesOf:[],allowChildren:[],inheritTypesFrom:[]};return function(e,t){var _iterator194=_createForOfIteratorHelper(e),_step194;try{for(_iterator194.s();!(_step194=_iterator194.n()).done;){var _i154=_step194.value;var _e142=Object.keys(_i154).filter(function(e){return e.startsWith("is");});var _iterator195=_createForOfIteratorHelper(_e142),_step195;try{for(_iterator195.s();!(_step195=_iterator195.n()).done;){var _n71=_step195.value;t[_n71]=_i154[_n71];}}catch(err){_iterator195.e(err);}finally{_iterator195.f();}}}catch(err){_iterator194.e(err);}finally{_iterator194.f();}}(e,i),nc(e,i,"allowIn"),nc(e,i,"allowContentOf"),nc(e,i,"allowWhere"),nc(e,i,"allowAttributes"),nc(e,i,"allowAttributesOf"),nc(e,i,"allowChildren"),nc(e,i,"inheritTypesFrom"),function(e,t){var _iterator196=_createForOfIteratorHelper(e),_step196;try{for(_iterator196.s();!(_step196=_iterator196.n()).done;){var _i155=_step196.value;var _e143=_i155.inheritAllFrom;_e143&&(t.allowContentOf.push(_e143),t.allowWhere.push(_e143),t.allowAttributesOf.push(_e143),t.inheritTypesFrom.push(_e143));}}catch(err){_iterator196.e(err);}finally{_iterator196.f();}}(e,i),i;}function Ka(e,t){var i=e[t];var _iterator197=_createForOfIteratorHelper(i.allowChildren),_step197;try{for(_iterator197.s();!(_step197=_iterator197.n()).done;){var _n72=_step197.value;var _i156=e[_n72];_i156&&_i156.allowIn.push(t);}}catch(err){_iterator197.e(err);}finally{_iterator197.f();}i.allowChildren.length=0;}function Qa(e,t){var _iterator198=_createForOfIteratorHelper(e[t].allowContentOf),_step198;try{for(_iterator198.s();!(_step198=_iterator198.n()).done;){var _i157=_step198.value;if(e[_i157]){oc(e,_i157).forEach(function(e){e.allowIn.push(t);});}}}catch(err){_iterator198.e(err);}finally{_iterator198.f();}delete e[t].allowContentOf;}function Ja(e,t){var _iterator199=_createForOfIteratorHelper(e[t].allowWhere),_step199;try{for(_iterator199.s();!(_step199=_iterator199.n()).done;){var _i158=_step199.value;var _n73=e[_i158];if(_n73){var _e$t$allowIn;var _i159=_n73.allowIn;(_e$t$allowIn=e[t].allowIn).push.apply(_e$t$allowIn,_toConsumableArray(_i159));}}}catch(err){_iterator199.e(err);}finally{_iterator199.f();}delete e[t].allowWhere;}function Za(e,t){var _iterator200=_createForOfIteratorHelper(e[t].allowAttributesOf),_step200;try{for(_iterator200.s();!(_step200=_iterator200.n()).done;){var _i160=_step200.value;var _n74=e[_i160];if(_n74){var _e$t$allowAttributes;var _i161=_n74.allowAttributes;(_e$t$allowAttributes=e[t].allowAttributes).push.apply(_e$t$allowAttributes,_toConsumableArray(_i161));}}}catch(err){_iterator200.e(err);}finally{_iterator200.f();}delete e[t].allowAttributesOf;}function Xa(e,t){var i=e[t];var _iterator201=_createForOfIteratorHelper(i.inheritTypesFrom),_step201;try{for(_iterator201.s();!(_step201=_iterator201.n()).done;){var _t140=_step201.value;var _n75=e[_t140];if(_n75){var _e144=Object.keys(_n75).filter(function(e){return e.startsWith("is");});var _iterator202=_createForOfIteratorHelper(_e144),_step202;try{for(_iterator202.s();!(_step202=_iterator202.n()).done;){var _t141=_step202.value;_t141 in i||(i[_t141]=_n75[_t141]);}}catch(err){_iterator202.e(err);}finally{_iterator202.f();}}}}catch(err){_iterator201.e(err);}finally{_iterator201.f();}delete i.inheritTypesFrom;}function ec(e,t){var i=e[t],n=i.allowIn.filter(function(t){return e[t];});i.allowIn=Array.from(new Set(n));}function tc(e,t){var i=e[t];var _iterator203=_createForOfIteratorHelper(i.allowIn),_step203;try{for(_iterator203.s();!(_step203=_iterator203.n()).done;){var _n76=_step203.value;e[_n76].allowChildren.push(t);}}catch(err){_iterator203.e(err);}finally{_iterator203.f();}}function ic(e,t){var i=e[t];i.allowAttributes=Array.from(new Set(i.allowAttributes));}function nc(e,t,i){var _iterator204=_createForOfIteratorHelper(e),_step204;try{for(_iterator204.s();!(_step204=_iterator204.n()).done;){var _t$i;var _n77=_step204.value;"string"==typeof _n77[i]?t[i].push(_n77[i]):Array.isArray(_n77[i])&&(_t$i=t[i]).push.apply(_t$i,_toConsumableArray(_n77[i]));}}catch(err){_iterator204.e(err);}finally{_iterator204.f();}}function oc(e,t){var i=e[t];return(n=e,Object.keys(n).map(function(e){return n[e];})).filter(function(e){return e.allowIn.includes(i.name);});var n;}function rc(e){return"string"==typeof e||e.is("documentFragment")?{name:"string"==typeof e?e:"$documentFragment",getAttributeKeys:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getAttributeKeys(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getAttributeKeys$(_context27){while(1){switch(_context27.prev=_context27.next){case 0:case"end":return _context27.stop();}}},getAttributeKeys);}),getAttribute:function getAttribute(){}}:{name:e.is("element")?e.name:"$text",getAttributeKeys:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getAttributeKeys(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getAttributeKeys$(_context28){while(1){switch(_context28.prev=_context28.next){case 0:return _context28.delegateYield(e.getAttributeKeys(),"t0",1);case 1:case"end":return _context28.stop();}}},getAttributeKeys);}),getAttribute:function getAttribute(t){return e.getAttribute(t);}};}function sc(e,t,i){var _iterator205=_createForOfIteratorHelper(t.getAttributeKeys()),_step205;try{for(_iterator205.s();!(_step205=_iterator205.n()).done;){var _n78=_step205.value;e.checkAttribute(t,_n78)||i.removeAttribute(_n78,t);}}catch(err){_iterator205.e(err);}finally{_iterator205.f();}}var ac=/*#__PURE__*/function(){function ac(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,ac);this._splitParts=new Map(),this._cursorParents=new Map(),this._modelCursor=null,this.conversionApi=Object.assign({},e),this.conversionApi.convertItem=this._convertItem.bind(this),this.conversionApi.convertChildren=this._convertChildren.bind(this),this.conversionApi.safeInsert=this._safeInsert.bind(this),this.conversionApi.updateConversionResult=this._updateConversionResult.bind(this),this.conversionApi.splitToAllowedParent=this._splitToAllowedParent.bind(this),this.conversionApi.getSplitParts=this._getSplitParts.bind(this);}_createClass(ac,[{key:"convert",value:function convert(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:["$root"];this.fire("viewCleanup",e),this._modelCursor=function(e,t){var i;var _iterator206=_createForOfIteratorHelper(new Ya(e)),_step206;try{for(_iterator206.s();!(_step206=_iterator206.n()).done;){var _n79=_step206.value;var _e145={};var _iterator207=_createForOfIteratorHelper(_n79.getAttributeKeys()),_step207;try{for(_iterator207.s();!(_step207=_iterator207.n()).done;){var _t142=_step207.value;_e145[_t142]=_n79.getAttribute(_t142);}}catch(err){_iterator207.e(err);}finally{_iterator207.f();}var _o42=t.createElement(_n79.name,_e145);i&&t.append(_o42,i),i=ea._createAt(_o42,0);}}catch(err){_iterator206.e(err);}finally{_iterator206.f();}return i;}(i,t),this.conversionApi.writer=t,this.conversionApi.consumable=Wa.createFrom(e),this.conversionApi.store={};var _this$_convertItem=this._convertItem(e,this._modelCursor),n=_this$_convertItem.modelRange,o=t.createDocumentFragment();if(n){this._removeEmptyElements();for(var _i162=0,_Array$from4=Array.from(this._modelCursor.parent.getChildren());_i162<_Array$from4.length;_i162++){var _e146=_Array$from4[_i162];t.append(_e146,o);}o.markers=function(e,t){var i=new Set(),n=new Map(),o=oa._createIn(e).getItems();var _iterator208=_createForOfIteratorHelper(o),_step208;try{for(_iterator208.s();!(_step208=_iterator208.n()).done;){var _e147=_step208.value;"$marker"==_e147.name&&i.add(_e147);}}catch(err){_iterator208.e(err);}finally{_iterator208.f();}var _iterator209=_createForOfIteratorHelper(i),_step209;try{for(_iterator209.s();!(_step209=_iterator209.n()).done;){var _e148=_step209.value;var _i163=_e148.getAttribute("data-name"),_o43=t.createPositionBefore(_e148);n.has(_i163)?n.get(_i163).end=_o43.clone():n.set(_i163,new oa(_o43.clone())),t.remove(_e148);}}catch(err){_iterator209.e(err);}finally{_iterator209.f();}return n;}(o,t);}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,o;}},{key:"_convertItem",value:function _convertItem(e,t){var i=Object.assign({viewItem:e,modelCursor:t,modelRange:null});if(e.is("element")?this.fire("element:"+e.name,i,this.conversionApi):e.is("$text")?this.fire("text",i,this.conversionApi):this.fire("documentFragment",i,this.conversionApi),i.modelRange&&!(i.modelRange instanceof oa))throw new c.a("view-conversion-dispatcher-incorrect-result",this);return{modelRange:i.modelRange,modelCursor:i.modelCursor};}},{key:"_convertChildren",value:function _convertChildren(e,t){var i=t.is("position")?t:ea._createAt(t,0);var n=new oa(i);for(var _i164=0,_Array$from5=Array.from(e.getChildren());_i164<_Array$from5.length;_i164++){var _t143=_Array$from5[_i164];var _e149=this._convertItem(_t143,i);_e149.modelRange instanceof oa&&(n.end=_e149.modelRange.end,i=_e149.modelCursor);}return{modelRange:n,modelCursor:i};}},{key:"_safeInsert",value:function _safeInsert(e,t){var i=this._splitToAllowedParent(e,t);return!!i&&(this.conversionApi.writer.insert(e,i.position),!0);}},{key:"_updateConversionResult",value:function _updateConversionResult(e,t){var i=this._getSplitParts(e),n=this.conversionApi.writer;t.modelRange||(t.modelRange=n.createRange(n.createPositionBefore(e),n.createPositionAfter(i[i.length-1])));var o=this._cursorParents.get(e);t.modelCursor=o?n.createPositionAt(o,0):t.modelRange.end;}},{key:"_splitToAllowedParent",value:function _splitToAllowedParent(e,t){var _this$conversionApi=this.conversionApi,i=_this$conversionApi.schema,n=_this$conversionApi.writer;var o=i.findAllowedParent(t,e);if(o){if(o===t.parent)return{position:t};this._modelCursor.parent.getAncestors().includes(o)&&(o=null);}if(!o)return Ra(t,e,i)?{position:Oa(t,n)}:null;var r=this.conversionApi.writer.split(t,o),s=[];var _iterator210=_createForOfIteratorHelper(r.range.getWalker()),_step210;try{for(_iterator210.s();!(_step210=_iterator210.n()).done;){var _e150=_step210.value;if("elementEnd"==_e150.type)s.push(_e150.item);else{var _t144=s.pop(),_i165=_e150.item;this._registerSplitPair(_t144,_i165);}}}catch(err){_iterator210.e(err);}finally{_iterator210.f();}var a=r.range.end.parent;return this._cursorParents.set(e,a),{position:r.position,cursorParent:a};}},{key:"_registerSplitPair",value:function _registerSplitPair(e,t){this._splitParts.has(e)||this._splitParts.set(e,[e]);var i=this._splitParts.get(e);this._splitParts.set(t,i),i.push(t);}},{key:"_getSplitParts",value:function _getSplitParts(e){var t;return t=this._splitParts.has(e)?this._splitParts.get(e):[e],t;}},{key:"_removeEmptyElements",value:function _removeEmptyElements(){var e=!1;var _iterator211=_createForOfIteratorHelper(this._splitParts.keys()),_step211;try{for(_iterator211.s();!(_step211=_iterator211.n()).done;){var _t145=_step211.value;_t145.isEmpty&&(this.conversionApi.writer.remove(_t145),this._splitParts["delete"](_t145),e=!0);}}catch(err){_iterator211.e(err);}finally{_iterator211.f();}e&&this._removeEmptyElements();}}]);return ac;}();Ke(ac,h);var cc=/*#__PURE__*/function(){function cc(){_classCallCheck(this,cc);}_createClass(cc,[{key:"getHtml",value:function getHtml(e){var t=document.implementation.createHTMLDocument("").createElement("div");return t.appendChild(e),t.innerHTML;}}]);return cc;}();var lc=/*#__PURE__*/function(){function lc(e){_classCallCheck(this,lc);this._domParser=new DOMParser(),this._domConverter=new Er(e,{blockFillerMode:"nbsp"}),this._htmlWriter=new cc();}_createClass(lc,[{key:"toData",value:function toData(e){var t=this._domConverter.viewToDom(e,document);return this._htmlWriter.getHtml(t);}},{key:"toView",value:function toView(e){var t=this._toDom(e);return this._domConverter.domToView(t);}},{key:"registerRawContentMatcher",value:function registerRawContentMatcher(e){this._domConverter.registerRawContentMatcher(e);}},{key:"useFillerType",value:function useFillerType(e){this._domConverter.blockFillerMode="marked"==e?"markedNbsp":"nbsp";}},{key:"_toDom",value:function _toDom(e){var t=this._domParser.parseFromString(e,"text/html"),i=t.createDocumentFragment();var n=t.firstChild;for(;!n.isSameNode(t.documentElement);){var _e151=n;n=n.nextSibling,_e151.nodeType==Node.COMMENT_NODE&&i.appendChild(_e151);}var o=t.body.childNodes;for(;o.length>0;){i.appendChild(o[0]);}return i;}}]);return lc;}();var dc=/*#__PURE__*/function(){function dc(e,t){var _this60=this;_classCallCheck(this,dc);this.model=e,this.mapper=new ra(),this.downcastDispatcher=new ca({mapper:this.mapper,schema:e.schema}),this.downcastDispatcher.on("insert:$text",function(e,t,i){if(!i.consumable.consume(t.item,"insert"))return;var n=i.writer,o=i.mapper.toViewPosition(t.range.start),r=n.createText(t.item.data);n.insert(o,r);},{priority:"lowest"}),this.upcastDispatcher=new ac({schema:e.schema}),this.viewDocument=new yo(t),this.stylesProcessor=t,this.htmlProcessor=new lc(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new qo(this.viewDocument),this.upcastDispatcher.on("text",function(e,t,_ref20){var i=_ref20.schema,n=_ref20.consumable,o=_ref20.writer;var r=t.modelCursor;if(!n.test(t.viewItem))return;if(!i.checkChild(r,"$text")){if(!Ra(r,"$text",i))return;r=Oa(r,o);}n.consume(t.viewItem);var s=o.createText(t.viewItem.data);o.insert(s,r),t.modelRange=o.createRange(r,r.getShiftedBy(s.offsetSize)),t.modelCursor=t.modelRange.end;},{priority:"lowest"}),this.upcastDispatcher.on("element",function(e,t,i){if(!t.modelRange&&i.consumable.consume(t.viewItem,{name:!0})){var _i$convertChildren=i.convertChildren(t.viewItem,t.modelCursor),_e152=_i$convertChildren.modelRange,_n80=_i$convertChildren.modelCursor;t.modelRange=_e152,t.modelCursor=_n80;}},{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",function(e,t,i){if(!t.modelRange&&i.consumable.consume(t.viewItem,{name:!0})){var _i$convertChildren2=i.convertChildren(t.viewItem,t.modelCursor),_e153=_i$convertChildren2.modelRange,_n81=_i$convertChildren2.modelCursor;t.modelRange=_e153,t.modelCursor=_n81;}},{priority:"lowest"}),this.decorate("init"),this.decorate("set"),this.on("init",function(){_this60.fire("ready");},{priority:"lowest"}),this.on("ready",function(){_this60.model.enqueueChange("transparent",Na);},{priority:"lowest"});}_createClass(dc,[{key:"get",value:function get(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var _e$rootName=e.rootName,t=_e$rootName===void 0?"main":_e$rootName,_e$trim=e.trim,i=_e$trim===void 0?"empty":_e$trim;if(!this._checkIfRootsExists([t]))throw new c.a("datacontroller-get-non-existent-root",this);var n=this.model.document.getRoot(t);return"empty"!==i||this.model.hasContent(n,{ignoreWhitespaces:!0})?this.stringify(n,e):"";}},{key:"stringify",value:function stringify(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=this.toView(e,t);return this.processor.toData(i);}},{key:"toView",value:function toView(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=this.viewDocument,n=this._viewWriter;this.mapper.clearBindings();var o=oa._createIn(e),r=new Wo(i);this.mapper.bindElements(e,r),this.downcastDispatcher.conversionApi.options=t,this.downcastDispatcher.convertInsert(o,n);var s=e.is("documentFragment")?Array.from(e.markers):function(e){var t=[],i=e.root.document;if(!i)return[];var n=oa._createIn(e);var _iterator212=_createForOfIteratorHelper(i.model.markers),_step212;try{for(_iterator212.s();!(_step212=_iterator212.n()).done;){var _e154=_step212.value;var _i166=_e154.getRange(),_o44=_i166.isCollapsed,_r22=_i166.start.isEqual(n.start)||_i166.end.isEqual(n.end);if(_o44&&_r22)t.push([_e154.name,_i166]);else{var _o45=n.getIntersection(_i166);_o45&&t.push([_e154.name,_o45]);}}}catch(err){_iterator212.e(err);}finally{_iterator212.f();}return t;}(e);var _iterator213=_createForOfIteratorHelper(s),_step213;try{for(_iterator213.s();!(_step213=_iterator213.n()).done;){var _step213$value=_slicedToArray(_step213.value,2),_e155=_step213$value[0],_t146=_step213$value[1];this.downcastDispatcher.convertMarkerAdd(_e155,_t146,n);}}catch(err){_iterator213.e(err);}finally{_iterator213.f();}return delete this.downcastDispatcher.conversionApi.options,r;}},{key:"init",value:function init(e){var _this61=this;if(this.model.document.version)throw new c.a("datacontroller-init-document-not-empty",this);var t={};if("string"==typeof e?t.main=e:t=e,!this._checkIfRootsExists(Object.keys(t)))throw new c.a("datacontroller-init-non-existent-root",this);return this.model.enqueueChange("transparent",function(e){for(var _i167=0,_Object$keys2=Object.keys(t);_i167<_Object$keys2.length;_i167++){var _i168=_Object$keys2[_i167];var _n82=_this61.model.document.getRoot(_i168);e.insert(_this61.parse(t[_i168],_n82),_n82,0);}}),Promise.resolve();}},{key:"set",value:function set(e){var _this62=this;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i={};if("string"==typeof e?i.main=e:i=e,!this._checkIfRootsExists(Object.keys(i)))throw new c.a("datacontroller-set-non-existent-root",this);var n=t.batchType||"default";this.model.enqueueChange(n,function(e){e.setSelection(null),e.removeSelectionAttribute(_this62.model.document.selection.getAttributeKeys());for(var _i169=0,_Object$keys3=Object.keys(i);_i169<_Object$keys3.length;_i169++){var _t147=_Object$keys3[_i169];var _n83=_this62.model.document.getRoot(_t147);e.remove(e.createRangeIn(_n83)),e.insert(_this62.parse(i[_t147],_n83),_n83,0);}});}},{key:"parse",value:function parse(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"$root";var i=this.processor.toView(e);return this.toModel(i,t);}},{key:"toModel",value:function toModel(e){var _this63=this;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"$root";return this.model.change(function(i){return _this63.upcastDispatcher.convert(e,i,t);});}},{key:"addStyleProcessorRules",value:function addStyleProcessorRules(e){e(this.stylesProcessor);}},{key:"registerRawContentMatcher",value:function registerRawContentMatcher(e){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(e),this.htmlProcessor.registerRawContentMatcher(e);}},{key:"destroy",value:function destroy(){this.stopListening();}},{key:"_checkIfRootsExists",value:function _checkIfRootsExists(e){var _iterator214=_createForOfIteratorHelper(e),_step214;try{for(_iterator214.s();!(_step214=_iterator214.n()).done;){var _t148=_step214.value;if(!this.model.document.getRootNames().includes(_t148))return!1;}}catch(err){_iterator214.e(err);}finally{_iterator214.f();}return!0;}}]);return dc;}();Ke(dc,Ue);var hc=/*#__PURE__*/function(){function hc(e,t){_classCallCheck(this,hc);this._helpers=new Map(),this._downcast=en(e),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=en(t),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1});}_createClass(hc,[{key:"addAlias",value:function addAlias(e,t){var i=this._downcast.includes(t);if(!this._upcast.includes(t)&&!i)throw new c.a("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:e,dispatchers:[t],isDowncast:i});}},{key:"for",value:function _for(e){if(!this._helpers.has(e))throw new c.a("conversion-for-unknown-group",this);return this._helpers.get(e);}},{key:"elementToElement",value:function elementToElement(e){this["for"]("downcast").elementToElement(e);var _iterator215=_createForOfIteratorHelper(uc(e)),_step215;try{for(_iterator215.s();!(_step215=_iterator215.n()).done;){var _step215$value=_step215.value,_t149=_step215$value.model,_i170=_step215$value.view;this["for"]("upcast").elementToElement({model:_t149,view:_i170,converterPriority:e.converterPriority});}}catch(err){_iterator215.e(err);}finally{_iterator215.f();}}},{key:"attributeToElement",value:function attributeToElement(e){this["for"]("downcast").attributeToElement(e);var _iterator216=_createForOfIteratorHelper(uc(e)),_step216;try{for(_iterator216.s();!(_step216=_iterator216.n()).done;){var _step216$value=_step216.value,_t150=_step216$value.model,_i171=_step216$value.view;this["for"]("upcast").elementToAttribute({view:_i171,model:_t150,converterPriority:e.converterPriority});}}catch(err){_iterator216.e(err);}finally{_iterator216.f();}}},{key:"attributeToAttribute",value:function attributeToAttribute(e){this["for"]("downcast").attributeToAttribute(e);var _iterator217=_createForOfIteratorHelper(uc(e)),_step217;try{for(_iterator217.s();!(_step217=_iterator217.n()).done;){var _step217$value=_step217.value,_t151=_step217$value.model,_i172=_step217$value.view;this["for"]("upcast").attributeToAttribute({view:_i172,model:_t151});}}catch(err){_iterator217.e(err);}finally{_iterator217.f();}}},{key:"_createConversionHelpers",value:function _createConversionHelpers(_ref21){var e=_ref21.name,t=_ref21.dispatchers,i=_ref21.isDowncast;if(this._helpers.has(e))throw new c.a("conversion-group-exists",this);var n=i?new Ca(t):new za(t);this._helpers.set(e,n);}}]);return hc;}();function uc(e){var _iterator218,_step218,_t152,_i173,_n84,_o46;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function uc$(_context29){while(1){switch(_context29.prev=_context29.next){case 0:if(!e.model.values){_context29.next=20;break;}_iterator218=_createForOfIteratorHelper(e.model.values);_context29.prev=2;_iterator218.s();case 4:if((_step218=_iterator218.n()).done){_context29.next=10;break;}_t152=_step218.value;_i173={key:e.model.key,value:_t152},_n84=e.view[_t152],_o46=e.upcastAlso?e.upcastAlso[_t152]:void 0;return _context29.delegateYield(gc(_i173,_n84,_o46),"t0",8);case 8:_context29.next=4;break;case 10:_context29.next=15;break;case 12:_context29.prev=12;_context29.t1=_context29["catch"](2);_iterator218.e(_context29.t1);case 15:_context29.prev=15;_iterator218.f();return _context29.finish(15);case 18:_context29.next=21;break;case 20:return _context29.delegateYield(gc(e.model,e.view,e.upcastAlso),"t2",21);case 21:case"end":return _context29.stop();}}},_marked,null,[[2,12,15,18]]);}function gc(e,t,i){var _iterator219,_step219,_t153;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function gc$(_context30){while(1){switch(_context30.prev=_context30.next){case 0:_context30.next=2;return{model:e,view:t};case 2:if(!i){_context30.next=20;break;}_iterator219=_createForOfIteratorHelper(en(i));_context30.prev=4;_iterator219.s();case 6:if((_step219=_iterator219.n()).done){_context30.next=12;break;}_t153=_step219.value;_context30.next=10;return{model:e,view:_t153};case 10:_context30.next=6;break;case 12:_context30.next=17;break;case 14:_context30.prev=14;_context30.t0=_context30["catch"](4);_iterator219.e(_context30.t0);case 17:_context30.prev=17;_iterator219.f();return _context30.finish(17);case 20:case"end":return _context30.stop();}}},_marked2,null,[[4,14,17,20]]);}var mc=/*#__PURE__*/function(){function mc(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"default";_classCallCheck(this,mc);this.operations=[],this.type=e;}_createClass(mc,[{key:"baseVersion",get:function get(){var _iterator220=_createForOfIteratorHelper(this.operations),_step220;try{for(_iterator220.s();!(_step220=_iterator220.n()).done;){var _e156=_step220.value;if(null!==_e156.baseVersion)return _e156.baseVersion;}}catch(err){_iterator220.e(err);}finally{_iterator220.f();}return null;}},{key:"addOperation",value:function addOperation(e){return e.batch=this,this.operations.push(e),e;}}]);return mc;}();var fc=/*#__PURE__*/function(){function fc(e){_classCallCheck(this,fc);this.baseVersion=e,this.isDocumentOperation=null!==this.baseVersion,this.batch=null;}_createClass(fc,[{key:"_validate",value:function _validate(){}},{key:"toJSON",value:function toJSON(){var e=Object.assign({},this);return e.__className=this.constructor.className,delete e.batch,delete e.isDocumentOperation,e;}}],[{key:"className",get:function get(){return"Operation";}},{key:"fromJSON",value:function fromJSON(e){return new this(e.baseVersion);}}]);return fc;}();var pc=/*#__PURE__*/function(_Symbol$iterator11){function pc(e){_classCallCheck(this,pc);this.markers=new Map(),this._children=new Qs(),e&&this._insertChild(0,e);}_createClass(pc,[{key:_Symbol$iterator11,value:function value(){return this.getChildren();}},{key:"childCount",get:function get(){return this._children.length;}},{key:"maxOffset",get:function get(){return this._children.maxOffset;}},{key:"isEmpty",get:function get(){return 0===this.childCount;}},{key:"root",get:function get(){return this;}},{key:"parent",get:function get(){return null;}},{key:"is",value:function is(e){return"documentFragment"===e||"model:documentFragment"===e;}},{key:"getChild",value:function getChild(e){return this._children.getNode(e);}},{key:"getChildren",value:function getChildren(){return this._children[Symbol.iterator]();}},{key:"getChildIndex",value:function getChildIndex(e){return this._children.getNodeIndex(e);}},{key:"getChildStartOffset",value:function getChildStartOffset(e){return this._children.getNodeStartOffset(e);}},{key:"getPath",value:function getPath(){return[];}},{key:"getNodeByPath",value:function getNodeByPath(e){var t=this;var _iterator221=_createForOfIteratorHelper(e),_step221;try{for(_iterator221.s();!(_step221=_iterator221.n()).done;){var _i174=_step221.value;t=t.getChild(t.offsetToIndex(_i174));}}catch(err){_iterator221.e(err);}finally{_iterator221.f();}return t;}},{key:"offsetToIndex",value:function offsetToIndex(e){return this._children.offsetToIndex(e);}},{key:"toJSON",value:function toJSON(){var e=[];var _iterator222=_createForOfIteratorHelper(this._children),_step222;try{for(_iterator222.s();!(_step222=_iterator222.n()).done;){var _t154=_step222.value;e.push(_t154.toJSON());}}catch(err){_iterator222.e(err);}finally{_iterator222.f();}return e;}},{key:"_appendChild",value:function _appendChild(e){this._insertChild(this.childCount,e);}},{key:"_insertChild",value:function _insertChild(e,t){var i=function(e){if("string"==typeof e)return[new Gs(e)];Ji(e)||(e=[e]);return Array.from(e).map(function(e){return"string"==typeof e?new Gs(e):e instanceof Ks?new Gs(e.data,e.getAttributes()):e;});}(t);var _iterator223=_createForOfIteratorHelper(i),_step223;try{for(_iterator223.s();!(_step223=_iterator223.n()).done;){var _e157=_step223.value;null!==_e157.parent&&_e157._remove(),_e157.parent=this;}}catch(err){_iterator223.e(err);}finally{_iterator223.f();}this._children._insertNodes(e,i);}},{key:"_removeChildren",value:function _removeChildren(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var i=this._children._removeNodes(e,t);var _iterator224=_createForOfIteratorHelper(i),_step224;try{for(_iterator224.s();!(_step224=_iterator224.n()).done;){var _e158=_step224.value;_e158.parent=null;}}catch(err){_iterator224.e(err);}finally{_iterator224.f();}return i;}}],[{key:"fromJSON",value:function fromJSON(e){var t=[];var _iterator225=_createForOfIteratorHelper(e),_step225;try{for(_iterator225.s();!(_step225=_iterator225.n()).done;){var _i175=_step225.value;_i175.name?t.push(Js.fromJSON(_i175)):t.push(Gs.fromJSON(_i175));}}catch(err){_iterator225.e(err);}finally{_iterator225.f();}return new pc(t);}}]);return pc;}(Symbol.iterator);function bc(e,t){var i=(t=_c(t)).reduce(function(e,t){return e+t.offsetSize;},0),n=e.parent;yc(e);var o=e.index;return n._insertChild(o,t),vc(n,o+t.length),vc(n,o),new oa(e,e.getShiftedBy(i));}function wc(e){if(!e.isFlat)throw new c.a("operation-utils-remove-range-not-flat",this);var t=e.start.parent;yc(e.start),yc(e.end);var i=t._removeChildren(e.start.index,e.end.index-e.start.index);return vc(t,e.start.index),i;}function kc(e,t){if(!e.isFlat)throw new c.a("operation-utils-move-range-not-flat",this);var i=wc(e);return bc(t=t._getTransformedByDeletion(e.start,e.end.offset-e.start.offset),i);}function _c(e){var t=[];e instanceof Array||(e=[e]);for(var _i176=0;_i176<e.length;_i176++){if("string"==typeof e[_i176])t.push(new Gs(e[_i176]));else if(e[_i176]instanceof Ks)t.push(new Gs(e[_i176].data,e[_i176].getAttributes()));else if(e[_i176]instanceof pc||e[_i176]instanceof Qs){var _iterator226=_createForOfIteratorHelper(e[_i176]),_step226;try{for(_iterator226.s();!(_step226=_iterator226.n()).done;){var _n85=_step226.value;t.push(_n85);}}catch(err){_iterator226.e(err);}finally{_iterator226.f();}}else e[_i176]instanceof Ys&&t.push(e[_i176]);}for(var _e159=1;_e159<t.length;_e159++){var _i177=t[_e159],_n86=t[_e159-1];_i177 instanceof Gs&&_n86 instanceof Gs&&xc(_i177,_n86)&&(t.splice(_e159-1,2,new Gs(_n86.data+_i177.data,_n86.getAttributes())),_e159--);}return t;}function vc(e,t){var i=e.getChild(t-1),n=e.getChild(t);if(i&&n&&i.is("$text")&&n.is("$text")&&xc(i,n)){var _o47=new Gs(i.data+n.data,i.getAttributes());e._removeChildren(t-1,2),e._insertChild(t-1,_o47);}}function yc(e){var t=e.textNode,i=e.parent;if(t){var _n87=e.offset-t.startOffset,_o48=t.index;i._removeChildren(_o48,1);var _r23=new Gs(t.data.substr(0,_n87),t.getAttributes()),_s15=new Gs(t.data.substr(_n87),t.getAttributes());i._insertChild(_o48,[_r23,_s15]);}}function xc(e,t){var i=e.getAttributes(),n=t.getAttributes();var _iterator227=_createForOfIteratorHelper(i),_step227;try{for(_iterator227.s();!(_step227=_iterator227.n()).done;){var _e160=_step227.value;if(_e160[1]!==t.getAttribute(_e160[0]))return!1;n.next();}}catch(err){_iterator227.e(err);}finally{_iterator227.f();}return n.next().done;}var Ac=function Ac(e,t){return Jr(e,t);};var Cc=/*#__PURE__*/function(_fc){_inherits(Cc,_fc);var _super28=_createSuper(Cc);function Cc(e,t,i,n,o){var _this64;_classCallCheck(this,Cc);_this64=_super28.call(this,o),_this64.range=e.clone(),_this64.key=t,_this64.oldValue=void 0===i?null:i,_this64.newValue=void 0===n?null:n;return _this64;}_createClass(Cc,[{key:"type",get:function get(){return null===this.oldValue?"addAttribute":null===this.newValue?"removeAttribute":"changeAttribute";}},{key:"clone",value:function clone(){return new Cc(this.range,this.key,this.oldValue,this.newValue,this.baseVersion);}},{key:"getReversed",value:function getReversed(){return new Cc(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1);}},{key:"toJSON",value:function toJSON(){var e=_get(_getPrototypeOf(Cc.prototype),"toJSON",this).call(this);return e.range=this.range.toJSON(),e;}},{key:"_validate",value:function _validate(){if(!this.range.isFlat)throw new c.a("attribute-operation-range-not-flat",this);var _iterator228=_createForOfIteratorHelper(this.range.getItems({shallow:!0})),_step228;try{for(_iterator228.s();!(_step228=_iterator228.n()).done;){var _e161=_step228.value;if(null!==this.oldValue&&!Ac(_e161.getAttribute(this.key),this.oldValue))throw new c.a("attribute-operation-wrong-old-value",this,{item:_e161,key:this.key,value:this.oldValue});if(null===this.oldValue&&null!==this.newValue&&_e161.hasAttribute(this.key))throw new c.a("attribute-operation-attribute-exists",this,{node:_e161,key:this.key});}}catch(err){_iterator228.e(err);}finally{_iterator228.f();}}},{key:"_execute",value:function _execute(){Ac(this.oldValue,this.newValue)||function(e,t,i){yc(e.start),yc(e.end);var _iterator229=_createForOfIteratorHelper(e.getItems({shallow:!0})),_step229;try{for(_iterator229.s();!(_step229=_iterator229.n()).done;){var _n88=_step229.value;var _e162=_n88.is("$textProxy")?_n88.textNode:_n88;null!==i?_e162._setAttribute(t,i):_e162._removeAttribute(t),vc(_e162.parent,_e162.index);}}catch(err){_iterator229.e(err);}finally{_iterator229.f();}vc(e.end.parent,e.end.index);}(this.range,this.key,this.newValue);}}],[{key:"className",get:function get(){return"AttributeOperation";}},{key:"fromJSON",value:function fromJSON(e,t){return new Cc(oa.fromJSON(e.range,t),e.key,e.oldValue,e.newValue,e.baseVersion);}}]);return Cc;}(fc);var Tc=/*#__PURE__*/function(_fc2){_inherits(Tc,_fc2);var _super29=_createSuper(Tc);function Tc(e,t){var _this65;_classCallCheck(this,Tc);_this65=_super29.call(this,null),_this65.sourcePosition=e.clone(),_this65.howMany=t;return _this65;}_createClass(Tc,[{key:"type",get:function get(){return"detach";}},{key:"toJSON",value:function toJSON(){var e=_get(_getPrototypeOf(Tc.prototype),"toJSON",this).call(this);return e.sourcePosition=this.sourcePosition.toJSON(),e;}},{key:"_validate",value:function _validate(){if(this.sourcePosition.root.document)throw new c.a("detach-operation-on-document-node",this);}},{key:"_execute",value:function _execute(){wc(oa._createFromPositionAndShift(this.sourcePosition,this.howMany));}}],[{key:"className",get:function get(){return"DetachOperation";}}]);return Tc;}(fc);var Ec=/*#__PURE__*/function(_fc3){_inherits(Ec,_fc3);var _super30=_createSuper(Ec);function Ec(e,t,i,n){var _this66;_classCallCheck(this,Ec);_this66=_super30.call(this,n),_this66.sourcePosition=e.clone(),_this66.sourcePosition.stickiness="toNext",_this66.howMany=t,_this66.targetPosition=i.clone(),_this66.targetPosition.stickiness="toNone";return _this66;}_createClass(Ec,[{key:"type",get:function get(){return"$graveyard"==this.targetPosition.root.rootName?"remove":"$graveyard"==this.sourcePosition.root.rootName?"reinsert":"move";}},{key:"clone",value:function clone(){return new this.constructor(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion);}},{key:"getMovedRangeStart",value:function getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany);}},{key:"getReversed",value:function getReversed(){var e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new this.constructor(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1);}},{key:"_validate",value:function _validate(){var e=this.sourcePosition.parent,t=this.targetPosition.parent,i=this.sourcePosition.offset,n=this.targetPosition.offset;if(i+this.howMany>e.maxOffset)throw new c.a("move-operation-nodes-do-not-exist",this);if(e===t&&i<n&&n<i+this.howMany)throw new c.a("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&"prefix"==cn(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())){var _e163=this.sourcePosition.path.length-1;if(this.targetPosition.path[_e163]>=i&&this.targetPosition.path[_e163]<i+this.howMany)throw new c.a("move-operation-node-into-itself",this);}}},{key:"_execute",value:function _execute(){kc(oa._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition);}},{key:"toJSON",value:function toJSON(){var e=_get(_getPrototypeOf(Ec.prototype),"toJSON",this).call(this);return e.sourcePosition=this.sourcePosition.toJSON(),e.targetPosition=this.targetPosition.toJSON(),e;}}],[{key:"className",get:function get(){return"MoveOperation";}},{key:"fromJSON",value:function fromJSON(e,t){var i=ea.fromJSON(e.sourcePosition,t),n=ea.fromJSON(e.targetPosition,t);return new this(i,e.howMany,n,e.baseVersion);}}]);return Ec;}(fc);var Ic=/*#__PURE__*/function(_fc4){_inherits(Ic,_fc4);var _super31=_createSuper(Ic);function Ic(e,t,i){var _this67;_classCallCheck(this,Ic);_this67=_super31.call(this,i),_this67.position=e.clone(),_this67.position.stickiness="toNone",_this67.nodes=new Qs(_c(t)),_this67.shouldReceiveAttributes=!1;return _this67;}_createClass(Ic,[{key:"type",get:function get(){return"insert";}},{key:"howMany",get:function get(){return this.nodes.maxOffset;}},{key:"clone",value:function clone(){var e=new Qs(_toConsumableArray(this.nodes).map(function(e){return e._clone(!0);})),t=new Ic(this.position,e,this.baseVersion);return t.shouldReceiveAttributes=this.shouldReceiveAttributes,t;}},{key:"getReversed",value:function getReversed(){var e=this.position.root.document.graveyard,t=new ea(e,[0]);return new Ec(this.position,this.nodes.maxOffset,t,this.baseVersion+1);}},{key:"_validate",value:function _validate(){var e=this.position.parent;if(!e||e.maxOffset<this.position.offset)throw new c.a("insert-operation-position-invalid",this);}},{key:"_execute",value:function _execute(){var e=this.nodes;this.nodes=new Qs(_toConsumableArray(e).map(function(e){return e._clone(!0);})),bc(this.position,e);}},{key:"toJSON",value:function toJSON(){var e=_get(_getPrototypeOf(Ic.prototype),"toJSON",this).call(this);return e.position=this.position.toJSON(),e.nodes=this.nodes.toJSON(),e;}}],[{key:"className",get:function get(){return"InsertOperation";}},{key:"fromJSON",value:function fromJSON(e,t){var i=[];var _iterator230=_createForOfIteratorHelper(e.nodes),_step230;try{for(_iterator230.s();!(_step230=_iterator230.n()).done;){var _t155=_step230.value;_t155.name?i.push(Js.fromJSON(_t155)):i.push(Gs.fromJSON(_t155));}}catch(err){_iterator230.e(err);}finally{_iterator230.f();}var n=new Ic(ea.fromJSON(e.position,t),i,e.baseVersion);return n.shouldReceiveAttributes=e.shouldReceiveAttributes,n;}}]);return Ic;}(fc);var Sc=/*#__PURE__*/function(_fc5){_inherits(Sc,_fc5);var _super32=_createSuper(Sc);function Sc(e,t,i,n,o,r){var _this68;_classCallCheck(this,Sc);_this68=_super32.call(this,r),_this68.name=e,_this68.oldRange=t?t.clone():null,_this68.newRange=i?i.clone():null,_this68.affectsData=o,_this68._markers=n;return _this68;}_createClass(Sc,[{key:"type",get:function get(){return"marker";}},{key:"clone",value:function clone(){return new Sc(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion);}},{key:"getReversed",value:function getReversed(){return new Sc(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1);}},{key:"_execute",value:function _execute(){var e=this.newRange?"_set":"_remove";this._markers[e](this.name,this.newRange,!0,this.affectsData);}},{key:"toJSON",value:function toJSON(){var e=_get(_getPrototypeOf(Sc.prototype),"toJSON",this).call(this);return this.oldRange&&(e.oldRange=this.oldRange.toJSON()),this.newRange&&(e.newRange=this.newRange.toJSON()),delete e._markers,e;}}],[{key:"className",get:function get(){return"MarkerOperation";}},{key:"fromJSON",value:function fromJSON(e,t){return new Sc(e.name,e.oldRange?oa.fromJSON(e.oldRange,t):null,e.newRange?oa.fromJSON(e.newRange,t):null,t.model.markers,e.affectsData,e.baseVersion);}}]);return Sc;}(fc);var Pc=/*#__PURE__*/function(_fc6){_inherits(Pc,_fc6);var _super33=_createSuper(Pc);function Pc(e,t,i,n){var _this69;_classCallCheck(this,Pc);_this69=_super33.call(this,n),_this69.position=e,_this69.position.stickiness="toNext",_this69.oldName=t,_this69.newName=i;return _this69;}_createClass(Pc,[{key:"type",get:function get(){return"rename";}},{key:"clone",value:function clone(){return new Pc(this.position.clone(),this.oldName,this.newName,this.baseVersion);}},{key:"getReversed",value:function getReversed(){return new Pc(this.position.clone(),this.newName,this.oldName,this.baseVersion+1);}},{key:"_validate",value:function _validate(){var e=this.position.nodeAfter;if(!(e instanceof Js))throw new c.a("rename-operation-wrong-position",this);if(e.name!==this.oldName)throw new c.a("rename-operation-wrong-name",this);}},{key:"_execute",value:function _execute(){this.position.nodeAfter.name=this.newName;}},{key:"toJSON",value:function toJSON(){var e=_get(_getPrototypeOf(Pc.prototype),"toJSON",this).call(this);return e.position=this.position.toJSON(),e;}}],[{key:"className",get:function get(){return"RenameOperation";}},{key:"fromJSON",value:function fromJSON(e,t){return new Pc(ea.fromJSON(e.position,t),e.oldName,e.newName,e.baseVersion);}}]);return Pc;}(fc);var Mc=/*#__PURE__*/function(_fc7){_inherits(Mc,_fc7);var _super34=_createSuper(Mc);function Mc(e,t,i,n,o){var _this70;_classCallCheck(this,Mc);_this70=_super34.call(this,o),_this70.root=e,_this70.key=t,_this70.oldValue=i,_this70.newValue=n;return _this70;}_createClass(Mc,[{key:"type",get:function get(){return null===this.oldValue?"addRootAttribute":null===this.newValue?"removeRootAttribute":"changeRootAttribute";}},{key:"clone",value:function clone(){return new Mc(this.root,this.key,this.oldValue,this.newValue,this.baseVersion);}},{key:"getReversed",value:function getReversed(){return new Mc(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1);}},{key:"_validate",value:function _validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new c.a("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(null!==this.oldValue&&this.root.getAttribute(this.key)!==this.oldValue)throw new c.a("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(null===this.oldValue&&null!==this.newValue&&this.root.hasAttribute(this.key))throw new c.a("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key});}},{key:"_execute",value:function _execute(){null!==this.newValue?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key);}},{key:"toJSON",value:function toJSON(){var e=_get(_getPrototypeOf(Mc.prototype),"toJSON",this).call(this);return e.root=this.root.toJSON(),e;}}],[{key:"className",get:function get(){return"RootAttributeOperation";}},{key:"fromJSON",value:function fromJSON(e,t){if(!t.getRoot(e.root))throw new c.a("rootattribute-operation-fromjson-no-root",this,{rootName:e.root});return new Mc(t.getRoot(e.root),e.key,e.oldValue,e.newValue,e.baseVersion);}}]);return Mc;}(fc);var Nc=/*#__PURE__*/function(_fc8){_inherits(Nc,_fc8);var _super35=_createSuper(Nc);function Nc(e,t,i,n,o){var _this71;_classCallCheck(this,Nc);_this71=_super35.call(this,o),_this71.sourcePosition=e.clone(),_this71.sourcePosition.stickiness="toPrevious",_this71.howMany=t,_this71.targetPosition=i.clone(),_this71.targetPosition.stickiness="toNext",_this71.graveyardPosition=n.clone();return _this71;}_createClass(Nc,[{key:"type",get:function get(){return"merge";}},{key:"deletionPosition",get:function get(){return new ea(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1));}},{key:"movedRange",get:function get(){var e=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new oa(this.sourcePosition,e);}},{key:"clone",value:function clone(){return new this.constructor(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion);}},{key:"getReversed",value:function getReversed(){var e=this.targetPosition._getTransformedByMergeOperation(this),t=this.sourcePosition.path.slice(0,-1),i=new ea(this.sourcePosition.root,t)._getTransformedByMergeOperation(this);return new Rc(e,this.howMany,i,this.graveyardPosition,this.baseVersion+1);}},{key:"_validate",value:function _validate(){var e=this.sourcePosition.parent,t=this.targetPosition.parent;if(!e.parent)throw new c.a("merge-operation-source-position-invalid",this);if(!t.parent)throw new c.a("merge-operation-target-position-invalid",this);if(this.howMany!=e.maxOffset)throw new c.a("merge-operation-how-many-invalid",this);}},{key:"_execute",value:function _execute(){var e=this.sourcePosition.parent;kc(oa._createIn(e),this.targetPosition),kc(oa._createOn(e),this.graveyardPosition);}},{key:"toJSON",value:function toJSON(){var e=_get(_getPrototypeOf(Nc.prototype),"toJSON",this).call(this);return e.sourcePosition=e.sourcePosition.toJSON(),e.targetPosition=e.targetPosition.toJSON(),e.graveyardPosition=e.graveyardPosition.toJSON(),e;}}],[{key:"className",get:function get(){return"MergeOperation";}},{key:"fromJSON",value:function fromJSON(e,t){var i=ea.fromJSON(e.sourcePosition,t),n=ea.fromJSON(e.targetPosition,t),o=ea.fromJSON(e.graveyardPosition,t);return new this(i,e.howMany,n,o,e.baseVersion);}}]);return Nc;}(fc);var Rc=/*#__PURE__*/function(_fc9){_inherits(Rc,_fc9);var _super36=_createSuper(Rc);function Rc(e,t,i,n,o){var _this72;_classCallCheck(this,Rc);_this72=_super36.call(this,o),_this72.splitPosition=e.clone(),_this72.splitPosition.stickiness="toNext",_this72.howMany=t,_this72.insertionPosition=i,_this72.graveyardPosition=n?n.clone():null,_this72.graveyardPosition&&(_this72.graveyardPosition.stickiness="toNext");return _this72;}_createClass(Rc,[{key:"type",get:function get(){return"split";}},{key:"moveTargetPosition",get:function get(){var e=this.insertionPosition.path.slice();return e.push(0),new ea(this.insertionPosition.root,e);}},{key:"movedRange",get:function get(){var e=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new oa(this.splitPosition,e);}},{key:"clone",value:function clone(){return new this.constructor(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion);}},{key:"getReversed",value:function getReversed(){var e=this.splitPosition.root.document.graveyard,t=new ea(e,[0]);return new Nc(this.moveTargetPosition,this.howMany,this.splitPosition,t,this.baseVersion+1);}},{key:"_validate",value:function _validate(){var e=this.splitPosition.parent,t=this.splitPosition.offset;if(!e||e.maxOffset<t)throw new c.a("split-operation-position-invalid",this);if(!e.parent)throw new c.a("split-operation-split-in-root",this);if(this.howMany!=e.maxOffset-this.splitPosition.offset)throw new c.a("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new c.a("split-operation-graveyard-position-invalid",this);}},{key:"_execute",value:function _execute(){var e=this.splitPosition.parent;if(this.graveyardPosition)kc(oa._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{var _t156=e._clone();bc(this.insertionPosition,_t156);}kc(new oa(ea._createAt(e,this.splitPosition.offset),ea._createAt(e,e.maxOffset)),this.moveTargetPosition);}},{key:"toJSON",value:function toJSON(){var e=_get(_getPrototypeOf(Rc.prototype),"toJSON",this).call(this);return e.splitPosition=this.splitPosition.toJSON(),e.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(e.graveyardPosition=this.graveyardPosition.toJSON()),e;}}],[{key:"className",get:function get(){return"SplitOperation";}},{key:"getInsertionPosition",value:function getInsertionPosition(e){var t=e.path.slice(0,-1);return t[t.length-1]++,new ea(e.root,t,"toPrevious");}},{key:"fromJSON",value:function fromJSON(e,t){var i=ea.fromJSON(e.splitPosition,t),n=ea.fromJSON(e.insertionPosition,t),o=e.graveyardPosition?ea.fromJSON(e.graveyardPosition,t):null;return new this(i,e.howMany,n,o,e.baseVersion);}}]);return Rc;}(fc);var Oc=/*#__PURE__*/function(_Js){_inherits(Oc,_Js);var _super37=_createSuper(Oc);function Oc(e,t){var _this73;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"main";_classCallCheck(this,Oc);_this73=_super37.call(this,t),_this73._document=e,_this73.rootName=i;return _this73;}_createClass(Oc,[{key:"document",get:function get(){return this._document;}},{key:"is",value:function is(e,t){return t?t===this.name&&("rootElement"===e||"model:rootElement"===e||"element"===e||"model:element"===e):"rootElement"===e||"model:rootElement"===e||"element"===e||"model:element"===e||"node"===e||"model:node"===e;}},{key:"toJSON",value:function toJSON(){return this.rootName;}}]);return Oc;}(Js);var zc=/*#__PURE__*/function(){function zc(e,t){_classCallCheck(this,zc);this.model=e,this.batch=t;}_createClass(zc,[{key:"createText",value:function createText(e,t){return new Gs(e,t);}},{key:"createElement",value:function createElement(e,t){return new Js(e,t);}},{key:"createDocumentFragment",value:function createDocumentFragment(){return new pc();}},{key:"cloneElement",value:function cloneElement(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!0;return e._clone(t);}},{key:"insert",value:function insert(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(this._assertWriterUsedCorrectly(),e instanceof Gs&&""==e.data)return;var n=ea._createAt(t,i);if(e.parent){if(Bc(e.root,n.root))return void this.move(oa._createOn(e),n);if(e.root.document)throw new c.a("model-writer-insert-forbidden-move",this);this.remove(e);}var o=n.root.document?n.root.document.version:null,r=new Ic(n,e,o);if(e instanceof Gs&&(r.shouldReceiveAttributes=!0),this.batch.addOperation(r),this.model.applyOperation(r),e instanceof pc){var _iterator231=_createForOfIteratorHelper(e.markers),_step231;try{for(_iterator231.s();!(_step231=_iterator231.n()).done;){var _step231$value=_slicedToArray(_step231.value,2),_t157=_step231$value[0],_i178=_step231$value[1];var _e164=ea._createAt(_i178.root,0),_o49={range:new oa(_i178.start._getCombined(_e164,n),_i178.end._getCombined(_e164,n)),usingOperation:!0,affectsData:!0};this.model.markers.has(_t157)?this.updateMarker(_t157,_o49):this.addMarker(_t157,_o49);}}catch(err){_iterator231.e(err);}finally{_iterator231.f();}}}},{key:"insertText",value:function insertText(e,t,i,n){t instanceof pc||t instanceof Js||t instanceof ea?this.insert(this.createText(e),t,i):this.insert(this.createText(e,t),i,n);}},{key:"insertElement",value:function insertElement(e,t,i,n){t instanceof pc||t instanceof Js||t instanceof ea?this.insert(this.createElement(e),t,i):this.insert(this.createElement(e,t),i,n);}},{key:"append",value:function append(e,t){this.insert(e,t,"end");}},{key:"appendText",value:function appendText(e,t,i){t instanceof pc||t instanceof Js?this.insert(this.createText(e),t,"end"):this.insert(this.createText(e,t),i,"end");}},{key:"appendElement",value:function appendElement(e,t,i){t instanceof pc||t instanceof Js?this.insert(this.createElement(e),t,"end"):this.insert(this.createElement(e,t),i,"end");}},{key:"setAttribute",value:function setAttribute(e,t,i){if(this._assertWriterUsedCorrectly(),i instanceof oa){var _n89=i.getMinimalFlatRanges();var _iterator232=_createForOfIteratorHelper(_n89),_step232;try{for(_iterator232.s();!(_step232=_iterator232.n()).done;){var _i179=_step232.value;Dc(this,e,t,_i179);}}catch(err){_iterator232.e(err);}finally{_iterator232.f();}}else Lc(this,e,t,i);}},{key:"setAttributes",value:function setAttributes(e,t){var _iterator233=_createForOfIteratorHelper(gn(e)),_step233;try{for(_iterator233.s();!(_step233=_iterator233.n()).done;){var _step233$value=_slicedToArray(_step233.value,2),_i180=_step233$value[0],_n90=_step233$value[1];this.setAttribute(_i180,_n90,t);}}catch(err){_iterator233.e(err);}finally{_iterator233.f();}}},{key:"removeAttribute",value:function removeAttribute(e,t){if(this._assertWriterUsedCorrectly(),t instanceof oa){var _i181=t.getMinimalFlatRanges();var _iterator234=_createForOfIteratorHelper(_i181),_step234;try{for(_iterator234.s();!(_step234=_iterator234.n()).done;){var _t158=_step234.value;Dc(this,e,null,_t158);}}catch(err){_iterator234.e(err);}finally{_iterator234.f();}}else Lc(this,e,null,t);}},{key:"clearAttributes",value:function clearAttributes(e){var _this74=this;this._assertWriterUsedCorrectly();var t=function t(e){var _iterator235=_createForOfIteratorHelper(e.getAttributeKeys()),_step235;try{for(_iterator235.s();!(_step235=_iterator235.n()).done;){var _t159=_step235.value;_this74.removeAttribute(_t159,e);}}catch(err){_iterator235.e(err);}finally{_iterator235.f();}};if(e instanceof oa){var _iterator236=_createForOfIteratorHelper(e.getItems()),_step236;try{for(_iterator236.s();!(_step236=_iterator236.n()).done;){var _i182=_step236.value;t(_i182);}}catch(err){_iterator236.e(err);}finally{_iterator236.f();}}else t(e);}},{key:"move",value:function move(e,t,i){if(this._assertWriterUsedCorrectly(),!(e instanceof oa))throw new c.a("writer-move-invalid-range",this);if(!e.isFlat)throw new c.a("writer-move-range-not-flat",this);var n=ea._createAt(t,i);if(n.isEqual(e.start))return;if(this._addOperationForAffectedMarkers("move",e),!Bc(e.root,n.root))throw new c.a("writer-move-different-document",this);var o=e.root.document?e.root.document.version:null,r=new Ec(e.start,e.end.offset-e.start.offset,n,o);this.batch.addOperation(r),this.model.applyOperation(r);}},{key:"remove",value:function remove(e){this._assertWriterUsedCorrectly();var t=(e instanceof oa?e:oa._createOn(e)).getMinimalFlatRanges().reverse();var _iterator237=_createForOfIteratorHelper(t),_step237;try{for(_iterator237.s();!(_step237=_iterator237.n()).done;){var _e165=_step237.value;this._addOperationForAffectedMarkers("move",_e165),jc(_e165.start,_e165.end.offset-_e165.start.offset,this.batch,this.model);}}catch(err){_iterator237.e(err);}finally{_iterator237.f();}}},{key:"merge",value:function merge(e){this._assertWriterUsedCorrectly();var t=e.nodeBefore,i=e.nodeAfter;if(this._addOperationForAffectedMarkers("merge",e),!(t instanceof Js))throw new c.a("writer-merge-no-element-before",this);if(!(i instanceof Js))throw new c.a("writer-merge-no-element-after",this);e.root.document?this._merge(e):this._mergeDetached(e);}},{key:"createPositionFromPath",value:function createPositionFromPath(e,t,i){return this.model.createPositionFromPath(e,t,i);}},{key:"createPositionAt",value:function createPositionAt(e,t){return this.model.createPositionAt(e,t);}},{key:"createPositionAfter",value:function createPositionAfter(e){return this.model.createPositionAfter(e);}},{key:"createPositionBefore",value:function createPositionBefore(e){return this.model.createPositionBefore(e);}},{key:"createRange",value:function createRange(e,t){return this.model.createRange(e,t);}},{key:"createRangeIn",value:function createRangeIn(e){return this.model.createRangeIn(e);}},{key:"createRangeOn",value:function createRangeOn(e){return this.model.createRangeOn(e);}},{key:"createSelection",value:function createSelection(e,t,i){return this.model.createSelection(e,t,i);}},{key:"_mergeDetached",value:function _mergeDetached(e){var t=e.nodeBefore,i=e.nodeAfter;this.move(oa._createIn(i),ea._createAt(t,"end")),this.remove(i);}},{key:"_merge",value:function _merge(e){var t=ea._createAt(e.nodeBefore,"end"),i=ea._createAt(e.nodeAfter,0),n=e.root.document.graveyard,o=new ea(n,[0]),r=e.root.document.version,s=new Nc(i,e.nodeAfter.maxOffset,t,o,r);this.batch.addOperation(s),this.model.applyOperation(s);}},{key:"rename",value:function rename(e,t){if(this._assertWriterUsedCorrectly(),!(e instanceof Js))throw new c.a("writer-rename-not-element-instance",this);var i=e.root.document?e.root.document.version:null,n=new Pc(ea._createBefore(e),e.name,t,i);this.batch.addOperation(n),this.model.applyOperation(n);}},{key:"split",value:function split(e,t){this._assertWriterUsedCorrectly();var i,n,o=e.parent;if(!o.parent)throw new c.a("writer-split-element-no-parent",this);if(t||(t=o.parent),!e.parent.getAncestors({includeSelf:!0}).includes(t))throw new c.a("writer-split-invalid-limit-element",this);do{var _t160=o.root.document?o.root.document.version:null,_r24=o.maxOffset-e.offset,_s16=Rc.getInsertionPosition(e),_a9=new Rc(e,_r24,_s16,null,_t160);this.batch.addOperation(_a9),this.model.applyOperation(_a9),i||n||(i=o,n=e.parent.nextSibling),o=(e=this.createPositionAfter(e.parent)).parent;}while(o!==t);return{position:e,range:new oa(ea._createAt(i,"end"),ea._createAt(n,0))};}},{key:"wrap",value:function wrap(e,t){if(this._assertWriterUsedCorrectly(),!e.isFlat)throw new c.a("writer-wrap-range-not-flat",this);var i=t instanceof Js?t:new Js(t);if(i.childCount>0)throw new c.a("writer-wrap-element-not-empty",this);if(null!==i.parent)throw new c.a("writer-wrap-element-attached",this);this.insert(i,e.start);var n=new oa(e.start.getShiftedBy(1),e.end.getShiftedBy(1));this.move(n,ea._createAt(i,0));}},{key:"unwrap",value:function unwrap(e){if(this._assertWriterUsedCorrectly(),null===e.parent)throw new c.a("writer-unwrap-element-no-parent",this);this.move(oa._createIn(e),this.createPositionAfter(e)),this.remove(e);}},{key:"addMarker",value:function addMarker(e,t){if(this._assertWriterUsedCorrectly(),!t||"boolean"!=typeof t.usingOperation)throw new c.a("writer-addmarker-no-usingoperation",this);var i=t.usingOperation,n=t.range,o=void 0!==t.affectsData&&t.affectsData;if(this.model.markers.has(e))throw new c.a("writer-addmarker-marker-exists",this);if(!n)throw new c.a("writer-addmarker-no-range",this);return i?(Vc(this,e,null,n,o),this.model.markers.get(e)):this.model.markers._set(e,n,i,o);}},{key:"updateMarker",value:function updateMarker(e,t){this._assertWriterUsedCorrectly();var i="string"==typeof e?e:e.name,n=this.model.markers.get(i);if(!n)throw new c.a("writer-updatemarker-marker-not-exists",this);if(!t)return void this.model.markers._refresh(n);var o="boolean"==typeof t.usingOperation,r="boolean"==typeof t.affectsData,s=r?t.affectsData:n.affectsData;if(!o&&!t.range&&!r)throw new c.a("writer-updatemarker-wrong-options",this);var a=n.getRange(),l=t.range?t.range:a;o&&t.usingOperation!==n.managedUsingOperations?t.usingOperation?Vc(this,i,null,l,s):(Vc(this,i,a,null,s),this.model.markers._set(i,l,void 0,s)):n.managedUsingOperations?Vc(this,i,a,l,s):this.model.markers._set(i,l,void 0,s);}},{key:"removeMarker",value:function removeMarker(e){this._assertWriterUsedCorrectly();var t="string"==typeof e?e:e.name;if(!this.model.markers.has(t))throw new c.a("writer-removemarker-no-marker",this);var i=this.model.markers.get(t);if(!i.managedUsingOperations)return void this.model.markers._remove(t);Vc(this,t,i.getRange(),null,i.affectsData);}},{key:"setSelection",value:function setSelection(e,t,i){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(e,t,i);}},{key:"setSelectionFocus",value:function setSelectionFocus(e,t){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(e,t);}},{key:"setSelectionAttribute",value:function setSelectionAttribute(e,t){if(this._assertWriterUsedCorrectly(),"string"==typeof e)this._setSelectionAttribute(e,t);else{var _iterator238=_createForOfIteratorHelper(gn(e)),_step238;try{for(_iterator238.s();!(_step238=_iterator238.n()).done;){var _step238$value=_slicedToArray(_step238.value,2),_t161=_step238$value[0],_i183=_step238$value[1];this._setSelectionAttribute(_t161,_i183);}}catch(err){_iterator238.e(err);}finally{_iterator238.f();}}}},{key:"removeSelectionAttribute",value:function removeSelectionAttribute(e){if(this._assertWriterUsedCorrectly(),"string"==typeof e)this._removeSelectionAttribute(e);else{var _iterator239=_createForOfIteratorHelper(e),_step239;try{for(_iterator239.s();!(_step239=_iterator239.n()).done;){var _t162=_step239.value;this._removeSelectionAttribute(_t162);}}catch(err){_iterator239.e(err);}finally{_iterator239.f();}}}},{key:"overrideSelectionGravity",value:function overrideSelectionGravity(){return this.model.document.selection._overrideGravity();}},{key:"restoreSelectionGravity",value:function restoreSelectionGravity(e){this.model.document.selection._restoreGravity(e);}},{key:"_setSelectionAttribute",value:function _setSelectionAttribute(e,t){var i=this.model.document.selection;if(i.isCollapsed&&i.anchor.parent.isEmpty){var _n91=_a._getStoreAttributeKey(e);this.setAttribute(_n91,t,i.anchor.parent);}i._setAttribute(e,t);}},{key:"_removeSelectionAttribute",value:function _removeSelectionAttribute(e){var t=this.model.document.selection;if(t.isCollapsed&&t.anchor.parent.isEmpty){var _i184=_a._getStoreAttributeKey(e);this.removeAttribute(_i184,t.anchor.parent);}t._removeAttribute(e);}},{key:"_assertWriterUsedCorrectly",value:function _assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new c.a("writer-incorrect-use",this);}},{key:"_addOperationForAffectedMarkers",value:function _addOperationForAffectedMarkers(e,t){var _iterator240=_createForOfIteratorHelper(this.model.markers),_step240;try{for(_iterator240.s();!(_step240=_iterator240.n()).done;){var _i185=_step240.value;if(!_i185.managedUsingOperations)continue;var _n92=_i185.getRange();var _o50=!1;if("move"===e)_o50=t.containsPosition(_n92.start)||t.start.isEqual(_n92.start)||t.containsPosition(_n92.end)||t.end.isEqual(_n92.end);else{var _e166=t.nodeBefore,_i186=t.nodeAfter,_r25=_n92.start.parent==_e166&&_n92.start.isAtEnd,_s17=_n92.end.parent==_i186&&0==_n92.end.offset,_a10=_n92.end.nodeAfter==_i186,_c4=_n92.start.nodeAfter==_i186;_o50=_r25||_s17||_a10||_c4;}_o50&&this.updateMarker(_i185.name,{range:_n92});}}catch(err){_iterator240.e(err);}finally{_iterator240.f();}}}]);return zc;}();function Dc(e,t,i,n){var o=e.model,r=o.document;var s,a,c,l=n.start;var _iterator241=_createForOfIteratorHelper(n.getWalker({shallow:!0})),_step241;try{for(_iterator241.s();!(_step241=_iterator241.n()).done;){var _e167=_step241.value;c=_e167.item.getAttribute(t),s&&a!=c&&(a!=i&&d(),l=s),s=_e167.nextPosition,a=c;}}catch(err){_iterator241.e(err);}finally{_iterator241.f();}function d(){var n=new oa(l,s),c=n.root.document?r.version:null,d=new Cc(n,t,a,i,c);e.batch.addOperation(d),o.applyOperation(d);}s instanceof ea&&s!=l&&a!=i&&d();}function Lc(e,t,i,n){var o=e.model,r=o.document,s=n.getAttribute(t);var a,c;if(s!=i){if(n.root===n){var _e168=n.document?r.version:null;c=new Mc(n,t,s,i,_e168);}else{a=new oa(ea._createBefore(n),e.createPositionAfter(n));var _o51=a.root.document?r.version:null;c=new Cc(a,t,s,i,_o51);}e.batch.addOperation(c),o.applyOperation(c);}}function Vc(e,t,i,n,o){var r=e.model,s=r.document,a=new Sc(t,i,n,r.markers,o,s.version);e.batch.addOperation(a),r.applyOperation(a);}function jc(e,t,i,n){var o;if(e.root.document){var _i187=n.document,_r26=new ea(_i187.graveyard,[0]);o=new Ec(e,t,_r26,_i187.version);}else o=new Tc(e,t);i.addOperation(o),n.applyOperation(o);}function Bc(e,t){return e===t||e instanceof Oc&&t instanceof Oc;}var Fc=/*#__PURE__*/function(){function Fc(e){_classCallCheck(this,Fc);this._markerCollection=e,this._changesInElement=new Map(),this._elementSnapshots=new Map(),this._changedMarkers=new Map(),this._changeCount=0,this._cachedChanges=null,this._cachedChangesWithGraveyard=null;}_createClass(Fc,[{key:"isEmpty",get:function get(){return 0==this._changesInElement.size&&0==this._changedMarkers.size;}},{key:"refreshItem",value:function refreshItem(e){if(this._isInInsertedElement(e.parent))return;this._markRemove(e.parent,e.startOffset,e.offsetSize),this._markInsert(e.parent,e.startOffset,e.offsetSize);var t=oa._createOn(e);var _iterator242=_createForOfIteratorHelper(this._markerCollection.getMarkersIntersectingRange(t)),_step242;try{for(_iterator242.s();!(_step242=_iterator242.n()).done;){var _e169=_step242.value;var _t163=_e169.getRange();this.bufferMarkerChange(_e169.name,_t163,_t163,_e169.affectsData);}}catch(err){_iterator242.e(err);}finally{_iterator242.f();}this._cachedChanges=null;}},{key:"bufferOperation",value:function bufferOperation(e){switch(e.type){case"insert":if(this._isInInsertedElement(e.position.parent))return;this._markInsert(e.position.parent,e.position.offset,e.nodes.maxOffset);break;case"addAttribute":case"removeAttribute":case"changeAttribute":var _iterator243=_createForOfIteratorHelper(e.range.getItems({shallow:!0})),_step243;try{for(_iterator243.s();!(_step243=_iterator243.n()).done;){var _t164=_step243.value;this._isInInsertedElement(_t164.parent)||this._markAttribute(_t164);}}catch(err){_iterator243.e(err);}finally{_iterator243.f();}break;case"remove":case"move":case"reinsert":{if(e.sourcePosition.isEqual(e.targetPosition)||e.sourcePosition.getShiftedBy(e.howMany).isEqual(e.targetPosition))return;var _t165=this._isInInsertedElement(e.sourcePosition.parent),_i188=this._isInInsertedElement(e.targetPosition.parent);_t165||this._markRemove(e.sourcePosition.parent,e.sourcePosition.offset,e.howMany),_i188||this._markInsert(e.targetPosition.parent,e.getMovedRangeStart().offset,e.howMany);break;}case"rename":{if(this._isInInsertedElement(e.position.parent))return;this._markRemove(e.position.parent,e.position.offset,1),this._markInsert(e.position.parent,e.position.offset,1);var _t166=oa._createFromPositionAndShift(e.position,1);var _iterator244=_createForOfIteratorHelper(this._markerCollection.getMarkersIntersectingRange(_t166)),_step244;try{for(_iterator244.s();!(_step244=_iterator244.n()).done;){var _e170=_step244.value;var _t167=_e170.getRange();this.bufferMarkerChange(_e170.name,_t167,_t167,_e170.affectsData);}}catch(err){_iterator244.e(err);}finally{_iterator244.f();}break;}case"split":{var _t168=e.splitPosition.parent;this._isInInsertedElement(_t168)||this._markRemove(_t168,e.splitPosition.offset,e.howMany),this._isInInsertedElement(e.insertionPosition.parent)||this._markInsert(e.insertionPosition.parent,e.insertionPosition.offset,1),e.graveyardPosition&&this._markRemove(e.graveyardPosition.parent,e.graveyardPosition.offset,1);break;}case"merge":{var _t169=e.sourcePosition.parent;this._isInInsertedElement(_t169.parent)||this._markRemove(_t169.parent,_t169.startOffset,1);var _i189=e.graveyardPosition.parent;this._markInsert(_i189,e.graveyardPosition.offset,1);var _n93=e.targetPosition.parent;this._isInInsertedElement(_n93)||this._markInsert(_n93,e.targetPosition.offset,_t169.maxOffset);break;}}this._cachedChanges=null;}},{key:"bufferMarkerChange",value:function bufferMarkerChange(e,t,i,n){var o=this._changedMarkers.get(e);o?(o.newRange=i,o.affectsData=n,null==o.oldRange&&null==o.newRange&&this._changedMarkers["delete"](e)):this._changedMarkers.set(e,{oldRange:t,newRange:i,affectsData:n});}},{key:"getMarkersToRemove",value:function getMarkersToRemove(){var e=[];var _iterator245=_createForOfIteratorHelper(this._changedMarkers),_step245;try{for(_iterator245.s();!(_step245=_iterator245.n()).done;){var _step245$value=_slicedToArray(_step245.value,2),_t170=_step245$value[0],_i190=_step245$value[1];null!=_i190.oldRange&&e.push({name:_t170,range:_i190.oldRange});}}catch(err){_iterator245.e(err);}finally{_iterator245.f();}return e;}},{key:"getMarkersToAdd",value:function getMarkersToAdd(){var e=[];var _iterator246=_createForOfIteratorHelper(this._changedMarkers),_step246;try{for(_iterator246.s();!(_step246=_iterator246.n()).done;){var _step246$value=_slicedToArray(_step246.value,2),_t171=_step246$value[0],_i191=_step246$value[1];null!=_i191.newRange&&e.push({name:_t171,range:_i191.newRange});}}catch(err){_iterator246.e(err);}finally{_iterator246.f();}return e;}},{key:"getChangedMarkers",value:function getChangedMarkers(){return Array.from(this._changedMarkers).map(function(e){return{name:e[0],data:{oldRange:e[1].oldRange,newRange:e[1].newRange}};});}},{key:"hasDataChanges",value:function hasDataChanges(){var _iterator247=_createForOfIteratorHelper(this._changedMarkers),_step247;try{for(_iterator247.s();!(_step247=_iterator247.n()).done;){var _step247$value=_slicedToArray(_step247.value,2),_e171=_step247$value[1];if(_e171.affectsData)return!0;}}catch(err){_iterator247.e(err);}finally{_iterator247.f();}return this._changesInElement.size>0;}},{key:"getChanges",value:function getChanges(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{includeChangesInGraveyard:!1};if(this._cachedChanges)return e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();var t=[];var _iterator248=_createForOfIteratorHelper(this._changesInElement.keys()),_step248;try{for(_iterator248.s();!(_step248=_iterator248.n()).done;){var _e173=_step248.value;var _i193=this._changesInElement.get(_e173).sort(function(e,t){return e.offset===t.offset?e.type!=t.type?"remove"==e.type?-1:1:0:e.offset<t.offset?-1:1;}),_n95=this._elementSnapshots.get(_e173),_o53=Hc(_e173.getChildren()),_r28=Uc(_n95.length,_i193);var _s19=0,_a12=0;var _iterator250=_createForOfIteratorHelper(_r28),_step250;try{for(_iterator250.s();!(_step250=_iterator250.n()).done;){var _i194=_step250.value;if("i"===_i194)t.push(this._getInsertDiff(_e173,_s19,_o53[_s19].name)),_s19++;else if("r"===_i194)t.push(this._getRemoveDiff(_e173,_s19,_n95[_a12].name)),_a12++;else if("a"===_i194){var _t173;var _i195=_o53[_s19].attributes,_r29=_n95[_a12].attributes;var _c5=void 0;if("$text"==_o53[_s19].name)_c5=new oa(ea._createAt(_e173,_s19),ea._createAt(_e173,_s19+1));else{var _t172=_e173.offsetToIndex(_s19);_c5=new oa(ea._createAt(_e173,_s19),ea._createAt(_e173.getChild(_t172),0));}(_t173=t).push.apply(_t173,_toConsumableArray(this._getAttributesDiff(_c5,_r29,_i195))),_s19++,_a12++;}else _s19++,_a12++;}}catch(err){_iterator250.e(err);}finally{_iterator250.f();}}}catch(err){_iterator248.e(err);}finally{_iterator248.f();}t.sort(function(e,t){return e.position.root!=t.position.root?e.position.root.rootName<t.position.root.rootName?-1:1:e.position.isEqual(t.position)?e.changeCount-t.changeCount:e.position.isBefore(t.position)?-1:1;});for(var _e172=1,_i192=0;_e172<t.length;_e172++){var _n94=t[_i192],_o52=t[_e172],_r27="remove"==_n94.type&&"remove"==_o52.type&&"$text"==_n94.name&&"$text"==_o52.name&&_n94.position.isEqual(_o52.position),_s18="insert"==_n94.type&&"insert"==_o52.type&&"$text"==_n94.name&&"$text"==_o52.name&&_n94.position.parent==_o52.position.parent&&_n94.position.offset+_n94.length==_o52.position.offset,_a11="attribute"==_n94.type&&"attribute"==_o52.type&&_n94.position.parent==_o52.position.parent&&_n94.range.isFlat&&_o52.range.isFlat&&_n94.position.offset+_n94.length==_o52.position.offset&&_n94.attributeKey==_o52.attributeKey&&_n94.attributeOldValue==_o52.attributeOldValue&&_n94.attributeNewValue==_o52.attributeNewValue;_r27||_s18||_a11?(_n94.length++,_a11&&(_n94.range.end=_n94.range.end.getShiftedBy(1)),t[_e172]=null):_i192=_e172;}t=t.filter(function(e){return e;});var _iterator249=_createForOfIteratorHelper(t),_step249;try{for(_iterator249.s();!(_step249=_iterator249.n()).done;){var _e174=_step249.value;delete _e174.changeCount,"attribute"==_e174.type&&(delete _e174.position,delete _e174.length);}}catch(err){_iterator249.e(err);}finally{_iterator249.f();}return this._changeCount=0,this._cachedChangesWithGraveyard=t.slice(),this._cachedChanges=t.filter(Wc),e.includeChangesInGraveyard?this._cachedChangesWithGraveyard:this._cachedChanges;}},{key:"reset",value:function reset(){this._changesInElement.clear(),this._elementSnapshots.clear(),this._changedMarkers.clear(),this._cachedChanges=null;}},{key:"_markInsert",value:function _markInsert(e,t,i){var n={type:"insert",offset:t,howMany:i,count:this._changeCount++};this._markChange(e,n);}},{key:"_markRemove",value:function _markRemove(e,t,i){var n={type:"remove",offset:t,howMany:i,count:this._changeCount++};this._markChange(e,n),this._removeAllNestedChanges(e,t,i);}},{key:"_markAttribute",value:function _markAttribute(e){var t={type:"attribute",offset:e.startOffset,howMany:e.offsetSize,count:this._changeCount++};this._markChange(e.parent,t);}},{key:"_markChange",value:function _markChange(e,t){this._makeSnapshot(e);var i=this._getChangesForElement(e);this._handleChange(t,i),i.push(t);for(var _e175=0;_e175<i.length;_e175++){i[_e175].howMany<1&&(i.splice(_e175,1),_e175--);}}},{key:"_getChangesForElement",value:function _getChangesForElement(e){var t;return this._changesInElement.has(e)?t=this._changesInElement.get(e):(t=[],this._changesInElement.set(e,t)),t;}},{key:"_makeSnapshot",value:function _makeSnapshot(e){this._elementSnapshots.has(e)||this._elementSnapshots.set(e,Hc(e.getChildren()));}},{key:"_handleChange",value:function _handleChange(e,t){e.nodesToHandle=e.howMany;var _iterator251=_createForOfIteratorHelper(t),_step251;try{for(_iterator251.s();!(_step251=_iterator251.n()).done;){var _i196=_step251.value;var _n96=e.offset+e.howMany,_o54=_i196.offset+_i196.howMany;if("insert"==e.type&&("insert"==_i196.type&&(e.offset<=_i196.offset?_i196.offset+=e.howMany:e.offset<_o54&&(_i196.howMany+=e.nodesToHandle,e.nodesToHandle=0)),"remove"==_i196.type&&e.offset<_i196.offset&&(_i196.offset+=e.howMany),"attribute"==_i196.type))if(e.offset<=_i196.offset)_i196.offset+=e.howMany;else if(e.offset<_o54){var _o55=_i196.howMany;_i196.howMany=e.offset-_i196.offset,t.unshift({type:"attribute",offset:_n96,howMany:_o55-_i196.howMany,count:this._changeCount++});}if("remove"==e.type){if("insert"==_i196.type)if(_n96<=_i196.offset)_i196.offset-=e.howMany;else if(_n96<=_o54){if(e.offset<_i196.offset){var _t174=_n96-_i196.offset;_i196.offset=e.offset,_i196.howMany-=_t174,e.nodesToHandle-=_t174;}else _i196.howMany-=e.nodesToHandle,e.nodesToHandle=0;}else if(e.offset<=_i196.offset)e.nodesToHandle-=_i196.howMany,_i196.howMany=0;else if(e.offset<_o54){var _t175=_o54-e.offset;_i196.howMany-=_t175,e.nodesToHandle-=_t175;}if("remove"==_i196.type&&(_n96<=_i196.offset?_i196.offset-=e.howMany:e.offset<_i196.offset&&(e.nodesToHandle+=_i196.howMany,_i196.howMany=0)),"attribute"==_i196.type)if(_n96<=_i196.offset)_i196.offset-=e.howMany;else if(e.offset<_i196.offset){var _t176=_n96-_i196.offset;_i196.offset=e.offset,_i196.howMany-=_t176;}else if(e.offset<_o54)if(_n96<=_o54){var _n97=_i196.howMany;_i196.howMany=e.offset-_i196.offset;var _o56=_n97-_i196.howMany-e.nodesToHandle;t.unshift({type:"attribute",offset:e.offset,howMany:_o56,count:this._changeCount++});}else _i196.howMany-=_o54-e.offset;}if("attribute"==e.type){if("insert"==_i196.type)if(e.offset<_i196.offset&&_n96>_i196.offset){if(_n96>_o54){var _e176={type:"attribute",offset:_o54,howMany:_n96-_o54,count:this._changeCount++};this._handleChange(_e176,t),t.push(_e176);}e.nodesToHandle=_i196.offset-e.offset,e.howMany=e.nodesToHandle;}else e.offset>=_i196.offset&&e.offset<_o54&&(_n96>_o54?(e.nodesToHandle=_n96-_o54,e.offset=_o54):e.nodesToHandle=0);if("remove"==_i196.type&&e.offset<_i196.offset&&_n96>_i196.offset){var _o57={type:"attribute",offset:_i196.offset,howMany:_n96-_i196.offset,count:this._changeCount++};this._handleChange(_o57,t),t.push(_o57),e.nodesToHandle=_i196.offset-e.offset,e.howMany=e.nodesToHandle;}"attribute"==_i196.type&&(e.offset>=_i196.offset&&_n96<=_o54?(e.nodesToHandle=0,e.howMany=0,e.offset=0):e.offset<=_i196.offset&&_n96>=_o54&&(_i196.howMany=0));}}}catch(err){_iterator251.e(err);}finally{_iterator251.f();}e.howMany=e.nodesToHandle,delete e.nodesToHandle;}},{key:"_getInsertDiff",value:function _getInsertDiff(e,t,i){return{type:"insert",position:ea._createAt(e,t),name:i,length:1,changeCount:this._changeCount++};}},{key:"_getRemoveDiff",value:function _getRemoveDiff(e,t,i){return{type:"remove",position:ea._createAt(e,t),name:i,length:1,changeCount:this._changeCount++};}},{key:"_getAttributesDiff",value:function _getAttributesDiff(e,t,i){var n=[];i=new Map(i);var _iterator252=_createForOfIteratorHelper(t),_step252;try{for(_iterator252.s();!(_step252=_iterator252.n()).done;){var _step252$value=_slicedToArray(_step252.value,2),_o58=_step252$value[0],_r30=_step252$value[1];var _t177=i.has(_o58)?i.get(_o58):null;_t177!==_r30&&n.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:_o58,attributeOldValue:_r30,attributeNewValue:_t177,changeCount:this._changeCount++}),i["delete"](_o58);}}catch(err){_iterator252.e(err);}finally{_iterator252.f();}var _iterator253=_createForOfIteratorHelper(i),_step253;try{for(_iterator253.s();!(_step253=_iterator253.n()).done;){var _step253$value=_slicedToArray(_step253.value,2),_t178=_step253$value[0],_o59=_step253$value[1];n.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:_t178,attributeOldValue:null,attributeNewValue:_o59,changeCount:this._changeCount++});}}catch(err){_iterator253.e(err);}finally{_iterator253.f();}return n;}},{key:"_isInInsertedElement",value:function _isInInsertedElement(e){var t=e.parent;if(!t)return!1;var i=this._changesInElement.get(t),n=e.startOffset;if(i){var _iterator254=_createForOfIteratorHelper(i),_step254;try{for(_iterator254.s();!(_step254=_iterator254.n()).done;){var _e177=_step254.value;if("insert"==_e177.type&&n>=_e177.offset&&n<_e177.offset+_e177.howMany)return!0;}}catch(err){_iterator254.e(err);}finally{_iterator254.f();}}return this._isInInsertedElement(t);}},{key:"_removeAllNestedChanges",value:function _removeAllNestedChanges(e,t,i){var n=new oa(ea._createAt(e,t),ea._createAt(e,t+i));var _iterator255=_createForOfIteratorHelper(n.getItems({shallow:!0})),_step255;try{for(_iterator255.s();!(_step255=_iterator255.n()).done;){var _e178=_step255.value;_e178.is("element")&&(this._elementSnapshots["delete"](_e178),this._changesInElement["delete"](_e178),this._removeAllNestedChanges(_e178,0,_e178.maxOffset));}}catch(err){_iterator255.e(err);}finally{_iterator255.f();}}}]);return Fc;}();function Hc(e){var t=[];var _iterator256=_createForOfIteratorHelper(e),_step256;try{for(_iterator256.s();!(_step256=_iterator256.n()).done;){var _i197=_step256.value;if(_i197.is("$text"))for(var _e179=0;_e179<_i197.data.length;_e179++){t.push({name:"$text",attributes:new Map(_i197.getAttributes())});}else t.push({name:_i197.name,attributes:new Map(_i197.getAttributes())});}}catch(err){_iterator256.e(err);}finally{_iterator256.f();}return t;}function Uc(e,t){var i=[];var n=0,o=0;var _iterator257=_createForOfIteratorHelper(t),_step257;try{for(_iterator257.s();!(_step257=_iterator257.n()).done;){var _e180=_step257.value;if(_e180.offset>n){for(var _t180=0;_t180<_e180.offset-n;_t180++){i.push("e");}o+=_e180.offset-n;}if("insert"==_e180.type){for(var _t181=0;_t181<_e180.howMany;_t181++){i.push("i");}n=_e180.offset+_e180.howMany;}else if("remove"==_e180.type){for(var _t182=0;_t182<_e180.howMany;_t182++){i.push("r");}n=_e180.offset,o+=_e180.howMany;}else i.push.apply(i,_toConsumableArray("a".repeat(_e180.howMany).split(""))),n=_e180.offset+_e180.howMany,o+=_e180.howMany;}}catch(err){_iterator257.e(err);}finally{_iterator257.f();}if(o<e)for(var _t179=0;_t179<e-o-n;_t179++){i.push("e");}return i;}function Wc(e){var t=e.position&&"$graveyard"==e.position.root.rootName,i=e.range&&"$graveyard"==e.range.root.rootName;return!t&&!i;}var qc=/*#__PURE__*/function(){function qc(){_classCallCheck(this,qc);this._operations=[],this._undoPairs=new Map(),this._undoneOperations=new Set();}_createClass(qc,[{key:"addOperation",value:function addOperation(e){this._operations.includes(e)||this._operations.push(e);}},{key:"getOperations",value:function getOperations(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:Number.NEGATIVE_INFINITY;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Number.POSITIVE_INFINITY;var i=[];var _iterator258=_createForOfIteratorHelper(this._operations),_step258;try{for(_iterator258.s();!(_step258=_iterator258.n()).done;){var _n98=_step258.value;_n98.baseVersion>=e&&_n98.baseVersion<t&&i.push(_n98);}}catch(err){_iterator258.e(err);}finally{_iterator258.f();}return i;}},{key:"getOperation",value:function getOperation(e){var _iterator259=_createForOfIteratorHelper(this._operations),_step259;try{for(_iterator259.s();!(_step259=_iterator259.n()).done;){var _t183=_step259.value;if(_t183.baseVersion==e)return _t183;}}catch(err){_iterator259.e(err);}finally{_iterator259.f();}}},{key:"setOperationAsUndone",value:function setOperationAsUndone(e,t){this._undoPairs.set(t,e),this._undoneOperations.add(e);}},{key:"isUndoingOperation",value:function isUndoingOperation(e){return this._undoPairs.has(e);}},{key:"isUndoneOperation",value:function isUndoneOperation(e){return this._undoneOperations.has(e);}},{key:"getUndoneOperation",value:function getUndoneOperation(e){return this._undoPairs.get(e);}}]);return qc;}();function $c(e,t){return!!(i=e.charAt(t-1))&&1==i.length&&/[\ud800-\udbff]/.test(i)&&function(e){return!!e&&1==e.length&&/[\udc00-\udfff]/.test(e);}(e.charAt(t));var i;}function Yc(e,t){return!!(i=e.charAt(t))&&1==i.length&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(i);var i;}var Gc=/*#__PURE__*/function(){function Gc(e){var _this75=this;_classCallCheck(this,Gc);this.model=e,this.version=0,this.history=new qc(this),this.selection=new _a(this),this.roots=new Zi({idProperty:"rootName"}),this.differ=new Fc(e.markers),this._postFixers=new Set(),this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root","$graveyard"),this.listenTo(e,"applyOperation",function(e,t){var i=t[0];if(i.isDocumentOperation&&i.baseVersion!==_this75.version)throw new c.a("model-document-applyoperation-wrong-version",_this75,{operation:i});},{priority:"highest"}),this.listenTo(e,"applyOperation",function(e,t){var i=t[0];i.isDocumentOperation&&_this75.differ.bufferOperation(i);},{priority:"high"}),this.listenTo(e,"applyOperation",function(e,t){var i=t[0];i.isDocumentOperation&&(_this75.version++,_this75.history.addOperation(i));},{priority:"low"}),this.listenTo(this.selection,"change",function(){_this75._hasSelectionChangedFromTheLastChangeBlock=!0;}),this.listenTo(e.markers,"update",function(e,t,i,n){_this75.differ.bufferMarkerChange(t.name,i,n,t.affectsData),null===i&&t.on("change",function(e,i){_this75.differ.bufferMarkerChange(t.name,i,t.getRange(),t.affectsData);});});}_createClass(Gc,[{key:"graveyard",get:function get(){return this.getRoot("$graveyard");}},{key:"createRoot",value:function createRoot(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"$root";var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"main";if(this.roots.get(t))throw new c.a("model-document-createroot-name-exists",this,{name:t});var i=new Oc(this,e,t);return this.roots.add(i),i;}},{key:"destroy",value:function destroy(){this.selection.destroy(),this.stopListening();}},{key:"getRoot",value:function getRoot(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"main";return this.roots.get(e);}},{key:"getRootNames",value:function getRootNames(){return Array.from(this.roots,function(e){return e.rootName;}).filter(function(e){return"$graveyard"!=e;});}},{key:"registerPostFixer",value:function registerPostFixer(e){this._postFixers.add(e);}},{key:"toJSON",value:function toJSON(){var e=ln(this);return e.selection="[engine.model.DocumentSelection]",e.model="[engine.model.Model]",e;}},{key:"_handleChangeBlock",value:function _handleChangeBlock(e){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(e),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",e.batch):this.fire("change",e.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1;}},{key:"_hasDocumentChangedFromTheLastChangeBlock",value:function _hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock;}},{key:"_getDefaultRoot",value:function _getDefaultRoot(){var _iterator260=_createForOfIteratorHelper(this.roots),_step260;try{for(_iterator260.s();!(_step260=_iterator260.n()).done;){var _e181=_step260.value;if(_e181!==this.graveyard)return _e181;}}catch(err){_iterator260.e(err);}finally{_iterator260.f();}return this.graveyard;}},{key:"_getDefaultRange",value:function _getDefaultRange(){var e=this._getDefaultRoot(),t=this.model,i=t.schema,n=t.createPositionFromPath(e,[0]);return i.getNearestSelectionRange(n)||t.createRange(n);}},{key:"_validateSelectionRange",value:function _validateSelectionRange(e){return Kc(e.start)&&Kc(e.end);}},{key:"_callPostFixers",value:function _callPostFixers(e){var t=!1;do{var _iterator261=_createForOfIteratorHelper(this._postFixers),_step261;try{for(_iterator261.s();!(_step261=_iterator261.n()).done;){var _i198=_step261.value;if(this.selection.refresh(),t=_i198(e),t)break;}}catch(err){_iterator261.e(err);}finally{_iterator261.f();}}while(t);}}]);return Gc;}();function Kc(e){var t=e.textNode;if(t){var _i199=t.data,_n99=e.offset-t.startOffset;return!$c(_i199,_n99)&&!Yc(_i199,_n99);}return!0;}Ke(Gc,h);var Qc=/*#__PURE__*/function(_Symbol$iterator12){function Qc(){_classCallCheck(this,Qc);this._markers=new Map();}_createClass(Qc,[{key:_Symbol$iterator12,value:function value(){return this._markers.values();}},{key:"has",value:function has(e){return this._markers.has(e);}},{key:"get",value:function get(e){return this._markers.get(e)||null;}},{key:"_set",value:function _set(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!1;var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:!1;var o=e instanceof Jc?e.name:e;if(o.includes(","))throw new c.a("markercollection-incorrect-marker-name",this);var r=this._markers.get(o);if(r){var _e182=r.getRange();var _s20=!1;return _e182.isEqual(t)||(r._attachLiveRange(ba.fromRange(t)),_s20=!0),i!=r.managedUsingOperations&&(r._managedUsingOperations=i,_s20=!0),"boolean"==typeof n&&n!=r.affectsData&&(r._affectsData=n,_s20=!0),_s20&&this.fire("update:"+o,r,_e182,t),r;}var s=ba.fromRange(t),a=new Jc(o,s,i,n);return this._markers.set(o,a),this.fire("update:"+o,a,null,t),a;}},{key:"_remove",value:function _remove(e){var t=e instanceof Jc?e.name:e,i=this._markers.get(t);return!!i&&(this._markers["delete"](t),this.fire("update:"+t,i,i.getRange(),null),this._destroyMarker(i),!0);}},{key:"_refresh",value:function _refresh(e){var t=e instanceof Jc?e.name:e,i=this._markers.get(t);if(!i)throw new c.a("markercollection-refresh-marker-not-exists",this);var n=i.getRange();this.fire("update:"+t,i,n,n,i.managedUsingOperations,i.affectsData);}},{key:"getMarkersAtPosition",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getMarkersAtPosition(e){var _iterator262,_step262,_t184;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getMarkersAtPosition$(_context31){while(1){switch(_context31.prev=_context31.next){case 0:_iterator262=_createForOfIteratorHelper(this);_context31.prev=1;_iterator262.s();case 3:if((_step262=_iterator262.n()).done){_context31.next=11;break;}_t184=_step262.value;_context31.t0=_t184.getRange().containsPosition(e);if(!_context31.t0){_context31.next=9;break;}_context31.next=9;return _t184;case 9:_context31.next=3;break;case 11:_context31.next=16;break;case 13:_context31.prev=13;_context31.t1=_context31["catch"](1);_iterator262.e(_context31.t1);case 16:_context31.prev=16;_iterator262.f();return _context31.finish(16);case 19:case"end":return _context31.stop();}}},getMarkersAtPosition,this,[[1,13,16,19]]);})},{key:"getMarkersIntersectingRange",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getMarkersIntersectingRange(e){var _iterator263,_step263,_t185;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getMarkersIntersectingRange$(_context32){while(1){switch(_context32.prev=_context32.next){case 0:_iterator263=_createForOfIteratorHelper(this);_context32.prev=1;_iterator263.s();case 3:if((_step263=_iterator263.n()).done){_context32.next=11;break;}_t185=_step263.value;_context32.t0=null!==_t185.getRange().getIntersection(e);if(!_context32.t0){_context32.next=9;break;}_context32.next=9;return _t185;case 9:_context32.next=3;break;case 11:_context32.next=16;break;case 13:_context32.prev=13;_context32.t1=_context32["catch"](1);_iterator263.e(_context32.t1);case 16:_context32.prev=16;_iterator263.f();return _context32.finish(16);case 19:case"end":return _context32.stop();}}},getMarkersIntersectingRange,this,[[1,13,16,19]]);})},{key:"destroy",value:function destroy(){var _iterator264=_createForOfIteratorHelper(this._markers.values()),_step264;try{for(_iterator264.s();!(_step264=_iterator264.n()).done;){var _e183=_step264.value;this._destroyMarker(_e183);}}catch(err){_iterator264.e(err);}finally{_iterator264.f();}this._markers=null,this.stopListening();}},{key:"getMarkersGroup",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getMarkersGroup(e){var _iterator265,_step265,_t186;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getMarkersGroup$(_context33){while(1){switch(_context33.prev=_context33.next){case 0:_iterator265=_createForOfIteratorHelper(this._markers.values());_context33.prev=1;_iterator265.s();case 3:if((_step265=_iterator265.n()).done){_context33.next=11;break;}_t186=_step265.value;_context33.t0=_t186.name.startsWith(e+":");if(!_context33.t0){_context33.next=9;break;}_context33.next=9;return _t186;case 9:_context33.next=3;break;case 11:_context33.next=16;break;case 13:_context33.prev=13;_context33.t1=_context33["catch"](1);_iterator265.e(_context33.t1);case 16:_context33.prev=16;_iterator265.f();return _context33.finish(16);case 19:case"end":return _context33.stop();}}},getMarkersGroup,this,[[1,13,16,19]]);})},{key:"_destroyMarker",value:function _destroyMarker(e){e.stopListening(),e._detachLiveRange();}}]);return Qc;}(Symbol.iterator);Ke(Qc,h);var Jc=/*#__PURE__*/function(){function Jc(e,t,i,n){_classCallCheck(this,Jc);this.name=e,this._liveRange=this._attachLiveRange(t),this._managedUsingOperations=i,this._affectsData=n;}_createClass(Jc,[{key:"managedUsingOperations",get:function get(){if(!this._liveRange)throw new c.a("marker-destroyed",this);return this._managedUsingOperations;}},{key:"affectsData",get:function get(){if(!this._liveRange)throw new c.a("marker-destroyed",this);return this._affectsData;}},{key:"getStart",value:function getStart(){if(!this._liveRange)throw new c.a("marker-destroyed",this);return this._liveRange.start.clone();}},{key:"getEnd",value:function getEnd(){if(!this._liveRange)throw new c.a("marker-destroyed",this);return this._liveRange.end.clone();}},{key:"getRange",value:function getRange(){if(!this._liveRange)throw new c.a("marker-destroyed",this);return this._liveRange.toRange();}},{key:"is",value:function is(e){return"marker"===e||"model:marker"===e;}},{key:"_attachLiveRange",value:function _attachLiveRange(e){return this._liveRange&&this._detachLiveRange(),e.delegate("change:range").to(this),e.delegate("change:content").to(this),this._liveRange=e,e;}},{key:"_detachLiveRange",value:function _detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null;}}]);return Jc;}();Ke(Jc,h);var Zc=/*#__PURE__*/function(_fc10){_inherits(Zc,_fc10);var _super38=_createSuper(Zc);function Zc(){_classCallCheck(this,Zc);return _super38.apply(this,arguments);}_createClass(Zc,[{key:"type",get:function get(){return"noop";}},{key:"clone",value:function clone(){return new Zc(this.baseVersion);}},{key:"getReversed",value:function getReversed(){return new Zc(this.baseVersion+1);}},{key:"_execute",value:function _execute(){}}],[{key:"className",get:function get(){return"NoOperation";}}]);return Zc;}(fc);var Xc={};Xc[Cc.className]=Cc,Xc[Ic.className]=Ic,Xc[Sc.className]=Sc,Xc[Ec.className]=Ec,Xc[Zc.className]=Zc,Xc[fc.className]=fc,Xc[Pc.className]=Pc,Xc[Mc.className]=Mc,Xc[Rc.className]=Rc,Xc[Nc.className]=Nc;var el=/*#__PURE__*/function(_ea){_inherits(el,_ea);var _super39=_createSuper(el);function el(e,t){var _this76;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"toNone";_classCallCheck(this,el);if(_this76=_super39.call(this,e,t,i),!_this76.root.is("rootElement"))throw new c.a("model-liveposition-root-not-rootelement",e);tl.call(_assertThisInitialized(_this76));return _possibleConstructorReturn(_this76);}_createClass(el,[{key:"detach",value:function detach(){this.stopListening();}},{key:"is",value:function is(e){return"livePosition"===e||"model:livePosition"===e||"position"==e||"model:position"===e;}},{key:"toPosition",value:function toPosition(){return new ea(this.root,this.path.slice(),this.stickiness);}}],[{key:"fromPosition",value:function fromPosition(e,t){return new this(e.root,e.path.slice(),t||e.stickiness);}}]);return el;}(ea);function tl(){var _this77=this;this.listenTo(this.root.document.model,"applyOperation",function(e,t){var i=t[0];i.isDocumentOperation&&il.call(_this77,i);},{priority:"low"});}function il(e){var t=this.getTransformedByOperation(e);if(!this.isEqual(t)){var _e184=this.toPosition();this.path=t.path,this.root=t.root,this.fire("change",_e184);}}Ke(el,h);var nl=/*#__PURE__*/function(){function nl(e,t,i){_classCallCheck(this,nl);this.model=e,this.writer=t,this.position=i,this.canMergeWith=new Set([this.position.parent]),this.schema=e.schema,this._documentFragment=t.createDocumentFragment(),this._documentFragmentPosition=t.createPositionAt(this._documentFragment,0),this._firstNode=null,this._lastNode=null,this._lastAutoParagraph=null,this._filterAttributesOf=[],this._affectedStart=null,this._affectedEnd=null;}_createClass(nl,[{key:"handleNodes",value:function handleNodes(e){for(var _i200=0,_Array$from6=Array.from(e);_i200<_Array$from6.length;_i200++){var _t187=_Array$from6[_i200];this._handleNode(_t187);}this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[];}},{key:"_updateLastNodeFromAutoParagraph",value:function _updateLastNodeFromAutoParagraph(e){var t=this.writer.createPositionAfter(this._lastNode),i=this.writer.createPositionAfter(e);if(i.isAfter(t)){if(this._lastNode=e,this.position.parent!=e||!this.position.isAtEnd)throw new c.a("insertcontent-invalid-insertion-position",this);this.position=i,this._setAffectedBoundaries(this.position);}}},{key:"getSelectionRange",value:function getSelectionRange(){return this.nodeToSelect?oa._createOn(this.nodeToSelect):this.model.schema.getNearestSelectionRange(this.position);}},{key:"getAffectedRange",value:function getAffectedRange(){return this._affectedStart?new oa(this._affectedStart,this._affectedEnd):null;}},{key:"destroy",value:function destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach();}},{key:"_handleNode",value:function _handleNode(e){if(this.schema.isObject(e))return void this._handleObject(e);var t=this._checkAndAutoParagraphToAllowedPosition(e);t||(t=this._checkAndSplitToAllowedPosition(e),t)?(this._appendToFragment(e),this._firstNode||(this._firstNode=e),this._lastNode=e):this._handleDisallowedNode(e);}},{key:"_insertPartialFragment",value:function _insertPartialFragment(){if(this._documentFragment.isEmpty)return;var e=el.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=e.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=e.toPosition(),e.detach();}},{key:"_handleObject",value:function _handleObject(e){this._checkAndSplitToAllowedPosition(e)?this._appendToFragment(e):this._tryAutoparagraphing(e);}},{key:"_handleDisallowedNode",value:function _handleDisallowedNode(e){e.is("element")?this.handleNodes(e.getChildren()):this._tryAutoparagraphing(e);}},{key:"_appendToFragment",value:function _appendToFragment(e){if(!this.schema.checkChild(this.position,e))throw new c.a("insertcontent-wrong-position",this,{node:e,position:this.position});this.writer.insert(e,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(e.offsetSize),this.schema.isObject(e)&&!this.schema.checkChild(this.position,"$text")?this.nodeToSelect=e:this.nodeToSelect=null,this._filterAttributesOf.push(e);}},{key:"_setAffectedBoundaries",value:function _setAffectedBoundaries(e){this._affectedStart||(this._affectedStart=el.fromPosition(e,"toPrevious")),this._affectedEnd&&!this._affectedEnd.isBefore(e)||(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=el.fromPosition(e,"toNext"));}},{key:"_mergeOnLeft",value:function _mergeOnLeft(){var e=this._firstNode;if(!(e instanceof Js))return;if(!this._canMergeLeft(e))return;var t=el._createBefore(e);t.stickiness="toNext";var i=el.fromPosition(this.position,"toNext");this._affectedStart.isEqual(t)&&(this._affectedStart.detach(),this._affectedStart=el._createAt(t.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=el._createAt(t.nodeBefore,"end","toNext")),this.position=i.toPosition(),i.detach(),this._filterAttributesOf.push(this.position.parent),t.detach();}},{key:"_mergeOnRight",value:function _mergeOnRight(){var e=this._lastNode;if(!(e instanceof Js))return;if(!this._canMergeRight(e))return;var t=el._createAfter(e);if(t.stickiness="toNext",!this.position.isEqual(t))throw new c.a("insertcontent-invalid-insertion-position",this);this.position=ea._createAt(t.nodeBefore,"end");var i=el.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(t)&&(this._affectedEnd.detach(),this._affectedEnd=el._createAt(t.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=el._createAt(t.nodeBefore,0,"toPrevious")),this.position=i.toPosition(),i.detach(),this._filterAttributesOf.push(this.position.parent),t.detach();}},{key:"_canMergeLeft",value:function _canMergeLeft(e){var t=e.previousSibling;return t instanceof Js&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(t,e);}},{key:"_canMergeRight",value:function _canMergeRight(e){var t=e.nextSibling;return t instanceof Js&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(e,t);}},{key:"_tryAutoparagraphing",value:function _tryAutoparagraphing(e){var t=this.writer.createElement("paragraph");this._getAllowedIn(this.position.parent,t)&&this.schema.checkChild(t,e)&&(t._appendChild(e),this._handleNode(t));}},{key:"_checkAndAutoParagraphToAllowedPosition",value:function _checkAndAutoParagraphToAllowedPosition(e){if(this.schema.checkChild(this.position.parent,e))return!0;if(!this.schema.checkChild(this.position.parent,"paragraph")||!this.schema.checkChild("paragraph",e))return!1;this._insertPartialFragment();var t=this.writer.createElement("paragraph");return this.writer.insert(t,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=t,this.position=this.writer.createPositionAt(t,0),!0;}},{key:"_checkAndSplitToAllowedPosition",value:function _checkAndSplitToAllowedPosition(e){var t=this._getAllowedIn(this.position.parent,e);if(!t)return!1;for(t!=this.position.parent&&this._insertPartialFragment();t!=this.position.parent;){if(this.position.isAtStart){var _e185=this.position.parent;this.position=this.writer.createPositionBefore(_e185),_e185.isEmpty&&_e185.parent===t&&this.writer.remove(_e185);}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{var _e186=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=_e186,this.canMergeWith.add(this.position.nodeAfter);}}return!0;}},{key:"_getAllowedIn",value:function _getAllowedIn(e,t){return this.schema.checkChild(e,t)?e:this.schema.isLimit(e)?null:this._getAllowedIn(e.parent,t);}}]);return nl;}();function ol(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(t.isCollapsed)return;var n=t.getFirstRange();if("$graveyard"==n.root.rootName)return;var o=e.schema;e.change(function(e){if(!i.doNotResetEntireContent&&function(e,t){var i=e.getLimitElement(t);if(!t.containsEntireContent(i))return!1;var n=t.getFirstRange();if(n.start.parent==n.end.parent)return!1;return e.checkChild(i,"paragraph");}(o,t))return void function(e,t){var i=e.model.schema.getLimitElement(t);e.remove(e.createRangeIn(i)),sl(e,e.createPositionAt(i,0),t);}(e,t);var _ref22=function(e){var t=e.root.document.model,i=e.start;var n=e.end;if(t.hasContent(e,{ignoreMarkers:!0})){var _i201=function(e){var t=e.parent,i=t.root.document.model.schema,n=t.getAncestors({parentFirst:!0,includeSelf:!0});var _iterator266=_createForOfIteratorHelper(n),_step266;try{for(_iterator266.s();!(_step266=_iterator266.n()).done;){var _e187=_step266.value;if(i.isLimit(_e187))return null;if(i.isBlock(_e187))return _e187;}}catch(err){_iterator266.e(err);}finally{_iterator266.f();}}(n);if(_i201&&n.isTouching(t.createPositionAt(_i201,0))){var _i202=t.createSelection(e);t.modifySelection(_i202,{direction:"backward"});var _o60=_i202.getLastPosition(),_r31=t.createRange(_o60,n);t.hasContent(_r31,{ignoreMarkers:!0})||(n=_o60);}}return[el.fromPosition(i,"toPrevious"),el.fromPosition(n,"toNext")];}(n),_ref23=_slicedToArray(_ref22,2),r=_ref23[0],s=_ref23[1];r.isTouching(s)||e.remove(e.createRange(r,s)),i.leaveUnmerged||(!function(e,t,i){var n=e.model;if(!rl(e.model.schema,t,i))return;var _ref24=function(e,t){var i=e.getAncestors(),n=t.getAncestors();var o=0;for(;i[o]&&i[o]==n[o];){o++;}return[i[o],n[o]];}(t,i),_ref25=_slicedToArray(_ref24,2),o=_ref25[0],r=_ref25[1];if(!o||!r)return;!n.hasContent(o,{ignoreMarkers:!0})&&n.hasContent(r,{ignoreMarkers:!0})?function e(t,i,n,o){var r=i.parent,s=n.parent;if(r==o||s==o)return;i=t.createPositionAfter(r),(n=t.createPositionBefore(s)).isEqual(i)||t.insert(r,n);for(;i.parent.isEmpty;){var _e188=i.parent;i=t.createPositionBefore(_e188),t.remove(_e188);}if(n=t.createPositionBefore(s),function(e,t){var i=t.nodeBefore,n=t.nodeAfter;i.name!=n.name&&e.rename(i,n.name);e.clearAttributes(i),e.setAttributes(Object.fromEntries(n.getAttributes()),i),e.merge(t);}(t,n),!rl(t.model.schema,i,n))return;e(t,i,n,o);}(e,t,i,o.parent):function e(t,i,n,o){var r=i.parent,s=n.parent;if(r==o||s==o)return;i=t.createPositionAfter(r),(n=t.createPositionBefore(s)).isEqual(i)||t.insert(s,i);t.merge(i);for(;n.parent.isEmpty;){var _e189=n.parent;n=t.createPositionBefore(_e189),t.remove(_e189);}if(!rl(t.model.schema,i,n))return;e(t,i,n,o);}(e,t,i,o.parent);}(e,r,s),o.removeDisallowedAttributes(r.parent.getChildren(),e)),al(e,t,r),!i.doNotAutoparagraph&&function(e,t){var i=e.checkChild(t,"$text"),n=e.checkChild(t,"paragraph");return!i&&n;}(o,r)&&sl(e,r,t),r.detach(),s.detach();});}function rl(e,t,i){var n=t.parent,o=i.parent;return n!=o&&!e.isLimit(n)&&!e.isLimit(o)&&function(e,t,i){var n=new oa(e,t);var _iterator267=_createForOfIteratorHelper(n.getWalker()),_step267;try{for(_iterator267.s();!(_step267=_iterator267.n()).done;){var _e190=_step267.value;if(i.isLimit(_e190.item))return!1;}}catch(err){_iterator267.e(err);}finally{_iterator267.f();}return!0;}(t,i,e);}function sl(e,t,i){var n=e.createElement("paragraph");e.insert(n,t),al(e,i,e.createPositionAt(n,0));}function al(e,t,i){t instanceof _a?e.setSelection(i):t.setTo(i);}function cl(e,t){var i=e.isForward,n=e.walker,o=e.unit,r=e.schema,s=t.type,a=t.item,c=t.nextPosition;if("text"==s)return"word"===e.unit?function(e,t){var i=e.position.textNode;if(i){var _n100=e.position.offset-i.startOffset;for(;!dl(i.data,_n100,t)&&!hl(i,_n100,t);){e.next();var _o61=t?e.position.nodeAfter:e.position.nodeBefore;if(_o61&&_o61.is("$text")){var _n101=_o61.data.charAt(t?0:_o61.data.length-1);' ,.?!:;"-()'.includes(_n101)||(e.next(),i=e.position.textNode);}_n100=e.position.offset-i.startOffset;}}return e.position;}(n,i):function(e,t){var i=e.position.textNode;if(i){var _n102=i.data;var _o62=e.position.offset-i.startOffset;for(;$c(_n102,_o62)||"character"==t&&Yc(_n102,_o62);){e.next(),_o62=e.position.offset-i.startOffset;}}return e.position;}(n,o);if(s==(i?"elementStart":"elementEnd")){if(r.isSelectable(a))return ea._createAt(a,i?"after":"before");if(r.checkChild(c,"$text"))return c;}else{if(r.isLimit(a))return void n.skip(function(){return!0;});if(r.checkChild(c,"$text"))return c;}}function ll(e,t){var i=e.root,n=ea._createAt(i,t?"end":0);return t?new oa(e,n):new oa(n,e);}function dl(e,t,i){var n=t+(i?0:-1);return' ,.?!:;"-()'.includes(e.charAt(n));}function hl(e,t,i){return t===(i?e.endOffset:0);}function ul(e,t){var i=[];Array.from(e.getItems({direction:"backward"})).map(function(e){return t.createRangeOn(e);}).filter(function(t){return(t.start.isAfter(e.start)||t.start.isEqual(e.start))&&(t.end.isBefore(e.end)||t.end.isEqual(e.end));}).forEach(function(e){i.push(e.start.parent),t.remove(e);}),i.forEach(function(e){var i=e;for(;i.parent&&i.isEmpty;){var _e191=t.createRangeOn(i);i=i.parent,t.remove(_e191);}});}function gl(e){e.document.registerPostFixer(function(t){return function(e,t){var i=t.document.selection,n=t.schema,o=[];var r=!1;var _iterator268=_createForOfIteratorHelper(i.getRanges()),_step268;try{for(_iterator268.s();!(_step268=_iterator268.n()).done;){var _e193=_step268.value;var _t188=ml(_e193,n);_t188&&!_t188.isEqual(_e193)?(o.push(_t188),r=!0):o.push(_e193);}}catch(err){_iterator268.e(err);}finally{_iterator268.f();}r&&e.setSelection(function(e){var t=[];t.push(e.shift());var _iterator269=_createForOfIteratorHelper(e),_step269;try{for(_iterator269.s();!(_step269=_iterator269.n()).done;){var _i203=_step269.value;var _e192=t.pop();if(_i203.isEqual(_e192))t.push(_e192);else if(_i203.isIntersecting(_e192)){var _n103=_e192.start.isAfter(_i203.start)?_i203.start:_e192.start,_o63=_e192.end.isAfter(_i203.end)?_e192.end:_i203.end,_r32=new oa(_n103,_o63);t.push(_r32);}else t.push(_e192),t.push(_i203);}}catch(err){_iterator269.e(err);}finally{_iterator269.f();}return t;}(o),{backward:i.isBackward});}(t,e);});}function ml(e,t){return e.isCollapsed?function(e,t){var i=e.start,n=t.getNearestSelectionRange(i);if(!n)return null;if(!n.isCollapsed)return n;var o=n.start;if(i.isEqual(o))return null;return new oa(o);}(e,t):function(e,t){var i=e.start,n=e.end,o=t.checkChild(i,"$text"),r=t.checkChild(n,"$text"),s=t.getLimitElement(i),a=t.getLimitElement(n);if(s===a){if(o&&r)return null;if(function(e,t,i){var n=e.nodeAfter&&!i.isLimit(e.nodeAfter)||i.checkChild(e,"$text"),o=t.nodeBefore&&!i.isLimit(t.nodeBefore)||i.checkChild(t,"$text");return n||o;}(i,n,t)){var _e194=i.nodeAfter&&t.isSelectable(i.nodeAfter)?null:t.getNearestSelectionRange(i,"forward"),_o64=n.nodeBefore&&t.isSelectable(n.nodeBefore)?null:t.getNearestSelectionRange(n,"backward"),_r33=_e194?_e194.start:i,_s21=_o64?_o64.end:n;return new oa(_r33,_s21);}}var c=s&&!s.is("rootElement"),l=a&&!a.is("rootElement");if(c||l){var _e195=i.nodeAfter&&n.nodeBefore&&i.nodeAfter.parent===n.nodeBefore.parent,_o65=c&&(!_e195||!pl(i.nodeAfter,t)),_r34=l&&(!_e195||!pl(n.nodeBefore,t));var _d2=i,_h2=n;return _o65&&(_d2=ea._createBefore(fl(s,t))),_r34&&(_h2=ea._createAfter(fl(a,t))),new oa(_d2,_h2);}return null;}(e,t);}function fl(e,t){var i=e,n=i;for(;t.isLimit(n)&&n.parent;){i=n,n=n.parent;}return i;}function pl(e,t){return e&&t.isSelectable(e);}var bl=/*#__PURE__*/function(){function bl(){var _this78=this;_classCallCheck(this,bl);this.markers=new Qc(),this.document=new Gc(this),this.schema=new $a(),this._pendingChanges=[],this._currentWriter=null,["insertContent","deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(function(e){return _this78.decorate(e);}),this.on("applyOperation",function(e,t){t[0]._validate();},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$block",{allowIn:"$root",isBlock:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck(function(e,t){if("$marker"===t.name)return!0;}),gl(this),this.document.registerPostFixer(Na);}_createClass(bl,[{key:"change",value:function change(e){try{return 0===this._pendingChanges.length?(this._pendingChanges.push({batch:new mc(),callback:e}),this._runPendingChanges()[0]):e(this._currentWriter);}catch(e){c.a.rethrowUnexpectedError(e,this);}}},{key:"enqueueChange",value:function enqueueChange(e,t){try{"string"==typeof e?e=new mc(e):"function"==typeof e&&(t=e,e=new mc()),this._pendingChanges.push({batch:e,callback:t}),1==this._pendingChanges.length&&this._runPendingChanges();}catch(e){c.a.rethrowUnexpectedError(e,this);}}},{key:"applyOperation",value:function applyOperation(e){e._execute();}},{key:"insertContent",value:function insertContent(e,t,i){return function(e,t,i,n){return e.change(function(o){var r;r=i?i instanceof ua||i instanceof _a?i:o.createSelection(i,n):e.document.selection,r.isCollapsed||e.deleteContent(r,{doNotAutoparagraph:!0});var s=new nl(e,o,r.anchor);var a;a=t.is("documentFragment")?t.getChildren():[t],s.handleNodes(a);var c=s.getSelectionRange();c&&(r instanceof _a?o.setSelection(c):r.setTo(c));var l=s.getAffectedRange()||e.createRange(r.anchor);return s.destroy(),l;});}(this,e,t,i);}},{key:"deleteContent",value:function deleteContent(e,t){ol(this,e,t);}},{key:"modifySelection",value:function modifySelection(e,t){!function(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var n=e.schema,o="backward"!=i.direction,r=i.unit?i.unit:"character",s=t.focus,a=new Zs({boundaries:ll(s,o),singleCharacters:!0,direction:o?"forward":"backward"}),c={walker:a,schema:n,isForward:o,unit:r};var l;var _loop3=function _loop3(){if(l.done)return{v:void 0};var i=cl(c,l.value);if(i)return{v:void(t instanceof _a?e.change(function(e){e.setSelectionFocus(i);}):t.setFocus(i))};};for(;l=a.next();){var _ret2=_loop3();if(_typeof(_ret2)==="object")return _ret2.v;}}(this,e,t);}},{key:"getSelectedContent",value:function getSelectedContent(e){return function(e,t){return e.change(function(e){var i=e.createDocumentFragment(),n=t.getFirstRange();if(!n||n.isCollapsed)return i;var o=n.start.root,r=n.start.getCommonPath(n.end),s=o.getNodeByPath(r);var a;a=n.start.parent==n.end.parent?n:e.createRange(e.createPositionAt(s,n.start.path[r.length]),e.createPositionAt(s,n.end.path[r.length]+1));var c=a.end.offset-a.start.offset;var _iterator270=_createForOfIteratorHelper(a.getItems({shallow:!0})),_step270;try{for(_iterator270.s();!(_step270=_iterator270.n()).done;){var _t190=_step270.value;_t190.is("$textProxy")?e.appendText(_t190.data,_t190.getAttributes(),i):e.append(e.cloneElement(_t190,!0),i);}}catch(err){_iterator270.e(err);}finally{_iterator270.f();}if(a!=n){var _t189=n._getTransformedByMove(a.start,e.createPositionAt(i,0),c)[0],_o66=e.createRange(e.createPositionAt(i,0),_t189.start);ul(e.createRange(_t189.end,e.createPositionAt(i,"end")),e),ul(_o66,e);}return i;});}(this,e);}},{key:"hasContent",value:function hasContent(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=e instanceof Js?oa._createIn(e):e;if(i.isCollapsed)return!1;var _t$ignoreWhitespaces=t.ignoreWhitespaces,n=_t$ignoreWhitespaces===void 0?!1:_t$ignoreWhitespaces,_t$ignoreMarkers=t.ignoreMarkers,o=_t$ignoreMarkers===void 0?!1:_t$ignoreMarkers;if(!o){var _iterator271=_createForOfIteratorHelper(this.markers.getMarkersIntersectingRange(i)),_step271;try{for(_iterator271.s();!(_step271=_iterator271.n()).done;){var _e196=_step271.value;if(_e196.affectsData)return!0;}}catch(err){_iterator271.e(err);}finally{_iterator271.f();}}var _iterator272=_createForOfIteratorHelper(i.getItems()),_step272;try{for(_iterator272.s();!(_step272=_iterator272.n()).done;){var _e197=_step272.value;if(this.schema.isContent(_e197)){if(!_e197.is("$textProxy"))return!0;if(!n)return!0;if(-1!==_e197.data.search(/\S/))return!0;}}}catch(err){_iterator272.e(err);}finally{_iterator272.f();}return!1;}},{key:"createPositionFromPath",value:function createPositionFromPath(e,t,i){return new ea(e,t,i);}},{key:"createPositionAt",value:function createPositionAt(e,t){return ea._createAt(e,t);}},{key:"createPositionAfter",value:function createPositionAfter(e){return ea._createAfter(e);}},{key:"createPositionBefore",value:function createPositionBefore(e){return ea._createBefore(e);}},{key:"createRange",value:function createRange(e,t){return new oa(e,t);}},{key:"createRangeIn",value:function createRangeIn(e){return oa._createIn(e);}},{key:"createRangeOn",value:function createRangeOn(e){return oa._createOn(e);}},{key:"createSelection",value:function createSelection(e,t,i){return new ua(e,t,i);}},{key:"createBatch",value:function createBatch(e){return new mc(e);}},{key:"createOperationFromJSON",value:function createOperationFromJSON(e){return/*#__PURE__*/function(){function _class(){_classCallCheck(this,_class);}_createClass(_class,null,[{key:"fromJSON",value:function fromJSON(e,t){return Xc[e.__className].fromJSON(e,t);}}]);return _class;}().fromJSON(e,this.document);}},{key:"destroy",value:function destroy(){this.document.destroy(),this.stopListening();}},{key:"_runPendingChanges",value:function _runPendingChanges(){var e=[];for(this.fire("_beforeChanges");this._pendingChanges.length;){var _t191=this._pendingChanges[0].batch;this._currentWriter=new zc(this,_t191);var _i204=this._pendingChanges[0].callback(this._currentWriter);e.push(_i204),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null;}return this.fire("_afterChanges"),e;}}]);return bl;}();Ke(bl,Ue);var wl=/*#__PURE__*/function(_Os){_inherits(wl,_Os);var _super40=_createSuper(wl);function wl(e){var _this79;_classCallCheck(this,wl);_this79=_super40.call(this),_this79.editor=e;return _this79;}_createClass(wl,[{key:"set",value:function set(e,t){var _this80=this;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if("string"==typeof t){var _e198=t;t=function t(_t192,i){_this80.editor.execute(_e198),i();};}_get(_getPrototypeOf(wl.prototype),"set",this).call(this,e,t,i);}}]);return wl;}(Os);var kl=/*#__PURE__*/function(){function kl(){var _this81=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,kl);this._context=e.context||new sn({language:e.language}),this._context._addEditor(this,!e.context);var t=Array.from(this.constructor.builtinPlugins||[]);this.config=new Gi(e,this.constructor.defaultConfig),this.config.define("plugins",t),this.config.define(this._context._getEditorConfig()),this.plugins=new Xi(this,t,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this.commands=new Ua(),this.set("state","initializing"),this.once("ready",function(){return _this81.state="ready";},{priority:"high"}),this.once("destroy",function(){return _this81.state="destroyed";},{priority:"high"}),this.set("isReadOnly",!1),this.model=new bl();var i=new Jn();this.data=new dc(this.model,i),this.editing=new Ha(this.model,i),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new hc([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new wl(this),this.keystrokes.listenTo(this.editing.view.document);}_createClass(kl,[{key:"initPlugins",value:function initPlugins(){var e=this.config,t=e.get("plugins"),i=e.get("removePlugins")||[],n=e.get("extraPlugins")||[],o=e.get("substitutePlugins")||[];return this.plugins.init(t.concat(n),i,o);}},{key:"destroy",value:function destroy(){var _this82=this;var e=Promise.resolve();return"initializing"==this.state&&(e=new Promise(function(e){return _this82.once("ready",e);})),e.then(function(){_this82.fire("destroy"),_this82.stopListening(),_this82.commands.destroy();}).then(function(){return _this82.plugins.destroy();}).then(function(){_this82.model.destroy(),_this82.data.destroy(),_this82.editing.destroy(),_this82.keystrokes.destroy();}).then(function(){return _this82._context._removeEditor(_this82);});}},{key:"execute",value:function execute(){try{var _this$commands;return(_this$commands=this.commands).execute.apply(_this$commands,arguments);}catch(e){c.a.rethrowUnexpectedError(e,this);}}},{key:"focus",value:function focus(){this.editing.view.focus();}}]);return kl;}();Ke(kl,Ue);var _l=/*#__PURE__*/function(){function _l(e){_classCallCheck(this,_l);this.editor=e,this._components=new Map();}_createClass(_l,[{key:"names",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function names(){var _iterator273,_step273,_e199;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function names$(_context34){while(1){switch(_context34.prev=_context34.next){case 0:_iterator273=_createForOfIteratorHelper(this._components.values());_context34.prev=1;_iterator273.s();case 3:if((_step273=_iterator273.n()).done){_context34.next=9;break;}_e199=_step273.value;_context34.next=7;return _e199.originalName;case 7:_context34.next=3;break;case 9:_context34.next=14;break;case 11:_context34.prev=11;_context34.t0=_context34["catch"](1);_iterator273.e(_context34.t0);case 14:_context34.prev=14;_iterator273.f();return _context34.finish(14);case 17:case"end":return _context34.stop();}}},names,this,[[1,11,14,17]]);})},{key:"add",value:function add(e,t){this._components.set(vl(e),{callback:t,originalName:e});}},{key:"create",value:function create(e){if(!this.has(e))throw new c.a("componentfactory-item-missing",this,{name:e});return this._components.get(vl(e)).callback(this.editor.locale);}},{key:"has",value:function has(e){return this._components.has(vl(e));}}]);return _l;}();function vl(e){return String(e).toLowerCase();}var yl=/*#__PURE__*/function(){function yl(e){var _this83=this;_classCallCheck(this,yl);this.editor=e,this.componentFactory=new _l(e),this.focusTracker=new Rs(),this._editableElementsMap=new Map(),this.listenTo(e.editing.view.document,"layoutChanged",function(){return _this83.update();});}_createClass(yl,[{key:"element",get:function get(){return null;}},{key:"update",value:function update(){this.fire("update");}},{key:"destroy",value:function destroy(){this.stopListening(),this.focusTracker.destroy();var _iterator274=_createForOfIteratorHelper(this._editableElementsMap.values()),_step274;try{for(_iterator274.s();!(_step274=_iterator274.n()).done;){var _e200=_step274.value;_e200.ckeditorInstance=null;}}catch(err){_iterator274.e(err);}finally{_iterator274.f();}this._editableElementsMap=new Map();}},{key:"setEditableElement",value:function setEditableElement(e,t){this._editableElementsMap.set(e,t),t.ckeditorInstance||(t.ckeditorInstance=this.editor);}},{key:"getEditableElement",value:function getEditableElement(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"main";return this._editableElementsMap.get(e);}},{key:"getEditableElementsNames",value:function getEditableElementsNames(){return this._editableElementsMap.keys();}},{key:"_editableElements",get:function get(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap;}}]);return yl;}();Ke(yl,h);var xl={setData:function setData(e){this.data.set(e);},getData:function getData(e){return this.data.get(e);}};var Al={updateSourceElement:function updateSourceElement(){if(!this.sourceElement)throw new c.a("editor-missing-sourceelement",this);var e,t;e=this.sourceElement,t=this.data.get(),e instanceof HTMLTextAreaElement&&(e.value=t),e.innerHTML=t;}};var Cl=/*#__PURE__*/function(_an,_Symbol$iterator13){_inherits(Cl,_an);var _super41=_createSuper(Cl);function Cl(){_classCallCheck(this,Cl);return _super41.apply(this,arguments);}_createClass(Cl,[{key:"init",value:function init(){this.set("hasAny",!1),this._actions=new Zi({idProperty:"_id"}),this._actions.delegate("add","remove").to(this);}},{key:"add",value:function add(e){if("string"!=typeof e)throw new c.a("pendingactions-add-invalid-message",this);var t=Object.create(Ue);return t.set("message",e),this._actions.add(t),this.hasAny=!0,t;}},{key:"remove",value:function remove(e){this._actions.remove(e),this.hasAny=!!this._actions.length;}},{key:"first",get:function get(){return this._actions.get(0);}},{key:_Symbol$iterator13,value:function value(){return this._actions[Symbol.iterator]();}}],[{key:"pluginName",get:function get(){return"PendingActions";}}]);return Cl;}(an,Symbol.iterator);var Tl={cancel:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>',caption:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2z"/><path d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492L17 2.5z" fill-opacity=".6"/></svg>',check:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',cog:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.333 2 .19 2.263a5.899 5.899 0 0 1 1.458.604L14.714 3.4 16.6 5.286l-1.467 1.733c.263.452.468.942.605 1.46L18 8.666v2.666l-2.263.19a5.899 5.899 0 0 1-.604 1.458l1.467 1.733-1.886 1.886-1.733-1.467a5.899 5.899 0 0 1-1.46.605L11.334 18H8.667l-.19-2.263a5.899 5.899 0 0 1-1.458-.604L5.286 16.6 3.4 14.714l1.467-1.733a5.899 5.899 0 0 1-.604-1.458L2 11.333V8.667l2.262-.189a5.899 5.899 0 0 1 .605-1.459L3.4 5.286 5.286 3.4l1.733 1.467a5.899 5.899 0 0 1 1.46-.605L8.666 2h2.666zM10 6.267a3.733 3.733 0 1 0 0 7.466 3.733 3.733 0 0 0 0-7.466z"/></svg>',eraser:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',lowVision:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22 2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z"/></svg>',image:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.91 10.54c.26-.23.64-.21.88.03l3.36 3.14 2.23-2.06a.64.64 0 0 1 .87 0l2.52 2.97V4.5H3.2v10.12l3.71-4.08zm10.27-7.51c.6 0 1.09.47 1.09 1.05v11.84c0 .59-.49 1.06-1.09 1.06H2.79c-.6 0-1.09-.47-1.09-1.06V4.08c0-.58.49-1.05 1.1-1.05h14.38zm-5.22 5.56a1.96 1.96 0 1 1 3.4-1.96 1.96 1.96 0 0 1-3.4 1.96z"/></svg>',alignBottom:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.239 13.938-2.88-1.663a.75.75 0 0 1 .75-1.3L9 12.067V4.75a.75.75 0 1 1 1.5 0v7.318l1.89-1.093a.75.75 0 0 1 .75 1.3l-2.879 1.663a.752.752 0 0 1-.511.187.752.752 0 0 1-.511-.187zM4.25 17a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5H4.25z"/></svg>',alignMiddle:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.75 11.875a.752.752 0 0 1 .508.184l2.883 1.666a.75.75 0 0 1-.659 1.344l-.091-.044-1.892-1.093.001 4.318a.75.75 0 1 1-1.5 0v-4.317l-1.89 1.092a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .51-.187zM15.25 9a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM9.75.375a.75.75 0 0 1 .75.75v4.318l1.89-1.093.092-.045a.75.75 0 0 1 .659 1.344l-2.883 1.667a.752.752 0 0 1-.508.184.752.752 0 0 1-.511-.187L6.359 5.65a.75.75 0 0 1 .75-1.299L9 5.442V1.125a.75.75 0 0 1 .75-.75z"/></svg>',alignTop:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m10.261 7.062 2.88 1.663a.75.75 0 0 1-.75 1.3L10.5 8.933v7.317a.75.75 0 1 1-1.5 0V8.932l-1.89 1.093a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .511-.187.752.752 0 0 1 .511.187zM15.25 4a.75.75 0 1 1 0 1.5H4.75a.75.75 0 0 1 0-1.5h10.5z"/></svg>',alignLeft:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',alignCenter:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>',alignRight:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>',alignJustify:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',objectLeft:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',objectCenter:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M15.003 7v5.5a1 1 0 0 1-1 1H5.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H6.5V12h6.997V7.5z"/></svg>',objectRight:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2zm0-9h5v1.5H2zm0 3h5v1.5H2zm0 3h5v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',objectFullWidth:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18 7v5.5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1zm-1.505.5H3.504V12h12.991V7.5z"/></svg>',objectInline:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',objectBlockLeft:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',objectBlockRight:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',objectSizeFull:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2zm0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.489.489 0 0 1-.476-.5V4c0-.276.213-.5.476-.5h16.19z"/></svg>',objectSizeLarge:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M13 6H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5V8a.5.5 0 0 1 .5-.5h11z"/></svg>',objectSizeSmall:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M7 10H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4a.5.5 0 0 1 .5-.5h5z"/></svg>',objectSizeMedium:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M10 8H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6a.5.5 0 0 1 .5-.5h8z"/></svg>',pencil:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.3 17.37-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5 9.375 17H19v1.5H8z"/></svg>',pilcrow:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4z"/></svg>',quote:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>',threeVerticalDots:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>'};function El(_ref26){var e=_ref26.emitter,t=_ref26.activator,i=_ref26.callback,n=_ref26.contextElements;e.listenTo(document,"mousedown",function(e,o){if(!t())return;var r="function"==typeof o.composedPath?o.composedPath():[];var _iterator275=_createForOfIteratorHelper(n),_step275;try{for(_iterator275.s();!(_step275=_iterator275.n()).done;){var _e201=_step275.value;if(_e201.contains(o.target)||r.includes(_e201))return;}}catch(err){_iterator275.e(err);}finally{_iterator275.f();}i();});}function Il(e){e.set("_isCssTransitionsDisabled",!1),e.disableCssTransitions=function(){e._isCssTransitionsDisabled=!0;},e.enableCssTransitions=function(){e._isCssTransitionsDisabled=!1;},e.extendTemplate({attributes:{"class":[e.bindTemplate["if"]("_isCssTransitionsDisabled","ck-transitions-disabled")]}});}function Sl(_ref27){var e=_ref27.view;e.listenTo(e.element,"submit",function(t,i){i.preventDefault(),e.fire("submit");},{useCapture:!0});}var Pl=/*#__PURE__*/function(_Zi){_inherits(Pl,_Zi);var _super42=_createSuper(Pl);function Pl(){var _this84;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];_classCallCheck(this,Pl);_this84=_super42.call(this,e,{idProperty:"viewUid"}),_this84.on("add",function(e,t,i){_this84._renderViewIntoCollectionParent(t,i);}),_this84.on("remove",function(e,t){t.element&&_this84._parentElement&&t.element.remove();}),_this84._parentElement=null;return _this84;}_createClass(Pl,[{key:"destroy",value:function destroy(){this.map(function(e){return e.destroy();});}},{key:"setParent",value:function setParent(e){this._parentElement=e;var _iterator276=_createForOfIteratorHelper(this),_step276;try{for(_iterator276.s();!(_step276=_iterator276.n()).done;){var _e202=_step276.value;this._renderViewIntoCollectionParent(_e202);}}catch(err){_iterator276.e(err);}finally{_iterator276.f();}}},{key:"delegate",value:function delegate(){var _this85=this;for(var _len20=arguments.length,e=new Array(_len20),_key20=0;_key20<_len20;_key20++){e[_key20]=arguments[_key20];}if(!e.length||!e.every(function(e){return"string"==typeof e;}))throw new c.a("ui-viewcollection-delegate-wrong-events",this);return{to:function to(t){var _iterator277=_createForOfIteratorHelper(_this85),_step277;try{for(_iterator277.s();!(_step277=_iterator277.n()).done;){var _i207=_step277.value;var _iterator280=_createForOfIteratorHelper(e),_step280;try{for(_iterator280.s();!(_step280=_iterator280.n()).done;){var _n104=_step280.value;_i207.delegate(_n104).to(t);}}catch(err){_iterator280.e(err);}finally{_iterator280.f();}}}catch(err){_iterator277.e(err);}finally{_iterator277.f();}_this85.on("add",function(i,n){var _iterator278=_createForOfIteratorHelper(e),_step278;try{for(_iterator278.s();!(_step278=_iterator278.n()).done;){var _i205=_step278.value;n.delegate(_i205).to(t);}}catch(err){_iterator278.e(err);}finally{_iterator278.f();}}),_this85.on("remove",function(i,n){var _iterator279=_createForOfIteratorHelper(e),_step279;try{for(_iterator279.s();!(_step279=_iterator279.n()).done;){var _i206=_step279.value;n.stopDelegating(_i206,t);}}catch(err){_iterator279.e(err);}finally{_iterator279.f();}});}};}},{key:"_renderViewIntoCollectionParent",value:function _renderViewIntoCollectionParent(e,t){e.isRendered||e.render(),e.element&&this._parentElement&&this._parentElement.insertBefore(e.element,this._parentElement.children[t]);}}]);return Pl;}(Zi);i(15);var Ml=/*#__PURE__*/function(){function Ml(e){_classCallCheck(this,Ml);this.element=null,this.isRendered=!1,this.locale=e,this.t=e&&e.t,this._viewCollections=new Zi(),this._unboundChildren=this.createCollection(),this._viewCollections.on("add",function(t,i){i.locale=e;}),this.decorate("render");}_createClass(Ml,[{key:"bindTemplate",get:function get(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=Nl.bind(this,this);}},{key:"createCollection",value:function createCollection(e){var t=new Pl(e);return this._viewCollections.add(t),t;}},{key:"registerChild",value:function registerChild(e){Ji(e)||(e=[e]);var _iterator281=_createForOfIteratorHelper(e),_step281;try{for(_iterator281.s();!(_step281=_iterator281.n()).done;){var _t193=_step281.value;this._unboundChildren.add(_t193);}}catch(err){_iterator281.e(err);}finally{_iterator281.f();}}},{key:"deregisterChild",value:function deregisterChild(e){Ji(e)||(e=[e]);var _iterator282=_createForOfIteratorHelper(e),_step282;try{for(_iterator282.s();!(_step282=_iterator282.n()).done;){var _t194=_step282.value;this._unboundChildren.remove(_t194);}}catch(err){_iterator282.e(err);}finally{_iterator282.f();}}},{key:"setTemplate",value:function setTemplate(e){this.template=new Nl(e);}},{key:"extendTemplate",value:function extendTemplate(e){Nl.extend(this.template,e);}},{key:"render",value:function render(){if(this.isRendered)throw new c.a("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0;}},{key:"destroy",value:function destroy(){this.stopListening(),this._viewCollections.map(function(e){return e.destroy();}),this.template&&this.template._revertData&&this.template.revert(this.element);}}]);return Ml;}();Ke(Ml,Mr),Ke(Ml,Ue);var Nl=/*#__PURE__*/function(){function Nl(e){_classCallCheck(this,Nl);Object.assign(this,Hl(Fl(e))),this._isRendered=!1,this._revertData=null;}_createClass(Nl,[{key:"render",value:function render(){var e=this._renderNode({intoFragment:!0});return this._isRendered=!0,e;}},{key:"apply",value:function apply(e){return this._revertData={children:[],bindings:[],attributes:{}},this._renderNode({node:e,isApplying:!0,revertData:this._revertData}),e;}},{key:"revert",value:function revert(e){if(!this._revertData)throw new c.a("ui-template-revert-not-applied",[this,e]);this._revertTemplateFromNode(e,this._revertData);}},{key:"getViews",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getViews(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getViews$(_context36){while(1){switch(_context36.prev=_context36.next){case 0:return _context36.delegateYield(/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function e(t){var _iterator283,_step283,_i208;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function e$(_context35){while(1){switch(_context35.prev=_context35.next){case 0:if(!t.children){_context35.next=24;break;}_iterator283=_createForOfIteratorHelper(t.children);_context35.prev=2;_iterator283.s();case 4:if((_step283=_iterator283.n()).done){_context35.next=16;break;}_i208=_step283.value;if(!Yl(_i208)){_context35.next=11;break;}_context35.next=9;return _i208;case 9:_context35.next=14;break;case 11:_context35.t0=Gl(_i208);if(!_context35.t0){_context35.next=14;break;}return _context35.delegateYield(e(_i208),"t1",14);case 14:_context35.next=4;break;case 16:_context35.next=21;break;case 18:_context35.prev=18;_context35.t2=_context35["catch"](2);_iterator283.e(_context35.t2);case 21:_context35.prev=21;_iterator283.f();return _context35.finish(21);case 24:case"end":return _context35.stop();}}},e,null,[[2,18,21,24]]);})(this),"t0",1);case 1:case"end":return _context36.stop();}}},getViews,this);})},{key:"_renderNode",value:function _renderNode(e){var t;if(t=e.node?this.tag&&this.text:this.tag?this.text:!this.text,t)throw new c.a("ui-template-wrong-syntax",this);return this.text?this._renderText(e):this._renderElement(e);}},{key:"_renderElement",value:function _renderElement(e){var t=e.node;return t||(t=e.node=document.createElementNS(this.ns||"http://www.w3.org/1999/xhtml",this.tag)),this._renderAttributes(e),this._renderElementChildren(e),this._setUpListeners(e),t;}},{key:"_renderText",value:function _renderText(e){var t=e.node;return t?e.revertData.text=t.textContent:t=e.node=document.createTextNode(""),Dl(this.text)?this._bindToObservable({schema:this.text,updater:Vl(t),data:e}):t.textContent=this.text.join(""),t;}},{key:"_renderAttributes",value:function _renderAttributes(e){var t,i,n,o;if(!this.attributes)return;var r=e.node,s=e.revertData;for(t in this.attributes){if(n=r.getAttribute(t),i=this.attributes[t],s&&(s.attributes[t]=n),o=w(i[0])&&i[0].ns?i[0].ns:null,Dl(i)){var _a13=o?i[0].value:i;s&&Ql(t)&&_a13.unshift(n),this._bindToObservable({schema:_a13,updater:jl(r,t,o),data:e});}else"style"==t&&"string"!=typeof i[0]?this._renderStyleAttribute(i[0],e):(s&&n&&Ql(t)&&i.unshift(n),i=i.map(function(e){return e&&e.value||e;}).reduce(function(e,t){return e.concat(t);},[]).reduce(Wl,""),$l(i)||r.setAttributeNS(o,t,i));}}},{key:"_renderStyleAttribute",value:function _renderStyleAttribute(e,t){var i=t.node;for(var _n105 in e){var _o67=e[_n105];Dl(_o67)?this._bindToObservable({schema:[_o67],updater:Bl(i,_n105),data:t}):i.style[_n105]=_o67;}}},{key:"_renderElementChildren",value:function _renderElementChildren(e){var t=e.node,i=e.intoFragment?document.createDocumentFragment():t,n=e.isApplying;var o=0;var _iterator284=_createForOfIteratorHelper(this.children),_step284;try{for(_iterator284.s();!(_step284=_iterator284.n()).done;){var _r35=_step284.value;if(Kl(_r35)){if(!n){_r35.setParent(t);var _iterator285=_createForOfIteratorHelper(_r35),_step285;try{for(_iterator285.s();!(_step285=_iterator285.n()).done;){var _e203=_step285.value;i.appendChild(_e203.element);}}catch(err){_iterator285.e(err);}finally{_iterator285.f();}}}else if(Yl(_r35))n||(_r35.isRendered||_r35.render(),i.appendChild(_r35.element));else if(pr(_r35))i.appendChild(_r35);else if(n){var _t195={children:[],bindings:[],attributes:{}};e.revertData.children.push(_t195),_r35._renderNode({node:i.childNodes[o++],isApplying:!0,revertData:_t195});}else i.appendChild(_r35.render());}}catch(err){_iterator284.e(err);}finally{_iterator284.f();}e.intoFragment&&t.appendChild(i);}},{key:"_setUpListeners",value:function _setUpListeners(e){var _this86=this;if(this.eventListeners){var _loop4=function _loop4(_t196){var i=_this86.eventListeners[_t196].map(function(i){var _t196$split=_t196.split("@"),_t196$split2=_slicedToArray(_t196$split,2),n=_t196$split2[0],o=_t196$split2[1];return i.activateDomEventListener(n,o,e);});e.revertData&&e.revertData.bindings.push(i);};for(var _t196 in this.eventListeners){_loop4(_t196);}}}},{key:"_bindToObservable",value:function _bindToObservable(_ref28){var e=_ref28.schema,t=_ref28.updater,i=_ref28.data;var n=i.revertData;Ll(e,t,i);var o=e.filter(function(e){return!$l(e);}).filter(function(e){return e.observable;}).map(function(n){return n.activateAttributeListener(e,t,i);});n&&n.bindings.push(o);}},{key:"_revertTemplateFromNode",value:function _revertTemplateFromNode(e,t){var _iterator286=_createForOfIteratorHelper(t.bindings),_step286;try{for(_iterator286.s();!(_step286=_iterator286.n()).done;){var _e204=_step286.value;var _iterator287=_createForOfIteratorHelper(_e204),_step287;try{for(_iterator287.s();!(_step287=_iterator287.n()).done;){var _t197=_step287.value;_t197();}}catch(err){_iterator287.e(err);}finally{_iterator287.f();}}}catch(err){_iterator286.e(err);}finally{_iterator286.f();}if(t.text)e.textContent=t.text;else{for(var _i209 in t.attributes){var _n106=t.attributes[_i209];null===_n106?e.removeAttribute(_i209):e.setAttribute(_i209,_n106);}for(var _i210=0;_i210<t.children.length;++_i210){this._revertTemplateFromNode(e.childNodes[_i210],t.children[_i210]);}}}}],[{key:"bind",value:function bind(e,t){return{to:function to(i,n){return new Ol({eventNameOrFunction:i,attribute:i,observable:e,emitter:t,callback:n});},"if":function _if(i,n,o){return new zl({observable:e,emitter:t,attribute:i,valueIfTrue:n,callback:o});}};}},{key:"extend",value:function extend(e,t){if(e._isRendered)throw new c.a("template-extend-render",[this,e]);!function e(t,i){var _t$text;i.attributes&&(t.attributes||(t.attributes={}),ql(t.attributes,i.attributes));i.eventListeners&&(t.eventListeners||(t.eventListeners={}),ql(t.eventListeners,i.eventListeners));i.text&&(_t$text=t.text).push.apply(_t$text,_toConsumableArray(i.text));if(i.children&&i.children.length){if(t.children.length!=i.children.length)throw new c.a("ui-template-extend-children-mismatch",t);var _n107=0;var _iterator288=_createForOfIteratorHelper(i.children),_step288;try{for(_iterator288.s();!(_step288=_iterator288.n()).done;){var _o68=_step288.value;e(t.children[_n107++],_o68);}}catch(err){_iterator288.e(err);}finally{_iterator288.f();}}}(e,Hl(Fl(t)));}}]);return Nl;}();Ke(Nl,h);var Rl=/*#__PURE__*/function(){function Rl(e){_classCallCheck(this,Rl);Object.assign(this,e);}_createClass(Rl,[{key:"getValue",value:function getValue(e){var t=this.observable[this.attribute];return this.callback?this.callback(t,e):t;}},{key:"activateAttributeListener",value:function activateAttributeListener(e,t,i){var _this87=this;var n=function n(){return Ll(e,t,i);};return this.emitter.listenTo(this.observable,"change:"+this.attribute,n),function(){_this87.emitter.stopListening(_this87.observable,"change:"+_this87.attribute,n);};}}]);return Rl;}();var Ol=/*#__PURE__*/function(_Rl){_inherits(Ol,_Rl);var _super43=_createSuper(Ol);function Ol(){_classCallCheck(this,Ol);return _super43.apply(this,arguments);}_createClass(Ol,[{key:"activateDomEventListener",value:function activateDomEventListener(e,t,i){var _this88=this;var n=function n(e,i){t&&!i.target.matches(t)||("function"==typeof _this88.eventNameOrFunction?_this88.eventNameOrFunction(i):_this88.observable.fire(_this88.eventNameOrFunction,i));};return this.emitter.listenTo(i.node,e,n),function(){_this88.emitter.stopListening(i.node,e,n);};}}]);return Ol;}(Rl);var zl=/*#__PURE__*/function(_Rl2){_inherits(zl,_Rl2);var _super44=_createSuper(zl);function zl(){_classCallCheck(this,zl);return _super44.apply(this,arguments);}_createClass(zl,[{key:"getValue",value:function getValue(e){return!$l(_get(_getPrototypeOf(zl.prototype),"getValue",this).call(this,e))&&(this.valueIfTrue||!0);}}]);return zl;}(Rl);function Dl(e){return!!e&&(e.value&&(e=e.value),Array.isArray(e)?e.some(Dl):e instanceof Rl);}function Ll(e,t,_ref29){var i=_ref29.node;var n=function(e,t){return e.map(function(e){return e instanceof Rl?e.getValue(t):e;});}(e,i);n=1==e.length&&e[0]instanceof zl?n[0]:n.reduce(Wl,""),$l(n)?t.remove():t.set(n);}function Vl(e){return{set:function set(t){e.textContent=t;},remove:function remove(){e.textContent="";}};}function jl(e,t,i){return{set:function set(n){e.setAttributeNS(i,t,n);},remove:function remove(){e.removeAttributeNS(i,t);}};}function Bl(e,t){return{set:function set(i){e.style[t]=i;},remove:function remove(){e.style[t]=null;}};}function Fl(e){return $i(e,function(e){if(e&&(e instanceof Rl||Gl(e)||Yl(e)||Kl(e)))return e;});}function Hl(e){if("string"==typeof e?e=function(e){return{text:[e]};}(e):e.text&&function(e){e.text=en(e.text);}(e),e.on&&(e.eventListeners=function(e){for(var _t198 in e){Ul(e,_t198);}return e;}(e.on),delete e.on),!e.text){e.attributes&&function(e){for(var _t200 in e){e[_t200].value&&(e[_t200].value=en(e[_t200].value)),Ul(e,_t200);}}(e.attributes);var _t199=[];if(e.children)if(Kl(e.children))_t199.push(e.children);else{var _iterator289=_createForOfIteratorHelper(e.children),_step289;try{for(_iterator289.s();!(_step289=_iterator289.n()).done;){var _i211=_step289.value;Gl(_i211)||Yl(_i211)||pr(_i211)?_t199.push(_i211):_t199.push(new Nl(_i211));}}catch(err){_iterator289.e(err);}finally{_iterator289.f();}}e.children=_t199;}return e;}function Ul(e,t){e[t]=en(e[t]);}function Wl(e,t){return $l(t)?e:$l(e)?t:"".concat(e," ").concat(t);}function ql(e,t){for(var _i212 in t){var _e$_i;e[_i212]?(_e$_i=e[_i212]).push.apply(_e$_i,_toConsumableArray(t[_i212])):e[_i212]=t[_i212];}}function $l(e){return!e&&0!==e;}function Yl(e){return e instanceof Ml;}function Gl(e){return e instanceof Nl;}function Kl(e){return e instanceof Pl;}function Ql(e){return"class"==e||"style"==e;}var Jl=/*#__PURE__*/function(_Pl){_inherits(Jl,_Pl);var _super45=_createSuper(Jl);function Jl(e){var _this89;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];_classCallCheck(this,Jl);_this89=_super45.call(this,t),_this89.locale=e;return _this89;}_createClass(Jl,[{key:"attachToDom",value:function attachToDom(){this._bodyCollectionContainer=new Nl({tag:"div",attributes:{"class":["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection},children:this}).render();var e=document.querySelector(".ck-body-wrapper");e||(e=function(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[];var o=i&&i.xmlns,r=o?e.createElementNS(o,t):e.createElement(t);for(var _e205 in i){r.setAttribute(_e205,i[_e205]);}!ys(n)&&Ji(n)||(n=[n]);var _iterator290=_createForOfIteratorHelper(n),_step290;try{for(_iterator290.s();!(_step290=_iterator290.n()).done;){var _t201=_step290.value;ys(_t201)&&(_t201=e.createTextNode(_t201)),r.appendChild(_t201);}}catch(err){_iterator290.e(err);}finally{_iterator290.f();}return r;}(document,"div",{"class":"ck-body-wrapper"}),document.body.appendChild(e)),e.appendChild(this._bodyCollectionContainer);}},{key:"detachFromDom",value:function detachFromDom(){_get(_getPrototypeOf(Jl.prototype),"destroy",this).call(this),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove();var e=document.querySelector(".ck-body-wrapper");e&&0==e.childElementCount&&e.remove();}}]);return Jl;}(Pl);i(17);var Zl=/*#__PURE__*/function(_Ml){_inherits(Zl,_Ml);var _super46=_createSuper(Zl);function Zl(){var _this90;_classCallCheck(this,Zl);_this90=_super46.call(this);var e=_this90.bindTemplate;_this90.set("content",""),_this90.set("viewBox","0 0 20 20"),_this90.set("fillColor",""),_this90.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{"class":["ck","ck-icon"],viewBox:e.to("viewBox")}});return _this90;}_createClass(Zl,[{key:"render",value:function render(){var _this91=this;_get(_getPrototypeOf(Zl.prototype),"render",this).call(this),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",function(){_this91._updateXMLContent(),_this91._colorFillPaths();}),this.on("change:fillColor",function(){_this91._colorFillPaths();});}},{key:"_updateXMLContent",value:function _updateXMLContent(){if(this.content){var _e206=new DOMParser().parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),_t202=_e206.getAttribute("viewBox");for(_t202&&(this.viewBox=_t202),this.element.innerHTML="";_e206.childNodes.length>0;){this.element.appendChild(_e206.childNodes[0]);}}}},{key:"_colorFillPaths",value:function _colorFillPaths(){var _this92=this;this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(function(e){e.style.fill=_this92.fillColor;});}}]);return Zl;}(Ml);i(19);var Xl=/*#__PURE__*/function(_Ml2){_inherits(Xl,_Ml2);var _super47=_createSuper(Xl);function Xl(e){var _this93;_classCallCheck(this,Xl);_this93=_super47.call(this,e),_this93.set("text",""),_this93.set("position","s");var t=_this93.bindTemplate;_this93.setTemplate({tag:"span",attributes:{"class":["ck","ck-tooltip",t.to("position",function(e){return"ck-tooltip_"+e;}),t["if"]("text","ck-hidden",function(e){return!e.trim();})]},children:[{tag:"span",attributes:{"class":["ck","ck-tooltip__text"]},children:[{text:t.to("text")}]}]});return _this93;}return _createClass(Xl);}(Ml);i(21);var ed=/*#__PURE__*/function(_Ml3){_inherits(ed,_Ml3);var _super48=_createSuper(ed);function ed(e){var _this94;_classCallCheck(this,ed);_this94=_super48.call(this,e);var t=_this94.bindTemplate,i=s();_this94.set("class"),_this94.set("labelStyle"),_this94.set("icon"),_this94.set("isEnabled",!0),_this94.set("isOn",!1),_this94.set("isVisible",!0),_this94.set("isToggleable",!1),_this94.set("keystroke"),_this94.set("label"),_this94.set("tabindex",-1),_this94.set("tooltip"),_this94.set("tooltipPosition","s"),_this94.set("type","button"),_this94.set("withText",!1),_this94.set("withKeystroke",!1),_this94.children=_this94.createCollection(),_this94.tooltipView=_this94._createTooltipView(),_this94.labelView=_this94._createLabelView(i),_this94.iconView=new Zl(),_this94.iconView.extendTemplate({attributes:{"class":"ck-button__icon"}}),_this94.keystrokeView=_this94._createKeystrokeView(),_this94.bind("_tooltipString").to(_assertThisInitialized(_this94),"tooltip",_assertThisInitialized(_this94),"label",_assertThisInitialized(_this94),"keystroke",_this94._getTooltipString.bind(_assertThisInitialized(_this94))),_this94.setTemplate({tag:"button",attributes:{"class":["ck","ck-button",t.to("class"),t["if"]("isEnabled","ck-disabled",function(e){return!e;}),t["if"]("isVisible","ck-hidden",function(e){return!e;}),t.to("isOn",function(e){return e?"ck-on":"ck-off";}),t["if"]("withText","ck-button_with-text"),t["if"]("withKeystroke","ck-button_with-keystroke")],type:t.to("type",function(e){return e||"button";}),tabindex:t.to("tabindex"),"aria-labelledby":"ck-editor__aria-label_"+i,"aria-disabled":t["if"]("isEnabled",!0,function(e){return!e;}),"aria-pressed":t.to("isOn",function(e){return!!_this94.isToggleable&&String(e);})},children:_this94.children,on:{mousedown:t.to(function(e){e.preventDefault();}),click:t.to(function(e){_this94.isEnabled?_this94.fire("execute"):e.preventDefault();})}});return _this94;}_createClass(ed,[{key:"render",value:function render(){_get(_getPrototypeOf(ed.prototype),"render",this).call(this),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.tooltipView),this.children.add(this.labelView),this.withKeystroke&&this.children.add(this.keystrokeView);}},{key:"focus",value:function focus(){this.element.focus();}},{key:"_createTooltipView",value:function _createTooltipView(){var e=new Xl();return e.bind("text").to(this,"_tooltipString"),e.bind("position").to(this,"tooltipPosition"),e;}},{key:"_createLabelView",value:function _createLabelView(e){var t=new Ml(),i=this.bindTemplate;return t.setTemplate({tag:"span",attributes:{"class":["ck","ck-button__label"],style:i.to("labelStyle"),id:"ck-editor__aria-label_"+e},children:[{text:this.bindTemplate.to("label")}]}),t;}},{key:"_createKeystrokeView",value:function _createKeystrokeView(){var e=new Ml();return e.setTemplate({tag:"span",attributes:{"class":["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",function(e){return Do(e);})}]}),e;}},{key:"_getTooltipString",value:function _getTooltipString(e,t,i){return e?"string"==typeof e?e:(i&&(i=Do(i)),e instanceof Function?e(t,i):"".concat(t).concat(i?" (".concat(i,")"):"")):"";}}]);return ed;}(Ml);i(23);var td=/*#__PURE__*/function(_ed){_inherits(td,_ed);var _super49=_createSuper(td);function td(e){var _this95;_classCallCheck(this,td);_this95=_super49.call(this,e),_this95.isToggleable=!0,_this95.toggleSwitchView=_this95._createToggleView(),_this95.extendTemplate({attributes:{"class":"ck-switchbutton"}});return _this95;}_createClass(td,[{key:"render",value:function render(){_get(_getPrototypeOf(td.prototype),"render",this).call(this),this.children.add(this.toggleSwitchView);}},{key:"_createToggleView",value:function _createToggleView(){var e=new Ml();return e.setTemplate({tag:"span",attributes:{"class":["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{"class":["ck","ck-button__toggle__inner"]}}]}),e;}}]);return td;}(ed);var id=/*#__PURE__*/function(){function id(e){var _this96=this;_classCallCheck(this,id);if(Object.assign(this,e),e.actions&&e.keystrokeHandler){var _loop5=function _loop5(_t203){var i=e.actions[_t203];"string"==typeof i&&(i=[i]);var _iterator291=_createForOfIteratorHelper(i),_step291;try{for(_iterator291.s();!(_step291=_iterator291.n()).done;){var _n108=_step291.value;e.keystrokeHandler.set(_n108,function(e,i){_this96[_t203](),i();});}}catch(err){_iterator291.e(err);}finally{_iterator291.f();}};for(var _t203 in e.actions){_loop5(_t203);}}}_createClass(id,[{key:"first",get:function get(){return this.focusables.find(nd)||null;}},{key:"last",get:function get(){return this.focusables.filter(nd).slice(-1)[0]||null;}},{key:"next",get:function get(){return this._getFocusableItem(1);}},{key:"previous",get:function get(){return this._getFocusableItem(-1);}},{key:"current",get:function get(){var _this97=this;var e=null;return null===this.focusTracker.focusedElement?null:(this.focusables.find(function(t,i){var n=t.element===_this97.focusTracker.focusedElement;return n&&(e=i),n;}),e);}},{key:"focusFirst",value:function focusFirst(){this._focus(this.first);}},{key:"focusLast",value:function focusLast(){this._focus(this.last);}},{key:"focusNext",value:function focusNext(){this._focus(this.next);}},{key:"focusPrevious",value:function focusPrevious(){this._focus(this.previous);}},{key:"_focus",value:function _focus(e){e&&e.focus();}},{key:"_getFocusableItem",value:function _getFocusableItem(e){var t=this.current,i=this.focusables.length;if(!i)return null;if(null===t)return this[1===e?"first":"last"];var n=(t+i+e)%i;do{var _t204=this.focusables.get(n);if(nd(_t204))return _t204;n=(n+i+e)%i;}while(n!==t);return null;}}]);return id;}();function nd(e){return!(!e.focus||"none"==vr.window.getComputedStyle(e.element).display);}i(25);var od='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>';var rd=/*#__PURE__*/function(_ed2){_inherits(rd,_ed2);var _super50=_createSuper(rd);function rd(e){var _this98;_classCallCheck(this,rd);_this98=_super50.call(this,e),_this98.arrowView=_this98._createArrowView(),_this98.extendTemplate({attributes:{"aria-haspopup":!0}}),_this98.delegate("execute").to(_assertThisInitialized(_this98),"open");return _this98;}_createClass(rd,[{key:"render",value:function render(){_get(_getPrototypeOf(rd.prototype),"render",this).call(this),this.children.add(this.arrowView);}},{key:"_createArrowView",value:function _createArrowView(){var e=new Zl();return e.content=od,e.extendTemplate({attributes:{"class":"ck-dropdown__arrow"}}),e;}}]);return rd;}(ed);i(27);var sd=/*#__PURE__*/function(_Ml4){_inherits(sd,_Ml4);var _super51=_createSuper(sd);function sd(e){var _this99;_classCallCheck(this,sd);_this99=_super51.call(this,e);var t=_this99.bindTemplate;_this99.set("class"),_this99.set("icon"),_this99.set("isEnabled",!0),_this99.set("isOn",!1),_this99.set("isToggleable",!1),_this99.set("isVisible",!0),_this99.set("keystroke"),_this99.set("label"),_this99.set("tabindex",-1),_this99.set("tooltip"),_this99.set("tooltipPosition","s"),_this99.set("type","button"),_this99.set("withText",!1),_this99.children=_this99.createCollection(),_this99.actionView=_this99._createActionView(),_this99.arrowView=_this99._createArrowView(),_this99.keystrokes=new Os(),_this99.focusTracker=new Rs(),_this99.setTemplate({tag:"div",attributes:{"class":["ck","ck-splitbutton",t.to("class"),t["if"]("isVisible","ck-hidden",function(e){return!e;}),_this99.arrowView.bindTemplate["if"]("isOn","ck-splitbutton_open")]},children:_this99.children});return _this99;}_createClass(sd,[{key:"render",value:function render(){var _this100=this;_get(_getPrototypeOf(sd.prototype),"render",this).call(this),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",function(e,t){_this100.focusTracker.focusedElement===_this100.actionView.element&&(_this100.arrowView.focus(),t());}),this.keystrokes.set("arrowleft",function(e,t){_this100.focusTracker.focusedElement===_this100.arrowView.element&&(_this100.actionView.focus(),t());});}},{key:"focus",value:function focus(){this.actionView.focus();}},{key:"_createActionView",value:function _createActionView(){var e=new ed();return e.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),e.extendTemplate({attributes:{"class":"ck-splitbutton__action"}}),e.delegate("execute").to(this),e;}},{key:"_createArrowView",value:function _createArrowView(){var e=new ed(),t=e.bindTemplate;return e.icon=od,e.extendTemplate({attributes:{"class":"ck-splitbutton__arrow","aria-haspopup":!0,"aria-expanded":t.to("isOn",function(e){return String(e);})}}),e.bind("isEnabled").to(this),e.delegate("execute").to(this,"open"),e;}}]);return sd;}(Ml);var ad=/*#__PURE__*/function(_Ml5){_inherits(ad,_Ml5);var _super52=_createSuper(ad);function ad(e){var _this101;_classCallCheck(this,ad);_this101=_super52.call(this,e);var t=_this101.bindTemplate;_this101.set("isVisible",!1),_this101.set("position","se"),_this101.children=_this101.createCollection(),_this101.setTemplate({tag:"div",attributes:{"class":["ck","ck-reset","ck-dropdown__panel",t.to("position",function(e){return"ck-dropdown__panel_"+e;}),t["if"]("isVisible","ck-dropdown__panel-visible")]},children:_this101.children,on:{selectstart:t.to(function(e){return e.preventDefault();})}});return _this101;}_createClass(ad,[{key:"focus",value:function focus(){this.children.length&&this.children.first.focus();}},{key:"focusLast",value:function focusLast(){if(this.children.length){var _e207=this.children.last;"function"==typeof _e207.focusLast?_e207.focusLast():_e207.focus();}}}]);return ad;}(Ml);i(29);function cd(_ref30){var e=_ref30.element,t=_ref30.target,i=_ref30.positions,n=_ref30.limiter,o=_ref30.fitInViewport;M(t)&&(t=t()),M(n)&&(n=n());var r=function(e){return e&&e.parentNode?e.offsetParent===vr.document.body?null:e.offsetParent:null;}(e),s=new Ts(e),a=new Ts(t);var c,l;if(n||o){var _e208=function(e,t){var i=t.elementRect,n=t.viewportRect,o=i.getArea(),r=function(e,_ref31){var t=_ref31.targetRect,i=_ref31.elementRect,n=_ref31.limiterRect,o=_ref31.viewportRect;var r=[],s=i.getArea();var _iterator292=_createForOfIteratorHelper(e),_step292;try{for(_iterator292.s();!(_step292=_iterator292.n()).done;){var _a14=_step292.value;var _e209=ld(_a14,t,i);if(!_e209)continue;var _e210=_slicedToArray(_e209,2),_c6=_e210[0],_l2=_e210[1];var _d3=0,_h3=0;if(n)if(o){var _e211=n.getIntersection(o);_e211&&(_d3=_e211.getIntersectionArea(_l2));}else _d3=n.getIntersectionArea(_l2);o&&(_h3=o.getIntersectionArea(_l2));var _u2={positionName:_c6,positionRect:_l2,limiterIntersectArea:_d3,viewportIntersectArea:_h3};if(_d3===s)return[_u2];r.push(_u2);}}catch(err){_iterator292.e(err);}finally{_iterator292.f();}return r;}(e,t);if(n){var _e212=dd(r.filter(function(_ref32){var e=_ref32.viewportIntersectArea;return e===o;}),o);if(_e212)return _e212;}return dd(r,o);}(i,{targetRect:a,elementRect:s,limiterRect:n&&new Ts(n).getVisible(),viewportRect:o&&new Ts(vr.window)});var _ref33=_e208||ld(i[0],a,s);var _ref34=_slicedToArray(_ref33,2);l=_ref34[0];c=_ref34[1];}else{var _ld=ld(i[0],a,s);var _ld2=_slicedToArray(_ld,2);l=_ld2[0];c=_ld2[1];}var d=hd(c);return r&&(d=function(_ref35,i){var e=_ref35.left,t=_ref35.top;var n=hd(new Ts(i)),o=As(i);return e-=n.left,t-=n.top,e+=i.scrollLeft,t+=i.scrollTop,e-=o.left,t-=o.top,{left:e,top:t};}(d,r)),{left:d.left,top:d.top,name:l};}function ld(e,t,i){var n=e(t,i);if(!n)return null;var o=n.left,r=n.top,s=n.name;return[s,i.clone().moveTo(o,r)];}function dd(e,t){var i,n,o=0;var _iterator293=_createForOfIteratorHelper(e),_step293;try{for(_iterator293.s();!(_step293=_iterator293.n()).done;){var _step293$value=_step293.value,_r36=_step293$value.positionName,_s22=_step293$value.positionRect,_a15=_step293$value.limiterIntersectArea,_c7=_step293$value.viewportIntersectArea;if(_a15===t)return[_r36,_s22];var _e213=Math.pow(_c7,2)+Math.pow(_a15,2);_e213>o&&(o=_e213,i=_s22,n=_r36);}}catch(err){_iterator293.e(err);}finally{_iterator293.f();}return i?[n,i]:null;}function hd(_ref36){var e=_ref36.left,t=_ref36.top;var _vr$window2=vr.window,i=_vr$window2.scrollX,n=_vr$window2.scrollY;return{left:e+i,top:t+n};}var ud=/*#__PURE__*/function(_Ml6){_inherits(ud,_Ml6);var _super53=_createSuper(ud);function ud(e,t,i){var _this102;_classCallCheck(this,ud);_this102=_super53.call(this,e);var n=_this102.bindTemplate;_this102.buttonView=t,_this102.panelView=i,_this102.set("isOpen",!1),_this102.set("isEnabled",!0),_this102.set("class"),_this102.set("id"),_this102.set("panelPosition","auto"),_this102.keystrokes=new Os(),_this102.setTemplate({tag:"div",attributes:{"class":["ck","ck-dropdown",n.to("class"),n["if"]("isEnabled","ck-disabled",function(e){return!e;})],id:n.to("id"),"aria-describedby":n.to("ariaDescribedById")},children:[t,i]}),t.extendTemplate({attributes:{"class":["ck-dropdown__button"]}});return _this102;}_createClass(ud,[{key:"render",value:function render(){var _this103=this;_get(_getPrototypeOf(ud.prototype),"render",this).call(this),this.listenTo(this.buttonView,"open",function(){_this103.isOpen=!_this103.isOpen;}),this.panelView.bind("isVisible").to(this,"isOpen"),this.on("change:isOpen",function(){_this103.isOpen&&("auto"===_this103.panelPosition?_this103.panelView.position=ud._getOptimalPosition({element:_this103.panelView.element,target:_this103.buttonView.element,fitInViewport:!0,positions:_this103._panelPositions}).name:_this103.panelView.position=_this103.panelPosition);}),this.keystrokes.listenTo(this.element);var e=function e(_e214,t){_this103.isOpen&&(_this103.buttonView.focus(),_this103.isOpen=!1,t());};this.keystrokes.set("arrowdown",function(e,t){_this103.buttonView.isEnabled&&!_this103.isOpen&&(_this103.isOpen=!0,t());}),this.keystrokes.set("arrowright",function(e,t){_this103.isOpen&&t();}),this.keystrokes.set("arrowleft",e),this.keystrokes.set("esc",e);}},{key:"focus",value:function focus(){this.buttonView.focus();}},{key:"_panelPositions",get:function get(){var _ud$defaultPanelPosit=ud.defaultPanelPositions,e=_ud$defaultPanelPosit.south,t=_ud$defaultPanelPosit.north,i=_ud$defaultPanelPosit.southEast,n=_ud$defaultPanelPosit.southWest,o=_ud$defaultPanelPosit.northEast,r=_ud$defaultPanelPosit.northWest,s=_ud$defaultPanelPosit.southMiddleEast,a=_ud$defaultPanelPosit.southMiddleWest,c=_ud$defaultPanelPosit.northMiddleEast,l=_ud$defaultPanelPosit.northMiddleWest;return"rtl"!==this.locale.uiLanguageDirection?[i,n,s,a,e,o,r,c,l,t]:[n,i,a,s,e,r,o,l,c,t];}}]);return ud;}(Ml);ud.defaultPanelPositions={south:function south(e,t){return{top:e.bottom,left:e.left-(t.width-e.width)/2,name:"s"};},southEast:function southEast(e){return{top:e.bottom,left:e.left,name:"se"};},southWest:function southWest(e,t){return{top:e.bottom,left:e.left-t.width+e.width,name:"sw"};},southMiddleEast:function southMiddleEast(e,t){return{top:e.bottom,left:e.left-(t.width-e.width)/4,name:"sme"};},southMiddleWest:function southMiddleWest(e,t){return{top:e.bottom,left:e.left-3*(t.width-e.width)/4,name:"smw"};},north:function north(e,t){return{top:e.top-t.height,left:e.left-(t.width-e.width)/2,name:"n"};},northEast:function northEast(e,t){return{top:e.top-t.height,left:e.left,name:"ne"};},northWest:function northWest(e,t){return{top:e.top-t.height,left:e.left-t.width+e.width,name:"nw"};},northMiddleEast:function northMiddleEast(e,t){return{top:e.top-t.height,left:e.left-(t.width-e.width)/4,name:"nme"};},northMiddleWest:function northMiddleWest(e,t){return{top:e.top-t.height,left:e.left-3*(t.width-e.width)/4,name:"nmw"};}},ud._getOptimalPosition=cd;var gd=/*#__PURE__*/function(_Ml7){_inherits(gd,_Ml7);var _super54=_createSuper(gd);function gd(e){var _this104;_classCallCheck(this,gd);_this104=_super54.call(this,e),_this104.setTemplate({tag:"span",attributes:{"class":["ck","ck-toolbar__separator"]}});return _this104;}return _createClass(gd);}(Ml);var md=/*#__PURE__*/function(_Ml8){_inherits(md,_Ml8);var _super55=_createSuper(md);function md(e){var _this105;_classCallCheck(this,md);_this105=_super55.call(this,e),_this105.setTemplate({tag:"span",attributes:{"class":["ck","ck-toolbar__line-break"]}});return _this105;}return _createClass(md);}(Ml);function fd(e){return Array.isArray(e)?{items:e,removeItems:[]}:e?Object.assign({items:[],removeItems:[]},e):{items:[],removeItems:[]};}i(31);var pd=/*#__PURE__*/function(_Ml9){_inherits(pd,_Ml9);var _super56=_createSuper(pd);function pd(e,t){var _this106;_classCallCheck(this,pd);_this106=_super56.call(this,e);var i=_this106.bindTemplate,n=_this106.t;_this106.options=t||{},_this106.set("ariaLabel",n("Editor toolbar")),_this106.set("maxWidth","auto"),_this106.items=_this106.createCollection(),_this106.focusTracker=new Rs(),_this106.keystrokes=new Os(),_this106.set("class"),_this106.set("isCompact",!1),_this106.itemsView=new bd(e),_this106.children=_this106.createCollection(),_this106.children.add(_this106.itemsView),_this106.focusables=_this106.createCollection();var o="rtl"===e.uiLanguageDirection;_this106._focusCycler=new id({focusables:_this106.focusables,focusTracker:_this106.focusTracker,keystrokeHandler:_this106.keystrokes,actions:{focusPrevious:[o?"arrowright":"arrowleft","arrowup"],focusNext:[o?"arrowleft":"arrowright","arrowdown"]}});var r=["ck","ck-toolbar",i.to("class"),i["if"]("isCompact","ck-toolbar_compact")];var s;_this106.options.shouldGroupWhenFull&&_this106.options.isFloating&&r.push("ck-toolbar_floating"),_this106.setTemplate({tag:"div",attributes:{"class":r,role:"toolbar","aria-label":i.to("ariaLabel"),style:{maxWidth:i.to("maxWidth")}},children:_this106.children,on:{mousedown:(s=_assertThisInitialized(_this106),s.bindTemplate.to(function(e){e.target===s.element&&e.preventDefault();}))}}),_this106._behavior=_this106.options.shouldGroupWhenFull?new kd(_assertThisInitialized(_this106)):new wd(_assertThisInitialized(_this106));return _this106;}_createClass(pd,[{key:"render",value:function render(){var _this107=this;_get(_getPrototypeOf(pd.prototype),"render",this).call(this);var _iterator294=_createForOfIteratorHelper(this.items),_step294;try{for(_iterator294.s();!(_step294=_iterator294.n()).done;){var _e215=_step294.value;this.focusTracker.add(_e215.element);}}catch(err){_iterator294.e(err);}finally{_iterator294.f();}this.items.on("add",function(e,t){_this107.focusTracker.add(t.element);}),this.items.on("remove",function(e,t){_this107.focusTracker.remove(t.element);}),this.keystrokes.listenTo(this.element),this._behavior.render(this);}},{key:"destroy",value:function destroy(){return this._behavior.destroy(),_get(_getPrototypeOf(pd.prototype),"destroy",this).call(this);}},{key:"focus",value:function focus(){this._focusCycler.focusFirst();}},{key:"focusLast",value:function focusLast(){this._focusCycler.focusLast();}},{key:"fillFromConfig",value:function fillFromConfig(e,t){var _this108=this;var i=fd(e),n=i.items.filter(function(e,n,o){return"|"===e||-1===i.removeItems.indexOf(e)&&("-"===e?!_this108.options.shouldGroupWhenFull||(Object(c.b)("toolbarview-line-break-ignored-when-grouping-items",o),!1):!!t.has(e)||(Object(c.b)("toolbarview-item-unavailable",{name:e}),!1));}),o=this._cleanSeparators(n).map(function(e){return"|"===e?new gd():"-"===e?new md():t.create(e);});this.items.addMany(o);}},{key:"_cleanSeparators",value:function _cleanSeparators(e){var t=function t(e){return"-"!==e&&"|"!==e;},i=e.length,n=e.findIndex(t),o=i-e.slice().reverse().findIndex(t);return e.slice(n,o).filter(function(e,i,n){if(t(e))return!0;return!(i>0&&n[i-1]===e);});}}]);return pd;}(Ml);var bd=/*#__PURE__*/function(_Ml10){_inherits(bd,_Ml10);var _super57=_createSuper(bd);function bd(e){var _this109;_classCallCheck(this,bd);_this109=_super57.call(this,e),_this109.children=_this109.createCollection(),_this109.setTemplate({tag:"div",attributes:{"class":["ck","ck-toolbar__items"]},children:_this109.children});return _this109;}return _createClass(bd);}(Ml);var wd=/*#__PURE__*/function(){function wd(e){_classCallCheck(this,wd);var t=e.bindTemplate;e.set("isVertical",!1),e.itemsView.children.bindTo(e.items).using(function(e){return e;}),e.focusables.bindTo(e.items).using(function(e){return e;}),e.extendTemplate({attributes:{"class":[t["if"]("isVertical","ck-toolbar_vertical")]}});}_createClass(wd,[{key:"render",value:function render(){}},{key:"destroy",value:function destroy(){}}]);return wd;}();var kd=/*#__PURE__*/function(){function kd(e){var _this110=this;_classCallCheck(this,kd);this.view=e,this.viewChildren=e.children,this.viewFocusables=e.focusables,this.viewItemsView=e.itemsView,this.viewFocusTracker=e.focusTracker,this.viewLocale=e.locale,this.ungroupedItems=e.createCollection(),this.groupedItems=e.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),this.resizeObserver=null,this.cachedPadding=null,this.shouldUpdateGroupingOnNextResize=!1,e.itemsView.children.bindTo(this.ungroupedItems).using(function(e){return e;}),this.ungroupedItems.on("add",this._updateFocusCycleableItems.bind(this)),this.ungroupedItems.on("remove",this._updateFocusCycleableItems.bind(this)),e.children.on("add",this._updateFocusCycleableItems.bind(this)),e.children.on("remove",this._updateFocusCycleableItems.bind(this)),e.items.on("change",function(e,t){var i=t.index;var _iterator295=_createForOfIteratorHelper(t.removed),_step295;try{for(_iterator295.s();!(_step295=_iterator295.n()).done;){var _e217=_step295.value;i>=_this110.ungroupedItems.length?_this110.groupedItems.remove(_e217):_this110.ungroupedItems.remove(_e217);}}catch(err){_iterator295.e(err);}finally{_iterator295.f();}for(var _e216=i;_e216<i+t.added.length;_e216++){var _n109=t.added[_e216-i];_e216>_this110.ungroupedItems.length?_this110.groupedItems.add(_n109,_e216-_this110.ungroupedItems.length):_this110.ungroupedItems.add(_n109,_e216);}_this110._updateGrouping();}),e.extendTemplate({attributes:{"class":["ck-toolbar_grouping"]}});}_createClass(kd,[{key:"render",value:function render(e){this.viewElement=e.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(e);}},{key:"destroy",value:function destroy(){this.groupedItemsDropdown.destroy(),this.resizeObserver.destroy();}},{key:"_updateGrouping",value:function _updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!this.viewElement.offsetParent)return void(this.shouldUpdateGroupingOnNextResize=!0);var e=this.groupedItems.length;var t;for(;this._areItemsOverflowing;){this._groupLastItem(),t=!0;}if(!t&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;){this._ungroupFirstItem();}this._areItemsOverflowing&&this._groupLastItem();}this.groupedItems.length!==e&&this.view.fire("groupedItemsUpdate");}},{key:"_areItemsOverflowing",get:function get(){if(!this.ungroupedItems.length)return!1;var e=this.viewElement,t=this.viewLocale.uiLanguageDirection,i=new Ts(e.lastChild),n=new Ts(e);if(!this.cachedPadding){var _i213=vr.window.getComputedStyle(e),_n110="ltr"===t?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(_i213[_n110]);}return"ltr"===t?i.right>n.right-this.cachedPadding:i.left<n.left+this.cachedPadding;}},{key:"_enableGroupingOnResize",value:function _enableGroupingOnResize(){var _this111=this;var e;this.resizeObserver=new Ss(this.viewElement,function(t){e&&e===t.contentRect.width&&!_this111.shouldUpdateGroupingOnNextResize||(_this111.shouldUpdateGroupingOnNextResize=!1,_this111._updateGrouping(),e=t.contentRect.width);}),this._updateGrouping();}},{key:"_enableGroupingOnMaxWidthChange",value:function _enableGroupingOnMaxWidthChange(e){var _this112=this;e.on("change:maxWidth",function(){_this112._updateGrouping();});}},{key:"_groupLastItem",value:function _groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new gd()),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0);}},{key:"_ungroupFirstItem",value:function _ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element));}},{key:"_createGroupedItemsDropdown",value:function _createGroupedItemsDropdown(){var e=this.viewLocale,t=e.t,i=xd(e);return i["class"]="ck-toolbar__grouped-dropdown",i.panelPosition="ltr"===e.uiLanguageDirection?"sw":"se",Ad(i,[]),i.buttonView.set({label:t("Show more items"),tooltip:!0,tooltipPosition:"rtl"===e.uiLanguageDirection?"se":"sw",icon:Tl.threeVerticalDots}),i.toolbarView.items.bindTo(this.groupedItems).using(function(e){return e;}),i;}},{key:"_updateFocusCycleableItems",value:function _updateFocusCycleableItems(){var _this113=this;this.viewFocusables.clear(),this.ungroupedItems.map(function(e){_this113.viewFocusables.add(e);}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown);}}]);return kd;}();i(33);var _d=/*#__PURE__*/function(_Ml11){_inherits(_d,_Ml11);var _super58=_createSuper(_d);function _d(){var _this114;_classCallCheck(this,_d);_this114=_super58.call(this),_this114.items=_this114.createCollection(),_this114.focusTracker=new Rs(),_this114.keystrokes=new Os(),_this114._focusCycler=new id({focusables:_this114.items,focusTracker:_this114.focusTracker,keystrokeHandler:_this114.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),_this114.setTemplate({tag:"ul",attributes:{"class":["ck","ck-reset","ck-list"]},children:_this114.items});return _this114;}_createClass(_d,[{key:"render",value:function render(){var _this115=this;_get(_getPrototypeOf(_d.prototype),"render",this).call(this);var _iterator296=_createForOfIteratorHelper(this.items),_step296;try{for(_iterator296.s();!(_step296=_iterator296.n()).done;){var _e218=_step296.value;this.focusTracker.add(_e218.element);}}catch(err){_iterator296.e(err);}finally{_iterator296.f();}this.items.on("add",function(e,t){_this115.focusTracker.add(t.element);}),this.items.on("remove",function(e,t){_this115.focusTracker.remove(t.element);}),this.keystrokes.listenTo(this.element);}},{key:"focus",value:function focus(){this._focusCycler.focusFirst();}},{key:"focusLast",value:function focusLast(){this._focusCycler.focusLast();}}]);return _d;}(Ml);var vd=/*#__PURE__*/function(_Ml12){_inherits(vd,_Ml12);var _super59=_createSuper(vd);function vd(e){var _this116;_classCallCheck(this,vd);_this116=_super59.call(this,e),_this116.children=_this116.createCollection(),_this116.setTemplate({tag:"li",attributes:{"class":["ck","ck-list__item"]},children:_this116.children});return _this116;}_createClass(vd,[{key:"focus",value:function focus(){this.children.first.focus();}}]);return vd;}(Ml);var yd=/*#__PURE__*/function(_Ml13){_inherits(yd,_Ml13);var _super60=_createSuper(yd);function yd(e){var _this117;_classCallCheck(this,yd);_this117=_super60.call(this,e),_this117.setTemplate({tag:"li",attributes:{"class":["ck","ck-list__separator"]}});return _this117;}return _createClass(yd);}(Ml);i(35),i(37);function xd(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:rd;var i=new t(e),n=new ad(e),o=new ud(e,i,n);return i.bind("isEnabled").to(o),i instanceof rd?i.bind("isOn").to(o,"isOpen"):i.arrowView.bind("isOn").to(o,"isOpen"),function(e){(function(e){e.on("render",function(){El({emitter:e,activator:function activator(){return e.isOpen;},callback:function callback(){e.isOpen=!1;},contextElements:[e.element]});});})(e),function(e){e.on("execute",function(t){t.source instanceof td||(e.isOpen=!1);});}(e),function(e){e.keystrokes.set("arrowdown",function(t,i){e.isOpen&&(e.panelView.focus(),i());}),e.keystrokes.set("arrowup",function(t,i){e.isOpen&&(e.panelView.focusLast(),i());});}(e);}(o),o;}function Ad(e,t){var i=e.locale,n=i.t,o=e.toolbarView=new pd(i);o.set("ariaLabel",n("Dropdown toolbar")),e.extendTemplate({attributes:{"class":["ck-toolbar-dropdown"]}}),t.map(function(e){return o.items.add(e);}),e.panelView.children.add(o),o.items.delegate("execute").to(e);}function Cd(e,t){var i=e.locale,n=e.listView=new _d(i);n.items.bindTo(t).using(function(_ref37){var e=_ref37.type,t=_ref37.model;if("separator"===e)return new yd(i);if("button"===e||"switchbutton"===e){var _o70;var _n111=new vd(i);var _o69;return _o69="button"===e?new ed(i):new td(i),(_o70=_o69).bind.apply(_o70,_toConsumableArray(Object.keys(t))).to(t),_o69.delegate("execute").to(_n111),_n111.children.add(_o69),_n111;}}),e.panelView.children.add(n),n.items.delegate("execute").to(e);}i(39);var Td=/*#__PURE__*/function(_Ml14){_inherits(Td,_Ml14);var _super61=_createSuper(Td);function Td(e){var _this118;_classCallCheck(this,Td);_this118=_super61.call(this,e),_this118.body=new Jl(e);return _this118;}_createClass(Td,[{key:"render",value:function render(){_get(_getPrototypeOf(Td.prototype),"render",this).call(this),this.body.attachToDom();}},{key:"destroy",value:function destroy(){return this.body.detachFromDom(),_get(_getPrototypeOf(Td.prototype),"destroy",this).call(this);}}]);return Td;}(Ml);i(41);var Ed=/*#__PURE__*/function(_Ml15){_inherits(Ed,_Ml15);var _super62=_createSuper(Ed);function Ed(e){var _this119;_classCallCheck(this,Ed);_this119=_super62.call(this,e),_this119.set("text"),_this119.set("for"),_this119.id="ck-editor__label_"+s();var t=_this119.bindTemplate;_this119.setTemplate({tag:"label",attributes:{"class":["ck","ck-label"],id:_this119.id,"for":t.to("for")},children:[{text:t.to("text")}]});return _this119;}return _createClass(Ed);}(Ml);var Id=/*#__PURE__*/function(_Td){_inherits(Id,_Td);var _super63=_createSuper(Id);function Id(e){var _this120;_classCallCheck(this,Id);_this120=_super63.call(this,e),_this120.top=_this120.createCollection(),_this120.main=_this120.createCollection(),_this120._voiceLabelView=_this120._createVoiceLabel(),_this120.setTemplate({tag:"div",attributes:{"class":["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:e.uiLanguageDirection,lang:e.uiLanguage,"aria-labelledby":_this120._voiceLabelView.id},children:[_this120._voiceLabelView,{tag:"div",attributes:{"class":["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:_this120.top},{tag:"div",attributes:{"class":["ck","ck-editor__main"],role:"presentation"},children:_this120.main}]});return _this120;}_createClass(Id,[{key:"_createVoiceLabel",value:function _createVoiceLabel(){var e=this.t,t=new Ed();return t.text=e("Rich Text Editor"),t.extendTemplate({attributes:{"class":"ck-voice-label"}}),t;}}]);return Id;}(Td);var Sd=/*#__PURE__*/function(_Ml16){_inherits(Sd,_Ml16);var _super64=_createSuper(Sd);function Sd(e,t,i){var _this121;_classCallCheck(this,Sd);_this121=_super64.call(this,e),_this121.setTemplate({tag:"div",attributes:{"class":["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:e.contentLanguage,dir:e.contentLanguageDirection}}),_this121.name=null,_this121.set("isFocused",!1),_this121._editableElement=i,_this121._hasExternalElement=!!_this121._editableElement,_this121._editingView=t;return _this121;}_createClass(Sd,[{key:"render",value:function render(){var _this122=this;_get(_getPrototypeOf(Sd.prototype),"render",this).call(this),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",function(){return _this122._updateIsFocusedClasses();}),this._updateIsFocusedClasses();}},{key:"destroy",value:function destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),_get(_getPrototypeOf(Sd.prototype),"destroy",this).call(this);}},{key:"_updateIsFocusedClasses",value:function _updateIsFocusedClasses(){var e=this._editingView;function t(t){e.change(function(i){var n=e.document.getRoot(t.name);i.addClass(t.isFocused?"ck-focused":"ck-blurred",n),i.removeClass(t.isFocused?"ck-blurred":"ck-focused",n);});}e.isRenderingInProgress?function i(n){e.once("change:isRenderingInProgress",function(e,o,r){r?i(n):t(n);});}(this):t(this);}}]);return Sd;}(Ml);var Pd=/*#__PURE__*/function(_Sd){_inherits(Pd,_Sd);var _super65=_createSuper(Pd);function Pd(e,t,i){var _this123;_classCallCheck(this,Pd);_this123=_super65.call(this,e,t,i),_this123.extendTemplate({attributes:{role:"textbox","class":"ck-editor__editable_inline"}});return _this123;}_createClass(Pd,[{key:"render",value:function render(){var _this124=this;_get(_getPrototypeOf(Pd.prototype),"render",this).call(this);var e=this._editingView,t=this.t;e.change(function(i){var n=e.document.getRoot(_this124.name);i.setAttribute("aria-label",t("Rich Text Editor, %0",_this124.name),n);});}}]);return Pd;}(Sd);i(43);i(45);var Md=/*#__PURE__*/function(_Ml17){_inherits(Md,_Ml17);var _super66=_createSuper(Md);function Md(e){var _this125;_classCallCheck(this,Md);_this125=_super66.call(this,e),_this125.set("value"),_this125.set("id"),_this125.set("placeholder"),_this125.set("isReadOnly",!1),_this125.set("hasError",!1),_this125.set("ariaDescribedById"),_this125.focusTracker=new Rs(),_this125.bind("isFocused").to(_this125.focusTracker),_this125.set("isEmpty",!0);var t=_this125.bindTemplate;_this125.setTemplate({tag:"input",attributes:{type:"text","class":["ck","ck-input","ck-input-text",t["if"]("isFocused","ck-input_focused"),t["if"]("isEmpty","ck-input-text_empty"),t["if"]("hasError","ck-error")],id:t.to("id"),placeholder:t.to("placeholder"),readonly:t.to("isReadOnly"),"aria-invalid":t["if"]("hasError",!0),"aria-describedby":t.to("ariaDescribedById")},on:{input:t.to("input"),change:t.to(_this125._updateIsEmpty.bind(_assertThisInitialized(_this125)))}});return _this125;}_createClass(Md,[{key:"render",value:function render(){var _this126=this;_get(_getPrototypeOf(Md.prototype),"render",this).call(this),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",function(e,t,i){_this126._setDomElementValue(i),_this126._updateIsEmpty();});}},{key:"select",value:function select(){this.element.select();}},{key:"focus",value:function focus(){this.element.focus();}},{key:"_updateIsEmpty",value:function _updateIsEmpty(){this.isEmpty=!this.element.value;}},{key:"_setDomElementValue",value:function _setDomElementValue(e){this.element.value=e||0===e?e:"";}}]);return Md;}(Ml);i(47);var Nd=/*#__PURE__*/function(_Ml18){_inherits(Nd,_Ml18);var _super67=_createSuper(Nd);function Nd(e,t){var _this127;_classCallCheck(this,Nd);_this127=_super67.call(this,e);var i="ck-labeled-field-view-"+s(),n="ck-labeled-field-view-status-"+s();_this127.fieldView=t(_assertThisInitialized(_this127),i,n),_this127.set("label"),_this127.set("isEnabled",!0),_this127.set("isEmpty",!0),_this127.set("isFocused",!1),_this127.set("errorText",null),_this127.set("infoText",null),_this127.set("class"),_this127.set("placeholder"),_this127.labelView=_this127._createLabelView(i),_this127.statusView=_this127._createStatusView(n),_this127.bind("_statusText").to(_assertThisInitialized(_this127),"errorText",_assertThisInitialized(_this127),"infoText",function(e,t){return e||t;});var o=_this127.bindTemplate;_this127.setTemplate({tag:"div",attributes:{"class":["ck","ck-labeled-field-view",o.to("class"),o["if"]("isEnabled","ck-disabled",function(e){return!e;}),o["if"]("isEmpty","ck-labeled-field-view_empty"),o["if"]("isFocused","ck-labeled-field-view_focused"),o["if"]("placeholder","ck-labeled-field-view_placeholder"),o["if"]("errorText","ck-error")]},children:[{tag:"div",attributes:{"class":["ck","ck-labeled-field-view__input-wrapper"]},children:[_this127.fieldView,_this127.labelView]},_this127.statusView]});return _this127;}_createClass(Nd,[{key:"_createLabelView",value:function _createLabelView(e){var t=new Ed(this.locale);return t["for"]=e,t.bind("text").to(this,"label"),t;}},{key:"_createStatusView",value:function _createStatusView(e){var t=new Ml(this.locale),i=this.bindTemplate;return t.setTemplate({tag:"div",attributes:{"class":["ck","ck-labeled-field-view__status",i["if"]("errorText","ck-labeled-field-view__status_error"),i["if"]("_statusText","ck-hidden",function(e){return!e;})],id:e,role:i["if"]("errorText","alert")},children:[{text:i.to("_statusText")}]}),t;}},{key:"focus",value:function focus(){this.fieldView.focus();}}]);return Nd;}(Ml);function Rd(e,t,i){var n=new Md(e.locale);return n.set({id:t,ariaDescribedById:i}),n.bind("isReadOnly").to(e,"isEnabled",function(e){return!e;}),n.bind("hasError").to(e,"errorText",function(e){return!!e;}),n.on("input",function(){e.errorText=null;}),e.bind("isEmpty","isFocused","placeholder").to(n),n;}var Od=/*#__PURE__*/function(_an2){_inherits(Od,_an2);var _super68=_createSuper(Od);function Od(){_classCallCheck(this,Od);return _super68.apply(this,arguments);}_createClass(Od,[{key:"init",value:function init(){this.on("show:warning",function(e,t){window.alert(t.message);},{priority:"lowest"});}},{key:"showSuccess",value:function showSuccess(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this._showNotification({message:e,type:"success",namespace:t.namespace,title:t.title});}},{key:"showInfo",value:function showInfo(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this._showNotification({message:e,type:"info",namespace:t.namespace,title:t.title});}},{key:"showWarning",value:function showWarning(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this._showNotification({message:e,type:"warning",namespace:t.namespace,title:t.title});}},{key:"_showNotification",value:function _showNotification(e){var t="show:"+e.type+(e.namespace?":"+e.namespace:"");this.fire(t,{message:e.message,type:e.type,title:e.title||""});}}],[{key:"pluginName",get:function get(){return"Notification";}}]);return Od;}(an);var zd=/*#__PURE__*/_createClass(function zd(e,t){_classCallCheck(this,zd);t&&De(this,t),e&&this.set(e);});Ke(zd,Ue);i(49);var Dd=Ms("px"),Ld=vr.document.body;var Vd=/*#__PURE__*/function(_Ml19){_inherits(Vd,_Ml19);var _super69=_createSuper(Vd);function Vd(e){var _this128;_classCallCheck(this,Vd);_this128=_super69.call(this,e);var t=_this128.bindTemplate;_this128.set("top",0),_this128.set("left",0),_this128.set("position","arrow_nw"),_this128.set("isVisible",!1),_this128.set("withArrow",!0),_this128.set("class"),_this128.content=_this128.createCollection(),_this128.setTemplate({tag:"div",attributes:{"class":["ck","ck-balloon-panel",t.to("position",function(e){return"ck-balloon-panel_"+e;}),t["if"]("isVisible","ck-balloon-panel_visible"),t["if"]("withArrow","ck-balloon-panel_with-arrow"),t.to("class")],style:{top:t.to("top",Dd),left:t.to("left",Dd)}},children:_this128.content});return _this128;}_createClass(Vd,[{key:"show",value:function show(){this.isVisible=!0;}},{key:"hide",value:function hide(){this.isVisible=!1;}},{key:"attachTo",value:function attachTo(e){this.show();var t=Vd.defaultPositions,i=Object.assign({},{element:this.element,positions:[t.southArrowNorth,t.southArrowNorthMiddleWest,t.southArrowNorthMiddleEast,t.southArrowNorthWest,t.southArrowNorthEast,t.northArrowSouth,t.northArrowSouthMiddleWest,t.northArrowSouthMiddleEast,t.northArrowSouthWest,t.northArrowSouthEast],limiter:Ld,fitInViewport:!0},e),n=Vd._getOptimalPosition(i),o=parseInt(n.left),r=parseInt(n.top),s=n.name;Object.assign(this,{top:r,left:o,position:s});}},{key:"pin",value:function pin(e){var _this129=this;this.unpin(),this._pinWhenIsVisibleCallback=function(){_this129.isVisible?_this129._startPinning(e):_this129._stopPinning();},this._startPinning(e),this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback);}},{key:"unpin",value:function unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide());}},{key:"_startPinning",value:function _startPinning(e){var _this130=this;this.attachTo(e);var t=jd(e.target),i=e.limiter?jd(e.limiter):Ld;this.listenTo(vr.document,"scroll",function(n,o){var r=o.target,s=t&&r.contains(t),a=i&&r.contains(i);!s&&!a&&t&&i||_this130.attachTo(e);},{useCapture:!0}),this.listenTo(vr.window,"resize",function(){_this130.attachTo(e);});}},{key:"_stopPinning",value:function _stopPinning(){this.stopListening(vr.document,"scroll"),this.stopListening(vr.window,"resize");}}]);return Vd;}(Ml);function jd(e){return Yi(e)?e:xs(e)?e.commonAncestorContainer:"function"==typeof e?jd(e()):null;}function Bd(e,t){return e.top-t.height-Vd.arrowVerticalOffset;}function Fd(e){return e.bottom+Vd.arrowVerticalOffset;}Vd.arrowHorizontalOffset=25,Vd.arrowVerticalOffset=10,Vd._getOptimalPosition=cd,Vd.defaultPositions={northWestArrowSouthWest:function northWestArrowSouthWest(e,t){return{top:Bd(e,t),left:e.left-Vd.arrowHorizontalOffset,name:"arrow_sw"};},northWestArrowSouthMiddleWest:function northWestArrowSouthMiddleWest(e,t){return{top:Bd(e,t),left:e.left-.25*t.width-Vd.arrowHorizontalOffset,name:"arrow_smw"};},northWestArrowSouth:function northWestArrowSouth(e,t){return{top:Bd(e,t),left:e.left-t.width/2,name:"arrow_s"};},northWestArrowSouthMiddleEast:function northWestArrowSouthMiddleEast(e,t){return{top:Bd(e,t),left:e.left-.75*t.width+Vd.arrowHorizontalOffset,name:"arrow_sme"};},northWestArrowSouthEast:function northWestArrowSouthEast(e,t){return{top:Bd(e,t),left:e.left-t.width+Vd.arrowHorizontalOffset,name:"arrow_se"};},northArrowSouthWest:function northArrowSouthWest(e,t){return{top:Bd(e,t),left:e.left+e.width/2-Vd.arrowHorizontalOffset,name:"arrow_sw"};},northArrowSouthMiddleWest:function northArrowSouthMiddleWest(e,t){return{top:Bd(e,t),left:e.left+e.width/2-.25*t.width-Vd.arrowHorizontalOffset,name:"arrow_smw"};},northArrowSouth:function northArrowSouth(e,t){return{top:Bd(e,t),left:e.left+e.width/2-t.width/2,name:"arrow_s"};},northArrowSouthMiddleEast:function northArrowSouthMiddleEast(e,t){return{top:Bd(e,t),left:e.left+e.width/2-.75*t.width+Vd.arrowHorizontalOffset,name:"arrow_sme"};},northArrowSouthEast:function northArrowSouthEast(e,t){return{top:Bd(e,t),left:e.left+e.width/2-t.width+Vd.arrowHorizontalOffset,name:"arrow_se"};},northEastArrowSouthWest:function northEastArrowSouthWest(e,t){return{top:Bd(e,t),left:e.right-Vd.arrowHorizontalOffset,name:"arrow_sw"};},northEastArrowSouthMiddleWest:function northEastArrowSouthMiddleWest(e,t){return{top:Bd(e,t),left:e.right-.25*t.width-Vd.arrowHorizontalOffset,name:"arrow_smw"};},northEastArrowSouth:function northEastArrowSouth(e,t){return{top:Bd(e,t),left:e.right-t.width/2,name:"arrow_s"};},northEastArrowSouthMiddleEast:function northEastArrowSouthMiddleEast(e,t){return{top:Bd(e,t),left:e.right-.75*t.width+Vd.arrowHorizontalOffset,name:"arrow_sme"};},northEastArrowSouthEast:function northEastArrowSouthEast(e,t){return{top:Bd(e,t),left:e.right-t.width+Vd.arrowHorizontalOffset,name:"arrow_se"};},southWestArrowNorthWest:function southWestArrowNorthWest(e,t){return{top:Fd(e),left:e.left-Vd.arrowHorizontalOffset,name:"arrow_nw"};},southWestArrowNorthMiddleWest:function southWestArrowNorthMiddleWest(e,t){return{top:Fd(e),left:e.left-.25*t.width-Vd.arrowHorizontalOffset,name:"arrow_nmw"};},southWestArrowNorth:function southWestArrowNorth(e,t){return{top:Fd(e),left:e.left-t.width/2,name:"arrow_n"};},southWestArrowNorthMiddleEast:function southWestArrowNorthMiddleEast(e,t){return{top:Fd(e),left:e.left-.75*t.width+Vd.arrowHorizontalOffset,name:"arrow_nme"};},southWestArrowNorthEast:function southWestArrowNorthEast(e,t){return{top:Fd(e),left:e.left-t.width+Vd.arrowHorizontalOffset,name:"arrow_ne"};},southArrowNorthWest:function southArrowNorthWest(e,t){return{top:Fd(e),left:e.left+e.width/2-Vd.arrowHorizontalOffset,name:"arrow_nw"};},southArrowNorthMiddleWest:function southArrowNorthMiddleWest(e,t){return{top:Fd(e),left:e.left+e.width/2-.25*t.width-Vd.arrowHorizontalOffset,name:"arrow_nmw"};},southArrowNorth:function southArrowNorth(e,t){return{top:Fd(e),left:e.left+e.width/2-t.width/2,name:"arrow_n"};},southArrowNorthMiddleEast:function southArrowNorthMiddleEast(e,t){return{top:Fd(e),left:e.left+e.width/2-.75*t.width+Vd.arrowHorizontalOffset,name:"arrow_nme"};},southArrowNorthEast:function southArrowNorthEast(e,t){return{top:Fd(e),left:e.left+e.width/2-t.width+Vd.arrowHorizontalOffset,name:"arrow_ne"};},southEastArrowNorthWest:function southEastArrowNorthWest(e,t){return{top:Fd(e),left:e.right-Vd.arrowHorizontalOffset,name:"arrow_nw"};},southEastArrowNorthMiddleWest:function southEastArrowNorthMiddleWest(e,t){return{top:Fd(e),left:e.right-.25*t.width-Vd.arrowHorizontalOffset,name:"arrow_nmw"};},southEastArrowNorth:function southEastArrowNorth(e,t){return{top:Fd(e),left:e.right-t.width/2,name:"arrow_n"};},southEastArrowNorthMiddleEast:function southEastArrowNorthMiddleEast(e,t){return{top:Fd(e),left:e.right-.75*t.width+Vd.arrowHorizontalOffset,name:"arrow_nme"};},southEastArrowNorthEast:function southEastArrowNorthEast(e,t){return{top:Fd(e),left:e.right-t.width+Vd.arrowHorizontalOffset,name:"arrow_ne"};}};i(51),i(53);var Hd=Ms("px");var Ud=/*#__PURE__*/function(_Qe){_inherits(Ud,_Qe);var _super70=_createSuper(Ud);function Ud(e){var _this131;_classCallCheck(this,Ud);_this131=_super70.call(this,e),_this131.positionLimiter=function(){var e=_this131.editor.editing.view,t=e.document.selection.editableElement;return t?e.domConverter.mapViewToDom(t.root):null;},_this131.set("visibleView",null),_this131.view=new Vd(e.locale),e.ui.view.body.add(_this131.view),e.ui.focusTracker.add(_this131.view.element),_this131._viewToStack=new Map(),_this131._idToStack=new Map(),_this131.set("_numberOfStacks",0),_this131.set("_singleViewMode",!1),_this131._rotatorView=_this131._createRotatorView(),_this131._fakePanelsView=_this131._createFakePanelsView();return _this131;}_createClass(Ud,[{key:"hasView",value:function hasView(e){return Array.from(this._viewToStack.keys()).includes(e);}},{key:"add",value:function add(e){if(this.hasView(e.view))throw new c.a("contextualballoon-add-view-exist",[this,e]);var t=e.stackId||"main";if(!this._idToStack.has(t))return this._idToStack.set(t,new Map([[e.view,e]])),this._viewToStack.set(e.view,this._idToStack.get(t)),this._numberOfStacks=this._idToStack.size,void(this._visibleStack&&!e.singleViewMode||this.showStack(t));var i=this._idToStack.get(t);e.singleViewMode&&this.showStack(t),i.set(e.view,e),this._viewToStack.set(e.view,i),i===this._visibleStack&&this._showView(e);}},{key:"remove",value:function remove(e){if(!this.hasView(e))throw new c.a("contextualballoon-remove-view-not-exist",[this,e]);var t=this._viewToStack.get(e);this._singleViewMode&&this.visibleView===e&&(this._singleViewMode=!1),this.visibleView===e&&(1===t.size?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(t.values())[t.size-2])),1===t.size?(this._idToStack["delete"](this._getStackId(t)),this._numberOfStacks=this._idToStack.size):t["delete"](e),this._viewToStack["delete"](e);}},{key:"updatePosition",value:function updatePosition(e){e&&(this._visibleStack.get(this.visibleView).position=e),this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition();}},{key:"showStack",value:function showStack(e){this.visibleStack=e;var t=this._idToStack.get(e);if(!t)throw new c.a("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==t&&this._showView(Array.from(t.values()).pop());}},{key:"_visibleStack",get:function get(){return this._viewToStack.get(this.visibleView);}},{key:"_getStackId",value:function _getStackId(e){return Array.from(this._idToStack.entries()).find(function(t){return t[1]===e;})[0];}},{key:"_showNextStack",value:function _showNextStack(){var e=Array.from(this._idToStack.values());var t=e.indexOf(this._visibleStack)+1;e[t]||(t=0),this.showStack(this._getStackId(e[t]));}},{key:"_showPrevStack",value:function _showPrevStack(){var e=Array.from(this._idToStack.values());var t=e.indexOf(this._visibleStack)-1;e[t]||(t=e.length-1),this.showStack(this._getStackId(e[t]));}},{key:"_createRotatorView",value:function _createRotatorView(){var _this132=this;var e=new Wd(this.editor.locale),t=this.editor.locale.t;return this.view.content.add(e),e.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",function(e,t){return!t&&e>1;}),e.on("change:isNavigationVisible",function(){return _this132.updatePosition();},{priority:"low"}),e.bind("counter").to(this,"visibleView",this,"_numberOfStacks",function(e,i){if(i<2)return"";var n=Array.from(_this132._idToStack.values()).indexOf(_this132._visibleStack)+1;return t("%0 of %1",[n,i]);}),e.buttonNextView.on("execute",function(){e.focusTracker.isFocused&&_this132.editor.editing.view.focus(),_this132._showNextStack();}),e.buttonPrevView.on("execute",function(){e.focusTracker.isFocused&&_this132.editor.editing.view.focus(),_this132._showPrevStack();}),e;}},{key:"_createFakePanelsView",value:function _createFakePanelsView(){var e=new qd(this.editor.locale,this.view);return e.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",function(e,t){return!t&&e>=2?Math.min(e-1,2):0;}),e.listenTo(this.view,"change:top",function(){return e.updatePosition();}),e.listenTo(this.view,"change:left",function(){return e.updatePosition();}),this.editor.ui.view.body.add(e),e;}},{key:"_showView",value:function _showView(_ref38){var e=_ref38.view,_ref38$balloonClassNa=_ref38.balloonClassName,t=_ref38$balloonClassNa===void 0?"":_ref38$balloonClassNa,_ref38$withArrow=_ref38.withArrow,i=_ref38$withArrow===void 0?!0:_ref38$withArrow,_ref38$singleViewMode=_ref38.singleViewMode,n=_ref38$singleViewMode===void 0?!1:_ref38$singleViewMode;this.view["class"]=t,this.view.withArrow=i,this._rotatorView.showView(e),this.visibleView=e,this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition(),n&&(this._singleViewMode=!0);}},{key:"_getBalloonPosition",value:function _getBalloonPosition(){var e=Array.from(this._visibleStack.values()).pop().position;return e&&!e.limiter&&(e=Object.assign({},e,{limiter:this.positionLimiter})),e;}}],[{key:"pluginName",get:function get(){return"ContextualBalloon";}}]);return Ud;}(Qe);var Wd=/*#__PURE__*/function(_Ml20){_inherits(Wd,_Ml20);var _super71=_createSuper(Wd);function Wd(e){var _this133;_classCallCheck(this,Wd);_this133=_super71.call(this,e);var t=e.t,i=_this133.bindTemplate;_this133.set("isNavigationVisible",!0),_this133.focusTracker=new Rs(),_this133.buttonPrevView=_this133._createButtonView(t("Previous"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>'),_this133.buttonNextView=_this133._createButtonView(t("Next"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>'),_this133.content=_this133.createCollection(),_this133.setTemplate({tag:"div",attributes:{"class":["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{"class":["ck-balloon-rotator__navigation",i.to("isNavigationVisible",function(e){return e?"":"ck-hidden";})]},children:[_this133.buttonPrevView,{tag:"span",attributes:{"class":["ck-balloon-rotator__counter"]},children:[{text:i.to("counter")}]},_this133.buttonNextView]},{tag:"div",attributes:{"class":"ck-balloon-rotator__content"},children:_this133.content}]});return _this133;}_createClass(Wd,[{key:"render",value:function render(){_get(_getPrototypeOf(Wd.prototype),"render",this).call(this),this.focusTracker.add(this.element);}},{key:"showView",value:function showView(e){this.hideView(),this.content.add(e);}},{key:"hideView",value:function hideView(){this.content.clear();}},{key:"_createButtonView",value:function _createButtonView(e,t){var i=new ed(this.locale);return i.set({label:e,icon:t,tooltip:!0}),i;}}]);return Wd;}(Ml);var qd=/*#__PURE__*/function(_Ml21){_inherits(qd,_Ml21);var _super72=_createSuper(qd);function qd(e,t){var _this134;_classCallCheck(this,qd);_this134=_super72.call(this,e);var i=_this134.bindTemplate;_this134.set("top",0),_this134.set("left",0),_this134.set("height",0),_this134.set("width",0),_this134.set("numberOfPanels",0),_this134.content=_this134.createCollection(),_this134._balloonPanelView=t,_this134.setTemplate({tag:"div",attributes:{"class":["ck-fake-panel",i.to("numberOfPanels",function(e){return e?"":"ck-hidden";})],style:{top:i.to("top",Hd),left:i.to("left",Hd),width:i.to("width",Hd),height:i.to("height",Hd)}},children:_this134.content}),_this134.on("change:numberOfPanels",function(e,t,i,n){i>n?_this134._addPanels(i-n):_this134._removePanels(n-i),_this134.updatePosition();});return _this134;}_createClass(qd,[{key:"_addPanels",value:function _addPanels(e){for(;e--;){var _e219=new Ml();_e219.setTemplate({tag:"div"}),this.content.add(_e219),this.registerChild(_e219);}}},{key:"_removePanels",value:function _removePanels(e){for(;e--;){var _e220=this.content.last;this.content.remove(_e220),this.deregisterChild(_e220),_e220.destroy();}}},{key:"updatePosition",value:function updatePosition(){if(this.numberOfPanels){var _this$_balloonPanelVi=this._balloonPanelView,_e221=_this$_balloonPanelVi.top,_t205=_this$_balloonPanelVi.left,_Ts=new Ts(this._balloonPanelView.element),_i214=_Ts.width,_n112=_Ts.height;Object.assign(this,{top:_e221,left:_t205,width:_i214,height:_n112});}}}]);return qd;}(Ml);i(55);var $d=Ms("px");var Yd=/*#__PURE__*/function(_Ml22){_inherits(Yd,_Ml22);var _super73=_createSuper(Yd);function Yd(e){var _this135;_classCallCheck(this,Yd);_this135=_super73.call(this,e);var t=_this135.bindTemplate;_this135.set("isActive",!1),_this135.set("isSticky",!1),_this135.set("limiterElement",null),_this135.set("limiterBottomOffset",50),_this135.set("viewportTopOffset",0),_this135.set("_marginLeft",null),_this135.set("_isStickyToTheLimiter",!1),_this135.set("_hasViewportTopOffset",!1),_this135.content=_this135.createCollection(),_this135._contentPanelPlaceholder=new Nl({tag:"div",attributes:{"class":["ck","ck-sticky-panel__placeholder"],style:{display:t.to("isSticky",function(e){return e?"block":"none";}),height:t.to("isSticky",function(e){return e?$d(_this135._panelRect.height):null;})}}}).render(),_this135._contentPanel=new Nl({tag:"div",attributes:{"class":["ck","ck-sticky-panel__content",t["if"]("isSticky","ck-sticky-panel__content_sticky"),t["if"]("_isStickyToTheLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:t.to("isSticky",function(e){return e?$d(_this135._contentPanelPlaceholder.getBoundingClientRect().width):null;}),top:t.to("_hasViewportTopOffset",function(e){return e?$d(_this135.viewportTopOffset):null;}),bottom:t.to("_isStickyToTheLimiter",function(e){return e?$d(_this135.limiterBottomOffset):null;}),marginLeft:t.to("_marginLeft")}},children:_this135.content}).render(),_this135.setTemplate({tag:"div",attributes:{"class":["ck","ck-sticky-panel"]},children:[_this135._contentPanelPlaceholder,_this135._contentPanel]});return _this135;}_createClass(Yd,[{key:"render",value:function render(){var _this136=this;_get(_getPrototypeOf(Yd.prototype),"render",this).call(this),this._checkIfShouldBeSticky(),this.listenTo(vr.window,"scroll",function(){_this136._checkIfShouldBeSticky();}),this.listenTo(this,"change:isActive",function(){_this136._checkIfShouldBeSticky();});}},{key:"_checkIfShouldBeSticky",value:function _checkIfShouldBeSticky(){var e=this._panelRect=this._contentPanel.getBoundingClientRect();var t;this.limiterElement?(t=this._limiterRect=this.limiterElement.getBoundingClientRect(),this.isSticky=this.isActive&&t.top<this.viewportTopOffset&&this._panelRect.height+this.limiterBottomOffset<t.height):this.isSticky=!1,this.isSticky?(this._isStickyToTheLimiter=t.bottom<e.height+this.limiterBottomOffset+this.viewportTopOffset,this._hasViewportTopOffset=!this._isStickyToTheLimiter&&!!this.viewportTopOffset,this._marginLeft=this._isStickyToTheLimiter?null:$d(-vr.window.scrollX)):(this._isStickyToTheLimiter=!1,this._hasViewportTopOffset=!1,this._marginLeft=null);}}]);return Yd;}(Ml);Ms("px");i(57);Ms("px");Ms("px");i(59);var Gd=new WeakMap();function Kd(e){var t=e.view,i=e.element,n=e.text,_e$isDirectHost=e.isDirectHost,o=_e$isDirectHost===void 0?!0:_e$isDirectHost,_e$keepOnFocus=e.keepOnFocus,r=_e$keepOnFocus===void 0?!1:_e$keepOnFocus,s=t.document;Gd.has(s)||(Gd.set(s,new Map()),s.registerPostFixer(function(e){return Jd(s,e);})),Gd.get(s).set(i,{text:n,isDirectHost:o,keepOnFocus:r,hostElement:o?i:null}),t.change(function(e){return Jd(s,e);});}function Qd(e,t){return!!t.hasClass("ck-placeholder")&&(e.removeClass("ck-placeholder",t),!0);}function Jd(e,t){var i=Gd.get(e),n=[];var o=!1;var _iterator297=_createForOfIteratorHelper(i),_step297;try{for(_iterator297.s();!(_step297=_iterator297.n()).done;){var _step297$value=_slicedToArray(_step297.value,2),_e222=_step297$value[0],_r37=_step297$value[1];_r37.isDirectHost&&(n.push(_e222),Zd(t,_e222,_r37)&&(o=!0));}}catch(err){_iterator297.e(err);}finally{_iterator297.f();}var _iterator298=_createForOfIteratorHelper(i),_step298;try{for(_iterator298.s();!(_step298=_iterator298.n()).done;){var _step298$value=_slicedToArray(_step298.value,2),_e223=_step298$value[0],_r38=_step298$value[1];if(_r38.isDirectHost)continue;var _i215=Xd(_e223);_i215&&(n.includes(_i215)||(_r38.hostElement=_i215,Zd(t,_e223,_r38)&&(o=!0)));}}catch(err){_iterator298.e(err);}finally{_iterator298.f();}return o;}function Zd(e,t,i){var n=i.text,o=i.isDirectHost,r=i.hostElement;var s=!1;r.getAttribute("data-placeholder")!==n&&(e.setAttribute("data-placeholder",n,r),s=!0);return(o||1==t.childCount)&&function(e,t){if(!e.isAttached())return!1;if(Array.from(e.getChildren()).some(function(e){return!e.is("uiElement");}))return!1;if(t)return!0;var i=e.document;if(!i.isFocused)return!0;var n=i.selection.anchor;return n&&n.parent!==e;}(r,i.keepOnFocus)?function(e,t){return!t.hasClass("ck-placeholder")&&(e.addClass("ck-placeholder",t),!0);}(e,r)&&(s=!0):Qd(e,r)&&(s=!0),s;}function Xd(e){if(e.childCount){var _t206=e.getChild(0);if(_t206.is("element")&&!_t206.is("uiElement"))return _t206;}return null;}var eh=new Map();function th(e,t,i){var n=eh.get(e);n||(n=new Map(),eh.set(e,n)),n.set(t,i);}function ih(e){return[e];}function nh(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var n=function(e,t){var i=eh.get(e);return i&&i.has(t)?i.get(t):ih;}(e.constructor,t.constructor);try{return n(e=e.clone(),t,i);}catch(e){throw e;}}function oh(e,t,i){e=e.slice(),t=t.slice();var n=new rh(i.document,i.useRelations,i.forceWeakRemove);n.setOriginalOperations(e),n.setOriginalOperations(t);var o=n.originalOperations;if(0==e.length||0==t.length)return{operationsA:e,operationsB:t,originalOperations:o};var r=new WeakMap();var _iterator299=_createForOfIteratorHelper(e),_step299;try{for(_iterator299.s();!(_step299=_iterator299.n()).done;){var _t208=_step299.value;r.set(_t208,0);}}catch(err){_iterator299.e(err);}finally{_iterator299.f();}var s={nextBaseVersionA:e[e.length-1].baseVersion+1,nextBaseVersionB:t[t.length-1].baseVersion+1,originalOperationsACount:e.length,originalOperationsBCount:t.length};var a=0;for(;a<e.length;){var _e224,_t207;var _i216=e[a],_o71=r.get(_i216);if(_o71==t.length){a++;continue;}var _s23=t[_o71],_c8=nh(_i216,_s23,n.getContext(_i216,_s23,!0)),_l3=nh(_s23,_i216,n.getContext(_s23,_i216,!1));n.updateRelation(_i216,_s23),n.setOriginalOperations(_c8,_i216),n.setOriginalOperations(_l3,_s23);var _iterator300=_createForOfIteratorHelper(_c8),_step300;try{for(_iterator300.s();!(_step300=_iterator300.n()).done;){var _e225=_step300.value;r.set(_e225,_o71+_l3.length);}}catch(err){_iterator300.e(err);}finally{_iterator300.f();}(_e224=e).splice.apply(_e224,[a,1].concat(_toConsumableArray(_c8))),(_t207=t).splice.apply(_t207,[_o71,1].concat(_toConsumableArray(_l3)));}if(i.padWithNoOps){var _i217=e.length-s.originalOperationsACount,_n113=t.length-s.originalOperationsBCount;ah(e,_n113-_i217),ah(t,_i217-_n113);}return sh(e,s.nextBaseVersionB),sh(t,s.nextBaseVersionA),{operationsA:e,operationsB:t,originalOperations:o};}var rh=/*#__PURE__*/function(){function rh(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!1;_classCallCheck(this,rh);this.originalOperations=new Map(),this._history=e.history,this._useRelations=t,this._forceWeakRemove=!!i,this._relations=new Map();}_createClass(rh,[{key:"setOriginalOperations",value:function setOriginalOperations(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var i=t?this.originalOperations.get(t):null;var _iterator301=_createForOfIteratorHelper(e),_step301;try{for(_iterator301.s();!(_step301=_iterator301.n()).done;){var _t209=_step301.value;this.originalOperations.set(_t209,i||_t209);}}catch(err){_iterator301.e(err);}finally{_iterator301.f();}}},{key:"updateRelation",value:function updateRelation(e,t){switch(e.constructor){case Ec:switch(t.constructor){case Nc:e.targetPosition.isEqual(t.sourcePosition)||t.movedRange.containsPosition(e.targetPosition)?this._setRelation(e,t,"insertAtSource"):e.targetPosition.isEqual(t.deletionPosition)?this._setRelation(e,t,"insertBetween"):e.targetPosition.isAfter(t.sourcePosition)&&this._setRelation(e,t,"moveTargetAfter");break;case Ec:e.targetPosition.isEqual(t.sourcePosition)||e.targetPosition.isBefore(t.sourcePosition)?this._setRelation(e,t,"insertBefore"):this._setRelation(e,t,"insertAfter");}break;case Rc:switch(t.constructor){case Nc:e.splitPosition.isBefore(t.sourcePosition)&&this._setRelation(e,t,"splitBefore");break;case Ec:if(e.splitPosition.isEqual(t.sourcePosition)||e.splitPosition.isBefore(t.sourcePosition))this._setRelation(e,t,"splitBefore");else{var _i218=oa._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.splitPosition.hasSameParentAs(t.sourcePosition)&&_i218.containsPosition(e.splitPosition)){var _n114=_i218.end.offset-e.splitPosition.offset,_o72=e.splitPosition.offset-_i218.start.offset;this._setRelation(e,t,{howMany:_n114,offset:_o72});}}}break;case Nc:switch(t.constructor){case Nc:e.targetPosition.isEqual(t.sourcePosition)||this._setRelation(e,t,"mergeTargetNotMoved"),e.sourcePosition.isEqual(t.targetPosition)&&this._setRelation(e,t,"mergeSourceNotMoved"),e.sourcePosition.isEqual(t.sourcePosition)&&this._setRelation(e,t,"mergeSameElement");break;case Rc:e.sourcePosition.isEqual(t.splitPosition)&&this._setRelation(e,t,"splitAtSource");}break;case Sc:{var _i219=e.newRange;if(!_i219)return;switch(t.constructor){case Ec:{var _n115=oa._createFromPositionAndShift(t.sourcePosition,t.howMany),_o73=_n115.containsPosition(_i219.start)||_n115.start.isEqual(_i219.start),_r39=_n115.containsPosition(_i219.end)||_n115.end.isEqual(_i219.end);!_o73&&!_r39||_n115.containsRange(_i219)||this._setRelation(e,t,{side:_o73?"left":"right",path:_o73?_i219.start.path.slice():_i219.end.path.slice()});break;}case Nc:{var _n116=_i219.start.isEqual(t.targetPosition),_o74=_i219.start.isEqual(t.deletionPosition),_r40=_i219.end.isEqual(t.deletionPosition),_s24=_i219.end.isEqual(t.sourcePosition);(_n116||_o74||_r40||_s24)&&this._setRelation(e,t,{wasInLeftElement:_n116,wasStartBeforeMergedElement:_o74,wasEndBeforeMergedElement:_r40,wasInRightElement:_s24});break;}}break;}}}},{key:"getContext",value:function getContext(e,t,i){return{aIsStrong:i,aWasUndone:this._wasUndone(e),bWasUndone:this._wasUndone(t),abRelation:this._useRelations?this._getRelation(e,t):null,baRelation:this._useRelations?this._getRelation(t,e):null,forceWeakRemove:this._forceWeakRemove};}},{key:"_wasUndone",value:function _wasUndone(e){var t=this.originalOperations.get(e);return t.wasUndone||this._history.isUndoneOperation(t);}},{key:"_getRelation",value:function _getRelation(e,t){var i=this.originalOperations.get(t),n=this._history.getUndoneOperation(i);if(!n)return null;var o=this.originalOperations.get(e),r=this._relations.get(o);return r&&r.get(n)||null;}},{key:"_setRelation",value:function _setRelation(e,t,i){var n=this.originalOperations.get(e),o=this.originalOperations.get(t);var r=this._relations.get(n);r||(r=new Map(),this._relations.set(n,r)),r.set(o,i);}}]);return rh;}();function sh(e,t){var _iterator302=_createForOfIteratorHelper(e),_step302;try{for(_iterator302.s();!(_step302=_iterator302.n()).done;){var _i220=_step302.value;_i220.baseVersion=t++;}}catch(err){_iterator302.e(err);}finally{_iterator302.f();}}function ah(e,t){for(var _i221=0;_i221<t;_i221++){e.push(new Zc(0));}}function ch(e,t,i){var n=e.nodes.getNode(0).getAttribute(t);if(n==i)return null;var o=new oa(e.position,e.position.getShiftedBy(e.howMany));return new Cc(o,t,n,i,0);}function lh(e,t){return null===e.targetPosition._getTransformedByDeletion(t.sourcePosition,t.howMany);}function dh(e,t){var i=[];for(var _n117=0;_n117<e.length;_n117++){var _o75=e[_n117],_r41=new Ec(_o75.start,_o75.end.offset-_o75.start.offset,t,0);i.push(_r41);for(var _t210=_n117+1;_t210<e.length;_t210++){e[_t210]=e[_t210]._getTransformedByMove(_r41.sourcePosition,_r41.targetPosition,_r41.howMany)[0];}t=t._getTransformedByMove(_r41.sourcePosition,_r41.targetPosition,_r41.howMany);}return i;}th(Cc,Cc,function(e,t,i){if(e.key===t.key&&e.range.start.hasSameParentAs(t.range.start)){var _n118=e.range.getDifference(t.range).map(function(t){return new Cc(t,e.key,e.oldValue,e.newValue,0);}),_o76=e.range.getIntersection(t.range);return _o76&&i.aIsStrong&&_n118.push(new Cc(_o76,t.key,t.newValue,e.newValue,0)),0==_n118.length?[new Zc(0)]:_n118;}return[e];}),th(Cc,Ic,function(e,t){if(e.range.start.hasSameParentAs(t.position)&&e.range.containsPosition(t.position)){var _i222=e.range._getTransformedByInsertion(t.position,t.howMany,!t.shouldReceiveAttributes).map(function(t){return new Cc(t,e.key,e.oldValue,e.newValue,e.baseVersion);});if(t.shouldReceiveAttributes){var _n119=ch(t,e.key,e.oldValue);_n119&&_i222.unshift(_n119);}return _i222;}return e.range=e.range._getTransformedByInsertion(t.position,t.howMany,!1)[0],[e];}),th(Cc,Nc,function(e,t){var i=[];e.range.start.hasSameParentAs(t.deletionPosition)&&(e.range.containsPosition(t.deletionPosition)||e.range.start.isEqual(t.deletionPosition))&&i.push(oa._createFromPositionAndShift(t.graveyardPosition,1));var n=e.range._getTransformedByMergeOperation(t);return n.isCollapsed||i.push(n),i.map(function(t){return new Cc(t,e.key,e.oldValue,e.newValue,e.baseVersion);});}),th(Cc,Ec,function(e,t){return function(e,t){var i=oa._createFromPositionAndShift(t.sourcePosition,t.howMany);var n=null,o=[];i.containsRange(e,!0)?n=e:e.start.hasSameParentAs(i.start)?(o=e.getDifference(i),n=e.getIntersection(i)):o=[e];var r=[];var _iterator303=_createForOfIteratorHelper(o),_step303;try{for(_iterator303.s();!(_step303=_iterator303.n()).done;){var _e226=_step303.value;_e226=_e226._getTransformedByDeletion(t.sourcePosition,t.howMany);var _i223=t.getMovedRangeStart(),_n120=_e226.start.hasSameParentAs(_i223);_e226=_e226._getTransformedByInsertion(_i223,t.howMany,_n120),r.push.apply(r,_toConsumableArray(_e226));}}catch(err){_iterator303.e(err);}finally{_iterator303.f();}n&&r.push(n._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany,!1)[0]);return r;}(e.range,t).map(function(t){return new Cc(t,e.key,e.oldValue,e.newValue,e.baseVersion);});}),th(Cc,Rc,function(e,t){if(e.range.end.isEqual(t.insertionPosition))return t.graveyardPosition||e.range.end.offset++,[e];if(e.range.start.hasSameParentAs(t.splitPosition)&&e.range.containsPosition(t.splitPosition)){var _i224=e.clone();return _i224.range=new oa(t.moveTargetPosition.clone(),e.range.end._getCombined(t.splitPosition,t.moveTargetPosition)),e.range.end=t.splitPosition.clone(),e.range.end.stickiness="toPrevious",[e,_i224];}return e.range=e.range._getTransformedBySplitOperation(t),[e];}),th(Ic,Cc,function(e,t){var i=[e];if(e.shouldReceiveAttributes&&e.position.hasSameParentAs(t.range.start)&&t.range.containsPosition(e.position)){var _n121=ch(e,t.key,t.newValue);_n121&&i.push(_n121);}return i;}),th(Ic,Ic,function(e,t,i){return e.position.isEqual(t.position)&&i.aIsStrong||(e.position=e.position._getTransformedByInsertOperation(t)),[e];}),th(Ic,Ec,function(e,t){return e.position=e.position._getTransformedByMoveOperation(t),[e];}),th(Ic,Rc,function(e,t){return e.position=e.position._getTransformedBySplitOperation(t),[e];}),th(Ic,Nc,function(e,t){return e.position=e.position._getTransformedByMergeOperation(t),[e];}),th(Sc,Ic,function(e,t){return e.oldRange&&(e.oldRange=e.oldRange._getTransformedByInsertOperation(t)[0]),e.newRange&&(e.newRange=e.newRange._getTransformedByInsertOperation(t)[0]),[e];}),th(Sc,Sc,function(e,t,i){if(e.name==t.name){if(!i.aIsStrong)return[new Zc(0)];e.oldRange=t.newRange?t.newRange.clone():null;}return[e];}),th(Sc,Nc,function(e,t){return e.oldRange&&(e.oldRange=e.oldRange._getTransformedByMergeOperation(t)),e.newRange&&(e.newRange=e.newRange._getTransformedByMergeOperation(t)),[e];}),th(Sc,Ec,function(e,t,i){if(e.oldRange&&(e.oldRange=oa._createFromRanges(e.oldRange._getTransformedByMoveOperation(t))),e.newRange){if(i.abRelation){var _n122=oa._createFromRanges(e.newRange._getTransformedByMoveOperation(t));if("left"==i.abRelation.side&&t.targetPosition.isEqual(e.newRange.start))return e.newRange.start.path=i.abRelation.path,e.newRange.end=_n122.end,[e];if("right"==i.abRelation.side&&t.targetPosition.isEqual(e.newRange.end))return e.newRange.start=_n122.start,e.newRange.end.path=i.abRelation.path,[e];}e.newRange=oa._createFromRanges(e.newRange._getTransformedByMoveOperation(t));}return[e];}),th(Sc,Rc,function(e,t,i){if(e.oldRange&&(e.oldRange=e.oldRange._getTransformedBySplitOperation(t)),e.newRange){if(i.abRelation){var _n123=e.newRange._getTransformedBySplitOperation(t);return e.newRange.start.isEqual(t.splitPosition)&&i.abRelation.wasStartBeforeMergedElement?e.newRange.start=ea._createAt(t.insertionPosition):e.newRange.start.isEqual(t.splitPosition)&&!i.abRelation.wasInLeftElement&&(e.newRange.start=ea._createAt(t.moveTargetPosition)),e.newRange.end.isEqual(t.splitPosition)&&i.abRelation.wasInRightElement?e.newRange.end=ea._createAt(t.moveTargetPosition):e.newRange.end.isEqual(t.splitPosition)&&i.abRelation.wasEndBeforeMergedElement?e.newRange.end=ea._createAt(t.insertionPosition):e.newRange.end=_n123.end,[e];}e.newRange=e.newRange._getTransformedBySplitOperation(t);}return[e];}),th(Nc,Ic,function(e,t){return e.sourcePosition.hasSameParentAs(t.position)&&(e.howMany+=t.howMany),e.sourcePosition=e.sourcePosition._getTransformedByInsertOperation(t),e.targetPosition=e.targetPosition._getTransformedByInsertOperation(t),[e];}),th(Nc,Nc,function(e,t,i){if(e.sourcePosition.isEqual(t.sourcePosition)&&e.targetPosition.isEqual(t.targetPosition)){if(i.bWasUndone){var _i225=t.graveyardPosition.path.slice();return _i225.push(0),e.sourcePosition=new ea(t.graveyardPosition.root,_i225),e.howMany=0,[e];}return[new Zc(0)];}if(e.sourcePosition.isEqual(t.sourcePosition)&&!e.targetPosition.isEqual(t.targetPosition)&&!i.bWasUndone&&"splitAtSource"!=i.abRelation){var _n124="$graveyard"==e.targetPosition.root.rootName,_o77="$graveyard"==t.targetPosition.root.rootName,_r42=_n124&&!_o77;if(_o77&&!_n124||!_r42&&i.aIsStrong){var _i226=t.targetPosition._getTransformedByMergeOperation(t),_n125=e.targetPosition._getTransformedByMergeOperation(t);return[new Ec(_i226,e.howMany,_n125,0)];}return[new Zc(0)];}return e.sourcePosition.hasSameParentAs(t.targetPosition)&&(e.howMany+=t.howMany),e.sourcePosition=e.sourcePosition._getTransformedByMergeOperation(t),e.targetPosition=e.targetPosition._getTransformedByMergeOperation(t),e.graveyardPosition.isEqual(t.graveyardPosition)&&i.aIsStrong||(e.graveyardPosition=e.graveyardPosition._getTransformedByMergeOperation(t)),[e];}),th(Nc,Ec,function(e,t,i){var n=oa._createFromPositionAndShift(t.sourcePosition,t.howMany);return"remove"==t.type&&!i.bWasUndone&&!i.forceWeakRemove&&e.deletionPosition.hasSameParentAs(t.sourcePosition)&&n.containsPosition(e.sourcePosition)?[new Zc(0)]:(e.sourcePosition.hasSameParentAs(t.targetPosition)&&(e.howMany+=t.howMany),e.sourcePosition.hasSameParentAs(t.sourcePosition)&&(e.howMany-=t.howMany),e.sourcePosition=e.sourcePosition._getTransformedByMoveOperation(t),e.targetPosition=e.targetPosition._getTransformedByMoveOperation(t),e.graveyardPosition.isEqual(t.targetPosition)||(e.graveyardPosition=e.graveyardPosition._getTransformedByMoveOperation(t)),[e]);}),th(Nc,Rc,function(e,t,i){if(t.graveyardPosition&&(e.graveyardPosition=e.graveyardPosition._getTransformedByDeletion(t.graveyardPosition,1),e.deletionPosition.isEqual(t.graveyardPosition)&&(e.howMany=t.howMany)),e.targetPosition.isEqual(t.splitPosition)){var _n126=0!=t.howMany,_o78=t.graveyardPosition&&e.deletionPosition.isEqual(t.graveyardPosition);if(_n126||_o78||"mergeTargetNotMoved"==i.abRelation)return e.sourcePosition=e.sourcePosition._getTransformedBySplitOperation(t),[e];}if(e.sourcePosition.isEqual(t.splitPosition)){if("mergeSourceNotMoved"==i.abRelation)return e.howMany=0,e.targetPosition=e.targetPosition._getTransformedBySplitOperation(t),[e];if("mergeSameElement"==i.abRelation||e.sourcePosition.offset>0)return e.sourcePosition=t.moveTargetPosition.clone(),e.targetPosition=e.targetPosition._getTransformedBySplitOperation(t),[e];}return e.sourcePosition.hasSameParentAs(t.splitPosition)&&(e.howMany=t.splitPosition.offset),e.sourcePosition=e.sourcePosition._getTransformedBySplitOperation(t),e.targetPosition=e.targetPosition._getTransformedBySplitOperation(t),[e];}),th(Ec,Ic,function(e,t){var i=oa._createFromPositionAndShift(e.sourcePosition,e.howMany)._getTransformedByInsertOperation(t,!1)[0];return e.sourcePosition=i.start,e.howMany=i.end.offset-i.start.offset,e.targetPosition.isEqual(t.position)||(e.targetPosition=e.targetPosition._getTransformedByInsertOperation(t)),[e];}),th(Ec,Ec,function(e,t,i){var n=oa._createFromPositionAndShift(e.sourcePosition,e.howMany),o=oa._createFromPositionAndShift(t.sourcePosition,t.howMany);var r,s=i.aIsStrong,a=!i.aIsStrong;if("insertBefore"==i.abRelation||"insertAfter"==i.baRelation?a=!0:"insertAfter"!=i.abRelation&&"insertBefore"!=i.baRelation||(a=!1),r=e.targetPosition.isEqual(t.targetPosition)&&a?e.targetPosition._getTransformedByDeletion(t.sourcePosition,t.howMany):e.targetPosition._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),lh(e,t)&&lh(t,e))return[t.getReversed()];if(n.containsPosition(t.targetPosition)&&n.containsRange(o,!0))return n.start=n.start._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),n.end=n.end._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),dh([n],r);if(o.containsPosition(e.targetPosition)&&o.containsRange(n,!0))return n.start=n.start._getCombined(t.sourcePosition,t.getMovedRangeStart()),n.end=n.end._getCombined(t.sourcePosition,t.getMovedRangeStart()),dh([n],r);var c=cn(e.sourcePosition.getParentPath(),t.sourcePosition.getParentPath());if("prefix"==c||"extension"==c)return n.start=n.start._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),n.end=n.end._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),dh([n],r);"remove"!=e.type||"remove"==t.type||i.aWasUndone||i.forceWeakRemove?"remove"==e.type||"remove"!=t.type||i.bWasUndone||i.forceWeakRemove||(s=!1):s=!0;var l=[],d=n.getDifference(o);var _iterator304=_createForOfIteratorHelper(d),_step304;try{for(_iterator304.s();!(_step304=_iterator304.n()).done;){var _e227=_step304.value;_e227.start=_e227.start._getTransformedByDeletion(t.sourcePosition,t.howMany),_e227.end=_e227.end._getTransformedByDeletion(t.sourcePosition,t.howMany);var _i227="same"==cn(_e227.start.getParentPath(),t.getMovedRangeStart().getParentPath()),_n127=_e227._getTransformedByInsertion(t.getMovedRangeStart(),t.howMany,_i227);l.push.apply(l,_toConsumableArray(_n127));}}catch(err){_iterator304.e(err);}finally{_iterator304.f();}var h=n.getIntersection(o);return null!==h&&s&&(h.start=h.start._getCombined(t.sourcePosition,t.getMovedRangeStart()),h.end=h.end._getCombined(t.sourcePosition,t.getMovedRangeStart()),0===l.length?l.push(h):1==l.length?o.start.isBefore(n.start)||o.start.isEqual(n.start)?l.unshift(h):l.push(h):l.splice(1,0,h)),0===l.length?[new Zc(e.baseVersion)]:dh(l,r);}),th(Ec,Rc,function(e,t,i){var n=e.targetPosition.clone();e.targetPosition.isEqual(t.insertionPosition)&&t.graveyardPosition&&"moveTargetAfter"!=i.abRelation||(n=e.targetPosition._getTransformedBySplitOperation(t));var o=oa._createFromPositionAndShift(e.sourcePosition,e.howMany);if(o.end.isEqual(t.insertionPosition))return t.graveyardPosition||e.howMany++,e.targetPosition=n,[e];if(o.start.hasSameParentAs(t.splitPosition)&&o.containsPosition(t.splitPosition)){var _e228=new oa(t.splitPosition,o.end);_e228=_e228._getTransformedBySplitOperation(t);return dh([new oa(o.start,t.splitPosition),_e228],n);}e.targetPosition.isEqual(t.splitPosition)&&"insertAtSource"==i.abRelation&&(n=t.moveTargetPosition),e.targetPosition.isEqual(t.insertionPosition)&&"insertBetween"==i.abRelation&&(n=e.targetPosition);var r=[o._getTransformedBySplitOperation(t)];if(t.graveyardPosition){var _n128=o.start.isEqual(t.graveyardPosition)||o.containsPosition(t.graveyardPosition);e.howMany>1&&_n128&&!i.aWasUndone&&r.push(oa._createFromPositionAndShift(t.insertionPosition,1));}return dh(r,n);}),th(Ec,Nc,function(e,t,i){var n=oa._createFromPositionAndShift(e.sourcePosition,e.howMany);if(t.deletionPosition.hasSameParentAs(e.sourcePosition)&&n.containsPosition(t.sourcePosition))if("remove"!=e.type||i.forceWeakRemove){if(1==e.howMany)return i.bWasUndone?(e.sourcePosition=t.graveyardPosition.clone(),e.targetPosition=e.targetPosition._getTransformedByMergeOperation(t),[e]):[new Zc(0)];}else if(!i.aWasUndone){var _i228=[];var _n129=t.graveyardPosition.clone(),_o79=t.targetPosition._getTransformedByMergeOperation(t);e.howMany>1&&(_i228.push(new Ec(e.sourcePosition,e.howMany-1,e.targetPosition,0)),_n129=_n129._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany-1),_o79=_o79._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany-1));var _r43=t.deletionPosition._getCombined(e.sourcePosition,e.targetPosition),_s25=new Ec(_n129,1,_r43,0),_a16=_s25.getMovedRangeStart().path.slice();_a16.push(0);var _c9=new ea(_s25.targetPosition.root,_a16);_o79=_o79._getTransformedByMove(_n129,_r43,1);var _l4=new Ec(_o79,t.howMany,_c9,0);return _i228.push(_s25),_i228.push(_l4),_i228;}var o=oa._createFromPositionAndShift(e.sourcePosition,e.howMany)._getTransformedByMergeOperation(t);return e.sourcePosition=o.start,e.howMany=o.end.offset-o.start.offset,e.targetPosition=e.targetPosition._getTransformedByMergeOperation(t),[e];}),th(Pc,Ic,function(e,t){return e.position=e.position._getTransformedByInsertOperation(t),[e];}),th(Pc,Nc,function(e,t){return e.position.isEqual(t.deletionPosition)?(e.position=t.graveyardPosition.clone(),e.position.stickiness="toNext",[e]):(e.position=e.position._getTransformedByMergeOperation(t),[e]);}),th(Pc,Ec,function(e,t){return e.position=e.position._getTransformedByMoveOperation(t),[e];}),th(Pc,Pc,function(e,t,i){if(e.position.isEqual(t.position)){if(!i.aIsStrong)return[new Zc(0)];e.oldName=t.newName;}return[e];}),th(Pc,Rc,function(e,t){if("same"==cn(e.position.path,t.splitPosition.getParentPath())&&!t.graveyardPosition){var _t211=new Pc(e.position.getShiftedBy(1),e.oldName,e.newName,0);return[e,_t211];}return e.position=e.position._getTransformedBySplitOperation(t),[e];}),th(Mc,Mc,function(e,t,i){if(e.root===t.root&&e.key===t.key){if(!i.aIsStrong||e.newValue===t.newValue)return[new Zc(0)];e.oldValue=t.newValue;}return[e];}),th(Rc,Ic,function(e,t){return e.splitPosition.hasSameParentAs(t.position)&&e.splitPosition.offset<t.position.offset&&(e.howMany+=t.howMany),e.splitPosition=e.splitPosition._getTransformedByInsertOperation(t),e.insertionPosition=e.insertionPosition._getTransformedByInsertOperation(t),[e];}),th(Rc,Nc,function(e,t,i){if(!e.graveyardPosition&&!i.bWasUndone&&e.splitPosition.hasSameParentAs(t.sourcePosition)){var _i229=t.graveyardPosition.path.slice();_i229.push(0);var _n130=new ea(t.graveyardPosition.root,_i229),_o80=Rc.getInsertionPosition(new ea(t.graveyardPosition.root,_i229)),_r44=new Rc(_n130,0,_o80,null,0);return e.splitPosition=e.splitPosition._getTransformedByMergeOperation(t),e.insertionPosition=Rc.getInsertionPosition(e.splitPosition),e.graveyardPosition=_r44.insertionPosition.clone(),e.graveyardPosition.stickiness="toNext",[_r44,e];}return e.splitPosition.hasSameParentAs(t.deletionPosition)&&!e.splitPosition.isAfter(t.deletionPosition)&&e.howMany--,e.splitPosition.hasSameParentAs(t.targetPosition)&&(e.howMany+=t.howMany),e.splitPosition=e.splitPosition._getTransformedByMergeOperation(t),e.insertionPosition=Rc.getInsertionPosition(e.splitPosition),e.graveyardPosition&&(e.graveyardPosition=e.graveyardPosition._getTransformedByMergeOperation(t)),[e];}),th(Rc,Ec,function(e,t,i){var n=oa._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.graveyardPosition){var _o81=n.start.isEqual(e.graveyardPosition)||n.containsPosition(e.graveyardPosition);if(!i.bWasUndone&&_o81){var _i230=e.splitPosition._getTransformedByMoveOperation(t),_n131=e.graveyardPosition._getTransformedByMoveOperation(t),_o82=_n131.path.slice();_o82.push(0);var _r45=new ea(_n131.root,_o82);return[new Ec(_i230,e.howMany,_r45,0)];}e.graveyardPosition=e.graveyardPosition._getTransformedByMoveOperation(t);}var o=e.splitPosition.isEqual(t.targetPosition);if(o&&("insertAtSource"==i.baRelation||"splitBefore"==i.abRelation))return e.howMany+=t.howMany,e.splitPosition=e.splitPosition._getTransformedByDeletion(t.sourcePosition,t.howMany),e.insertionPosition=Rc.getInsertionPosition(e.splitPosition),[e];if(o&&i.abRelation&&i.abRelation.howMany){var _i$abRelation=i.abRelation,_t212=_i$abRelation.howMany,_n132=_i$abRelation.offset;return e.howMany+=_t212,e.splitPosition=e.splitPosition.getShiftedBy(_n132),[e];}if(e.splitPosition.hasSameParentAs(t.sourcePosition)&&n.containsPosition(e.splitPosition)){var _i231=t.howMany-(e.splitPosition.offset-t.sourcePosition.offset);return e.howMany-=_i231,e.splitPosition.hasSameParentAs(t.targetPosition)&&e.splitPosition.offset<t.targetPosition.offset&&(e.howMany+=t.howMany),e.splitPosition=t.sourcePosition.clone(),e.insertionPosition=Rc.getInsertionPosition(e.splitPosition),[e];}return t.sourcePosition.isEqual(t.targetPosition)||(e.splitPosition.hasSameParentAs(t.sourcePosition)&&e.splitPosition.offset<=t.sourcePosition.offset&&(e.howMany-=t.howMany),e.splitPosition.hasSameParentAs(t.targetPosition)&&e.splitPosition.offset<t.targetPosition.offset&&(e.howMany+=t.howMany)),e.splitPosition.stickiness="toNone",e.splitPosition=e.splitPosition._getTransformedByMoveOperation(t),e.splitPosition.stickiness="toNext",e.graveyardPosition?e.insertionPosition=e.insertionPosition._getTransformedByMoveOperation(t):e.insertionPosition=Rc.getInsertionPosition(e.splitPosition),[e];}),th(Rc,Rc,function(e,t,i){if(e.splitPosition.isEqual(t.splitPosition)){if(!e.graveyardPosition&&!t.graveyardPosition)return[new Zc(0)];if(e.graveyardPosition&&t.graveyardPosition&&e.graveyardPosition.isEqual(t.graveyardPosition))return[new Zc(0)];if("splitBefore"==i.abRelation)return e.howMany=0,e.graveyardPosition=e.graveyardPosition._getTransformedBySplitOperation(t),[e];}if(e.graveyardPosition&&t.graveyardPosition&&e.graveyardPosition.isEqual(t.graveyardPosition)){var _n133="$graveyard"==e.splitPosition.root.rootName,_o83="$graveyard"==t.splitPosition.root.rootName,_r46=_n133&&!_o83;if(_o83&&!_n133||!_r46&&i.aIsStrong){var _i232=[];return t.howMany&&_i232.push(new Ec(t.moveTargetPosition,t.howMany,t.splitPosition,0)),e.howMany&&_i232.push(new Ec(e.splitPosition,e.howMany,e.moveTargetPosition,0)),_i232;}return[new Zc(0)];}if(e.graveyardPosition&&(e.graveyardPosition=e.graveyardPosition._getTransformedBySplitOperation(t)),e.splitPosition.isEqual(t.insertionPosition)&&"splitBefore"==i.abRelation)return e.howMany++,[e];if(t.splitPosition.isEqual(e.insertionPosition)&&"splitBefore"==i.baRelation){var _i233=t.insertionPosition.path.slice();_i233.push(0);var _n134=new ea(t.insertionPosition.root,_i233);return[e,new Ec(e.insertionPosition,1,_n134,0)];}return e.splitPosition.hasSameParentAs(t.splitPosition)&&e.splitPosition.offset<t.splitPosition.offset&&(e.howMany-=t.howMany),e.splitPosition=e.splitPosition._getTransformedBySplitOperation(t),e.insertionPosition=Rc.getInsertionPosition(e.splitPosition),[e];});var hh=/*#__PURE__*/function(_ts5){_inherits(hh,_ts5);var _super74=_createSuper(hh);function hh(e){var _this137;_classCallCheck(this,hh);_this137=_super74.call(this,e),_this137.domEventType="click";return _this137;}_createClass(hh,[{key:"onDomEvent",value:function onDomEvent(e){this.fire(e.type,e);}}]);return hh;}(ts);var uh=/*#__PURE__*/function(_ts6){_inherits(uh,_ts6);var _super75=_createSuper(uh);function uh(e){var _this138;_classCallCheck(this,uh);_this138=_super75.call(this,e),_this138.domEventType=["mousedown","mouseup","mouseover","mouseout"];return _this138;}_createClass(uh,[{key:"onDomEvent",value:function onDomEvent(e){this.fire(e.type,e);}}]);return uh;}(ts);var gh=/*#__PURE__*/function(){function gh(e){_classCallCheck(this,gh);this.document=e;}_createClass(gh,[{key:"createDocumentFragment",value:function createDocumentFragment(e){return new Wo(this.document,e);}},{key:"createElement",value:function createElement(e,t,i){return new eo(this.document,e,t,i);}},{key:"createText",value:function createText(e){return new hn(this.document,e);}},{key:"clone",value:function clone(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;return e._clone(t);}},{key:"appendChild",value:function appendChild(e,t){return t._appendChild(e);}},{key:"insertChild",value:function insertChild(e,t,i){return i._insertChild(e,t);}},{key:"removeChildren",value:function removeChildren(e,t,i){return i._removeChildren(e,t);}},{key:"remove",value:function remove(e){var t=e.parent;return t?this.removeChildren(t.getChildIndex(e),1,t):[];}},{key:"replace",value:function replace(e,t){var i=e.parent;if(i){var _n135=i.getChildIndex(e);return this.removeChildren(_n135,1,i),this.insertChild(_n135,t,i),!0;}return!1;}},{key:"unwrapElement",value:function unwrapElement(e){var t=e.parent;if(t){var _i234=t.getChildIndex(e);this.remove(e),this.insertChild(_i234,e.getChildren(),t);}}},{key:"rename",value:function rename(e,t){var i=new eo(this.document,e,t.getAttributes(),t.getChildren());return this.replace(t,i)?i:null;}},{key:"setAttribute",value:function setAttribute(e,t,i){i._setAttribute(e,t);}},{key:"removeAttribute",value:function removeAttribute(e,t){t._removeAttribute(e);}},{key:"addClass",value:function addClass(e,t){t._addClass(e);}},{key:"removeClass",value:function removeClass(e,t){t._removeClass(e);}},{key:"setStyle",value:function setStyle(e,t,i){ct(e)&&void 0===i&&(i=t),i._setStyle(e,t);}},{key:"removeStyle",value:function removeStyle(e,t){t._removeStyle(e);}},{key:"setCustomProperty",value:function setCustomProperty(e,t,i){i._setCustomProperty(e,t);}},{key:"removeCustomProperty",value:function removeCustomProperty(e,t){return t._removeCustomProperty(e);}},{key:"createPositionAt",value:function createPositionAt(e,t){return co._createAt(e,t);}},{key:"createPositionAfter",value:function createPositionAfter(e){return co._createAfter(e);}},{key:"createPositionBefore",value:function createPositionBefore(e){return co._createBefore(e);}},{key:"createRange",value:function createRange(e,t){return new lo(e,t);}},{key:"createRangeOn",value:function createRangeOn(e){return lo._createOn(e);}},{key:"createRangeIn",value:function createRangeIn(e){return lo._createIn(e);}},{key:"createSelection",value:function createSelection(e,t,i){return new go(e,t,i);}}]);return gh;}();new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","rebeccapurple","currentcolor","transparent"]);var mh=/*#__PURE__*/function(_yl){_inherits(mh,_yl);var _super76=_createSuper(mh);function mh(e,t){var _this139;_classCallCheck(this,mh);_this139=_super76.call(this,e),_this139.view=t,_this139._toolbarConfig=fd(e.config.get("toolbar")),_this139._elementReplacer=new vs();return _this139;}_createClass(mh,[{key:"element",get:function get(){return this.view.element;}},{key:"init",value:function init(e){var t=this.editor,i=this.view,n=t.editing.view,o=i.editable,r=n.document.getRoot();o.name=r.rootName,i.render();var s=o.element;this.setEditableElement(o.name,s),this.focusTracker.add(s),i.editable.bind("isFocused").to(this.focusTracker),n.attachDomRoot(s),e&&this._elementReplacer.replace(e,this.element),this._initPlaceholder(),this._initToolbar(),this.fire("ready");}},{key:"destroy",value:function destroy(){var e=this.view,t=this.editor.editing.view;this._elementReplacer.restore(),t.detachDomRoot(e.editable.name),e.destroy(),_get(_getPrototypeOf(mh.prototype),"destroy",this).call(this);}},{key:"_initToolbar",value:function _initToolbar(){var e=this.editor,t=this.view,i=e.editing.view;t.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),t.stickyPanel.limiterElement=t.element,this._toolbarConfig.viewportTopOffset&&(t.stickyPanel.viewportTopOffset=this._toolbarConfig.viewportTopOffset),t.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),function(_ref39){var e=_ref39.origin,t=_ref39.originKeystrokeHandler,i=_ref39.originFocusTracker,n=_ref39.toolbar,o=_ref39.beforeFocus,r=_ref39.afterBlur;i.add(n.element),t.set("Alt+F10",function(e,t){i.isFocused&&!n.focusTracker.isFocused&&(o&&o(),n.focus(),t());}),n.keystrokes.set("Esc",function(t,i){n.focusTracker.isFocused&&(e.focus(),r&&r(),i());});}({origin:i,originFocusTracker:this.focusTracker,originKeystrokeHandler:e.keystrokes,toolbar:t.toolbar});}},{key:"_initPlaceholder",value:function _initPlaceholder(){var e=this.editor,t=e.editing.view,i=t.document.getRoot(),n=e.sourceElement,o=e.config.get("placeholder")||n&&"textarea"===n.tagName.toLowerCase()&&n.getAttribute("placeholder");o&&Kd({view:t,element:i,text:o,isDirectHost:!1,keepOnFocus:!0});}}]);return mh;}(yl);i(61);var fh=/*#__PURE__*/function(_Id){_inherits(fh,_Id);var _super77=_createSuper(fh);function fh(e,t){var _this140;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};_classCallCheck(this,fh);_this140=_super77.call(this,e),_this140.stickyPanel=new Yd(e),_this140.toolbar=new pd(e,{shouldGroupWhenFull:i.shouldToolbarGroupWhenFull}),_this140.editable=new Pd(e,t);return _this140;}_createClass(fh,[{key:"render",value:function render(){_get(_getPrototypeOf(fh.prototype),"render",this).call(this),this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable);}}]);return fh;}(Id);var ph=/*#__PURE__*/function(_kl){_inherits(ph,_kl);var _super78=_createSuper(ph);function ph(e,t){var _this141;_classCallCheck(this,ph);_this141=_super78.call(this,t),Yi(e)&&(_this141.sourceElement=e),_this141.model.document.createRoot();var i=!_this141.config.get("toolbar.shouldNotGroupWhenFull"),n=new fh(_this141.locale,_this141.editing.view,{shouldToolbarGroupWhenFull:i});_this141.ui=new mh(_assertThisInitialized(_this141),n),function(e){if(!M(e.updateSourceElement))throw new c.a("attachtoform-missing-elementapi-interface",e);var t=e.sourceElement;if(t&&"textarea"===t.tagName.toLowerCase()&&t.form){var _i235;var _n136=t.form,_o84=function _o84(){return e.updateSourceElement();};M(_n136.submit)&&(_i235=_n136.submit,_n136.submit=function(){_o84(),_i235.apply(_n136);}),_n136.addEventListener("submit",_o84),e.on("destroy",function(){_n136.removeEventListener("submit",_o84),_i235&&(_n136.submit=_i235);});}}(_assertThisInitialized(_this141));return _this141;}_createClass(ph,[{key:"destroy",value:function destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),_get(_getPrototypeOf(ph.prototype),"destroy",this).call(this);}}],[{key:"create",value:function create(e){var _this142=this;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return new Promise(function(i){var n=new _this142(e,t);i(n.initPlugins().then(function(){return n.ui.init(Yi(e)?e:null);}).then(function(){if(!Yi(e)&&t.initialData)throw new c.a("editor-create-initial-data",null);var i=void 0!==t.initialData?t.initialData:function(e){return Yi(e)?(t=e,t instanceof HTMLTextAreaElement?t.value:t.innerHTML):e;var t;}(e);return n.data.init(i);}).then(function(){return n.fire("ready");}).then(function(){return n;}));});}}]);return ph;}(kl);Ke(ph,xl),Ke(ph,Al);var bh=/*#__PURE__*/function(){function bh(e){_classCallCheck(this,bh);this.files=function(e){var t=Array.from(e.files||[]),i=Array.from(e.items||[]);if(t.length)return t;return i.filter(function(e){return"file"===e.kind;}).map(function(e){return e.getAsFile();});}(e),this._native=e;}_createClass(bh,[{key:"types",get:function get(){return this._native.types;}},{key:"getData",value:function getData(e){return this._native.getData(e);}},{key:"setData",value:function setData(e,t){this._native.setData(e,t);}},{key:"effectAllowed",get:function get(){return this._native.effectAllowed;},set:function set(e){this._native.effectAllowed=e;}},{key:"dropEffect",get:function get(){return this._native.dropEffect;},set:function set(e){this._native.dropEffect=e;}},{key:"isCanceled",get:function get(){return"none"==this._native.dropEffect||!!this._native.mozUserCancelled;}}]);return bh;}();var wh=/*#__PURE__*/function(_ts7){_inherits(wh,_ts7);var _super79=_createSuper(wh);function wh(e){var _this143;_classCallCheck(this,wh);_this143=_super79.call(this,e);var t=_this143.document;function i(e){return function(i,n){n.preventDefault();var r=n.dropRange?[n.dropRange]:null,s=new o(t,e);t.fire(s,{dataTransfer:n.dataTransfer,method:i.name,targetRanges:r,target:n.target}),s.stop.called&&n.stopPropagation();};}_this143.domEventType=["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"],_this143.listenTo(t,"paste",i("clipboardInput"),{priority:"low"}),_this143.listenTo(t,"drop",i("clipboardInput"),{priority:"low"}),_this143.listenTo(t,"dragover",i("dragging"),{priority:"low"});return _this143;}_createClass(wh,[{key:"onDomEvent",value:function onDomEvent(e){var t={dataTransfer:new bh(e.clipboardData?e.clipboardData:e.dataTransfer)};"drop"!=e.type&&"dragover"!=e.type||(t.dropRange=function(e,t){var i=t.target.ownerDocument,n=t.clientX,o=t.clientY;var r;i.caretRangeFromPoint&&i.caretRangeFromPoint(n,o)?r=i.caretRangeFromPoint(n,o):t.rangeParent&&(r=i.createRange(),r.setStart(t.rangeParent,t.rangeOffset),r.collapse(!0));if(r)return e.domConverter.domRangeToView(r);return null;}(this.view,e)),this.fire(e.type,e,t);}}]);return wh;}(ts);var kh=["figcaption","li"];var _h=/*#__PURE__*/function(_Qe2){_inherits(_h,_Qe2);var _super80=_createSuper(_h);function _h(){_classCallCheck(this,_h);return _super80.apply(this,arguments);}_createClass(_h,[{key:"init",value:function init(){this.editor.editing.view.addObserver(wh),this._setupPasteDrop(),this._setupCopyCut();}},{key:"_setupPasteDrop",value:function _setupPasteDrop(){var _this144=this;var e=this.editor,t=e.model,i=e.editing.view,n=i.document;this.listenTo(n,"clipboardInput",function(t){e.isReadOnly&&t.stop();},{priority:"highest"}),this.listenTo(n,"clipboardInput",function(e,t){var n=t.dataTransfer;var r=t.content||"";var s;r||(n.getData("text/html")?r=function(e){return e.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,function(e,t){return 1==t.length?" ":t;}).replace(/<!--[\s\S]*?-->/g,"");}(n.getData("text/html")):n.getData("text/plain")&&(((s=(s=n.getData("text/plain")).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;")).includes("</p><p>")||s.includes("<br>"))&&(s="<p>".concat(s,"</p>")),r=s),r=_this144.editor.data.htmlProcessor.toView(r));var a=new o(_this144,"inputTransformation");_this144.fire(a,{content:r,dataTransfer:n,targetRanges:t.targetRanges,method:t.method}),a.stop.called&&e.stop(),i.scrollToTheSelection();},{priority:"low"}),this.listenTo(this,"inputTransformation",function(e,i){if(i.content.isEmpty)return;var n=_this144.editor.data.toModel(i.content,"$clipboardHolder");0!=n.childCount&&(e.stop(),t.change(function(){_this144.fire("contentInsertion",{content:n,method:i.method,dataTransfer:i.dataTransfer,targetRanges:i.targetRanges});}));},{priority:"low"}),this.listenTo(this,"contentInsertion",function(e,i){i.resultRange=t.insertContent(i.content);},{priority:"low"});}},{key:"_setupCopyCut",value:function _setupCopyCut(){var _this145=this;var e=this.editor,t=e.model.document,i=e.editing.view.document;function n(n,o){var r=o.dataTransfer;o.preventDefault();var s=e.data.toView(e.model.getSelectedContent(t.selection));i.fire("clipboardOutput",{dataTransfer:r,content:s,method:n.name});}this.listenTo(i,"copy",n,{priority:"low"}),this.listenTo(i,"cut",function(t,i){e.isReadOnly?i.preventDefault():n(t,i);},{priority:"low"}),this.listenTo(i,"clipboardOutput",function(i,n){n.content.isEmpty||(n.dataTransfer.setData("text/html",_this145.editor.data.htmlProcessor.toData(n.content)),n.dataTransfer.setData("text/plain",function e(t){var i="";if(t.is("$text")||t.is("$textProxy"))i=t.data;else if(t.is("element","img")&&t.hasAttribute("alt"))i=t.getAttribute("alt");else if(t.is("element","br"))i="\n";else{var _n137=null;var _iterator305=_createForOfIteratorHelper(t.getChildren()),_step305;try{for(_iterator305.s();!(_step305=_iterator305.n()).done;){var _o85=_step305.value;var _t213=e(_o85);_n137&&(_n137.is("containerElement")||_o85.is("containerElement"))&&(kh.includes(_n137.name)||kh.includes(_o85.name)?i+="\n":i+="\n\n"),i+=_t213,_n137=_o85;}}catch(err){_iterator305.e(err);}finally{_iterator305.f();}}return i;}(n.content))),"cut"==n.method&&e.model.deleteContent(t.selection);},{priority:"low"});}}],[{key:"pluginName",get:function get(){return"ClipboardPipeline";}}]);return _h;}(Qe);function vh(e,t){var _iterator306,_step306,_i236;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function vh$(_context37){while(1){switch(_context37.prev=_context37.next){case 0:_iterator306=_createForOfIteratorHelper(t);_context37.prev=1;_iterator306.s();case 3:if((_step306=_iterator306.n()).done){_context37.next=11;break;}_i236=_step306.value;_context37.t0=_i236&&e.getAttributeProperties(_i236[0]).copyOnEnter;if(!_context37.t0){_context37.next=9;break;}_context37.next=9;return _i236;case 9:_context37.next=3;break;case 11:_context37.next=16;break;case 13:_context37.prev=13;_context37.t1=_context37["catch"](1);_iterator306.e(_context37.t1);case 16:_context37.prev=16;_iterator306.f();return _context37.finish(16);case 19:case"end":return _context37.stop();}}},_marked3,null,[[1,13,16,19]]);}var yh=/*#__PURE__*/function(_Ze2){_inherits(yh,_Ze2);var _super81=_createSuper(yh);function yh(){_classCallCheck(this,yh);return _super81.apply(this,arguments);}_createClass(yh,[{key:"execute",value:function execute(){var _this146=this;var e=this.editor.model,t=e.document;e.change(function(i){!function(e,t,i,n){var o=i.isCollapsed,r=i.getFirstRange(),s=r.start.parent,a=r.end.parent;if(n.isLimit(s)||n.isLimit(a))return void(o||s!=a||e.deleteContent(i));if(o){var _e229=vh(t.model.schema,i.getAttributes());xh(t,r.start),t.setSelectionAttribute(_e229);}else{var _n138=!(r.start.isAtStart&&r.end.isAtEnd),_o86=s==a;e.deleteContent(i,{leaveUnmerged:_n138}),_n138&&(_o86?xh(t,i.focus):t.setSelection(a,0));}}(_this146.editor.model,i,t.selection,e.schema),_this146.fire("afterExecute",{writer:i});});}}]);return yh;}(Ze);function xh(e,t){e.split(t),e.setSelection(t.parent.nextSibling,0);}var Ah=/*#__PURE__*/function(_Or6){_inherits(Ah,_Or6);var _super82=_createSuper(Ah);function Ah(e){var _this147;_classCallCheck(this,Ah);_this147=_super82.call(this,e);var t=_this147.document;t.on("keydown",function(e,i){if(_this147.isEnabled&&i.keyCode==No.enter){var _n139=new fo(t,"enter",t.selection.getFirstRange());t.fire(_n139,new es(t,i.domEvent,{isSoft:i.shiftKey})),_n139.stop.called&&e.stop();}});return _this147;}_createClass(Ah,[{key:"observe",value:function observe(){}}]);return Ah;}(Or);var Ch=/*#__PURE__*/function(_Qe3){_inherits(Ch,_Qe3);var _super83=_createSuper(Ch);function Ch(){_classCallCheck(this,Ch);return _super83.apply(this,arguments);}_createClass(Ch,[{key:"init",value:function init(){var e=this.editor,t=e.editing.view,i=t.document;t.addObserver(Ah),e.commands.add("enter",new yh(e)),this.listenTo(i,"enter",function(i,n){n.preventDefault(),n.isSoft||(e.execute("enter"),t.scrollToTheSelection());},{priority:"low"});}}],[{key:"pluginName",get:function get(){return"Enter";}}]);return Ch;}(Qe);var Th=/*#__PURE__*/function(){function Th(e){var _this148=this;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:20;_classCallCheck(this,Th);this.model=e,this.size=0,this.limit=t,this.isLocked=!1,this._changeCallback=function(e,t){"transparent"!=t.type&&t!==_this148._batch&&_this148._reset(!0);},this._selectionChangeCallback=function(){_this148._reset();},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback);}_createClass(Th,[{key:"batch",get:function get(){return this._batch||(this._batch=this.model.createBatch()),this._batch;}},{key:"input",value:function input(e){this.size+=e,this.size>=this.limit&&this._reset(!0);}},{key:"lock",value:function lock(){this.isLocked=!0;}},{key:"unlock",value:function unlock(){this.isLocked=!1;}},{key:"destroy",value:function destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback);}},{key:"_reset",value:function _reset(e){this.isLocked&&!e||(this._batch=null,this.size=0);}}]);return Th;}();var Eh=/*#__PURE__*/function(_Ze3){_inherits(Eh,_Ze3);var _super84=_createSuper(Eh);function Eh(e,t){var _this149;_classCallCheck(this,Eh);_this149=_super84.call(this,e),_this149.direction=t,_this149._buffer=new Th(e.model,e.config.get("typing.undoStep"));return _this149;}_createClass(Eh,[{key:"buffer",get:function get(){return this._buffer;}},{key:"execute",value:function execute(){var _this150=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=this.editor.model,i=t.document;t.enqueueChange(this._buffer.batch,function(n){_this150._buffer.lock();var o=n.createSelection(e.selection||i.selection),r=e.sequence||1,s=o.isCollapsed;if(o.isCollapsed&&t.modifySelection(o,{direction:_this150.direction,unit:e.unit}),_this150._shouldEntireContentBeReplacedWithParagraph(r))return void _this150._replaceEntireContentWithParagraph(n);if(_this150._shouldReplaceFirstBlockWithParagraph(o,r))return void _this150.editor.execute("paragraph",{selection:o});if(o.isCollapsed)return;var a=0;o.getFirstRange().getMinimalFlatRanges().forEach(function(e){a+=uo(e.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}));}),t.deleteContent(o,{doNotResetEntireContent:s,direction:_this150.direction}),_this150._buffer.input(a),n.setSelection(o),_this150._buffer.unlock();});}},{key:"_shouldEntireContentBeReplacedWithParagraph",value:function _shouldEntireContentBeReplacedWithParagraph(e){if(e>1)return!1;var t=this.editor.model,i=t.document.selection,n=t.schema.getLimitElement(i);if(!(i.isCollapsed&&i.containsEntireContent(n)))return!1;if(!t.schema.checkChild(n,"paragraph"))return!1;var o=n.getChild(0);return!o||"paragraph"!==o.name;}},{key:"_replaceEntireContentWithParagraph",value:function _replaceEntireContentWithParagraph(e){var t=this.editor.model,i=t.document.selection,n=t.schema.getLimitElement(i),o=e.createElement("paragraph");e.remove(e.createRangeIn(n)),e.insert(o,n),e.setSelection(o,0);}},{key:"_shouldReplaceFirstBlockWithParagraph",value:function _shouldReplaceFirstBlockWithParagraph(e,t){var i=this.editor.model;if(t>1||"backward"!=this.direction)return!1;if(!e.isCollapsed)return!1;var n=e.getFirstPosition(),o=i.schema.getLimitElement(n),r=o.getChild(0);return n.parent==r&&!!e.containsEntireContent(r)&&!!i.schema.checkChild(o,"paragraph")&&"paragraph"!=r.name;}}]);return Eh;}(Ze);var Ih=/*#__PURE__*/function(_Or7){_inherits(Ih,_Or7);var _super85=_createSuper(Ih);function Ih(e){var _this151;_classCallCheck(this,Ih);_this151=_super85.call(this,e);var t=e.document;var i=0;function n(e,i,n){var o=new fo(t,"delete",t.selection.getFirstRange());t.fire(o,new es(t,i,n)),o.stop.called&&e.stop();}t.on("keyup",function(e,t){t.keyCode!=No["delete"]&&t.keyCode!=No.backspace||(i=0);}),t.on("keydown",function(e,t){var o={};if(t.keyCode==No["delete"])o.direction="forward",o.unit="character";else{if(t.keyCode!=No.backspace)return;o.direction="backward",o.unit="codePoint";}var r=So.isMac?t.altKey:t.ctrlKey;o.unit=r?"word":o.unit,o.sequence=++i,n(e,t.domEvent,o);}),So.isAndroid&&t.on("beforeinput",function(t,i){if("deleteContentBackward"!=i.domEvent.inputType)return;var o={unit:"codepoint",direction:"backward",sequence:1},r=i.domTarget.ownerDocument.defaultView.getSelection();r.anchorNode==r.focusNode&&r.anchorOffset+1!=r.focusOffset&&(o.selectionToRemove=e.domConverter.domSelectionToView(r)),n(t,i.domEvent,o);});return _this151;}_createClass(Ih,[{key:"observe",value:function observe(){}}]);return Ih;}(Or);var Sh=/*#__PURE__*/function(_Qe4){_inherits(Sh,_Qe4);var _super86=_createSuper(Sh);function Sh(){_classCallCheck(this,Sh);return _super86.apply(this,arguments);}_createClass(Sh,[{key:"init",value:function init(){var e=this.editor,t=e.editing.view,i=t.document;t.addObserver(Ih);var n=new Eh(e,"forward");if(e.commands.add("deleteForward",n),e.commands.add("forwardDelete",n),e.commands.add("delete",new Eh(e,"backward")),this.listenTo(i,"delete",function(i,n){var o={unit:n.unit,sequence:n.sequence};if(n.selectionToRemove){var _t214=e.model.createSelection(),_i237=[];var _iterator307=_createForOfIteratorHelper(n.selectionToRemove.getRanges()),_step307;try{for(_iterator307.s();!(_step307=_iterator307.n()).done;){var _t215=_step307.value;_i237.push(e.editing.mapper.toModelRange(_t215));}}catch(err){_iterator307.e(err);}finally{_iterator307.f();}_t214.setTo(_i237),o.selection=_t214;}e.execute("forward"==n.direction?"deleteForward":"delete",o),n.preventDefault(),t.scrollToTheSelection();},{priority:"low"}),So.isAndroid){var _e230=null;this.listenTo(i,"delete",function(t,i){var n=i.domTarget.ownerDocument.defaultView.getSelection();_e230={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset};},{priority:"lowest"}),this.listenTo(i,"keyup",function(t,i){if(_e230){var _t216=i.domTarget.ownerDocument.defaultView.getSelection();_t216.collapse(_e230.anchorNode,_e230.anchorOffset),_t216.extend(_e230.focusNode,_e230.focusOffset),_e230=null;}});}}}],[{key:"pluginName",get:function get(){return"Delete";}}]);return Sh;}(Qe);var Ph=/*#__PURE__*/function(){function Ph(){_classCallCheck(this,Ph);this._stack=[];}_createClass(Ph,[{key:"add",value:function add(e,t){var i=this._stack,n=i[0];this._insertDescriptor(e);var o=i[0];n===o||Mh(n,o)||this.fire("change:top",{oldDescriptor:n,newDescriptor:o,writer:t});}},{key:"remove",value:function remove(e,t){var i=this._stack,n=i[0];this._removeDescriptor(e);var o=i[0];n===o||Mh(n,o)||this.fire("change:top",{oldDescriptor:n,newDescriptor:o,writer:t});}},{key:"_insertDescriptor",value:function _insertDescriptor(e){var t=this._stack,i=t.findIndex(function(t){return t.id===e.id;});if(Mh(e,t[i]))return;i>-1&&t.splice(i,1);var n=0;for(;t[n]&&Nh(t[n],e);){n++;}t.splice(n,0,e);}},{key:"_removeDescriptor",value:function _removeDescriptor(e){var t=this._stack,i=t.findIndex(function(t){return t.id===e;});i>-1&&t.splice(i,1);}}]);return Ph;}();function Mh(e,t){return e&&t&&e.priority==t.priority&&Rh(e.classes)==Rh(t.classes);}function Nh(e,t){return e.priority>t.priority||!(e.priority<t.priority)&&Rh(e.classes)>Rh(t.classes);}function Rh(e){return Array.isArray(e)?e.sort().join(","):e;}Ke(Ph,h);function Oh(e){return!!e.is("element")&&!!e.getCustomProperty("widget");}function zh(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(!e.is("containerElement"))throw new c.a("widget-to-widget-wrong-element-type",null,{element:e});return t.setAttribute("contenteditable","false",e),t.addClass("ck-widget",e),t.setCustomProperty("widget",!0,e),e.getFillerOffset=Uh,i.label&&function(e,t,i){i.setCustomProperty("widgetLabel",t,e);}(e,i.label,t),i.hasSelectionHandle&&function(e,t){var i=t.createUIElement("div",{"class":"ck ck-widget__selection-handle"},function(e){var t=this.toDomElement(e),i=new Zl();return i.set("content",'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>'),i.render(),t.appendChild(i.element),t;});t.insert(t.createPositionAt(e,0),i),t.addClass(["ck-widget_with-selection-handle"],e);}(e,t),Vh(e,t,Dh,Lh),e;}function Dh(e,t,i){if(t.classes&&i.addClass(en(t.classes),e),t.attributes)for(var _n140 in t.attributes){i.setAttribute(_n140,t.attributes[_n140],e);}}function Lh(e,t,i){if(t.classes&&i.removeClass(en(t.classes),e),t.attributes)for(var _n141 in t.attributes){i.removeAttribute(_n141,e);}}function Vh(e,t,i,n){var o=new Ph();o.on("change:top",function(t,o){o.oldDescriptor&&n(e,o.oldDescriptor,o.writer),o.newDescriptor&&i(e,o.newDescriptor,o.writer);}),t.setCustomProperty("addHighlight",function(e,t,i){return o.add(t,i);},e),t.setCustomProperty("removeHighlight",function(e,t,i){return o.remove(t,i);},e);}function jh(e){var t=e.getCustomProperty("widgetLabel");return t?"function"==typeof t?t():t:"";}function Bh(e,t){return t.addClass(["ck-editor__editable","ck-editor__nested-editable"],e),t.setAttribute("contenteditable",e.isReadOnly?"false":"true",e),e.on("change:isReadOnly",function(i,n,o){t.setAttribute("contenteditable",o?"false":"true",e);}),e.on("change:isFocused",function(i,n,o){o?t.addClass("ck-editor__nested-editable_focused",e):t.removeClass("ck-editor__nested-editable_focused",e);}),e;}function Fh(e,t){var i=e.getSelectedElement();if(i){var _n142=qh(e);if(_n142)return t.createRange(t.createPositionAt(i,_n142));if(t.schema.isObject(i)&&!t.schema.isInline(i))return t.createRangeOn(i);}var n=e.getSelectedBlocks().next().value;if(n){if(n.isEmpty)return t.createRange(t.createPositionAt(n,0));var _i238=t.createPositionAfter(n);return e.focus.isTouching(_i238)?t.createRange(_i238):t.createRange(t.createPositionBefore(n));}return t.createRange(e.focus);}function Hh(e,t){var i=new Ts(vr.window),n=i.getIntersection(e),o=t.height+Vd.arrowVerticalOffset;if(e.top-o>i.top||e.bottom+o<i.bottom)return null;var r=n||e,s=r.left+r.width/2-t.width/2;return{top:Math.max(e.top,0)+Vd.arrowVerticalOffset,left:s,name:"arrow_n"};}function Uh(){return null;}function Wh(e,t,i){return e&&Oh(e)&&!i.isInline(t);}function qh(e){return e.getAttribute("widget-type-around");}var $h=[Oo("arrowUp"),Oo("arrowRight"),Oo("arrowDown"),Oo("arrowLeft"),9,16,17,18,19,20,27,33,34,35,36,45,91,93,144,145,173,174,175,176,177,178,179,255];for(var _e231=112;_e231<=135;_e231++){$h.push(_e231);}function Yh(e){return!(!e.ctrlKey&&!e.metaKey)||$h.includes(e.keyCode);}i(63);var Gh=["before","after"],Kh=new DOMParser().parseFromString('<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>',"image/svg+xml").firstChild;var Qh=/*#__PURE__*/function(_Qe5){_inherits(Qh,_Qe5);var _super87=_createSuper(Qh);function Qh(e){var _this152;_classCallCheck(this,Qh);_this152=_super87.call(this,e),_this152._currentFakeCaretModelElement=null;return _this152;}_createClass(Qh,[{key:"init",value:function init(){var e=this.editor,t=e.editing.view;this.on("change:isEnabled",function(i,n,o){t.change(function(e){var _iterator308=_createForOfIteratorHelper(t.document.roots),_step308;try{for(_iterator308.s();!(_step308=_iterator308.n()).done;){var _i239=_step308.value;o?e.removeClass("ck-widget__type-around_disabled",_i239):e.addClass("ck-widget__type-around_disabled",_i239);}}catch(err){_iterator308.e(err);}finally{_iterator308.f();}}),o||e.model.change(function(e){e.removeSelectionAttribute("widget-type-around");});}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableDeleteContentIntegration();}},{key:"destroy",value:function destroy(){this._currentFakeCaretModelElement=null;}},{key:"_insertParagraph",value:function _insertParagraph(e,t){var i=this.editor,n=i.editing.view;i.execute("insertParagraph",{position:i.model.createPositionAt(e,t)}),n.focus(),n.scrollToTheSelection();}},{key:"_listenToIfEnabled",value:function _listenToIfEnabled(e,t,i,n){var _this153=this;this.listenTo(e,t,function(){_this153.isEnabled&&i.apply(void 0,arguments);},n);}},{key:"_insertParagraphAccordingToFakeCaretPosition",value:function _insertParagraphAccordingToFakeCaretPosition(){var e=this.editor.model.document.selection,t=qh(e);if(!t)return!1;var i=e.getSelectedElement();return this._insertParagraph(i,t),!0;}},{key:"_enableTypeAroundUIInjection",value:function _enableTypeAroundUIInjection(){var e=this.editor,t=e.model.schema,i=e.locale.t,n={before:i("Insert paragraph before block"),after:i("Insert paragraph after block")};e.editing.downcastDispatcher.on("insert",function(e,i,o){var r=o.mapper.toViewElement(i.item);Wh(r,i.item,t)&&function(e,t,i){var n=e.createUIElement("div",{"class":"ck ck-reset_all ck-widget__type-around"},function(e){var i=this.toDomElement(e);return function(e,t){var _iterator309=_createForOfIteratorHelper(Gh),_step309;try{for(_iterator309.s();!(_step309=_iterator309.n()).done;){var _i240=_step309.value;var _n143=new Nl({tag:"div",attributes:{"class":["ck","ck-widget__type-around__button","ck-widget__type-around__button_"+_i240],title:t[_i240]},children:[e.ownerDocument.importNode(Kh,!0)]});e.appendChild(_n143.render());}}catch(err){_iterator309.e(err);}finally{_iterator309.f();}}(i,t),function(e){var t=new Nl({tag:"div",attributes:{"class":["ck","ck-widget__type-around__fake-caret"]}});e.appendChild(t.render());}(i),i;});e.insert(e.createPositionAt(i,"end"),n);}(o.writer,n,r);},{priority:"low"});}},{key:"_enableTypeAroundFakeCaretActivationUsingKeyboardArrows",value:function _enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){var _this154=this;var e=this.editor,t=e.model,i=t.document.selection,n=t.schema,o=e.editing.view;function r(e){return"ck-widget_type-around_show-fake-caret_"+e;}this._listenToIfEnabled(o.document,"arrowKey",function(e,t){_this154._handleArrowKeyPress(e,t);},{context:[Oh,"$text"],priority:"high"}),this._listenToIfEnabled(i,"change:range",function(t,i){i.directChange&&e.model.change(function(e){e.removeSelectionAttribute("widget-type-around");});}),this._listenToIfEnabled(t.document,"change:data",function(){var t=i.getSelectedElement();if(t){if(Wh(e.editing.mapper.toViewElement(t),t,n))return;}e.model.change(function(e){e.removeSelectionAttribute("widget-type-around");});}),this._listenToIfEnabled(e.editing.downcastDispatcher,"selection",function(e,t,i){var o=i.writer;if(_this154._currentFakeCaretModelElement){var _e232=i.mapper.toViewElement(_this154._currentFakeCaretModelElement);_e232&&(o.removeClass(Gh.map(r),_e232),_this154._currentFakeCaretModelElement=null);}var s=t.selection.getSelectedElement();if(!s)return;var a=i.mapper.toViewElement(s);if(!Wh(a,s,n))return;var c=qh(t.selection);c&&(o.addClass(r(c),a),_this154._currentFakeCaretModelElement=s);}),this._listenToIfEnabled(e.ui.focusTracker,"change:isFocused",function(t,i,n){n||e.model.change(function(e){e.removeSelectionAttribute("widget-type-around");});});}},{key:"_handleArrowKeyPress",value:function _handleArrowKeyPress(e,t){var i=this.editor,n=i.model,o=n.document.selection,r=n.schema,s=i.editing.view,a=Vo(t.keyCode,i.locale.contentLanguageDirection),c=s.document.selection.getSelectedElement();var l;Wh(c,i.editing.mapper.toModelElement(c),r)?l=this._handleArrowKeyPressOnSelectedWidget(a):o.isCollapsed&&(l=this._handleArrowKeyPressWhenSelectionNextToAWidget(a)),l&&(t.preventDefault(),e.stop());}},{key:"_handleArrowKeyPressOnSelectedWidget",value:function _handleArrowKeyPressOnSelectedWidget(e){var t=this.editor.model,i=qh(t.document.selection);return t.change(function(t){if(!i)return t.setSelectionAttribute("widget-type-around",e?"after":"before"),!0;if(!(i===(e?"after":"before")))return t.removeSelectionAttribute("widget-type-around"),!0;return!1;});}},{key:"_handleArrowKeyPressWhenSelectionNextToAWidget",value:function _handleArrowKeyPressWhenSelectionNextToAWidget(e){var t=this.editor,i=t.model,n=i.schema,o=t.plugins.get("Widget"),r=o._getObjectElementNextToSelection(e);return!!Wh(t.editing.mapper.toViewElement(r),r,n)&&(i.change(function(t){o._setSelectionOverElement(r),t.setSelectionAttribute("widget-type-around",e?"before":"after");}),!0);}},{key:"_enableInsertingParagraphsOnButtonClick",value:function _enableInsertingParagraphsOnButtonClick(){var _this155=this;var e=this.editor,t=e.editing.view;this._listenToIfEnabled(t.document,"mousedown",function(i,n){var o=n.domTarget.closest(".ck-widget__type-around__button");if(!o)return;var r=function(e){return e.classList.contains("ck-widget__type-around__button_before")?"before":"after";}(o),s=function(e,t){var i=e.closest(".ck-widget");return t.mapDomToView(i);}(o,t.domConverter),a=e.editing.mapper.toModelElement(s);_this155._insertParagraph(a,r),n.preventDefault(),i.stop();});}},{key:"_enableInsertingParagraphsOnEnterKeypress",value:function _enableInsertingParagraphsOnEnterKeypress(){var _this156=this;var e=this.editor,t=e.model.document.selection,i=e.editing.view;this._listenToIfEnabled(i.document,"enter",function(i,n){if("atTarget"!=i.eventPhase)return;var o=t.getSelectedElement(),r=e.editing.mapper.toViewElement(o),s=e.model.schema;var a;_this156._insertParagraphAccordingToFakeCaretPosition()?a=!0:Wh(r,o,s)&&(_this156._insertParagraph(o,n.isSoft?"before":"after"),a=!0),a&&(n.preventDefault(),i.stop());},{context:Oh});}},{key:"_enableInsertingParagraphsOnTypingKeystroke",value:function _enableInsertingParagraphsOnTypingKeystroke(){var _this157=this;var e=this.editor.editing.view,t=[No.enter,No["delete"],No.backspace];this._listenToIfEnabled(e.document,"keydown",function(e,i){t.includes(i.keyCode)||Yh(i)||_this157._insertParagraphAccordingToFakeCaretPosition();},{priority:"high"});}},{key:"_enableDeleteIntegration",value:function _enableDeleteIntegration(){var e=this.editor,t=e.editing.view,i=e.model,n=i.schema;this._listenToIfEnabled(t.document,"delete",function(t,o){if("atTarget"!=t.eventPhase)return;var r=qh(i.document.selection);if(!r)return;var s=o.direction,a=i.document.selection.getSelectedElement(),c="forward"==s;if("before"===r===c)e.execute("delete",{selection:i.createSelection(a,"on")});else{var _t217=n.getNearestSelectionRange(i.createPositionAt(a,r),s);if(_t217)if(_t217.isCollapsed){var _o87=i.createSelection(_t217.start);if(i.modifySelection(_o87,{direction:s}),_o87.focus.isEqual(_t217.start)){var _e233=function(e,t){var i=t;var _iterator310=_createForOfIteratorHelper(t.getAncestors({parentFirst:!0})),_step310;try{for(_iterator310.s();!(_step310=_iterator310.n()).done;){var _n144=_step310.value;if(_n144.childCount>1||e.isLimit(_n144))break;i=_n144;}}catch(err){_iterator310.e(err);}finally{_iterator310.f();}return i;}(n,_t217.start.parent);i.deleteContent(i.createSelection(_e233,"on"),{doNotAutoparagraph:!0});}else i.change(function(i){i.setSelection(_t217),e.execute(c?"deleteForward":"delete");});}else i.change(function(i){i.setSelection(_t217),e.execute(c?"deleteForward":"delete");});}o.preventDefault(),t.stop();},{context:Oh});}},{key:"_enableInsertContentIntegration",value:function _enableInsertContentIntegration(){var e=this.editor,t=this.editor.model,i=t.document.selection;this._listenToIfEnabled(e.model,"insertContent",function(e,_ref40){var _ref41=_slicedToArray(_ref40,2),n=_ref41[0],o=_ref41[1];if(o&&!o.is("documentSelection"))return;var r=qh(i);return r?(e.stop(),t.change(function(e){var o=i.getSelectedElement(),s=t.createPositionAt(o,r),a=e.createSelection(s),c=t.insertContent(n,a);return e.setSelection(a),c;})):void 0;},{priority:"high"});}},{key:"_enableDeleteContentIntegration",value:function _enableDeleteContentIntegration(){var e=this.editor,t=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"deleteContent",function(e,_ref42){var _ref43=_slicedToArray(_ref42,1),i=_ref43[0];if(i&&!i.is("documentSelection"))return;qh(t)&&e.stop();},{priority:"high"});}}],[{key:"pluginName",get:function get(){return"WidgetTypeAround";}},{key:"requires",get:function get(){return[Ch,Sh];}}]);return Qh;}(Qe);i(65);function Jh(e){var t=e.model;return function(i,n){var o=n.keyCode==No.arrowup,r=n.keyCode==No.arrowdown,s=n.shiftKey,a=t.document.selection;if(!o&&!r)return;var c=r;if(s&&function(e,t){return!e.isCollapsed&&e.isBackward==t;}(a,c))return;var l=function(e,t,i){var n=e.model;if(i){var _e234=t.isCollapsed?t.focus:t.getLastPosition(),_i241=Zh(n,_e234,"forward");if(!_i241)return null;var _o88=n.createRange(_e234,_i241),_r47=Xh(n.schema,_o88,"backward");return _r47&&_e234.isBefore(_r47)?n.createRange(_e234,_r47):null;}{var _e235=t.isCollapsed?t.focus:t.getFirstPosition(),_i242=Zh(n,_e235,"backward");if(!_i242)return null;var _o89=n.createRange(_i242,_e235),_r48=Xh(n.schema,_o89,"forward");return _r48&&_e235.isAfter(_r48)?n.createRange(_r48,_e235):null;}}(e,a,c);l&&!l.isCollapsed&&function(e,t,i){var n=e.model,o=e.view.domConverter;if(i){var _e236=n.createSelection(t.start);n.modifySelection(_e236),_e236.focus.isAtEnd||t.start.isEqual(_e236.focus)||(t=n.createRange(_e236.focus,t.end));}var r=e.mapper.toViewRange(t),s=o.viewRangeToDom(r),a=Ts.getDomRangeRects(s);var c;var _iterator311=_createForOfIteratorHelper(a),_step311;try{for(_iterator311.s();!(_step311=_iterator311.n()).done;){var _e237=_step311.value;if(void 0!==c){if(Math.round(_e237.top)>=c)return!1;c=Math.max(c,Math.round(_e237.bottom));}else c=Math.round(_e237.bottom);}}catch(err){_iterator311.e(err);}finally{_iterator311.f();}return!0;}(e,l,c)&&(t.change(function(e){var i=c?l.end:l.start;if(s){var _n145=t.createSelection(a.anchor);_n145.setFocus(i),e.setSelection(_n145);}else e.setSelection(i);}),i.stop(),n.preventDefault(),n.stopPropagation());};}function Zh(e,t,i){var n=e.schema,o=e.createRangeIn(t.root),r="forward"==i?"elementStart":"elementEnd";var _iterator312=_createForOfIteratorHelper(o.getWalker({startPosition:t,direction:i})),_step312;try{for(_iterator312.s();!(_step312=_iterator312.n()).done;){var _step312$value=_step312.value,_e238=_step312$value.previousPosition,_s26=_step312$value.item,_a17=_step312$value.type;if(n.isLimit(_s26)&&!n.isInline(_s26))return _e238;if(_a17==r&&n.isBlock(_s26))return null;}}catch(err){_iterator312.e(err);}finally{_iterator312.f();}return null;}function Xh(e,t,i){var n="backward"==i?t.end:t.start;if(e.checkChild(n,"$text"))return n;var _iterator313=_createForOfIteratorHelper(t.getWalker({direction:i})),_step313;try{for(_iterator313.s();!(_step313=_iterator313.n()).done;){var _n146=_step313.value.nextPosition;if(e.checkChild(_n146,"$text"))return _n146;}}catch(err){_iterator313.e(err);}finally{_iterator313.f();}}var eu=/*#__PURE__*/function(_Qe6){_inherits(eu,_Qe6);var _super88=_createSuper(eu);function eu(){_classCallCheck(this,eu);return _super88.apply(this,arguments);}_createClass(eu,[{key:"init",value:function init(){var _this158=this;var e=this.editor,t=e.editing.view,i=t.document;this._previouslySelected=new Set(),this.editor.editing.downcastDispatcher.on("selection",function(t,i,n){var o=n.writer,r=i.selection;if(r.isCollapsed)return;var s=r.getSelectedElement();if(!s)return;var a=e.editing.mapper.toViewElement(s);Oh(a)&&n.consumable.consume(r,"selection")&&o.setSelection(o.createRangeOn(a),{fake:!0,label:jh(a)});}),this.editor.editing.downcastDispatcher.on("selection",function(e,t,i){_this158._clearPreviouslySelectedWidgets(i.writer);var n=i.writer,o=n.document.selection;var r=null;var _iterator314=_createForOfIteratorHelper(o.getRanges()),_step314;try{for(_iterator314.s();!(_step314=_iterator314.n()).done;){var _e239=_step314.value;var _iterator315=_createForOfIteratorHelper(_e239),_step315;try{for(_iterator315.s();!(_step315=_iterator315.n()).done;){var _t218=_step315.value;var _e240=_t218.item;Oh(_e240)&&!tu(_e240,r)&&(n.addClass("ck-widget_selected",_e240),_this158._previouslySelected.add(_e240),r=_e240);}}catch(err){_iterator315.e(err);}finally{_iterator315.f();}}}catch(err){_iterator314.e(err);}finally{_iterator314.f();}},{priority:"low"}),t.addObserver(uh),this.listenTo(i,"mousedown",function(){return _this158._onMousedown.apply(_this158,arguments);}),this.listenTo(i,"arrowKey",function(){_this158._handleSelectionChangeOnArrowKeyPress.apply(_this158,arguments);},{context:[Oh,"$text"]}),this.listenTo(i,"arrowKey",function(){_this158._preventDefaultOnArrowKeyPress.apply(_this158,arguments);},{context:"$root"}),this.listenTo(i,"arrowKey",Jh(this.editor.editing),{context:"$text"}),this.listenTo(i,"delete",function(e,t){_this158._handleDelete("forward"==t.direction)&&(t.preventDefault(),e.stop());},{context:"$root"});}},{key:"_onMousedown",value:function _onMousedown(e,t){var i=this.editor,n=i.editing.view,o=n.document;var r=t.target;if(function(e){for(;e;){if(e.is("editableElement")&&!e.is("rootElement"))return!0;if(Oh(e))return!1;e=e.parent;}return!1;}(r)){if((So.isSafari||So.isGecko)&&t.domEvent.detail>=3){var _e241=i.editing.mapper,_n147=r.is("attributeElement")?r.findAncestor(function(e){return!e.is("attributeElement");}):r,_o90=_e241.toModelElement(_n147);t.preventDefault(),this.editor.model.change(function(e){e.setSelection(_o90,"in");});}return;}if(!Oh(r)&&(r=r.findAncestor(Oh),!r))return;So.isAndroid&&t.preventDefault(),o.isFocused||n.focus();var s=i.editing.mapper.toModelElement(r);this._setSelectionOverElement(s);}},{key:"_handleSelectionChangeOnArrowKeyPress",value:function _handleSelectionChangeOnArrowKeyPress(e,t){var i=t.keyCode,n=this.editor.model,o=n.schema,r=n.document.selection,s=r.getSelectedElement(),a=Vo(i,this.editor.locale.contentLanguageDirection);if(s&&o.isObject(s)){var _i243=a?r.getLastPosition():r.getFirstPosition(),_s27=o.getNearestSelectionRange(_i243,a?"forward":"backward");return void(_s27&&(n.change(function(e){e.setSelection(_s27);}),t.preventDefault(),e.stop()));}if(!r.isCollapsed)return;var c=this._getObjectElementNextToSelection(a);c&&o.isObject(c)&&(this._setSelectionOverElement(c),t.preventDefault(),e.stop());}},{key:"_preventDefaultOnArrowKeyPress",value:function _preventDefaultOnArrowKeyPress(e,t){var i=this.editor.model,n=i.schema,o=i.document.selection.getSelectedElement();o&&n.isObject(o)&&(t.preventDefault(),e.stop());}},{key:"_handleDelete",value:function _handleDelete(e){var _this159=this;if(this.editor.isReadOnly)return;var t=this.editor.model.document.selection;if(!t.isCollapsed)return;var i=this._getObjectElementNextToSelection(e);return i?(this.editor.model.change(function(e){var n=t.anchor.parent;for(;n.isEmpty;){var _t219=n;n=_t219.parent,e.remove(_t219);}_this159._setSelectionOverElement(i);}),!0):void 0;}},{key:"_setSelectionOverElement",value:function _setSelectionOverElement(e){this.editor.model.change(function(t){t.setSelection(t.createRangeOn(e));});}},{key:"_getObjectElementNextToSelection",value:function _getObjectElementNextToSelection(e){var t=this.editor.model,i=t.schema,n=t.document.selection,o=t.createSelection(n);t.modifySelection(o,{direction:e?"forward":"backward"});var r=e?o.focus.nodeBefore:o.focus.nodeAfter;return r&&i.isObject(r)?r:null;}},{key:"_clearPreviouslySelectedWidgets",value:function _clearPreviouslySelectedWidgets(e){var _iterator316=_createForOfIteratorHelper(this._previouslySelected),_step316;try{for(_iterator316.s();!(_step316=_iterator316.n()).done;){var _t220=_step316.value;e.removeClass("ck-widget_selected",_t220);}}catch(err){_iterator316.e(err);}finally{_iterator316.f();}this._previouslySelected.clear();}}],[{key:"pluginName",get:function get(){return"Widget";}},{key:"requires",get:function get(){return[Qh,Sh];}}]);return eu;}(Qe);function tu(e,t){return!!t&&Array.from(e.getAncestors()).includes(t);}var iu=function iu(e,t,i){var n=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return w(i)&&(n="leading"in i?!!i.leading:n,o="trailing"in i?!!i.trailing:o),fs(e,t,{leading:n,maxWait:t,trailing:o});};i(67);var nu=/*#__PURE__*/function(_Qe7){_inherits(nu,_Qe7);var _super89=_createSuper(nu);function nu(){_classCallCheck(this,nu);return _super89.apply(this,arguments);}_createClass(nu,[{key:"init",value:function init(){var _this160=this;var e=this.editor,t=e.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,this._updateDropMarkerThrottled=iu(function(e){return _this160._updateDropMarker(e);},40),this._removeDropMarkerDelayed=su(function(){return _this160._removeDropMarker();},40),this._clearDraggableAttributesDelayed=su(function(){return _this160._clearDraggableAttributes();},40),t.addObserver(wh),t.addObserver(uh),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDropMarker(),this._setupDraggableAttributeHandling(),this.listenTo(e,"change:isReadOnly",function(e,t,i){i?_this160.forceDisabled("readOnlyMode"):_this160.clearForceDisabled("readOnlyMode");}),this.on("change:isEnabled",function(e,t,i){i||_this160._finalizeDragging(!1);}),So.isAndroid&&this.forceDisabled("noAndroidSupport");}},{key:"destroy",value:function destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._updateDropMarkerThrottled.cancel(),this._removeDropMarkerDelayed.cancel(),this._clearDraggableAttributesDelayed.cancel(),_get(_getPrototypeOf(nu.prototype),"destroy",this).call(this);}},{key:"_setupDragging",value:function _setupDragging(){var _this161=this;var e=this.editor,t=e.model,i=t.document,n=e.editing.view,o=n.document;this.listenTo(o,"dragstart",function(n,r){var a=i.selection;if(r.target&&r.target.is("editableElement"))return void r.preventDefault();var c=r.target?au(r.target):null;if(c){var _i244=e.editing.mapper.toModelElement(c);_this161._draggedRange=ba.fromRange(t.createRangeOn(_i244)),e.plugins.has("WidgetToolbarRepository")&&e.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop");}else if(!o.selection.isCollapsed){var _e242=o.selection.getSelectedElement();_e242&&Oh(_e242)||(_this161._draggedRange=ba.fromRange(a.getFirstRange()));}if(!_this161._draggedRange)return void r.preventDefault();_this161._draggingUid=s(),r.dataTransfer.effectAllowed=_this161.isEnabled?"copyMove":"copy",r.dataTransfer.setData("application/ckeditor5-dragging-uid",_this161._draggingUid);var l=t.createSelection(_this161._draggedRange.toRange()),d=e.data.toView(t.getSelectedContent(l));o.fire("clipboardOutput",{dataTransfer:r.dataTransfer,content:d,method:n.name}),_this161.isEnabled||(_this161._draggedRange.detach(),_this161._draggedRange=null,_this161._draggingUid="");},{priority:"low"}),this.listenTo(o,"dragend",function(e,t){_this161._finalizeDragging(!t.dataTransfer.isCanceled&&"move"==t.dataTransfer.dropEffect);},{priority:"low"}),this.listenTo(o,"dragenter",function(){_this161.isEnabled&&n.focus();}),this.listenTo(o,"dragleave",function(){_this161._removeDropMarkerDelayed();}),this.listenTo(o,"dragging",function(t,i){if(!_this161.isEnabled)return void(i.dataTransfer.dropEffect="none");_this161._removeDropMarkerDelayed.cancel();var n=ou(e,i.targetRanges,i.target);_this161._draggedRange||(i.dataTransfer.dropEffect="copy"),So.isGecko||("copy"==i.dataTransfer.effectAllowed?i.dataTransfer.dropEffect="copy":["all","copyMove"].includes(i.dataTransfer.effectAllowed)&&(i.dataTransfer.dropEffect="move")),n&&_this161._updateDropMarkerThrottled(n);},{priority:"low"});}},{key:"_setupClipboardInputIntegration",value:function _setupClipboardInputIntegration(){var _this162=this;var e=this.editor,t=e.editing.view.document;this.listenTo(t,"clipboardInput",function(t,i){if("drop"!=i.method)return;var n=ou(e,i.targetRanges,i.target);if(_this162._removeDropMarker(),!n)return _this162._finalizeDragging(!1),void t.stop();_this162._draggedRange&&_this162._draggingUid!=i.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(_this162._draggedRange.detach(),_this162._draggedRange=null,_this162._draggingUid="");if("move"==ru(i.dataTransfer)&&_this162._draggedRange&&_this162._draggedRange.containsRange(n,!0))return _this162._finalizeDragging(!1),void t.stop();i.targetRanges=[e.editing.mapper.toViewRange(n)];},{priority:"high"});}},{key:"_setupContentInsertionIntegration",value:function _setupContentInsertionIntegration(){var _this163=this;var e=this.editor.plugins.get(_h);e.on("contentInsertion",function(e,t){if(!_this163.isEnabled||"drop"!==t.method)return;var i=t.targetRanges.map(function(e){return _this163.editor.editing.mapper.toModelRange(e);});_this163.editor.model.change(function(e){return e.setSelection(i);});},{priority:"high"}),e.on("contentInsertion",function(e,t){if(!_this163.isEnabled||"drop"!==t.method)return;var i="move"==ru(t.dataTransfer),n=!t.resultRange||!t.resultRange.isCollapsed;_this163._finalizeDragging(n&&i);},{priority:"lowest"});}},{key:"_setupDraggableAttributeHandling",value:function _setupDraggableAttributeHandling(){var _this164=this;var e=this.editor,t=e.editing.view,i=t.document;this.listenTo(i,"mousedown",function(n,o){if(So.isAndroid||!o)return;_this164._clearDraggableAttributesDelayed.cancel();var r=au(o.target);if(So.isBlink&&!e.isReadOnly&&!r&&!i.selection.isCollapsed){var _e243=i.selection.getSelectedElement();_e243&&Oh(_e243)||(r=i.selection.editableElement);}r&&(t.change(function(e){e.setAttribute("draggable","true",r);}),_this164._draggableElement=e.editing.mapper.toModelElement(r));}),this.listenTo(i,"mouseup",function(){So.isAndroid||_this164._clearDraggableAttributesDelayed();});}},{key:"_clearDraggableAttributes",value:function _clearDraggableAttributes(){var _this165=this;var e=this.editor.editing;e.view.change(function(t){_this165._draggableElement&&"$graveyard"!=_this165._draggableElement.root.rootName&&t.removeAttribute("draggable",e.mapper.toViewElement(_this165._draggableElement)),_this165._draggableElement=null;});}},{key:"_setupDropMarker",value:function _setupDropMarker(){var e=this.editor;e.conversion["for"]("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),e.conversion["for"]("editingDowncast").markerToElement({model:"drop-target",view:function view(t,_ref44){var i=_ref44.writer;if(e.model.schema.checkChild(t.markerRange.start,"$text"))return i.createUIElement("span",{"class":"ck ck-clipboard-drop-target-position"},function(e){var t=this.toDomElement(e);return t.innerHTML="&NoBreak;<span></span>&NoBreak;",t;});}});}},{key:"_updateDropMarker",value:function _updateDropMarker(e){var t=this.editor,i=t.model.markers;t.model.change(function(t){i.has("drop-target")?i.get("drop-target").getRange().isEqual(e)||t.updateMarker("drop-target",{range:e}):t.addMarker("drop-target",{range:e,usingOperation:!1,affectsData:!1});});}},{key:"_removeDropMarker",value:function _removeDropMarker(){var e=this.editor.model;this._removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),e.markers.has("drop-target")&&e.change(function(e){e.removeMarker("drop-target");});}},{key:"_finalizeDragging",value:function _finalizeDragging(e){var t=this.editor,i=t.model;this._removeDropMarker(),this._clearDraggableAttributes(),t.plugins.has("WidgetToolbarRepository")&&t.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",this._draggedRange&&(e&&this.isEnabled&&i.deleteContent(i.createSelection(this._draggedRange),{doNotAutoparagraph:!0}),this._draggedRange.detach(),this._draggedRange=null);}}],[{key:"pluginName",get:function get(){return"DragDrop";}},{key:"requires",get:function get(){return[_h,eu];}}]);return nu;}(Qe);function ou(e,t,i){var n=e.model,o=e.editing.mapper;var r=null;var s=t?t[0].start:null;if(i.is("uiElement")&&(i=i.parent),r=function(e,t){var i=e.model,n=e.editing.mapper;if(Oh(t))return i.createRangeOn(n.toModelElement(t));if(!t.is("editableElement")){var _e244=t.findAncestor(function(e){return Oh(e)||e.is("editableElement");});if(Oh(_e244))return i.createRangeOn(n.toModelElement(_e244));}return null;}(e,i),r)return r;var a=function(e,t){var i=e.editing.mapper,n=e.editing.view,o=i.toModelElement(t);if(o)return o;var r=n.createPositionBefore(t),s=i.findMappedViewAncestor(r);return i.toModelElement(s);}(e,i),c=s?o.toModelPosition(s):null;return c?(r=function(e,t,i){var n=e.model;if(!n.schema.checkChild(i,"$block"))return null;var o=n.createPositionAt(i,0),r=t.path.slice(0,o.path.length),s=n.createPositionFromPath(t.root,r).nodeAfter;if(s&&n.schema.isObject(s))return n.createRangeOn(s);return null;}(e,c,a),r||(r=n.schema.getNearestSelectionRange(c,So.isGecko?"forward":"backward"),r||function(e,t){var i=e.model;for(;t;){if(i.schema.isObject(t))return i.createRangeOn(t);t=t.parent;}}(e,c.parent))):function(e,t){var i=e.model,n=i.schema,o=i.createPositionAt(t,0);return n.getNearestSelectionRange(o,"forward");}(e,a);}function ru(e){return So.isGecko?e.dropEffect:["all","copyMove"].includes(e.effectAllowed)?"move":"copy";}function su(e,t){var i;function n(){for(var _len21=arguments.length,o=new Array(_len21),_key21=0;_key21<_len21;_key21++){o[_key21]=arguments[_key21];}n.cancel(),i=setTimeout(function(){return e.apply(void 0,o);},t);}return n.cancel=function(){clearTimeout(i);},n;}function au(e){if(e.is("editableElement"))return null;if(e.hasClass("ck-widget__selection-handle"))return e.findAncestor(Oh);if(Oh(e))return e;var t=e.findAncestor(function(e){return Oh(e)||e.is("editableElement");});return Oh(t)?t:null;}var cu=/*#__PURE__*/function(_Qe8){_inherits(cu,_Qe8);var _super90=_createSuper(cu);function cu(){_classCallCheck(this,cu);return _super90.apply(this,arguments);}_createClass(cu,[{key:"init",value:function init(){var e=this.editor,t=e.model,i=e.editing.view,n=i.document,o=t.document.selection;var r=!1;i.addObserver(wh),this.listenTo(n,"keydown",function(e,t){r=t.shiftKey;}),e.plugins.get(_h).on("contentInsertion",function(e,i){(r||function(e,t){if(e.childCount>1)return!1;var i=e.getChild(0);if(t.isObject(i))return!1;return 0==_toConsumableArray(i.getAttributeKeys()).length;}(i.content,t.schema))&&t.change(function(e){var n=Array.from(o.getAttributes()).filter(function(_ref45){var _ref46=_slicedToArray(_ref45,1),e=_ref46[0];return t.schema.getAttributeProperties(e).isFormatting;});o.isCollapsed||t.deleteContent(o,{doNotAutoparagraph:!0}),n.push.apply(n,_toConsumableArray(o.getAttributes()));var r=e.createRangeIn(i.content);var _iterator317=_createForOfIteratorHelper(r.getItems()),_step317;try{for(_iterator317.s();!(_step317=_iterator317.n()).done;){var _t221=_step317.value;_t221.is("$textProxy")&&e.setAttributes(n,_t221);}}catch(err){_iterator317.e(err);}finally{_iterator317.f();}});});}}],[{key:"pluginName",get:function get(){return"PastePlainText";}},{key:"requires",get:function get(){return[_h];}}]);return cu;}(Qe);var lu=/*#__PURE__*/function(_Qe9){_inherits(lu,_Qe9);var _super91=_createSuper(lu);function lu(){_classCallCheck(this,lu);return _super91.apply(this,arguments);}_createClass(lu,null,[{key:"pluginName",get:function get(){return"Clipboard";}},{key:"requires",get:function get(){return[_h,nu,cu];}}]);return lu;}(Qe);var du=/*#__PURE__*/function(_Ze4){_inherits(du,_Ze4);var _super92=_createSuper(du);function du(){_classCallCheck(this,du);return _super92.apply(this,arguments);}_createClass(du,[{key:"execute",value:function execute(){var _this166=this;var e=this.editor.model,t=e.document;e.change(function(i){!function(e,t,i){var n=i.isCollapsed,o=i.getFirstRange(),r=o.start.parent,s=o.end.parent,a=r==s;if(n){var _n148=vh(e.schema,i.getAttributes());hu(e,t,o.end),t.removeSelectionAttribute(i.getAttributeKeys()),t.setSelectionAttribute(_n148);}else{var _n149=!(o.start.isAtStart&&o.end.isAtEnd);e.deleteContent(i,{leaveUnmerged:_n149}),a?hu(e,t,i.focus):_n149&&t.setSelection(s,0);}}(e,i,t.selection),_this166.fire("afterExecute",{writer:i});});}},{key:"refresh",value:function refresh(){var e=this.editor.model,t=e.document;this.isEnabled=function(e,t){if(t.rangeCount>1)return!1;var i=t.anchor;if(!i||!e.checkChild(i,"softBreak"))return!1;var n=t.getFirstRange(),o=n.start.parent,r=n.end.parent;if((uu(o,e)||uu(r,e))&&o!==r)return!1;return!0;}(e.schema,t.selection);}}]);return du;}(Ze);function hu(e,t,i){var n=t.createElement("softBreak");e.insertContent(n,i),t.setSelection(n,"after");}function uu(e,t){return!e.is("rootElement")&&(t.isLimit(e)||uu(e.parent,t));}var gu=/*#__PURE__*/function(_Qe10){_inherits(gu,_Qe10);var _super93=_createSuper(gu);function gu(){_classCallCheck(this,gu);return _super93.apply(this,arguments);}_createClass(gu,[{key:"init",value:function init(){var e=this.editor,t=e.model.schema,i=e.conversion,n=e.editing.view,o=n.document;t.register("softBreak",{allowWhere:"$text",isInline:!0}),i["for"]("upcast").elementToElement({model:"softBreak",view:"br"}),i["for"]("downcast").elementToElement({model:"softBreak",view:function view(e,_ref47){var t=_ref47.writer;return t.createEmptyElement("br");}}),n.addObserver(Ah),e.commands.add("shiftEnter",new du(e)),this.listenTo(o,"enter",function(t,i){i.preventDefault(),i.isSoft&&(e.execute("shiftEnter"),n.scrollToTheSelection());},{priority:"low"});}}],[{key:"pluginName",get:function get(){return"ShiftEnter";}}]);return gu;}(Qe);var mu=/*#__PURE__*/function(_Ze5){_inherits(mu,_Ze5);var _super94=_createSuper(mu);function mu(){_classCallCheck(this,mu);return _super94.apply(this,arguments);}_createClass(mu,[{key:"execute",value:function execute(){var e=this.editor.model,t=e.document.selection;var i=e.schema.getLimitElement(t);if(t.containsEntireContent(i)||!fu(e.schema,i))do{if(i=i.parent,!i)return;}while(!fu(e.schema,i));e.change(function(e){e.setSelection(i,"in");});}}]);return mu;}(Ze);function fu(e,t){return e.isLimit(t)&&(e.checkChild(t,"$text")||e.checkChild(t,"paragraph"));}var pu=zo("Ctrl+A");var bu=/*#__PURE__*/function(_Qe11){_inherits(bu,_Qe11);var _super95=_createSuper(bu);function bu(){_classCallCheck(this,bu);return _super95.apply(this,arguments);}_createClass(bu,[{key:"init",value:function init(){var e=this.editor,t=e.editing.view.document;e.commands.add("selectAll",new mu(e)),this.listenTo(t,"keydown",function(t,i){Oo(i)===pu&&(e.execute("selectAll"),i.preventDefault());});}}],[{key:"pluginName",get:function get(){return"SelectAllEditing";}}]);return bu;}(Qe);var wu=/*#__PURE__*/function(_Qe12){_inherits(wu,_Qe12);var _super96=_createSuper(wu);function wu(){_classCallCheck(this,wu);return _super96.apply(this,arguments);}_createClass(wu,[{key:"init",value:function init(){var _this167=this;var e=this.editor;e.ui.componentFactory.add("selectAll",function(t){var i=e.commands.get("selectAll"),n=new ed(t),o=t.t;return n.set({label:o("Select all"),icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>',keystroke:"Ctrl+A",tooltip:!0}),n.bind("isOn","isEnabled").to(i,"value","isEnabled"),_this167.listenTo(n,"execute",function(){e.execute("selectAll"),e.editing.view.focus();}),n;});}}],[{key:"pluginName",get:function get(){return"SelectAllUI";}}]);return wu;}(Qe);var ku=/*#__PURE__*/function(_Qe13){_inherits(ku,_Qe13);var _super97=_createSuper(ku);function ku(){_classCallCheck(this,ku);return _super97.apply(this,arguments);}_createClass(ku,null,[{key:"requires",get:function get(){return[bu,wu];}},{key:"pluginName",get:function get(){return"SelectAll";}}]);return ku;}(Qe);var _u=/*#__PURE__*/function(_Ze6){_inherits(_u,_Ze6);var _super98=_createSuper(_u);function _u(e,t){var _this168;_classCallCheck(this,_u);_this168=_super98.call(this,e),_this168._buffer=new Th(e.model,t),_this168._batches=new WeakSet();return _this168;}_createClass(_u,[{key:"buffer",get:function get(){return this._buffer;}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_u.prototype),"destroy",this).call(this),this._buffer.destroy();}},{key:"execute",value:function execute(){var _this169=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=this.editor.model,i=t.document,n=e.text||"",o=n.length,r=e.range?t.createSelection(e.range):i.selection,s=e.resultRange;t.enqueueChange(this._buffer.batch,function(e){_this169._buffer.lock(),_this169._batches.add(_this169._buffer.batch),t.deleteContent(r),n&&t.insertContent(e.createText(n,i.selection.getAttributes()),r),s?e.setSelection(s):r.is("documentSelection")||e.setSelection(r),_this169._buffer.unlock(),_this169._buffer.input(o);});}}]);return _u;}(Ze);function vu(e){if(e.newChildren.length-e.oldChildren.length!=1)return;var t=function(e,t){var i=[];var n,o=0;return e.forEach(function(e){"equal"==e?(r(),o++):"insert"==e?(s("insert")?n.values.push(t[o]):(r(),n={type:"insert",index:o,values:[t[o]]}),o++):s("delete")?n.howMany++:(r(),n={type:"delete",index:o,howMany:1});}),r(),i;function r(){n&&(i.push(n),n=null);}function s(e){return n&&n.type==e;}}(gr(e.oldChildren,e.newChildren,yu),e.newChildren);if(t.length>1)return;var i=t[0];return i.values[0]&&i.values[0].is("$text")?i:void 0;}function yu(e,t){return e&&e.is("$text")&&t&&t.is("$text")?e.data===t.data:e===t;}var xu=/*#__PURE__*/function(){function xu(e){_classCallCheck(this,xu);this.editor=e,this.editing=this.editor.editing;}_createClass(xu,[{key:"handle",value:function handle(e,t){if(function(e){if(0==e.length)return!1;var _iterator318=_createForOfIteratorHelper(e),_step318;try{for(_iterator318.s();!(_step318=_iterator318.n()).done;){var _t222=_step318.value;if("children"===_t222.type&&!vu(_t222))return!0;}}catch(err){_iterator318.e(err);}finally{_iterator318.f();}return!1;}(e))this._handleContainerChildrenMutations(e,t);else{var _iterator319=_createForOfIteratorHelper(e),_step319;try{for(_iterator319.s();!(_step319=_iterator319.n()).done;){var _i245=_step319.value;this._handleTextMutation(_i245,t),this._handleTextNodeInsertion(_i245);}}catch(err){_iterator319.e(err);}finally{_iterator319.f();}}}},{key:"_handleContainerChildrenMutations",value:function _handleContainerChildrenMutations(e,t){var i=function(e){var t=e.map(function(e){return e.node;}).reduce(function(e,t){return e.getCommonAncestor(t,{includeSelf:!0});});if(!t)return;return t.getAncestors({includeSelf:!0,parentFirst:!0}).find(function(e){return e.is("containerElement")||e.is("rootElement");});}(e);if(!i)return;var n=this.editor.editing.view.domConverter.mapViewToDom(i),o=new Er(this.editor.editing.view.document),r=this.editor.data.toModel(o.domToView(n)).getChild(0),s=this.editor.editing.mapper.toModelElement(i);if(!s)return;var a=Array.from(r.getChildren()),c=Array.from(s.getChildren()),l=a[a.length-1],d=c[c.length-1],h=l&&l.is("element","softBreak"),u=d&&!d.is("element","softBreak");h&&u&&a.pop();var g=this.editor.model.schema;if(!Au(a,g)||!Au(c,g))return;var m=a.map(function(e){return e.is("$text")?e.data:"@";}).join("").replace(/\u00A0/g," "),f=c.map(function(e){return e.is("$text")?e.data:"@";}).join("").replace(/\u00A0/g," ");if(f===m)return;var p=gr(f,m),_Cu=Cu(p),b=_Cu.firstChangeAt,w=_Cu.insertions,k=_Cu.deletions;var _=null;t&&(_=this.editing.mapper.toModelRange(t.getFirstRange()));var v=m.substr(b,w),y=this.editor.model.createRange(this.editor.model.createPositionAt(s,b),this.editor.model.createPositionAt(s,b+k));this.editor.execute("input",{text:v,range:y,resultRange:_});}},{key:"_handleTextMutation",value:function _handleTextMutation(e,t){if("text"!=e.type)return;var i=e.newText.replace(/\u00A0/g," "),n=e.oldText.replace(/\u00A0/g," ");if(n===i)return;var o=gr(n,i),_Cu2=Cu(o),r=_Cu2.firstChangeAt,s=_Cu2.insertions,a=_Cu2.deletions;var c=null;t&&(c=this.editing.mapper.toModelRange(t.getFirstRange()));var l=this.editing.view.createPositionAt(e.node,r),d=this.editing.mapper.toModelPosition(l),h=this.editor.model.createRange(d,d.getShiftedBy(a)),u=i.substr(r,s);this.editor.execute("input",{text:u,range:h,resultRange:c});}},{key:"_handleTextNodeInsertion",value:function _handleTextNodeInsertion(e){if("children"!=e.type)return;var t=vu(e),i=this.editing.view.createPositionAt(e.node,t.index),n=this.editing.mapper.toModelPosition(i),o=t.values[0].data;this.editor.execute("input",{text:o.replace(/\u00A0/g," "),range:this.editor.model.createRange(n)});}}]);return xu;}();function Au(e,t){return e.every(function(e){return t.isInline(e);});}function Cu(e){var t=null,i=null;for(var _n150=0;_n150<e.length;_n150++){"equal"!=e[_n150]&&(t=null===t?_n150:t,i=_n150);}var n=0,o=0;for(var _r49=t;_r49<=i;_r49++){"insert"!=e[_r49]&&n++,"delete"!=e[_r49]&&o++;}return{insertions:o,deletions:n,firstChangeAt:t};}var Tu=/*#__PURE__*/function(_Qe14){_inherits(Tu,_Qe14);var _super99=_createSuper(Tu);function Tu(){_classCallCheck(this,Tu);return _super99.apply(this,arguments);}_createClass(Tu,[{key:"init",value:function init(){var e=this.editor,t=new _u(e,e.config.get("typing.undoStep")||20);e.commands.add("input",t),function(e){var t=null;var i=e.model,n=e.editing.view,o=e.commands.get("input");function r(e){var r=i.document,a=n.document.isComposing,c=t&&t.isEqual(r.selection);t=null,o.isEnabled&&(Yh(e)||r.selection.isCollapsed||a&&229===e.keyCode||!a&&229===e.keyCode&&c||s());}function s(){var e=o.buffer;e.lock();var t=e.batch;o._batches.add(t),i.enqueueChange(t,function(){i.deleteContent(i.document.selection);}),e.unlock();}So.isAndroid?n.document.on("beforeinput",function(e,t){return r(t);},{priority:"lowest"}):n.document.on("keydown",function(e,t){return r(t);},{priority:"lowest"}),n.document.on("compositionstart",function(){var e=i.document,t=1!==e.selection.rangeCount||e.selection.getFirstRange().isFlat;if(e.selection.isCollapsed||t)return;s();},{priority:"lowest"}),n.document.on("compositionend",function(){t=i.createSelection(i.document.selection);},{priority:"lowest"});}(e),function(e){e.editing.view.document.on("mutations",function(t,i,n){new xu(e).handle(i,n);});}(e);}},{key:"isInput",value:function isInput(e){return this.editor.commands.get("input")._batches.has(e);}}],[{key:"pluginName",get:function get(){return"Input";}}]);return Tu;}(Qe);var Eu=/*#__PURE__*/function(_Qe15){_inherits(Eu,_Qe15);var _super100=_createSuper(Eu);function Eu(){_classCallCheck(this,Eu);return _super100.apply(this,arguments);}_createClass(Eu,null,[{key:"requires",get:function get(){return[Tu,Sh];}},{key:"pluginName",get:function get(){return"Typing";}}]);return Eu;}(Qe);function Iu(e,t){var i=e.start;return{text:Array.from(e.getItems()).reduce(function(e,n){return n.is("$text")||n.is("$textProxy")?e+n.data:(i=t.createPositionAfter(n),"");},""),range:t.createRange(i,e.end)};}var Su=/*#__PURE__*/function(){function Su(e,t){var _this170=this;_classCallCheck(this,Su);this.model=e,this.testCallback=t,this.hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",function(){_this170.isEnabled?_this170._startListening():(_this170.stopListening(e.document.selection),_this170.stopListening(e.document));}),this._startListening();}_createClass(Su,[{key:"_startListening",value:function _startListening(){var _this171=this;var e=this.model.document;this.listenTo(e.selection,"change:range",function(t,_ref48){var i=_ref48.directChange;i&&(e.selection.isCollapsed?_this171._evaluateTextBeforeSelection("selection"):_this171.hasMatch&&(_this171.fire("unmatched"),_this171.hasMatch=!1));}),this.listenTo(e,"change:data",function(e,t){"transparent"!=t.type&&_this171._evaluateTextBeforeSelection("data",{batch:t});});}},{key:"_evaluateTextBeforeSelection",value:function _evaluateTextBeforeSelection(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=this.model,n=i.document.selection,o=i.createRange(i.createPositionAt(n.focus.parent,0),n.focus),_Iu=Iu(o,i),r=_Iu.text,s=_Iu.range,a=this.testCallback(r);if(!a&&this.hasMatch&&this.fire("unmatched"),this.hasMatch=!!a,a){var _i246=Object.assign(t,{text:r,range:s});"object"==_typeof(a)&&Object.assign(_i246,a),this.fire("matched:"+e,_i246);}}}]);return Su;}();Ke(Su,Ue);var Pu=/*#__PURE__*/function(_Qe16){_inherits(Pu,_Qe16);var _super101=_createSuper(Pu);function Pu(e){var _this172;_classCallCheck(this,Pu);_this172=_super101.call(this,e),_this172.attributes=new Set(),_this172._overrideUid=null;return _this172;}_createClass(Pu,[{key:"init",value:function init(){var _this173=this;var e=this.editor,t=e.model,i=e.editing.view,n=e.locale,o=t.document.selection;this.listenTo(i.document,"arrowKey",function(e,t){if(!o.isCollapsed)return;if(t.shiftKey||t.altKey||t.ctrlKey)return;var i=t.keyCode==No.arrowright,r=t.keyCode==No.arrowleft;if(!i&&!r)return;var s=n.contentLanguageDirection;var a=!1;a="ltr"===s&&i||"rtl"===s&&r?_this173._handleForwardMovement(t):_this173._handleBackwardMovement(t),!0===a&&e.stop();},{context:"$text",priority:"highest"}),this._isNextGravityRestorationSkipped=!1,this.listenTo(o,"change:range",function(e,t){_this173._isNextGravityRestorationSkipped?_this173._isNextGravityRestorationSkipped=!1:_this173._isGravityOverridden&&(!t.directChange&&Ou(o.getFirstPosition(),_this173.attributes)||_this173._restoreGravity());});}},{key:"registerAttribute",value:function registerAttribute(e){this.attributes.add(e);}},{key:"_handleForwardMovement",value:function _handleForwardMovement(e){var t=this.attributes,i=this.editor.model.document.selection,n=i.getFirstPosition();return!this._isGravityOverridden&&(!n.isAtStart||!Mu(i,t))&&(Ou(n,t)?(Ru(e),this._overrideGravity(),!0):void 0);}},{key:"_handleBackwardMovement",value:function _handleBackwardMovement(e){var t=this.attributes,i=this.editor.model,n=i.document.selection,o=n.getFirstPosition();return this._isGravityOverridden?(Ru(e),this._restoreGravity(),Nu(i,t,o),!0):o.isAtStart?!!Mu(n,t)&&(Ru(e),Nu(i,t,o),!0):function(e,t){return Ou(e.getShiftedBy(-1),t);}(o,t)?o.isAtEnd&&!Mu(n,t)&&Ou(o,t)?(Ru(e),Nu(i,t,o),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1):void 0;}},{key:"_isGravityOverridden",get:function get(){return!!this._overrideUid;}},{key:"_overrideGravity",value:function _overrideGravity(){this._overrideUid=this.editor.model.change(function(e){return e.overrideSelectionGravity();});}},{key:"_restoreGravity",value:function _restoreGravity(){var _this174=this;this.editor.model.change(function(e){e.restoreSelectionGravity(_this174._overrideUid),_this174._overrideUid=null;});}}],[{key:"pluginName",get:function get(){return"TwoStepCaretMovement";}}]);return Pu;}(Qe);function Mu(e,t){var _iterator320=_createForOfIteratorHelper(t),_step320;try{for(_iterator320.s();!(_step320=_iterator320.n()).done;){var _i247=_step320.value;if(e.hasAttribute(_i247))return!0;}}catch(err){_iterator320.e(err);}finally{_iterator320.f();}return!1;}function Nu(e,t,i){var n=i.nodeBefore;e.change(function(e){n?e.setSelectionAttribute(n.getAttributes()):e.removeSelectionAttribute(t);});}function Ru(e){e.preventDefault();}function Ou(e,t){var i=e.nodeBefore,n=e.nodeAfter;var _iterator321=_createForOfIteratorHelper(t),_step321;try{for(_iterator321.s();!(_step321=_iterator321.n()).done;){var _e245=_step321.value;var _t223=i?i.getAttribute(_e245):void 0;if((n?n.getAttribute(_e245):void 0)!==_t223)return!0;}}catch(err){_iterator321.e(err);}finally{_iterator321.f();}return!1;}var zu=/[\\^$.*+?()[\]{}|]/g,Du=RegExp(zu.source);var Lu=function Lu(e){return(e=Pn(e))&&Du.test(e)?e.replace(zu,"\\$&"):e;};var Vu={copyright:{from:"(c)",to:""},registeredTrademark:{from:"(r)",to:""},trademark:{from:"(tm)",to:""},oneHalf:{from:"1/2",to:""},oneThird:{from:"1/3",to:""},twoThirds:{from:"2/3",to:""},oneForth:{from:"1/4",to:""},threeQuarters:{from:"3/4",to:""},lessThanOrEqual:{from:"<=",to:""},greaterThanOrEqual:{from:">=",to:""},notEqual:{from:"!=",to:""},arrowLeft:{from:"<-",to:""},arrowRight:{from:"->",to:""},horizontalEllipsis:{from:"...",to:""},enDash:{from:/(^| )(--)( )$/,to:[null,"",null]},emDash:{from:/(^| )(---)( )$/,to:[null,"",null]},quotesPrimary:{from:Wu('"'),to:[null,"",null,""]},quotesSecondary:{from:Wu("'"),to:[null,"",null,""]},quotesPrimaryEnGb:{from:Wu("'"),to:[null,"",null,""]},quotesSecondaryEnGb:{from:Wu('"'),to:[null,"",null,""]},quotesPrimaryPl:{from:Wu('"'),to:[null,"",null,""]},quotesSecondaryPl:{from:Wu("'"),to:[null,"",null,""]}},ju={symbols:["copyright","registeredTrademark","trademark"],mathematical:["oneHalf","oneThird","twoThirds","oneForth","threeQuarters","lessThanOrEqual","greaterThanOrEqual","notEqual","arrowLeft","arrowRight"],typography:["horizontalEllipsis","enDash","emDash"],quotes:["quotesPrimary","quotesSecondary"]},Bu=["symbols","mathematical","typography","quotes"];function Fu(e){return"string"==typeof e?new RegExp("(".concat(Lu(e),")$")):e;}function Hu(e){return"string"==typeof e?function(){return[e];}:e instanceof Array?function(){return e;}:e;}function Uu(e){return(e.textNode?e.textNode:e.nodeAfter).getAttributes();}function Wu(e){return new RegExp("(^|\\s)(".concat(e,")([^").concat(e,"]*)(").concat(e,")$"));}function qu(e,t,i,n){return n.createRange($u(e,t,i,!0,n),$u(e,t,i,!1,n));}function $u(e,t,i,n,o){var r=e.textNode||(n?e.nodeBefore:e.nodeAfter),s=null;for(;r&&r.getAttribute(t)==i;){s=r,r=n?r.previousSibling:r.nextSibling;}return s?o.createPositionAt(s,n?"before":"after"):e;}var Yu=/*#__PURE__*/function(_Ze7){_inherits(Yu,_Ze7);var _super102=_createSuper(Yu);function Yu(e){var _this175;_classCallCheck(this,Yu);_this175=_super102.call(this,e),_this175._stack=[],_this175._createdBatches=new WeakSet(),_this175.refresh(),_this175.listenTo(e.data,"set",function(e,t){t[1]=_objectSpread({},t[1]);var i=t[1];i.batchType||(i.batchType="transparent");},{priority:"high"}),_this175.listenTo(e.data,"set",function(e,t){"transparent"===t[1].batchType&&_this175.clearStack();});return _this175;}_createClass(Yu,[{key:"refresh",value:function refresh(){this.isEnabled=this._stack.length>0;}},{key:"addBatch",value:function addBatch(e){var t=this.editor.model.document.selection,i={ranges:t.hasOwnRange?Array.from(t.getRanges()):[],isBackward:t.isBackward};this._stack.push({batch:e,selection:i}),this.refresh();}},{key:"clearStack",value:function clearStack(){this._stack=[],this.refresh();}},{key:"_restoreSelection",value:function _restoreSelection(e,t,i){var n=this.editor.model,o=n.document,r=[],s=e.map(function(e){return e.getTransformedByOperations(i);}),a=s.flat();var _iterator322=_createForOfIteratorHelper(s),_step322;try{for(_iterator322.s();!(_step322=_iterator322.n()).done;){var _e246=_step322.value;var _t224=_e246.filter(function(e){return e.root!=o.graveyard;}).filter(function(e){return!Ku(e,a);});_t224.length&&(Gu(_t224),r.push(_t224[0]));}}catch(err){_iterator322.e(err);}finally{_iterator322.f();}r.length&&n.change(function(e){e.setSelection(r,{backward:t});});}},{key:"_undo",value:function _undo(e,t){var i=this.editor.model,n=i.document;this._createdBatches.add(t);var o=e.operations.slice().filter(function(e){return e.isDocumentOperation;});o.reverse();var _iterator323=_createForOfIteratorHelper(o),_step323;try{for(_iterator323.s();!(_step323=_iterator323.n()).done;){var _e247=_step323.value;var _o91=_e247.baseVersion+1,_r50=Array.from(n.history.getOperations(_o91)),_s28=oh([_e247.getReversed()],_r50,{useRelations:!0,document:this.editor.model.document,padWithNoOps:!1,forceWeakRemove:!0}).operationsA;var _iterator324=_createForOfIteratorHelper(_s28),_step324;try{for(_iterator324.s();!(_step324=_iterator324.n()).done;){var _o92=_step324.value;t.addOperation(_o92),i.applyOperation(_o92),n.history.setOperationAsUndone(_e247,_o92);}}catch(err){_iterator324.e(err);}finally{_iterator324.f();}}}catch(err){_iterator323.e(err);}finally{_iterator323.f();}}}]);return Yu;}(Ze);function Gu(e){e.sort(function(e,t){return e.start.isBefore(t.start)?-1:1;});for(var _t225=1;_t225<e.length;_t225++){var _i248=e[_t225-1].getJoined(e[_t225],!0);_i248&&(_t225--,e.splice(_t225,2,_i248));}}function Ku(e,t){return t.some(function(t){return t!==e&&t.containsRange(e,!0);});}var Qu=/*#__PURE__*/function(_Yu){_inherits(Qu,_Yu);var _super103=_createSuper(Qu);function Qu(){_classCallCheck(this,Qu);return _super103.apply(this,arguments);}_createClass(Qu,[{key:"execute",value:function execute(){var _this176=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var t=e?this._stack.findIndex(function(t){return t.batch==e;}):this._stack.length-1,i=this._stack.splice(t,1)[0],n=this.editor.model.createBatch("transparent");this.editor.model.enqueueChange(n,function(){_this176._undo(i.batch,n);var e=_this176.editor.model.document.history.getOperations(i.batch.baseVersion);_this176._restoreSelection(i.selection.ranges,i.selection.isBackward,e),_this176.fire("revert",i.batch,n);}),this.refresh();}}]);return Qu;}(Yu);var Ju=/*#__PURE__*/function(_Yu2){_inherits(Ju,_Yu2);var _super104=_createSuper(Ju);function Ju(){_classCallCheck(this,Ju);return _super104.apply(this,arguments);}_createClass(Ju,[{key:"execute",value:function execute(){var _this177=this;var e=this._stack.pop(),t=this.editor.model.createBatch("transparent");this.editor.model.enqueueChange(t,function(){var i=e.batch.operations[e.batch.operations.length-1].baseVersion+1,n=_this177.editor.model.document.history.getOperations(i);_this177._restoreSelection(e.selection.ranges,e.selection.isBackward,n),_this177._undo(e.batch,t);}),this.refresh();}}]);return Ju;}(Yu);var Zu=/*#__PURE__*/function(_Qe17){_inherits(Zu,_Qe17);var _super105=_createSuper(Zu);function Zu(e){var _this178;_classCallCheck(this,Zu);_this178=_super105.call(this,e),_this178._batchRegistry=new WeakSet();return _this178;}_createClass(Zu,[{key:"init",value:function init(){var _this179=this;var e=this.editor;this._undoCommand=new Qu(e),this._redoCommand=new Ju(e),e.commands.add("undo",this._undoCommand),e.commands.add("redo",this._redoCommand),this.listenTo(e.model,"applyOperation",function(e,t){var i=t[0];if(!i.isDocumentOperation)return;var n=i.batch,o=_this179._redoCommand._createdBatches.has(n),r=_this179._undoCommand._createdBatches.has(n);_this179._batchRegistry.has(n)||"transparent"==n.type&&!o&&!r||(o?_this179._undoCommand.addBatch(n):r||(_this179._undoCommand.addBatch(n),_this179._redoCommand.clearStack()),_this179._batchRegistry.add(n));},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",function(e,t,i){_this179._redoCommand.addBatch(i);}),e.keystrokes.set("CTRL+Z","undo"),e.keystrokes.set("CTRL+Y","redo"),e.keystrokes.set("CTRL+SHIFT+Z","redo");}}],[{key:"pluginName",get:function get(){return"UndoEditing";}}]);return Zu;}(Qe);var Xu='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',eg='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>';var tg=/*#__PURE__*/function(_Qe18){_inherits(tg,_Qe18);var _super106=_createSuper(tg);function tg(){_classCallCheck(this,tg);return _super106.apply(this,arguments);}_createClass(tg,[{key:"init",value:function init(){var e=this.editor,t=e.locale,i=e.t,n="ltr"==t.uiLanguageDirection?Xu:eg,o="ltr"==t.uiLanguageDirection?eg:Xu;this._addButton("undo",i("Undo"),"CTRL+Z",n),this._addButton("redo",i("Redo"),"CTRL+Y",o);}},{key:"_addButton",value:function _addButton(e,t,i,n){var _this180=this;var o=this.editor;o.ui.componentFactory.add(e,function(r){var s=o.commands.get(e),a=new ed(r);return a.set({label:t,icon:n,keystroke:i,tooltip:!0}),a.bind("isEnabled").to(s,"isEnabled"),_this180.listenTo(a,"execute",function(){o.execute(e),o.editing.view.focus();}),a;});}}],[{key:"pluginName",get:function get(){return"UndoUI";}}]);return tg;}(Qe);var ig=/*#__PURE__*/function(_Qe19){_inherits(ig,_Qe19);var _super107=_createSuper(ig);function ig(){_classCallCheck(this,ig);return _super107.apply(this,arguments);}_createClass(ig,null,[{key:"requires",get:function get(){return[Zu,tg];}},{key:"pluginName",get:function get(){return"Undo";}}]);return ig;}(Qe);var ng=/*#__PURE__*/function(){function ng(){var _this181=this;_classCallCheck(this,ng);var e=new window.FileReader();this._reader=e,this._data=void 0,this.set("loaded",0),e.onprogress=function(e){_this181.loaded=e.loaded;};}_createClass(ng,[{key:"error",get:function get(){return this._reader.error;}},{key:"data",get:function get(){return this._data;}},{key:"read",value:function read(e){var _this182=this;var t=this._reader;return this.total=e.size,new Promise(function(i,n){t.onload=function(){var e=t.result;_this182._data=e,i(e);},t.onerror=function(){n("error");},t.onabort=function(){n("aborted");},_this182._reader.readAsDataURL(e);});}},{key:"abort",value:function abort(){this._reader.abort();}}]);return ng;}();Ke(ng,Ue);var og=/*#__PURE__*/function(_Qe20){_inherits(og,_Qe20);var _super108=_createSuper(og);function og(){_classCallCheck(this,og);return _super108.apply(this,arguments);}_createClass(og,[{key:"init",value:function init(){var _this183=this;this.loaders=new Zi(),this.loaders.on("add",function(){return _this183._updatePendingAction();}),this.loaders.on("remove",function(){return _this183._updatePendingAction();}),this._loadersMap=new Map(),this._pendingAction=null,this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",function(e,t){return t?e/t*100:0;});}},{key:"getLoader",value:function getLoader(e){return this._loadersMap.get(e)||null;}},{key:"createLoader",value:function createLoader(e){var _this184=this;if(!this.createUploadAdapter)return Object(c.b)("filerepository-no-upload-adapter"),null;var t=new rg(Promise.resolve(e),this.createUploadAdapter);return this.loaders.add(t),this._loadersMap.set(e,t),e instanceof Promise&&t.file.then(function(e){_this184._loadersMap.set(e,t);})["catch"](function(){}),t.on("change:uploaded",function(){var e=0;var _iterator325=_createForOfIteratorHelper(_this184.loaders),_step325;try{for(_iterator325.s();!(_step325=_iterator325.n()).done;){var _t226=_step325.value;e+=_t226.uploaded;}}catch(err){_iterator325.e(err);}finally{_iterator325.f();}_this184.uploaded=e;}),t.on("change:uploadTotal",function(){var e=0;var _iterator326=_createForOfIteratorHelper(_this184.loaders),_step326;try{for(_iterator326.s();!(_step326=_iterator326.n()).done;){var _t227=_step326.value;_t227.uploadTotal&&(e+=_t227.uploadTotal);}}catch(err){_iterator326.e(err);}finally{_iterator326.f();}_this184.uploadTotal=e;}),t;}},{key:"destroyLoader",value:function destroyLoader(e){var _this185=this;var t=e instanceof rg?e:this.getLoader(e);t._destroy(),this.loaders.remove(t),this._loadersMap.forEach(function(e,i){e===t&&_this185._loadersMap["delete"](i);});}},{key:"_updatePendingAction",value:function _updatePendingAction(){var e=this.editor.plugins.get(Cl);if(this.loaders.length){if(!this._pendingAction){var _t228=this.editor.t,_i249=function _i249(e){return"".concat(_t228("Upload in progress")," ").concat(parseInt(e),"%.");};this._pendingAction=e.add(_i249(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",_i249);}}else e.remove(this._pendingAction),this._pendingAction=null;}}],[{key:"pluginName",get:function get(){return"FileRepository";}},{key:"requires",get:function get(){return[Cl];}}]);return og;}(Qe);Ke(og,Ue);var rg=/*#__PURE__*/function(){function rg(e,t){_classCallCheck(this,rg);this.id=s(),this._filePromiseWrapper=this._createFilePromiseWrapper(e),this._adapter=t(this),this._reader=new ng(),this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",function(e,t){return t?e/t*100:0;}),this.set("uploadResponse",null);}_createClass(rg,[{key:"file",get:function get(){var _this186=this;return this._filePromiseWrapper?this._filePromiseWrapper.promise.then(function(e){return _this186._filePromiseWrapper?e:null;}):Promise.resolve(null);}},{key:"data",get:function get(){return this._reader.data;}},{key:"read",value:function read(){var _this187=this;if("idle"!=this.status)throw new c.a("filerepository-read-wrong-status",this);return this.status="reading",this.file.then(function(e){return _this187._reader.read(e);}).then(function(e){if("reading"!==_this187.status)throw _this187.status;return _this187.status="idle",e;})["catch"](function(e){if("aborted"===e)throw _this187.status="aborted","aborted";throw _this187.status="error",_this187._reader.error?_this187._reader.error:e;});}},{key:"upload",value:function upload(){var _this188=this;if("idle"!=this.status)throw new c.a("filerepository-upload-wrong-status",this);return this.status="uploading",this.file.then(function(){return _this188._adapter.upload();}).then(function(e){return _this188.uploadResponse=e,_this188.status="idle",e;})["catch"](function(e){if("aborted"===_this188.status)throw"aborted";throw _this188.status="error",e;});}},{key:"abort",value:function abort(){var e=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?"reading"==e?this._reader.abort():"uploading"==e&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise["catch"](function(){}),this._filePromiseWrapper.rejecter("aborted")),this._destroy();}},{key:"_destroy",value:function _destroy(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0;}},{key:"_createFilePromiseWrapper",value:function _createFilePromiseWrapper(e){var t={};return t.promise=new Promise(function(i,n){t.rejecter=n,t.isFulfilled=!1,e.then(function(e){t.isFulfilled=!0,i(e);})["catch"](function(e){t.isFulfilled=!0,n(e);});}),t;}}]);return rg;}();Ke(rg,Ue);var sg=/*#__PURE__*/function(_Ml23){_inherits(sg,_Ml23);var _super109=_createSuper(sg);function sg(e){var _this189;_classCallCheck(this,sg);_this189=_super109.call(this,e),_this189.buttonView=new ed(e),_this189._fileInputView=new ag(e),_this189._fileInputView.bind("acceptedType").to(_assertThisInitialized(_this189)),_this189._fileInputView.bind("allowMultipleFiles").to(_assertThisInitialized(_this189)),_this189._fileInputView.delegate("done").to(_assertThisInitialized(_this189)),_this189.setTemplate({tag:"span",attributes:{"class":"ck-file-dialog-button"},children:[_this189.buttonView,_this189._fileInputView]}),_this189.buttonView.on("execute",function(){_this189._fileInputView.open();});return _this189;}_createClass(sg,[{key:"focus",value:function focus(){this.buttonView.focus();}}]);return sg;}(Ml);var ag=/*#__PURE__*/function(_Ml24){_inherits(ag,_Ml24);var _super110=_createSuper(ag);function ag(e){var _this190;_classCallCheck(this,ag);_this190=_super110.call(this,e),_this190.set("acceptedType"),_this190.set("allowMultipleFiles",!1);var t=_this190.bindTemplate;_this190.setTemplate({tag:"input",attributes:{"class":["ck-hidden"],type:"file",tabindex:"-1",accept:t.to("acceptedType"),multiple:t.to("allowMultipleFiles")},on:{change:t.to(function(){_this190.element&&_this190.element.files&&_this190.element.files.length&&_this190.fire("done",_this190.element.files),_this190.element.value="";})}});return _this190;}_createClass(ag,[{key:"open",value:function open(){this.element.click();}}]);return ag;}(Ml);function cg(){var e=function(e){e=e.toLowerCase();var t=document.cookie.split(";");var _iterator327=_createForOfIteratorHelper(t),_step327;try{for(_iterator327.s();!(_step327=_iterator327.n()).done;){var _i250=_step327.value;var _t229=_i250.split("=");if(decodeURIComponent(_t229[0].trim().toLowerCase())===e)return decodeURIComponent(_t229[1]);}}catch(err){_iterator327.e(err);}finally{_iterator327.f();}return null;}("ckCsrfToken");var t,i;return e&&40==e.length||(e=function(e){var t="";var i=new Uint8Array(e);window.crypto.getRandomValues(i);for(var _e248=0;_e248<i.length;_e248++){var _n151="abcdefghijklmnopqrstuvwxyz0123456789".charAt(i[_e248]%"abcdefghijklmnopqrstuvwxyz0123456789".length);t+=Math.random()>.5?_n151.toUpperCase():_n151;}return t;}(40),t="ckCsrfToken",i=e,document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(i)+";path=/"),e;}var lg=/*#__PURE__*/function(){function lg(e,t,i){_classCallCheck(this,lg);this.loader=e,this.url=t,this.t=i;}_createClass(lg,[{key:"upload",value:function upload(){var _this191=this;return this.loader.file.then(function(e){return new Promise(function(t,i){_this191._initRequest(),_this191._initListeners(t,i,e),_this191._sendRequest(e);});});}},{key:"abort",value:function abort(){this.xhr&&this.xhr.abort();}},{key:"_initRequest",value:function _initRequest(){var e=this.xhr=new XMLHttpRequest();e.open("POST",this.url,!0),e.responseType="json";}},{key:"_initListeners",value:function _initListeners(e,t,i){var n=this.xhr,o=this.loader,r=(0,this.t)("Cannot upload file:")+" ".concat(i.name,".");n.addEventListener("error",function(){return t(r);}),n.addEventListener("abort",function(){return t();}),n.addEventListener("load",function(){var i=n.response;if(!i||!i.uploaded)return t(i&&i.error&&i.error.message?i.error.message:r);e({"default":i.url});}),n.upload&&n.upload.addEventListener("progress",function(e){e.lengthComputable&&(o.uploadTotal=e.total,o.uploaded=e.loaded);});}},{key:"_sendRequest",value:function _sendRequest(e){var t=new FormData();t.append("upload",e),t.append("ckCsrfToken",cg()),this.xhr.send(t);}}]);return lg;}();function dg(e,t,i,n){var o,r=null;"function"==typeof n?o=n:(r=e.commands.get(n),o=function o(){e.execute(n);}),e.model.document.on("change:data",function(s,a){if(r&&!r.isEnabled||!t.isEnabled)return;var c=Ns(e.model.document.selection.getRanges());if(!c.isCollapsed)return;if("transparent"==a.type)return;var l=Array.from(e.model.document.differ.getChanges()),d=l[0];if(1!=l.length||"insert"!==d.type||"$text"!=d.name||1!=d.length)return;var h=d.position.parent;if(h.is("element","codeBlock"))return;if(h.is("element","listItem")&&"function"!=typeof n&&!["numberedList","bulletedList","todoList"].includes(n))return;if(r&&!0===r.value)return;var u=h.getChild(0),g=e.model.createRangeOn(u);if(!g.containsRange(c)&&!c.end.isEqual(g.end))return;var m=i.exec(u.data.substr(0,c.end.offset));m&&e.model.enqueueChange(function(t){var i=t.createPositionAt(h,0),n=t.createPositionAt(h,m[0].length),r=new ba(i,n);if(!1!==o({match:m})){t.remove(r);var _i251=e.model.document.selection.getFirstRange(),_n152=t.createRangeIn(h);!h.isEmpty||_n152.isEqual(_i251)||_n152.containsRange(_i251,!0)||t.remove(h);}r.detach();});});}function hg(e,t,i,n){var o,r;i instanceof RegExp?o=i:r=i,r=r||function(e){var t;var i=[],n=[];for(;null!==(t=o.exec(e))&&!(t&&t.length<4);){var _t230=t,_e249=_t230.index,_o93=_t230[1],_r51=_t230[2],_s29=_t230[3];var _a18=_o93+_r51+_s29;_e249+=t[0].length-_a18.length;var _c10=[_e249,_e249+_o93.length],_l5=[_e249+_o93.length+_r51.length,_e249+_o93.length+_r51.length+_s29.length];i.push(_c10),i.push(_l5),n.push([_e249+_o93.length,_e249+_o93.length+_r51.length]);}return{remove:i,format:n};},e.model.document.on("change:data",function(i,o){if("transparent"==o.type||!t.isEnabled)return;var s=e.model,a=s.document.selection;if(!a.isCollapsed)return;var c=Array.from(s.document.differ.getChanges()),l=c[0];if(1!=c.length||"insert"!==l.type||"$text"!=l.name||1!=l.length)return;var d=a.focus,h=d.parent,_ref49=function(e,t){var i=e.start;return{text:Array.from(e.getItems()).reduce(function(e,n){return!n.is("$text")&&!n.is("$textProxy")||n.getAttribute("code")?(i=t.createPositionAfter(n),""):e+n.data;},""),range:t.createRange(i,e.end)};}(s.createRange(s.createPositionAt(h,0),d),s),u=_ref49.text,g=_ref49.range,m=r(u),f=ug(g.start,m.format,s),p=ug(g.start,m.remove,s);f.length&&p.length&&s.enqueueChange(function(e){if(!1!==n(e,f)){var _iterator328=_createForOfIteratorHelper(p.reverse()),_step328;try{for(_iterator328.s();!(_step328=_iterator328.n()).done;){var _t231=_step328.value;e.remove(_t231);}}catch(err){_iterator328.e(err);}finally{_iterator328.f();}}});});}function ug(e,t,i){return t.filter(function(e){return void 0!==e[0]&&void 0!==e[1];}).map(function(t){return i.createRange(e.getShiftedBy(t[0]),e.getShiftedBy(t[1]));});}function gg(e,t){return function(i,n){if(!e.commands.get(t).isEnabled)return!1;var o=e.model.schema.getValidRanges(n,t);var _iterator329=_createForOfIteratorHelper(o),_step329;try{for(_iterator329.s();!(_step329=_iterator329.n()).done;){var _e250=_step329.value;i.setAttribute(t,!0,_e250);}}catch(err){_iterator329.e(err);}finally{_iterator329.f();}i.removeSelectionAttribute(t);};}var mg=/*#__PURE__*/function(_Ze8){_inherits(mg,_Ze8);var _super111=_createSuper(mg);function mg(e,t){var _this192;_classCallCheck(this,mg);_this192=_super111.call(this,e),_this192.attributeKey=t;return _this192;}_createClass(mg,[{key:"refresh",value:function refresh(){var e=this.editor.model,t=e.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey);}},{key:"execute",value:function execute(){var _this193=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=this.editor.model,i=t.document.selection,n=void 0===e.forceValue?!this.value:e.forceValue;t.change(function(e){if(i.isCollapsed)n?e.setSelectionAttribute(_this193.attributeKey,!0):e.removeSelectionAttribute(_this193.attributeKey);else{var _o94=t.schema.getValidRanges(i.getRanges(),_this193.attributeKey);var _iterator330=_createForOfIteratorHelper(_o94),_step330;try{for(_iterator330.s();!(_step330=_iterator330.n()).done;){var _t232=_step330.value;n?e.setAttribute(_this193.attributeKey,n,_t232):e.removeAttribute(_this193.attributeKey,_t232);}}catch(err){_iterator330.e(err);}finally{_iterator330.f();}}});}},{key:"_getValueFromFirstAllowedNode",value:function _getValueFromFirstAllowedNode(){var e=this.editor.model,t=e.schema,i=e.document.selection;if(i.isCollapsed)return i.hasAttribute(this.attributeKey);var _iterator331=_createForOfIteratorHelper(i.getRanges()),_step331;try{for(_iterator331.s();!(_step331=_iterator331.n()).done;){var _e251=_step331.value;var _iterator332=_createForOfIteratorHelper(_e251.getItems()),_step332;try{for(_iterator332.s();!(_step332=_iterator332.n()).done;){var _i252=_step332.value;if(t.checkAttribute(_i252,this.attributeKey))return _i252.hasAttribute(this.attributeKey);}}catch(err){_iterator332.e(err);}finally{_iterator332.f();}}}catch(err){_iterator331.e(err);}finally{_iterator331.f();}return!1;}}]);return mg;}(Ze);var fg=/*#__PURE__*/function(_Qe21){_inherits(fg,_Qe21);var _super112=_createSuper(fg);function fg(){_classCallCheck(this,fg);return _super112.apply(this,arguments);}_createClass(fg,[{key:"init",value:function init(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:"bold"}),e.model.schema.setAttributeProperties("bold",{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:"bold",view:"strong",upcastAlso:["b",function(e){var t=e.getStyle("font-weight");return t?"bold"==t||Number(t)>=600?{name:!0,styles:["font-weight"]}:void 0:null;}]}),e.commands.add("bold",new mg(e,"bold")),e.keystrokes.set("CTRL+B","bold");}}],[{key:"pluginName",get:function get(){return"BoldEditing";}}]);return fg;}(Qe);var pg=/*#__PURE__*/function(_Qe22){_inherits(pg,_Qe22);var _super113=_createSuper(pg);function pg(){_classCallCheck(this,pg);return _super113.apply(this,arguments);}_createClass(pg,[{key:"init",value:function init(){var _this194=this;var e=this.editor,t=e.t;e.ui.componentFactory.add("bold",function(i){var n=e.commands.get("bold"),o=new ed(i);return o.set({label:t("Bold"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',keystroke:"CTRL+B",tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(n,"value","isEnabled"),_this194.listenTo(o,"execute",function(){e.execute("bold"),e.editing.view.focus();}),o;});}}],[{key:"pluginName",get:function get(){return"BoldUI";}}]);return pg;}(Qe);var bg=/*#__PURE__*/function(_Qe23){_inherits(bg,_Qe23);var _super114=_createSuper(bg);function bg(){_classCallCheck(this,bg);return _super114.apply(this,arguments);}_createClass(bg,[{key:"init",value:function init(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:"italic"}),e.model.schema.setAttributeProperties("italic",{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:"italic",view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),e.commands.add("italic",new mg(e,"italic")),e.keystrokes.set("CTRL+I","italic");}}],[{key:"pluginName",get:function get(){return"ItalicEditing";}}]);return bg;}(Qe);var wg=/*#__PURE__*/function(_Qe24){_inherits(wg,_Qe24);var _super115=_createSuper(wg);function wg(){_classCallCheck(this,wg);return _super115.apply(this,arguments);}_createClass(wg,[{key:"init",value:function init(){var _this195=this;var e=this.editor,t=e.t;e.ui.componentFactory.add("italic",function(i){var n=e.commands.get("italic"),o=new ed(i);return o.set({label:t("Italic"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>',keystroke:"CTRL+I",tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(n,"value","isEnabled"),_this195.listenTo(o,"execute",function(){e.execute("italic"),e.editing.view.focus();}),o;});}}],[{key:"pluginName",get:function get(){return"ItalicUI";}}]);return wg;}(Qe);var kg=/*#__PURE__*/function(_Ze9){_inherits(kg,_Ze9);var _super116=_createSuper(kg);function kg(){_classCallCheck(this,kg);return _super116.apply(this,arguments);}_createClass(kg,[{key:"refresh",value:function refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled();}},{key:"execute",value:function execute(){var _this196=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=this.editor.model,i=t.schema,n=t.document.selection,o=Array.from(n.getSelectedBlocks()),r=void 0===e.forceValue?!this.value:e.forceValue;t.change(function(e){if(r){var _t233=o.filter(function(e){return _g(e)||yg(i,e);});_this196._applyQuote(e,_t233);}else _this196._removeQuote(e,o.filter(_g));});}},{key:"_getValue",value:function _getValue(){var e=Ns(this.editor.model.document.selection.getSelectedBlocks());return!(!e||!_g(e));}},{key:"_checkEnabled",value:function _checkEnabled(){if(this.value)return!0;var e=this.editor.model.document.selection,t=this.editor.model.schema,i=Ns(e.getSelectedBlocks());return!!i&&yg(t,i);}},{key:"_removeQuote",value:function _removeQuote(e,t){vg(e,t).reverse().forEach(function(t){if(t.start.isAtStart&&t.end.isAtEnd)return void e.unwrap(t.start.parent);if(t.start.isAtStart){var _i253=e.createPositionBefore(t.start.parent);return void e.move(t,_i253);}t.end.isAtEnd||e.split(t.end);var i=e.createPositionAfter(t.end.parent);e.move(t,i);});}},{key:"_applyQuote",value:function _applyQuote(e,t){var i=[];vg(e,t).reverse().forEach(function(t){var n=_g(t.start);n||(n=e.createElement("blockQuote"),e.wrap(t,n)),i.push(n);}),i.reverse().reduce(function(t,i){return t.nextSibling==i?(e.merge(e.createPositionAfter(t)),t):i;});}}]);return kg;}(Ze);function _g(e){return"blockQuote"==e.parent.name?e.parent:null;}function vg(e,t){var i,n=0;var o=[];for(;n<t.length;){var _r52=t[n],_s30=t[n+1];i||(i=e.createPositionBefore(_r52)),_s30&&_r52.nextSibling==_s30||(o.push(e.createRange(i,e.createPositionAfter(_r52))),i=null),n++;}return o;}function yg(e,t){var i=e.checkChild(t.parent,"blockQuote"),n=e.checkChild(["$root","blockQuote"],t);return i&&n;}var xg=/*#__PURE__*/function(_Qe25){_inherits(xg,_Qe25);var _super117=_createSuper(xg);function xg(){_classCallCheck(this,xg);return _super117.apply(this,arguments);}_createClass(xg,[{key:"init",value:function init(){var e=this.editor,t=e.model.schema;e.commands.add("blockQuote",new kg(e)),t.register("blockQuote",{allowWhere:"$block",allowContentOf:"$root"}),e.conversion.elementToElement({model:"blockQuote",view:"blockquote"}),e.model.document.registerPostFixer(function(i){var n=e.model.document.differ.getChanges();var _iterator333=_createForOfIteratorHelper(n),_step333;try{for(_iterator333.s();!(_step333=_iterator333.n()).done;){var _e252=_step333.value;if("insert"==_e252.type){var _n153=_e252.position.nodeAfter;if(!_n153)continue;if(_n153.is("element","blockQuote")&&_n153.isEmpty)return i.remove(_n153),!0;if(_n153.is("element","blockQuote")&&!t.checkChild(_e252.position,_n153))return i.unwrap(_n153),!0;if(_n153.is("element")){var _e253=i.createRangeIn(_n153);var _iterator334=_createForOfIteratorHelper(_e253.getItems()),_step334;try{for(_iterator334.s();!(_step334=_iterator334.n()).done;){var _n154=_step334.value;if(_n154.is("element","blockQuote")&&!t.checkChild(i.createPositionBefore(_n154),_n154))return i.unwrap(_n154),!0;}}catch(err){_iterator334.e(err);}finally{_iterator334.f();}}}else if("remove"==_e252.type){var _t234=_e252.position.parent;if(_t234.is("element","blockQuote")&&_t234.isEmpty)return i.remove(_t234),!0;}}}catch(err){_iterator333.e(err);}finally{_iterator333.f();}return!1;});var i=this.editor.editing.view.document,n=e.model.document.selection,o=e.commands.get("blockQuote");this.listenTo(i,"enter",function(t,i){if(!n.isCollapsed||!o.value)return;n.getLastPosition().parent.isEmpty&&(e.execute("blockQuote"),e.editing.view.scrollToTheSelection(),i.preventDefault(),t.stop());},{context:"blockquote"}),this.listenTo(i,"delete",function(t,i){if("backward"!=i.direction||!n.isCollapsed||!o.value)return;var r=n.getLastPosition().parent;r.isEmpty&&!r.previousSibling&&(e.execute("blockQuote"),e.editing.view.scrollToTheSelection(),i.preventDefault(),t.stop());},{context:"blockquote"});}}],[{key:"pluginName",get:function get(){return"BlockQuoteEditing";}},{key:"requires",get:function get(){return[Ch,Sh];}}]);return xg;}(Qe);i(69);var Ag=/*#__PURE__*/function(_Qe26){_inherits(Ag,_Qe26);var _super118=_createSuper(Ag);function Ag(){_classCallCheck(this,Ag);return _super118.apply(this,arguments);}_createClass(Ag,[{key:"init",value:function init(){var _this197=this;var e=this.editor,t=e.t;e.ui.componentFactory.add("blockQuote",function(i){var n=e.commands.get("blockQuote"),o=new ed(i);return o.set({label:t("Block quote"),icon:Tl.quote,tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(n,"value","isEnabled"),_this197.listenTo(o,"execute",function(){e.execute("blockQuote"),e.editing.view.focus();}),o;});}}],[{key:"pluginName",get:function get(){return"BlockQuoteUI";}}]);return Ag;}(Qe);var Cg=/*#__PURE__*/function(_Qe27){_inherits(Cg,_Qe27);var _super119=_createSuper(Cg);function Cg(){_classCallCheck(this,Cg);return _super119.apply(this,arguments);}_createClass(Cg,[{key:"init",value:function init(){var e=this.editor,t=e.ui.componentFactory,i=e.t;t.add("ckfinder",function(t){var n=e.commands.get("ckfinder"),o=new ed(t);return o.set({label:i("Insert image or file"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.627 16.5zm5.873-.196zm0-7.001V8h-13v8.5h4.341c.191.54.457 1.044.785 1.5H2a1.5 1.5 0 0 1-1.5-1.5v-13A1.5 1.5 0 0 1 2 2h4.5a1.5 1.5 0 0 1 1.06.44L9.122 4H16a1.5 1.5 0 0 1 1.5 1.5v1A1.5 1.5 0 0 1 19 8v2.531a6.027 6.027 0 0 0-1.5-1.228zM16 6.5v-1H8.5l-2-2H2v13h1V8a1.5 1.5 0 0 1 1.5-1.5H16z"/><path d="M14.5 19.5a5 5 0 1 1 0-10 5 5 0 0 1 0 10zM15 14v-2h-1v2h-2v1h2v2h1v-2h2v-1h-2z"/></svg>',tooltip:!0}),o.bind("isEnabled").to(n),o.on("execute",function(){e.execute("ckfinder"),e.editing.view.focus();}),o;});}}],[{key:"pluginName",get:function get(){return"CKFinderUI";}}]);return Cg;}(Qe);var Tg=/*#__PURE__*/function(_Ze10){_inherits(Tg,_Ze10);var _super120=_createSuper(Tg);function Tg(e){var _this198;_classCallCheck(this,Tg);_this198=_super120.call(this,e),_this198.stopListening(_this198.editor.model.document,"change"),_this198.listenTo(_this198.editor.model.document,"change",function(){return _this198.refresh();},{priority:"low"});return _this198;}_createClass(Tg,[{key:"refresh",value:function refresh(){var e=this.editor.commands.get("insertImage"),t=this.editor.commands.get("link");this.isEnabled=e.isEnabled||t.isEnabled;}},{key:"execute",value:function execute(){var e=this.editor,t=this.editor.config.get("ckfinder.openerMethod")||"modal";if("popup"!=t&&"modal"!=t)throw new c.a("ckfinder-unknown-openermethod",e);var i=this.editor.config.get("ckfinder.options")||{};i.chooseFiles=!0;var n=i.onInit;i.language||(i.language=e.locale.uiLanguage),i.onInit=function(t){n&&n(t),t.on("files:choose",function(i){var n=i.data.files.toArray(),o=n.filter(function(e){return!e.isImage();}),r=n.filter(function(e){return e.isImage();});var _iterator335=_createForOfIteratorHelper(o),_step335;try{for(_iterator335.s();!(_step335=_iterator335.n()).done;){var _t235=_step335.value;e.execute("link",_t235.getUrl());}}catch(err){_iterator335.e(err);}finally{_iterator335.f();}var s=[];var _iterator336=_createForOfIteratorHelper(r),_step336;try{for(_iterator336.s();!(_step336=_iterator336.n()).done;){var _e254=_step336.value;var _i254=_e254.getUrl();s.push(_i254||t.request("file:getProxyUrl",{file:_e254}));}}catch(err){_iterator336.e(err);}finally{_iterator336.f();}s.length&&Eg(e,s);}),t.on("file:choose:resizedImage",function(t){var i=t.data.resizedUrl;if(i)Eg(e,[i]);else{var _t236=e.plugins.get("Notification"),_i255=e.locale.t;_t236.showWarning(_i255("Could not obtain resized image URL."),{title:_i255("Selecting resized image failed"),namespace:"ckfinder"});}});},window.CKFinder[t](i);}}]);return Tg;}(Ze);function Eg(e,t){if(e.commands.get("insertImage").isEnabled)e.execute("insertImage",{source:t});else{var _t237=e.plugins.get("Notification"),_i256=e.locale.t;_t237.showWarning(_i256("Could not insert image at the current position."),{title:_i256("Inserting image failed"),namespace:"ckfinder"});}}var Ig=/*#__PURE__*/function(_Qe28){_inherits(Ig,_Qe28);var _super121=_createSuper(Ig);function Ig(){_classCallCheck(this,Ig);return _super121.apply(this,arguments);}_createClass(Ig,[{key:"init",value:function init(){var e=this.editor;if(!e.plugins.has("ImageBlockEditing")&&!e.plugins.has("ImageInlineEditing"))throw new c.a("ckfinder-missing-image-plugin",e);e.commands.add("ckfinder",new Tg(e));}}],[{key:"pluginName",get:function get(){return"CKFinderEditing";}},{key:"requires",get:function get(){return[Od,"LinkEditing"];}}]);return Ig;}(Qe);var Sg=/*#__PURE__*/function(_Qe29){_inherits(Sg,_Qe29);var _super122=_createSuper(Sg);function Sg(){_classCallCheck(this,Sg);return _super122.apply(this,arguments);}_createClass(Sg,[{key:"init",value:function init(){var _this199=this;var e=this.editor,t=e.plugins.get("CloudServices"),i=t.token,n=t.uploadUrl;i&&(this._uploadGateway=e.plugins.get("CloudServicesCore").createUploadGateway(i,n),e.plugins.get(og).createUploadAdapter=function(e){return new Pg(_this199._uploadGateway,e);});}}],[{key:"pluginName",get:function get(){return"CloudServicesUploadAdapter";}},{key:"requires",get:function get(){return["CloudServices",og];}}]);return Sg;}(Qe);var Pg=/*#__PURE__*/function(){function Pg(e,t){_classCallCheck(this,Pg);this.uploadGateway=e,this.loader=t;}_createClass(Pg,[{key:"upload",value:function upload(){var _this200=this;return this.loader.file.then(function(e){return _this200.fileUploader=_this200.uploadGateway.upload(e),_this200.fileUploader.on("progress",function(e,t){_this200.loader.uploadTotal=t.total,_this200.loader.uploaded=t.uploaded;}),_this200.fileUploader.send();});}},{key:"abort",value:function abort(){this.fileUploader.abort();}}]);return Pg;}();var Mg=/*#__PURE__*/function(_Ze11){_inherits(Mg,_Ze11);var _super123=_createSuper(Mg);function Mg(){_classCallCheck(this,Mg);return _super123.apply(this,arguments);}_createClass(Mg,[{key:"refresh",value:function refresh(){var e=this.editor.model,t=Ns(e.document.selection.getSelectedBlocks());this.value=!!t&&t.is("element","paragraph"),this.isEnabled=!!t&&Ng(t,e.schema);}},{key:"execute",value:function execute(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=this.editor.model,i=t.document;t.change(function(n){var o=(e.selection||i.selection).getSelectedBlocks();var _iterator337=_createForOfIteratorHelper(o),_step337;try{for(_iterator337.s();!(_step337=_iterator337.n()).done;){var _e255=_step337.value;!_e255.is("element","paragraph")&&Ng(_e255,t.schema)&&n.rename(_e255,"paragraph");}}catch(err){_iterator337.e(err);}finally{_iterator337.f();}});}}]);return Mg;}(Ze);function Ng(e,t){return t.checkChild(e.parent,"paragraph")&&!t.isObject(e);}var Rg=/*#__PURE__*/function(_Ze12){_inherits(Rg,_Ze12);var _super124=_createSuper(Rg);function Rg(){_classCallCheck(this,Rg);return _super124.apply(this,arguments);}_createClass(Rg,[{key:"execute",value:function execute(e){var t=this.editor.model;var i=e.position;t.change(function(e){var n=e.createElement("paragraph");if(!t.schema.checkChild(i.parent,n)){var _o95=t.schema.findAllowedParent(i,n);if(!_o95)return;i=e.split(i,_o95).position;}t.insertContent(n,i),e.setSelection(n,"in");});}}]);return Rg;}(Ze);var Og=/*#__PURE__*/function(_Qe30){_inherits(Og,_Qe30);var _super125=_createSuper(Og);function Og(){_classCallCheck(this,Og);return _super125.apply(this,arguments);}_createClass(Og,[{key:"init",value:function init(){var e=this.editor,t=e.model;e.commands.add("paragraph",new Mg(e)),e.commands.add("insertParagraph",new Rg(e)),t.schema.register("paragraph",{inheritAllFrom:"$block"}),e.conversion.elementToElement({model:"paragraph",view:"p"}),e.conversion["for"]("upcast").elementToElement({model:function model(e,_ref50){var t=_ref50.writer;return Og.paragraphLikeElements.has(e.name)?e.isEmpty?null:t.createElement("paragraph"):null;},view:/.+/,converterPriority:"low"});}}],[{key:"pluginName",get:function get(){return"Paragraph";}}]);return Og;}(Qe);Og.paragraphLikeElements=new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"]);var zg=/*#__PURE__*/function(_Ze13){_inherits(zg,_Ze13);var _super126=_createSuper(zg);function zg(e,t){var _this201;_classCallCheck(this,zg);_this201=_super126.call(this,e),_this201.modelElements=t;return _this201;}_createClass(zg,[{key:"refresh",value:function refresh(){var _this202=this;var e=Ns(this.editor.model.document.selection.getSelectedBlocks());this.value=!!e&&this.modelElements.includes(e.name)&&e.name,this.isEnabled=!!e&&this.modelElements.some(function(t){return Dg(e,t,_this202.editor.model.schema);});}},{key:"execute",value:function execute(e){var t=this.editor.model,i=t.document,n=e.value;t.change(function(e){var o=Array.from(i.selection.getSelectedBlocks()).filter(function(e){return Dg(e,n,t.schema);});var _iterator338=_createForOfIteratorHelper(o),_step338;try{for(_iterator338.s();!(_step338=_iterator338.n()).done;){var _t238=_step338.value;_t238.is("element",n)||e.rename(_t238,n);}}catch(err){_iterator338.e(err);}finally{_iterator338.f();}});}}]);return zg;}(Ze);function Dg(e,t,i){return i.checkChild(e.parent,t)&&!i.isObject(e);}var Lg=/*#__PURE__*/function(_Qe31){_inherits(Lg,_Qe31);var _super127=_createSuper(Lg);function Lg(e){var _this203;_classCallCheck(this,Lg);_this203=_super127.call(this,e),e.config.define("heading",{options:[{model:"paragraph",title:"Paragraph","class":"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1","class":"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2","class":"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3","class":"ck-heading_heading3"}]});return _this203;}_createClass(Lg,[{key:"init",value:function init(){var e=this.editor,t=e.config.get("heading.options"),i=[];var _iterator339=_createForOfIteratorHelper(t),_step339;try{for(_iterator339.s();!(_step339=_iterator339.n()).done;){var _n155=_step339.value;"paragraph"!==_n155.model&&(e.model.schema.register(_n155.model,{inheritAllFrom:"$block"}),e.conversion.elementToElement(_n155),i.push(_n155.model));}}catch(err){_iterator339.e(err);}finally{_iterator339.f();}this._addDefaultH1Conversion(e),e.commands.add("heading",new zg(e,i));}},{key:"afterInit",value:function afterInit(){var e=this.editor,t=e.commands.get("enter"),i=e.config.get("heading.options");t&&this.listenTo(t,"afterExecute",function(t,n){var o=e.model.document.selection.getFirstPosition().parent;i.some(function(e){return o.is("element",e.model);})&&!o.is("element","paragraph")&&0===o.childCount&&n.writer.rename(o,"paragraph");});}},{key:"_addDefaultH1Conversion",value:function _addDefaultH1Conversion(e){e.conversion["for"]("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:a.get("low")+1});}}],[{key:"pluginName",get:function get(){return"HeadingEditing";}},{key:"requires",get:function get(){return[Og];}}]);return Lg;}(Qe);i(13);var Vg=/*#__PURE__*/function(_Qe32){_inherits(Vg,_Qe32);var _super128=_createSuper(Vg);function Vg(){_classCallCheck(this,Vg);return _super128.apply(this,arguments);}_createClass(Vg,[{key:"init",value:function init(){var _this204=this;var e=this.editor,t=e.t,i=function(e){var t=e.t,i={Paragraph:t("Paragraph"),"Heading 1":t("Heading 1"),"Heading 2":t("Heading 2"),"Heading 3":t("Heading 3"),"Heading 4":t("Heading 4"),"Heading 5":t("Heading 5"),"Heading 6":t("Heading 6")};return e.config.get("heading.options").map(function(e){var t=i[e.title];return t&&t!=e.title&&(e.title=t),e;});}(e),n=t("Choose heading"),o=t("Heading");e.ui.componentFactory.add("heading",function(t){var r={},s=new Zi(),a=e.commands.get("heading"),c=e.commands.get("paragraph"),l=[a];var _iterator340=_createForOfIteratorHelper(i),_step340;try{var _loop6=function _loop6(){var e=_step340.value;var t={type:"button",model:new zd({label:e.title,"class":e["class"],withText:!0})};"paragraph"===e.model?(t.model.bind("isOn").to(c,"value"),t.model.set("commandName","paragraph"),l.push(c)):(t.model.bind("isOn").to(a,"value",function(t){return t===e.model;}),t.model.set({commandName:"heading",commandValue:e.model})),s.add(t),r[e.model]=e.title;};for(_iterator340.s();!(_step340=_iterator340.n()).done;){_loop6();}}catch(err){_iterator340.e(err);}finally{_iterator340.f();}var d=xd(t);return Cd(d,s),d.buttonView.set({isOn:!1,withText:!0,tooltip:o}),d.extendTemplate({attributes:{"class":["ck-heading-dropdown"]}}),d.bind("isEnabled").toMany(l,"isEnabled",function(){for(var _len22=arguments.length,e=new Array(_len22),_key22=0;_key22<_len22;_key22++){e[_key22]=arguments[_key22];}return e.some(function(e){return e;});}),d.buttonView.bind("label").to(a,"value",c,"value",function(e,t){var i=e||t&&"paragraph";return r[i]?r[i]:n;}),_this204.listenTo(d,"execute",function(t){e.execute(t.source.commandName,t.source.commandValue?{value:t.source.commandValue}:void 0),e.editing.view.focus();}),d;});}}],[{key:"pluginName",get:function get(){return"HeadingUI";}}]);return Vg;}(Qe);var jg=/*#__PURE__*/function(_Qe33){_inherits(jg,_Qe33);var _super129=_createSuper(jg);function jg(){_classCallCheck(this,jg);return _super129.apply(this,arguments);}_createClass(jg,[{key:"init",value:function init(){var _this205=this;var e=this.editor;if(e.plugins.has("BalloonToolbar")){var _t239=e.plugins.get("BalloonToolbar");this.listenTo(_t239,"show",function(t){(function(e){var t=e.getSelectedElement();return!(!t||!Oh(t));})(e.editing.view.document.selection)&&t.stop();},{priority:"high"});}this._toolbarDefinitions=new Map(),this._balloon=this.editor.plugins.get("ContextualBalloon"),this.on("change:isEnabled",function(){_this205._updateToolbarsVisibility();}),this.listenTo(e.ui,"update",function(){_this205._updateToolbarsVisibility();}),this.listenTo(e.ui.focusTracker,"change:isFocused",function(){_this205._updateToolbarsVisibility();},{priority:"low"});}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(jg.prototype),"destroy",this).call(this);var _iterator341=_createForOfIteratorHelper(this._toolbarDefinitions.values()),_step341;try{for(_iterator341.s();!(_step341=_iterator341.n()).done;){var _e256=_step341.value;_e256.view.destroy();}}catch(err){_iterator341.e(err);}finally{_iterator341.f();}}},{key:"register",value:function register(e,_ref51){var t=_ref51.ariaLabel,i=_ref51.items,n=_ref51.getRelatedElement,_ref51$balloonClassNa=_ref51.balloonClassName,o=_ref51$balloonClassNa===void 0?"ck-toolbar-container":_ref51$balloonClassNa;if(!i.length)return void Object(c.b)("widget-toolbar-no-items",{toolbarId:e});var r=this.editor,s=r.t,a=new pd(r.locale);if(a.ariaLabel=t||s("Widget toolbar"),this._toolbarDefinitions.has(e))throw new c.a("widget-toolbar-duplicated",this,{toolbarId:e});a.fillFromConfig(i,r.ui.componentFactory),this._toolbarDefinitions.set(e,{view:a,getRelatedElement:n,balloonClassName:o});}},{key:"_updateToolbarsVisibility",value:function _updateToolbarsVisibility(){var e=0,t=null,i=null;var _iterator342=_createForOfIteratorHelper(this._toolbarDefinitions.values()),_step342;try{for(_iterator342.s();!(_step342=_iterator342.n()).done;){var _n156=_step342.value;var _o96=_n156.getRelatedElement(this.editor.editing.view.document.selection);if(this.isEnabled&&_o96){if(this.editor.ui.focusTracker.isFocused){var _r53=_o96.getAncestors().length;_r53>e&&(e=_r53,t=_o96,i=_n156);}else this._isToolbarVisible(_n156)&&this._hideToolbar(_n156);}else this._isToolbarInBalloon(_n156)&&this._hideToolbar(_n156);}}catch(err){_iterator342.e(err);}finally{_iterator342.f();}i&&this._showToolbar(i,t);}},{key:"_hideToolbar",value:function _hideToolbar(e){this._balloon.remove(e.view),this.stopListening(this._balloon,"change:visibleView");}},{key:"_showToolbar",value:function _showToolbar(e,t){var _this206=this;this._isToolbarVisible(e)?Bg(this.editor,t):this._isToolbarInBalloon(e)||(this._balloon.add({view:e.view,position:Fg(this.editor,t),balloonClassName:e.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",function(){var _iterator343=_createForOfIteratorHelper(_this206._toolbarDefinitions.values()),_step343;try{for(_iterator343.s();!(_step343=_iterator343.n()).done;){var _e257=_step343.value;if(_this206._isToolbarVisible(_e257)){var _t240=_e257.getRelatedElement(_this206.editor.editing.view.document.selection);Bg(_this206.editor,_t240);}}}catch(err){_iterator343.e(err);}finally{_iterator343.f();}}));}},{key:"_isToolbarVisible",value:function _isToolbarVisible(e){return this._balloon.visibleView===e.view;}},{key:"_isToolbarInBalloon",value:function _isToolbarInBalloon(e){return this._balloon.hasView(e.view);}}],[{key:"requires",get:function get(){return[Ud];}},{key:"pluginName",get:function get(){return"WidgetToolbarRepository";}}]);return jg;}(Qe);function Bg(e,t){var i=e.plugins.get("ContextualBalloon"),n=Fg(e,t);i.updatePosition(n);}function Fg(e,t){var i=e.editing.view,n=Vd.defaultPositions;return{target:i.domConverter.mapViewToDom(t),positions:[n.northArrowSouth,n.northArrowSouthWest,n.northArrowSouthEast,n.southArrowNorth,n.southArrowNorthWest,n.southArrowNorthEast,Hh]};}var Hg=/*#__PURE__*/function(){function Hg(e){_classCallCheck(this,Hg);this.set("activeHandlePosition",null),this.set("proposedWidthPercents",null),this.set("proposedWidth",null),this.set("proposedHeight",null),this.set("proposedHandleHostWidth",null),this.set("proposedHandleHostHeight",null),this._options=e,this._referenceCoordinates=null;}_createClass(Hg,[{key:"begin",value:function begin(e,t,i){var n=new Ts(t);this.activeHandlePosition=function(e){var t=["top-left","top-right","bottom-right","bottom-left"];for(var _i257=0,_t241=t;_i257<_t241.length;_i257++){var _i258=_t241[_i257];if(e.classList.contains("ck-widget__resizer__handle-"+_i258))return _i258;}}(e),this._referenceCoordinates=function(e,t){var i=new Ts(e),n=t.split("-"),o={x:"right"==n[1]?i.right:i.left,y:"bottom"==n[0]?i.bottom:i.top};return o.x+=e.ownerDocument.defaultView.scrollX,o.y+=e.ownerDocument.defaultView.scrollY,o;}(t,function(e){var t=e.split("-"),i={top:"bottom",bottom:"top",left:"right",right:"left"};return"".concat(i[t[0]],"-").concat(i[t[1]]);}(this.activeHandlePosition)),this.originalWidth=n.width,this.originalHeight=n.height,this.aspectRatio=n.width/n.height;var o=i.style.width;o&&o.match(/^\d+(\.\d*)?%$/)?this.originalWidthPercents=parseFloat(o):this.originalWidthPercents=function(e,t){var i=e.parentElement,n=parseFloat(i.ownerDocument.defaultView.getComputedStyle(i).width);return t.width/n*100;}(i,n);}},{key:"update",value:function update(e){this.proposedWidth=e.width,this.proposedHeight=e.height,this.proposedWidthPercents=e.widthPercents,this.proposedHandleHostWidth=e.handleHostWidth,this.proposedHandleHostHeight=e.handleHostHeight;}}]);return Hg;}();Ke(Hg,Ue);var Ug=/*#__PURE__*/function(_Ml25){_inherits(Ug,_Ml25);var _super130=_createSuper(Ug);function Ug(){var _this207;_classCallCheck(this,Ug);_this207=_super130.call(this);var e=_this207.bindTemplate;_this207.setTemplate({tag:"div",attributes:{"class":["ck","ck-size-view",e.to("_viewPosition",function(e){return e?"ck-orientation-"+e:"";})],style:{display:e["if"]("_isVisible","none",function(e){return!e;})}},children:[{text:e.to("_label")}]});return _this207;}_createClass(Ug,[{key:"_bindToState",value:function _bindToState(e,t){this.bind("_isVisible").to(t,"proposedWidth",t,"proposedHeight",function(e,t){return null!==e&&null!==t;}),this.bind("_label").to(t,"proposedHandleHostWidth",t,"proposedHandleHostHeight",t,"proposedWidthPercents",function(t,i,n){return"px"===e.unit?"".concat(t,"\xD7").concat(i):n+"%";}),this.bind("_viewPosition").to(t,"activeHandlePosition",t,"proposedHandleHostWidth",t,"proposedHandleHostHeight",function(e,t,i){return t<50||i<50?"above-center":e;});}},{key:"_dismiss",value:function _dismiss(){this.unbind(),this._isVisible=!1;}}]);return Ug;}(Ml);var Wg=/*#__PURE__*/function(){function Wg(e){var _this208=this;_classCallCheck(this,Wg);this._options=e,this._viewResizerWrapper=null,this.set("isEnabled",!0),this.decorate("begin"),this.decorate("cancel"),this.decorate("commit"),this.decorate("updateSize"),this.on("commit",function(e){_this208.state.proposedWidth||_this208.state.proposedWidthPercents||(_this208._cleanup(),e.stop());},{priority:"high"}),this.on("change:isEnabled",function(){_this208.isEnabled&&_this208.redraw();});}_createClass(Wg,[{key:"attach",value:function attach(){var _this209=this;var e=this,t=this._options.viewElement;this._options.editor.editing.view.change(function(i){var n=i.createUIElement("div",{"class":"ck ck-reset_all ck-widget__resizer"},function(t){var i=this.toDomElement(t);return e._appendHandles(i),e._appendSizeUI(i),e.on("change:isEnabled",function(e,t,n){i.style.display=n?"":"none";}),i.style.display=e.isEnabled?"":"none",i;});i.insert(i.createPositionAt(t,"end"),n),i.addClass("ck-widget_with-resizer",t),_this209._viewResizerWrapper=n;});}},{key:"begin",value:function begin(e){this.state=new Hg(this._options),this._sizeView._bindToState(this._options,this.state),this._initialViewWidth=this._options.viewElement.getStyle("width"),this.state.begin(e,this._getHandleHost(),this._getResizeHost());}},{key:"updateSize",value:function updateSize(e){var _this210=this;var t=this._proposeNewSize(e);this._options.editor.editing.view.change(function(e){var i=_this210._options.unit||"%",n=("%"===i?t.widthPercents:t.width)+i;e.setStyle("width",n,_this210._options.viewElement);});var i=this._getHandleHost(),n=new Ts(i);t.handleHostWidth=Math.round(n.width),t.handleHostHeight=Math.round(n.height);var o=new Ts(i);t.width=Math.round(o.width),t.height=Math.round(o.height),this.redraw(n),this.state.update(t);}},{key:"commit",value:function commit(){var _this211=this;var e=this._options.unit||"%",t=("%"===e?this.state.proposedWidthPercents:this.state.proposedWidth)+e;this._options.editor.editing.view.change(function(){_this211._cleanup(),_this211._options.onCommit(t);});}},{key:"cancel",value:function cancel(){this._cleanup();}},{key:"destroy",value:function destroy(){this.cancel();}},{key:"redraw",value:function redraw(e){var t=this._domResizerWrapper;if(!((i=t)&&i.ownerDocument&&i.ownerDocument.contains(i)))return;var i;var n=t.parentElement,o=this._getHandleHost(),r=this._viewResizerWrapper,s=[r.getStyle("width"),r.getStyle("height"),r.getStyle("left"),r.getStyle("top")];var a;if(n.isSameNode(o)){var _t242=e||new Ts(o);a=[_t242.width+"px",_t242.height+"px",void 0,void 0];}else a=[o.offsetWidth+"px",o.offsetHeight+"px",o.offsetLeft+"px",o.offsetTop+"px"];"same"!==cn(s,a)&&this._options.editor.editing.view.change(function(e){e.setStyle({width:a[0],height:a[1],left:a[2],top:a[3]},r);});}},{key:"containsHandle",value:function containsHandle(e){return this._domResizerWrapper.contains(e);}},{key:"_cleanup",value:function _cleanup(){var _this212=this;this._sizeView._dismiss();this._options.editor.editing.view.change(function(e){e.setStyle("width",_this212._initialViewWidth,_this212._options.viewElement);});}},{key:"_proposeNewSize",value:function _proposeNewSize(e){var t=this.state,i={x:(n=e).pageX,y:n.pageY};var n;var o=!this._options.isCentered||this._options.isCentered(this),r={x:t._referenceCoordinates.x-(i.x+t.originalWidth),y:i.y-t.originalHeight-t._referenceCoordinates.y};o&&t.activeHandlePosition.endsWith("-right")&&(r.x=i.x-(t._referenceCoordinates.x+t.originalWidth)),o&&(r.x*=2);var s={width:Math.abs(t.originalWidth+r.x),height:Math.abs(t.originalHeight+r.y)};s.dominant=s.width/t.aspectRatio>s.height?"width":"height",s.max=s[s.dominant];var a={width:s.width,height:s.height};return"width"==s.dominant?a.height=a.width/t.aspectRatio:a.width=a.height*t.aspectRatio,{width:Math.round(a.width),height:Math.round(a.height),widthPercents:Math.min(Math.round(t.originalWidthPercents/t.originalWidth*a.width*100)/100,100)};}},{key:"_getResizeHost",value:function _getResizeHost(){var e=this._domResizerWrapper.parentElement;return this._options.getResizeHost(e);}},{key:"_getHandleHost",value:function _getHandleHost(){var e=this._domResizerWrapper.parentElement;return this._options.getHandleHost(e);}},{key:"_domResizerWrapper",get:function get(){return this._options.editor.editing.view.domConverter.mapViewToDom(this._viewResizerWrapper);}},{key:"_appendHandles",value:function _appendHandles(e){var t=["top-left","top-right","bottom-right","bottom-left"];for(var _i259=0,_t243=t;_i259<_t243.length;_i259++){var _n157=_t243[_i259];e.appendChild(new Nl({tag:"div",attributes:{"class":"ck-widget__resizer__handle "+(i=_n157,"ck-widget__resizer__handle-"+i)}}).render());}var i;}},{key:"_appendSizeUI",value:function _appendSizeUI(e){this._sizeView=new Ug(),this._sizeView.render(),e.appendChild(this._sizeView.element);}}],[{key:"isResizeHandle",value:function isResizeHandle(e){return e.classList.contains("ck-widget__resizer__handle");}}]);return Wg;}();Ke(Wg,Ue);i(72);Ke(/*#__PURE__*/function(_Qe34){_inherits(_class2,_Qe34);var _super131=_createSuper(_class2);function _class2(){_classCallCheck(this,_class2);return _super131.apply(this,arguments);}_createClass(_class2,[{key:"init",value:function init(){var _this213=this;var e=this.editor.editing,t=vr.window.document;this.set("visibleResizer",null),this.set("_activeResizer",null),this._resizers=new Map(),e.view.addObserver(uh),this._observer=Object.create(Mr),this.listenTo(e.view.document,"mousedown",this._mouseDownListener.bind(this),{priority:"high"}),this._observer.listenTo(t,"mousemove",this._mouseMoveListener.bind(this)),this._observer.listenTo(t,"mouseup",this._mouseUpListener.bind(this));var i=function i(){_this213.visibleResizer&&_this213.visibleResizer.redraw();};this._redrawFocusedResizerThrottled=iu(i,200),this.on("change:visibleResizer",i),this.editor.ui.on("update",this._redrawFocusedResizerThrottled),this.editor.model.document.on("change",function(){var _iterator344=_createForOfIteratorHelper(_this213._resizers),_step344;try{for(_iterator344.s();!(_step344=_iterator344.n()).done;){var _step344$value=_slicedToArray(_step344.value,2),_e258=_step344$value[0],_t244=_step344$value[1];_e258.isAttached()||(_this213._resizers["delete"](_e258),_t244.destroy());}}catch(err){_iterator344.e(err);}finally{_iterator344.f();}},{priority:"lowest"}),this._observer.listenTo(vr.window,"resize",this._redrawFocusedResizerThrottled);var n=this.editor.editing.view.document.selection;n.on("change",function(){var e=n.getSelectedElement();_this213.visibleResizer=_this213.getResizerByViewElement(e)||null;});}},{key:"destroy",value:function destroy(){this._observer.stopListening();var _iterator345=_createForOfIteratorHelper(this._resizers.values()),_step345;try{for(_iterator345.s();!(_step345=_iterator345.n()).done;){var _e259=_step345.value;_e259.destroy();}}catch(err){_iterator345.e(err);}finally{_iterator345.f();}this._redrawFocusedResizerThrottled.cancel();}},{key:"attachTo",value:function attachTo(e){var t=new Wg(e),i=this.editor.plugins;if(t.attach(),i.has("WidgetToolbarRepository")){var _e260=i.get("WidgetToolbarRepository");t.on("begin",function(){_e260.forceDisabled("resize");},{priority:"lowest"}),t.on("cancel",function(){_e260.clearForceDisabled("resize");},{priority:"highest"}),t.on("commit",function(){_e260.clearForceDisabled("resize");},{priority:"highest"});}this._resizers.set(e.viewElement,t);var n=this.editor.editing.view.document.selection.getSelectedElement();return this.getResizerByViewElement(n)==t&&(this.visibleResizer=t),t;}},{key:"getResizerByViewElement",value:function getResizerByViewElement(e){return this._resizers.get(e);}},{key:"_getResizerByHandle",value:function _getResizerByHandle(e){var _iterator346=_createForOfIteratorHelper(this._resizers.values()),_step346;try{for(_iterator346.s();!(_step346=_iterator346.n()).done;){var _t245=_step346.value;if(_t245.containsHandle(e))return _t245;}}catch(err){_iterator346.e(err);}finally{_iterator346.f();}}},{key:"_mouseDownListener",value:function _mouseDownListener(e,t){var i=t.domTarget;Wg.isResizeHandle(i)&&(this._activeResizer=this._getResizerByHandle(i),this._activeResizer&&(this._activeResizer.begin(i),e.stop(),t.preventDefault()));}},{key:"_mouseMoveListener",value:function _mouseMoveListener(e,t){this._activeResizer&&this._activeResizer.updateSize(t);}},{key:"_mouseUpListener",value:function _mouseUpListener(){this._activeResizer&&(this._activeResizer.commit(),this._activeResizer=null);}}],[{key:"pluginName",get:function get(){return"WidgetResize";}}]);return _class2;}(Qe),Ue);var qg=/*#__PURE__*/function(_Ze14){_inherits(qg,_Ze14);var _super132=_createSuper(qg);function qg(){_classCallCheck(this,qg);return _super132.apply(this,arguments);}_createClass(qg,[{key:"refresh",value:function refresh(){var e=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!e,this.isEnabled&&e.hasAttribute("alt")?this.value=e.getAttribute("alt"):this.value=!1;}},{key:"execute",value:function execute(e){var t=this.editor,i=t.plugins.get("ImageUtils"),n=t.model,o=i.getClosestSelectedImageElement(n.document.selection);n.change(function(t){t.setAttribute("alt",e.newValue,o);});}}]);return qg;}(Ze);function $g(e,t){var i=e.createEmptyElement("img"),n="imageBlock"===t?e.createContainerElement("figure",{"class":"image"}):e.createContainerElement("span",{"class":"image-inline"},{isAllowedInsideAttributeElement:!0});return e.insert(e.createPositionAt(n,0),i),n;}function Yg(e,t){if(e.plugins.has("ImageInlineEditing")!==e.plugins.has("ImageBlockEditing"))return{name:"img",attributes:{src:!0}};var i=e.plugins.get("ImageUtils");return function(e){if(!i.isInlineImageView(e)||!e.hasAttribute("src"))return null;return(e.findAncestor(i.isBlockImageView)?"imageBlock":"imageInline")!==t?null:{name:!0,attributes:["src"]};};}function Gg(e,t){var i=Ns(t.getSelectedBlocks());return!i||e.isObject(i)||i.isEmpty&&"listItem"!=i.name?"imageBlock":"imageInline";}var Kg=/*#__PURE__*/function(_Qe35){_inherits(Kg,_Qe35);var _super133=_createSuper(Kg);function Kg(){_classCallCheck(this,Kg);return _super133.apply(this,arguments);}_createClass(Kg,[{key:"isImage",value:function isImage(e){return this.isInlineImage(e)||this.isBlockImage(e);}},{key:"isInlineImageView",value:function isInlineImageView(e){return!!e&&e.is("element","img");}},{key:"isBlockImageView",value:function isBlockImageView(e){return!!e&&e.is("element","figure")&&e.hasClass("image");}},{key:"insertImage",value:function insertImage(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var n=this.editor,o=n.model,r=o.document.selection;i=Qg(n,t||r,i),e=_objectSpread(_objectSpread({},Object.fromEntries(r.getAttributes())),e);for(var _t246 in e){o.schema.checkAttribute(i,_t246)||delete e[_t246];}return o.change(function(n){var s=n.createElement(i,e);return t||"imageInline"==i||(t=Fh(r,o)),o.insertContent(s,t),s.parent?(n.setSelection(s,"on"),s):null;});}},{key:"getClosestSelectedImageWidget",value:function getClosestSelectedImageWidget(e){var t=e.getSelectedElement();if(t&&this.isImageWidget(t))return t;var i=e.getFirstPosition().parent;for(;i;){if(i.is("element")&&this.isImageWidget(i))return i;i=i.parent;}return null;}},{key:"getClosestSelectedImageElement",value:function getClosestSelectedImageElement(e){var t=e.getSelectedElement();return this.isImage(t)?t:e.getFirstPosition().findAncestor("imageBlock");}},{key:"isImageAllowed",value:function isImageAllowed(){var e=this.editor.model.document.selection;return function(e,t){if("imageBlock"==Qg(e,t)){var _i260=function(e,t){var i=Fh(e,t).start.parent;if(i.isEmpty&&!i.is("element","$root"))return i.parent;return i;}(t,e.model);if(e.model.schema.checkChild(_i260,"imageBlock"))return!0;}else if(e.model.schema.checkChild(t.focus,"imageInline"))return!0;return!1;}(this.editor,e)&&function(e){return _toConsumableArray(e.focus.getAncestors()).every(function(e){return!e.is("element","imageBlock");});}(e);}},{key:"toImageWidget",value:function toImageWidget(e,t,i){var _this214=this;t.setCustomProperty("image",!0,e);return zh(e,t,{label:function label(){var t=_this214.findViewImgElement(e).getAttribute("alt");return t?"".concat(t," ").concat(i):i;}});}},{key:"isImageWidget",value:function isImageWidget(e){return!!e.getCustomProperty("image")&&Oh(e);}},{key:"isBlockImage",value:function isBlockImage(e){return!!e&&e.is("element","imageBlock");}},{key:"isInlineImage",value:function isInlineImage(e){return!!e&&e.is("element","imageInline");}},{key:"findViewImgElement",value:function findViewImgElement(e){if(this.isInlineImageView(e))return e;var t=this.editor.editing.view;var _iterator347=_createForOfIteratorHelper(t.createRangeIn(e)),_step347;try{for(_iterator347.s();!(_step347=_iterator347.n()).done;){var _i261=_step347.value.item;if(this.isInlineImageView(_i261))return _i261;}}catch(err){_iterator347.e(err);}finally{_iterator347.f();}}}],[{key:"pluginName",get:function get(){return"ImageUtils";}}]);return Kg;}(Qe);function Qg(e,t,i){var n=e.model.schema,o=e.config.get("image.insert.type");return e.plugins.has("ImageBlockEditing")?e.plugins.has("ImageInlineEditing")?i||("inline"===o?"imageInline":"block"===o?"imageBlock":t.is("selection")?Gg(n,t):n.checkChild(t,"imageInline")?"imageInline":"imageBlock"):"imageBlock":"imageInline";}var Jg=/*#__PURE__*/function(_Qe36){_inherits(Jg,_Qe36);var _super134=_createSuper(Jg);function Jg(){_classCallCheck(this,Jg);return _super134.apply(this,arguments);}_createClass(Jg,[{key:"init",value:function init(){this.editor.commands.add("imageTextAlternative",new qg(this.editor));}}],[{key:"requires",get:function get(){return[Kg];}},{key:"pluginName",get:function get(){return"ImageTextAlternativeEditing";}}]);return Jg;}(Qe);i(74),i(7);var Zg=/*#__PURE__*/function(_Ml26){_inherits(Zg,_Ml26);var _super135=_createSuper(Zg);function Zg(e){var _this215;_classCallCheck(this,Zg);_this215=_super135.call(this,e);var t=_this215.locale.t;_this215.focusTracker=new Rs(),_this215.keystrokes=new Os(),_this215.labeledInput=_this215._createLabeledInputView(),_this215.saveButtonView=_this215._createButton(t("Save"),Tl.check,"ck-button-save"),_this215.saveButtonView.type="submit",_this215.cancelButtonView=_this215._createButton(t("Cancel"),Tl.cancel,"ck-button-cancel","cancel"),_this215._focusables=new Pl(),_this215._focusCycler=new id({focusables:_this215._focusables,focusTracker:_this215.focusTracker,keystrokeHandler:_this215.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),_this215.setTemplate({tag:"form",attributes:{"class":["ck","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:[_this215.labeledInput,_this215.saveButtonView,_this215.cancelButtonView]}),Il(_assertThisInitialized(_this215));return _this215;}_createClass(Zg,[{key:"render",value:function render(){var _this216=this;_get(_getPrototypeOf(Zg.prototype),"render",this).call(this),this.keystrokes.listenTo(this.element),Sl({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(function(e){_this216._focusables.add(e),_this216.focusTracker.add(e.element);});}},{key:"_createButton",value:function _createButton(e,t,i,n){var o=new ed(this.locale);return o.set({label:e,icon:t,tooltip:!0}),o.extendTemplate({attributes:{"class":i}}),n&&o.delegate("execute").to(this,n),o;}},{key:"_createLabeledInputView",value:function _createLabeledInputView(){var e=this.locale.t,t=new Nd(this.locale,Rd);return t.label=e("Text alternative"),t;}}]);return Zg;}(Ml);function Xg(e){var t=e.editing.view,i=Vd.defaultPositions,n=e.plugins.get("ImageUtils");return{target:t.domConverter.viewToDom(n.getClosestSelectedImageWidget(t.document.selection)),positions:[i.northArrowSouth,i.northArrowSouthWest,i.northArrowSouthEast,i.southArrowNorth,i.southArrowNorthWest,i.southArrowNorthEast]};}var em=/*#__PURE__*/function(_Qe37){_inherits(em,_Qe37);var _super136=_createSuper(em);function em(){_classCallCheck(this,em);return _super136.apply(this,arguments);}_createClass(em,[{key:"init",value:function init(){this._createButton(),this._createForm();}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(em.prototype),"destroy",this).call(this),this._form.destroy();}},{key:"_createButton",value:function _createButton(){var _this217=this;var e=this.editor,t=e.t;e.ui.componentFactory.add("imageTextAlternative",function(i){var n=e.commands.get("imageTextAlternative"),o=new ed(i);return o.set({label:t("Change image text alternative"),icon:Tl.lowVision,tooltip:!0}),o.bind("isEnabled").to(n,"isEnabled"),_this217.listenTo(o,"execute",function(){_this217._showForm();}),o;});}},{key:"_createForm",value:function _createForm(){var _this218=this;var e=this.editor,t=e.editing.view.document,i=e.plugins.get("ImageUtils");this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new Zg(e.locale),this._form.render(),this.listenTo(this._form,"submit",function(){e.execute("imageTextAlternative",{newValue:_this218._form.labeledInput.fieldView.element.value}),_this218._hideForm(!0);}),this.listenTo(this._form,"cancel",function(){_this218._hideForm(!0);}),this._form.keystrokes.set("Esc",function(e,t){_this218._hideForm(!0),t();}),this.listenTo(e.ui,"update",function(){i.getClosestSelectedImageWidget(t.selection)?_this218._isVisible&&function(e){var t=e.plugins.get("ContextualBalloon");if(e.plugins.get("ImageUtils").getClosestSelectedImageWidget(e.editing.view.document.selection)){var _i262=Xg(e);t.updatePosition(_i262);}}(e):_this218._hideForm(!0);}),El({emitter:this._form,activator:function activator(){return _this218._isVisible;},contextElements:[this._balloon.view.element],callback:function callback(){return _this218._hideForm();}});}},{key:"_showForm",value:function _showForm(){if(this._isVisible)return;var e=this.editor,t=e.commands.get("imageTextAlternative"),i=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:Xg(e)}),i.fieldView.value=i.fieldView.element.value=t.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions();}},{key:"_hideForm",value:function _hideForm(e){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus());}},{key:"_isVisible",get:function get(){return this._balloon.visibleView===this._form;}},{key:"_isInBalloon",get:function get(){return this._balloon.hasView(this._form);}}],[{key:"requires",get:function get(){return[Ud];}},{key:"pluginName",get:function get(){return"ImageTextAlternativeUI";}}]);return em;}(Qe);var tm=/*#__PURE__*/function(_Qe38){_inherits(tm,_Qe38);var _super137=_createSuper(tm);function tm(){_classCallCheck(this,tm);return _super137.apply(this,arguments);}_createClass(tm,null,[{key:"requires",get:function get(){return[Jg,em];}},{key:"pluginName",get:function get(){return"ImageTextAlternative";}}]);return tm;}(Qe);function im(e,t){return function(e){e.on("attribute:srcset:"+t,i);};function i(t,i,n){if(!n.consumable.consume(i.item,t.name))return;var o=n.writer,r=n.mapper.toViewElement(i.item),s=e.findViewImgElement(r);if(null===i.attributeNewValue){var _e261=i.attributeOldValue;_e261.data&&(o.removeAttribute("srcset",s),o.removeAttribute("sizes",s),_e261.width&&o.removeAttribute("width",s));}else{var _e262=i.attributeNewValue;_e262.data&&(o.setAttribute("srcset",_e262.data,s),o.setAttribute("sizes","100vw",s),_e262.width&&o.setAttribute("width",_e262.width,s));}}}function nm(e,t,i){return function(e){e.on("attribute:".concat(i,":").concat(t),n);};function n(t,i,n){if(!n.consumable.consume(i.item,t.name))return;var o=n.writer,r=n.mapper.toViewElement(i.item),s=e.findViewImgElement(r);o.setAttribute(i.attributeKey,i.attributeNewValue||"",s);}}var om=/*#__PURE__*/function(_Or8){_inherits(om,_Or8);var _super138=_createSuper(om);function om(){_classCallCheck(this,om);return _super138.apply(this,arguments);}_createClass(om,[{key:"observe",value:function observe(e){var _this219=this;this.listenTo(e,"load",function(e,t){var i=t.target;_this219.checkShouldIgnoreEventFromTarget(i)||"IMG"==i.tagName&&_this219._fireEvents(t);},{useCapture:!0});}},{key:"_fireEvents",value:function _fireEvents(e){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",e));}}]);return om;}(Or);var rm=/*#__PURE__*/function(_Ze15){_inherits(rm,_Ze15);var _super139=_createSuper(rm);function rm(e){var _this220;_classCallCheck(this,rm);_this220=_super139.call(this,e);var t=e.config.get("image.insert.type");e.plugins.has("ImageBlockEditing")||"block"===t&&Object(c.b)("image-block-plugin-required"),e.plugins.has("ImageInlineEditing")||"inline"===t&&Object(c.b)("image-inline-plugin-required");return _this220;}_createClass(rm,[{key:"refresh",value:function refresh(){this.isEnabled=this.editor.plugins.get("ImageUtils").isImageAllowed();}},{key:"execute",value:function execute(e){var _this221=this;var t=en(e.source),i=this.editor.model.document.selection,n=this.editor.plugins.get("ImageUtils"),o=Object.fromEntries(i.getAttributes());t.forEach(function(e,t){var r=i.getSelectedElement();if("string"==typeof e&&(e={src:e}),t&&r&&n.isImage(r)){var _t247=_this221.editor.model.createPositionAfter(r);n.insertImage(_objectSpread(_objectSpread({},e),o),_t247);}else n.insertImage(_objectSpread(_objectSpread({},e),o));});}}]);return rm;}(Ze);var sm=/*#__PURE__*/function(_Qe39){_inherits(sm,_Qe39);var _super140=_createSuper(sm);function sm(){_classCallCheck(this,sm);return _super140.apply(this,arguments);}_createClass(sm,[{key:"init",value:function init(){var e=this.editor,t=e.conversion;e.editing.view.addObserver(om),t["for"]("upcast").attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:{key:"srcset",value:function value(e){var t={data:e.getAttribute("srcset")};return e.hasAttribute("width")&&(t.width=e.getAttribute("width")),t;}}});var i=new rm(e);e.commands.add("insertImage",i),e.commands.add("imageInsert",i);}}],[{key:"requires",get:function get(){return[Kg];}},{key:"pluginName",get:function get(){return"ImageEditing";}}]);return sm;}(Qe);var am=/*#__PURE__*/function(_Ze16){_inherits(am,_Ze16);var _super141=_createSuper(am);function am(e,t){var _this222;_classCallCheck(this,am);_this222=_super141.call(this,e),_this222._modelElementName=t;return _this222;}_createClass(am,[{key:"refresh",value:function refresh(){var e=this.editor.plugins.get("ImageUtils"),t=e.getClosestSelectedImageElement(this.editor.model.document.selection);"imageBlock"===this._modelElementName?this.isEnabled=e.isInlineImage(t):this.isEnabled=e.isBlockImage(t);}},{key:"execute",value:function execute(){var _this223=this;var e=this.editor,t=this.editor.model,i=e.plugins.get("ImageUtils"),n=i.getClosestSelectedImageElement(t.document.selection),o=Object.fromEntries(n.getAttributes());return o.src||o.uploadId?t.change(function(e){var r=Array.from(t.markers).filter(function(e){return e.getRange().containsItem(n);}),s=i.insertImage(o,t.createSelection(n,"on"),_this223._modelElementName);if(!s)return null;var a=e.createRangeOn(s);var _iterator348=_createForOfIteratorHelper(r),_step348;try{for(_iterator348.s();!(_step348=_iterator348.n()).done;){var _t248=_step348.value;var _i263=_t248.getRange(),_n158="$graveyard"!=_i263.root.rootName?_i263.getJoined(a,!0):a;e.updateMarker(_t248,{range:_n158});}}catch(err){_iterator348.e(err);}finally{_iterator348.f();}return{oldElement:n,newElement:s};}):null;}}]);return am;}(Ze);var cm=/*#__PURE__*/function(_Qe40){_inherits(cm,_Qe40);var _super142=_createSuper(cm);function cm(){_classCallCheck(this,cm);return _super142.apply(this,arguments);}_createClass(cm,[{key:"init",value:function init(){var e=this.editor;e.model.schema.register("imageBlock",{isObject:!0,isBlock:!0,allowWhere:"$block",allowAttributes:["alt","src","srcset"]}),this._setupConversion(),e.plugins.has("ImageInlineEditing")&&(e.commands.add("imageTypeBlock",new am(this.editor,"imageBlock")),this._setupClipboardIntegration());}},{key:"_setupConversion",value:function _setupConversion(){var e=this.editor,t=e.t,i=e.conversion,n=e.plugins.get("ImageUtils");i["for"]("dataDowncast").elementToElement({model:"imageBlock",view:function view(e,_ref52){var t=_ref52.writer;return $g(t,"imageBlock");}}),i["for"]("editingDowncast").elementToElement({model:"imageBlock",view:function view(e,_ref53){var i=_ref53.writer;return n.toImageWidget($g(i,"imageBlock"),i,t("image widget"));}}),i["for"]("downcast").add(nm(n,"imageBlock","src")).add(nm(n,"imageBlock","alt")).add(im(n,"imageBlock")),i["for"]("upcast").elementToElement({view:Yg(e,"imageBlock"),model:function model(e,_ref54){var t=_ref54.writer;return t.createElement("imageBlock",{src:e.getAttribute("src")});}}).add(function(e){return function(e){e.on("element:figure",t);};function t(t,i,n){if(!n.consumable.test(i.viewItem,{name:!0,classes:"image"}))return;var o=e.findViewImgElement(i.viewItem);if(!o||!o.hasAttribute("src")||!n.consumable.test(o,{name:!0}))return;var r=Ns(n.convertItem(o,i.modelCursor).modelRange.getItems());r&&(n.convertChildren(i.viewItem,r),n.updateConversionResult(r,i));}}(n));}},{key:"_setupClipboardIntegration",value:function _setupClipboardIntegration(){var e=this.editor,t=e.model,i=e.editing.view,n=e.plugins.get("ImageUtils");this.listenTo(e.plugins.get("ClipboardPipeline"),"inputTransformation",function(o,r){var s=Array.from(r.content.getChildren());var a;if(!s.every(n.isInlineImageView))return;a=r.targetRanges?e.editing.mapper.toModelRange(r.targetRanges[0]):t.document.selection.getFirstRange();var c=t.createSelection(a);if("imageBlock"===Gg(t.schema,c)){var _e263=new gh(i.document),_t249=s.map(function(t){return _e263.createElement("figure",{"class":"image"},t);});r.content=_e263.createDocumentFragment(_t249);}});}}],[{key:"requires",get:function get(){return[sm,Kg,_h];}},{key:"pluginName",get:function get(){return"ImageBlockEditing";}}]);return cm;}(Qe);i(11);var lm=/*#__PURE__*/function(_Qe41){_inherits(lm,_Qe41);var _super143=_createSuper(lm);function lm(){_classCallCheck(this,lm);return _super143.apply(this,arguments);}_createClass(lm,null,[{key:"requires",get:function get(){return[cm,eu,tm];}},{key:"pluginName",get:function get(){return"ImageBlock";}}]);return lm;}(Qe);var dm=/*#__PURE__*/function(_Qe42){_inherits(dm,_Qe42);var _super144=_createSuper(dm);function dm(){_classCallCheck(this,dm);return _super144.apply(this,arguments);}_createClass(dm,[{key:"init",value:function init(){var e=this.editor,t=e.model.schema;t.register("imageInline",{isObject:!0,isInline:!0,allowWhere:"$text",allowAttributes:["alt","src","srcset"]}),t.addChildCheck(function(e,t){if(e.endsWith("caption")&&"imageInline"===t.name)return!1;}),this._setupConversion(),e.plugins.has("ImageBlockEditing")&&(e.commands.add("imageTypeInline",new am(this.editor,"imageInline")),this._setupClipboardIntegration());}},{key:"_setupConversion",value:function _setupConversion(){var e=this.editor,t=e.t,i=e.conversion,n=e.plugins.get("ImageUtils");i["for"]("dataDowncast").elementToElement({model:"imageInline",view:function view(e,_ref55){var t=_ref55.writer;return t.createEmptyElement("img");}}),i["for"]("editingDowncast").elementToElement({model:"imageInline",view:function view(e,_ref56){var i=_ref56.writer;return n.toImageWidget($g(i,"imageInline"),i,t("image widget"));}}),i["for"]("downcast").add(nm(n,"imageInline","src")).add(nm(n,"imageInline","alt")).add(im(n,"imageInline")),i["for"]("upcast").elementToElement({view:Yg(e,"imageInline"),model:function model(e,_ref57){var t=_ref57.writer;return t.createElement("imageInline",{src:e.getAttribute("src")});}});}},{key:"_setupClipboardIntegration",value:function _setupClipboardIntegration(){var e=this.editor,t=e.model,i=e.editing.view,n=e.plugins.get("ImageUtils");this.listenTo(e.plugins.get("ClipboardPipeline"),"inputTransformation",function(o,r){var s=Array.from(r.content.getChildren());var a;if(!s.every(n.isBlockImageView))return;a=r.targetRanges?e.editing.mapper.toModelRange(r.targetRanges[0]):t.document.selection.getFirstRange();var c=t.createSelection(a);if("imageInline"===Gg(t.schema,c)){var _e264=new gh(i.document),_t250=s.map(function(t){return 1===t.childCount?(Array.from(t.getAttributes()).forEach(function(i){return _e264.setAttribute.apply(_e264,_toConsumableArray(i).concat([n.findViewImgElement(t)]));}),t.getChild(0)):t;});r.content=_e264.createDocumentFragment(_t250);}});}}],[{key:"requires",get:function get(){return[sm,Kg,_h];}},{key:"pluginName",get:function get(){return"ImageInlineEditing";}}]);return dm;}(Qe);var hm=/*#__PURE__*/function(_Qe43){_inherits(hm,_Qe43);var _super145=_createSuper(hm);function hm(){_classCallCheck(this,hm);return _super145.apply(this,arguments);}_createClass(hm,null,[{key:"requires",get:function get(){return[dm,eu,tm];}},{key:"pluginName",get:function get(){return"ImageInline";}}]);return hm;}(Qe);function um(e){var _iterator349=_createForOfIteratorHelper(e.getChildren()),_step349;try{for(_iterator349.s();!(_step349=_iterator349.n()).done;){var _t251=_step349.value;if(_t251&&_t251.is("element","caption"))return _t251;}}catch(err){_iterator349.e(err);}finally{_iterator349.f();}return null;}function gm(e,t){var i=t.getFirstPosition().findAncestor("caption");return i&&e.isBlockImage(i.parent)?i:null;}var mm=/*#__PURE__*/function(_Ze17){_inherits(mm,_Ze17);var _super146=_createSuper(mm);function mm(){_classCallCheck(this,mm);return _super146.apply(this,arguments);}_createClass(mm,[{key:"refresh",value:function refresh(){var e=this.editor,t=e.plugins.get("ImageUtils");if(!e.plugins.has(cm))return this.isEnabled=!1,void(this.value=!1);var i=e.model.document.selection,n=i.getSelectedElement();if(!n){var _e265=gm(t,i);return this.isEnabled=!!_e265,void(this.value=!!_e265);}this.isEnabled=this.editor.plugins.get("ImageUtils").isImage(n),this.isEnabled?this.value=!!um(n):this.value=!1;}},{key:"execute",value:function execute(){var _this224=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=e.focusCaptionOnShow;this.editor.model.change(function(e){_this224.value?_this224._hideImageCaption(e):_this224._showImageCaption(e,t);});}},{key:"_showImageCaption",value:function _showImageCaption(e,t){var i=this.editor.model.document.selection,n=this.editor.plugins.get("ImageCaptionEditing");var o=i.getSelectedElement();var r=n._getSavedCaption(o);this.editor.plugins.get("ImageUtils").isInlineImage(o)&&(this.editor.execute("imageTypeBlock"),o=i.getSelectedElement());var s=r||e.createElement("caption");e.append(s,o),t&&e.setSelection(s,"in");}},{key:"_hideImageCaption",value:function _hideImageCaption(e){var t=this.editor,i=t.model.document.selection,n=t.plugins.get("ImageCaptionEditing"),o=t.plugins.get("ImageUtils");var r,s=i.getSelectedElement();s?r=um(s):(r=gm(o,i),s=r.parent),n._saveCaption(s,r),e.setSelection(s,"on"),e.remove(r);}}]);return mm;}(Ze);var fm=/*#__PURE__*/function(_Qe44){_inherits(fm,_Qe44);var _super147=_createSuper(fm);function fm(e){var _this225;_classCallCheck(this,fm);_this225=_super147.call(this,e),_this225._savedCaptionsMap=new WeakMap();return _this225;}_createClass(fm,[{key:"init",value:function init(){var e=this.editor,t=e.model.schema;t.isRegistered("caption")?t.extend("caption",{allowIn:"imageBlock"}):t.register("caption",{allowIn:"imageBlock",allowContentOf:"$block",isLimit:!0}),e.commands.add("toggleImageCaption",new mm(this.editor)),this._setupConversion(),this._setupImageTypeCommandsIntegration();}},{key:"_setupConversion",value:function _setupConversion(){var e=this.editor,t=e.editing.view,i=e.plugins.get("ImageUtils"),n=e.t;e.conversion["for"]("upcast").elementToElement({view:function view(e){return function(e,t){return"figcaption"==t.name&&e.isBlockImageView(t.parent)?{name:!0}:null;}(i,e);},model:"caption"}),e.conversion["for"]("dataDowncast").elementToElement({model:"caption",view:function view(e,_ref58){var t=_ref58.writer;return i.isBlockImage(e.parent)?t.createContainerElement("figcaption"):null;}}),e.conversion["for"]("editingDowncast").elementToElement({model:"caption",view:function view(e,_ref59){var o=_ref59.writer;if(!i.isBlockImage(e.parent))return null;var r=o.createEditableElement("figcaption");o.setCustomProperty("imageCaption",!0,r),Kd({view:t,element:r,text:n("Enter image caption"),keepOnFocus:!0});var s=Bh(r,o);return Vh(s,o,function(e,t,i){return i.addClass(en(t.classes),e);},function(e,t,i){return i.removeClass(en(t.classes),e);}),s;}}),e.editing.mapper.on("modelToViewPosition",pm(t)),e.data.mapper.on("modelToViewPosition",pm(t));}},{key:"_setupImageTypeCommandsIntegration",value:function _setupImageTypeCommandsIntegration(){var _this226=this;var e=this.editor,t=e.plugins.get("ImageUtils"),i=e.commands.get("imageTypeInline"),n=e.commands.get("imageTypeBlock"),o=function o(e){if(!e["return"])return;var _e$return=e["return"],i=_e$return.oldElement,n=_e$return.newElement;if(!i)return;if(t.isBlockImage(i)){var _e266=um(i);if(_e266)return void _this226._saveCaption(n,_e266);}var o=_this226._getSavedCaption(i);o&&_this226._saveCaption(n,o);};i&&this.listenTo(i,"execute",o,{priority:"low"}),n&&this.listenTo(n,"execute",o,{priority:"low"});}},{key:"_getSavedCaption",value:function _getSavedCaption(e){var t=this._savedCaptionsMap.get(e);return t?Js.fromJSON(t):null;}},{key:"_saveCaption",value:function _saveCaption(e,t){this._savedCaptionsMap.set(e,t.toJSON());}}],[{key:"requires",get:function get(){return[Kg];}},{key:"pluginName",get:function get(){return"ImageCaptionEditing";}}]);return fm;}(Qe);function pm(e){return function(t,i){var n=i.modelPosition,o=n.parent;if(!o.is("element","imageBlock"))return;var r=i.mapper.toViewElement(o);i.viewPosition=e.createPositionAt(r,n.offset+1);};}var bm=/*#__PURE__*/function(_Qe45){_inherits(bm,_Qe45);var _super148=_createSuper(bm);function bm(){_classCallCheck(this,bm);return _super148.apply(this,arguments);}_createClass(bm,[{key:"init",value:function init(){var _this227=this;var e=this.editor,t=e.editing.view,i=e.plugins.get("ImageUtils"),n=e.t;e.ui.componentFactory.add("toggleImageCaption",function(o){var r=e.commands.get("toggleImageCaption"),s=new ed(o);return s.set({icon:Tl.caption,tooltip:!0,isToggleable:!0}),s.bind("isOn","isEnabled").to(r,"value","isEnabled"),s.bind("label").to(r,"value",function(e){return n(e?"Toggle caption off":"Toggle caption on");}),_this227.listenTo(s,"execute",function(){e.execute("toggleImageCaption",{focusCaptionOnShow:!0});var n=gm(i,e.model.document.selection);if(n){var _i264=e.editing.mapper.toViewElement(n);t.scrollToTheSelection(),t.change(function(e){e.addClass("image__caption_highlighted",_i264);});}}),s;});}}],[{key:"requires",get:function get(){return[Kg];}},{key:"pluginName",get:function get(){return"ImageCaptionUI";}}]);return bm;}(Qe);i(78);var wm=/*#__PURE__*/function(_Ze18){_inherits(wm,_Ze18);var _super149=_createSuper(wm);function wm(e,t){var _this228;_classCallCheck(this,wm);_this228=_super149.call(this,e),_this228._defaultStyles={imageBlock:!1,imageInline:!1},_this228._styles=new Map(t.map(function(e){if(e.isDefault){var _iterator350=_createForOfIteratorHelper(e.modelElements),_step350;try{for(_iterator350.s();!(_step350=_iterator350.n()).done;){var _t252=_step350.value;_this228._defaultStyles[_t252]=e.name;}}catch(err){_iterator350.e(err);}finally{_iterator350.f();}}return[e.name,e];}));return _this228;}_createClass(wm,[{key:"refresh",value:function refresh(){var e=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!e,this.isEnabled?e.hasAttribute("imageStyle")?this.value=e.getAttribute("imageStyle"):this.value=this._defaultStyles[e.name]:this.value=!1;}},{key:"execute",value:function execute(){var _this229=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=this.editor,i=t.model,n=t.plugins.get("ImageUtils");i.change(function(t){var o=e.value;var r=n.getClosestSelectedImageElement(i.document.selection);o&&_this229.shouldConvertImageType(o,r)&&(_this229.editor.execute(n.isBlockImage(r)?"imageTypeInline":"imageTypeBlock"),r=n.getClosestSelectedImageElement(i.document.selection)),!o||_this229._styles.get(o).isDefault?t.removeAttribute("imageStyle",r):t.setAttribute("imageStyle",o,r);});}},{key:"shouldConvertImageType",value:function shouldConvertImageType(e,t){return!this._styles.get(e).modelElements.includes(t.name);}}]);return wm;}(Ze);var km=Tl.objectFullWidth,_m=Tl.objectInline,vm=Tl.objectLeft,ym=Tl.objectRight,xm=Tl.objectCenter,Am=Tl.objectBlockLeft,Cm=Tl.objectBlockRight,Tm={inline:{name:"inline",title:"In line",icon:_m,modelElements:["imageInline"],isDefault:!0},alignLeft:{name:"alignLeft",title:"Left aligned image",icon:vm,modelElements:["imageBlock","imageInline"],className:"image-style-align-left"},alignBlockLeft:{name:"alignBlockLeft",title:"Left aligned image",icon:Am,modelElements:["imageBlock"],className:"image-style-block-align-left"},alignCenter:{name:"alignCenter",title:"Centered image",icon:xm,modelElements:["imageBlock"],className:"image-style-align-center"},alignRight:{name:"alignRight",title:"Right aligned image",icon:ym,modelElements:["imageBlock","imageInline"],className:"image-style-align-right"},alignBlockRight:{name:"alignBlockRight",title:"Right aligned image",icon:Cm,modelElements:["imageBlock"],className:"image-style-block-align-right"},block:{name:"block",title:"Centered image",icon:xm,modelElements:["imageBlock"],isDefault:!0},side:{name:"side",title:"Side image",icon:ym,modelElements:["imageBlock"],className:"image-style-side"}},Em={full:km,left:Am,right:Cm,center:xm,inlineLeft:vm,inlineRight:ym,inline:_m},Im=[{name:"imageStyle:wrapText",title:"Wrap text",defaultItem:"imageStyle:alignLeft",items:["imageStyle:alignLeft","imageStyle:alignRight"]},{name:"imageStyle:breakText",title:"Break text",defaultItem:"imageStyle:block",items:["imageStyle:alignBlockLeft","imageStyle:block","imageStyle:alignBlockRight"]}];function Sm(e){Object(c.b)("image-style-configuration-definition-invalid",e);}var Pm={normalizeStyles:function normalizeStyles(e){return(e.configuredStyles.options||[]).map(function(e){return function(e){e="string"==typeof e?Tm[e]?_objectSpread({},Tm[e]):{name:e}:function(e,t){var i=_objectSpread({},t);for(var _n159 in e){Object.prototype.hasOwnProperty.call(t,_n159)||(i[_n159]=e[_n159]);}return i;}(Tm[e.name],e);"string"==typeof e.icon&&(e.icon=Em[e.icon]||e.icon);return e;}(e);}).filter(function(t){return function(e,_ref60){var t=_ref60.isBlockPluginLoaded,i=_ref60.isInlinePluginLoaded;var n=e.modelElements,o=e.name;if(!(n&&n.length&&o))return Sm({style:e}),!1;{var _o97=[t?"imageBlock":null,i?"imageInline":null];if(!n.some(function(e){return _o97.includes(e);}))return Object(c.b)("image-style-missing-dependency",{style:e,missingPlugins:n.map(function(e){return"imageBlock"===e?"ImageBlockEditing":"ImageInlineEditing";})}),!1;}return!0;}(t,e);});},getDefaultStylesConfiguration:function getDefaultStylesConfiguration(e,t){return e&&t?{options:["inline","alignLeft","alignRight","alignCenter","alignBlockLeft","alignBlockRight","block","side"]}:e?{options:["block","side"]}:t?{options:["inline","alignLeft","alignRight"]}:{};},getDefaultDropdownDefinitions:function getDefaultDropdownDefinitions(e){return e.has("ImageBlockEditing")&&e.has("ImageInlineEditing")?[].concat(Im):[];},warnInvalidStyle:Sm,DEFAULT_OPTIONS:Tm,DEFAULT_ICONS:Em,DEFAULT_DROPDOWN_DEFINITIONS:Im};function Mm(e,t){var _iterator351=_createForOfIteratorHelper(t),_step351;try{for(_iterator351.s();!(_step351=_iterator351.n()).done;){var _i265=_step351.value;if(_i265.name===e)return _i265;}}catch(err){_iterator351.e(err);}finally{_iterator351.f();}}var Nm=/*#__PURE__*/function(_Qe46){_inherits(Nm,_Qe46);var _super150=_createSuper(Nm);function Nm(){_classCallCheck(this,Nm);return _super150.apply(this,arguments);}_createClass(Nm,[{key:"init",value:function init(){var e=Pm.normalizeStyles,t=Pm.getDefaultStylesConfiguration,i=this.editor,n=i.plugins.has("ImageBlockEditing"),o=i.plugins.has("ImageInlineEditing");i.config.define("image.styles",t(n,o)),this.normalizedStyles=e({configuredStyles:i.config.get("image.styles"),isBlockPluginLoaded:n,isInlinePluginLoaded:o}),this._setupConversion(n,o),this._setupPostFixer(),i.commands.add("imageStyle",new wm(i,this.normalizedStyles));}},{key:"_setupConversion",value:function _setupConversion(e,t){var i=this.editor,n=i.model.schema,o=(r=this.normalizedStyles,function(e,t,i){if(!i.consumable.consume(t.item,e.name))return;var n=Mm(t.attributeNewValue,r),o=Mm(t.attributeOldValue,r),s=i.mapper.toViewElement(t.item),a=i.writer;o&&a.removeClass(o.className,s),n&&a.addClass(n.className,s);});var r;var s=function(e){var t={imageInline:e.filter(function(e){return!e.isDefault&&e.modelElements.includes("imageInline");}),imageBlock:e.filter(function(e){return!e.isDefault&&e.modelElements.includes("imageBlock");})};return function(e,i,n){if(!i.modelRange)return;var o=i.viewItem,r=Ns(i.modelRange.getItems());if(r&&n.schema.checkAttribute(r,"imageStyle")){var _iterator352=_createForOfIteratorHelper(t[r.name]),_step352;try{for(_iterator352.s();!(_step352=_iterator352.n()).done;){var _e267=_step352.value;n.consumable.consume(o,{classes:_e267.className})&&n.writer.setAttribute("imageStyle",_e267.name,r);}}catch(err){_iterator352.e(err);}finally{_iterator352.f();}}};}(this.normalizedStyles);i.editing.downcastDispatcher.on("attribute:imageStyle",o),i.data.downcastDispatcher.on("attribute:imageStyle",o),e&&(n.extend("imageBlock",{allowAttributes:"imageStyle"}),i.data.upcastDispatcher.on("element:figure",s,{priority:"low"})),t&&(n.extend("imageInline",{allowAttributes:"imageStyle"}),i.data.upcastDispatcher.on("element:img",s,{priority:"low"}));}},{key:"_setupPostFixer",value:function _setupPostFixer(){var e=this.editor,t=e.model.document,i=e.plugins.get(Kg),n=new Map(this.normalizedStyles.map(function(e){return[e.name,e];}));t.registerPostFixer(function(e){var o=!1;var _iterator353=_createForOfIteratorHelper(t.differ.getChanges()),_step353;try{for(_iterator353.s();!(_step353=_iterator353.n()).done;){var _r54=_step353.value;if("insert"==_r54.type||"attribute"==_r54.type&&"imageStyle"==_r54.attributeKey){var _t253="insert"==_r54.type?_r54.position.nodeAfter:_r54.range.start.nodeAfter;if(_t253&&_t253.is("element","paragraph")&&_t253.childCount>0&&(_t253=_t253.getChild(0)),!i.isImage(_t253))continue;var _s31=_t253.getAttribute("imageStyle");if(!_s31)continue;var _a19=n.get(_s31);_a19&&_a19.modelElements.includes(_t253.name)||(e.removeAttribute("imageStyle",_t253),o=!0);}}}catch(err){_iterator353.e(err);}finally{_iterator353.f();}return o;});}}],[{key:"pluginName",get:function get(){return"ImageStyleEditing";}},{key:"requires",get:function get(){return[Kg];}}]);return Nm;}(Qe);i(80);var Rm=/*#__PURE__*/function(_Qe47){_inherits(Rm,_Qe47);var _super151=_createSuper(Rm);function Rm(){_classCallCheck(this,Rm);return _super151.apply(this,arguments);}_createClass(Rm,[{key:"localizedDefaultStylesTitles",get:function get(){var e=this.editor.t;return{"Wrap text":e("Wrap text"),"Break text":e("Break text"),"In line":e("In line"),"Full size image":e("Full size image"),"Side image":e("Side image"),"Left aligned image":e("Left aligned image"),"Centered image":e("Centered image"),"Right aligned image":e("Right aligned image")};}},{key:"init",value:function init(){var e=this.editor.plugins,t=this.editor.config.get("image.toolbar")||[],i=Om(e.get("ImageStyleEditing").normalizedStyles,this.localizedDefaultStylesTitles);var _iterator354=_createForOfIteratorHelper(i),_step354;try{for(_iterator354.s();!(_step354=_iterator354.n()).done;){var _e268=_step354.value;this._createButton(_e268);}}catch(err){_iterator354.e(err);}finally{_iterator354.f();}var n=Om([].concat(_toConsumableArray(t.filter(w)),_toConsumableArray(Pm.getDefaultDropdownDefinitions(e))),this.localizedDefaultStylesTitles);var _iterator355=_createForOfIteratorHelper(n),_step355;try{for(_iterator355.s();!(_step355=_iterator355.n()).done;){var _e269=_step355.value;this._createDropdown(_e269,i);}}catch(err){_iterator355.e(err);}finally{_iterator355.f();}}},{key:"_createDropdown",value:function _createDropdown(e,t){var i=this.editor.ui.componentFactory;i.add(e.name,function(n){var o;var r=e.defaultItem,s=e.items,a=e.title,c=s.filter(function(e){return t.find(function(_ref61){var t=_ref61.name;return zm(t)===e;});}).map(function(e){var t=i.create(e);return e===r&&(o=t),t;});s.length!==c.length&&Pm.warnInvalidStyle({dropdown:e});var l=xd(n,sd),d=l.buttonView;return Ad(l,c),d.set({label:Dm(a,o.label),"class":null,tooltip:!0}),d.bind("icon").toMany(c,"isOn",function(){for(var _len23=arguments.length,e=new Array(_len23),_key23=0;_key23<_len23;_key23++){e[_key23]=arguments[_key23];}var t=e.findIndex(Z);return t<0?o.icon:c[t].icon;}),d.bind("label").toMany(c,"isOn",function(){for(var _len24=arguments.length,e=new Array(_len24),_key24=0;_key24<_len24;_key24++){e[_key24]=arguments[_key24];}var t=e.findIndex(Z);return Dm(a,t<0?o.label:c[t].label);}),d.bind("isOn").toMany(c,"isOn",function(){for(var _len25=arguments.length,e=new Array(_len25),_key25=0;_key25<_len25;_key25++){e[_key25]=arguments[_key25];}return e.some(Z);}),d.bind("class").toMany(c,"isOn",function(){for(var _len26=arguments.length,e=new Array(_len26),_key26=0;_key26<_len26;_key26++){e[_key26]=arguments[_key26];}return e.some(Z)?"ck-splitbutton_flatten":null;}),d.on("execute",function(){c.some(function(_ref62){var e=_ref62.isOn;return e;})?l.isOpen=!l.isOpen:o.fire("execute");}),l.bind("isEnabled").toMany(c,"isEnabled",function(){for(var _len27=arguments.length,e=new Array(_len27),_key27=0;_key27<_len27;_key27++){e[_key27]=arguments[_key27];}return e.some(Z);}),l;});}},{key:"_createButton",value:function _createButton(e){var _this230=this;var t=e.name;this.editor.ui.componentFactory.add(zm(t),function(i){var n=_this230.editor.commands.get("imageStyle"),o=new ed(i);return o.set({label:e.title,icon:e.icon,tooltip:!0,isToggleable:!0}),o.bind("isEnabled").to(n,"isEnabled"),o.bind("isOn").to(n,"value",function(e){return e===t;}),o.on("execute",_this230._executeCommand.bind(_this230,t)),o;});}},{key:"_executeCommand",value:function _executeCommand(e){this.editor.execute("imageStyle",{value:e}),this.editor.editing.view.focus();}}],[{key:"requires",get:function get(){return[Nm];}},{key:"pluginName",get:function get(){return"ImageStyleUI";}}]);return Rm;}(Qe);function Om(e,t){var _iterator356=_createForOfIteratorHelper(e),_step356;try{for(_iterator356.s();!(_step356=_iterator356.n()).done;){var _i266=_step356.value;t[_i266.title]&&(_i266.title=t[_i266.title]);}}catch(err){_iterator356.e(err);}finally{_iterator356.f();}return e;}function zm(e){return"imageStyle:"+e;}function Dm(e,t){return(e?e+": ":"")+t;}function Lm(e){var t=e.map(function(e){return e.replace("+","\\+");});return new RegExp("^image\\/(".concat(t.join("|"),")$"));}function Vm(e){return new Promise(function(t,i){var n=e.getAttribute("src");fetch(n).then(function(e){return e.blob();}).then(function(e){var i=jm(e,n),o=i.replace("image/",""),r=new File([e],"image."+o,{type:i});t(r);})["catch"](function(e){return e&&"TypeError"===e.name?function(e){return function(e){return new Promise(function(t,i){var n=vr.document.createElement("img");n.addEventListener("load",function(){var e=vr.document.createElement("canvas");e.width=n.width,e.height=n.height;e.getContext("2d").drawImage(n,0,0),e.toBlob(function(e){return e?t(e):i();});}),n.addEventListener("error",function(){return i();}),n.src=e;});}(e).then(function(t){var i=jm(t,e),n=i.replace("image/","");return new File([t],"image."+n,{type:i});});}(n).then(t)["catch"](i):i(e);});});}function jm(e,t){return e.type?e.type:t.match(/data:(image\/\w+);base64/)?t.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg";}var Bm=/*#__PURE__*/function(_Qe48){_inherits(Bm,_Qe48);var _super152=_createSuper(Bm);function Bm(){_classCallCheck(this,Bm);return _super152.apply(this,arguments);}_createClass(Bm,[{key:"init",value:function init(){var e=this.editor,t=e.t,i=function i(_i267){var n=new sg(_i267),o=e.commands.get("uploadImage"),r=e.config.get("image.upload.types"),s=Lm(r);return n.set({acceptedType:r.map(function(e){return"image/"+e;}).join(","),allowMultipleFiles:!0}),n.buttonView.set({label:t("Insert image"),icon:Tl.image,tooltip:!0}),n.buttonView.bind("isEnabled").to(o),n.on("done",function(t,i){var n=Array.from(i).filter(function(e){return s.test(e.type);});n.length&&e.execute("uploadImage",{file:n});}),n;};e.ui.componentFactory.add("uploadImage",i),e.ui.componentFactory.add("imageUpload",i);}}],[{key:"pluginName",get:function get(){return"ImageUploadUI";}}]);return Bm;}(Qe);i(82),i(84),i(86);var Fm=/*#__PURE__*/function(_Qe49){_inherits(Fm,_Qe49);var _super153=_createSuper(Fm);function Fm(e){var _this231;_classCallCheck(this,Fm);_this231=_super153.call(this,e),_this231.placeholder="data:image/svg+xml;utf8,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 250"><rect rx="4"/></svg>');return _this231;}_createClass(Fm,[{key:"init",value:function init(){var _this232=this;var e=this.editor;e.plugins.has("ImageBlockEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageBlock",function(){return _this232.uploadStatusChange.apply(_this232,arguments);}),e.plugins.has("ImageInlineEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageInline",function(){return _this232.uploadStatusChange.apply(_this232,arguments);});}},{key:"uploadStatusChange",value:function uploadStatusChange(e,t,i){var n=this.editor,o=t.item,r=o.getAttribute("uploadId");if(!i.consumable.consume(t.item,e.name))return;var s=n.plugins.get("ImageUtils"),a=n.plugins.get(og),c=r?t.attributeNewValue:null,l=this.placeholder,d=n.editing.mapper.toViewElement(o),h=i.writer;if("reading"==c)return Hm(d,h),void Um(s,l,d,h);if("uploading"==c){var _e270=a.loaders.get(r);return Hm(d,h),void(_e270?(Wm(d,h),function(e,t,i,n){var o=function(e){var t=e.createUIElement("div",{"class":"ck-progress-bar"});return e.setCustomProperty("progressBar",!0,t),t;}(t);t.insert(t.createPositionAt(e,"end"),o),i.on("change:uploadedPercent",function(e,t,i){n.change(function(e){e.setStyle("width",i+"%",o);});});}(d,h,_e270,n.editing.view),function(e,t,i,n){if(n.data){var _o98=e.findViewImgElement(t);i.setAttribute("src",n.data,_o98);}}(s,d,h,_e270)):Um(s,l,d,h));}"complete"==c&&a.loaders.get(r)&&function(e,t,i){var n=t.createUIElement("div",{"class":"ck-image-upload-complete-icon"});t.insert(t.createPositionAt(e,"end"),n),setTimeout(function(){i.change(function(e){return e.remove(e.createRangeOn(n));});},3e3);}(d,h,n.editing.view),function(e,t){$m(e,t,"progressBar");}(d,h),Wm(d,h),function(e,t){t.removeClass("ck-appear",e);}(d,h);}}],[{key:"pluginName",get:function get(){return"ImageUploadProgress";}}]);return Fm;}(Qe);function Hm(e,t){e.hasClass("ck-appear")||t.addClass("ck-appear",e);}function Um(e,t,i,n){i.hasClass("ck-image-upload-placeholder")||n.addClass("ck-image-upload-placeholder",i);var o=e.findViewImgElement(i);o.getAttribute("src")!==t&&n.setAttribute("src",t,o),qm(i,"placeholder")||n.insert(n.createPositionAfter(o),function(e){var t=e.createUIElement("div",{"class":"ck-upload-placeholder-loader"});return e.setCustomProperty("placeholder",!0,t),t;}(n));}function Wm(e,t){e.hasClass("ck-image-upload-placeholder")&&t.removeClass("ck-image-upload-placeholder",e),$m(e,t,"placeholder");}function qm(e,t){var _iterator357=_createForOfIteratorHelper(e.getChildren()),_step357;try{for(_iterator357.s();!(_step357=_iterator357.n()).done;){var _i268=_step357.value;if(_i268.getCustomProperty(t))return _i268;}}catch(err){_iterator357.e(err);}finally{_iterator357.f();}}function $m(e,t,i){var n=qm(e,i);n&&t.remove(t.createRangeOn(n));}var Ym=/*#__PURE__*/function(_Ze19){_inherits(Ym,_Ze19);var _super154=_createSuper(Ym);function Ym(){_classCallCheck(this,Ym);return _super154.apply(this,arguments);}_createClass(Ym,[{key:"refresh",value:function refresh(){var e=this.editor,t=e.plugins.get("ImageUtils"),i=e.model.document.selection.getSelectedElement();this.isEnabled=t.isImageAllowed()||t.isImage(i);}},{key:"execute",value:function execute(e){var _this233=this;var t=en(e.file),i=this.editor.model.document.selection,n=this.editor.plugins.get("ImageUtils"),o=Object.fromEntries(i.getAttributes());t.forEach(function(e,t){var r=i.getSelectedElement();if(t&&r&&n.isImage(r)){var _t254=_this233.editor.model.createPositionAfter(r);_this233._uploadImage(e,o,_t254);}else _this233._uploadImage(e,o);});}},{key:"_uploadImage",value:function _uploadImage(e,t,i){var n=this.editor,o=n.plugins.get(og).createLoader(e),r=n.plugins.get("ImageUtils");o&&r.insertImage(_objectSpread(_objectSpread({},t),{},{uploadId:o.id}),i);}}]);return Ym;}(Ze);var Gm=/*#__PURE__*/function(_Qe50){_inherits(Gm,_Qe50);var _super155=_createSuper(Gm);function Gm(e){var _this234;_classCallCheck(this,Gm);_this234=_super155.call(this,e),e.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}}),_this234._uploadImageElements=new Map();return _this234;}_createClass(Gm,[{key:"init",value:function init(){var _this235=this;var e=this.editor,t=e.model.document,i=e.conversion,n=e.plugins.get(og),o=e.plugins.get("ImageUtils"),r=Lm(e.config.get("image.upload.types")),s=new Ym(e);e.commands.add("uploadImage",s),e.commands.add("imageUpload",s),i["for"]("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}),this.listenTo(e.editing.view.document,"clipboardInput",function(t,i){if(n=i.dataTransfer,Array.from(n.types).includes("text/html")&&""!==n.getData("text/html"))return;var n;var o=Array.from(i.dataTransfer.files).filter(function(e){return!!e&&r.test(e.type);});o.length&&(t.stop(),e.model.change(function(t){i.targetRanges&&t.setSelection(i.targetRanges.map(function(t){return e.editing.mapper.toModelRange(t);})),e.model.enqueueChange("default",function(){e.execute("uploadImage",{file:o});});}));}),this.listenTo(e.plugins.get("ClipboardPipeline"),"inputTransformation",function(t,i){var r=Array.from(e.editing.view.createRangeIn(i.content)).filter(function(e){return function(e,t){return!(!e.isInlineImageView(t)||!t.getAttribute("src"))&&(t.getAttribute("src").match(/^data:image\/\w+;base64,/g)||t.getAttribute("src").match(/^blob:/g));}(o,e.item)&&!e.item.getAttribute("uploadProcessed");}).map(function(e){return{promise:Vm(e.item),imageElement:e.item};});if(!r.length)return;var s=new gh(e.editing.view.document);var _iterator358=_createForOfIteratorHelper(r),_step358;try{for(_iterator358.s();!(_step358=_iterator358.n()).done;){var _e271=_step358.value;s.setAttribute("uploadProcessed",!0,_e271.imageElement);var _t255=n.createLoader(_e271.promise);_t255&&(s.setAttribute("src","",_e271.imageElement),s.setAttribute("uploadId",_t255.id,_e271.imageElement));}}catch(err){_iterator358.e(err);}finally{_iterator358.f();}}),e.editing.view.document.on("dragover",function(e,t){t.preventDefault();}),t.on("change",function(){var i=t.differ.getChanges({includeChangesInGraveyard:!0}).reverse(),o=new Set();var _iterator359=_createForOfIteratorHelper(i),_step359;try{for(_iterator359.s();!(_step359=_iterator359.n()).done;){var _t256=_step359.value;if("insert"==_t256.type&&"$text"!=_t256.name){var _i269=_t256.position.nodeAfter,_r55="$graveyard"==_t256.position.root.rootName;var _iterator360=_createForOfIteratorHelper(Km(e,_i269)),_step360;try{for(_iterator360.s();!(_step360=_iterator360.n()).done;){var _t257=_step360.value;var _e272=_t257.getAttribute("uploadId");if(!_e272)continue;var _i270=n.loaders.get(_e272);_i270&&(_r55?o.has(_e272)||_i270.abort():(o.add(_e272),_this235._uploadImageElements.set(_e272,_t257),"idle"==_i270.status&&_this235._readAndUpload(_i270)));}}catch(err){_iterator360.e(err);}finally{_iterator360.f();}}}}catch(err){_iterator359.e(err);}finally{_iterator359.f();}}),this.on("uploadComplete",function(e,_ref63){var t=_ref63.imageElement,i=_ref63.data;var n=i.urls?i.urls:i;_this235.editor.model.change(function(e){e.setAttribute("src",n["default"],t),_this235._parseAndSetSrcsetAttributeOnImage(n,t,e);});},{priority:"low"});}},{key:"afterInit",value:function afterInit(){var e=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&e.extend("imageBlock",{allowAttributes:["uploadId","uploadStatus"]}),this.editor.plugins.has("ImageInlineEditing")&&e.extend("imageInline",{allowAttributes:["uploadId","uploadStatus"]});}},{key:"_readAndUpload",value:function _readAndUpload(e){var _this236=this;var t=this.editor,i=t.model,n=t.locale.t,o=t.plugins.get(og),r=t.plugins.get(Od),s=t.plugins.get("ImageUtils"),a=this._uploadImageElements;return i.enqueueChange("transparent",function(t){t.setAttribute("uploadStatus","reading",a.get(e.id));}),e.read().then(function(){var n=e.upload(),o=a.get(e.id);if(So.isSafari){var _e273=t.editing.mapper.toViewElement(o),_i271=s.findViewImgElement(_e273);t.editing.view.once("render",function(){if(!_i271.parent)return;var e=t.editing.view.domConverter.mapViewToDom(_i271.parent);if(!e)return;var n=e.style.display;e.style.display="none",e._ckHack=e.offsetHeight,e.style.display=n;});}return i.enqueueChange("transparent",function(e){e.setAttribute("uploadStatus","uploading",o);}),n;}).then(function(t){i.enqueueChange("transparent",function(i){var n=a.get(e.id);i.setAttribute("uploadStatus","complete",n),_this236.fire("uploadComplete",{data:t,imageElement:n});}),c();})["catch"](function(t){if("error"!==e.status&&"aborted"!==e.status)throw t;"error"==e.status&&t&&r.showWarning(t,{title:n("Upload failed"),namespace:"upload"}),i.enqueueChange("transparent",function(t){t.remove(a.get(e.id));}),c();});function c(){i.enqueueChange("transparent",function(t){var i=a.get(e.id);t.removeAttribute("uploadId",i),t.removeAttribute("uploadStatus",i),a["delete"](e.id);}),o.destroyLoader(e);}}},{key:"_parseAndSetSrcsetAttributeOnImage",value:function _parseAndSetSrcsetAttributeOnImage(e,t,i){var n=0;var o=Object.keys(e).filter(function(e){var t=parseInt(e,10);if(!isNaN(t))return n=Math.max(n,t),!0;}).map(function(t){return"".concat(e[t]," ").concat(t,"w");}).join(", ");""!=o&&i.setAttribute("srcset",{data:o,width:n},t);}}],[{key:"requires",get:function get(){return[og,Od,_h,Kg];}},{key:"pluginName",get:function get(){return"ImageUploadEditing";}}]);return Gm;}(Qe);function Km(e,t){var i=e.plugins.get("ImageUtils");return Array.from(e.model.createRangeOn(t)).filter(function(e){return i.isImage(e.item);}).map(function(e){return e.item;});}var Qm=/*#__PURE__*/function(_Qe51){_inherits(Qm,_Qe51);var _super156=_createSuper(Qm);function Qm(){_classCallCheck(this,Qm);return _super156.apply(this,arguments);}_createClass(Qm,[{key:"init",value:function init(){var e=this.editor;e.commands.add("indent",new et(e)),e.commands.add("outdent",new et(e));}}],[{key:"pluginName",get:function get(){return"IndentEditing";}}]);return Qm;}(Qe);var Jm='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zM1.632 6.95 5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>',Zm='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zm1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>';var Xm=/*#__PURE__*/function(_Qe52){_inherits(Xm,_Qe52);var _super157=_createSuper(Xm);function Xm(){_classCallCheck(this,Xm);return _super157.apply(this,arguments);}_createClass(Xm,[{key:"init",value:function init(){var e=this.editor,t=e.locale,i=e.t,n="ltr"==t.uiLanguageDirection?Jm:Zm,o="ltr"==t.uiLanguageDirection?Zm:Jm;this._defineButton("indent",i("Increase indent"),n),this._defineButton("outdent",i("Decrease indent"),o);}},{key:"_defineButton",value:function _defineButton(e,t,i){var _this237=this;var n=this.editor;n.ui.componentFactory.add(e,function(o){var r=n.commands.get(e),s=new ed(o);return s.set({label:t,icon:i,tooltip:!0}),s.bind("isOn","isEnabled").to(r,"value","isEnabled"),_this237.listenTo(s,"execute",function(){n.execute(e),n.editing.view.focus();}),s;});}}],[{key:"pluginName",get:function get(){return"IndentUI";}}]);return Xm;}(Qe);var ef=/*#__PURE__*/function(){function ef(){_classCallCheck(this,ef);this._definitions=new Set();}_createClass(ef,[{key:"length",get:function get(){return this._definitions.size;}},{key:"add",value:function add(e){var _this238=this;Array.isArray(e)?e.forEach(function(e){return _this238._definitions.add(e);}):this._definitions.add(e);}},{key:"getDispatcher",value:function getDispatcher(){var _this239=this;return function(e){e.on("attribute:linkHref",function(e,t,i){if(!i.consumable.test(t.item,"attribute:linkHref"))return;var n=i.writer,o=n.document.selection;var _iterator361=_createForOfIteratorHelper(_this239._definitions),_step361;try{for(_iterator361.s();!(_step361=_iterator361.n()).done;){var _e274=_step361.value;var _r56=n.createAttributeElement("a",_e274.attributes,{priority:5});_e274.classes&&n.addClass(_e274.classes,_r56);for(var _t258 in _e274.styles){n.setStyle(_t258,_e274.styles[_t258],_r56);}n.setCustomProperty("link",!0,_r56),_e274.callback(t.attributeNewValue)?t.item.is("selection")?n.wrap(o.getFirstRange(),_r56):n.wrap(i.mapper.toViewRange(t.range),_r56):n.unwrap(i.mapper.toViewRange(t.range),_r56);}}catch(err){_iterator361.e(err);}finally{_iterator361.f();}},{priority:"high"});};}},{key:"getDispatcherForLinkedImage",value:function getDispatcherForLinkedImage(){var _this240=this;return function(e){e.on("attribute:linkHref:imageBlock",function(e,t,_ref64){var i=_ref64.writer,n=_ref64.mapper;var o=n.toViewElement(t.item),r=Array.from(o.getChildren()).find(function(e){return"a"===e.name;});var _iterator362=_createForOfIteratorHelper(_this240._definitions),_step362;try{for(_iterator362.s();!(_step362=_iterator362.n()).done;){var _e275=_step362.value;var _n160=gn(_e275.attributes);if(_e275.callback(t.attributeNewValue)){var _iterator363=_createForOfIteratorHelper(_n160),_step363;try{for(_iterator363.s();!(_step363=_iterator363.n()).done;){var _step363$value=_slicedToArray(_step363.value,2),_e276=_step363$value[0],_t260=_step363$value[1];"class"===_e276?i.addClass(_t260,r):i.setAttribute(_e276,_t260,r);}}catch(err){_iterator363.e(err);}finally{_iterator363.f();}_e275.classes&&i.addClass(_e275.classes,r);for(var _t259 in _e275.styles){i.setStyle(_t259,_e275.styles[_t259],r);}}else{var _iterator364=_createForOfIteratorHelper(_n160),_step364;try{for(_iterator364.s();!(_step364=_iterator364.n()).done;){var _step364$value=_slicedToArray(_step364.value,2),_e277=_step364$value[0],_t262=_step364$value[1];"class"===_e277?i.removeClass(_t262,r):i.removeAttribute(_e277,r);}}catch(err){_iterator364.e(err);}finally{_iterator364.f();}_e275.classes&&i.removeClass(_e275.classes,r);for(var _t261 in _e275.styles){i.removeStyle(_t261,r);}}}}catch(err){_iterator362.e(err);}finally{_iterator362.f();}});};}}]);return ef;}();var tf=function tf(e,t,i){var n=e.length;return i=void 0===i?n:i,!t&&i>=n?e:zn(e,t,i);},nf=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var of=function of(e){return nf.test(e);};var rf=function rf(e){return e.split("");},sf="[\\ud800-\\udfff]",af="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",cf="\\ud83c[\\udffb-\\udfff]",lf="[^\\ud800-\\udfff]",df="(?:\\ud83c[\\udde6-\\uddff]){2}",hf="[\\ud800-\\udbff][\\udc00-\\udfff]",uf="(?:"+af+"|"+cf+")"+"?",gf="[\\ufe0e\\ufe0f]?"+uf+("(?:\\u200d(?:"+[lf,df,hf].join("|")+")[\\ufe0e\\ufe0f]?"+uf+")*"),mf="(?:"+[lf+af+"?",af,df,hf,sf].join("|")+")",ff=RegExp(cf+"(?="+cf+")|"+mf+gf,"g");var pf=function pf(e){return e.match(ff)||[];};var bf=function bf(e){return of(e)?pf(e):rf(e);};var wf=function(e){return function(t){t=Pn(t);var i=of(t)?bf(t):void 0,n=i?i[0]:t.charAt(0),o=i?tf(i,1).join(""):t.slice(1);return n[e]()+o;};}("toUpperCase");var kf=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,_f=/^(?:(?:https?|ftps?|mailto):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))/i,vf=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,yf=/^((\w+:(\/{2,})?)|(\W))/i;function xf(e,_ref65){var t=_ref65.writer;var i=t.createAttributeElement("a",{href:e},{priority:5});return t.setCustomProperty("link",!0,i),i;}function Af(e){return function(e){return e.replace(kf,"").match(_f);}(e=String(e))?e:"#";}function Cf(e,t){return!!e&&t.checkAttribute(e.name,"linkHref");}function Tf(e,t){var i=(n=e,vf.test(n)?"mailto:":t);var n;var o=!!i&&!yf.test(e);return e&&o?i+e:e;}var Ef=/*#__PURE__*/function(_Ze20){_inherits(Ef,_Ze20);var _super158=_createSuper(Ef);function Ef(e){var _this241;_classCallCheck(this,Ef);_this241=_super158.call(this,e),_this241.manualDecorators=new Zi(),_this241.automaticDecorators=new ef();return _this241;}_createClass(Ef,[{key:"restoreManualDecoratorStates",value:function restoreManualDecoratorStates(){var _iterator365=_createForOfIteratorHelper(this.manualDecorators),_step365;try{for(_iterator365.s();!(_step365=_iterator365.n()).done;){var _e278=_step365.value;_e278.value=this._getDecoratorStateFromModel(_e278.id);}}catch(err){_iterator365.e(err);}finally{_iterator365.f();}}},{key:"refresh",value:function refresh(){var e=this.editor.model,t=e.document.selection,i=t.getSelectedElement()||Ns(t.getSelectedBlocks());Cf(i,e.schema)?(this.value=i.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttribute(i,"linkHref")):(this.value=t.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttributeInSelection(t,"linkHref"));var _iterator366=_createForOfIteratorHelper(this.manualDecorators),_step366;try{for(_iterator366.s();!(_step366=_iterator366.n()).done;){var _e279=_step366.value;_e279.value=this._getDecoratorStateFromModel(_e279.id);}}catch(err){_iterator366.e(err);}finally{_iterator366.f();}}},{key:"execute",value:function execute(e){var _this242=this;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=this.editor.model,n=i.document.selection,o=[],r=[];for(var _e280 in t){t[_e280]?o.push(_e280):r.push(_e280);}i.change(function(t){if(n.isCollapsed){var _s32=n.getFirstPosition();if(n.hasAttribute("linkHref")){var _a20=qu(_s32,"linkHref",n.getAttribute("linkHref"),i);t.setAttribute("linkHref",e,_a20),o.forEach(function(e){t.setAttribute(e,!0,_a20);}),r.forEach(function(e){t.removeAttribute(e,_a20);}),t.setSelection(t.createPositionAfter(_a20.end.nodeBefore));}else if(""!==e){var _r57=gn(n.getAttributes());_r57.set("linkHref",e),o.forEach(function(e){_r57.set(e,!0);});var _i$insertContent=i.insertContent(t.createText(e,_r57),_s32),_a21=_i$insertContent.end;t.setSelection(_a21);}["linkHref"].concat(o,r).forEach(function(e){t.removeSelectionAttribute(e);});}else{var _s33=i.schema.getValidRanges(n.getRanges(),"linkHref"),_a22=[];var _iterator367=_createForOfIteratorHelper(n.getSelectedBlocks()),_step367;try{for(_iterator367.s();!(_step367=_iterator367.n()).done;){var _e281=_step367.value;i.schema.checkAttribute(_e281,"linkHref")&&_a22.push(t.createRangeOn(_e281));}}catch(err){_iterator367.e(err);}finally{_iterator367.f();}var _c11=_a22.slice();var _iterator368=_createForOfIteratorHelper(_s33),_step368;try{for(_iterator368.s();!(_step368=_iterator368.n()).done;){var _e282=_step368.value;_this242._isRangeToUpdate(_e282,_a22)&&_c11.push(_e282);}}catch(err){_iterator368.e(err);}finally{_iterator368.f();}var _iterator369=_createForOfIteratorHelper(_c11),_step369;try{var _loop7=function _loop7(){var i=_step369.value;t.setAttribute("linkHref",e,i),o.forEach(function(e){t.setAttribute(e,!0,i);}),r.forEach(function(e){t.removeAttribute(e,i);});};for(_iterator369.s();!(_step369=_iterator369.n()).done;){_loop7();}}catch(err){_iterator369.e(err);}finally{_iterator369.f();}}});}},{key:"_getDecoratorStateFromModel",value:function _getDecoratorStateFromModel(e){var t=this.editor.model,i=t.document.selection,n=i.getSelectedElement();return Cf(n,t.schema)?n.getAttribute(e):i.getAttribute(e);}},{key:"_isRangeToUpdate",value:function _isRangeToUpdate(e,t){var _iterator370=_createForOfIteratorHelper(t),_step370;try{for(_iterator370.s();!(_step370=_iterator370.n()).done;){var _i272=_step370.value;if(_i272.containsRange(e))return!1;}}catch(err){_iterator370.e(err);}finally{_iterator370.f();}return!0;}}]);return Ef;}(Ze);var If=/*#__PURE__*/function(_Ze21){_inherits(If,_Ze21);var _super159=_createSuper(If);function If(){_classCallCheck(this,If);return _super159.apply(this,arguments);}_createClass(If,[{key:"refresh",value:function refresh(){var e=this.editor.model,t=e.document.selection,i=t.getSelectedElement();Cf(i,e.schema)?this.isEnabled=e.schema.checkAttribute(i,"linkHref"):this.isEnabled=e.schema.checkAttributeInSelection(t,"linkHref");}},{key:"execute",value:function execute(){var e=this.editor,t=this.editor.model,i=t.document.selection,n=e.commands.get("link");t.change(function(e){var o=i.isCollapsed?[qu(i.getFirstPosition(),"linkHref",i.getAttribute("linkHref"),t)]:t.schema.getValidRanges(i.getRanges(),"linkHref");var _iterator371=_createForOfIteratorHelper(o),_step371;try{for(_iterator371.s();!(_step371=_iterator371.n()).done;){var _t263=_step371.value;if(e.removeAttribute("linkHref",_t263),n){var _iterator372=_createForOfIteratorHelper(n.manualDecorators),_step372;try{for(_iterator372.s();!(_step372=_iterator372.n()).done;){var _i273=_step372.value;e.removeAttribute(_i273.id,_t263);}}catch(err){_iterator372.e(err);}finally{_iterator372.f();}}}}catch(err){_iterator371.e(err);}finally{_iterator371.f();}});}}]);return If;}(Ze);var Sf=/*#__PURE__*/function(){function Sf(_ref66){var e=_ref66.id,t=_ref66.label,i=_ref66.attributes,n=_ref66.classes,o=_ref66.styles,r=_ref66.defaultValue;_classCallCheck(this,Sf);this.id=e,this.set("value"),this.defaultValue=r,this.label=t,this.attributes=i,this.classes=n,this.styles=o;}_createClass(Sf,[{key:"_createPattern",value:function _createPattern(){return{attributes:this.attributes,classes:this.classes,styles:this.styles};}}]);return Sf;}();Ke(Sf,Ue);i(88);var Pf=/^(https?:)?\/\//;var Mf=/*#__PURE__*/function(_Qe53){_inherits(Mf,_Qe53);var _super160=_createSuper(Mf);function Mf(e){var _this243;_classCallCheck(this,Mf);_this243=_super160.call(this,e),e.config.define("link",{addTargetToExternalLinks:!1});return _this243;}_createClass(Mf,[{key:"init",value:function init(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:"linkHref"}),e.conversion["for"]("dataDowncast").attributeToElement({model:"linkHref",view:xf}),e.conversion["for"]("editingDowncast").attributeToElement({model:"linkHref",view:function view(e,t){return xf(Af(e),t);}}),e.conversion["for"]("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:function value(e){return e.getAttribute("href");}}}),e.commands.add("link",new Ef(e)),e.commands.add("unlink",new If(e));var t=function(e,t){var i={"Open in a new tab":e("Open in a new tab"),Downloadable:e("Downloadable")};return t.forEach(function(e){return e.label&&i[e.label]&&(e.label=i[e.label]),e;}),t;}(e.t,function(e){var t=[];if(e)for(var _i274=0,_Object$entries2=Object.entries(e);_i274<_Object$entries2.length;_i274++){var _Object$entries2$_i=_slicedToArray(_Object$entries2[_i274],2),_i275=_Object$entries2$_i[0],_n161=_Object$entries2$_i[1];var _e283=Object.assign({},_n161,{id:"link"+wf(_i275)});t.push(_e283);}return t;}(e.config.get("link.decorators")));this._enableAutomaticDecorators(t.filter(function(e){return"automatic"===e.mode;})),this._enableManualDecorators(t.filter(function(e){return"manual"===e.mode;}));e.plugins.get(Pu).registerAttribute("linkHref"),function(e,t,i,n){var o=e.editing.view,r=new Set();o.document.registerPostFixer(function(o){var s=e.model.document.selection;var a=!1;if(s.hasAttribute(t)){var _c12=qu(s.getFirstPosition(),t,s.getAttribute(t),e.model),_l6=e.editing.mapper.toViewRange(_c12);var _iterator373=_createForOfIteratorHelper(_l6.getItems()),_step373;try{for(_iterator373.s();!(_step373=_iterator373.n()).done;){var _e284=_step373.value;_e284.is("element",i)&&!_e284.hasClass(n)&&(o.addClass(n,_e284),r.add(_e284),a=!0);}}catch(err){_iterator373.e(err);}finally{_iterator373.f();}}return a;}),e.conversion["for"]("editingDowncast").add(function(e){function t(){o.change(function(e){var _iterator374=_createForOfIteratorHelper(r.values()),_step374;try{for(_iterator374.s();!(_step374=_iterator374.n()).done;){var _t264=_step374.value;e.removeClass(n,_t264),r["delete"](_t264);}}catch(err){_iterator374.e(err);}finally{_iterator374.f();}});}e.on("insert",t,{priority:"highest"}),e.on("remove",t,{priority:"highest"}),e.on("attribute",t,{priority:"highest"}),e.on("selection",t,{priority:"highest"});});}(e,"linkHref","a","ck-link_selected"),this._enableInsertContentSelectionAttributesFixer(),this._enableClickingAfterLink(),this._enableTypingOverLink(),this._handleDeleteContentAfterLink();}},{key:"_enableAutomaticDecorators",value:function _enableAutomaticDecorators(e){var t=this.editor,i=t.commands.get("link").automaticDecorators;t.config.get("link.addTargetToExternalLinks")&&i.add({id:"linkIsExternal",mode:"automatic",callback:function callback(e){return Pf.test(e);},attributes:{target:"_blank",rel:"noopener noreferrer"}}),i.add(e),i.length&&t.conversion["for"]("downcast").add(i.getDispatcher());}},{key:"_enableManualDecorators",value:function _enableManualDecorators(e){if(!e.length)return;var t=this.editor,i=t.commands.get("link").manualDecorators;e.forEach(function(e){t.model.schema.extend("$text",{allowAttributes:e.id}),e=new Sf(e),i.add(e),t.conversion["for"]("downcast").attributeToElement({model:e.id,view:function view(t,_ref67){var i=_ref67.writer;if(t){var _t265=i.createAttributeElement("a",e.attributes,{priority:5});e.classes&&i.addClass(e.classes,_t265);for(var _n162 in e.styles){i.setStyle(_n162,e.styles[_n162],_t265);}return i.setCustomProperty("link",!0,_t265),_t265;}}}),t.conversion["for"]("upcast").elementToAttribute({view:_objectSpread({name:"a"},e._createPattern()),model:{key:e.id}});});}},{key:"_enableInsertContentSelectionAttributesFixer",value:function _enableInsertContentSelectionAttributesFixer(){var e=this.editor.model,t=e.document.selection;this.listenTo(e,"insertContent",function(){var i=t.anchor.nodeBefore,n=t.anchor.nodeAfter;t.hasAttribute("linkHref")&&i&&i.hasAttribute("linkHref")&&(n&&n.hasAttribute("linkHref")||e.change(function(t){Nf(t,Of(e.schema));}));},{priority:"low"});}},{key:"_enableClickingAfterLink",value:function _enableClickingAfterLink(){var e=this.editor,t=e.model;e.editing.view.addObserver(uh);var i=!1;this.listenTo(e.editing.view.document,"mousedown",function(){i=!0;}),this.listenTo(e.editing.view.document,"selectionChange",function(){if(!i)return;i=!1;var e=t.document.selection;if(!e.isCollapsed)return;if(!e.hasAttribute("linkHref"))return;var n=e.getFirstPosition(),o=qu(n,"linkHref",e.getAttribute("linkHref"),t);(n.isTouching(o.start)||n.isTouching(o.end))&&t.change(function(e){Nf(e,Of(t.schema));});});}},{key:"_enableTypingOverLink",value:function _enableTypingOverLink(){var e=this.editor,t=e.editing.view;var i,n;this.listenTo(t.document,"delete",function(){n=!0;},{priority:"high"}),this.listenTo(e.model,"deleteContent",function(){var t=e.model.document.selection;t.isCollapsed||(n?n=!1:Rf(e)&&function(e){var t=e.document.selection,i=t.getFirstPosition(),n=t.getLastPosition(),o=i.nodeAfter;if(!o)return!1;if(!o.is("$text"))return!1;if(!o.hasAttribute("linkHref"))return!1;var r=n.textNode||n.nodeBefore;if(o===r)return!0;return qu(i,"linkHref",o.getAttribute("linkHref"),e).containsRange(e.createRange(i,n),!0);}(e.model)&&(i=t.getAttributes()));},{priority:"high"}),this.listenTo(e.model,"insertContent",function(t,_ref68){var _ref69=_slicedToArray(_ref68,1),o=_ref69[0];n=!1,Rf(e)&&i&&(e.model.change(function(e){var _iterator375=_createForOfIteratorHelper(i),_step375;try{for(_iterator375.s();!(_step375=_iterator375.n()).done;){var _step375$value=_slicedToArray(_step375.value,2),_t266=_step375$value[0],_n163=_step375$value[1];e.setAttribute(_t266,_n163,o);}}catch(err){_iterator375.e(err);}finally{_iterator375.f();}}),i=null);},{priority:"high"});}},{key:"_handleDeleteContentAfterLink",value:function _handleDeleteContentAfterLink(){var e=this.editor,t=e.model,i=t.document.selection,n=e.editing.view;var o=!1,r=!1;this.listenTo(n.document,"delete",function(e,t){r=t.domEvent.keyCode===No.backspace;},{priority:"high"}),this.listenTo(t,"deleteContent",function(){o=!1;var e=i.getFirstPosition(),n=i.getAttribute("linkHref");if(!n)return;var r=qu(e,"linkHref",n,t);o=r.containsPosition(e)||r.end.isEqual(e);},{priority:"high"}),this.listenTo(t,"deleteContent",function(){r&&(r=!1,o||e.model.enqueueChange(function(e){Nf(e,Of(t.schema));}));},{priority:"low"});}}],[{key:"pluginName",get:function get(){return"LinkEditing";}},{key:"requires",get:function get(){return[Pu,Tu,_h];}}]);return Mf;}(Qe);function Nf(e,t){e.removeSelectionAttribute("linkHref");var _iterator376=_createForOfIteratorHelper(t),_step376;try{for(_iterator376.s();!(_step376=_iterator376.n()).done;){var _i276=_step376.value;e.removeSelectionAttribute(_i276);}}catch(err){_iterator376.e(err);}finally{_iterator376.f();}}function Rf(e){return e.plugins.get("Input").isInput(e.model.change(function(e){return e.batch;}));}function Of(e){return e.getDefinition("$text").allowAttributes.filter(function(e){return e.startsWith("link");});}i(90);var zf=/*#__PURE__*/function(_Ml27){_inherits(zf,_Ml27);var _super161=_createSuper(zf);function zf(e,t){var _this244;_classCallCheck(this,zf);_this244=_super161.call(this,e);var i=e.t;_this244.focusTracker=new Rs(),_this244.keystrokes=new Os(),_this244.urlInputView=_this244._createUrlInput(),_this244.saveButtonView=_this244._createButton(i("Save"),Tl.check,"ck-button-save"),_this244.saveButtonView.type="submit",_this244.cancelButtonView=_this244._createButton(i("Cancel"),Tl.cancel,"ck-button-cancel","cancel"),_this244._manualDecoratorSwitches=_this244._createManualDecoratorSwitches(t),_this244.children=_this244._createFormChildren(t.manualDecorators),_this244._focusables=new Pl(),_this244._focusCycler=new id({focusables:_this244._focusables,focusTracker:_this244.focusTracker,keystrokeHandler:_this244.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});var n=["ck","ck-link-form","ck-responsive-form"];t.manualDecorators.length&&n.push("ck-link-form_layout-vertical","ck-vertical-form"),_this244.setTemplate({tag:"form",attributes:{"class":n,tabindex:"-1"},children:_this244.children}),Il(_assertThisInitialized(_this244));return _this244;}_createClass(zf,[{key:"getDecoratorSwitchesState",value:function getDecoratorSwitchesState(){return Array.from(this._manualDecoratorSwitches).reduce(function(e,t){return e[t.name]=t.isOn,e;},{});}},{key:"render",value:function render(){var _this245=this;_get(_getPrototypeOf(zf.prototype),"render",this).call(this),Sl({view:this});[this.urlInputView].concat(_toConsumableArray(this._manualDecoratorSwitches),[this.saveButtonView,this.cancelButtonView]).forEach(function(e){_this245._focusables.add(e),_this245.focusTracker.add(e.element);}),this.keystrokes.listenTo(this.element);}},{key:"focus",value:function focus(){this._focusCycler.focusFirst();}},{key:"_createUrlInput",value:function _createUrlInput(){var e=this.locale.t,t=new Nd(this.locale,Rd);return t.label=e("Link URL"),t;}},{key:"_createButton",value:function _createButton(e,t,i,n){var o=new ed(this.locale);return o.set({label:e,icon:t,tooltip:!0}),o.extendTemplate({attributes:{"class":i}}),n&&o.delegate("execute").to(this,n),o;}},{key:"_createManualDecoratorSwitches",value:function _createManualDecoratorSwitches(e){var _this246=this;var t=this.createCollection();var _iterator377=_createForOfIteratorHelper(e.manualDecorators),_step377;try{var _loop8=function _loop8(){var i=_step377.value;var n=new td(_this246.locale);n.set({name:i.id,label:i.label,withText:!0}),n.bind("isOn").toMany([i,e],"value",function(e,t){return void 0===t&&void 0===e?i.defaultValue:e;}),n.on("execute",function(){i.set("value",!n.isOn);}),t.add(n);};for(_iterator377.s();!(_step377=_iterator377.n()).done;){_loop8();}}catch(err){_iterator377.e(err);}finally{_iterator377.f();}return t;}},{key:"_createFormChildren",value:function _createFormChildren(e){var t=this.createCollection();if(t.add(this.urlInputView),e.length){var _e285=new Ml();_e285.setTemplate({tag:"ul",children:this._manualDecoratorSwitches.map(function(e){return{tag:"li",children:[e],attributes:{"class":["ck","ck-list__item"]}};}),attributes:{"class":["ck","ck-reset","ck-list"]}}),t.add(_e285);}return t.add(this.saveButtonView),t.add(this.cancelButtonView),t;}}]);return zf;}(Ml);i(92);var Df=/*#__PURE__*/function(_Ml28){_inherits(Df,_Ml28);var _super162=_createSuper(Df);function Df(e){var _this247;_classCallCheck(this,Df);_this247=_super162.call(this,e);var t=e.t;_this247.focusTracker=new Rs(),_this247.keystrokes=new Os(),_this247.previewButtonView=_this247._createPreviewButton(),_this247.unlinkButtonView=_this247._createButton(t("Unlink"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>',"unlink"),_this247.editButtonView=_this247._createButton(t("Edit link"),Tl.pencil,"edit"),_this247.set("href"),_this247._focusables=new Pl(),_this247._focusCycler=new id({focusables:_this247._focusables,focusTracker:_this247.focusTracker,keystrokeHandler:_this247.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),_this247.setTemplate({tag:"div",attributes:{"class":["ck","ck-link-actions","ck-responsive-form"],tabindex:"-1"},children:[_this247.previewButtonView,_this247.editButtonView,_this247.unlinkButtonView]});return _this247;}_createClass(Df,[{key:"render",value:function render(){var _this248=this;_get(_getPrototypeOf(Df.prototype),"render",this).call(this);[this.previewButtonView,this.editButtonView,this.unlinkButtonView].forEach(function(e){_this248._focusables.add(e),_this248.focusTracker.add(e.element);}),this.keystrokes.listenTo(this.element);}},{key:"focus",value:function focus(){this._focusCycler.focusFirst();}},{key:"_createButton",value:function _createButton(e,t,i){var n=new ed(this.locale);return n.set({label:e,icon:t,tooltip:!0}),n.delegate("execute").to(this,i),n;}},{key:"_createPreviewButton",value:function _createPreviewButton(){var e=new ed(this.locale),t=this.bindTemplate,i=this.t;return e.set({withText:!0,tooltip:i("Open link in new tab")}),e.extendTemplate({attributes:{"class":["ck","ck-link-actions__preview"],href:t.to("href",function(e){return e&&Af(e);}),target:"_blank",rel:"noopener noreferrer"}}),e.bind("label").to(this,"href",function(e){return e||i("This link has no URL");}),e.bind("isEnabled").to(this,"href",function(e){return!!e;}),e.template.tag="a",e.template.eventListeners={},e;}}]);return Df;}(Ml);var Lf=/*#__PURE__*/function(_Qe54){_inherits(Lf,_Qe54);var _super163=_createSuper(Lf);function Lf(){_classCallCheck(this,Lf);return _super163.apply(this,arguments);}_createClass(Lf,[{key:"init",value:function init(){var e=this.editor;e.editing.view.addObserver(hh),this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._balloon=e.plugins.get(Ud),this._createToolbarLinkButton(),this._enableUserBalloonInteractions(),e.conversion["for"]("editingDowncast").markerToHighlight({model:"link-ui",view:{classes:["ck-fake-link-selection"]}}),e.conversion["for"]("editingDowncast").markerToElement({model:"link-ui",view:{name:"span",classes:["ck-fake-link-selection","ck-fake-link-selection_collapsed"]}});}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Lf.prototype),"destroy",this).call(this),this.formView.destroy();}},{key:"_createActionsView",value:function _createActionsView(){var _this249=this;var e=this.editor,t=new Df(e.locale),i=e.commands.get("link"),n=e.commands.get("unlink");return t.bind("href").to(i,"value"),t.editButtonView.bind("isEnabled").to(i),t.unlinkButtonView.bind("isEnabled").to(n),this.listenTo(t,"edit",function(){_this249._addFormView();}),this.listenTo(t,"unlink",function(){e.execute("unlink"),_this249._hideUI();}),t.keystrokes.set("Esc",function(e,t){_this249._hideUI(),t();}),t.keystrokes.set("Ctrl+K",function(e,t){_this249._addFormView(),t();}),t;}},{key:"_createFormView",value:function _createFormView(){var _this250=this;var e=this.editor,t=e.commands.get("link"),i=e.config.get("link.defaultProtocol"),n=new zf(e.locale,t);return n.urlInputView.fieldView.bind("value").to(t,"value"),n.urlInputView.bind("isReadOnly").to(t,"isEnabled",function(e){return!e;}),n.saveButtonView.bind("isEnabled").to(t),this.listenTo(n,"submit",function(){var t=n.urlInputView.fieldView.element.value,o=Tf(t,i);e.execute("link",o,n.getDecoratorSwitchesState()),_this250._closeFormView();}),this.listenTo(n,"cancel",function(){_this250._closeFormView();}),n.keystrokes.set("Esc",function(e,t){_this250._closeFormView(),t();}),n;}},{key:"_createToolbarLinkButton",value:function _createToolbarLinkButton(){var _this251=this;var e=this.editor,t=e.commands.get("link"),i=e.t;e.keystrokes.set("Ctrl+K",function(e,i){i(),t.isEnabled&&_this251._showUI(!0);}),e.ui.componentFactory.add("link",function(e){var n=new ed(e);return n.isEnabled=!0,n.label=i("Link"),n.icon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>',n.keystroke="Ctrl+K",n.tooltip=!0,n.isToggleable=!0,n.bind("isEnabled").to(t,"isEnabled"),n.bind("isOn").to(t,"value",function(e){return!!e;}),_this251.listenTo(n,"execute",function(){return _this251._showUI(!0);}),n;});}},{key:"_enableUserBalloonInteractions",value:function _enableUserBalloonInteractions(){var _this252=this;var e=this.editor.editing.view.document;this.listenTo(e,"click",function(){_this252._getSelectedLinkElement()&&_this252._showUI();}),this.editor.keystrokes.set("Tab",function(e,t){_this252._areActionsVisible&&!_this252.actionsView.focusTracker.isFocused&&(_this252.actionsView.focus(),t());},{priority:"high"}),this.editor.keystrokes.set("Esc",function(e,t){_this252._isUIVisible&&(_this252._hideUI(),t());}),El({emitter:this.formView,activator:function activator(){return _this252._isUIInPanel;},contextElements:[this._balloon.view.element],callback:function callback(){return _this252._hideUI();}});}},{key:"_addActionsView",value:function _addActionsView(){this._areActionsInPanel||this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()});}},{key:"_addFormView",value:function _addFormView(){if(this._isFormInPanel)return;var e=this.editor.commands.get("link");this.formView.disableCssTransitions(),this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions(),this.formView.urlInputView.fieldView.element.value=e.value||"";}},{key:"_closeFormView",value:function _closeFormView(){var e=this.editor.commands.get("link");e.restoreManualDecoratorStates(),void 0!==e.value?this._removeFormView():this._hideUI();}},{key:"_removeFormView",value:function _removeFormView(){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),this._hideFakeVisualSelection());}},{key:"_showUI",value:function _showUI(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:!1;this._getSelectedLinkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),e&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addActionsView(),e&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI();}},{key:"_hideUI",value:function _hideUI(){if(!this._isUIInPanel)return;var e=this.editor;this.stopListening(e.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),e.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView),this._hideFakeVisualSelection();}},{key:"_startUpdatingUI",value:function _startUpdatingUI(){var _this253=this;var e=this.editor,t=e.editing.view.document;var i=this._getSelectedLinkElement(),n=r();var o=function o(){var e=_this253._getSelectedLinkElement(),t=r();i&&!e||!i&&t!==n?_this253._hideUI():_this253._isUIVisible&&_this253._balloon.updatePosition(_this253._getBalloonPositionData()),i=e,n=t;};function r(){return t.selection.focus.getAncestors().reverse().find(function(e){return e.is("element");});}this.listenTo(e.ui,"update",o),this.listenTo(this._balloon,"change:visibleView",o);}},{key:"_isFormInPanel",get:function get(){return this._balloon.hasView(this.formView);}},{key:"_areActionsInPanel",get:function get(){return this._balloon.hasView(this.actionsView);}},{key:"_areActionsVisible",get:function get(){return this._balloon.visibleView===this.actionsView;}},{key:"_isUIInPanel",get:function get(){return this._isFormInPanel||this._areActionsInPanel;}},{key:"_isUIVisible",get:function get(){return this._balloon.visibleView==this.formView||this._areActionsVisible;}},{key:"_getBalloonPositionData",value:function _getBalloonPositionData(){var _this254=this;var e=this.editor.editing.view,t=this.editor.model,i=e.document;var n=null;if(t.markers.has("link-ui")){var _t267=Array.from(this.editor.editing.mapper.markerNameToElements("link-ui")),_i277=e.createRange(e.createPositionBefore(_t267[0]),e.createPositionAfter(_t267[_t267.length-1]));n=e.domConverter.viewRangeToDom(_i277);}else n=function n(){var t=_this254._getSelectedLinkElement();return t?e.domConverter.mapViewToDom(t):e.domConverter.viewRangeToDom(i.selection.getFirstRange());};return{target:n};}},{key:"_getSelectedLinkElement",value:function _getSelectedLinkElement(){var e=this.editor.editing.view,t=e.document.selection,i=t.getSelectedElement();if(t.isCollapsed||i&&Oh(i))return Vf(t.getFirstPosition());{var _i278=t.getFirstRange().getTrimmed(),_n164=Vf(_i278.start),_o99=Vf(_i278.end);return _n164&&_n164==_o99&&e.createRangeIn(_n164).getTrimmed().isEqual(_i278)?_n164:null;}}},{key:"_showFakeVisualSelection",value:function _showFakeVisualSelection(){var e=this.editor.model;e.change(function(t){var i=e.document.selection.getFirstRange();if(e.markers.has("link-ui"))t.updateMarker("link-ui",{range:i});else if(i.start.isAtEnd){var _n165=i.start.getLastMatchingPosition(function(_ref70){var t=_ref70.item;return!e.schema.isContent(t);},{boundaries:i});t.addMarker("link-ui",{usingOperation:!1,affectsData:!1,range:t.createRange(_n165,i.end)});}else t.addMarker("link-ui",{usingOperation:!1,affectsData:!1,range:i});});}},{key:"_hideFakeVisualSelection",value:function _hideFakeVisualSelection(){var e=this.editor.model;e.markers.has("link-ui")&&e.change(function(e){e.removeMarker("link-ui");});}}],[{key:"requires",get:function get(){return[Ud];}},{key:"pluginName",get:function get(){return"LinkUI";}}]);return Lf;}(Qe);function Vf(e){return e.getAncestors().find(function(e){return(t=e).is("attributeElement")&&!!t.getCustomProperty("link");var t;});}var jf=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63})))(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i");var Bf=/*#__PURE__*/function(_Qe55){_inherits(Bf,_Qe55);var _super164=_createSuper(Bf);function Bf(){_classCallCheck(this,Bf);return _super164.apply(this,arguments);}_createClass(Bf,[{key:"init",value:function init(){var _this255=this;var e=this.editor.model.document.selection;e.on("change:range",function(){_this255.isEnabled=!e.anchor.parent.is("element","codeBlock");}),this._enableTypingHandling();}},{key:"afterInit",value:function afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling();}},{key:"_enableTypingHandling",value:function _enableTypingHandling(){var _this256=this;var e=this.editor,t=new Su(e.model,function(e){if(!function(e){return e.length>4&&" "===e[e.length-1]&&" "!==e[e.length-2];}(e))return;var t=Ff(e.substr(0,e.length-1));return t?{url:t}:void 0;}),i=e.plugins.get("Input");t.on("matched:data",function(t,n){var o=n.batch,r=n.range,s=n.url;if(!i.isInput(o))return;var a=r.end.getShiftedBy(-1),c=a.getShiftedBy(-s.length),l=e.model.createRange(c,a);_this256._applyAutoLink(s,l);}),t.bind("isEnabled").to(this);}},{key:"_enableEnterHandling",value:function _enableEnterHandling(){var _this257=this;var e=this.editor,t=e.model,i=e.commands.get("enter");i&&i.on("execute",function(){var e=t.document.selection.getFirstPosition();if(!e.parent.previousSibling)return;var i=t.createRangeIn(e.parent.previousSibling);_this257._checkAndApplyAutoLinkOnRange(i);});}},{key:"_enableShiftEnterHandling",value:function _enableShiftEnterHandling(){var _this258=this;var e=this.editor,t=e.model,i=e.commands.get("shiftEnter");i&&i.on("execute",function(){var e=t.document.selection.getFirstPosition(),i=t.createRange(t.createPositionAt(e.parent,0),e.getShiftedBy(-1));_this258._checkAndApplyAutoLinkOnRange(i);});}},{key:"_checkAndApplyAutoLinkOnRange",value:function _checkAndApplyAutoLinkOnRange(e){var t=this.editor.model,_Iu2=Iu(e,t),i=_Iu2.text,n=_Iu2.range,o=Ff(i);if(o){var _e286=t.createRange(n.end.getShiftedBy(-o.length),n.end);this._applyAutoLink(o,_e286);}}},{key:"_applyAutoLink",value:function _applyAutoLink(e,t){var _this259=this;var i=this.editor.model;this.isEnabled&&function(e,t){return t.schema.checkAttributeInSelection(t.createSelection(e),"linkHref");}(t,i)&&i.enqueueChange(function(i){var n=_this259.editor.config.get("link.defaultProtocol"),o=Tf(e,n);i.setAttribute("linkHref",o,t);});}}],[{key:"pluginName",get:function get(){return"AutoLink";}}]);return Bf;}(Qe);function Ff(e){var t=jf.exec(e);return t?t[2]:null;}var Hf=/*#__PURE__*/function(_Ze22){_inherits(Hf,_Ze22);var _super165=_createSuper(Hf);function Hf(e,t){var _this260;_classCallCheck(this,Hf);_this260=_super165.call(this,e),_this260.type=t;return _this260;}_createClass(Hf,[{key:"refresh",value:function refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled();}},{key:"execute",value:function execute(){var _this261=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=this.editor.model,i=t.document,n=Array.from(i.selection.getSelectedBlocks()).filter(function(e){return Wf(e,t.schema);}),o=void 0!==e.forceValue?!e.forceValue:this.value;t.change(function(e){if(o){var _t268=n[n.length-1].nextSibling,_i279=Number.POSITIVE_INFINITY,_o100=[];for(;_t268&&"listItem"==_t268.name&&0!==_t268.getAttribute("listIndent");){var _e287=_t268.getAttribute("listIndent");_e287<_i279&&(_i279=_e287);var _n166=_e287-_i279;_o100.push({element:_t268,listIndent:_n166}),_t268=_t268.nextSibling;}_o100=_o100.reverse();var _iterator378=_createForOfIteratorHelper(_o100),_step378;try{for(_iterator378.s();!(_step378=_iterator378.n()).done;){var _t269=_step378.value;e.setAttribute("listIndent",_t269.listIndent,_t269.element);}}catch(err){_iterator378.e(err);}finally{_iterator378.f();}}if(!o){var _e288=Number.POSITIVE_INFINITY;var _iterator379=_createForOfIteratorHelper(n),_step379;try{for(_iterator379.s();!(_step379=_iterator379.n()).done;){var _t270=_step379.value;_t270.is("element","listItem")&&_t270.getAttribute("listIndent")<_e288&&(_e288=_t270.getAttribute("listIndent"));}}catch(err){_iterator379.e(err);}finally{_iterator379.f();}_e288=0===_e288?1:_e288,Uf(n,!0,_e288),Uf(n,!1,_e288);}var _iterator380=_createForOfIteratorHelper(n.reverse()),_step380;try{for(_iterator380.s();!(_step380=_iterator380.n()).done;){var _t271=_step380.value;o&&"listItem"==_t271.name?e.rename(_t271,"paragraph"):o||"listItem"==_t271.name?o||"listItem"!=_t271.name||_t271.getAttribute("listType")==_this261.type||e.setAttribute("listType",_this261.type,_t271):(e.setAttributes({listType:_this261.type,listIndent:0},_t271),e.rename(_t271,"listItem"));}}catch(err){_iterator380.e(err);}finally{_iterator380.f();}_this261.fire("_executeCleanup",n);});}},{key:"_getValue",value:function _getValue(){var e=Ns(this.editor.model.document.selection.getSelectedBlocks());return!!e&&e.is("element","listItem")&&e.getAttribute("listType")==this.type;}},{key:"_checkEnabled",value:function _checkEnabled(){if(this.value)return!0;var e=this.editor.model.document.selection,t=this.editor.model.schema,i=Ns(e.getSelectedBlocks());return!!i&&Wf(i,t);}}]);return Hf;}(Ze);function Uf(e,t,i){var n=t?e[0]:e[e.length-1];if(n.is("element","listItem")){var _o101=n[t?"previousSibling":"nextSibling"],_r58=n.getAttribute("listIndent");for(;_o101&&_o101.is("element","listItem")&&_o101.getAttribute("listIndent")>=i;){_r58>_o101.getAttribute("listIndent")&&(_r58=_o101.getAttribute("listIndent")),_o101.getAttribute("listIndent")==_r58&&e[t?"unshift":"push"](_o101),_o101=_o101[t?"previousSibling":"nextSibling"];}}}function Wf(e,t){return t.checkChild(e.parent,"listItem")&&!t.isObject(e);}var qf=/*#__PURE__*/function(_Ze23){_inherits(qf,_Ze23);var _super166=_createSuper(qf);function qf(e,t){var _this262;_classCallCheck(this,qf);_this262=_super166.call(this,e),_this262._indentBy="forward"==t?1:-1;return _this262;}_createClass(qf,[{key:"refresh",value:function refresh(){this.isEnabled=this._checkEnabled();}},{key:"execute",value:function execute(){var _this263=this;var e=this.editor.model,t=e.document;var i=Array.from(t.selection.getSelectedBlocks());e.change(function(e){var t=i[i.length-1];var n=t.nextSibling;for(;n&&"listItem"==n.name&&n.getAttribute("listIndent")>t.getAttribute("listIndent");){i.push(n),n=n.nextSibling;}_this263._indentBy<0&&(i=i.reverse());var _iterator381=_createForOfIteratorHelper(i),_step381;try{for(_iterator381.s();!(_step381=_iterator381.n()).done;){var _t272=_step381.value;var _i280=_t272.getAttribute("listIndent")+_this263._indentBy;_i280<0?e.rename(_t272,"paragraph"):e.setAttribute("listIndent",_i280,_t272);}}catch(err){_iterator381.e(err);}finally{_iterator381.f();}_this263.fire("_executeCleanup",i);});}},{key:"_checkEnabled",value:function _checkEnabled(){var e=Ns(this.editor.model.document.selection.getSelectedBlocks());if(!e||!e.is("element","listItem"))return!1;if(this._indentBy>0){var _t273=e.getAttribute("listIndent"),_i281=e.getAttribute("listType");var _n167=e.previousSibling;for(;_n167&&_n167.is("element","listItem")&&_n167.getAttribute("listIndent")>=_t273;){if(_n167.getAttribute("listIndent")==_t273)return _n167.getAttribute("listType")==_i281;_n167=_n167.previousSibling;}return!1;}return!0;}}]);return qf;}(Ze);function $f(e,t){var i=t.mapper,n=t.writer,o="numbered"==e.getAttribute("listType")?"ol":"ul",r=function(e){var t=e.createContainerElement("li");return t.getFillerOffset=Zf,t;}(n),s=n.createContainerElement(o,null);return n.insert(n.createPositionAt(s,0),r),i.bindElements(e,r),r;}function Yf(e,t,i,n){var o=t.parent,r=i.mapper,s=i.writer;var a=r.toViewPosition(n.createPositionBefore(e));var c=Qf(e.previousSibling,{sameIndent:!0,smallerIndent:!0,listIndent:e.getAttribute("listIndent")}),l=e.previousSibling;if(c&&c.getAttribute("listIndent")==e.getAttribute("listIndent")){var _e289=r.toViewElement(c);a=s.breakContainer(s.createPositionAfter(_e289));}else if(l&&"listItem"==l.name){a=r.toViewPosition(n.createPositionAt(l,"end"));var _e290=r.findMappedViewAncestor(a),_t274=function(e){var _iterator382=_createForOfIteratorHelper(e.getChildren()),_step382;try{for(_iterator382.s();!(_step382=_iterator382.n()).done;){var _t275=_step382.value;if("ul"==_t275.name||"ol"==_t275.name)return _t275;}}catch(err){_iterator382.e(err);}finally{_iterator382.f();}return null;}(_e290);a=_t274?s.createPositionBefore(_t274):s.createPositionAt(_e290,"end");}else a=r.toViewPosition(n.createPositionBefore(e));if(a=Kf(a),s.insert(a,o),l&&"listItem"==l.name){var _e291=r.toViewElement(l),_i282=s.createRange(s.createPositionAt(_e291,0),a).getWalker({ignoreElementEnd:!0});var _iterator383=_createForOfIteratorHelper(_i282),_step383;try{for(_iterator383.s();!(_step383=_iterator383.n()).done;){var _e292=_step383.value;if(_e292.item.is("element","li")){var _n168=s.breakContainer(s.createPositionBefore(_e292.item)),_o102=_e292.item.parent,_r59=s.createPositionAt(t,"end");Gf(s,_r59.nodeBefore,_r59.nodeAfter),s.move(s.createRangeOn(_o102),_r59),_i282.position=_n168;}}}catch(err){_iterator383.e(err);}finally{_iterator383.f();}}else{var _i283=o.nextSibling;if(_i283&&(_i283.is("element","ul")||_i283.is("element","ol"))){var _n169=null;var _iterator384=_createForOfIteratorHelper(_i283.getChildren()),_step384;try{for(_iterator384.s();!(_step384=_iterator384.n()).done;){var _t276=_step384.value;var _i284=r.toModelElement(_t276);if(!(_i284&&_i284.getAttribute("listIndent")>e.getAttribute("listIndent")))break;_n169=_t276;}}catch(err){_iterator384.e(err);}finally{_iterator384.f();}_n169&&(s.breakContainer(s.createPositionAfter(_n169)),s.move(s.createRangeOn(_n169.parent),s.createPositionAt(t,"end")));}}Gf(s,o,o.nextSibling),Gf(s,o.previousSibling,o);}function Gf(e,t,i){return!t||!i||"ul"!=t.name&&"ol"!=t.name||t.name!=i.name||t.getAttribute("class")!==i.getAttribute("class")?null:e.mergeContainers(e.createPositionAfter(t));}function Kf(e){return e.getLastMatchingPosition(function(e){return e.item.is("uiElement");});}function Qf(e,t){var i=!!t.sameIndent,n=!!t.smallerIndent,o=t.listIndent;var r=e;for(;r&&"listItem"==r.name;){var _e293=r.getAttribute("listIndent");if(i&&o==_e293||n&&o>_e293)return r;r="forward"===t.direction?r.nextSibling:r.previousSibling;}return null;}function Jf(e,t,i,n){e.ui.componentFactory.add(t,function(o){var r=e.commands.get(t),s=new ed(o);return s.set({label:i,icon:n,tooltip:!0,isToggleable:!0}),s.bind("isOn","isEnabled").to(r,"value","isEnabled"),s.on("execute",function(){e.execute(t),e.editing.view.focus();}),s;});}function Zf(){var e=!this.isEmpty&&("ul"==this.getChild(0).name||"ol"==this.getChild(0).name);return this.isEmpty||e?0:no.call(this);}function Xf(e){return function(t,i,n){var o=n.consumable;if(!o.test(i.item,"insert")||!o.test(i.item,"attribute:listType")||!o.test(i.item,"attribute:listIndent"))return;o.consume(i.item,"insert"),o.consume(i.item,"attribute:listType"),o.consume(i.item,"attribute:listIndent");var r=i.item;Yf(r,$f(r,n),n,e);};}function ep(e,t,i){if(!i.consumable.consume(t.item,"attribute:listType"))return;var n=i.mapper.toViewElement(t.item),o=i.writer;o.breakContainer(o.createPositionBefore(n)),o.breakContainer(o.createPositionAfter(n));var r=n.parent,s="numbered"==t.attributeNewValue?"ol":"ul";o.rename(s,r);}function tp(e,t,i){var n=i.mapper.toViewElement(t.item).parent,o=i.writer;Gf(o,n,n.nextSibling),Gf(o,n.previousSibling,n);var _iterator385=_createForOfIteratorHelper(t.item.getChildren()),_step385;try{for(_iterator385.s();!(_step385=_iterator385.n()).done;){var _e294=_step385.value;i.consumable.consume(_e294,"insert");}}catch(err){_iterator385.e(err);}finally{_iterator385.f();}}function ip(e,t,i){if("listItem"!=t.item.name){var _e295=i.mapper.toViewPosition(t.range.start);var _n170=i.writer,_o103=[];for(;("ul"==_e295.parent.name||"ol"==_e295.parent.name)&&(_e295=_n170.breakContainer(_e295),"li"==_e295.parent.name);){var _t277=_e295,_i285=_n170.createPositionAt(_e295.parent,"end");if(!_t277.isEqual(_i285)){var _e296=_n170.remove(_n170.createRange(_t277,_i285));_o103.push(_e296);}_e295=_n170.createPositionAfter(_e295.parent);}if(_o103.length>0){for(var _t278=0;_t278<_o103.length;_t278++){var _i286=_e295.nodeBefore;if(_e295=_n170.insert(_e295,_o103[_t278]).end,_t278>0){var _t279=Gf(_n170,_i286,_i286.nextSibling);_t279&&_t279.parent==_i286&&_e295.offset--;}}Gf(_n170,_e295.nodeBefore,_e295.nodeAfter);}}}function np(e,t,i){var n=i.mapper.toViewPosition(t.position),o=n.nodeBefore,r=n.nodeAfter;Gf(i.writer,o,r);}function op(e,t,i){if(i.consumable.consume(t.viewItem,{name:!0})){var _e297=i.writer,_n171=_e297.createElement("listItem"),_o104=function(e){var t=0,i=e.parent;for(;i;){if(i.is("element","li"))t++;else{var _e298=i.previousSibling;_e298&&_e298.is("element","li")&&t++;}i=i.parent;}return t;}(t.viewItem);_e297.setAttribute("listIndent",_o104,_n171);var _r60=t.viewItem.parent&&"ol"==t.viewItem.parent.name?"numbered":"bulleted";if(_e297.setAttribute("listType",_r60,_n171),!i.safeInsert(_n171,t.modelCursor))return;var _s34=function(e,t,i){var n=i.writer,o=i.schema;var r=n.createPositionAfter(e);var _iterator386=_createForOfIteratorHelper(t),_step386;try{for(_iterator386.s();!(_step386=_iterator386.n()).done;){var _s35=_step386.value;if("ul"==_s35.name||"ol"==_s35.name)r=i.convertItem(_s35,r).modelCursor;else{var _t280=i.convertItem(_s35,n.createPositionAt(e,"end")),_a23=_t280.modelRange.start.nodeAfter;_a23&&_a23.is("element")&&!o.checkChild(e,_a23.name)&&(e=_t280.modelCursor.parent.is("element","listItem")?_t280.modelCursor.parent:lp(_t280.modelCursor),r=n.createPositionAfter(e));}}}catch(err){_iterator386.e(err);}finally{_iterator386.f();}return r;}(_n171,t.viewItem.getChildren(),i);t.modelRange=_e297.createRange(t.modelCursor,_s34),i.updateConversionResult(_n171,t);}}function rp(e,t,i){if(i.consumable.test(t.viewItem,{name:!0})){var _e299=Array.from(t.viewItem.getChildren());for(var _i287=0,_e300=_e299;_i287<_e300.length;_i287++){var _t281=_e300[_i287];!(_t281.is("element","li")||hp(_t281))&&_t281._remove();}}}function sp(e,t,i){if(i.consumable.test(t.viewItem,{name:!0})){if(0===t.viewItem.childCount)return;var _e301=_toConsumableArray(t.viewItem.getChildren());var _i288=!1,_n172=!0;var _iterator387=_createForOfIteratorHelper(_e301),_step387;try{for(_iterator387.s();!(_step387=_iterator387.n()).done;){var _t282=_step387.value;_i288&&!hp(_t282)&&_t282._remove(),_t282.is("$text")?(_n172&&(_t282._data=_t282.data.trimStart()),_t282.nextSibling&&!hp(_t282.nextSibling)||(_t282._data=_t282.data.trimEnd())):hp(_t282)&&(_i288=!0),_n172=!1;}}catch(err){_iterator387.e(err);}finally{_iterator387.f();}}}function ap(e){return function(t,i){if(i.isPhantom)return;var n=i.modelPosition.nodeBefore;if(n&&n.is("element","listItem")){var _t283=i.mapper.toViewElement(n),_o105=_t283.getAncestors().find(hp),_r61=e.createPositionAt(_t283,0).getWalker();var _iterator388=_createForOfIteratorHelper(_r61),_step388;try{for(_iterator388.s();!(_step388=_iterator388.n()).done;){var _e302=_step388.value;if("elementStart"==_e302.type&&_e302.item.is("element","li")){i.viewPosition=_e302.previousPosition;break;}if("elementEnd"==_e302.type&&_e302.item==_o105){i.viewPosition=_e302.nextPosition;break;}}}catch(err){_iterator388.e(err);}finally{_iterator388.f();}}};}function cp(e,_ref71){var _ref72=_slicedToArray(_ref71,2),t=_ref72[0],i=_ref72[1];var n,o=t.is("documentFragment")?t.getChild(0):t;if(n=i?this.createSelection(i):this.document.selection,o&&o.is("element","listItem")){var _e303=n.getFirstPosition();var _t284=null;if(_e303.parent.is("element","listItem")?_t284=_e303.parent:_e303.nodeBefore&&_e303.nodeBefore.is("element","listItem")&&(_t284=_e303.nodeBefore),_t284){var _e304=_t284.getAttribute("listIndent");if(_e304>0)for(;o&&o.is("element","listItem");){o._setAttribute("listIndent",o.getAttribute("listIndent")+_e304),o=o.nextSibling;}}}}function lp(e){var t=new Zs({startPosition:e});var i;do{i=t.next();}while(!i.value.item.is("element","listItem"));return i.value.item;}function dp(e,t,i,n,o,r){var s=Qf(t.nodeBefore,{sameIndent:!0,smallerIndent:!0,listIndent:e,foo:"b"}),a=o.mapper,c=o.writer,l=s?s.getAttribute("listIndent"):null;var d;if(s){if(l==e){var _e305=a.toViewElement(s).parent;d=c.createPositionAfter(_e305);}else{var _e306=r.createPositionAt(s,"end");d=a.toViewPosition(_e306);}}else d=i;d=Kf(d);for(var _i289=0,_arr2=_toConsumableArray(n.getChildren());_i289<_arr2.length;_i289++){var _e307=_arr2[_i289];hp(_e307)&&(d=c.move(c.createRangeOn(_e307),d).end,Gf(c,_e307,_e307.nextSibling),Gf(c,_e307.previousSibling,_e307));}}function hp(e){return e.is("element","ol")||e.is("element","ul");}var up=/*#__PURE__*/function(_Qe56){_inherits(up,_Qe56);var _super167=_createSuper(up);function up(){_classCallCheck(this,up);return _super167.apply(this,arguments);}_createClass(up,[{key:"init",value:function init(){var _this264=this;var e=this.editor;e.model.schema.register("listItem",{inheritAllFrom:"$block",allowAttributes:["listType","listIndent"]});var t=e.data,i=e.editing;var n;e.model.document.registerPostFixer(function(t){return function(e,t){var i=e.document.differ.getChanges(),n=new Map();var o=!1;var _iterator389=_createForOfIteratorHelper(i),_step389;try{for(_iterator389.s();!(_step389=_iterator389.n()).done;){var _n174=_step389.value;if("insert"==_n174.type&&"listItem"==_n174.name)r(_n174.position);else if("insert"==_n174.type&&"listItem"!=_n174.name){if("$text"!=_n174.name){var _i290=_n174.position.nodeAfter;_i290.hasAttribute("listIndent")&&(t.removeAttribute("listIndent",_i290),o=!0),_i290.hasAttribute("listType")&&(t.removeAttribute("listType",_i290),o=!0),_i290.hasAttribute("listStyle")&&(t.removeAttribute("listStyle",_i290),o=!0);var _iterator391=_createForOfIteratorHelper(Array.from(e.createRangeIn(_i290)).filter(function(e){return e.item.is("element","listItem");})),_step391;try{for(_iterator391.s();!(_step391=_iterator391.n()).done;){var _t287=_step391.value;r(_t287.previousPosition);}}catch(err){_iterator391.e(err);}finally{_iterator391.f();}}r(_n174.position.getShiftedBy(_n174.length));}else"remove"==_n174.type&&"listItem"==_n174.name?r(_n174.position):("attribute"==_n174.type&&"listIndent"==_n174.attributeKey||"attribute"==_n174.type&&"listType"==_n174.attributeKey)&&r(_n174.range.start);}}catch(err){_iterator389.e(err);}finally{_iterator389.f();}var _iterator390=_createForOfIteratorHelper(n.values()),_step390;try{for(_iterator390.s();!(_step390=_iterator390.n()).done;){var _e309=_step390.value;s(_e309),a(_e309);}}catch(err){_iterator390.e(err);}finally{_iterator390.f();}return o;function r(e){var t=e.nodeBefore;if(t&&t.is("element","listItem")){var _e308=t;if(n.has(_e308))return;for(var _t285=_e308.previousSibling;_t285&&_t285.is("element","listItem");_t285=_e308.previousSibling){if(_e308=_t285,n.has(_e308))return;}n.set(t,_e308);}else{var _t286=e.nodeAfter;_t286&&_t286.is("element","listItem")&&n.set(_t286,_t286);}}function s(e){var i=0,n=null;for(;e&&e.is("element","listItem");){var _r62=e.getAttribute("listIndent");if(_r62>i){var _s36=void 0;null===n?(n=_r62-i,_s36=i):(n>_r62&&(n=_r62),_s36=_r62-n),t.setAttribute("listIndent",_s36,e),o=!0;}else n=null,i=e.getAttribute("listIndent")+1;e=e.nextSibling;}}function a(e){var i=[],n=null;for(;e&&e.is("element","listItem");){var _r63=e.getAttribute("listIndent");if(n&&n.getAttribute("listIndent")>_r63&&(i=i.slice(0,_r63+1)),0!=_r63)if(i[_r63]){var _n173=i[_r63];e.getAttribute("listType")!=_n173&&(t.setAttribute("listType",_n173,e),o=!0);}else i[_r63]=e.getAttribute("listType");n=e,e=e.nextSibling;}}}(e.model,t);}),i.mapper.registerViewToModelLength("li",gp),t.mapper.registerViewToModelLength("li",gp),i.mapper.on("modelToViewPosition",ap(i.view)),i.mapper.on("viewToModelPosition",(n=e.model,function(e,t){var i=t.viewPosition,o=i.parent,r=t.mapper;if("ul"==o.name||"ol"==o.name){if(i.isAtEnd){var _e310=r.toModelElement(i.nodeBefore),_o106=r.getModelLength(i.nodeBefore);t.modelPosition=n.createPositionBefore(_e310).getShiftedBy(_o106);}else{var _e311=r.toModelElement(i.nodeAfter);t.modelPosition=n.createPositionBefore(_e311);}e.stop();}else if("li"==o.name&&i.nodeBefore&&("ul"==i.nodeBefore.name||"ol"==i.nodeBefore.name)){var _s37=r.toModelElement(o);var _a24=1,_c13=i.nodeBefore;for(;_c13&&hp(_c13);){_a24+=r.getModelLength(_c13),_c13=_c13.previousSibling;}t.modelPosition=n.createPositionBefore(_s37).getShiftedBy(_a24),e.stop();}})),t.mapper.on("modelToViewPosition",ap(i.view)),e.conversion["for"]("editingDowncast").add(function(t){t.on("insert",ip,{priority:"high"}),t.on("insert:listItem",Xf(e.model)),t.on("attribute:listType:listItem",ep,{priority:"high"}),t.on("attribute:listType:listItem",tp,{priority:"low"}),t.on("attribute:listIndent:listItem",function(e){return function(t,i,n){if(!n.consumable.consume(i.item,"attribute:listIndent"))return;var o=n.mapper.toViewElement(i.item),r=n.writer;r.breakContainer(r.createPositionBefore(o)),r.breakContainer(r.createPositionAfter(o));var s=o.parent,a=s.previousSibling,c=r.createRangeOn(s);r.remove(c),a&&a.nextSibling&&Gf(r,a,a.nextSibling),dp(i.attributeOldValue+1,i.range.start,c.start,o,n,e),Yf(i.item,o,n,e);var _iterator392=_createForOfIteratorHelper(i.item.getChildren()),_step392;try{for(_iterator392.s();!(_step392=_iterator392.n()).done;){var _e312=_step392.value;n.consumable.consume(_e312,"insert");}}catch(err){_iterator392.e(err);}finally{_iterator392.f();}};}(e.model)),t.on("remove:listItem",function(e){return function(t,i,n){var o=n.mapper.toViewPosition(i.position).getLastMatchingPosition(function(e){return!e.item.is("element","li");}).nodeAfter,r=n.writer;r.breakContainer(r.createPositionBefore(o)),r.breakContainer(r.createPositionAfter(o));var s=o.parent,a=s.previousSibling,c=r.createRangeOn(s),l=r.remove(c);a&&a.nextSibling&&Gf(r,a,a.nextSibling);dp(n.mapper.toModelElement(o).getAttribute("listIndent")+1,i.position,c.start,o,n,e);var _iterator393=_createForOfIteratorHelper(r.createRangeIn(l).getItems()),_step393;try{for(_iterator393.s();!(_step393=_iterator393.n()).done;){var _e313=_step393.value;n.mapper.unbindViewElement(_e313);}}catch(err){_iterator393.e(err);}finally{_iterator393.f();}t.stop();};}(e.model)),t.on("remove",np,{priority:"low"});}),e.conversion["for"]("dataDowncast").add(function(t){t.on("insert",ip,{priority:"high"}),t.on("insert:listItem",Xf(e.model));}),e.conversion["for"]("upcast").add(function(e){e.on("element:ul",rp,{priority:"high"}),e.on("element:ol",rp,{priority:"high"}),e.on("element:li",sp,{priority:"high"}),e.on("element:li",op);}),e.model.on("insertContent",cp,{priority:"high"}),e.commands.add("numberedList",new Hf(e,"numbered")),e.commands.add("bulletedList",new Hf(e,"bulleted")),e.commands.add("indentList",new qf(e,"forward")),e.commands.add("outdentList",new qf(e,"backward"));var o=i.view.document;this.listenTo(o,"enter",function(e,t){var i=_this264.editor.model.document,n=i.selection.getLastPosition().parent;i.selection.isCollapsed&&"listItem"==n.name&&n.isEmpty&&(_this264.editor.execute("outdentList"),t.preventDefault(),e.stop());},{context:"li"}),this.listenTo(o,"delete",function(e,t){if("backward"!==t.direction)return;var i=_this264.editor.model.document.selection;if(!i.isCollapsed)return;var n=i.getFirstPosition();if(!n.isAtStart)return;var o=n.parent;if("listItem"!==o.name)return;o.previousSibling&&"listItem"===o.previousSibling.name||(_this264.editor.execute("outdentList"),t.preventDefault(),e.stop());},{context:"li"});var r=function r(e){return function(t,i){_this264.editor.commands.get(e).isEnabled&&(_this264.editor.execute(e),i());};};e.keystrokes.set("Tab",r("indentList")),e.keystrokes.set("Shift+Tab",r("outdentList"));}},{key:"afterInit",value:function afterInit(){var e=this.editor.commands,t=e.get("indent"),i=e.get("outdent");t&&t.registerChildCommand(e.get("indentList")),i&&i.registerChildCommand(e.get("outdentList"));}}],[{key:"pluginName",get:function get(){return"ListEditing";}},{key:"requires",get:function get(){return[Ch,Sh];}}]);return up;}(Qe);function gp(e){var t=1;var _iterator394=_createForOfIteratorHelper(e.getChildren()),_step394;try{for(_iterator394.s();!(_step394=_iterator394.n()).done;){var _i291=_step394.value;if("ul"==_i291.name||"ol"==_i291.name){var _iterator395=_createForOfIteratorHelper(_i291.getChildren()),_step395;try{for(_iterator395.s();!(_step395=_iterator395.n()).done;){var _e314=_step395.value;t+=gp(_e314);}}catch(err){_iterator395.e(err);}finally{_iterator395.f();}}}}catch(err){_iterator394.e(err);}finally{_iterator394.f();}return t;}var mp=/*#__PURE__*/function(_Qe57){_inherits(mp,_Qe57);var _super168=_createSuper(mp);function mp(){_classCallCheck(this,mp);return _super168.apply(this,arguments);}_createClass(mp,[{key:"init",value:function init(){var e=this.editor.t;Jf(this.editor,"numberedList",e("Numbered List"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>'),Jf(this.editor,"bulletedList",e("Bulleted List"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>');}}],[{key:"pluginName",get:function get(){return"ListUI";}}]);return mp;}(Qe);function fp(e,t){return function(e){e.on("attribute:url:media",i);};function i(i,n,o){if(!o.consumable.consume(n.item,i.name))return;var r=n.attributeNewValue,s=o.writer,a=o.mapper.toViewElement(n.item),c=_toConsumableArray(a.getChildren()).find(function(e){return e.getCustomProperty("media-content");});s.remove(c);var l=e.getMediaViewElement(s,r,t);s.insert(s.createPositionAt(a,0),l);}}function pp(e,t,i,n){var o=e.createContainerElement("figure",{"class":"media"});return e.insert(e.createPositionAt(o,0),t.getMediaViewElement(e,i,n)),o;}function bp(e){var t=e.getSelectedElement();return t&&t.is("element","media")?t:null;}function wp(e,t,i){e.change(function(n){var o=n.createElement("media",{url:t});e.insertContent(o,i),n.setSelection(o,"on");});}var kp=/*#__PURE__*/function(_Ze24){_inherits(kp,_Ze24);var _super169=_createSuper(kp);function kp(){_classCallCheck(this,kp);return _super169.apply(this,arguments);}_createClass(kp,[{key:"refresh",value:function refresh(){var e=this.editor.model,t=e.document.selection,i=bp(t);this.value=i?i.getAttribute("url"):null,this.isEnabled=function(e){var t=e.getSelectedElement();return!!t&&"media"===t.name;}(t)||function(e,t){var i=Fh(e,t).start.parent;i.isEmpty&&!t.schema.isLimit(i)&&(i=i.parent);return t.schema.checkChild(i,"media");}(t,e);}},{key:"execute",value:function execute(e){var t=this.editor.model,i=t.document.selection,n=bp(i);n?t.change(function(t){t.setAttribute("url",e,n);}):wp(t,e,Fh(i,t));}}]);return kp;}(Ze);var _p=/*#__PURE__*/function(){function _p(e,t){_classCallCheck(this,_p);var i=t.providers,n=t.extraProviders||[],o=new Set(t.removeProviders),r=i.concat(n).filter(function(e){var t=e.name;return t?!o.has(t):(Object(c.b)("media-embed-no-provider-name",{provider:e}),!1);});this.locale=e,this.providerDefinitions=r;}_createClass(_p,[{key:"hasMedia",value:function hasMedia(e){return!!this._getMedia(e);}},{key:"getMediaViewElement",value:function getMediaViewElement(e,t,i){return this._getMedia(t).getViewElement(e,i);}},{key:"_getMedia",value:function _getMedia(e){if(!e)return new vp(this.locale);e=e.trim();var _iterator396=_createForOfIteratorHelper(this.providerDefinitions),_step396;try{for(_iterator396.s();!(_step396=_iterator396.n()).done;){var _t288=_step396.value;var _i292=_t288.html,_n175=en(_t288.url);var _iterator397=_createForOfIteratorHelper(_n175),_step397;try{for(_iterator397.s();!(_step397=_iterator397.n()).done;){var _t289=_step397.value;var _n176=this._getUrlMatches(e,_t289);if(_n176)return new vp(this.locale,e,_n176,_i292);}}catch(err){_iterator397.e(err);}finally{_iterator397.f();}}}catch(err){_iterator396.e(err);}finally{_iterator396.f();}return null;}},{key:"_getUrlMatches",value:function _getUrlMatches(e,t){var i=e.match(t);if(i)return i;var n=e.replace(/^https?:\/\//,"");return i=n.match(t),i||(n=n.replace(/^www\./,""),i=n.match(t),i||null);}}]);return _p;}();var vp=/*#__PURE__*/function(){function vp(e,t,i,n){_classCallCheck(this,vp);this.url=this._getValidUrl(t),this._t=e.t,this._match=i,this._previewRenderer=n;}_createClass(vp,[{key:"getViewElement",value:function getViewElement(e,t){var i={};var n;if(t.renderForEditingView||t.renderMediaPreview&&this.url&&this._previewRenderer){this.url&&(i["data-oembed-url"]=this.url),t.renderForEditingView&&(i["class"]="ck-media__wrapper");var _o107=this._getPreviewHtml(t);n=e.createRawElement("div",i,function(e){e.innerHTML=_o107;});}else this.url&&(i.url=this.url),n=e.createEmptyElement(t.elementName,i);return e.setCustomProperty("media-content",!0,n),n;}},{key:"_getPreviewHtml",value:function _getPreviewHtml(e){return this._previewRenderer?this._previewRenderer(this._match):this.url&&e.renderForEditingView?this._getPlaceholderHtml():"";}},{key:"_getPlaceholderHtml",value:function _getPlaceholderHtml(){var e=new Xl(),t=new Zl();e.text=this._t("Open media in new tab"),t.content='<svg viewBox="0 0 64 42" xmlns="http://www.w3.org/2000/svg"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z"/></svg>',t.viewBox="0 0 64 42";return new Nl({tag:"div",attributes:{"class":"ck ck-reset_all ck-media__placeholder"},children:[{tag:"div",attributes:{"class":"ck-media__placeholder__icon"},children:[t]},{tag:"a",attributes:{"class":"ck-media__placeholder__url",target:"_blank",rel:"noopener noreferrer",href:this.url},children:[{tag:"span",attributes:{"class":"ck-media__placeholder__url__text"},children:[this.url]},e]}]}).render().outerHTML;}},{key:"_getValidUrl",value:function _getValidUrl(e){return e?e.match(/^https?/)?e:"https://"+e:null;}}]);return vp;}();i(94);var yp=/*#__PURE__*/function(_Qe58){_inherits(yp,_Qe58);var _super170=_createSuper(yp);function yp(e){var _this265;_classCallCheck(this,yp);_this265=_super170.call(this,e),e.config.define("mediaEmbed",{elementName:"oembed",providers:[{name:"dailymotion",url:/^dailymotion\.com\/video\/(\w+)/,html:function html(e){return"<div style=\"position: relative; padding-bottom: 100%; height: 0; \"><iframe src=\"https://www.dailymotion.com/embed/video/".concat(e[1],"\" style=\"position: absolute; width: 100%; height: 100%; top: 0; left: 0;\" frameborder=\"0\" width=\"480\" height=\"270\" allowfullscreen allow=\"autoplay\"></iframe></div>");}},{name:"spotify",url:[/^open\.spotify\.com\/(artist\/\w+)/,/^open\.spotify\.com\/(album\/\w+)/,/^open\.spotify\.com\/(track\/\w+)/],html:function html(e){return"<div style=\"position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;\"><iframe src=\"https://open.spotify.com/embed/".concat(e[1],"\" style=\"position: absolute; width: 100%; height: 100%; top: 0; left: 0;\" frameborder=\"0\" allowtransparency=\"true\" allow=\"encrypted-media\"></iframe></div>");}},{name:"youtube",url:[/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)/,/^(?:m\.)?youtube\.com\/v\/([\w-]+)/,/^youtube\.com\/embed\/([\w-]+)/,/^youtu\.be\/([\w-]+)/],html:function html(e){return"<div style=\"position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;\"><iframe src=\"https://www.youtube.com/embed/".concat(e[1],"\" style=\"position: absolute; width: 100%; height: 100%; top: 0; left: 0;\" frameborder=\"0\" allow=\"autoplay; encrypted-media\" allowfullscreen></iframe></div>");}},{name:"vimeo",url:[/^vimeo\.com\/(\d+)/,/^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/album\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/channels\/[^/]+\/(\d+)/,/^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/,/^vimeo\.com\/ondemand\/[^/]+\/(\d+)/,/^player\.vimeo\.com\/video\/(\d+)/],html:function html(e){return"<div style=\"position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;\"><iframe src=\"https://player.vimeo.com/video/".concat(e[1],"\" style=\"position: absolute; width: 100%; height: 100%; top: 0; left: 0;\" frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>");}},{name:"instagram",url:/^instagram\.com\/p\/(\w+)/},{name:"twitter",url:/^twitter\.com/},{name:"googleMaps",url:[/^google\.com\/maps/,/^goo\.gl\/maps/,/^maps\.google\.com/,/^maps\.app\.goo\.gl/]},{name:"flickr",url:/^flickr\.com/},{name:"facebook",url:/^facebook\.com/}]}),_this265.registry=new _p(e.locale,e.config.get("mediaEmbed"));return _this265;}_createClass(yp,[{key:"init",value:function init(){var e=this.editor,t=e.model.schema,i=e.t,n=e.conversion,o=e.config.get("mediaEmbed.previewsInData"),r=e.config.get("mediaEmbed.elementName"),s=this.registry;e.commands.add("mediaEmbed",new kp(e)),t.register("media",{isObject:!0,isBlock:!0,allowWhere:"$block",allowAttributes:["url"]}),n["for"]("dataDowncast").elementToElement({model:"media",view:function view(e,_ref73){var t=_ref73.writer;var i=e.getAttribute("url");return pp(t,s,i,{elementName:r,renderMediaPreview:i&&o});}}),n["for"]("dataDowncast").add(fp(s,{elementName:r,renderMediaPreview:o})),n["for"]("editingDowncast").elementToElement({model:"media",view:function view(e,_ref74){var t=_ref74.writer;var n=e.getAttribute("url");return function(e,t,i){return t.setCustomProperty("media",!0,e),zh(e,t,{label:i});}(pp(t,s,n,{elementName:r,renderForEditingView:!0}),t,i("media widget"));}}),n["for"]("editingDowncast").add(fp(s,{elementName:r,renderForEditingView:!0})),n["for"]("upcast").elementToElement({view:function view(e){return["oembed",r].includes(e.name)&&e.getAttribute("url")?{name:!0}:null;},model:function model(e,_ref75){var t=_ref75.writer;var i=e.getAttribute("url");if(s.hasMedia(i))return t.createElement("media",{url:i});}}).elementToElement({view:{name:"div",attributes:{"data-oembed-url":!0}},model:function model(e,_ref76){var t=_ref76.writer;var i=e.getAttribute("data-oembed-url");if(s.hasMedia(i))return t.createElement("media",{url:i});}});}}],[{key:"pluginName",get:function get(){return"MediaEmbedEditing";}}]);return yp;}(Qe);var xp=/^(?:http(s)?:\/\/)?[\w-]+\.[\w-.~:/?#[\]@!$&'()*+,;=%]+$/;var Ap=/*#__PURE__*/function(_Qe59){_inherits(Ap,_Qe59);var _super171=_createSuper(Ap);function Ap(e){var _this266;_classCallCheck(this,Ap);_this266=_super171.call(this,e),_this266._timeoutId=null,_this266._positionToInsert=null;return _this266;}_createClass(Ap,[{key:"init",value:function init(){var _this267=this;var e=this.editor,t=e.model.document;this.listenTo(e.plugins.get("ClipboardPipeline"),"inputTransformation",function(){var e=t.selection.getFirstRange(),i=el.fromPosition(e.start);i.stickiness="toPrevious";var n=el.fromPosition(e.end);n.stickiness="toNext",t.once("change:data",function(){_this267._embedMediaBetweenPositions(i,n),i.detach(),n.detach();},{priority:"high"});}),e.commands.get("undo").on("execute",function(){_this267._timeoutId&&(vr.window.clearTimeout(_this267._timeoutId),_this267._positionToInsert.detach(),_this267._timeoutId=null,_this267._positionToInsert=null);},{priority:"high"});}},{key:"_embedMediaBetweenPositions",value:function _embedMediaBetweenPositions(e,t){var _this268=this;var i=this.editor,n=i.plugins.get(yp).registry,o=new ba(e,t),r=o.getWalker({ignoreElementEnd:!0});var s="";var _iterator398=_createForOfIteratorHelper(r),_step398;try{for(_iterator398.s();!(_step398=_iterator398.n()).done;){var _e315=_step398.value;_e315.item.is("$textProxy")&&(s+=_e315.item.data);}}catch(err){_iterator398.e(err);}finally{_iterator398.f();}if(s=s.trim(),!s.match(xp))return void o.detach();if(!n.hasMedia(s))return void o.detach();i.commands.get("mediaEmbed").isEnabled?(this._positionToInsert=el.fromPosition(e),this._timeoutId=vr.window.setTimeout(function(){i.model.change(function(e){var t;_this268._timeoutId=null,e.remove(o),o.detach(),"$graveyard"!==_this268._positionToInsert.root.rootName&&(t=_this268._positionToInsert),wp(i.model,s,t),_this268._positionToInsert.detach(),_this268._positionToInsert=null;});},100)):o.detach();}}],[{key:"requires",get:function get(){return[lu,ig];}},{key:"pluginName",get:function get(){return"AutoMediaEmbed";}}]);return Ap;}(Qe);i(96);var Cp=/*#__PURE__*/function(_Ml29){_inherits(Cp,_Ml29);var _super172=_createSuper(Cp);function Cp(e,t){var _this269;_classCallCheck(this,Cp);_this269=_super172.call(this,t);var i=t.t;_this269.focusTracker=new Rs(),_this269.keystrokes=new Os(),_this269.set("mediaURLInputValue",""),_this269.urlInputView=_this269._createUrlInput(),_this269.saveButtonView=_this269._createButton(i("Save"),Tl.check,"ck-button-save"),_this269.saveButtonView.type="submit",_this269.saveButtonView.bind("isEnabled").to(_assertThisInitialized(_this269),"mediaURLInputValue",function(e){return!!e;}),_this269.cancelButtonView=_this269._createButton(i("Cancel"),Tl.cancel,"ck-button-cancel","cancel"),_this269._focusables=new Pl(),_this269._focusCycler=new id({focusables:_this269._focusables,focusTracker:_this269.focusTracker,keystrokeHandler:_this269.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),_this269._validators=e,_this269.setTemplate({tag:"form",attributes:{"class":["ck","ck-media-form","ck-responsive-form"],tabindex:"-1"},children:[_this269.urlInputView,_this269.saveButtonView,_this269.cancelButtonView]}),Il(_assertThisInitialized(_this269));return _this269;}_createClass(Cp,[{key:"render",value:function render(){var _this270=this;_get(_getPrototypeOf(Cp.prototype),"render",this).call(this),Sl({view:this});[this.urlInputView,this.saveButtonView,this.cancelButtonView].forEach(function(e){_this270._focusables.add(e),_this270.focusTracker.add(e.element);}),this.keystrokes.listenTo(this.element);var e=function e(_e316){return _e316.stopPropagation();};this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e),this.listenTo(this.urlInputView.element,"selectstart",function(e,t){t.stopPropagation();},{priority:"high"});}},{key:"focus",value:function focus(){this._focusCycler.focusFirst();}},{key:"url",get:function get(){return this.urlInputView.fieldView.element.value.trim();},set:function set(e){this.urlInputView.fieldView.element.value=e.trim();}},{key:"isValid",value:function isValid(){this.resetFormStatus();var _iterator399=_createForOfIteratorHelper(this._validators),_step399;try{for(_iterator399.s();!(_step399=_iterator399.n()).done;){var _e317=_step399.value;var _t290=_e317(this);if(_t290)return this.urlInputView.errorText=_t290,!1;}}catch(err){_iterator399.e(err);}finally{_iterator399.f();}return!0;}},{key:"resetFormStatus",value:function resetFormStatus(){this.urlInputView.errorText=null,this.urlInputView.infoText=this._urlInputViewInfoDefault;}},{key:"_createUrlInput",value:function _createUrlInput(){var _this271=this;var e=this.locale.t,t=new Nd(this.locale,Rd),i=t.fieldView;return this._urlInputViewInfoDefault=e("Paste the media URL in the input."),this._urlInputViewInfoTip=e("Tip: Paste the URL into the content to embed faster."),t.label=e("Media URL"),t.infoText=this._urlInputViewInfoDefault,i.on("input",function(){t.infoText=i.element.value?_this271._urlInputViewInfoTip:_this271._urlInputViewInfoDefault,_this271.mediaURLInputValue=i.element.value.trim();}),t;}},{key:"_createButton",value:function _createButton(e,t,i,n){var o=new ed(this.locale);return o.set({label:e,icon:t,tooltip:!0}),o.extendTemplate({attributes:{"class":i}}),n&&o.delegate("execute").to(this,n),o;}}]);return Cp;}(Ml);var Tp=/*#__PURE__*/function(_Qe60){_inherits(Tp,_Qe60);var _super173=_createSuper(Tp);function Tp(){_classCallCheck(this,Tp);return _super173.apply(this,arguments);}_createClass(Tp,[{key:"init",value:function init(){var _this272=this;var e=this.editor,t=e.commands.get("mediaEmbed"),i=e.plugins.get(yp).registry;e.ui.componentFactory.add("mediaEmbed",function(n){var o=xd(n),r=new Cp(function(e,t){return[function(t){if(!t.url.length)return e("The URL must not be empty.");},function(i){if(!t.hasMedia(i.url))return e("This media URL is not supported.");}];}(e.t,i),e.locale);return _this272._setUpDropdown(o,r,t,e),_this272._setUpForm(o,r,t),o;});}},{key:"_setUpDropdown",value:function _setUpDropdown(e,t,i){var n=this.editor,o=n.t,r=e.buttonView;function s(){n.editing.view.focus(),e.isOpen=!1;}e.bind("isEnabled").to(i),e.panelView.children.add(t),r.set({label:o("Insert media"),icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M18.68 3.03c.6 0 .59-.03.59.55v12.84c0 .59.01.56-.59.56H1.29c-.6 0-.59.03-.59-.56V3.58c0-.58-.01-.55.6-.55h17.38zM15.77 15V5H4.2v10h11.57zM2 4v1h1V4H2zm0 2v1h1V6H2zm0 2v1h1V8H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zM17 4v1h1V4h-1zm0 2v1h1V6h-1zm0 2v1h1V8h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zM7.5 7.177a.4.4 0 0 1 .593-.351l5.133 2.824a.4.4 0 0 1 0 .7l-5.133 2.824a.4.4 0 0 1-.593-.35V7.176v.001z"/></svg>',tooltip:!0}),r.on("open",function(){t.disableCssTransitions(),t.url=i.value||"",t.urlInputView.fieldView.select(),t.focus(),t.enableCssTransitions();},{priority:"low"}),e.on("submit",function(){t.isValid()&&(n.execute("mediaEmbed",t.url),s());}),e.on("change:isOpen",function(){return t.resetFormStatus();}),e.on("cancel",function(){return s();});}},{key:"_setUpForm",value:function _setUpForm(e,t,i){t.delegate("submit","cancel").to(e),t.urlInputView.bind("value").to(i,"value"),t.urlInputView.bind("isReadOnly").to(i,"isEnabled",function(e){return!e;});}}],[{key:"requires",get:function get(){return[yp];}},{key:"pluginName",get:function get(){return"MediaEmbedUI";}}]);return Tp;}(Qe);i(98);function Ep(e,t){if(!e.childCount)return;var i=new gh(e.document),n=function(e,t){var i=t.createRangeIn(e),n=new mn({name:/^p|h\d+$/,styles:{"mso-list":/.*/}}),o=[];var _iterator400=_createForOfIteratorHelper(i),_step400;try{for(_iterator400.s();!(_step400=_iterator400.n()).done;){var _e318=_step400.value;if("elementStart"===_e318.type&&n.match(_e318.item)){var _t291=Pp(_e318.item);o.push({element:_e318.item,id:_t291.id,order:_t291.order,indent:_t291.indent});}}}catch(err){_iterator400.e(err);}finally{_iterator400.f();}return o;}(e,i);if(!n.length)return;var o=null,r=1;n.forEach(function(e,s){var a=function(e,t){if(!e)return!0;if(e.id!==t.id)return t.indent-e.indent!=1;var i=t.element.previousSibling;if(!i)return!0;return n=i,!(n.is("element","ol")||n.is("element","ul"));var n;}(n[s-1],e),c=a?null:n[s-1],l=(h=e,(d=c)?h.indent-d.indent:h.indent-1);var d,h;if(a&&(o=null,r=1),!o||0!==l){var _n177=function(e,t){var i=new RegExp("@list l".concat(e.id,":level").concat(e.indent,"\\s*({[^}]*)"),"gi"),n=/mso-level-number-format:([^;]{0,100});/gi,o=i.exec(t);var r="decimal",s="ol";if(o&&o[1]){var _t292=n.exec(o[1]);if(_t292&&_t292[1]&&(r=_t292[1].trim(),s="bullet"!==r&&"image"!==r?"ol":"ul"),"bullet"===r){var _t293=function(e){var t=function(e){if(e.getChild(0).is("$text"))return null;var _iterator401=_createForOfIteratorHelper(e.getChildren()),_step401;try{for(_iterator401.s();!(_step401=_iterator401.n()).done;){var _t294=_step401.value;if(!_t294.is("element","span"))continue;var _e319=_t294.getChild(0);return _e319.is("$text")?_e319:_e319.getChild(0);}}catch(err){_iterator401.e(err);}finally{_iterator401.f();}}(e);if(!t)return null;var i=t._data;if("o"===i)return"circle";if(""===i)return"disc";if(""===i)return"square";return null;}(e.element);_t293&&(r=_t293);}}return{type:s,style:Ip(r)};}(e,t);if(o){if(e.indent>r){var _e320=o.getChild(o.childCount-1),_t295=_e320.getChild(_e320.childCount-1);o=Sp(_n177,_t295,i),r+=1;}else if(e.indent<r){var _t296=r-e.indent;o=function(e,t){var i=e.getAncestors({parentFirst:!0});var n=null,o=0;var _iterator402=_createForOfIteratorHelper(i),_step402;try{for(_iterator402.s();!(_step402=_iterator402.n()).done;){var _e321=_step402.value;if("ul"!==_e321.name&&"ol"!==_e321.name||o++,o===t){n=_e321;break;}}}catch(err){_iterator402.e(err);}finally{_iterator402.f();}return n;}(o,_t296),r=parseInt(e.indent);}}else o=Sp(_n177,e.element,i);e.indent<=r&&(o.is("element",_n177.type)||(o=i.rename(_n177.type,o)));}var u=function(e,t){return function(e,t){var i=new mn({name:"span",styles:{"mso-list":"Ignore"}}),n=t.createRangeIn(e);var _iterator403=_createForOfIteratorHelper(n),_step403;try{for(_iterator403.s();!(_step403=_iterator403.n()).done;){var _e322=_step403.value;"elementStart"===_e322.type&&i.match(_e322.item)&&t.remove(_e322.item);}}catch(err){_iterator403.e(err);}finally{_iterator403.f();}}(e,t),t.rename("li",e);}(e.element,i);i.appendChild(u,o);});}function Ip(e){switch(e){case"arabic-leading-zero":return"decimal-leading-zero";case"alpha-upper":return"upper-alpha";case"alpha-lower":return"lower-alpha";case"roman-upper":return"upper-roman";case"roman-lower":return"lower-roman";case"circle":case"disc":case"square":return e;default:return null;}}function Sp(e,t,i){var n=t.parent,o=i.createElement(e.type),r=n.getChildIndex(t)+1;return i.insertChild(r,o,n),e.style&&i.setStyle("list-style-type",e.style,o),o;}function Pp(e){var t={},i=e.getStyle("mso-list");if(i){var _e323=i.match(/(^|\s{1,100})l(\d+)/i),_n178=i.match(/\s{0,100}lfo(\d+)/i),_o108=i.match(/\s{0,100}level(\d+)/i);_e323&&_n178&&_o108&&(t.id=_e323[2],t.order=_n178[1],t.indent=_o108[1]);}return t;}var Mp=/id=("|')docs-internal-guid-[-0-9a-f]+("|')/i;var Np=/*#__PURE__*/function(){function Np(e){_classCallCheck(this,Np);this.document=e;}_createClass(Np,[{key:"isActive",value:function isActive(e){return Mp.test(e);}},{key:"execute",value:function execute(e){var t=new gh(this.document),i=e._parsedData.body;!function(e,t){var _iterator404=_createForOfIteratorHelper(e.getChildren()),_step404;try{for(_iterator404.s();!(_step404=_iterator404.n()).done;){var _i293=_step404.value;if(_i293.is("element","b")&&"normal"===_i293.getStyle("font-weight")){var _n179=e.getChildIndex(_i293);t.remove(_i293),t.insertChild(_n179,_i293.getChildren(),e);}}}catch(err){_iterator404.e(err);}finally{_iterator404.f();}}(i,t),function(e,t){var _iterator405=_createForOfIteratorHelper(t.createRangeIn(e)),_step405;try{for(_iterator405.s();!(_step405=_iterator405.n()).done;){var _i294=_step405.value;var _e324=_i294.item;if(_e324.is("element","li")){var _i295=_e324.getChild(0);_i295&&_i295.is("element","p")&&t.unwrapElement(_i295);}}}catch(err){_iterator405.e(err);}finally{_iterator405.f();}}(i,t),e.content=i;}}]);return Np;}();function Rp(e,t){if(!e.childCount)return;var i=new gh();!function(e,t,i){var n=i.createRangeIn(t),o=new mn({name:"img"}),r=[];var _iterator406=_createForOfIteratorHelper(n),_step406;try{for(_iterator406.s();!(_step406=_iterator406.n()).done;){var _t297=_step406.value;if(o.match(_t297.item)){var _i297=_t297.item,_n180=_i297.getAttribute("v:shapes")?_i297.getAttribute("v:shapes").split(" "):[];_n180.length&&_n180.every(function(t){return e.indexOf(t)>-1;})?r.push(_i297):_i297.getAttribute("src")||r.push(_i297);}}}catch(err){_iterator406.e(err);}finally{_iterator406.f();}for(var _i296=0,_r64=r;_i296<_r64.length;_i296++){var _e325=_r64[_i296];i.remove(_e325);}}(function(e,t){var i=t.createRangeIn(e),n=new mn({name:/v:(.+)/}),o=[];var _iterator407=_createForOfIteratorHelper(i),_step407;try{for(_iterator407.s();!(_step407=_iterator407.n()).done;){var _e326=_step407.value;var _t298=_e326.item,_i298=_t298.previousSibling&&_t298.previousSibling.name||null;n.match(_t298)&&_t298.getAttribute("o:gfxdata")&&"v:shapetype"!==_i298&&o.push(_e326.item.getAttribute("id"));}}catch(err){_iterator407.e(err);}finally{_iterator407.f();}return o;}(e,i),e,i),function(e,t){var i=t.createRangeIn(e),n=new mn({name:/v:(.+)/}),o=[];var _iterator408=_createForOfIteratorHelper(i),_step408;try{for(_iterator408.s();!(_step408=_iterator408.n()).done;){var _e328=_step408.value;n.match(_e328.item)&&o.push(_e328.item);}}catch(err){_iterator408.e(err);}finally{_iterator408.f();}for(var _i299=0,_o109=o;_i299<_o109.length;_i299++){var _e327=_o109[_i299];t.remove(_e327);}}(e,i);var n=function(e,t){var i=t.createRangeIn(e),n=new mn({name:"img"}),o=[];var _iterator409=_createForOfIteratorHelper(i),_step409;try{for(_iterator409.s();!(_step409=_iterator409.n()).done;){var _e329=_step409.value;n.match(_e329.item)&&_e329.item.getAttribute("src").startsWith("file://")&&o.push(_e329.item);}}catch(err){_iterator409.e(err);}finally{_iterator409.f();}return o;}(e,i);n.length&&function(e,t,i){if(e.length===t.length)for(var _o110=0;_o110<e.length;_o110++){var _r65="data:".concat(t[_o110].type,";base64,").concat((n=t[_o110].hex,btoa(n.match(/\w{2}/g).map(function(e){return String.fromCharCode(parseInt(e,16));}).join(""))));i.setAttribute("src",_r65,e[_o110]);}var n;}(n,function(e){if(!e)return[];var t=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,i=new RegExp("(?:("+t.source+"))([\\da-fA-F\\s]+)\\}","g"),n=e.match(i),o=[];if(n){var _iterator410=_createForOfIteratorHelper(n),_step410;try{for(_iterator410.s();!(_step410=_iterator410.n()).done;){var _e330=_step410.value;var _i300=!1;_e330.includes("\\pngblip")?_i300="image/png":_e330.includes("\\jpegblip")&&(_i300="image/jpeg"),_i300&&o.push({hex:_e330.replace(t,"").replace(/[^\da-fA-F]/g,""),type:_i300});}}catch(err){_iterator410.e(err);}finally{_iterator410.f();}}return o;}(t),i);}var Op=/<meta\s*name="?generator"?\s*content="?microsoft\s*word\s*\d+"?\/?>/i,zp=/xmlns:o="urn:schemas-microsoft-com/i;var Dp=/*#__PURE__*/function(){function Dp(e){_classCallCheck(this,Dp);this.document=e;}_createClass(Dp,[{key:"isActive",value:function isActive(e){return Op.test(e)||zp.test(e);}},{key:"execute",value:function execute(e){var _e$_parsedData=e._parsedData,t=_e$_parsedData.body,i=_e$_parsedData.stylesString;Ep(t,i),Rp(t,e.dataTransfer.getData("text/rtf")),e.content=t;}}]);return Dp;}();function Lp(e){return e.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,function(e,t){return 1===t.length?" ":Array(t.length+1).join(" ").substr(0,t.length);});}function Vp(e,t){var i=new DOMParser(),n=function(e){return Lp(Lp(e)).replace(/(<span\s+style=['"]mso-spacerun:yes['"]>[^\S\r\n]*?)[\r\n]+([^\S\r\n]*<\/span>)/g,"$1$2").replace(/<span\s+style=['"]mso-spacerun:yes['"]><\/span>/g,"").replace(/ <\//g,"</").replace(/ <o:p><\/o:p>/g,"<o:p></o:p>").replace(/<o:p>(&nbsp;|\u00A0)<\/o:p>/g,"").replace(/>([^\S\r\n]*[\r\n]\s*)</g,"><");}(function(e){var t=e.indexOf("</body>");if(t<0)return e;var i=e.indexOf("</html>",t+"</body>".length);return e.substring(0,t+"</body>".length)+(i>=0?e.substring(i):"");}(e=e.replace(/<!--\[if gte vml 1]>/g,""))),o=i.parseFromString(n,"text/html");!function(e){e.querySelectorAll("span[style*=spacerun]").forEach(function(e){var t=e.innerText.length||0;e.innerHTML=Array(t+1).join(" ").substr(0,t);});}(o);var r=o.body.innerHTML,s=function(e,t){var i=new yo(t),n=new Er(i,{blockFillerMode:"nbsp"}),o=e.createDocumentFragment(),r=e.body.childNodes;for(;r.length>0;){o.appendChild(r[0]);}return n.domToView(o,{skipComments:!0});}(o,t),a=function(e){var t=[],i=[],n=Array.from(e.getElementsByTagName("style"));for(var _i301=0,_n181=n;_i301<_n181.length;_i301++){var _e331=_n181[_i301];_e331.sheet&&_e331.sheet.cssRules&&_e331.sheet.cssRules.length&&(t.push(_e331.sheet),i.push(_e331.innerHTML));}return{styles:t,stylesString:i.join(" ")};}(o);return{body:s,bodyString:r,styles:a.styles,stylesString:a.stylesString};}function jp(e,t,i,n){var o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:1;t>o?n.setAttribute(e,t,i):n.removeAttribute(e,i);}function Bp(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var n=e.createElement("tableCell",i);return e.insertElement("paragraph",n),e.insert(n,t),n;}function Fp(e,t){var i=t.parent.parent,n=parseInt(i.getAttribute("headingColumns")||0),_e$getCellLocation=e.getCellLocation(t),o=_e$getCellLocation.column;return!!n&&o<n;}function Hp(){return function(e){e.on("element:table",function(e,t,i){var n=t.viewItem;if(!i.consumable.test(n,{name:!0}))return;var _ref77=function(e){var t={headingRows:0,headingColumns:0},i=[],n=[];var o;for(var _i302=0,_Array$from7=Array.from(e.getChildren());_i302<_Array$from7.length;_i302++){var _r66=_Array$from7[_i302];if("tbody"===_r66.name||"thead"===_r66.name||"tfoot"===_r66.name){"thead"!==_r66.name||o||(o=_r66);var _e332=Array.from(_r66.getChildren()).filter(function(e){return e.is("element","tr");});var _iterator411=_createForOfIteratorHelper(_e332),_step411;try{for(_iterator411.s();!(_step411=_iterator411.n()).done;){var _r67=_step411.value;if("thead"===_r67.parent.name&&_r67.parent===o)t.headingRows++,i.push(_r67);else{n.push(_r67);var _e333=Wp(_r67);_e333>t.headingColumns&&(t.headingColumns=_e333);}}}catch(err){_iterator411.e(err);}finally{_iterator411.f();}}}return t.rows=[].concat(i,n),t;}(n),o=_ref77.rows,r=_ref77.headingRows,s=_ref77.headingColumns,a={};s&&(a.headingColumns=s),r&&(a.headingRows=r);var c=i.writer.createElement("table",a);if(i.safeInsert(c,t.modelCursor)){if(i.consumable.consume(n,{name:!0}),o.forEach(function(e){return i.convertItem(e,i.writer.createPositionAt(c,"end"));}),i.convertChildren(n,i.writer.createPositionAt(c,"end")),c.isEmpty){var _e334=i.writer.createElement("tableRow");i.writer.insert(_e334,i.writer.createPositionAt(c,"end")),Bp(i.writer,i.writer.createPositionAt(_e334,"end"));}i.updateConversionResult(c,t);}});};}function Up(e){return function(t){t.on("element:"+e,function(e,t,i){if(t.modelRange&&t.viewItem.isEmpty){var _e335=t.modelRange.start.nodeAfter,_n182=i.writer.createPositionAt(_e335,0);i.writer.insertElement("paragraph",_n182);}},{priority:"low"});};}function Wp(e){var t=0,i=0;var n=Array.from(e.getChildren()).filter(function(e){return"th"===e.name||"td"===e.name;});for(;i<n.length&&"th"===n[i].name;){var _e336=n[i];t+=parseInt(_e336.getAttribute("colspan")||1),i++;}return t;}var qp=/*#__PURE__*/function(_Symbol$iterator14){function qp(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,qp);this._table=e,this._startRow=void 0!==t.row?t.row:t.startRow||0,this._endRow=void 0!==t.row?t.row:t.endRow,this._startColumn=void 0!==t.column?t.column:t.startColumn||0,this._endColumn=void 0!==t.column?t.column:t.endColumn,this._includeAllSlots=!!t.includeAllSlots,this._skipRows=new Set(),this._row=0,this._rowIndex=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map(),this._nextCellAtColumn=-1;}_createClass(qp,[{key:_Symbol$iterator14,value:function value(){return this;}},{key:"next",value:function next(){var e=this._table.getChild(this._rowIndex);if(!e||this._isOverEndRow())return{done:!0};if(!e.is("element","tableRow"))return this._rowIndex++,this.next();if(this._isOverEndColumn())return this._advanceToNextRow();var t=null;var i=this._getSpanned();if(i)this._includeAllSlots&&!this._shouldSkipSlot()&&(t=this._formatOutValue(i.cell,i.row,i.column));else{var _i303=e.getChild(this._cellIndex);if(!_i303)return this._advanceToNextRow();var _n183=parseInt(_i303.getAttribute("colspan")||1),_o111=parseInt(_i303.getAttribute("rowspan")||1);(_n183>1||_o111>1)&&this._recordSpans(_i303,_o111,_n183),this._shouldSkipSlot()||(t=this._formatOutValue(_i303)),this._nextCellAtColumn=this._column+_n183;}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,t||this.next();}},{key:"skipRow",value:function skipRow(e){this._skipRows.add(e);}},{key:"_advanceToNextRow",value:function _advanceToNextRow(){return this._row++,this._rowIndex++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next();}},{key:"_isOverEndRow",value:function _isOverEndRow(){return void 0!==this._endRow&&this._row>this._endRow;}},{key:"_isOverEndColumn",value:function _isOverEndColumn(){return void 0!==this._endColumn&&this._column>this._endColumn;}},{key:"_formatOutValue",value:function _formatOutValue(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this._row;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this._column;return{done:!1,value:new $p(this,e,t,i)};}},{key:"_shouldSkipSlot",value:function _shouldSkipSlot(){var e=this._skipRows.has(this._row),t=this._row<this._startRow,i=this._column<this._startColumn,n=void 0!==this._endColumn&&this._column>this._endColumn;return e||t||i||n;}},{key:"_getSpanned",value:function _getSpanned(){var e=this._spannedCells.get(this._row);return e&&e.get(this._column)||null;}},{key:"_recordSpans",value:function _recordSpans(e,t,i){var n={cell:e,row:this._row,column:this._column};for(var _e337=this._row;_e337<this._row+t;_e337++){for(var _t299=this._column;_t299<this._column+i;_t299++){_e337==this._row&&_t299==this._column||this._markSpannedCell(_e337,_t299,n);}}}},{key:"_markSpannedCell",value:function _markSpannedCell(e,t,i){this._spannedCells.has(e)||this._spannedCells.set(e,new Map());this._spannedCells.get(e).set(t,i);}}]);return qp;}(Symbol.iterator);var $p=/*#__PURE__*/function(){function $p(e,t,i,n){_classCallCheck(this,$p);this.cell=t,this.row=e._row,this.column=e._column,this.cellAnchorRow=i,this.cellAnchorColumn=n,this._cellIndex=e._cellIndex,this._rowIndex=e._rowIndex,this._table=e._table;}_createClass($p,[{key:"isAnchor",get:function get(){return this.row===this.cellAnchorRow&&this.column===this.cellAnchorColumn;}},{key:"cellWidth",get:function get(){return parseInt(this.cell.getAttribute("colspan")||1);}},{key:"cellHeight",get:function get(){return parseInt(this.cell.getAttribute("rowspan")||1);}},{key:"rowIndex",get:function get(){return this._rowIndex;}},{key:"getPositionBefore",value:function getPositionBefore(){return this._table.root.document.model.createPositionAt(this._table.getChild(this.row),this._cellIndex);}}]);return $p;}();function Yp(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return function(t){return t.on("insert:table",function(t,i,n){var o=i.item;if(!n.consumable.consume(o,"insert"))return;n.consumable.consume(o,"attribute:headingRows:table"),n.consumable.consume(o,"attribute:headingColumns:table");var r=e&&e.asWidget,s=n.writer.createContainerElement("figure",{"class":"table"}),a=n.writer.createContainerElement("table");var c;var l,d;n.writer.insert(n.writer.createPositionAt(s,0),a),r&&(l=s,(d=n.writer).setCustomProperty("table",!0,l),c=zh(l,d,{hasSelectionHandle:!0}));var h=new qp(o),u={headingRows:o.getAttribute("headingRows")||0,headingColumns:o.getAttribute("headingColumns")||0},g=new Map();var _iterator412=_createForOfIteratorHelper(h),_step412;try{for(_iterator412.s();!(_step412=_iterator412.n()).done;){var _t300=_step412.value;var _i304=_t300.row,_r68=_t300.cell,_s38=o.getChild(_i304),_c14=g.get(_i304)||Zp(a,_s38,_i304,u,n);g.set(_i304,_c14),n.consumable.consume(_r68,"insert");Jp(_t300,u,n.writer.createPositionAt(_c14,"end"),n,e);}}catch(err){_iterator412.e(err);}finally{_iterator412.f();}var _iterator413=_createForOfIteratorHelper(o.getChildren()),_step413;try{for(_iterator413.s();!(_step413=_iterator413.n()).done;){var _e338=_step413.value;var _t301=_e338.index;_e338.is("element","tableRow")&&!g.has(_t301)&&g.set(_t301,Zp(a,_e338,_t301,u,n));}}catch(err){_iterator413.e(err);}finally{_iterator413.f();}var m=n.mapper.toViewPosition(i.range.start);n.mapper.bindElements(o,r?c:s),n.writer.insert(m,r?c:s);});};}function Gp(e,t){var i=t.writer;if(e.parent.is("element","tableCell"))return Kp(e)?i.createContainerElement("span",{"class":"ck-table-bogus-paragraph"}):i.createContainerElement("p");}function Kp(e){return 1===e.parent.childCount&&!ib(e);}function Qp(e,t,i){var n=e.cell,o=Xp(e,t),r=i.mapper.toViewElement(n);r&&r.name!==o&&function(e,t,i){var n=i.writer,o=i.mapper.toViewElement(e),r=Bh(n.createEditableElement(t,o.getAttributes()),n);Vh(r,n,function(e,t,i){return i.addClass(en(t.classes),e);},function(e,t,i){return i.removeClass(en(t.classes),e);}),n.insert(n.createPositionAfter(o),r),n.move(n.createRangeIn(o),n.createPositionAt(r,0)),n.remove(n.createRangeOn(o)),i.mapper.unbindViewElement(o),i.mapper.bindElements(e,r);}(n,o,i);}function Jp(e,t,i,n,o){var r=o&&o.asWidget,s=Xp(e,t),a=r?Bh(n.writer.createEditableElement(s),n.writer):n.writer.createContainerElement(s);r&&Vh(a,n.writer,function(e,t,i){return i.addClass(en(t.classes),e);},function(e,t,i){return i.removeClass(en(t.classes),e);});var c=e.cell,l=c.getChild(0),d=1===c.childCount&&"paragraph"===l.name;if(n.writer.insert(i,a),n.mapper.bindElements(c,a),!r&&d&&!ib(l)){var _e339=c.getChild(0);n.consumable.consume(_e339,"insert"),n.mapper.bindElements(_e339,a);}}function Zp(e,t,i,n,o){o.consumable.consume(t,"insert");var r=t.isEmpty?o.writer.createEmptyElement("tr"):o.writer.createContainerElement("tr");o.mapper.bindElements(t,r);var s=n.headingRows,a=function(e,t,i){var n=eb(e,t);return n||function(e,t,i){var n=i.writer.createContainerElement(e),o=i.writer.createPositionAt(t,"tbody"==e?"end":0);return i.writer.insert(o,n),n;}(e,t,i);}(function(e,t){return e<t.headingRows?"thead":"tbody";}(i,n),e,o),c=s>0&&i>=s?i-s:i,l=o.writer.createPositionAt(a,c);return o.writer.insert(l,r),r;}function Xp(e,t){var i=e.row,n=e.column,o=t.headingColumns,r=t.headingRows;if(r&&r>i)return"th";return o&&o>n?"th":"td";}function eb(e,t){var _iterator414=_createForOfIteratorHelper(t.getChildren()),_step414;try{for(_iterator414.s();!(_step414=_iterator414.n()).done;){var _i305=_step414.value;if(_i305.name==e)return _i305;}}catch(err){_iterator414.e(err);}finally{_iterator414.f();}}function tb(e,t,i){var n=eb(e,t);n&&0===n.childCount&&i.writer.remove(i.writer.createRangeOn(n));}function ib(e){return!!_toConsumableArray(e.getAttributeKeys()).length;}var nb=/*#__PURE__*/function(_Ze25){_inherits(nb,_Ze25);var _super174=_createSuper(nb);function nb(){_classCallCheck(this,nb);return _super174.apply(this,arguments);}_createClass(nb,[{key:"refresh",value:function refresh(){var e=this.editor.model,t=e.document.selection,i=e.schema;this.isEnabled=function(e,t){var i=e.getFirstPosition().parent,n=i===i.root?i:i.parent;return t.checkChild(n,"table");}(t,i);}},{key:"execute",value:function execute(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=this.editor.model,i=t.document.selection,n=this.editor.plugins.get("TableUtils"),o=this.editor.config.get("table"),r=Fh(i,t),s=o.defaultHeadings.rows,a=o.defaultHeadings.columns;void 0===e.headingRows&&s&&(e.headingRows=s),void 0===e.headingColumns&&a&&(e.headingColumns=a),t.change(function(i){var o=n.createTable(i,e);t.insertContent(o,r),i.setSelection(i.createPositionAt(o.getNodeByPath([0,0,0]),0));});}}]);return nb;}(Ze);function ob(e){var t=[];var _iterator415=_createForOfIteratorHelper(db(e.getRanges())),_step415;try{for(_iterator415.s();!(_step415=_iterator415.n()).done;){var _i306=_step415.value;var _e340=_i306.getContainedElement();_e340&&_e340.is("element","tableCell")&&t.push(_e340);}}catch(err){_iterator415.e(err);}finally{_iterator415.f();}return t;}function rb(e){var t=[];var _iterator416=_createForOfIteratorHelper(e.getRanges()),_step416;try{for(_iterator416.s();!(_step416=_iterator416.n()).done;){var _i307=_step416.value;var _e341=_i307.start.findAncestor("tableCell");_e341&&t.push(_e341);}}catch(err){_iterator416.e(err);}finally{_iterator416.f();}return t;}function sb(e){var t=ob(e);return t.length?t:rb(e);}function ab(e){return hb(e.map(function(e){return e.parent.index;}));}function cb(e){var t=e[0].findAncestor("table");return hb(_toConsumableArray(new qp(t)).filter(function(t){return e.includes(t.cell);}).map(function(e){return e.column;}));}function lb(e,t){if(e.length<2||!function(e){var t=e[0].findAncestor("table"),i=ab(e),n=parseInt(t.getAttribute("headingRows")||0);if(!gb(i,n))return!1;var o=parseInt(t.getAttribute("headingColumns")||0);return gb(cb(e),o);}(e))return!1;var i=new Set(),n=new Set();var o=0;var _iterator417=_createForOfIteratorHelper(e),_step417;try{for(_iterator417.s();!(_step417=_iterator417.n()).done;){var _r69=_step417.value;var _t$getCellLocation=t.getCellLocation(_r69),_e342=_t$getCellLocation.row,_s39=_t$getCellLocation.column,_a25=parseInt(_r69.getAttribute("rowspan")||1),_c15=parseInt(_r69.getAttribute("colspan")||1);i.add(_e342),n.add(_s39),_a25>1&&i.add(_e342+_a25-1),_c15>1&&n.add(_s39+_c15-1),o+=_a25*_c15;}}catch(err){_iterator417.e(err);}finally{_iterator417.f();}return function(e,t){var i=Array.from(e.values()),n=Array.from(t.values()),o=Math.max.apply(Math,_toConsumableArray(i)),r=Math.min.apply(Math,_toConsumableArray(i)),s=Math.max.apply(Math,_toConsumableArray(n)),a=Math.min.apply(Math,_toConsumableArray(n));return(o-r+1)*(s-a+1);}(i,n)==o;}function db(e){return Array.from(e).sort(ub);}function hb(e){var t=e.sort(function(e,t){return e-t;});return{first:t[0],last:t[t.length-1]};}function ub(e,t){var i=e.start,n=t.start;return i.isBefore(n)?-1:1;}function gb(_ref78,i){var e=_ref78.first,t=_ref78.last;return e<i===t<i;}var mb=/*#__PURE__*/function(_Ze26){_inherits(mb,_Ze26);var _super175=_createSuper(mb);function mb(e){var _this273;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,mb);_this273=_super175.call(this,e),_this273.order=t.order||"below";return _this273;}_createClass(mb,[{key:"refresh",value:function refresh(){var e=!!sb(this.editor.model.document.selection).length;this.isEnabled=e;}},{key:"execute",value:function execute(){var e=this.editor,t=e.model.document.selection,i=e.plugins.get("TableUtils"),n="above"===this.order,o=sb(t),r=ab(o),s=n?r.first:r.last,a=o[0].findAncestor("table");i.insertRows(a,{at:n?s:s+1,copyStructureFromAbove:!n});}}]);return mb;}(Ze);var fb=/*#__PURE__*/function(_Ze27){_inherits(fb,_Ze27);var _super176=_createSuper(fb);function fb(e){var _this274;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,fb);_this274=_super176.call(this,e),_this274.order=t.order||"right";return _this274;}_createClass(fb,[{key:"refresh",value:function refresh(){var e=!!sb(this.editor.model.document.selection).length;this.isEnabled=e;}},{key:"execute",value:function execute(){var e=this.editor,t=e.model.document.selection,i=e.plugins.get("TableUtils"),n="left"===this.order,o=sb(t),r=cb(o),s=n?r.first:r.last,a=o[0].findAncestor("table");i.insertColumns(a,{columns:1,at:n?s:s+1});}}]);return fb;}(Ze);var pb=/*#__PURE__*/function(_Ze28){_inherits(pb,_Ze28);var _super177=_createSuper(pb);function pb(e){var _this275;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,pb);_this275=_super177.call(this,e),_this275.direction=t.direction||"horizontally";return _this275;}_createClass(pb,[{key:"refresh",value:function refresh(){var e=sb(this.editor.model.document.selection);this.isEnabled=1===e.length;}},{key:"execute",value:function execute(){var e=sb(this.editor.model.document.selection)[0],t="horizontally"===this.direction,i=this.editor.plugins.get("TableUtils");t?i.splitCellHorizontally(e,2):i.splitCellVertically(e,2);}}]);return pb;}(Ze);function bb(e,t,i){var n=t.startRow,o=t.startColumn,r=t.endRow,s=t.endColumn,a=i.createElement("table"),c=r-n+1;for(var _e343=0;_e343<c;_e343++){i.insertElement("tableRow",a,"end");}var l=_toConsumableArray(new qp(e,{startRow:n,endRow:r,startColumn:o,endColumn:s,includeAllSlots:!0}));var _iterator418=_createForOfIteratorHelper(l),_step418;try{for(_iterator418.s();!(_step418=_iterator418.n()).done;){var _step418$value=_step418.value,_e344=_step418$value.row,_t302=_step418$value.column,_c16=_step418$value.cell,_d4=_step418$value.isAnchor,_h4=_step418$value.cellAnchorRow,_u3=_step418$value.cellAnchorColumn;var _l7=_e344-n,_g2=a.getChild(_l7);if(_d4){var _n184=i.cloneElement(_c16);i.append(_n184,_g2),yb(_n184,_e344,_t302,r,s,i);}else(_h4<n||_u3<o)&&Bp(i,i.createPositionAt(_g2,"end"));}}catch(err){_iterator418.e(err);}finally{_iterator418.f();}return function(e,t,i,n,o){var r=parseInt(t.getAttribute("headingRows")||0);if(r>0){jp("headingRows",r-i,e,o,0);}var s=parseInt(t.getAttribute("headingColumns")||0);if(s>0){jp("headingColumns",s-n,e,o,0);}}(a,e,n,o,i),a;}function wb(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var n=[],o=new qp(e,{startRow:i,endRow:t-1});var _iterator419=_createForOfIteratorHelper(o),_step419;try{for(_iterator419.s();!(_step419=_iterator419.n()).done;){var _e345=_step419.value;var _i308=_e345.row,_o112=_e345.cellHeight,_r70=_i308+_o112-1;_i308<t&&t<=_r70&&n.push(_e345);}}catch(err){_iterator419.e(err);}finally{_iterator419.f();}return n;}function kb(e,t,i){var n=e.parent,o=n.parent,r=n.index,s=t-r,a={},c=parseInt(e.getAttribute("rowspan"))-s;c>1&&(a.rowspan=c);var l=parseInt(e.getAttribute("colspan")||1);l>1&&(a.colspan=l);var d=r+s,h=_toConsumableArray(new qp(o,{startRow:r,endRow:d,includeAllSlots:!0}));var u,g=null;var _iterator420=_createForOfIteratorHelper(h),_step420;try{for(_iterator420.s();!(_step420=_iterator420.n()).done;){var _t303=_step420.value;var _n185=_t303.row,_o113=_t303.column,_r71=_t303.cell;_r71===e&&void 0===u&&(u=_o113),void 0!==u&&u===_o113&&_n185===d&&(g=Bp(i,_t303.getPositionBefore(),a));}}catch(err){_iterator420.e(err);}finally{_iterator420.f();}return jp("rowspan",s,e,i),g;}function _b(e,t){var i=[],n=new qp(e);var _iterator421=_createForOfIteratorHelper(n),_step421;try{for(_iterator421.s();!(_step421=_iterator421.n()).done;){var _e346=_step421.value;var _n186=_e346.column,_o114=_e346.cellWidth,_r72=_n186+_o114-1;_n186<t&&t<=_r72&&i.push(_e346);}}catch(err){_iterator421.e(err);}finally{_iterator421.f();}return i;}function vb(e,t,i,n){var o=i-t,r={},s=parseInt(e.getAttribute("colspan"))-o;s>1&&(r.colspan=s);var a=parseInt(e.getAttribute("rowspan")||1);a>1&&(r.rowspan=a);var c=Bp(n,n.createPositionAfter(e),r);return jp("colspan",o,e,n),c;}function yb(e,t,i,n,o,r){var s=parseInt(e.getAttribute("colspan")||1),a=parseInt(e.getAttribute("rowspan")||1);if(i+s-1>o){jp("colspan",o-i+1,e,r,1);}if(t+a-1>n){jp("rowspan",n-t+1,e,r,1);}}function xb(e,t){var i=t.getColumns(e),n=new Array(i).fill(0);var _iterator422=_createForOfIteratorHelper(new qp(e)),_step422;try{for(_iterator422.s();!(_step422=_iterator422.n()).done;){var _t304=_step422.value.column;n[_t304]++;}}catch(err){_iterator422.e(err);}finally{_iterator422.f();}var o=n.reduce(function(e,t,i){return t?e:[].concat(_toConsumableArray(e),[i]);},[]);if(o.length>0){var _i309=o[o.length-1];return t.removeColumns(e,{at:_i309}),!0;}return!1;}function Ab(e,t){var i=[],n=t.getRows(e);for(var _t305=0;_t305<n;_t305++){e.getChild(_t305).isEmpty&&i.push(_t305);}if(i.length>0){var _n187=i[i.length-1];return t.removeRows(e,{at:_n187}),!0;}return!1;}function Cb(e,t){xb(e,t)||Ab(e,t);}function Tb(e,t){var i=Array.from(new qp(e,{startColumn:t.firstColumn,endColumn:t.lastColumn,row:t.lastRow}));if(i.every(function(_ref79){var e=_ref79.cellHeight;return 1===e;}))return t.lastRow;var n=i[0].cellHeight-1;return t.lastRow+n;}function Eb(e,t){var i=Array.from(new qp(e,{startRow:t.firstRow,endRow:t.lastRow,column:t.lastColumn}));if(i.every(function(_ref80){var e=_ref80.cellWidth;return 1===e;}))return t.lastColumn;var n=i[0].cellWidth-1;return t.lastColumn+n;}var Ib=/*#__PURE__*/function(_Ze29){_inherits(Ib,_Ze29);var _super178=_createSuper(Ib);function Ib(e,t){var _this276;_classCallCheck(this,Ib);_this276=_super178.call(this,e),_this276.direction=t.direction,_this276.isHorizontal="right"==_this276.direction||"left"==_this276.direction;return _this276;}_createClass(Ib,[{key:"refresh",value:function refresh(){var e=this._getMergeableCell();this.value=e,this.isEnabled=!!e;}},{key:"execute",value:function execute(){var _this277=this;var e=this.editor.model,t=rb(e.document.selection)[0],i=this.value,n=this.direction;e.change(function(e){var o="right"==n||"down"==n,r=o?t:i,s=o?i:t,a=s.parent;!function(e,t,i){Sb(e)||(Sb(t)&&i.remove(i.createRangeIn(t)),i.move(i.createRangeIn(e),i.createPositionAt(t,"end")));i.remove(e);}(s,r,e);var c=_this277.isHorizontal?"colspan":"rowspan",l=parseInt(t.getAttribute(c)||1),d=parseInt(i.getAttribute(c)||1);e.setAttribute(c,l+d,r),e.setSelection(e.createRangeIn(r));var h=_this277.editor.plugins.get("TableUtils");Cb(a.findAncestor("table"),h);});}},{key:"_getMergeableCell",value:function _getMergeableCell(){var e=rb(this.editor.model.document.selection)[0];if(!e)return;var t=this.editor.plugins.get("TableUtils"),i=this.isHorizontal?function(e,t,i){var n=e.parent.parent,o="right"==t?e.nextSibling:e.previousSibling,r=(n.getAttribute("headingColumns")||0)>0;if(!o)return;var s="right"==t?e:o,a="right"==t?o:e,_i$getCellLocation=i.getCellLocation(s),c=_i$getCellLocation.column,_i$getCellLocation2=i.getCellLocation(a),l=_i$getCellLocation2.column,d=parseInt(s.getAttribute("colspan")||1),h=Fp(i,s),u=Fp(i,a);if(r&&h!=u)return;return c+d===l?o:void 0;}(e,this.direction,t):function(e,t,i){var n=e.parent,o=n.parent,r=o.getChildIndex(n);if("down"==t&&r===i.getRows(o)-1||"up"==t&&0===r)return;var s=parseInt(e.getAttribute("rowspan")||1),a=o.getAttribute("headingRows")||0,c="down"==t&&r+s===a,l="up"==t&&r===a;if(a&&(c||l))return;var d=parseInt(e.getAttribute("rowspan")||1),h="down"==t?r+d:r,u=_toConsumableArray(new qp(o,{endRow:h})),g=u.find(function(t){return t.cell===e;}).column,m=u.find(function(_ref81){var e=_ref81.row,i=_ref81.cellHeight,n=_ref81.column;return n===g&&("down"==t?e===h:h===e+i);});return m&&m.cell;}(e,this.direction,t);if(!i)return;var n=this.isHorizontal?"rowspan":"colspan",o=parseInt(e.getAttribute(n)||1);return parseInt(i.getAttribute(n)||1)===o?i:void 0;}}]);return Ib;}(Ze);function Sb(e){return 1==e.childCount&&e.getChild(0).is("element","paragraph")&&e.getChild(0).isEmpty;}var Pb=/*#__PURE__*/function(_Ze30){_inherits(Pb,_Ze30);var _super179=_createSuper(Pb);function Pb(){_classCallCheck(this,Pb);return _super179.apply(this,arguments);}_createClass(Pb,[{key:"refresh",value:function refresh(){var e=sb(this.editor.model.document.selection),t=e[0];if(t){var _i310=t.findAncestor("table"),_n188=this.editor.plugins.get("TableUtils").getRows(_i310)-1,_o115=ab(e),_r73=0===_o115.first&&_o115.last===_n188;this.isEnabled=!_r73;}else this.isEnabled=!1;}},{key:"execute",value:function execute(){var e=this.editor.model,t=this.editor.plugins.get("TableUtils"),i=sb(e.document.selection),n=ab(i),o=i[0],r=o.findAncestor("table"),s=t.getCellLocation(o).column;e.change(function(e){var i=n.last-n.first+1;t.removeRows(r,{at:n.first,rows:i});var o=function(e,t,i,n){var o=e.getChild(Math.min(t,n-1));var r=o.getChild(0),s=0;var _iterator423=_createForOfIteratorHelper(o.getChildren()),_step423;try{for(_iterator423.s();!(_step423=_iterator423.n()).done;){var _e347=_step423.value;if(s>i)return r;r=_e347,s+=parseInt(_e347.getAttribute("colspan")||1);}}catch(err){_iterator423.e(err);}finally{_iterator423.f();}return r;}(r,n.first,s,t.getRows(r));e.setSelection(e.createPositionAt(o,0));});}}]);return Pb;}(Ze);var Mb=/*#__PURE__*/function(_Ze31){_inherits(Mb,_Ze31);var _super180=_createSuper(Mb);function Mb(){_classCallCheck(this,Mb);return _super180.apply(this,arguments);}_createClass(Mb,[{key:"refresh",value:function refresh(){var e=sb(this.editor.model.document.selection),t=e[0];if(t){var _i311=t.findAncestor("table"),_n189=this.editor.plugins.get("TableUtils").getColumns(_i311),_cb=cb(e),_o116=_cb.first,_r74=_cb.last;this.isEnabled=_r74-_o116<_n189-1;}else this.isEnabled=!1;}},{key:"execute",value:function execute(){var _this278=this;var _ref82=function(e){var t=sb(e),i=t[0],n=t.pop(),o=[i,n];return i.isBefore(n)?o:o.reverse();}(this.editor.model.document.selection),_ref83=_slicedToArray(_ref82,2),e=_ref83[0],t=_ref83[1],i=e.parent.parent,n=_toConsumableArray(new qp(i)),o={first:n.find(function(t){return t.cell===e;}).column,last:n.find(function(e){return e.cell===t;}).column},r=function(e,t,i,n){return parseInt(i.getAttribute("colspan")||1)>1?i:t.previousSibling||i.nextSibling?i.nextSibling||t.previousSibling:n.first?e.reverse().find(function(_ref84){var e=_ref84.column;return e<n.first;}).cell:e.reverse().find(function(_ref85){var e=_ref85.column;return e>n.last;}).cell;}(n,e,t,o);this.editor.model.change(function(e){var t=o.last-o.first+1;_this278.editor.plugins.get("TableUtils").removeColumns(i,{at:o.first,columns:t}),e.setSelection(e.createPositionAt(r,0));});}}]);return Mb;}(Ze);var Nb=/*#__PURE__*/function(_Ze32){_inherits(Nb,_Ze32);var _super181=_createSuper(Nb);function Nb(){_classCallCheck(this,Nb);return _super181.apply(this,arguments);}_createClass(Nb,[{key:"refresh",value:function refresh(){var _this279=this;var e=sb(this.editor.model.document.selection),t=e.length>0;this.isEnabled=t,this.value=t&&e.every(function(e){return _this279._isInHeading(e,e.parent.parent);});}},{key:"execute",value:function execute(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(e.forceValue===this.value)return;var t=this.editor.model,i=sb(t.document.selection),n=i[0].findAncestor("table"),_ab=ab(i),o=_ab.first,r=_ab.last,s=this.value?o:r+1,a=n.getAttribute("headingRows")||0;t.change(function(e){if(s){var _t306=wb(n,s,s>a?a:0);var _iterator424=_createForOfIteratorHelper(_t306),_step424;try{for(_iterator424.s();!(_step424=_iterator424.n()).done;){var _i312=_step424.value.cell;kb(_i312,s,e);}}catch(err){_iterator424.e(err);}finally{_iterator424.f();}}jp("headingRows",s,n,e,0);});}},{key:"_isInHeading",value:function _isInHeading(e,t){var i=parseInt(t.getAttribute("headingRows")||0);return!!i&&e.parent.index<i;}}]);return Nb;}(Ze);var Rb=/*#__PURE__*/function(_Ze33){_inherits(Rb,_Ze33);var _super182=_createSuper(Rb);function Rb(){_classCallCheck(this,Rb);return _super182.apply(this,arguments);}_createClass(Rb,[{key:"refresh",value:function refresh(){var e=sb(this.editor.model.document.selection),t=this.editor.plugins.get("TableUtils"),i=e.length>0;this.isEnabled=i,this.value=i&&e.every(function(e){return Fp(t,e);});}},{key:"execute",value:function execute(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(e.forceValue===this.value)return;var t=this.editor.model,i=sb(t.document.selection),n=i[0].findAncestor("table"),_cb2=cb(i),o=_cb2.first,r=_cb2.last,s=this.value?o:r+1;t.change(function(e){if(s){var _t307=_b(n,s);var _iterator425=_createForOfIteratorHelper(_t307),_step425;try{for(_iterator425.s();!(_step425=_iterator425.n()).done;){var _step425$value=_step425.value,_i313=_step425$value.cell,_n190=_step425$value.column;vb(_i313,_n190,s,e);}}catch(err){_iterator425.e(err);}finally{_iterator425.f();}}jp("headingColumns",s,n,e,0);});}}]);return Rb;}(Ze);var Ob=/*#__PURE__*/function(_Qe61){_inherits(Ob,_Qe61);var _super183=_createSuper(Ob);function Ob(){_classCallCheck(this,Ob);return _super183.apply(this,arguments);}_createClass(Ob,[{key:"init",value:function init(){this.decorate("insertColumns"),this.decorate("insertRows");}},{key:"getCellLocation",value:function getCellLocation(e){var t=e.parent,i=t.parent,n=i.getChildIndex(t),o=new qp(i,{row:n});var _iterator426=_createForOfIteratorHelper(o),_step426;try{for(_iterator426.s();!(_step426=_iterator426.n()).done;){var _step426$value=_step426.value,_t308=_step426$value.cell,_i314=_step426$value.row,_n191=_step426$value.column;if(_t308===e)return{row:_i314,column:_n191};}}catch(err){_iterator426.e(err);}finally{_iterator426.f();}}},{key:"createTable",value:function createTable(e,t){var i=e.createElement("table"),n=parseInt(t.rows)||2,o=parseInt(t.columns)||2;return zb(e,i,0,n,o),t.headingRows&&jp("headingRows",Math.min(t.headingRows,n),i,e,0),t.headingColumns&&jp("headingColumns",Math.min(t.headingColumns,o),i,e,0),i;}},{key:"insertRows",value:function insertRows(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=this.editor.model,n=t.at||0,o=t.rows||1,r=void 0!==t.copyStructureFromAbove,s=t.copyStructureFromAbove?n-1:n,a=this.getRows(e),l=this.getColumns(e);if(n>a)throw new c.a("tableutils-insertrows-insert-out-of-range",this,{options:t});i.change(function(t){var i=e.getAttribute("headingRows")||0;if(i>n&&jp("headingRows",i+o,e,t,0),!r&&(0===n||n===a))return void zb(t,e,n,o,l);var c=r?Math.max(n,s):n,d=new qp(e,{endRow:c}),h=new Array(l).fill(1);var _iterator427=_createForOfIteratorHelper(d),_step427;try{for(_iterator427.s();!(_step427=_iterator427.n()).done;){var _step427$value=_step427.value,_e349=_step427$value.row,_i317=_step427$value.column,_a26=_step427$value.cellHeight,_c17=_step427$value.cellWidth,_l8=_step427$value.cell;var _d5=_e349+_a26-1,_u4=_e349<=s&&s<=_d5;_e349<n&&n<=_d5?(t.setAttribute("rowspan",_a26+o,_l8),h[_i317]=-_c17):r&&_u4&&(h[_i317]=_c17);}}catch(err){_iterator427.e(err);}finally{_iterator427.f();}for(var _i315=0;_i315<o;_i315++){var _i316=t.createElement("tableRow");t.insert(_i316,e,n);for(var _e348=0;_e348<h.length;_e348++){var _n192=h[_e348],_o117=t.createPositionAt(_i316,"end");_n192>0&&Bp(t,_o117,_n192>1?{colspan:_n192}:null),_e348+=Math.abs(_n192)-1;}}});}},{key:"insertColumns",value:function insertColumns(e){var _this280=this;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=this.editor.model,n=t.at||0,o=t.columns||1;i.change(function(t){var i=e.getAttribute("headingColumns");n<i&&t.setAttribute("headingColumns",i+o,e);var r=_this280.getColumns(e);if(0===n||r===n){var _iterator428=_createForOfIteratorHelper(e.getChildren()),_step428;try{for(_iterator428.s();!(_step428=_iterator428.n()).done;){var _i318=_step428.value;_i318.is("element","tableRow")&&Db(o,t,t.createPositionAt(_i318,n?"end":0));}}catch(err){_iterator428.e(err);}finally{_iterator428.f();}return;}var s=new qp(e,{column:n,includeAllSlots:!0});var _iterator429=_createForOfIteratorHelper(s),_step429;try{for(_iterator429.s();!(_step429=_iterator429.n()).done;){var _e350=_step429.value;var _i319=_e350.row,_r75=_e350.cell,_a27=_e350.cellAnchorColumn,_c18=_e350.cellAnchorRow,_l9=_e350.cellWidth,_d6=_e350.cellHeight;if(_a27<n){t.setAttribute("colspan",_l9+o,_r75);var _e351=_c18+_d6-1;for(var _t309=_i319;_t309<=_e351;_t309++){s.skipRow(_t309);}}else Db(o,t,_e350.getPositionBefore());}}catch(err){_iterator429.e(err);}finally{_iterator429.f();}});}},{key:"removeRows",value:function removeRows(e,t){var _this281=this;var i=this.editor.model,n=t.rows||1,o=this.getRows(e),r=t.at,s=r+n-1;if(s>o-1)throw new c.a("tableutils-removerows-row-index-out-of-range",this,{table:e,options:t});i.change(function(t){var _ref86=function(e,t,i){var n=new Map(),o=[];var _iterator430=_createForOfIteratorHelper(new qp(e,{endRow:i})),_step430;try{for(_iterator430.s();!(_step430=_iterator430.n()).done;){var _step430$value=_step430.value,_r76=_step430$value.row,_s40=_step430$value.column,_a28=_step430$value.cellHeight,_c19=_step430$value.cell;var _e352=_r76+_a28-1;if(_r76>=t&&_r76<=i&&_e352>i){var _e353=_a28-(i-_r76+1);n.set(_s40,{cell:_c19,rowspan:_e353});}if(_r76<t&&_e352>=t){var _n193=void 0;_n193=_e352>=i?i-t+1:_e352-t+1,o.push({cell:_c19,rowspan:_a28-_n193});}}}catch(err){_iterator430.e(err);}finally{_iterator430.f();}return{cellsToMove:n,cellsToTrim:o};}(e,r,s),i=_ref86.cellsToMove,n=_ref86.cellsToTrim;if(i.size){!function(e,t,i,n){var o=_toConsumableArray(new qp(e,{includeAllSlots:!0,row:t})),r=e.getChild(t);var s;var _iterator431=_createForOfIteratorHelper(o),_step431;try{for(_iterator431.s();!(_step431=_iterator431.n()).done;){var _step431$value=_step431.value,_e354=_step431$value.column,_t310=_step431$value.cell,_a29=_step431$value.isAnchor;if(i.has(_e354)){var _i$get=i.get(_e354),_t311=_i$get.cell,_o118=_i$get.rowspan,_a30=s?n.createPositionAfter(s):n.createPositionAt(r,0);n.move(n.createRangeOn(_t311),_a30),jp("rowspan",_o118,_t311,n),s=_t311;}else _a29&&(s=_t310);}}catch(err){_iterator431.e(err);}finally{_iterator431.f();}}(e,s+1,i,t);}for(var _i320=s;_i320>=r;_i320--){t.remove(e.getChild(_i320));}var _iterator432=_createForOfIteratorHelper(n),_step432;try{for(_iterator432.s();!(_step432=_iterator432.n()).done;){var _step432$value=_step432.value,_e355=_step432$value.rowspan,_i321=_step432$value.cell;jp("rowspan",_e355,_i321,t);}}catch(err){_iterator432.e(err);}finally{_iterator432.f();}!function(e,t,i,n){var o=e.getAttribute("headingRows")||0;if(t<o){jp("headingRows",i<o?o-(i-t+1):t,e,n,0);}}(e,r,s,t),xb(e,_this281)||Ab(e,_this281);});}},{key:"removeColumns",value:function removeColumns(e,t){var _this282=this;var i=this.editor.model,n=t.at,o=t.columns||1,r=t.at+o-1;i.change(function(t){!function(e,t,i){var n=e.getAttribute("headingColumns")||0;if(n&&t.first<n){var _o119=Math.min(n-1,t.last)-t.first+1;i.setAttribute("headingColumns",n-_o119,e);}}(e,{first:n,last:r},t);for(var _i322=r;_i322>=n;_i322--){for(var _i323=0,_arr3=_toConsumableArray(new qp(e));_i323<_arr3.length;_i323++){var _arr3$_i=_arr3[_i323],_n194=_arr3$_i.cell,_o120=_arr3$_i.column,_r77=_arr3$_i.cellWidth;_o120<=_i322&&_r77>1&&_o120+_r77>_i322?jp("colspan",_r77-1,_n194,t):_o120===_i322&&t.remove(_n194);}}Ab(e,_this282)||xb(e,_this282);});}},{key:"splitCellVertically",value:function splitCellVertically(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:2;var i=this.editor.model,n=e.parent.parent,o=parseInt(e.getAttribute("rowspan")||1),r=parseInt(e.getAttribute("colspan")||1);i.change(function(i){if(r>1){var _Lb=Lb(r,t),_n195=_Lb.newCellsSpan,_s41=_Lb.updatedSpan;jp("colspan",_s41,e,i);var _a31={};_n195>1&&(_a31.colspan=_n195),o>1&&(_a31.rowspan=o);Db(r>t?t-1:r-1,i,i.createPositionAfter(e),_a31);}if(r<t){var _s42=t-r,_a32=_toConsumableArray(new qp(n)),_a32$find=_a32.find(function(_ref87){var t=_ref87.cell;return t===e;}),_c20=_a32$find.column,_l10=_a32.filter(function(_ref88){var t=_ref88.cell,i=_ref88.cellWidth,n=_ref88.column;return t!==e&&n===_c20||n<_c20&&n+i>_c20;});var _iterator433=_createForOfIteratorHelper(_l10),_step433;try{for(_iterator433.s();!(_step433=_iterator433.n()).done;){var _step433$value=_step433.value,_e356=_step433$value.cell,_t312=_step433$value.cellWidth;i.setAttribute("colspan",_t312+_s42,_e356);}}catch(err){_iterator433.e(err);}finally{_iterator433.f();}var _d7={};o>1&&(_d7.rowspan=o),Db(_s42,i,i.createPositionAfter(e),_d7);var _h5=n.getAttribute("headingColumns")||0;_h5>_c20&&jp("headingColumns",_h5+_s42,n,i);}});}},{key:"splitCellHorizontally",value:function splitCellHorizontally(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:2;var i=this.editor.model,n=e.parent,o=n.parent,r=o.getChildIndex(n),s=parseInt(e.getAttribute("rowspan")||1),a=parseInt(e.getAttribute("colspan")||1);i.change(function(i){if(s>1){var _n196=_toConsumableArray(new qp(o,{startRow:r,endRow:r+s-1,includeAllSlots:!0})),_Lb2=Lb(s,t),_c21=_Lb2.newCellsSpan,_l11=_Lb2.updatedSpan;jp("rowspan",_l11,e,i);var _n196$find=_n196.find(function(_ref89){var t=_ref89.cell;return t===e;}),_d8=_n196$find.column,_h6={};_c21>1&&(_h6.rowspan=_c21),a>1&&(_h6.colspan=a);for(var _i324=0,_n197=_n196;_i324<_n197.length;_i324++){var _e357=_n197[_i324];var _t313=_e357.column,_n198=_e357.row,_o121=_t313===_d8,_s43=(_n198+r+_l11)%_c21==0;_n198>=r+_l11&&_o121&&_s43&&Db(1,i,_e357.getPositionBefore(),_h6);}}if(s<t){var _n199=t-s,_c22=_toConsumableArray(new qp(o,{startRow:0,endRow:r}));var _iterator434=_createForOfIteratorHelper(_c22),_step434;try{for(_iterator434.s();!(_step434=_iterator434.n()).done;){var _step434$value=_step434.value,_t314=_step434$value.cell,_o122=_step434$value.cellHeight,_s44=_step434$value.row;if(_t314!==e&&_s44+_o122>r){var _e358=_o122+_n199;i.setAttribute("rowspan",_e358,_t314);}}}catch(err){_iterator434.e(err);}finally{_iterator434.f();}var _l12={};a>1&&(_l12.colspan=a),zb(i,o,r+1,_n199,1,_l12);var _d9=o.getAttribute("headingRows")||0;_d9>r&&jp("headingRows",_d9+_n199,o,i);}});}},{key:"getColumns",value:function getColumns(e){return _toConsumableArray(e.getChild(0).getChildren()).reduce(function(e,t){return e+parseInt(t.getAttribute("colspan")||1);},0);}},{key:"getRows",value:function getRows(e){return Array.from(e.getChildren()).reduce(function(e,t){return t.is("element","tableRow")?e+1:e;},0);}}],[{key:"pluginName",get:function get(){return"TableUtils";}}]);return Ob;}(Qe);function zb(e,t,i,n,o){var r=arguments.length>5&&arguments[5]!==undefined?arguments[5]:{};for(var _s45=0;_s45<n;_s45++){var _n200=e.createElement("tableRow");e.insert(_n200,t,i),Db(o,e,e.createPositionAt(_n200,"end"),r);}}function Db(e,t,i){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};for(var _o123=0;_o123<e;_o123++){Bp(t,i,n);}}function Lb(e,t){if(e<t)return{newCellsSpan:1,updatedSpan:1};var i=Math.floor(e/t);return{newCellsSpan:i,updatedSpan:e-i*t+i};}var Vb=/*#__PURE__*/function(_Ze34){_inherits(Vb,_Ze34);var _super184=_createSuper(Vb);function Vb(){_classCallCheck(this,Vb);return _super184.apply(this,arguments);}_createClass(Vb,[{key:"refresh",value:function refresh(){var e=ob(this.editor.model.document.selection);this.isEnabled=lb(e,this.editor.plugins.get(Ob));}},{key:"execute",value:function execute(){var e=this.editor.model,t=this.editor.plugins.get(Ob);e.change(function(i){var n=ob(e.document.selection),o=n.shift(),_ref90=function(e,t,i){var n=0,o=0;var _iterator435=_createForOfIteratorHelper(t),_step435;try{for(_iterator435.s();!(_step435=_iterator435.n()).done;){var _e359=_step435.value;var _i$getCellLocation4=i.getCellLocation(_e359),_t315=_i$getCellLocation4.row,_r78=_i$getCellLocation4.column;n=Fb(_e359,_r78,n,"colspan"),o=Fb(_e359,_t315,o,"rowspan");}}catch(err){_iterator435.e(err);}finally{_iterator435.f();}var _i$getCellLocation3=i.getCellLocation(e),r=_i$getCellLocation3.row,s=_i$getCellLocation3.column;return{mergeWidth:n-s,mergeHeight:o-r};}(o,n,t),r=_ref90.mergeWidth,s=_ref90.mergeHeight;jp("colspan",r,o,i),jp("rowspan",s,o,i);var _iterator436=_createForOfIteratorHelper(n),_step436;try{for(_iterator436.s();!(_step436=_iterator436.n()).done;){var _e360=_step436.value;jb(_e360,o,i);}}catch(err){_iterator436.e(err);}finally{_iterator436.f();}Cb(o.findAncestor("table"),t),i.setSelection(o,"in");});}}]);return Vb;}(Ze);function jb(e,t,i){Bb(e)||(Bb(t)&&i.remove(i.createRangeIn(t)),i.move(i.createRangeIn(e),i.createPositionAt(t,"end"))),i.remove(e);}function Bb(e){return 1==e.childCount&&e.getChild(0).is("element","paragraph")&&e.getChild(0).isEmpty;}function Fb(e,t,i,n){var o=parseInt(e.getAttribute(n)||1);return Math.max(i,t+o);}var Hb=/*#__PURE__*/function(_Ze35){_inherits(Hb,_Ze35);var _super185=_createSuper(Hb);function Hb(){_classCallCheck(this,Hb);return _super185.apply(this,arguments);}_createClass(Hb,[{key:"refresh",value:function refresh(){var e=sb(this.editor.model.document.selection);this.isEnabled=e.length>0;}},{key:"execute",value:function execute(){var e=this.editor.model,t=sb(e.document.selection),i=ab(t),n=t[0].findAncestor("table"),o=[];for(var _t316=i.first;_t316<=i.last;_t316++){var _iterator437=_createForOfIteratorHelper(n.getChild(_t316).getChildren()),_step437;try{for(_iterator437.s();!(_step437=_iterator437.n()).done;){var _i325=_step437.value;o.push(e.createRangeOn(_i325));}}catch(err){_iterator437.e(err);}finally{_iterator437.f();}}e.change(function(e){e.setSelection(o);});}}]);return Hb;}(Ze);var Ub=/*#__PURE__*/function(_Ze36){_inherits(Ub,_Ze36);var _super186=_createSuper(Ub);function Ub(){_classCallCheck(this,Ub);return _super186.apply(this,arguments);}_createClass(Ub,[{key:"refresh",value:function refresh(){var e=sb(this.editor.model.document.selection);this.isEnabled=e.length>0;}},{key:"execute",value:function execute(){var e=this.editor.model,t=sb(e.document.selection),i=t[0],n=t.pop(),o=i.findAncestor("table"),r=this.editor.plugins.get("TableUtils"),s=r.getCellLocation(i),a=r.getCellLocation(n),c=Math.min(s.column,a.column),l=Math.max(s.column,a.column),d=[];var _iterator438=_createForOfIteratorHelper(new qp(o,{startColumn:c,endColumn:l})),_step438;try{for(_iterator438.s();!(_step438=_iterator438.n()).done;){var _t317=_step438.value;d.push(e.createRangeOn(_t317.cell));}}catch(err){_iterator438.e(err);}finally{_iterator438.f();}e.change(function(e){e.setSelection(d);});}}]);return Ub;}(Ze);function Wb(e){e.document.registerPostFixer(function(t){return function(e,t){var i=t.document.differ.getChanges();var n=!1;var o=new Set();var _iterator439=_createForOfIteratorHelper(i),_step439;try{for(_iterator439.s();!(_step439=_iterator439.n()).done;){var _t318=_step439.value;var _i326=void 0;"table"==_t318.name&&"insert"==_t318.type&&(_i326=_t318.position.nodeAfter),"tableRow"!=_t318.name&&"tableCell"!=_t318.name||(_i326=_t318.position.findAncestor("table")),Yb(_t318)&&(_i326=_t318.range.start.findAncestor("table")),_i326&&!o.has(_i326)&&(n=qb(_i326,e)||n,n=$b(_i326,e)||n,o.add(_i326));}}catch(err){_iterator439.e(err);}finally{_iterator439.f();}return n;}(t,e);});}function qb(e,t){var i=!1;var n=function(e){var t=parseInt(e.getAttribute("headingRows")||0),i=Array.from(e.getChildren()).reduce(function(e,t){return t.is("element","tableRow")?e+1:e;},0),n=[];var _iterator440=_createForOfIteratorHelper(new qp(e)),_step440;try{for(_iterator440.s();!(_step440=_iterator440.n()).done;){var _step440$value=_step440.value,_o124=_step440$value.row,_r79=_step440$value.cell,_s46=_step440$value.cellHeight;if(_s46<2)continue;var _e361=_o124<t?t:i;if(_o124+_s46>_e361){var _t319=_e361-_o124;n.push({cell:_r79,rowspan:_t319});}}}catch(err){_iterator440.e(err);}finally{_iterator440.f();}return n;}(e);if(n.length){i=!0;var _iterator441=_createForOfIteratorHelper(n),_step441;try{for(_iterator441.s();!(_step441=_iterator441.n()).done;){var _e362=_step441.value;jp("rowspan",_e362.rowspan,_e362.cell,t,1);}}catch(err){_iterator441.e(err);}finally{_iterator441.f();}}return i;}function $b(e,t){var i=!1;var n=function(e){var t=new Array(e.childCount).fill(0);var _iterator442=_createForOfIteratorHelper(new qp(e,{includeAllSlots:!0})),_step442;try{for(_iterator442.s();!(_step442=_iterator442.n()).done;){var _i327=_step442.value.rowIndex;t[_i327]++;}}catch(err){_iterator442.e(err);}finally{_iterator442.f();}return t;}(e),o=[];var _iterator443=_createForOfIteratorHelper(n.entries()),_step443;try{for(_iterator443.s();!(_step443=_iterator443.n()).done;){var _step443$value=_slicedToArray(_step443.value,2),_t320=_step443$value[0],_i330=_step443$value[1];!_i330&&e.getChild(_t320).is("element","tableRow")&&o.push(_t320);}}catch(err){_iterator443.e(err);}finally{_iterator443.f();}if(o.length){i=!0;var _iterator444=_createForOfIteratorHelper(o.reverse()),_step444;try{for(_iterator444.s();!(_step444=_iterator444.n()).done;){var _i328=_step444.value;t.remove(e.getChild(_i328)),n.splice(_i328,1);}}catch(err){_iterator444.e(err);}finally{_iterator444.f();}}var r=n.filter(function(t,i){return e.getChild(i).is("element","tableRow");}),s=r[0];if(!r.every(function(e){return e===s;})){var _n201=r.reduce(function(e,t){return t>e?t:e;},0);var _iterator445=_createForOfIteratorHelper(r.entries()),_step445;try{for(_iterator445.s();!(_step445=_iterator445.n()).done;){var _step445$value=_slicedToArray(_step445.value,2),_o125=_step445$value[0],_s47=_step445$value[1];var _r80=_n201-_s47;if(_r80){for(var _i329=0;_i329<_r80;_i329++){Bp(t,t.createPositionAt(e.getChild(_o125),"end"));}i=!0;}}}catch(err){_iterator445.e(err);}finally{_iterator445.f();}}return i;}function Yb(e){var t="attribute"===e.type,i=e.attributeKey;return t&&("headingRows"===i||"colspan"===i||"rowspan"===i);}function Gb(e){e.document.registerPostFixer(function(t){return function(e,t){var i=t.document.differ.getChanges();var n=!1;var _iterator446=_createForOfIteratorHelper(i),_step446;try{for(_iterator446.s();!(_step446=_iterator446.n()).done;){var _t321=_step446.value;"insert"==_t321.type&&"table"==_t321.name&&(n=Kb(_t321.position.nodeAfter,e)||n),"insert"==_t321.type&&"tableRow"==_t321.name&&(n=Qb(_t321.position.nodeAfter,e)||n),"insert"==_t321.type&&"tableCell"==_t321.name&&(n=Jb(_t321.position.nodeAfter,e)||n),Zb(_t321)&&(n=Jb(_t321.position.parent,e)||n);}}catch(err){_iterator446.e(err);}finally{_iterator446.f();}return n;}(t,e);});}function Kb(e,t){var i=!1;var _iterator447=_createForOfIteratorHelper(e.getChildren()),_step447;try{for(_iterator447.s();!(_step447=_iterator447.n()).done;){var _n202=_step447.value;_n202.is("element","tableRow")&&(i=Qb(_n202,t)||i);}}catch(err){_iterator447.e(err);}finally{_iterator447.f();}return i;}function Qb(e,t){var i=!1;var _iterator448=_createForOfIteratorHelper(e.getChildren()),_step448;try{for(_iterator448.s();!(_step448=_iterator448.n()).done;){var _n203=_step448.value;i=Jb(_n203,t)||i;}}catch(err){_iterator448.e(err);}finally{_iterator448.f();}return i;}function Jb(e,t){if(0==e.childCount)return t.insertElement("paragraph",e),!0;var i=Array.from(e.getChildren()).filter(function(e){return e.is("$text");});var _iterator449=_createForOfIteratorHelper(i),_step449;try{for(_iterator449.s();!(_step449=_iterator449.n()).done;){var _e363=_step449.value;t.wrap(t.createRangeOn(_e363),"paragraph");}}catch(err){_iterator449.e(err);}finally{_iterator449.f();}return!!i.length;}function Zb(e){return!(!e.position||!e.position.parent.is("element","tableCell"))&&("insert"==e.type&&"$text"==e.name||"remove"==e.type);}function Xb(e,t){e.document.registerPostFixer(function(){return function(e,t){var i=new Set();var _iterator450=_createForOfIteratorHelper(e.getChanges()),_step450;try{for(_iterator450.s();!(_step450=_iterator450.n()).done;){var _t322=_step450.value;var _e364="attribute"==_t322.type?_t322.range.start.parent:_t322.position.parent;_e364.is("element","tableCell")&&i.add(_e364);}}catch(err){_iterator450.e(err);}finally{_iterator450.f();}var _iterator451=_createForOfIteratorHelper(i.values()),_step451;try{for(_iterator451.s();!(_step451=_iterator451.n()).done;){var _n204=_step451.value;var _iterator452=_createForOfIteratorHelper(_toConsumableArray(_n204.getChildren()).filter(function(e){return ew(e,t);})),_step452;try{for(_iterator452.s();!(_step452=_iterator452.n()).done;){var _i331=_step452.value;e.refreshItem(_i331);}}catch(err){_iterator452.e(err);}finally{_iterator452.f();}}}catch(err){_iterator451.e(err);}finally{_iterator451.f();}return!1;}(e.document.differ,t);});}function ew(e,t){if(!e.is("element","paragraph"))return!1;var i=t.toViewElement(e);return!!i&&Kp(e)!==i.is("element","span");}function tw(e){e.document.registerPostFixer(function(){return function(e){var t=e.document.differ,i=new Set();var _iterator453=_createForOfIteratorHelper(t.getChanges()),_step453;try{for(_iterator453.s();!(_step453=_iterator453.n()).done;){var _e366=_step453.value;if("attribute"!=_e366.type)continue;var _t323=_e366.range.start.nodeAfter;_t323&&_t323.is("element","table")&&"headingRows"==_e366.attributeKey&&i.add(_t323);}}catch(err){_iterator453.e(err);}finally{_iterator453.f();}if(i.size){var _iterator454=_createForOfIteratorHelper(i.values()),_step454;try{for(_iterator454.s();!(_step454=_iterator454.n()).done;){var _e365=_step454.value;t.refreshItem(_e365);}}catch(err){_iterator454.e(err);}finally{_iterator454.f();}return!0;}return!1;}(e);});}i(100);var iw=/*#__PURE__*/function(_Qe62){_inherits(iw,_Qe62);var _super187=_createSuper(iw);function iw(){_classCallCheck(this,iw);return _super187.apply(this,arguments);}_createClass(iw,[{key:"init",value:function init(){var e=this.editor,t=e.model,i=t.schema,n=e.conversion;i.register("table",{allowWhere:"$block",allowAttributes:["headingRows","headingColumns"],isObject:!0,isBlock:!0}),i.register("tableRow",{allowIn:"table",isLimit:!0}),i.register("tableCell",{allowIn:"tableRow",allowChildren:"$block",allowAttributes:["colspan","rowspan"],isLimit:!0,isSelectable:!0}),n["for"]("upcast").add(function(e){e.on("element:figure",function(e,t,i){if(!i.consumable.test(t.viewItem,{name:!0,classes:"table"}))return;var n=function(e){var _iterator455=_createForOfIteratorHelper(e.getChildren()),_step455;try{for(_iterator455.s();!(_step455=_iterator455.n()).done;){var _t324=_step455.value;if(_t324.is("element","table"))return _t324;}}catch(err){_iterator455.e(err);}finally{_iterator455.f();}}(t.viewItem);if(!n||!i.consumable.test(n,{name:!0}))return;var o=Ns(i.convertItem(n,t.modelCursor).modelRange.getItems());o&&(i.convertChildren(t.viewItem,i.writer.createPositionAt(o,"end")),i.updateConversionResult(o,t));});}),n["for"]("upcast").add(Hp()),n["for"]("editingDowncast").add(Yp({asWidget:!0})),n["for"]("dataDowncast").add(Yp()),n["for"]("upcast").elementToElement({model:"tableRow",view:"tr"}),n["for"]("upcast").add(function(e){e.on("element:tr",function(e,t){t.viewItem.isEmpty&&0==t.modelCursor.index&&e.stop();},{priority:"high"});}),n["for"]("editingDowncast").add(function(e){return e.on("insert:tableRow",function(e,t,i){var n=t.item;if(!i.consumable.consume(n,"insert"))return;var o=n.parent,r=function(e){var _iterator456=_createForOfIteratorHelper(e.getChildren()),_step456;try{for(_iterator456.s();!(_step456=_iterator456.n()).done;){var _t325=_step456.value;if("table"===_t325.name)return _t325;}}catch(err){_iterator456.e(err);}finally{_iterator456.f();}}(i.mapper.toViewElement(o)),s=o.getChildIndex(n),a=new qp(o,{row:s}),c={headingRows:o.getAttribute("headingRows")||0,headingColumns:o.getAttribute("headingColumns")||0},l=new Map();var _iterator457=_createForOfIteratorHelper(a),_step457;try{for(_iterator457.s();!(_step457=_iterator457.n()).done;){var _e367=_step457.value;var _t326=l.get(s)||Zp(r,n,s,c,i);l.set(s,_t326),i.consumable.consume(_e367.cell,"insert"),Jp(_e367,c,i.writer.createPositionAt(_t326,"end"),i,{asWidget:!0});}}catch(err){_iterator457.e(err);}finally{_iterator457.f();}});}),n["for"]("editingDowncast").add(function(e){return e.on("remove:tableRow",function(e,t,i){e.stop();var n=i.writer,o=i.mapper,r=o.toViewPosition(t.position).getLastMatchingPosition(function(e){return!e.item.is("element","tr");}).nodeAfter,s=r.parent.parent,a=n.createRangeOn(r),c=n.remove(a);var _iterator458=_createForOfIteratorHelper(n.createRangeIn(c).getItems()),_step458;try{for(_iterator458.s();!(_step458=_iterator458.n()).done;){var _e368=_step458.value;o.unbindViewElement(_e368);}}catch(err){_iterator458.e(err);}finally{_iterator458.f();}tb("thead",s,i),tb("tbody",s,i);},{priority:"higher"});}),n["for"]("upcast").elementToElement({model:"tableCell",view:"td"}),n["for"]("upcast").elementToElement({model:"tableCell",view:"th"}),n["for"]("upcast").add(Up("td")),n["for"]("upcast").add(Up("th")),n["for"]("editingDowncast").add(function(e){return e.on("insert:tableCell",function(e,t,i){var n=t.item;if(!i.consumable.consume(n,"insert"))return;var o=n.parent,r=o.parent,s=r.getChildIndex(o),a=new qp(r,{row:s}),c={headingRows:r.getAttribute("headingRows")||0,headingColumns:r.getAttribute("headingColumns")||0};var _iterator459=_createForOfIteratorHelper(a),_step459;try{for(_iterator459.s();!(_step459=_iterator459.n()).done;){var _e369=_step459.value;if(_e369.cell===n){var _t327=i.mapper.toViewElement(o);return void Jp(_e369,c,i.writer.createPositionAt(_t327,o.getChildIndex(n)),i,{asWidget:!0});}}}catch(err){_iterator459.e(err);}finally{_iterator459.f();}});}),n["for"]("editingDowncast").elementToElement({model:"paragraph",view:Gp,converterPriority:"high"}),n["for"]("downcast").attributeToAttribute({model:"colspan",view:"colspan"}),n["for"]("upcast").attributeToAttribute({model:{key:"colspan",value:nw("colspan")},view:"colspan"}),n["for"]("downcast").attributeToAttribute({model:"rowspan",view:"rowspan"}),n["for"]("upcast").attributeToAttribute({model:{key:"rowspan",value:nw("rowspan")},view:"rowspan"}),n["for"]("editingDowncast").add(function(e){return e.on("attribute:headingColumns:table",function(e,t,i){var n=t.item;if(!i.consumable.consume(t.item,e.name))return;var o={headingRows:n.getAttribute("headingRows")||0,headingColumns:n.getAttribute("headingColumns")||0},r=t.attributeOldValue,s=t.attributeNewValue,a=(r>s?r:s)-1;var _iterator460=_createForOfIteratorHelper(new qp(n,{endColumn:a})),_step460;try{for(_iterator460.s();!(_step460=_iterator460.n()).done;){var _e370=_step460.value;Qp(_e370,o,i);}}catch(err){_iterator460.e(err);}finally{_iterator460.f();}});}),e.data.mapper.on("modelToViewPosition",function(e,t){var i=t.modelPosition.parent,n=t.modelPosition.nodeBefore;if(!i.is("element","tableCell"))return;if(!n||!n.is("element","paragraph"))return;var o=t.mapper.toViewElement(n),r=t.mapper.toViewElement(i);o===r&&(t.viewPosition=t.mapper.findPositionIn(r,n.maxOffset));}),e.config.define("table.defaultHeadings.rows",0),e.config.define("table.defaultHeadings.columns",0),e.commands.add("insertTable",new nb(e)),e.commands.add("insertTableRowAbove",new mb(e,{order:"above"})),e.commands.add("insertTableRowBelow",new mb(e,{order:"below"})),e.commands.add("insertTableColumnLeft",new fb(e,{order:"left"})),e.commands.add("insertTableColumnRight",new fb(e,{order:"right"})),e.commands.add("removeTableRow",new Pb(e)),e.commands.add("removeTableColumn",new Mb(e)),e.commands.add("splitTableCellVertically",new pb(e,{direction:"vertically"})),e.commands.add("splitTableCellHorizontally",new pb(e,{direction:"horizontally"})),e.commands.add("mergeTableCells",new Vb(e)),e.commands.add("mergeTableCellRight",new Ib(e,{direction:"right"})),e.commands.add("mergeTableCellLeft",new Ib(e,{direction:"left"})),e.commands.add("mergeTableCellDown",new Ib(e,{direction:"down"})),e.commands.add("mergeTableCellUp",new Ib(e,{direction:"up"})),e.commands.add("setTableColumnHeader",new Rb(e)),e.commands.add("setTableRowHeader",new Nb(e)),e.commands.add("selectTableRow",new Hb(e)),e.commands.add("selectTableColumn",new Ub(e)),tw(t),Wb(t),Xb(t,e.editing.mapper),Gb(t);}}],[{key:"pluginName",get:function get(){return"TableEditing";}},{key:"requires",get:function get(){return[Ob];}}]);return iw;}(Qe);function nw(e){return function(t){var i=parseInt(t.getAttribute(e));return Number.isNaN(i)||i<=0?null:i;};}i(102);var ow=/*#__PURE__*/function(_Ml30){_inherits(ow,_Ml30);var _super188=_createSuper(ow);function ow(e){var _this283;_classCallCheck(this,ow);_this283=_super188.call(this,e);var t=_this283.bindTemplate;_this283.items=_this283._createGridCollection(),_this283.set("rows",0),_this283.set("columns",0),_this283.bind("label").to(_assertThisInitialized(_this283),"columns",_assertThisInitialized(_this283),"rows",function(e,t){return"".concat(t," \xD7 ").concat(e);}),_this283.setTemplate({tag:"div",attributes:{"class":["ck"]},children:[{tag:"div",attributes:{"class":["ck-insert-table-dropdown__grid"]},on:{"mouseover@.ck-insert-table-dropdown-grid-box":t.to("boxover")},children:_this283.items},{tag:"div",attributes:{"class":["ck-insert-table-dropdown__label"]},children:[{text:t.to("label")}]}],on:{mousedown:t.to(function(e){e.preventDefault();}),click:t.to(function(){_this283.fire("execute");})}}),_this283.on("boxover",function(e,t){var _t$target$dataset=t.target.dataset,i=_t$target$dataset.row,n=_t$target$dataset.column;_this283.set({rows:parseInt(i),columns:parseInt(n)});}),_this283.on("change:columns",function(){_this283._highlightGridBoxes();}),_this283.on("change:rows",function(){_this283._highlightGridBoxes();});return _this283;}_createClass(ow,[{key:"focus",value:function focus(){}},{key:"focusLast",value:function focusLast(){}},{key:"_highlightGridBoxes",value:function _highlightGridBoxes(){var e=this.rows,t=this.columns;this.items.map(function(i,n){var o=Math.floor(n/10)<e&&n%10<t;i.set("isOn",o);});}},{key:"_createGridCollection",value:function _createGridCollection(){var e=[];for(var _t328=0;_t328<100;_t328++){var _i332=Math.floor(_t328/10),_n205=_t328%10;e.push(new rw(this.locale,_i332+1,_n205+1));}return this.createCollection(e);}}]);return ow;}(Ml);var rw=/*#__PURE__*/function(_Ml31){_inherits(rw,_Ml31);var _super189=_createSuper(rw);function rw(e,t,i){var _this284;_classCallCheck(this,rw);_this284=_super189.call(this,e);var n=_this284.bindTemplate;_this284.set("isOn",!1),_this284.setTemplate({tag:"div",attributes:{"class":["ck-insert-table-dropdown-grid-box",n["if"]("isOn","ck-on")],"data-row":t,"data-column":i}});return _this284;}return _createClass(rw);}(Ml);var sw=/*#__PURE__*/function(_Qe63){_inherits(sw,_Qe63);var _super190=_createSuper(sw);function sw(){_classCallCheck(this,sw);return _super190.apply(this,arguments);}_createClass(sw,[{key:"init",value:function init(){var _this285=this;var e=this.editor,t=this.editor.t,i="ltr"===e.locale.contentLanguageDirection;e.ui.componentFactory.add("insertTable",function(i){var n=e.commands.get("insertTable"),o=xd(i);var r;return o.bind("isEnabled").to(n),o.buttonView.set({icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 6v3h4V6H3zm0 4v3h4v-3H3zm0 4v3h4v-3H3zm5 3h4v-3H8v3zm5 0h4v-3h-4v3zm4-4v-3h-4v3h4zm0-4V6h-4v3h4zm1.5 8a1.5 1.5 0 0 1-1.5 1.5H3A1.5 1.5 0 0 1 1.5 17V4c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13zM12 13v-3H8v3h4zm0-4V6H8v3h4z"/></svg>',label:t("Insert table"),tooltip:!0}),o.on("change:isOpen",function(){r||(r=new ow(i),o.panelView.children.add(r),r.delegate("execute").to(o),o.buttonView.on("open",function(){r.rows=0,r.columns=0;}),o.on("execute",function(){e.execute("insertTable",{rows:r.rows,columns:r.columns}),e.editing.view.focus();}));}),o;}),e.ui.componentFactory.add("tableColumn",function(e){var n=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:t("Header column"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:i?"insertTableColumnLeft":"insertTableColumnRight",label:t("Insert column left")}},{type:"button",model:{commandName:i?"insertTableColumnRight":"insertTableColumnLeft",label:t("Insert column right")}},{type:"button",model:{commandName:"removeTableColumn",label:t("Delete column")}},{type:"button",model:{commandName:"selectTableColumn",label:t("Select column")}}];return _this285._prepareDropdown(t("Column"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>',n,e);}),e.ui.componentFactory.add("tableRow",function(e){var i=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:t("Header row"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowAbove",label:t("Insert row above")}},{type:"button",model:{commandName:"insertTableRowBelow",label:t("Insert row below")}},{type:"button",model:{commandName:"removeTableRow",label:t("Delete row")}},{type:"button",model:{commandName:"selectTableRow",label:t("Select row")}}];return _this285._prepareDropdown(t("Row"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>',i,e);}),e.ui.componentFactory.add("mergeTableCells",function(e){var n=[{type:"button",model:{commandName:"mergeTableCellUp",label:t("Merge cell up")}},{type:"button",model:{commandName:i?"mergeTableCellRight":"mergeTableCellLeft",label:t("Merge cell right")}},{type:"button",model:{commandName:"mergeTableCellDown",label:t("Merge cell down")}},{type:"button",model:{commandName:i?"mergeTableCellLeft":"mergeTableCellRight",label:t("Merge cell left")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:t("Split cell vertically")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:t("Split cell horizontally")}}];return _this285._prepareMergeSplitButtonDropdown(t("Merge cells"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z"/></svg>',n,e);});}},{key:"_prepareDropdown",value:function _prepareDropdown(e,t,i,n){var o=this.editor,r=xd(n),s=this._fillDropdownWithListOptions(r,i);return r.buttonView.set({label:e,icon:t,tooltip:!0}),r.bind("isEnabled").toMany(s,"isEnabled",function(){for(var _len28=arguments.length,e=new Array(_len28),_key28=0;_key28<_len28;_key28++){e[_key28]=arguments[_key28];}return e.some(function(e){return e;});}),this.listenTo(r,"execute",function(e){o.execute(e.source.commandName),o.editing.view.focus();}),r;}},{key:"_prepareMergeSplitButtonDropdown",value:function _prepareMergeSplitButtonDropdown(e,t,i,n){var o=this.editor,r=xd(n,sd),s=o.commands.get("mergeTableCells"),a=this._fillDropdownWithListOptions(r,i);return r.buttonView.set({label:e,icon:t,tooltip:!0,isEnabled:!0}),r.bind("isEnabled").toMany([s].concat(_toConsumableArray(a)),"isEnabled",function(){for(var _len29=arguments.length,e=new Array(_len29),_key29=0;_key29<_len29;_key29++){e[_key29]=arguments[_key29];}return e.some(function(e){return e;});}),this.listenTo(r.buttonView,"execute",function(){o.execute("mergeTableCells"),o.editing.view.focus();}),this.listenTo(r,"execute",function(e){o.execute(e.source.commandName),o.editing.view.focus();}),r;}},{key:"_fillDropdownWithListOptions",value:function _fillDropdownWithListOptions(e,t){var i=this.editor,n=[],o=new Zi();var _iterator461=_createForOfIteratorHelper(t),_step461;try{for(_iterator461.s();!(_step461=_iterator461.n()).done;){var _e371=_step461.value;aw(_e371,i,n,o);}}catch(err){_iterator461.e(err);}finally{_iterator461.f();}return Cd(e,o,i.ui.componentFactory),n;}}],[{key:"pluginName",get:function get(){return"TableUI";}}]);return sw;}(Qe);function aw(e,t,i,n){var o=e.model=new zd(e.model),_e$model2=e.model,r=_e$model2.commandName,s=_e$model2.bindIsOn;if("button"===e.type||"switchbutton"===e.type){var _e372=t.commands.get(r);i.push(_e372),o.set({commandName:r}),o.bind("isEnabled").to(_e372),s&&o.bind("isOn").to(_e372,"value");}o.set({withText:!0}),n.add(e);}i(104);var cw=/*#__PURE__*/function(_Qe64){_inherits(cw,_Qe64);var _super191=_createSuper(cw);function cw(){_classCallCheck(this,cw);return _super191.apply(this,arguments);}_createClass(cw,[{key:"init",value:function init(){var _this286=this;var e=this.editor.model;this.listenTo(e,"deleteContent",function(e,t){return _this286._handleDeleteContent(e,t);},{priority:"high"}),this._defineSelectionConverter(),this._enablePluginDisabling();}},{key:"getSelectedTableCells",value:function getSelectedTableCells(){var e=ob(this.editor.model.document.selection);return 0==e.length?null:e;}},{key:"getSelectionAsFragment",value:function getSelectionAsFragment(){var _this287=this;var e=this.getSelectedTableCells();return e?this.editor.model.change(function(t){var i=t.createDocumentFragment(),n=_this287.editor.plugins.get("TableUtils"),_cb3=cb(e),o=_cb3.first,r=_cb3.last,_ab2=ab(e),s=_ab2.first,a=_ab2.last,c=e[0].findAncestor("table");var l=a,d=r;if(lb(e,n)){var _e373={firstColumn:o,lastColumn:r,firstRow:s,lastRow:a};l=Tb(c,_e373),d=Eb(c,_e373);}var h=bb(c,{startRow:s,startColumn:o,endRow:l,endColumn:d},t);return t.insert(h,i,0),i;}):null;}},{key:"setCellSelection",value:function setCellSelection(e,t){var i=this._getCellsToSelect(e,t);this.editor.model.change(function(e){e.setSelection(i.cells.map(function(t){return e.createRangeOn(t);}),{backward:i.backward});});}},{key:"getFocusCell",value:function getFocusCell(){var e=_toConsumableArray(this.editor.model.document.selection.getRanges()).pop().getContainedElement();return e&&e.is("element","tableCell")?e:null;}},{key:"getAnchorCell",value:function getAnchorCell(){var e=Ns(this.editor.model.document.selection.getRanges()).getContainedElement();return e&&e.is("element","tableCell")?e:null;}},{key:"_defineSelectionConverter",value:function _defineSelectionConverter(){var _this288=this;var e=this.editor,t=new Set();e.conversion["for"]("editingDowncast").add(function(e){return e.on("selection",function(e,i,n){var o=n.writer;!function(e){var _iterator462=_createForOfIteratorHelper(t),_step462;try{for(_iterator462.s();!(_step462=_iterator462.n()).done;){var _i333=_step462.value;e.removeClass("ck-editor__editable_selected",_i333);}}catch(err){_iterator462.e(err);}finally{_iterator462.f();}t.clear();}(o);var r=_this288.getSelectedTableCells();if(!r)return;var _iterator463=_createForOfIteratorHelper(r),_step463;try{for(_iterator463.s();!(_step463=_iterator463.n()).done;){var _e374=_step463.value;var _i334=n.mapper.toViewElement(_e374);o.addClass("ck-editor__editable_selected",_i334),t.add(_i334);}}catch(err){_iterator463.e(err);}finally{_iterator463.f();}var s=n.mapper.toViewElement(r[r.length-1]);o.setSelection(s,0);},{priority:"lowest"});});}},{key:"_enablePluginDisabling",value:function _enablePluginDisabling(){var _this289=this;var e=this.editor;this.on("change:isEnabled",function(){if(!_this289.isEnabled){var _t329=_this289.getSelectedTableCells();if(!_t329)return;e.model.change(function(i){var n=i.createPositionAt(_t329[0],0),o=e.model.schema.getNearestSelectionRange(n);i.setSelection(o);});}});}},{key:"_handleDeleteContent",value:function _handleDeleteContent(e,t){var _t330=_slicedToArray(t,2),i=_t330[0],n=_t330[1],o=this.editor.model,r=!n||"backward"==n.direction,s=ob(i);s.length&&(e.stop(),o.change(function(e){var t=s[r?s.length-1:0];o.change(function(e){var _iterator464=_createForOfIteratorHelper(s),_step464;try{for(_iterator464.s();!(_step464=_iterator464.n()).done;){var _t331=_step464.value;o.deleteContent(e.createSelection(_t331,"in"));}}catch(err){_iterator464.e(err);}finally{_iterator464.f();}});var n=o.schema.getNearestSelectionRange(e.createPositionAt(t,0));i.is("documentSelection")?e.setSelection(n):i.setTo(n);}));}},{key:"_getCellsToSelect",value:function _getCellsToSelect(e,t){var i=this.editor.plugins.get("TableUtils"),n=i.getCellLocation(e),o=i.getCellLocation(t),r=Math.min(n.row,o.row),s=Math.max(n.row,o.row),a=Math.min(n.column,o.column),c=Math.max(n.column,o.column),l=new Array(s-r+1).fill(null).map(function(){return[];}),d={startRow:r,endRow:s,startColumn:a,endColumn:c};var _iterator465=_createForOfIteratorHelper(new qp(e.findAncestor("table"),d)),_step465;try{for(_iterator465.s();!(_step465=_iterator465.n()).done;){var _step465$value=_step465.value,_t332=_step465$value.row,_i335=_step465$value.cell;l[_t332-r].push(_i335);}}catch(err){_iterator465.e(err);}finally{_iterator465.f();}var h=o.row<n.row,u=o.column<n.column;return h&&l.reverse(),u&&l.forEach(function(e){return e.reverse();}),{cells:l.flat(),backward:h||u};}}],[{key:"pluginName",get:function get(){return"TableSelection";}},{key:"requires",get:function get(){return[Ob];}}]);return cw;}(Qe);var lw=/*#__PURE__*/function(_Qe65){_inherits(lw,_Qe65);var _super192=_createSuper(lw);function lw(){_classCallCheck(this,lw);return _super192.apply(this,arguments);}_createClass(lw,[{key:"init",value:function init(){var _this290=this;var e=this.editor,t=e.editing.view.document;this.listenTo(t,"copy",function(e,t){return _this290._onCopyCut(e,t);}),this.listenTo(t,"cut",function(e,t){return _this290._onCopyCut(e,t);}),this.listenTo(e.model,"insertContent",function(e,t){return _this290._onInsertContent.apply(_this290,[e].concat(_toConsumableArray(t)));},{priority:"high"}),this.decorate("_replaceTableSlotCell");}},{key:"_onCopyCut",value:function _onCopyCut(e,t){var i=this.editor.plugins.get(cw);if(!i.getSelectedTableCells())return;if("cut"==e.name&&this.editor.isReadOnly)return;t.preventDefault(),e.stop();var n=this.editor.data,o=this.editor.editing.view.document,r=n.toView(i.getSelectionAsFragment());o.fire("clipboardOutput",{dataTransfer:t.dataTransfer,content:r,method:e.name});}},{key:"_onInsertContent",value:function _onInsertContent(e,t,i){var _this291=this;if(i&&!i.is("documentSelection"))return;var n=this.editor.model,o=this.editor.plugins.get(Ob);var r=function(e,t){if(!e.is("documentFragment")&&!e.is("element"))return null;if(e.is("element","table"))return e;if(1==e.childCount&&e.getChild(0).is("element","table"))return e.getChild(0);var i=t.createRangeIn(e);var _iterator466=_createForOfIteratorHelper(i.getItems()),_step466;try{for(_iterator466.s();!(_step466=_iterator466.n()).done;){var _e375=_step466.value;if(_e375.is("element","table")){var _n206=t.createRange(i.start,t.createPositionBefore(_e375));if(t.hasContent(_n206,{ignoreWhitespaces:!0}))return null;var _o126=t.createRange(t.createPositionAfter(_e375),i.end);return t.hasContent(_o126,{ignoreWhitespaces:!0})?null:_e375;}}}catch(err){_iterator466.e(err);}finally{_iterator466.f();}return null;}(t,n);if(!r)return;var s=sb(n.document.selection);s.length?(e.stop(),n.change(function(e){var t={width:o.getColumns(r),height:o.getRows(r)},i=function(e,t,i,n){var o=e[0].findAncestor("table"),r=cb(e),s=ab(e),a={firstColumn:r.first,lastColumn:r.last,firstRow:s.first,lastRow:s.last},c=1===e.length;c&&(a.lastRow+=t.height-1,a.lastColumn+=t.width-1,function(e,t,i,n){var o=n.getColumns(e),r=n.getRows(e);i>o&&n.insertColumns(e,{at:o,columns:i-o});t>r&&n.insertRows(e,{at:r,rows:t-r});}(o,a.lastRow+1,a.lastColumn+1,n));c||!lb(e,n)?function(e,t,i){var n=t.firstRow,o=t.lastRow,r=t.firstColumn,s=t.lastColumn,a={first:n,last:o},c={first:r,last:s};hw(e,r,a,i),hw(e,s+1,a,i),dw(e,n,c,i),dw(e,o+1,c,i,n);}(o,a,i):(a.lastRow=Tb(o,a),a.lastColumn=Eb(o,a));return a;}(s,t,e,o),n=i.lastRow-i.firstRow+1,a=i.lastColumn-i.firstColumn+1,c={startRow:0,startColumn:0,endRow:Math.min(n,t.height)-1,endColumn:Math.min(a,t.width)-1};r=bb(r,c,e);var l=s[0].findAncestor("table"),d=_this291._replaceSelectedCellsWithPasted(r,t,l,i,e);if(_this291.editor.plugins.get("TableSelection").isEnabled){var _t333=db(d.map(function(t){return e.createRangeOn(t);}));e.setSelection(_t333);}else e.setSelection(d[0],0);})):Cb(r,o);}},{key:"_replaceSelectedCellsWithPasted",value:function _replaceSelectedCellsWithPasted(e,t,i,n,o){var r=t.width,s=t.height,a=function(e,t,i){var n=new Array(i).fill(null).map(function(){return new Array(t).fill(null);});var _iterator467=_createForOfIteratorHelper(new qp(e)),_step467;try{for(_iterator467.s();!(_step467=_iterator467.n()).done;){var _step467$value=_step467.value,_t334=_step467$value.column,_i336=_step467$value.row,_o127=_step467$value.cell;n[_i336][_t334]=_o127;}}catch(err){_iterator467.e(err);}finally{_iterator467.f();}return n;}(e,r,s),c=_toConsumableArray(new qp(i,{startRow:n.firstRow,endRow:n.lastRow,startColumn:n.firstColumn,endColumn:n.lastColumn,includeAllSlots:!0})),l=[];var d;for(var _i337=0,_c23=c;_i337<_c23.length;_i337++){var _e376=_c23[_i337];var _t335=_e376.row,_i338=_e376.column;_i338===n.firstColumn&&(d=_e376.getPositionBefore());var _c24=_t335-n.firstRow,_h7=_i338-n.firstColumn,_u5=a[_c24%s][_h7%r],_g3=_u5?o.cloneElement(_u5):null,_m2=this._replaceTableSlotCell(_e376,_g3,d,o);_m2&&(yb(_m2,_t335,_i338,n.lastRow,n.lastColumn,o),l.push(_m2),d=o.createPositionAfter(_m2));}var h=parseInt(i.getAttribute("headingRows")||0),u=parseInt(i.getAttribute("headingColumns")||0),g=n.firstRow<h&&h<=n.lastRow,m=n.firstColumn<u&&u<=n.lastColumn;if(g){var _e377=dw(i,h,{first:n.firstColumn,last:n.lastColumn},o,n.firstRow);l.push.apply(l,_toConsumableArray(_e377));}if(m){var _e378=hw(i,u,{first:n.firstRow,last:n.lastRow},o);l.push.apply(l,_toConsumableArray(_e378));}return l;}},{key:"_replaceTableSlotCell",value:function _replaceTableSlotCell(e,t,i,n){var o=e.cell,r=e.isAnchor;return r&&n.remove(o),t?(n.insert(t,i),t):null;}}],[{key:"pluginName",get:function get(){return"TableClipboard";}},{key:"requires",get:function get(){return[cw,Ob];}}]);return lw;}(Qe);function dw(e,t,i,n){var o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;if(t<1)return;return wb(e,t,o).filter(function(_ref91){var e=_ref91.column,t=_ref91.cellWidth;return uw(e,t,i);}).map(function(_ref92){var e=_ref92.cell;return kb(e,t,n);});}function hw(e,t,i,n){if(t<1)return;return _b(e,t).filter(function(_ref93){var e=_ref93.row,t=_ref93.cellHeight;return uw(e,t,i);}).map(function(_ref94){var e=_ref94.cell,i=_ref94.column;return vb(e,i,t,n);});}function uw(e,t,i){var n=e+t-1,o=i.first,r=i.last;return e>=o&&e<=r||e<o&&n>=o;}var gw=/*#__PURE__*/function(_Qe66){_inherits(gw,_Qe66);var _super193=_createSuper(gw);function gw(){_classCallCheck(this,gw);return _super193.apply(this,arguments);}_createClass(gw,[{key:"init",value:function init(){var _this292=this;var e=this.editor.editing.view.document;this.editor.keystrokes.set("Tab",function(){return _this292._handleTabOnSelectedTable.apply(_this292,arguments);},{priority:"low"}),this.editor.keystrokes.set("Tab",this._getTabHandler(!0),{priority:"low"}),this.editor.keystrokes.set("Shift+Tab",this._getTabHandler(!1),{priority:"low"}),this.listenTo(e,"arrowKey",function(){return _this292._onArrowKey.apply(_this292,arguments);},{context:"table"});}},{key:"_handleTabOnSelectedTable",value:function _handleTabOnSelectedTable(e,t){var i=this.editor,n=i.model.document.selection.getSelectedElement();n&&n.is("element","table")&&(t(),i.model.change(function(e){e.setSelection(e.createRangeIn(n.getChild(0).getChild(0)));}));}},{key:"_getTabHandler",value:function _getTabHandler(e){var _this293=this;var t=this.editor;return function(i,n){var o=rb(t.model.document.selection)[0];if(o||(o=_this293.editor.plugins.get("TableSelection").getFocusCell()),!o)return;n();var r=o.parent,s=r.parent,a=s.getChildIndex(r),c=r.getChildIndex(o),l=0===c;if(!e&&l&&0===a)return void t.model.change(function(e){e.setSelection(e.createRangeOn(s));});var d=_this293.editor.plugins.get("TableUtils"),h=c===r.childCount-1,u=a===d.getRows(s)-1;if(e&&u&&h&&(t.execute("insertTableRowBelow"),a===d.getRows(s)-1))return void t.model.change(function(e){e.setSelection(e.createRangeOn(s));});var g;if(e&&h){var _e379=s.getChild(a+1);g=_e379.getChild(0);}else if(!e&&l){var _e380=s.getChild(a-1);g=_e380.getChild(_e380.childCount-1);}else g=r.getChild(c+(e?1:-1));t.model.change(function(e){e.setSelection(e.createRangeIn(g));});};}},{key:"_onArrowKey",value:function _onArrowKey(e,t){var i=this.editor,n=Lo(t.keyCode,i.locale.contentLanguageDirection);this._handleArrowKeys(n,t.shiftKey)&&(t.preventDefault(),t.stopPropagation(),e.stop());}},{key:"_handleArrowKeys",value:function _handleArrowKeys(e,t){var i=this.editor.model.document.selection,n=["right","down"].includes(e),o=ob(i);if(o.length){var _i339;return _i339=t?this.editor.plugins.get("TableSelection").getFocusCell():n?o[o.length-1]:o[0],this._navigateFromCellInDirection(_i339,e,t),!0;}var r=i.focus.findAncestor("tableCell");return!!r&&!(t&&!i.isCollapsed&&i.isBackward==n)&&!!this._isSelectionAtCellEdge(i,r,n)&&(this._navigateFromCellInDirection(r,e,t),!0);}},{key:"_isSelectionAtCellEdge",value:function _isSelectionAtCellEdge(e,t,i){var n=this.editor.model,o=this.editor.model.schema,r=i?e.getLastPosition():e.getFirstPosition();if(!o.getLimitElement(r).is("element","tableCell")){return n.createPositionAt(t,i?"end":0).isTouching(r);}var s=n.createSelection(r);return n.modifySelection(s,{direction:i?"forward":"backward"}),r.isEqual(s.focus);}},{key:"_navigateFromCellInDirection",value:function _navigateFromCellInDirection(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!1;var n=this.editor.model,o=e.findAncestor("table"),r=_toConsumableArray(new qp(o,{includeAllSlots:!0})),_r81=r[r.length-1],s=_r81.row,a=_r81.column,c=r.find(function(_ref95){var t=_ref95.cell;return t==e;});var l=c.row,d=c.column;switch(t){case"left":d--;break;case"up":l--;break;case"right":d+=c.cellWidth;break;case"down":l+=c.cellHeight;}if(l<0||l>s||d<0&&l<=0||d>a&&l>=s)return void n.change(function(e){e.setSelection(e.createRangeOn(o));});d<0?(d=i?0:a,l--):d>a&&(d=i?a:0,l++);var h=r.find(function(e){return e.row==l&&e.column==d;}).cell,u=["right","down"].includes(t),g=this.editor.plugins.get("TableSelection");if(i&&g.isEnabled){var _t336=g.getAnchorCell()||e;g.setCellSelection(_t336,h);}else{var _e381=n.createPositionAt(h,u?0:"end");n.change(function(t){t.setSelection(_e381);});}}}],[{key:"pluginName",get:function get(){return"TableKeyboard";}},{key:"requires",get:function get(){return[cw];}}]);return gw;}(Qe);var mw=/*#__PURE__*/function(_ts8){_inherits(mw,_ts8);var _super194=_createSuper(mw);function mw(e){var _this294;_classCallCheck(this,mw);_this294=_super194.call(this,e),_this294.domEventType=["mousemove","mouseleave"];return _this294;}_createClass(mw,[{key:"onDomEvent",value:function onDomEvent(e){this.fire(e.type,e);}}]);return mw;}(ts);var fw=/*#__PURE__*/function(_Qe67){_inherits(fw,_Qe67);var _super195=_createSuper(fw);function fw(){_classCallCheck(this,fw);return _super195.apply(this,arguments);}_createClass(fw,[{key:"init",value:function init(){this.editor.editing.view.addObserver(mw),this._enableShiftClickSelection(),this._enableMouseDragSelection();}},{key:"_enableShiftClickSelection",value:function _enableShiftClickSelection(){var _this295=this;var e=this.editor;var t=!1;var i=e.plugins.get(cw);this.listenTo(e.editing.view.document,"mousedown",function(n,o){if(!_this295.isEnabled||!i.isEnabled)return;if(!o.domEvent.shiftKey)return;var r=i.getAnchorCell()||rb(e.model.document.selection)[0];if(!r)return;var s=_this295._getModelTableCellFromDomEvent(o);s&&pw(r,s)&&(t=!0,i.setCellSelection(r,s),o.preventDefault());}),this.listenTo(e.editing.view.document,"mouseup",function(){t=!1;}),this.listenTo(e.editing.view.document,"selectionChange",function(e){t&&e.stop();},{priority:"highest"});}},{key:"_enableMouseDragSelection",value:function _enableMouseDragSelection(){var _this296=this;var e=this.editor;var t,i,n=!1,o=!1;var r=e.plugins.get(cw);this.listenTo(e.editing.view.document,"mousedown",function(e,i){_this296.isEnabled&&r.isEnabled&&(i.domEvent.shiftKey||i.domEvent.ctrlKey||i.domEvent.altKey||(t=_this296._getModelTableCellFromDomEvent(i)));}),this.listenTo(e.editing.view.document,"mousemove",function(e,s){if(!s.domEvent.buttons)return;if(!t)return;var a=_this296._getModelTableCellFromDomEvent(s);a&&pw(t,a)&&(i=a,n||i==t||(n=!0)),n&&(o=!0,r.setCellSelection(t,i),s.preventDefault());}),this.listenTo(e.editing.view.document,"mouseup",function(){n=!1,o=!1,t=null,i=null;}),this.listenTo(e.editing.view.document,"selectionChange",function(e){o&&e.stop();},{priority:"highest"});}},{key:"_getModelTableCellFromDomEvent",value:function _getModelTableCellFromDomEvent(e){var t=e.target,i=this.editor.editing.view.createPositionAt(t,0);return this.editor.editing.mapper.toModelPosition(i).parent.findAncestor("tableCell",{includeSelf:!0});}}],[{key:"pluginName",get:function get(){return"TableMouse";}},{key:"requires",get:function get(){return[cw];}}]);return fw;}(Qe);function pw(e,t){return e.parent.parent==t.parent.parent;}i(106);function bw(e){var t=e.getSelectedElement();return t&&kw(t)?t:null;}function ww(e){var t=e.getFirstPosition().parent;for(;t;){if(t.is("element")&&kw(t))return t;t=t.parent;}return null;}function kw(e){return!!e.getCustomProperty("table")&&Oh(e);}var _w={autoRefresh:!0};var vw=/*#__PURE__*/function(){function vw(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:_w;_classCallCheck(this,vw);if(!e)throw new c.a("token-missing-token-url",this);t.initValue&&this._validateTokenValue(t.initValue),this.set("value",t.initValue),this._refresh="function"==typeof e?e:function(){return t=e,new Promise(function(e,i){var n=new XMLHttpRequest();n.open("GET",t),n.addEventListener("load",function(){var t=n.status,o=n.response;return t<200||t>299?i(new c.a("token-cannot-download-new-token",null)):e(o);}),n.addEventListener("error",function(){return i(new Error("Network Error"));}),n.addEventListener("abort",function(){return i(new Error("Abort"));}),n.send();});var t;},this._options=Object.assign({},_w,t);}_createClass(vw,[{key:"init",value:function init(){var _this297=this;return new Promise(function(e,t){_this297.value?(_this297._options.autoRefresh&&_this297._registerRefreshTokenTimeout(),e(_this297)):_this297.refreshToken().then(e)["catch"](t);});}},{key:"refreshToken",value:function refreshToken(){var _this298=this;return this._refresh().then(function(e){_this298._validateTokenValue(e),_this298.set("value",e),_this298._options.autoRefresh&&_this298._registerRefreshTokenTimeout();}).then(function(){return _this298;});}},{key:"destroy",value:function destroy(){clearTimeout(this._tokenRefreshTimeout);}},{key:"_validateTokenValue",value:function _validateTokenValue(e){var t="string"==typeof e,i=!/^".*"$/.test(e),n=t&&3===e.split(".").length;if(!i||!n)throw new c.a("token-not-in-jwt-format",this);}},{key:"_registerRefreshTokenTimeout",value:function _registerRefreshTokenTimeout(){var _this299=this;var e=this._getTokenRefreshTimeoutTime();clearTimeout(this._tokenRefreshTimeout),this._tokenRefreshTimeout=setTimeout(function(){_this299.refreshToken();},e);}},{key:"_getTokenRefreshTimeoutTime",value:function _getTokenRefreshTimeoutTime(){try{var _this$value$split=this.value.split("."),_this$value$split2=_slicedToArray(_this$value$split,2),_e382=_this$value$split2[1],_JSON$parse=JSON.parse(atob(_e382)),_t337=_JSON$parse.exp;if(!_t337)return 36e5;return Math.floor((1e3*_t337-Date.now())/2);}catch(e){return 36e5;}}}],[{key:"create",value:function create(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:_w;return new vw(e,t).init();}}]);return vw;}();Ke(vw,Ue);var yw=vw;var xw=/^data:(\S*?);base64,/;var Aw=/*#__PURE__*/function(){function Aw(e,t,i){_classCallCheck(this,Aw);if(!e)throw new c.a("fileuploader-missing-file",null);if(!t)throw new c.a("fileuploader-missing-token",null);if(!i)throw new c.a("fileuploader-missing-api-address",null);this.file=function(e){if("string"!=typeof e)return!1;var t=e.match(xw);return!(!t||!t.length);}(e)?function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:512;try{var _i340=e.match(xw)[1],_n207=atob(e.replace(xw,"")),_o128=[];for(var _e383=0;_e383<_n207.length;_e383+=t){var _i341=_n207.slice(_e383,_e383+t),_r82=new Array(_i341.length);for(var _e384=0;_e384<_i341.length;_e384++){_r82[_e384]=_i341.charCodeAt(_e384);}_o128.push(new Uint8Array(_r82));}return new Blob(_o128,{type:_i340});}catch(e){throw new c.a("fileuploader-decoding-image-data-error",null);}}(e):e,this._token=t,this._apiAddress=i;}_createClass(Aw,[{key:"onProgress",value:function onProgress(e){return this.on("progress",function(t,i){return e(i);}),this;}},{key:"onError",value:function onError(e){return this.once("error",function(t,i){return e(i);}),this;}},{key:"abort",value:function abort(){this.xhr.abort();}},{key:"send",value:function send(){return this._prepareRequest(),this._attachXHRListeners(),this._sendRequest();}},{key:"_prepareRequest",value:function _prepareRequest(){var e=new XMLHttpRequest();e.open("POST",this._apiAddress),e.setRequestHeader("Authorization",this._token.value),e.responseType="json",this.xhr=e;}},{key:"_attachXHRListeners",value:function _attachXHRListeners(){var _this300=this;var e=this,t=this.xhr;function i(t){return function(){return e.fire("error",t);};}t.addEventListener("error",i("Network Error")),t.addEventListener("abort",i("Abort")),t.upload&&t.upload.addEventListener("progress",function(e){e.lengthComputable&&_this300.fire("progress",{total:e.total,uploaded:e.loaded});}),t.addEventListener("load",function(){var e=t.status,i=t.response;if(e<200||e>299)return _this300.fire("error",i.message||i.error);});}},{key:"_sendRequest",value:function _sendRequest(){var _this301=this;var e=new FormData(),t=this.xhr;return e.append("file",this.file),new Promise(function(i,n){t.addEventListener("load",function(){var e=t.status,o=t.response;return e<200||e>299?o.message?n(new c.a("fileuploader-uploading-data-failed",_this301,{message:o.message})):n(o.error):i(o);}),t.addEventListener("error",function(){return n(new Error("Network Error"));}),t.addEventListener("abort",function(){return n(new Error("Abort"));}),t.send(e);});}}]);return Aw;}();Ke(Aw,h);var Cw=/*#__PURE__*/function(){function Cw(e,t){_classCallCheck(this,Cw);if(!e)throw new c.a("uploadgateway-missing-token",null);if(!t)throw new c.a("uploadgateway-missing-api-address",null);this._token=e,this._apiAddress=t;}_createClass(Cw,[{key:"upload",value:function upload(e){return new Aw(e,this._token,this._apiAddress);}}]);return Cw;}();var Tw=/*#__PURE__*/function(_an3){_inherits(Tw,_an3);var _super196=_createSuper(Tw);function Tw(){_classCallCheck(this,Tw);return _super196.apply(this,arguments);}_createClass(Tw,[{key:"createToken",value:function createToken(e,t){return new yw(e,t);}},{key:"createUploadGateway",value:function createUploadGateway(e,t){return new Cw(e,t);}}],[{key:"pluginName",get:function get(){return"CloudServicesCore";}}]);return Tw;}(an);var Ew=/*#__PURE__*/function(_ph){_inherits(Ew,_ph);var _super197=_createSuper(Ew);function Ew(){_classCallCheck(this,Ew);return _super197.apply(this,arguments);}return _createClass(Ew);}(ph);Ew.builtinPlugins=[/*#__PURE__*/function(_Qe68){_inherits(_class3,_Qe68);var _super198=_createSuper(_class3);function _class3(){_classCallCheck(this,_class3);return _super198.apply(this,arguments);}_createClass(_class3,null,[{key:"requires",get:function get(){return[lu,Ch,ku,gu,Eu,ig];}},{key:"pluginName",get:function get(){return"Essentials";}}]);return _class3;}(Qe),/*#__PURE__*/function(_Qe69){_inherits(_class4,_Qe69);var _super199=_createSuper(_class4);function _class4(){_classCallCheck(this,_class4);return _super199.apply(this,arguments);}_createClass(_class4,[{key:"init",value:function init(){var _this302=this;var e=this.editor.config.get("ckfinder.uploadUrl");e&&(this.editor.plugins.get(og).createUploadAdapter=function(t){return new lg(t,e,_this302.editor.t);});}}],[{key:"requires",get:function get(){return[og];}},{key:"pluginName",get:function get(){return"CKFinderUploadAdapter";}}]);return _class4;}(Qe),/*#__PURE__*/function(_Qe70){_inherits(_class5,_Qe70);var _super200=_createSuper(_class5);function _class5(){_classCallCheck(this,_class5);return _super200.apply(this,arguments);}_createClass(_class5,[{key:"afterInit",value:function afterInit(){this._addListAutoformats(),this._addBasicStylesAutoformats(),this._addHeadingAutoformats(),this._addBlockQuoteAutoformats(),this._addCodeBlockAutoformats(),this._addHorizontalLineAutoformats();}},{key:"_addListAutoformats",value:function _addListAutoformats(){var _this303=this;var e=this.editor.commands;e.get("bulletedList")&&dg(this.editor,this,/^[*-]\s$/,"bulletedList"),e.get("numberedList")&&dg(this.editor,this,/^1[.|)]\s$/,"numberedList"),e.get("todoList")&&dg(this.editor,this,/^\[\s?\]\s$/,"todoList"),e.get("checkTodoList")&&dg(this.editor,this,/^\[\s?x\s?\]\s$/,function(){_this303.editor.execute("todoList"),_this303.editor.execute("checkTodoList");});}},{key:"_addBasicStylesAutoformats",value:function _addBasicStylesAutoformats(){var e=this.editor.commands;if(e.get("bold")){var _e385=gg(this.editor,"bold");hg(this.editor,this,/(?:^|\s)(\*\*)([^*]+)(\*\*)$/g,_e385),hg(this.editor,this,/(?:^|\s)(__)([^_]+)(__)$/g,_e385);}if(e.get("italic")){var _e386=gg(this.editor,"italic");hg(this.editor,this,/(?:^|\s)(\*)([^*_]+)(\*)$/g,_e386),hg(this.editor,this,/(?:^|\s)(_)([^_]+)(_)$/g,_e386);}if(e.get("code")){var _e387=gg(this.editor,"code");hg(this.editor,this,/(`)([^`]+)(`)$/g,_e387);}if(e.get("strikethrough")){var _e388=gg(this.editor,"strikethrough");hg(this.editor,this,/(~~)([^~]+)(~~)$/g,_e388);}}},{key:"_addHeadingAutoformats",value:function _addHeadingAutoformats(){var _this304=this;var e=this.editor.commands.get("heading");e&&e.modelElements.filter(function(e){return e.match(/^heading[1-6]$/);}).forEach(function(t){var i=t[7],n=new RegExp("^(#{".concat(i,"})\\s$"));dg(_this304.editor,_this304,n,function(){if(!e.isEnabled||e.value===t)return!1;_this304.editor.execute("heading",{value:t});});});}},{key:"_addBlockQuoteAutoformats",value:function _addBlockQuoteAutoformats(){this.editor.commands.get("blockQuote")&&dg(this.editor,this,/^>\s$/,"blockQuote");}},{key:"_addCodeBlockAutoformats",value:function _addCodeBlockAutoformats(){var _this305=this;var e=this.editor,t=e.model.document.selection;e.commands.get("codeBlock")&&dg(e,this,/^```$/,function(){if(t.getFirstPosition().parent.is("element","listItem"))return!1;_this305.editor.execute("codeBlock",{usePreviousLanguageChoice:!0});});}},{key:"_addHorizontalLineAutoformats",value:function _addHorizontalLineAutoformats(){this.editor.commands.get("horizontalLine")&&dg(this.editor,this,/^---$/,"horizontalLine");}}],[{key:"pluginName",get:function get(){return"Autoformat";}}]);return _class5;}(Qe),/*#__PURE__*/function(_Qe71){_inherits(_class6,_Qe71);var _super201=_createSuper(_class6);function _class6(){_classCallCheck(this,_class6);return _super201.apply(this,arguments);}_createClass(_class6,null,[{key:"requires",get:function get(){return[fg,pg];}},{key:"pluginName",get:function get(){return"Bold";}}]);return _class6;}(Qe),/*#__PURE__*/function(_Qe72){_inherits(_class7,_Qe72);var _super202=_createSuper(_class7);function _class7(){_classCallCheck(this,_class7);return _super202.apply(this,arguments);}_createClass(_class7,null,[{key:"requires",get:function get(){return[bg,wg];}},{key:"pluginName",get:function get(){return"Italic";}}]);return _class7;}(Qe),/*#__PURE__*/function(_Qe73){_inherits(_class8,_Qe73);var _super203=_createSuper(_class8);function _class8(){_classCallCheck(this,_class8);return _super203.apply(this,arguments);}_createClass(_class8,null,[{key:"requires",get:function get(){return[xg,Ag];}},{key:"pluginName",get:function get(){return"BlockQuote";}}]);return _class8;}(Qe),/*#__PURE__*/function(_Qe74){_inherits(_class9,_Qe74);var _super204=_createSuper(_class9);function _class9(){_classCallCheck(this,_class9);return _super204.apply(this,arguments);}_createClass(_class9,null,[{key:"pluginName",get:function get(){return"CKFinder";}},{key:"requires",get:function get(){return["Link","CKFinderUploadAdapter",Ig,Cg];}}]);return _class9;}(Qe),/*#__PURE__*/function(_an4){_inherits(_class10,_an4);var _super205=_createSuper(_class10);function _class10(){_classCallCheck(this,_class10);return _super205.apply(this,arguments);}_createClass(_class10,[{key:"init",value:function init(){var e=this.context.config.get("cloudServices")||{};for(var _t338 in e){this[_t338]=e[_t338];}if(this._tokens=new Map(),this.tokenUrl)return this.token=this.context.plugins.get("CloudServicesCore").createToken(this.tokenUrl),this._tokens.set(this.tokenUrl,this.token),this.token.init();this.token=null;}},{key:"registerTokenUrl",value:function registerTokenUrl(e){if(this._tokens.has(e))return Promise.resolve(this.getTokenFor(e));var t=this.context.plugins.get("CloudServicesCore").createToken(e);return this._tokens.set(e,t),t.init();}},{key:"getTokenFor",value:function getTokenFor(e){var t=this._tokens.get(e);if(!t)throw new c.a("cloudservices-token-not-registered",this);return t;}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class10.prototype),"destroy",this).call(this);var _iterator468=_createForOfIteratorHelper(this._tokens.values()),_step468;try{for(_iterator468.s();!(_step468=_iterator468.n()).done;){var _e389=_step468.value;_e389.destroy();}}catch(err){_iterator468.e(err);}finally{_iterator468.f();}}}],[{key:"pluginName",get:function get(){return"CloudServices";}},{key:"requires",get:function get(){return[Tw];}}]);return _class10;}(an),/*#__PURE__*/function(_Qe75){_inherits(_class11,_Qe75);var _super206=_createSuper(_class11);function _class11(){_classCallCheck(this,_class11);return _super206.apply(this,arguments);}_createClass(_class11,[{key:"init",value:function init(){var e=this.editor;e.plugins.has("ImageBlockEditing")||e.plugins.has("ImageInlineEditing")||Object(c.b)("easy-image-image-feature-missing",e);}}],[{key:"requires",get:function get(){return[Sg,"ImageUpload"];}},{key:"pluginName",get:function get(){return"EasyImage";}}]);return _class11;}(Qe),/*#__PURE__*/function(_Qe76){_inherits(_class12,_Qe76);var _super207=_createSuper(_class12);function _class12(){_classCallCheck(this,_class12);return _super207.apply(this,arguments);}_createClass(_class12,null,[{key:"requires",get:function get(){return[Lg,Vg];}},{key:"pluginName",get:function get(){return"Heading";}}]);return _class12;}(Qe),/*#__PURE__*/function(_Qe77){_inherits(_class13,_Qe77);var _super208=_createSuper(_class13);function _class13(){_classCallCheck(this,_class13);return _super208.apply(this,arguments);}_createClass(_class13,null,[{key:"requires",get:function get(){return[lm,hm];}},{key:"pluginName",get:function get(){return"Image";}}]);return _class13;}(Qe),/*#__PURE__*/function(_Qe78){_inherits(_class14,_Qe78);var _super209=_createSuper(_class14);function _class14(){_classCallCheck(this,_class14);return _super209.apply(this,arguments);}_createClass(_class14,null,[{key:"requires",get:function get(){return[fm,bm];}},{key:"pluginName",get:function get(){return"ImageCaption";}}]);return _class14;}(Qe),/*#__PURE__*/function(_Qe79){_inherits(_class15,_Qe79);var _super210=_createSuper(_class15);function _class15(){_classCallCheck(this,_class15);return _super210.apply(this,arguments);}_createClass(_class15,null,[{key:"requires",get:function get(){return[Nm,Rm];}},{key:"pluginName",get:function get(){return"ImageStyle";}}]);return _class15;}(Qe),/*#__PURE__*/function(_Qe80){_inherits(_class16,_Qe80);var _super211=_createSuper(_class16);function _class16(){_classCallCheck(this,_class16);return _super211.apply(this,arguments);}_createClass(_class16,[{key:"afterInit",value:function afterInit(){var e=this.editor,t=e.t,i=e.plugins.get(jg),n=e.plugins.get("ImageUtils");var o;i.register("image",{ariaLabel:t("Image toolbar"),items:(o=e.config.get("image.toolbar")||[],o.map(function(e){return w(e)?e.name:e;})),getRelatedElement:function getRelatedElement(e){return n.getClosestSelectedImageWidget(e);}});}}],[{key:"requires",get:function get(){return[jg,Kg];}},{key:"pluginName",get:function get(){return"ImageToolbar";}}]);return _class16;}(Qe),/*#__PURE__*/function(_Qe81){_inherits(_class17,_Qe81);var _super212=_createSuper(_class17);function _class17(){_classCallCheck(this,_class17);return _super212.apply(this,arguments);}_createClass(_class17,null,[{key:"pluginName",get:function get(){return"ImageUpload";}},{key:"requires",get:function get(){return[Gm,Bm,Fm];}}]);return _class17;}(Qe),/*#__PURE__*/function(_Qe82){_inherits(_class18,_Qe82);var _super213=_createSuper(_class18);function _class18(){_classCallCheck(this,_class18);return _super213.apply(this,arguments);}_createClass(_class18,null,[{key:"pluginName",get:function get(){return"Indent";}},{key:"requires",get:function get(){return[Qm,Xm];}}]);return _class18;}(Qe),/*#__PURE__*/function(_Qe83){_inherits(_class19,_Qe83);var _super214=_createSuper(_class19);function _class19(){_classCallCheck(this,_class19);return _super214.apply(this,arguments);}_createClass(_class19,null,[{key:"requires",get:function get(){return[Mf,Lf,Bf];}},{key:"pluginName",get:function get(){return"Link";}}]);return _class19;}(Qe),/*#__PURE__*/function(_Qe84){_inherits(_class20,_Qe84);var _super215=_createSuper(_class20);function _class20(){_classCallCheck(this,_class20);return _super215.apply(this,arguments);}_createClass(_class20,null,[{key:"requires",get:function get(){return[up,mp];}},{key:"pluginName",get:function get(){return"List";}}]);return _class20;}(Qe),/*#__PURE__*/function(_Qe85){_inherits(_class21,_Qe85);var _super216=_createSuper(_class21);function _class21(){_classCallCheck(this,_class21);return _super216.apply(this,arguments);}_createClass(_class21,null,[{key:"requires",get:function get(){return[yp,Tp,Ap,eu];}},{key:"pluginName",get:function get(){return"MediaEmbed";}}]);return _class21;}(Qe),Og,/*#__PURE__*/function(_Qe86){_inherits(_class22,_Qe86);var _super217=_createSuper(_class22);function _class22(){_classCallCheck(this,_class22);return _super217.apply(this,arguments);}_createClass(_class22,[{key:"init",value:function init(){var e=this.editor,t=e.editing.view.document,i=[];i.push(new Dp(t)),i.push(new Np(t)),e.plugins.get("ClipboardPipeline").on("inputTransformation",function(e,n){if(n._isTransformedWithPasteFromOffice)return;var o=n.dataTransfer.getData("text/html"),r=i.find(function(e){return e.isActive(o);});r&&(n._parsedData=Vp(o,t.stylesProcessor),r.execute(n),n._isTransformedWithPasteFromOffice=!0);},{priority:"high"});}}],[{key:"pluginName",get:function get(){return"PasteFromOffice";}},{key:"requires",get:function get(){return[_h];}}]);return _class22;}(Qe),/*#__PURE__*/function(_Qe87){_inherits(_class23,_Qe87);var _super218=_createSuper(_class23);function _class23(){_classCallCheck(this,_class23);return _super218.apply(this,arguments);}_createClass(_class23,null,[{key:"requires",get:function get(){return[iw,sw,cw,fw,gw,lw,eu];}},{key:"pluginName",get:function get(){return"Table";}}]);return _class23;}(Qe),/*#__PURE__*/function(_Qe88){_inherits(_class24,_Qe88);var _super219=_createSuper(_class24);function _class24(){_classCallCheck(this,_class24);return _super219.apply(this,arguments);}_createClass(_class24,[{key:"afterInit",value:function afterInit(){var e=this.editor,t=e.t,i=e.plugins.get(jg),n=e.config.get("table.contentToolbar"),o=e.config.get("table.tableToolbar");n&&i.register("tableContent",{ariaLabel:t("Table toolbar"),items:n,getRelatedElement:ww}),o&&i.register("table",{ariaLabel:t("Table toolbar"),items:o,getRelatedElement:bw});}}],[{key:"requires",get:function get(){return[jg];}},{key:"pluginName",get:function get(){return"TableToolbar";}}]);return _class24;}(Qe),/*#__PURE__*/function(_Qe89){_inherits(_class25,_Qe89);var _super220=_createSuper(_class25);function _class25(e){var _this306;_classCallCheck(this,_class25);_this306=_super220.call(this,e),e.config.define("typing",{transformations:{include:Bu}});return _this306;}_createClass(_class25,[{key:"init",value:function init(){var _this307=this;var e=this.editor.model.document.selection;e.on("change:range",function(){_this307.isEnabled=!e.anchor.parent.is("element","codeBlock");}),this._enableTransformationWatchers();}},{key:"_enableTransformationWatchers",value:function _enableTransformationWatchers(){var e=this.editor,t=e.model,i=e.plugins.get("Input"),n=function(e){var t=e.extra||[],i=e.remove||[],n=function n(e){return!i.includes(e);};return function(e){var t=new Set();var _iterator469=_createForOfIteratorHelper(e),_step469;try{for(_iterator469.s();!(_step469=_iterator469.n()).done;){var _i342=_step469.value;if(ju[_i342]){var _iterator470=_createForOfIteratorHelper(ju[_i342]),_step470;try{for(_iterator470.s();!(_step470=_iterator470.n()).done;){var _e390=_step470.value;t.add(_e390);}}catch(err){_iterator470.e(err);}finally{_iterator470.f();}}else t.add(_i342);}}catch(err){_iterator469.e(err);}finally{_iterator469.f();}return Array.from(t);}(e.include.concat(t).filter(n)).filter(n).map(function(e){return Vu[e]||e;}).map(function(e){return{from:Fu(e.from),to:Hu(e.to)};});}(e.config.get("typing.transformations")),o=new Su(e.model,function(e){var _iterator471=_createForOfIteratorHelper(n),_step471;try{for(_iterator471.s();!(_step471=_iterator471.n()).done;){var _t339=_step471.value;if(_t339.from.test(e))return{normalizedTransformation:_t339};}}catch(err){_iterator471.e(err);}finally{_iterator471.f();}});o.on("matched:data",function(e,n){if(!i.isInput(n.batch))return;var _n$normalizedTransfor=n.normalizedTransformation,o=_n$normalizedTransfor.from,r=_n$normalizedTransfor.to,s=o.exec(n.text),a=r(s.slice(1)),c=n.range;var l=s.index;t.enqueueChange(function(e){for(var _i343=1;_i343<s.length;_i343++){var _n208=s[_i343],_o129=a[_i343-1];if(null==_o129){l+=_n208.length;continue;}var _r83=c.start.getShiftedBy(l),_d10=t.createRange(_r83,_r83.getShiftedBy(_n208.length)),_h8=Uu(_r83);t.insertContent(e.createText(_o129,_h8),_d10),l+=_o129.length;}});}),o.bind("isEnabled").to(this);}}],[{key:"pluginName",get:function get(){return"TextTransformation";}}]);return _class25;}(Qe)],Ew.defaultConfig={toolbar:{items:["heading","|","bold","italic","link","bulletedList","numberedList","|","outdent","indent","|","uploadImage","blockQuote","insertTable","mediaEmbed","undo","redo"]},image:{toolbar:["imageStyle:inline","imageStyle:block","imageStyle:side","|","toggleImageCaption","imageTextAlternative"]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]},language:"en"};}])["default"];});/***/}/******/};/************************************************************************/ /******/ // The module cache
/******/var __webpack_module_cache__={};/******/ /******/ // The require function
/******/function __nested_webpack_require_1054613__(moduleId){/******/ // Check if module is in cache
/******/var cachedModule=__webpack_module_cache__[moduleId];/******/if(cachedModule!==undefined){/******/return cachedModule.exports;/******/}/******/ // Create a new module (and put it into the cache)
/******/var module=__webpack_module_cache__[moduleId]={/******/ // no module.id needed
/******/ // no module.loaded needed
/******/exports:{}/******/};/******/ /******/ // Execute the module function
/******/__webpack_modules__[moduleId](module,module.exports,__nested_webpack_require_1054613__);/******/ /******/ // Return the exports of the module
/******/return module.exports;/******/}/******/ /************************************************************************/ /******/ /* webpack/runtime/compat get default export */ /******/(function(){/******/ // getDefaultExport function for compatibility with non-harmony modules
/******/__nested_webpack_require_1054613__.n=function(module){/******/var getter=module&&module.__esModule?/******/function(){return module['default'];}:/******/function(){return module;};/******/__nested_webpack_require_1054613__.d(getter,{a:getter});/******/return getter;/******/};/******/})();/******/ /******/ /* webpack/runtime/define property getters */ /******/(function(){/******/ // define getter functions for harmony exports
/******/__nested_webpack_require_1054613__.d=function(exports,definition){/******/for(var key in definition){/******/if(__nested_webpack_require_1054613__.o(definition,key)&&!__nested_webpack_require_1054613__.o(exports,key)){/******/Object.defineProperty(exports,key,{enumerable:true,get:definition[key]});/******/}/******/}/******/};/******/})();/******/ /******/ /* webpack/runtime/hasOwnProperty shorthand */ /******/(function(){/******/__nested_webpack_require_1054613__.o=function(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop);};/******/})();/******/ /******/ /* webpack/runtime/make namespace object */ /******/(function(){/******/ // define __esModule on exports
/******/__nested_webpack_require_1054613__.r=function(exports){/******/if(typeof Symbol!=='undefined'&&Symbol.toStringTag){/******/Object.defineProperty(exports,Symbol.toStringTag,{value:'Module'});/******/}/******/Object.defineProperty(exports,'__esModule',{value:true});/******/};/******/})();/******/ /************************************************************************/var __webpack_exports__={};// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(function(){"use strict";/*!******************************************!*\
  !*** ./resources/js/ckeditor-classic.js ***!
  \******************************************/__nested_webpack_require_1054613__.r(__webpack_exports__);/* harmony import */var _ckeditor_ckeditor5_build_classic__WEBPACK_IMPORTED_MODULE_0__=__nested_webpack_require_1054613__(/*! @ckeditor/ckeditor5-build-classic */"./node_modules/@ckeditor/ckeditor5-build-classic/build/ckeditor.js");/* harmony import */var _ckeditor_ckeditor5_build_classic__WEBPACK_IMPORTED_MODULE_0___default=/*#__PURE__*/__nested_webpack_require_1054613__.n(_ckeditor_ckeditor5_build_classic__WEBPACK_IMPORTED_MODULE_0__);$(".editor").each(function(){var el=this;_ckeditor_ckeditor5_build_classic__WEBPACK_IMPORTED_MODULE_0___default().create(el)["catch"](function(error){console.error(error);});});})();/******/})();
})();

/******/ })()
;