/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/@babel/runtime/regenerator/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/@babel/runtime/regenerator/index.js ***!
  \**********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__(/*! regenerator-runtime */ "./node_modules/regenerator-runtime/runtime.js");


/***/ }),

/***/ "./node_modules/regenerator-runtime/runtime.js":
/*!*****************************************************!*\
  !*** ./node_modules/regenerator-runtime/runtime.js ***!
  \*****************************************************/
/***/ ((module) => {

/**
 * Copyright (c) 2014-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

var runtime = (function (exports) {
  "use strict";

  var Op = Object.prototype;
  var hasOwn = Op.hasOwnProperty;
  var undefined; // More compressible than void 0.
  var $Symbol = typeof Symbol === "function" ? Symbol : {};
  var iteratorSymbol = $Symbol.iterator || "@@iterator";
  var asyncIteratorSymbol = $Symbol.asyncIterator || "@@asyncIterator";
  var toStringTagSymbol = $Symbol.toStringTag || "@@toStringTag";

  function define(obj, key, value) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
    return obj[key];
  }
  try {
    // IE 8 has a broken Object.defineProperty that only works on DOM objects.
    define({}, "");
  } catch (err) {
    define = function(obj, key, value) {
      return obj[key] = value;
    };
  }

  function wrap(innerFn, outerFn, self, tryLocsList) {
    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.
    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;
    var generator = Object.create(protoGenerator.prototype);
    var context = new Context(tryLocsList || []);

    // The ._invoke method unifies the implementations of the .next,
    // .throw, and .return methods.
    generator._invoke = makeInvokeMethod(innerFn, self, context);

    return generator;
  }
  exports.wrap = wrap;

  // Try/catch helper to minimize deoptimizations. Returns a completion
  // record like context.tryEntries[i].completion. This interface could
  // have been (and was previously) designed to take a closure to be
  // invoked without arguments, but in all the cases we care about we
  // already have an existing method we want to call, so there's no need
  // to create a new function object. We can even get away with assuming
  // the method takes exactly one argument, since that happens to be true
  // in every case, so we don't have to touch the arguments object. The
  // only additional allocation required is the completion record, which
  // has a stable shape and so hopefully should be cheap to allocate.
  function tryCatch(fn, obj, arg) {
    try {
      return { type: "normal", arg: fn.call(obj, arg) };
    } catch (err) {
      return { type: "throw", arg: err };
    }
  }

  var GenStateSuspendedStart = "suspendedStart";
  var GenStateSuspendedYield = "suspendedYield";
  var GenStateExecuting = "executing";
  var GenStateCompleted = "completed";

  // Returning this object from the innerFn has the same effect as
  // breaking out of the dispatch switch statement.
  var ContinueSentinel = {};

  // Dummy constructor functions that we use as the .constructor and
  // .constructor.prototype properties for functions that return Generator
  // objects. For full spec compliance, you may wish to configure your
  // minifier not to mangle the names of these two functions.
  function Generator() {}
  function GeneratorFunction() {}
  function GeneratorFunctionPrototype() {}

  // This is a polyfill for %IteratorPrototype% for environments that
  // don't natively support it.
  var IteratorPrototype = {};
  define(IteratorPrototype, iteratorSymbol, function () {
    return this;
  });

  var getProto = Object.getPrototypeOf;
  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));
  if (NativeIteratorPrototype &&
      NativeIteratorPrototype !== Op &&
      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {
    // This environment has a native %IteratorPrototype%; use it instead
    // of the polyfill.
    IteratorPrototype = NativeIteratorPrototype;
  }

  var Gp = GeneratorFunctionPrototype.prototype =
    Generator.prototype = Object.create(IteratorPrototype);
  GeneratorFunction.prototype = GeneratorFunctionPrototype;
  define(Gp, "constructor", GeneratorFunctionPrototype);
  define(GeneratorFunctionPrototype, "constructor", GeneratorFunction);
  GeneratorFunction.displayName = define(
    GeneratorFunctionPrototype,
    toStringTagSymbol,
    "GeneratorFunction"
  );

  // Helper for defining the .next, .throw, and .return methods of the
  // Iterator interface in terms of a single ._invoke method.
  function defineIteratorMethods(prototype) {
    ["next", "throw", "return"].forEach(function(method) {
      define(prototype, method, function(arg) {
        return this._invoke(method, arg);
      });
    });
  }

  exports.isGeneratorFunction = function(genFun) {
    var ctor = typeof genFun === "function" && genFun.constructor;
    return ctor
      ? ctor === GeneratorFunction ||
        // For the native GeneratorFunction constructor, the best we can
        // do is to check its .name property.
        (ctor.displayName || ctor.name) === "GeneratorFunction"
      : false;
  };

  exports.mark = function(genFun) {
    if (Object.setPrototypeOf) {
      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);
    } else {
      genFun.__proto__ = GeneratorFunctionPrototype;
      define(genFun, toStringTagSymbol, "GeneratorFunction");
    }
    genFun.prototype = Object.create(Gp);
    return genFun;
  };

  // Within the body of any async function, `await x` is transformed to
  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test
  // `hasOwn.call(value, "__await")` to determine if the yielded value is
  // meant to be awaited.
  exports.awrap = function(arg) {
    return { __await: arg };
  };

  function AsyncIterator(generator, PromiseImpl) {
    function invoke(method, arg, resolve, reject) {
      var record = tryCatch(generator[method], generator, arg);
      if (record.type === "throw") {
        reject(record.arg);
      } else {
        var result = record.arg;
        var value = result.value;
        if (value &&
            typeof value === "object" &&
            hasOwn.call(value, "__await")) {
          return PromiseImpl.resolve(value.__await).then(function(value) {
            invoke("next", value, resolve, reject);
          }, function(err) {
            invoke("throw", err, resolve, reject);
          });
        }

        return PromiseImpl.resolve(value).then(function(unwrapped) {
          // When a yielded Promise is resolved, its final value becomes
          // the .value of the Promise<{value,done}> result for the
          // current iteration.
          result.value = unwrapped;
          resolve(result);
        }, function(error) {
          // If a rejected Promise was yielded, throw the rejection back
          // into the async generator function so it can be handled there.
          return invoke("throw", error, resolve, reject);
        });
      }
    }

    var previousPromise;

    function enqueue(method, arg) {
      function callInvokeWithMethodAndArg() {
        return new PromiseImpl(function(resolve, reject) {
          invoke(method, arg, resolve, reject);
        });
      }

      return previousPromise =
        // If enqueue has been called before, then we want to wait until
        // all previous Promises have been resolved before calling invoke,
        // so that results are always delivered in the correct order. If
        // enqueue has not been called before, then it is important to
        // call invoke immediately, without waiting on a callback to fire,
        // so that the async generator function has the opportunity to do
        // any necessary setup in a predictable way. This predictability
        // is why the Promise constructor synchronously invokes its
        // executor callback, and why async functions synchronously
        // execute code before the first await. Since we implement simple
        // async functions in terms of async generators, it is especially
        // important to get this right, even though it requires care.
        previousPromise ? previousPromise.then(
          callInvokeWithMethodAndArg,
          // Avoid propagating failures to Promises returned by later
          // invocations of the iterator.
          callInvokeWithMethodAndArg
        ) : callInvokeWithMethodAndArg();
    }

    // Define the unified helper method that is used to implement .next,
    // .throw, and .return (see defineIteratorMethods).
    this._invoke = enqueue;
  }

  defineIteratorMethods(AsyncIterator.prototype);
  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {
    return this;
  });
  exports.AsyncIterator = AsyncIterator;

  // Note that simple async functions are implemented on top of
  // AsyncIterator objects; they just return a Promise for the value of
  // the final result produced by the iterator.
  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {
    if (PromiseImpl === void 0) PromiseImpl = Promise;

    var iter = new AsyncIterator(
      wrap(innerFn, outerFn, self, tryLocsList),
      PromiseImpl
    );

    return exports.isGeneratorFunction(outerFn)
      ? iter // If outerFn is a generator, return the full iterator.
      : iter.next().then(function(result) {
          return result.done ? result.value : iter.next();
        });
  };

  function makeInvokeMethod(innerFn, self, context) {
    var state = GenStateSuspendedStart;

    return function invoke(method, arg) {
      if (state === GenStateExecuting) {
        throw new Error("Generator is already running");
      }

      if (state === GenStateCompleted) {
        if (method === "throw") {
          throw arg;
        }

        // Be forgiving, per 25.3.3.3.3 of the spec:
        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume
        return doneResult();
      }

      context.method = method;
      context.arg = arg;

      while (true) {
        var delegate = context.delegate;
        if (delegate) {
          var delegateResult = maybeInvokeDelegate(delegate, context);
          if (delegateResult) {
            if (delegateResult === ContinueSentinel) continue;
            return delegateResult;
          }
        }

        if (context.method === "next") {
          // Setting context._sent for legacy support of Babel's
          // function.sent implementation.
          context.sent = context._sent = context.arg;

        } else if (context.method === "throw") {
          if (state === GenStateSuspendedStart) {
            state = GenStateCompleted;
            throw context.arg;
          }

          context.dispatchException(context.arg);

        } else if (context.method === "return") {
          context.abrupt("return", context.arg);
        }

        state = GenStateExecuting;

        var record = tryCatch(innerFn, self, context);
        if (record.type === "normal") {
          // If an exception is thrown from innerFn, we leave state ===
          // GenStateExecuting and loop back for another invocation.
          state = context.done
            ? GenStateCompleted
            : GenStateSuspendedYield;

          if (record.arg === ContinueSentinel) {
            continue;
          }

          return {
            value: record.arg,
            done: context.done
          };

        } else if (record.type === "throw") {
          state = GenStateCompleted;
          // Dispatch the exception by looping back around to the
          // context.dispatchException(context.arg) call above.
          context.method = "throw";
          context.arg = record.arg;
        }
      }
    };
  }

  // Call delegate.iterator[context.method](context.arg) and handle the
  // result, either by returning a { value, done } result from the
  // delegate iterator, or by modifying context.method and context.arg,
  // setting context.delegate to null, and returning the ContinueSentinel.
  function maybeInvokeDelegate(delegate, context) {
    var method = delegate.iterator[context.method];
    if (method === undefined) {
      // A .throw or .return when the delegate iterator has no .throw
      // method always terminates the yield* loop.
      context.delegate = null;

      if (context.method === "throw") {
        // Note: ["return"] must be used for ES3 parsing compatibility.
        if (delegate.iterator["return"]) {
          // If the delegate iterator has a return method, give it a
          // chance to clean up.
          context.method = "return";
          context.arg = undefined;
          maybeInvokeDelegate(delegate, context);

          if (context.method === "throw") {
            // If maybeInvokeDelegate(context) changed context.method from
            // "return" to "throw", let that override the TypeError below.
            return ContinueSentinel;
          }
        }

        context.method = "throw";
        context.arg = new TypeError(
          "The iterator does not provide a 'throw' method");
      }

      return ContinueSentinel;
    }

    var record = tryCatch(method, delegate.iterator, context.arg);

    if (record.type === "throw") {
      context.method = "throw";
      context.arg = record.arg;
      context.delegate = null;
      return ContinueSentinel;
    }

    var info = record.arg;

    if (! info) {
      context.method = "throw";
      context.arg = new TypeError("iterator result is not an object");
      context.delegate = null;
      return ContinueSentinel;
    }

    if (info.done) {
      // Assign the result of the finished delegate to the temporary
      // variable specified by delegate.resultName (see delegateYield).
      context[delegate.resultName] = info.value;

      // Resume execution at the desired location (see delegateYield).
      context.next = delegate.nextLoc;

      // If context.method was "throw" but the delegate handled the
      // exception, let the outer generator proceed normally. If
      // context.method was "next", forget context.arg since it has been
      // "consumed" by the delegate iterator. If context.method was
      // "return", allow the original .return call to continue in the
      // outer generator.
      if (context.method !== "return") {
        context.method = "next";
        context.arg = undefined;
      }

    } else {
      // Re-yield the result returned by the delegate method.
      return info;
    }

    // The delegate iterator is finished, so forget it and continue with
    // the outer generator.
    context.delegate = null;
    return ContinueSentinel;
  }

  // Define Generator.prototype.{next,throw,return} in terms of the
  // unified ._invoke helper method.
  defineIteratorMethods(Gp);

  define(Gp, toStringTagSymbol, "Generator");

  // A Generator should always return itself as the iterator object when the
  // @@iterator function is called on it. Some browsers' implementations of the
  // iterator prototype chain incorrectly implement this, causing the Generator
  // object to not be returned from this call. This ensures that doesn't happen.
  // See https://github.com/facebook/regenerator/issues/274 for more details.
  define(Gp, iteratorSymbol, function() {
    return this;
  });

  define(Gp, "toString", function() {
    return "[object Generator]";
  });

  function pushTryEntry(locs) {
    var entry = { tryLoc: locs[0] };

    if (1 in locs) {
      entry.catchLoc = locs[1];
    }

    if (2 in locs) {
      entry.finallyLoc = locs[2];
      entry.afterLoc = locs[3];
    }

    this.tryEntries.push(entry);
  }

  function resetTryEntry(entry) {
    var record = entry.completion || {};
    record.type = "normal";
    delete record.arg;
    entry.completion = record;
  }

  function Context(tryLocsList) {
    // The root entry object (effectively a try statement without a catch
    // or a finally block) gives us a place to store values thrown from
    // locations where there is no enclosing try statement.
    this.tryEntries = [{ tryLoc: "root" }];
    tryLocsList.forEach(pushTryEntry, this);
    this.reset(true);
  }

  exports.keys = function(object) {
    var keys = [];
    for (var key in object) {
      keys.push(key);
    }
    keys.reverse();

    // Rather than returning an object with a next method, we keep
    // things simple and return the next function itself.
    return function next() {
      while (keys.length) {
        var key = keys.pop();
        if (key in object) {
          next.value = key;
          next.done = false;
          return next;
        }
      }

      // To avoid creating an additional object, we just hang the .value
      // and .done properties off the next function object itself. This
      // also ensures that the minifier will not anonymize the function.
      next.done = true;
      return next;
    };
  };

  function values(iterable) {
    if (iterable) {
      var iteratorMethod = iterable[iteratorSymbol];
      if (iteratorMethod) {
        return iteratorMethod.call(iterable);
      }

      if (typeof iterable.next === "function") {
        return iterable;
      }

      if (!isNaN(iterable.length)) {
        var i = -1, next = function next() {
          while (++i < iterable.length) {
            if (hasOwn.call(iterable, i)) {
              next.value = iterable[i];
              next.done = false;
              return next;
            }
          }

          next.value = undefined;
          next.done = true;

          return next;
        };

        return next.next = next;
      }
    }

    // Return an iterator with no values.
    return { next: doneResult };
  }
  exports.values = values;

  function doneResult() {
    return { value: undefined, done: true };
  }

  Context.prototype = {
    constructor: Context,

    reset: function(skipTempReset) {
      this.prev = 0;
      this.next = 0;
      // Resetting context._sent for legacy support of Babel's
      // function.sent implementation.
      this.sent = this._sent = undefined;
      this.done = false;
      this.delegate = null;

      this.method = "next";
      this.arg = undefined;

      this.tryEntries.forEach(resetTryEntry);

      if (!skipTempReset) {
        for (var name in this) {
          // Not sure about the optimal order of these conditions:
          if (name.charAt(0) === "t" &&
              hasOwn.call(this, name) &&
              !isNaN(+name.slice(1))) {
            this[name] = undefined;
          }
        }
      }
    },

    stop: function() {
      this.done = true;

      var rootEntry = this.tryEntries[0];
      var rootRecord = rootEntry.completion;
      if (rootRecord.type === "throw") {
        throw rootRecord.arg;
      }

      return this.rval;
    },

    dispatchException: function(exception) {
      if (this.done) {
        throw exception;
      }

      var context = this;
      function handle(loc, caught) {
        record.type = "throw";
        record.arg = exception;
        context.next = loc;

        if (caught) {
          // If the dispatched exception was caught by a catch block,
          // then let that catch block handle the exception normally.
          context.method = "next";
          context.arg = undefined;
        }

        return !! caught;
      }

      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        var record = entry.completion;

        if (entry.tryLoc === "root") {
          // Exception thrown outside of any try block that could handle
          // it, so set the completion value of the entire function to
          // throw the exception.
          return handle("end");
        }

        if (entry.tryLoc <= this.prev) {
          var hasCatch = hasOwn.call(entry, "catchLoc");
          var hasFinally = hasOwn.call(entry, "finallyLoc");

          if (hasCatch && hasFinally) {
            if (this.prev < entry.catchLoc) {
              return handle(entry.catchLoc, true);
            } else if (this.prev < entry.finallyLoc) {
              return handle(entry.finallyLoc);
            }

          } else if (hasCatch) {
            if (this.prev < entry.catchLoc) {
              return handle(entry.catchLoc, true);
            }

          } else if (hasFinally) {
            if (this.prev < entry.finallyLoc) {
              return handle(entry.finallyLoc);
            }

          } else {
            throw new Error("try statement without catch or finally");
          }
        }
      }
    },

    abrupt: function(type, arg) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.tryLoc <= this.prev &&
            hasOwn.call(entry, "finallyLoc") &&
            this.prev < entry.finallyLoc) {
          var finallyEntry = entry;
          break;
        }
      }

      if (finallyEntry &&
          (type === "break" ||
           type === "continue") &&
          finallyEntry.tryLoc <= arg &&
          arg <= finallyEntry.finallyLoc) {
        // Ignore the finally entry if control is not jumping to a
        // location outside the try/catch block.
        finallyEntry = null;
      }

      var record = finallyEntry ? finallyEntry.completion : {};
      record.type = type;
      record.arg = arg;

      if (finallyEntry) {
        this.method = "next";
        this.next = finallyEntry.finallyLoc;
        return ContinueSentinel;
      }

      return this.complete(record);
    },

    complete: function(record, afterLoc) {
      if (record.type === "throw") {
        throw record.arg;
      }

      if (record.type === "break" ||
          record.type === "continue") {
        this.next = record.arg;
      } else if (record.type === "return") {
        this.rval = this.arg = record.arg;
        this.method = "return";
        this.next = "end";
      } else if (record.type === "normal" && afterLoc) {
        this.next = afterLoc;
      }

      return ContinueSentinel;
    },

    finish: function(finallyLoc) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.finallyLoc === finallyLoc) {
          this.complete(entry.completion, entry.afterLoc);
          resetTryEntry(entry);
          return ContinueSentinel;
        }
      }
    },

    "catch": function(tryLoc) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.tryLoc === tryLoc) {
          var record = entry.completion;
          if (record.type === "throw") {
            var thrown = record.arg;
            resetTryEntry(entry);
          }
          return thrown;
        }
      }

      // The context.catch method must only be called with a location
      // argument that corresponds to a known catch block.
      throw new Error("illegal catch attempt");
    },

    delegateYield: function(iterable, resultName, nextLoc) {
      this.delegate = {
        iterator: values(iterable),
        resultName: resultName,
        nextLoc: nextLoc
      };

      if (this.method === "next") {
        // Deliberately forget the last sent value so that we don't
        // accidentally pass it on to the delegate.
        this.arg = undefined;
      }

      return ContinueSentinel;
    }
  };

  // Regardless of whether this script is executing as a CommonJS module
  // or not, return the runtime object so that we can declare the variable
  // regeneratorRuntime in the outer scope, which allows this module to be
  // injected easily by `bin/regenerator --include-runtime script.js`.
  return exports;

}(
  // If this script is executing as a CommonJS module, use module.exports
  // as the regeneratorRuntime namespace. Otherwise create a new empty
  // object. Either way, the resulting object will be used to initialize
  // the regeneratorRuntime variable at the top of this file.
   true ? module.exports : 0
));

try {
  regeneratorRuntime = runtime;
} catch (accidentalStrictMode) {
  // This module should not be running in strict mode, so the above
  // assignment should always work unless something is misconfigured. Just
  // in case runtime.js accidentally runs in strict mode, in modern engines
  // we can explicitly access globalThis. In older engines we can escape
  // strict mode using a global Function call. This could conceivably fail
  // if a Content Security Policy forbids using Function, but in that case
  // the proper solution is to fix the accidental strict mode problem. If
  // you've misconfigured your bundler to force strict mode and applied a
  // CSP to forbid Function, and you're not willing to fix either of those
  // problems, please detail your unique predicament in a GitHub issue.
  if (typeof globalThis === "object") {
    globalThis.regeneratorRuntime = runtime;
  } else {
    Function("r", "regeneratorRuntime = r")(runtime);
  }
}


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
/*!*******************************************!*\
  !*** ./resources/js/ckeditor-document.js ***!
  \*******************************************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "./node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _get(){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get;}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(arguments.length<3?target:receiver);}return desc.value;};}return _get.apply(this,arguments);}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break;}return object;}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"]!=null)_i["return"]();}finally{if(_d)throw _e;}}return _arr;}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e405){throw _e405;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e406){didErr=true;err=_e406;},f:function f(){try{if(!normalCompletion&&it["return"]!=null)it["return"]();}finally{if(didErr)throw err;}}};}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map():undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function");}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper);}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor);}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class);};return _wrapNativeSuper(Class);}function _construct(Parent,args,Class){if(_isNativeReflectConstruct()){_construct=Reflect.construct;}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor();if(Class)_setPrototypeOf(instance,Class.prototype);return instance;};}return _construct.apply(null,arguments);}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1;}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}/******/(function(){// webpackBootstrap
/******/var __webpack_modules__={/***/"./node_modules/@ckeditor/ckeditor5-build-decoupled-document/build/ckeditor.js":/*!*************************************************************************************!*\
  !*** ./node_modules/@ckeditor/ckeditor5-build-decoupled-document/build/ckeditor.js ***!
  \*************************************************************************************/ /***/function node_modulesCkeditorCkeditor5BuildDecoupledDocumentBuildCkeditorJs(module,exports){/*!
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */!function(e){var t=e.en=e.en||{};t.dictionary=Object.assign(t.dictionary||{},{"%0 of %1":"%0 of %1","Align center":"Align center","Align left":"Align left","Align right":"Align right",Aquamarine:"Aquamarine",Big:"Big",Black:"Black","Block quote":"Block quote",Blue:"Blue",Bold:"Bold","Break text":"Break text","Bulleted List":"Bulleted List","Bulleted list styles toolbar":"Bulleted list styles toolbar",Cancel:"Cancel","Cannot upload file:":"Cannot upload file:","Centered image":"Centered image","Change image text alternative":"Change image text alternative","Choose heading":"Choose heading",Circle:"Circle",Column:"Column","Could not insert image at the current position.":"Could not insert image at the current position.","Could not obtain resized image URL.":"Could not obtain resized image URL.",Decimal:"Decimal","Decimal with leading zero":"Decimal with leading zero","Decrease indent":"Decrease indent",Default:"Default","Delete column":"Delete column","Delete row":"Delete row","Dim grey":"Dim grey",Disc:"Disc","Document colors":"Document colors",Downloadable:"Downloadable","Dropdown toolbar":"Dropdown toolbar","Edit block":"Edit block","Edit link":"Edit link","Editor toolbar":"Editor toolbar","Enter image caption":"Enter image caption","Font Background Color":"Font Background Color","Font Color":"Font Color","Font Family":"Font Family","Font Size":"Font Size","Full size image":"Full size image",Green:"Green",Grey:"Grey","Header column":"Header column","Header row":"Header row",Heading:"Heading","Heading 1":"Heading 1","Heading 2":"Heading 2","Heading 3":"Heading 3","Heading 4":"Heading 4","Heading 5":"Heading 5","Heading 6":"Heading 6",Huge:"Huge","Image resize list":"Image resize list","Image toolbar":"Image toolbar","image widget":"image widget","In line":"In line","Increase indent":"Increase indent","Insert column left":"Insert column left","Insert column right":"Insert column right","Insert image":"Insert image","Insert image or file":"Insert image or file","Insert media":"Insert media","Insert paragraph after block":"Insert paragraph after block","Insert paragraph before block":"Insert paragraph before block","Insert row above":"Insert row above","Insert row below":"Insert row below","Insert table":"Insert table","Inserting image failed":"Inserting image failed",Italic:"Italic",Justify:"Justify","Left aligned image":"Left aligned image","Light blue":"Light blue","Light green":"Light green","Light grey":"Light grey",Link:"Link","Link URL":"Link URL","Lower-latin":"Lower-latin","Lower–roman":"Lower–roman","Media URL":"Media URL","media widget":"media widget","Merge cell down":"Merge cell down","Merge cell left":"Merge cell left","Merge cell right":"Merge cell right","Merge cell up":"Merge cell up","Merge cells":"Merge cells",Next:"Next","Numbered List":"Numbered List","Numbered list styles toolbar":"Numbered list styles toolbar","Open in a new tab":"Open in a new tab","Open link in new tab":"Open link in new tab",Orange:"Orange",Original:"Original",Paragraph:"Paragraph","Paste the media URL in the input.":"Paste the media URL in the input.",Previous:"Previous",Purple:"Purple",Red:"Red",Redo:"Redo","Remove color":"Remove color","Resize image":"Resize image","Resize image to %0":"Resize image to %0","Resize image to the original size":"Resize image to the original size","Rich Text Editor":"Rich Text Editor","Rich Text Editor, %0":"Rich Text Editor, %0","Right aligned image":"Right aligned image",Row:"Row",Save:"Save","Select all":"Select all","Select column":"Select column","Select row":"Select row","Selecting resized image failed":"Selecting resized image failed","Show more items":"Show more items","Side image":"Side image",Small:"Small","Split cell horizontally":"Split cell horizontally","Split cell vertically":"Split cell vertically",Square:"Square",Strikethrough:"Strikethrough","Table toolbar":"Table toolbar","Text alignment":"Text alignment","Text alignment toolbar":"Text alignment toolbar","Text alternative":"Text alternative","The URL must not be empty.":"The URL must not be empty.","This link has no URL":"This link has no URL","This media URL is not supported.":"This media URL is not supported.",Tiny:"Tiny","Tip: Paste the URL into the content to embed faster.":"Tip: Paste the URL into the content to embed faster.","Toggle caption off":"Toggle caption off","Toggle caption on":"Toggle caption on","Toggle the circle list style":"Toggle the circle list style","Toggle the decimal list style":"Toggle the decimal list style","Toggle the decimal with leading zero list style":"Toggle the decimal with leading zero list style","Toggle the disc list style":"Toggle the disc list style","Toggle the lower–latin list style":"Toggle the lower–latin list style","Toggle the lower–roman list style":"Toggle the lower–roman list style","Toggle the square list style":"Toggle the square list style","Toggle the upper–latin list style":"Toggle the upper–latin list style","Toggle the upper–roman list style":"Toggle the upper–roman list style",Turquoise:"Turquoise",Underline:"Underline",Undo:"Undo",Unlink:"Unlink","Upload failed":"Upload failed","Upload in progress":"Upload in progress","Upper-latin":"Upper-latin","Upper-roman":"Upper-roman",White:"White","Widget toolbar":"Widget toolbar","Wrap text":"Wrap text",Yellow:"Yellow"});}(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})),function(e,t){ true?module.exports=t():0;}(window,function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports;}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n});},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0});},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==_typeof(e)&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e){i.d(n,o,function(t){return e[t];}.bind(null,o));}return n;},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"];}:function(){return e;};return i.d(t,"a",t),t;},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t);},i.p="",i(i.s=114);}([function(e,t,i){"use strict";i.d(t,"a",function(){return n;}),i.d(t,"b",function(){return o;});var n=/*#__PURE__*/function(_Error){_inherits(n,_Error);var _super=_createSuper(n);function n(e,t,i){var _this;_classCallCheck(this,n);_this=_super.call(this,"".concat(e).concat(i?" "+JSON.stringify(i):"").concat(r(e))),_this.name="CKEditorError",_this.context=t,_this.data=i;return _this;}_createClass(n,[{key:"is",value:function is(e){return"CKEditorError"===e;}}],[{key:"rethrowUnexpectedError",value:function rethrowUnexpectedError(e,t){if(e.is&&e.is("CKEditorError"))throw e;var i=new n(e.message,t);throw i.stack=e.stack,i;}}]);return n;}(/*#__PURE__*/_wrapNativeSuper(Error));function o(e,t){var _console;(_console=console).warn.apply(_console,_toConsumableArray(s(e,t)));}function r(e){return"\nRead more: https://ckeditor.com/docs/ckeditor5/latest/framework/guides/support/error-codes.html#error-"+e;}function s(e,t){var i=r(e);return t?[e,t,i]:[e,i];}},function(e,t,i){"use strict";var n,o=function o(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n;},r=function(){var e={};return function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head;}catch(e){i=null;}e[t]=i;}return e[t];};}(),s=[];function a(e){for(var t=-1,i=0;i<s.length;i++){if(s[i].identifier===e){t=i;break;}}return t;}function l(e,t){for(var i={},n=[],o=0;o<e.length;o++){var r=e[o],l=t.base?r[0]+t.base:r[0],c=i[l]||0,d="".concat(l," ").concat(c);i[l]=c+1;var u=a(d),h={css:r[1],media:r[2],sourceMap:r[3]};-1!==u?(s[u].references++,s[u].updater(h)):s.push({identifier:d,updater:p(h,t),references:1}),n.push(d);}return n;}function c(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var o=i.nc;o&&(n.nonce=o);}if(Object.keys(n).forEach(function(e){t.setAttribute(e,n[e]);}),"function"==typeof e.insert)e.insert(t);else{var s=r(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t);}return t;}var d,u=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n");});function h(e,t,i,n){var o=i?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=u(t,o);else{var r=document.createTextNode(o),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(r,s[t]):e.appendChild(r);}}function g(e,t,i){var n=i.css,o=i.media,r=i.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;){e.removeChild(e.firstChild);}e.appendChild(document.createTextNode(n));}}var m=null,f=0;function p(e,t){var i,n,o;if(t.singleton){var r=f++;i=m||(m=c(t)),n=h.bind(null,i,r,!1),o=h.bind(null,i,r,!0);}else i=c(t),n=g.bind(null,i,t),o=function o(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);}(i);};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t);}else o();};}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=o());var i=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<i.length;n++){var o=a(i[n]);s[o].references--;}for(var r=l(e,t),c=0;c<i.length;c++){var d=a(i[c]);0===s[d].references&&(s[d].updater(),s.splice(d,1));}i=r;}};};},,function(e,t,i){"use strict";var n=i(8),o="object"==(typeof self==="undefined"?"undefined":_typeof(self))&&self&&self.Object===Object&&self,r=n.a||o||Function("return this")();t.a=r;},function(e,t,i){"use strict";(function(e){var n=i(3),o=i(14),r= true&&exports&&!exports.nodeType&&exports,s=r&&"object"==_typeof(e)&&e&&!e.nodeType&&e,a=s&&s.exports===r?n.a.Buffer:void 0,l=(a?a.isBuffer:void 0)||o.a;t.a=l;}).call(this,i(10)(e));},function(e,t,i){"use strict";(function(e){var n=i(8),o= true&&exports&&!exports.nodeType&&exports,r=o&&"object"==_typeof(e)&&e&&!e.nodeType&&e,s=r&&r.exports===o&&n.a.process,a=function(){try{var e=r&&r.require&&r.require("util").types;return e||s&&s.binding&&s.binding("util");}catch(e){}}();t.a=a;}).call(this,i(10)(e));},function(e,t,i){"use strict";(function(e){var t=i(0);var n="object"==(typeof window==="undefined"?"undefined":_typeof(window))?window:e;if(n.CKEDITOR_VERSION)throw new t.a("ckeditor-duplicated-modules",null);n.CKEDITOR_VERSION="29.2.0";}).call(this,i(12));},function(e,t,i){var n=i(1),o=i(78);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t,i){"use strict";(function(e){var i="object"==_typeof(e)&&e&&e.Object===Object&&e;t.a=i;}).call(this,i(12));},function(e,t,i){"use strict";(function(e){var n=i(3),o= true&&exports&&!exports.nodeType&&exports,r=o&&"object"==_typeof(e)&&e&&!e.nodeType&&e,s=r&&r.exports===o?n.a.Buffer:void 0,a=s?s.allocUnsafe:void 0;t.a=function(e,t){if(t)return e.slice();var i=e.length,n=a?a(i):new e.constructor(i);return e.copy(n),n;};}).call(this,i(10)(e));},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function get(){return t.l;}}),Object.defineProperty(t,"id",{enumerable:!0,get:function get(){return t.i;}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1;}return t;};},function(e,t,i){var n=i(1),o=i(79);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){var i;i=function(){return this;}();try{i=i||new Function("return this")();}catch(e){"object"==(typeof window==="undefined"?"undefined":_typeof(window))&&(i=window);}e.exports=i;},function(e,t,i){var n=i(1),o=i(73);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t,i){"use strict";t.a=function(){return!1;};},function(e,t,i){var n=i(1),o=i(16);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck-hidden{display:none!important}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all *{box-sizing:border-box;width:auto;height:auto;position:static}:root{--ck-z-default:1;--ck-z-modal:calc(var(--ck-z-default) + 999)}.ck-transitions-disabled,.ck-transitions-disabled *{transition:none!important}:root{--ck-color-base-foreground:#fafafa;--ck-color-base-background:#fff;--ck-color-base-border:#c4c4c4;--ck-color-base-action:#61b045;--ck-color-base-focus:#6cb5f9;--ck-color-base-text:#333;--ck-color-base-active:#198cf0;--ck-color-base-active-focus:#0e7fe1;--ck-color-base-error:#db3700;--ck-color-focus-border-coordinates:208,79%,51%;--ck-color-focus-border:hsl(var(--ck-color-focus-border-coordinates));--ck-color-focus-outer-shadow:#bcdefb;--ck-color-focus-disabled-shadow:rgba(119,186,248,0.3);--ck-color-focus-error-shadow:rgba(255,64,31,0.3);--ck-color-text:var(--ck-color-base-text);--ck-color-shadow-drop:rgba(0,0,0,0.15);--ck-color-shadow-drop-active:rgba(0,0,0,0.2);--ck-color-shadow-inner:rgba(0,0,0,0.1);--ck-color-button-default-background:transparent;--ck-color-button-default-hover-background:#e6e6e6;--ck-color-button-default-active-background:#d9d9d9;--ck-color-button-default-active-shadow:#bfbfbf;--ck-color-button-default-disabled-background:transparent;--ck-color-button-on-background:#dedede;--ck-color-button-on-hover-background:#c4c4c4;--ck-color-button-on-active-background:#bababa;--ck-color-button-on-active-shadow:#a1a1a1;--ck-color-button-on-disabled-background:#dedede;--ck-color-button-action-background:var(--ck-color-base-action);--ck-color-button-action-hover-background:#579e3d;--ck-color-button-action-active-background:#53973b;--ck-color-button-action-active-shadow:#498433;--ck-color-button-action-disabled-background:#7ec365;--ck-color-button-action-text:var(--ck-color-base-background);--ck-color-button-save:#008a00;--ck-color-button-cancel:#db3700;--ck-color-switch-button-off-background:#b0b0b0;--ck-color-switch-button-off-hover-background:#a3a3a3;--ck-color-switch-button-on-background:var(--ck-color-button-action-background);--ck-color-switch-button-on-hover-background:#579e3d;--ck-color-switch-button-inner-background:var(--ck-color-base-background);--ck-color-switch-button-inner-shadow:rgba(0,0,0,0.1);--ck-color-dropdown-panel-background:var(--ck-color-base-background);--ck-color-dropdown-panel-border:var(--ck-color-base-border);--ck-color-input-background:var(--ck-color-base-background);--ck-color-input-border:#c7c7c7;--ck-color-input-error-border:var(--ck-color-base-error);--ck-color-input-text:var(--ck-color-base-text);--ck-color-input-disabled-background:#f2f2f2;--ck-color-input-disabled-border:#c7c7c7;--ck-color-input-disabled-text:#757575;--ck-color-list-background:var(--ck-color-base-background);--ck-color-list-button-hover-background:var(--ck-color-button-default-hover-background);--ck-color-list-button-on-background:var(--ck-color-base-active);--ck-color-list-button-on-background-focus:var(--ck-color-base-active-focus);--ck-color-list-button-on-text:var(--ck-color-base-background);--ck-color-panel-background:var(--ck-color-base-background);--ck-color-panel-border:var(--ck-color-base-border);--ck-color-toolbar-background:var(--ck-color-base-foreground);--ck-color-toolbar-border:var(--ck-color-base-border);--ck-color-tooltip-background:var(--ck-color-base-text);--ck-color-tooltip-text:var(--ck-color-base-background);--ck-color-engine-placeholder-text:#707070;--ck-color-upload-bar-background:#6cb5f9;--ck-color-link-default:#0000f0;--ck-color-link-selected-background:rgba(31,177,255,0.1);--ck-color-link-fake-selection:rgba(31,177,255,0.3);--ck-disabled-opacity:.5;--ck-focus-outer-shadow-geometry:0 0 0 3px;--ck-focus-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-outer-shadow);--ck-focus-disabled-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-disabled-shadow);--ck-focus-error-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-error-shadow);--ck-focus-ring:1px solid var(--ck-color-focus-border);--ck-font-size-base:13px;--ck-line-height-base:1.84615;--ck-font-face:Helvetica,Arial,Tahoma,Verdana,Sans-Serif;--ck-font-size-tiny:0.7em;--ck-font-size-small:0.75em;--ck-font-size-normal:1em;--ck-font-size-big:1.4em;--ck-font-size-large:1.8em;--ck-ui-component-min-height:2.3em}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all *{margin:0;padding:0;border:0;background:transparent;text-decoration:none;vertical-align:middle;transition:none;word-wrap:break-word}.ck.ck-reset_all,.ck.ck-reset_all *{border-collapse:collapse;font:normal normal normal var(--ck-font-size-base)/var(--ck-line-height-base) var(--ck-font-face);color:var(--ck-color-text);text-align:left;white-space:nowrap;cursor:auto;float:none}.ck.ck-reset_all .ck-rtl *{text-align:right}.ck.ck-reset_all iframe{vertical-align:inherit}.ck.ck-reset_all textarea{white-space:pre-wrap}.ck.ck-reset_all input[type=password],.ck.ck-reset_all input[type=text],.ck.ck-reset_all textarea{cursor:text}.ck.ck-reset_all input[type=password][disabled],.ck.ck-reset_all input[type=text][disabled],.ck.ck-reset_all textarea[disabled]{cursor:default}.ck.ck-reset_all fieldset{padding:10px;border:2px groove #dfdee3}.ck.ck-reset_all button::-moz-focus-inner{padding:0;border:0}.ck[dir=rtl],.ck[dir=rtl] .ck{text-align:right}:root{--ck-border-radius:2px;--ck-inner-shadow:2px 2px 3px var(--ck-color-shadow-inner) inset;--ck-drop-shadow:0 1px 2px 1px var(--ck-color-shadow-drop);--ck-drop-shadow-active:0 3px 6px 1px var(--ck-color-shadow-drop-active);--ck-spacing-unit:0.6em;--ck-spacing-large:calc(var(--ck-spacing-unit)*1.5);--ck-spacing-standard:var(--ck-spacing-unit);--ck-spacing-medium:calc(var(--ck-spacing-unit)*0.8);--ck-spacing-small:calc(var(--ck-spacing-unit)*0.5);--ck-spacing-tiny:calc(var(--ck-spacing-unit)*0.3);--ck-spacing-extra-tiny:calc(var(--ck-spacing-unit)*0.16)}";},function(e,t,i){var n=i(1),o=i(18);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck.ck-icon{vertical-align:middle}:root{--ck-icon-size:calc(var(--ck-line-height-base)*var(--ck-font-size-normal))}.ck.ck-icon{width:var(--ck-icon-size);height:var(--ck-icon-size);font-size:.8333350694em;will-change:transform}.ck.ck-icon,.ck.ck-icon *{color:inherit;cursor:inherit}.ck.ck-icon :not([fill]){fill:currentColor}";},function(e,t,i){var n=i(1),o=i(20);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports='.ck.ck-tooltip,.ck.ck-tooltip .ck-tooltip__text:after{position:absolute;pointer-events:none;-webkit-backface-visibility:hidden}.ck.ck-tooltip{visibility:hidden;opacity:0;display:none;z-index:var(--ck-z-modal)}.ck.ck-tooltip .ck-tooltip__text{display:inline-block}.ck.ck-tooltip .ck-tooltip__text:after{content:"";width:0;height:0}:root{--ck-tooltip-arrow-size:5px}.ck.ck-tooltip{left:50%;top:0;transition:opacity .2s ease-in-out .2s}.ck.ck-tooltip .ck-tooltip__text{border-radius:0}.ck-rounded-corners .ck.ck-tooltip .ck-tooltip__text,.ck.ck-tooltip .ck-tooltip__text.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-tooltip .ck-tooltip__text{font-size:.9em;line-height:1.5;color:var(--ck-color-tooltip-text);padding:var(--ck-spacing-small) var(--ck-spacing-medium);background:var(--ck-color-tooltip-background);position:relative;left:-50%}.ck.ck-tooltip .ck-tooltip__text:after{transition:opacity .2s ease-in-out .2s;border-style:solid;left:50%}.ck.ck-tooltip.ck-tooltip_s,.ck.ck-tooltip.ck-tooltip_se,.ck.ck-tooltip.ck-tooltip_sw{bottom:calc(var(--ck-tooltip-arrow-size)*-1);transform:translateY(100%)}.ck.ck-tooltip.ck-tooltip_s .ck-tooltip__text:after,.ck.ck-tooltip.ck-tooltip_se .ck-tooltip__text:after,.ck.ck-tooltip.ck-tooltip_sw .ck-tooltip__text:after{top:calc(var(--ck-tooltip-arrow-size)*-1 + 1px);transform:translateX(-50%);border-left-color:transparent;border-bottom-color:var(--ck-color-tooltip-background);border-right-color:transparent;border-top-color:transparent;border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:var(--ck-tooltip-arrow-size);border-right-width:var(--ck-tooltip-arrow-size);border-top-width:0}.ck.ck-tooltip.ck-tooltip_sw{right:50%;left:auto}.ck.ck-tooltip.ck-tooltip_sw .ck-tooltip__text{left:auto;right:calc(var(--ck-tooltip-arrow-size)*-2)}.ck.ck-tooltip.ck-tooltip_sw .ck-tooltip__text:after{left:auto;right:0}.ck.ck-tooltip.ck-tooltip_se{left:50%;right:auto}.ck.ck-tooltip.ck-tooltip_se .ck-tooltip__text{right:auto;left:calc(var(--ck-tooltip-arrow-size)*-2)}.ck.ck-tooltip.ck-tooltip_se .ck-tooltip__text:after{right:auto;left:0;transform:translateX(50%)}.ck.ck-tooltip.ck-tooltip_n{top:calc(var(--ck-tooltip-arrow-size)*-1);transform:translateY(-100%)}.ck.ck-tooltip.ck-tooltip_n .ck-tooltip__text:after{bottom:calc(var(--ck-tooltip-arrow-size)*-1);transform:translateX(-50%);border-left-color:transparent;border-bottom-color:transparent;border-right-color:transparent;border-top-color:var(--ck-color-tooltip-background);border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:0;border-right-width:var(--ck-tooltip-arrow-size);border-top-width:var(--ck-tooltip-arrow-size)}.ck.ck-tooltip.ck-tooltip_e{left:calc(100% + var(--ck-tooltip-arrow-size));top:50%}.ck.ck-tooltip.ck-tooltip_e .ck-tooltip__text{left:0;transform:translateY(-50%)}.ck.ck-tooltip.ck-tooltip_e .ck-tooltip__text:after{left:calc(var(--ck-tooltip-arrow-size)*-1);top:calc(50% - var(--ck-tooltip-arrow-size)*1);border-left-color:transparent;border-bottom-color:transparent;border-right-color:var(--ck-color-tooltip-background);border-top-color:transparent;border-left-width:0;border-bottom-width:var(--ck-tooltip-arrow-size);border-right-width:var(--ck-tooltip-arrow-size);border-top-width:var(--ck-tooltip-arrow-size)}.ck.ck-tooltip.ck-tooltip_w{right:calc(100% + var(--ck-tooltip-arrow-size));left:auto;top:50%}.ck.ck-tooltip.ck-tooltip_w .ck-tooltip__text{left:0;transform:translateY(-50%)}.ck.ck-tooltip.ck-tooltip_w .ck-tooltip__text:after{left:100%;top:calc(50% - var(--ck-tooltip-arrow-size)*1);border-left-color:var(--ck-color-tooltip-background);border-bottom-color:transparent;border-right-color:transparent;border-top-color:transparent;border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:var(--ck-tooltip-arrow-size);border-right-width:0;border-top-width:var(--ck-tooltip-arrow-size)}';},function(e,t,i){var n=i(1),o=i(22);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck.ck-button,a.ck.ck-button{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ck.ck-button .ck-tooltip,a.ck.ck-button .ck-tooltip{display:block}@media (hover:none){.ck.ck-button .ck-tooltip,a.ck.ck-button .ck-tooltip{display:none}}.ck.ck-button,a.ck.ck-button{position:relative;display:inline-flex;align-items:center;justify-content:left}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{display:none}.ck.ck-button.ck-button_with-text .ck-button__label,a.ck.ck-button.ck-button_with-text .ck-button__label{display:inline-block}.ck.ck-button:not(.ck-button_with-text),a.ck.ck-button:not(.ck-button_with-text){justify-content:center}.ck.ck-button:hover .ck-tooltip,a.ck.ck-button:hover .ck-tooltip{visibility:visible;opacity:1}.ck.ck-button:focus:not(:hover) .ck-tooltip,a.ck.ck-button:focus:not(:hover) .ck-tooltip{display:none}.ck.ck-button,a.ck.ck-button{background:var(--ck-color-button-default-background)}.ck.ck-button:not(.ck-disabled):hover,a.ck.ck-button:not(.ck-disabled):hover{background:var(--ck-color-button-default-hover-background)}.ck.ck-button:not(.ck-disabled):active,a.ck.ck-button:not(.ck-disabled):active{background:var(--ck-color-button-default-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-default-active-shadow)}.ck.ck-button.ck-disabled,a.ck.ck-button.ck-disabled{background:var(--ck-color-button-default-disabled-background)}.ck.ck-button,a.ck.ck-button{border-radius:0}.ck-rounded-corners .ck.ck-button,.ck-rounded-corners a.ck.ck-button,.ck.ck-button.ck-rounded-corners,a.ck.ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-button,a.ck.ck-button{white-space:nowrap;cursor:default;vertical-align:middle;padding:var(--ck-spacing-tiny);text-align:center;min-width:var(--ck-ui-component-min-height);min-height:var(--ck-ui-component-min-height);line-height:1;font-size:inherit;border:1px solid transparent;transition:box-shadow .2s ease-in-out,border .2s ease-in-out;-webkit-appearance:none}.ck.ck-button:active,.ck.ck-button:focus,a.ck.ck-button:active,a.ck.ck-button:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-button .ck-button__icon use,.ck.ck-button .ck-button__icon use *,a.ck.ck-button .ck-button__icon use,a.ck.ck-button .ck-button__icon use *{color:inherit}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{font-size:inherit;font-weight:inherit;color:inherit;cursor:inherit;vertical-align:middle}[dir=ltr] .ck.ck-button .ck-button__label,[dir=ltr] a.ck.ck-button .ck-button__label{text-align:left}[dir=rtl] .ck.ck-button .ck-button__label,[dir=rtl] a.ck.ck-button .ck-button__label{text-align:right}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{color:inherit}[dir=ltr] .ck.ck-button .ck-button__keystroke,[dir=ltr] a.ck.ck-button .ck-button__keystroke{margin-left:var(--ck-spacing-large)}[dir=rtl] .ck.ck-button .ck-button__keystroke,[dir=rtl] a.ck.ck-button .ck-button__keystroke{margin-right:var(--ck-spacing-large)}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{font-weight:700;opacity:.7}.ck.ck-button.ck-disabled:active,.ck.ck-button.ck-disabled:focus,a.ck.ck-button.ck-disabled:active,a.ck.ck-button.ck-disabled:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-button.ck-disabled .ck-button__icon,a.ck.ck-button.ck-disabled .ck-button__icon{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__label,a.ck.ck-button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__keystroke,a.ck.ck-button.ck-disabled .ck-button__keystroke{opacity:.3}.ck.ck-button.ck-button_with-text,a.ck.ck-button.ck-button_with-text{padding:var(--ck-spacing-tiny) var(--ck-spacing-standard)}[dir=ltr] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=ltr] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-left:calc(var(--ck-spacing-small)*-1);margin-right:var(--ck-spacing-small)}[dir=rtl] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=rtl] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-right:calc(var(--ck-spacing-small)*-1);margin-left:var(--ck-spacing-small)}.ck.ck-button.ck-button_with-keystroke .ck-button__label,a.ck.ck-button.ck-button_with-keystroke .ck-button__label{flex-grow:1}.ck.ck-button.ck-on,a.ck.ck-button.ck-on{background:var(--ck-color-button-on-background)}.ck.ck-button.ck-on:not(.ck-disabled):hover,a.ck.ck-button.ck-on:not(.ck-disabled):hover{background:var(--ck-color-button-on-hover-background)}.ck.ck-button.ck-on:not(.ck-disabled):active,a.ck.ck-button.ck-on:not(.ck-disabled):active{background:var(--ck-color-button-on-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-on-active-shadow)}.ck.ck-button.ck-on.ck-disabled,a.ck.ck-button.ck-on.ck-disabled{background:var(--ck-color-button-on-disabled-background)}.ck.ck-button.ck-button-save,a.ck.ck-button.ck-button-save{color:var(--ck-color-button-save)}.ck.ck-button.ck-button-cancel,a.ck.ck-button.ck-button-cancel{color:var(--ck-color-button-cancel)}.ck.ck-button-action,a.ck.ck-button-action{background:var(--ck-color-button-action-background)}.ck.ck-button-action:not(.ck-disabled):hover,a.ck.ck-button-action:not(.ck-disabled):hover{background:var(--ck-color-button-action-hover-background)}.ck.ck-button-action:not(.ck-disabled):active,a.ck.ck-button-action:not(.ck-disabled):active{background:var(--ck-color-button-action-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-action-active-shadow)}.ck.ck-button-action.ck-disabled,a.ck.ck-button-action.ck-disabled{background:var(--ck-color-button-action-disabled-background)}.ck.ck-button-action,a.ck.ck-button-action{color:var(--ck-color-button-action-text)}.ck.ck-button-bold,a.ck.ck-button-bold{font-weight:700}";},function(e,t,i){var n=i(1),o=i(24);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{display:block}:root{--ck-switch-button-toggle-width:2.6153846154em;--ck-switch-button-toggle-inner-size:1.0769230769em;--ck-switch-button-toggle-spacing:1px;--ck-switch-button-translation:calc(var(--ck-switch-button-toggle-width) - var(--ck-switch-button-toggle-inner-size) - var(--ck-switch-button-toggle-spacing)*2)}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__label{margin-right:calc(var(--ck-spacing-large)*2)}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__label{margin-left:calc(var(--ck-spacing-large)*2)}.ck.ck-button.ck-switchbutton .ck-button__toggle{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle.ck-rounded-corners{border-radius:var(--ck-border-radius)}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-left:auto}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-right:auto}.ck.ck-button.ck-switchbutton .ck-button__toggle{transition:background .4s ease;width:var(--ck-switch-button-toggle-width);background:var(--ck-color-switch-button-off-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:calc(var(--ck-border-radius)*0.5)}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{margin:var(--ck-switch-button-toggle-spacing);width:var(--ck-switch-button-toggle-inner-size);height:var(--ck-switch-button-toggle-inner-size);background:var(--ck-color-switch-button-inner-background);transition:all .3s ease}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover{background:var(--ck-color-switch-button-off-hover-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover .ck-button__toggle__inner{box-shadow:0 0 0 5px var(--ck-color-switch-button-inner-shadow)}.ck.ck-button.ck-switchbutton.ck-disabled .ck-button__toggle{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle{background:var(--ck-color-switch-button-on-background)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle:hover{background:var(--ck-color-switch-button-on-hover-background)}[dir=ltr] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(var(--ck-switch-button-translation))}[dir=rtl] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(calc(var(--ck-switch-button-translation)*-1))}";},function(e,t,i){var n=i(1),o=i(26);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck.ck-color-grid{display:grid}:root{--ck-color-grid-tile-size:24px;--ck-color-color-grid-check-icon:#000}.ck.ck-color-grid{grid-gap:5px;padding:8px}.ck.ck-color-grid__tile{width:var(--ck-color-grid-tile-size);height:var(--ck-color-grid-tile-size);min-width:var(--ck-color-grid-tile-size);min-height:var(--ck-color-grid-tile-size);padding:0;transition:box-shadow .2s ease;border:0}.ck.ck-color-grid__tile.ck-disabled{cursor:unset;transition:unset}.ck.ck-color-grid__tile.ck-color-table__color-tile_bordered{box-shadow:0 0 0 1px var(--ck-color-base-border)}.ck.ck-color-grid__tile .ck.ck-icon{display:none;color:var(--ck-color-color-grid-check-icon)}.ck.ck-color-grid__tile.ck-on{box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-base-text)}.ck.ck-color-grid__tile.ck-on .ck.ck-icon{display:block}.ck.ck-color-grid__tile.ck-on,.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){border:0}.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-focus-border)}.ck.ck-color-grid__label{padding:0 var(--ck-spacing-standard)}";},function(e,t,i){var n=i(1),o=i(28);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports='.ck.ck-splitbutton{font-size:inherit}.ck.ck-splitbutton .ck-splitbutton__action:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-button .ck-tooltip{display:none}:root{--ck-color-split-button-hover-background:#ebebeb;--ck-color-split-button-hover-border:#b3b3b3}[dir=ltr] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,[dir=ltr] .ck.ck-splitbutton:hover>.ck-splitbutton__action{border-top-right-radius:unset;border-bottom-right-radius:unset}[dir=rtl] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,[dir=rtl] .ck.ck-splitbutton:hover>.ck-splitbutton__action{border-top-left-radius:unset;border-bottom-left-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow{min-width:unset}[dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-top-left-radius:unset;border-bottom-left-radius:unset}[dir=rtl] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-top-right-radius:unset;border-bottom-right-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow svg{width:var(--ck-dropdown-arrow-size)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover),.ck.ck-splitbutton:hover>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover){background:var(--ck-color-split-button-hover-background)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,.ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{content:"";position:absolute;width:1px;height:100%;background-color:var(--ck-color-split-button-hover-border)}[dir=ltr] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,[dir=ltr] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{left:-1px}[dir=rtl] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,[dir=rtl] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{right:-1px}.ck.ck-splitbutton.ck-splitbutton_open{border-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__action{border-bottom-left-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__arrow{border-bottom-right-radius:0}';},function(e,t,i){var n=i(1),o=i(30);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=":root{--ck-dropdown-max-width:75vw}.ck.ck-dropdown{display:inline-block;position:relative}.ck.ck-dropdown .ck-dropdown__arrow{pointer-events:none;z-index:var(--ck-z-default)}.ck.ck-dropdown .ck-button.ck-dropdown__button{width:100%}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on .ck-tooltip{display:none}.ck.ck-dropdown .ck-dropdown__panel{-webkit-backface-visibility:hidden;display:none;z-index:var(--ck-z-modal);max-width:var(--ck-dropdown-max-width);position:absolute}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel-visible{display:inline-block}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_n,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nmw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw{bottom:100%}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_s,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_smw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{top:100%;bottom:auto}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se{left:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{right:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_n,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_s{left:50%;transform:translateX(-50%)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nmw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_smw{left:75%;transform:translateX(-75%)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sme{left:25%;transform:translateX(-25%)}.ck.ck-toolbar .ck-dropdown__panel{z-index:calc(var(--ck-z-modal) + 1)}:root{--ck-dropdown-arrow-size:calc(var(--ck-icon-size)*0.5)}.ck.ck-dropdown{font-size:inherit}.ck.ck-dropdown .ck-dropdown__arrow{width:var(--ck-dropdown-arrow-size)}[dir=ltr] .ck.ck-dropdown .ck-dropdown__arrow{right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-dropdown .ck-dropdown__arrow{left:var(--ck-spacing-standard);margin-right:var(--ck-spacing-small)}.ck.ck-dropdown.ck-disabled .ck-dropdown__arrow{opacity:var(--ck-disabled-opacity)}[dir=ltr] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-right:var(--ck-spacing-small)}.ck.ck-dropdown .ck-button.ck-dropdown__button .ck-button__label{width:7em;overflow:hidden;text-overflow:ellipsis}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on{border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-dropdown__button_label-width_auto .ck-button__label{width:auto}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-off:active,.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on:active{box-shadow:none}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-off:active:focus,.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on:active:focus{box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-dropdown__panel{border-radius:0}.ck-rounded-corners .ck.ck-dropdown__panel,.ck.ck-dropdown__panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-dropdown__panel{box-shadow:var(--ck-drop-shadow),0 0;background:var(--ck-color-dropdown-panel-background);border:1px solid var(--ck-color-dropdown-panel-border);bottom:0;min-width:100%}.ck.ck-dropdown__panel.ck-dropdown__panel_se{border-top-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_sw{border-top-right-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_ne{border-bottom-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_nw{border-bottom-right-radius:0}";},function(e,t,i){var n=i(1),o=i(32);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck.ck-toolbar{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-flow:row nowrap;align-items:center}.ck.ck-toolbar>.ck-toolbar__items{display:flex;flex-flow:row wrap;align-items:center;flex-grow:1}.ck.ck-toolbar .ck.ck-toolbar__separator{display:inline-block}.ck.ck-toolbar .ck.ck-toolbar__separator:first-child,.ck.ck-toolbar .ck.ck-toolbar__separator:last-child{display:none}.ck.ck-toolbar .ck-toolbar__line-break{flex-basis:100%}.ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items{flex-direction:column}.ck.ck-toolbar.ck-toolbar_floating>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck-dropdown__button .ck-dropdown__arrow{display:none}.ck.ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-toolbar,.ck.ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-toolbar{background:var(--ck-color-toolbar-background);padding:0 var(--ck-spacing-small);border:1px solid var(--ck-color-toolbar-border)}.ck.ck-toolbar .ck.ck-toolbar__separator{align-self:stretch;width:1px;min-width:1px;background:var(--ck-color-toolbar-border);margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck.ck-toolbar .ck-toolbar__line-break{height:0}.ck.ck-toolbar>.ck-toolbar__items>:not(.ck-toolbar__line-break){margin-right:var(--ck-spacing-small)}.ck.ck-toolbar>.ck-toolbar__items:empty+.ck.ck-toolbar__separator{display:none}.ck.ck-toolbar>.ck-toolbar__items>:not(.ck-toolbar__line-break),.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown{margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck.ck-toolbar.ck-toolbar_vertical{padding:0}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items>.ck{width:100%;margin:0;border-radius:0;border:0}.ck.ck-toolbar.ck-toolbar_compact{padding:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>*{margin:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>:not(:first-child):not(:last-child){border-radius:0}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck.ck-button.ck-dropdown__button{padding-left:var(--ck-spacing-tiny)}.ck-toolbar-container .ck.ck-toolbar{border:0}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck{margin-right:0}.ck.ck-toolbar[dir=rtl]:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-left:0}.ck.ck-toolbar[dir=rtl].ck-toolbar_compact>.ck-toolbar__items>.ck:first-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-top-left-radius:0;border-bottom-left-radius:0}.ck.ck-toolbar[dir=rtl].ck-toolbar_compact>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-top-right-radius:0;border-bottom-right-radius:0}.ck.ck-toolbar[dir=rtl]>.ck.ck-toolbar__separator,[dir=rtl] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=rtl].ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=rtl] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child){margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=ltr]>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-right:0}.ck.ck-toolbar[dir=ltr].ck-toolbar_compact>.ck-toolbar__items>.ck:first-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-top-right-radius:0;border-bottom-right-radius:0}.ck.ck-toolbar[dir=ltr].ck-toolbar_compact>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-top-left-radius:0;border-bottom-left-radius:0}.ck.ck-toolbar[dir=ltr]>.ck.ck-toolbar__separator,[dir=ltr] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-right:var(--ck-spacing-small)}.ck.ck-toolbar[dir=ltr].ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=ltr] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child){margin-right:var(--ck-spacing-small)}";},function(e,t,i){var n=i(1),o=i(34);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck.ck-list{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-direction:column}.ck.ck-list .ck-list__item,.ck.ck-list .ck-list__separator{display:block}.ck.ck-list .ck-list__item>:focus{position:relative;z-index:var(--ck-z-default)}.ck.ck-list{border-radius:0}.ck-rounded-corners .ck.ck-list,.ck.ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-list{list-style-type:none;background:var(--ck-color-list-background)}.ck.ck-list__item{cursor:default;min-width:12em}.ck.ck-list__item .ck-button{min-height:unset;width:100%;text-align:left;border-radius:0;padding:calc(var(--ck-line-height-base)*0.2*var(--ck-font-size-base)) calc(var(--ck-line-height-base)*0.4*var(--ck-font-size-base))}.ck.ck-list__item .ck-button .ck-button__label{line-height:calc(var(--ck-line-height-base)*1.2*var(--ck-font-size-base))}.ck.ck-list__item .ck-button:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on{background:var(--ck-color-list-button-on-background);color:var(--ck-color-list-button-on-text)}.ck.ck-list__item .ck-button.ck-on:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-on-background-focus)}.ck.ck-list__item .ck-button.ck-on:focus:not(.ck-disabled){border-color:var(--ck-color-base-background)}.ck.ck-list__item .ck-button:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background)}.ck.ck-list__item .ck-switchbutton.ck-on{background:var(--ck-color-list-background);color:inherit}.ck.ck-list__item .ck-switchbutton.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background);color:inherit}.ck.ck-list__separator{height:1px;width:100%;background:var(--ck-color-base-border)}";},function(e,t,i){var n=i(1),o=i(36);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=":root{--ck-toolbar-dropdown-max-width:60vw}.ck.ck-toolbar-dropdown>.ck-dropdown__panel{width:max-content;max-width:var(--ck-toolbar-dropdown-max-width)}.ck.ck-toolbar-dropdown>.ck-dropdown__panel .ck-button:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-toolbar-dropdown .ck-toolbar{border:0}";},function(e,t,i){var n=i(1),o=i(38);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck.ck-dropdown .ck-dropdown__panel .ck-list{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list,.ck.ck-dropdown .ck-dropdown__panel .ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}";},function(e,t,i){var n=i(1),o=i(40);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=":root{--ck-color-editable-blur-selection:#d9d9d9}.ck.ck-editor__editable:not(.ck-editor__nested-editable){border-radius:0}.ck-rounded-corners .ck.ck-editor__editable:not(.ck-editor__nested-editable),.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-focused{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0}.ck.ck-editor__editable_inline{overflow:auto;padding:0 var(--ck-spacing-standard);border:1px solid transparent}.ck.ck-editor__editable_inline[dir=ltr]{text-align:left}.ck.ck-editor__editable_inline[dir=rtl]{text-align:right}.ck.ck-editor__editable_inline>:first-child{margin-top:var(--ck-spacing-large)}.ck.ck-editor__editable_inline>:last-child{margin-bottom:var(--ck-spacing-large)}.ck.ck-editor__editable_inline.ck-blurred ::selection{background:var(--ck-color-editable-blur-selection)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_n]:after{border-bottom-color:var(--ck-color-base-foreground)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_s]:after{border-top-color:var(--ck-color-base-foreground)}";},function(e,t,i){var n=i(1),o=i(42);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck.ck-label{display:block}.ck.ck-voice-label{display:none}.ck.ck-label{font-weight:700}";},function(e,t,i){var n=i(1),o=i(44);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck.ck-form__header{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;justify-content:space-between}:root{--ck-form-header-height:38px}.ck.ck-form__header{padding:var(--ck-spacing-small) var(--ck-spacing-large);height:var(--ck-form-header-height);line-height:var(--ck-form-header-height);border-bottom:1px solid var(--ck-color-base-border)}.ck.ck-form__header .ck-form__header__label{font-weight:700}";},function(e,t,i){var n=i(1),o=i(46);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=":root{--ck-input-text-width:18em}.ck.ck-input-text{border-radius:0}.ck-rounded-corners .ck.ck-input-text,.ck.ck-input-text.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-input-text{background:var(--ck-color-input-background);border:1px solid var(--ck-color-input-border);padding:var(--ck-spacing-extra-tiny) var(--ck-spacing-medium);min-width:var(--ck-input-text-width);min-height:var(--ck-ui-component-min-height);transition:box-shadow .1s ease-in-out,border .1s ease-in-out}.ck.ck-input-text:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-input-text[readonly]{border:1px solid var(--ck-color-input-disabled-border);background:var(--ck-color-input-disabled-background);color:var(--ck-color-input-disabled-text)}.ck.ck-input-text[readonly]:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-input-text.ck-error{border-color:var(--ck-color-input-error-border);animation:ck-text-input-shake .3s ease both}.ck.ck-input-text.ck-error:focus{box-shadow:var(--ck-focus-error-outer-shadow),0 0}@keyframes ck-text-input-shake{20%{transform:translateX(-2px)}40%{transform:translateX(2px)}60%{transform:translateX(-1px)}80%{transform:translateX(1px)}}";},function(e,t,i){var n=i(1),o=i(48);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper{display:flex;position:relative}.ck.ck-labeled-field-view .ck.ck-label{display:block;position:absolute}:root{--ck-labeled-field-view-transition:.1s cubic-bezier(0,0,0.24,0.95);--ck-labeled-field-empty-unfocused-max-width:100% - 2 * var(--ck-spacing-medium);--ck-color-labeled-field-label-background:var(--ck-color-base-background)}.ck.ck-labeled-field-view{border-radius:0}.ck-rounded-corners .ck.ck-labeled-field-view,.ck.ck-labeled-field-view.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper{width:100%}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{top:0}[dir=ltr] .ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{left:0}[dir=rtl] .ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{right:0}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{pointer-events:none;transform-origin:0 0;transform:translate(var(--ck-spacing-medium),-6px) scale(.75);background:var(--ck-color-labeled-field-label-background);padding:0 calc(var(--ck-font-size-tiny)*0.5);line-height:normal;font-weight:400;text-overflow:ellipsis;overflow:hidden;max-width:100%;transition:transform var(--ck-labeled-field-view-transition),padding var(--ck-labeled-field-view-transition),background var(--ck-labeled-field-view-transition)}.ck.ck-labeled-field-view.ck-error .ck-input:not([readonly])+.ck.ck-label,.ck.ck-labeled-field-view.ck-error>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{color:var(--ck-color-base-error)}.ck.ck-labeled-field-view .ck-labeled-field-view__status{font-size:var(--ck-font-size-small);margin-top:var(--ck-spacing-small);white-space:normal}.ck.ck-labeled-field-view .ck-labeled-field-view__status.ck-labeled-field-view__status_error{color:var(--ck-color-base-error)}.ck.ck-labeled-field-view.ck-disabled>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{color:var(--ck-color-input-disabled-text)}[dir=ltr] .ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,[dir=ltr] .ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{transform:translate(var(--ck-spacing-medium),calc(var(--ck-font-size-base)*0.6)) scale(1)}[dir=rtl] .ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,[dir=rtl] .ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{transform:translate(calc(var(--ck-spacing-medium)*-1),calc(var(--ck-font-size-base)*0.6)) scale(1)}.ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{max-width:calc(var(--ck-labeled-field-empty-unfocused-max-width));background:transparent;padding:0}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown>.ck.ck-button{background:transparent}.ck.ck-labeled-field-view.ck-labeled-field-view_empty>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown>.ck-button>.ck-button__label{opacity:0}.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown+.ck-label{max-width:calc(var(--ck-labeled-field-empty-unfocused-max-width) - var(--ck-dropdown-arrow-size) - var(--ck-spacing-standard))}";},function(e,t,i){var n=i(1),o=i(50);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=':root{--ck-balloon-panel-arrow-z-index:calc(var(--ck-z-default) - 3)}.ck.ck-balloon-panel{display:none;position:absolute;z-index:var(--ck-z-modal)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{content:"";position:absolute}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_n]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_n]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_s]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_s]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel.ck-balloon-panel_visible{display:block}:root{--ck-balloon-arrow-offset:2px;--ck-balloon-arrow-height:10px;--ck-balloon-arrow-half-width:8px;--ck-balloon-arrow-drop-shadow:0 2px 2px var(--ck-color-shadow-drop)}.ck.ck-balloon-panel{border-radius:0}.ck-rounded-corners .ck.ck-balloon-panel,.ck.ck-balloon-panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-balloon-panel{box-shadow:var(--ck-drop-shadow),0 0;min-height:15px;background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{width:0;height:0;border-style:solid}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-left-width:var(--ck-balloon-arrow-half-width);border-bottom-width:var(--ck-balloon-arrow-height);border-right-width:var(--ck-balloon-arrow-half-width);border-top-width:0}.ck.ck-balloon-panel[class*=arrow_n]:before{border-bottom-color:var(--ck-color-panel-border)}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-left-color:transparent;border-right-color:transparent;border-top-color:transparent}.ck.ck-balloon-panel[class*=arrow_n]:after{border-bottom-color:var(--ck-color-panel-background);margin-top:var(--ck-balloon-arrow-offset)}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-left-width:var(--ck-balloon-arrow-half-width);border-bottom-width:0;border-right-width:var(--ck-balloon-arrow-half-width);border-top-width:var(--ck-balloon-arrow-height)}.ck.ck-balloon-panel[class*=arrow_s]:before{border-top-color:var(--ck-color-panel-border);filter:drop-shadow(var(--ck-balloon-arrow-drop-shadow))}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-left-color:transparent;border-bottom-color:transparent;border-right-color:transparent}.ck.ck-balloon-panel[class*=arrow_s]:after{border-top-color:var(--ck-color-panel-background);margin-bottom:var(--ck-balloon-arrow-offset)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:before{left:50%;margin-left:calc(var(--ck-balloon-arrow-half-width)*-1);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:before{left:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:before{right:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:before{left:50%;margin-left:calc(var(--ck-balloon-arrow-half-width)*-1);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:before{left:calc(var(--ck-balloon-arrow-half-width)*2);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:before{right:calc(var(--ck-balloon-arrow-half-width)*2);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:before{right:25%;margin-right:calc(var(--ck-balloon-arrow-half-width)*2);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:before{left:25%;margin-left:calc(var(--ck-balloon-arrow-half-width)*2);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:before{right:25%;margin-right:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:before{left:25%;margin-left:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}';},function(e,t,i){var n=i(1),o=i(52);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck .ck-balloon-rotator__navigation{display:flex;align-items:center;justify-content:center}.ck .ck-balloon-rotator__content .ck-toolbar{justify-content:center}.ck .ck-balloon-rotator__navigation{background:var(--ck-color-toolbar-background);border-bottom:1px solid var(--ck-color-toolbar-border);padding:0 var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation>*{margin-right:var(--ck-spacing-small);margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation .ck-balloon-rotator__counter{margin-right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-small)}.ck .ck-balloon-rotator__content .ck.ck-annotation-wrapper{box-shadow:none}";},function(e,t,i){var n=i(1),o=i(54);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck .ck-fake-panel{position:absolute;z-index:calc(var(--ck-z-modal) - 1)}.ck .ck-fake-panel div{position:absolute}.ck .ck-fake-panel div:first-child{z-index:2}.ck .ck-fake-panel div:nth-child(2){z-index:1}:root{--ck-balloon-fake-panel-offset-horizontal:6px;--ck-balloon-fake-panel-offset-vertical:6px}.ck .ck-fake-panel div{box-shadow:var(--ck-drop-shadow),0 0;min-height:15px;background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border);border-radius:var(--ck-border-radius);width:100%;height:100%}.ck .ck-fake-panel div:first-child{margin-left:var(--ck-balloon-fake-panel-offset-horizontal);margin-top:var(--ck-balloon-fake-panel-offset-vertical)}.ck .ck-fake-panel div:nth-child(2){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*2);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*2)}.ck .ck-fake-panel div:nth-child(3){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*3);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*3)}.ck .ck-balloon-panel_arrow_s+.ck-fake-panel,.ck .ck-balloon-panel_arrow_se+.ck-fake-panel,.ck .ck-balloon-panel_arrow_sw+.ck-fake-panel{--ck-balloon-fake-panel-offset-vertical:-6px}";},function(e,t,i){var n=i(1),o=i(56);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck.ck-sticky-panel .ck-sticky-panel__content_sticky{z-index:var(--ck-z-modal);position:fixed;top:0}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky_bottom-limit{top:auto;position:absolute}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky{box-shadow:var(--ck-drop-shadow),0 0;border-width:0 1px 1px;border-top-left-radius:0;border-top-right-radius:0}";},function(e,t,i){var n=i(1),o=i(58);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck.ck-block-toolbar-button{position:absolute;z-index:var(--ck-z-default)}:root{--ck-color-block-toolbar-button:var(--ck-color-text);--ck-block-toolbar-button-size:var(--ck-font-size-normal)}.ck.ck-block-toolbar-button{color:var(--ck-color-block-toolbar-button);font-size:var(--ck-block-toolbar-size)}";},function(e,t,i){var n=i(1),o=i(60);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck.ck-placeholder,.ck .ck-placeholder{position:relative}.ck.ck-placeholder:before,.ck .ck-placeholder:before{position:absolute;left:0;right:0;content:attr(data-placeholder);pointer-events:none}.ck.ck-read-only .ck-placeholder:before{display:none}.ck.ck-placeholder:before,.ck .ck-placeholder:before{cursor:text;color:var(--ck-color-engine-placeholder-text)}";},function(e,t,i){var n=i(1),o=i(62);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports='.ck .ck-widget .ck-widget__type-around__button{display:block;position:absolute;overflow:hidden;z-index:var(--ck-z-default)}.ck .ck-widget .ck-widget__type-around__button svg{position:absolute;top:50%;left:50%;z-index:calc(var(--ck-z-default) + 2)}.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_before{top:calc(var(--ck-widget-outline-thickness)*-0.5);left:min(10%,30px);transform:translateY(-50%)}.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_after{bottom:calc(var(--ck-widget-outline-thickness)*-0.5);right:min(10%,30px);transform:translateY(50%)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:after,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover:after{content:"";display:block;position:absolute;top:1px;left:1px;z-index:calc(var(--ck-z-default) + 1)}.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__fake-caret{display:none;position:absolute;left:0;right:0}.ck .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__fake-caret{left:calc(var(--ck-widget-outline-thickness)*-1);right:calc(var(--ck-widget-outline-thickness)*-1)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__fake-caret{top:calc(var(--ck-widget-outline-thickness)*-1 - 1px);display:block}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__fake-caret{bottom:calc(var(--ck-widget-outline-thickness)*-1 - 1px);display:block}.ck.ck-editor__editable.ck-read-only .ck-widget__type-around,.ck.ck-editor__editable.ck-restricted-editing_mode_restricted .ck-widget__type-around,.ck.ck-editor__editable.ck-widget__type-around_disabled .ck-widget__type-around{display:none}:root{--ck-widget-type-around-button-size:20px;--ck-color-widget-type-around-button-active:var(--ck-color-focus-border);--ck-color-widget-type-around-button-hover:var(--ck-color-widget-hover-border);--ck-color-widget-type-around-button-blurred-editable:var(--ck-color-widget-blurred-border);--ck-color-widget-type-around-button-radar-start-alpha:0;--ck-color-widget-type-around-button-radar-end-alpha:.3;--ck-color-widget-type-around-button-icon:var(--ck-color-base-background)}.ck .ck-widget .ck-widget__type-around__button{width:var(--ck-widget-type-around-button-size);height:var(--ck-widget-type-around-button-size);background:var(--ck-color-widget-type-around-button);border-radius:100px;transition:opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);opacity:0;pointer-events:none}.ck .ck-widget .ck-widget__type-around__button svg{width:10px;height:8px;transform:translate(-50%,-50%);transition:transform .5s ease;margin-top:1px}.ck .ck-widget .ck-widget__type-around__button svg *{stroke-dasharray:10;stroke-dashoffset:0;fill:none;stroke:var(--ck-color-widget-type-around-button-icon);stroke-width:1.5px;stroke-linecap:round;stroke-linejoin:round}.ck .ck-widget .ck-widget__type-around__button svg line{stroke-dasharray:7}.ck .ck-widget .ck-widget__type-around__button:hover{animation:ck-widget-type-around-button-sonar 1s ease infinite}.ck .ck-widget .ck-widget__type-around__button:hover svg polyline{animation:ck-widget-type-around-arrow-dash 2s linear}.ck .ck-widget .ck-widget__type-around__button:hover svg line{animation:ck-widget-type-around-arrow-tip-dash 2s linear}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__button{opacity:1;pointer-events:auto}.ck .ck-widget:not(.ck-widget_selected)>.ck-widget__type-around>.ck-widget__type-around__button{background:var(--ck-color-widget-type-around-button-hover)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover{background:var(--ck-color-widget-type-around-button-active)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:after,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover:after{width:calc(var(--ck-widget-type-around-button-size) - 2px);height:calc(var(--ck-widget-type-around-button-size) - 2px);border-radius:100px;background:linear-gradient(135deg,hsla(0,0%,100%,0),hsla(0,0%,100%,.3))}.ck .ck-widget.ck-widget_with-selection-handle>.ck-widget__type-around>.ck-widget__type-around__button_before{margin-left:20px}.ck .ck-widget .ck-widget__type-around__fake-caret{pointer-events:none;height:1px;animation:ck-widget-type-around-fake-caret-pulse 1s linear infinite normal forwards;outline:1px solid hsla(0,0%,100%,.5);background:var(--ck-color-base-text)}.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_after,.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_before{outline-color:transparent}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected:hover,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle{opacity:0}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected.ck-widget_with-resizer>.ck-widget__resizer,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected.ck-widget_with-resizer>.ck-widget__resizer{opacity:0}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__type-around>.ck-widget__type-around__button_before{margin-left:0;margin-right:20px}.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:not(:hover){background:var(--ck-color-widget-type-around-button-blurred-editable)}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:not(:hover) svg *{stroke:#999}@keyframes ck-widget-type-around-arrow-dash{0%{stroke-dashoffset:10}20%,to{stroke-dashoffset:0}}@keyframes ck-widget-type-around-arrow-tip-dash{0%,20%{stroke-dashoffset:7}40%,to{stroke-dashoffset:0}}@keyframes ck-widget-type-around-button-sonar{0%{box-shadow:0 0 0 0 hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-start-alpha))}50%{box-shadow:0 0 0 5px hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-end-alpha))}to{box-shadow:0 0 0 5px hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-start-alpha))}}@keyframes ck-widget-type-around-fake-caret-pulse{0%{opacity:1}49%{opacity:1}50%{opacity:0}99%{opacity:0}to{opacity:1}}';},function(e,t,i){var n=i(1),o=i(64);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=":root{--ck-color-resizer:var(--ck-color-focus-border);--ck-color-resizer-tooltip-background:#262626;--ck-color-resizer-tooltip-text:#f2f2f2;--ck-resizer-border-radius:var(--ck-border-radius);--ck-resizer-tooltip-offset:10px;--ck-resizer-tooltip-height:calc(var(--ck-spacing-small)*2 + 10px)}.ck .ck-widget,.ck .ck-widget.ck-widget_with-selection-handle{position:relative}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{position:absolute}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{display:block}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle{visibility:visible}.ck .ck-size-view{background:var(--ck-color-resizer-tooltip-background);color:var(--ck-color-resizer-tooltip-text);border:1px solid var(--ck-color-resizer-tooltip-text);border-radius:var(--ck-resizer-border-radius);font-size:var(--ck-font-size-tiny);display:block;padding:0 var(--ck-spacing-small);height:var(--ck-resizer-tooltip-height);line-height:var(--ck-resizer-tooltip-height)}.ck .ck-size-view.ck-orientation-above-center,.ck .ck-size-view.ck-orientation-bottom-left,.ck .ck-size-view.ck-orientation-bottom-right,.ck .ck-size-view.ck-orientation-top-left,.ck .ck-size-view.ck-orientation-top-right{position:absolute}.ck .ck-size-view.ck-orientation-top-left{top:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-top-right{top:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-right{bottom:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-left{bottom:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-above-center{top:calc(var(--ck-resizer-tooltip-height)*-1);left:50%;transform:translate(-50%)}:root{--ck-widget-outline-thickness:3px;--ck-widget-handler-icon-size:16px;--ck-widget-handler-animation-duration:200ms;--ck-widget-handler-animation-curve:ease;--ck-color-widget-blurred-border:#dedede;--ck-color-widget-hover-border:#ffc83d;--ck-color-widget-editable-focus-background:var(--ck-color-base-background);--ck-color-widget-drag-handler-icon-color:var(--ck-color-base-background)}.ck .ck-widget{outline-width:var(--ck-widget-outline-thickness);outline-style:solid;outline-color:transparent;transition:outline-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_selected,.ck .ck-widget.ck-widget_selected:hover{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-focus-border)}.ck .ck-widget:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-editor__nested-editable{border:1px solid transparent}.ck .ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck .ck-editor__nested-editable:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0;background-color:var(--ck-color-widget-editable-focus-background)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{padding:4px;box-sizing:border-box;background-color:transparent;opacity:0;transition:background-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),visibility var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);border-radius:var(--ck-border-radius) var(--ck-border-radius) 0 0;transform:translateY(-100%);left:calc(0px - var(--ck-widget-outline-thickness));top:0}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{width:var(--ck-widget-handler-icon-size);height:var(--ck-widget-handler-icon-size);color:var(--ck-color-widget-drag-handler-icon-color)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:0;transition:opacity .3s var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover .ck-icon .ck-icon__selected-indicator{opacity:1}.ck .ck-widget.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle{opacity:1;background-color:var(--ck-color-widget-hover-border)}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle{opacity:1;background-color:var(--ck-color-focus-border)}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:1}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{left:auto;right:calc(0px - var(--ck-widget-outline-thickness))}.ck.ck-editor__editable.ck-read-only .ck-widget{transition:none}.ck.ck-editor__editable.ck-read-only .ck-widget:not(.ck-widget_selected){--ck-widget-outline-thickness:0px}.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle,.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover{outline-color:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle>.ck-widget__selection-handle,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle>.ck-widget__selection-handle:hover,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover.ck-widget_with-selection-handle>.ck-widget__selection-handle,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover.ck-widget_with-selection-handle>.ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable>.ck-widget.ck-widget_with-selection-handle:first-child,.ck.ck-editor__editable blockquote>.ck-widget.ck-widget_with-selection-handle:first-child{margin-top:calc(1em + var(--ck-widget-handler-icon-size))}";},function(e,t,i){var n=i(1),o=i(66);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports='.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position{display:inline;position:relative;pointer-events:none}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span{position:absolute;width:0}.ck.ck-editor__editable .ck-widget:-webkit-drag>.ck-widget__selection-handle,.ck.ck-editor__editable .ck-widget:-webkit-drag>.ck-widget__type-around{display:none}:root{--ck-clipboard-drop-target-dot-width:12px;--ck-clipboard-drop-target-dot-height:8px;--ck-clipboard-drop-target-color:var(--ck-color-focus-border)}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span{bottom:calc(var(--ck-clipboard-drop-target-dot-height)*-0.5);top:calc(var(--ck-clipboard-drop-target-dot-height)*-0.5);border:1px solid var(--ck-clipboard-drop-target-color);background:var(--ck-clipboard-drop-target-color);margin-left:-1px}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span:after{content:"";width:0;height:0;display:block;position:absolute;left:50%;top:calc(var(--ck-clipboard-drop-target-dot-height)*-0.5);transform:translateX(-50%);border-left:calc(var(--ck-clipboard-drop-target-dot-width)*0.5) solid transparent;border-bottom:0 solid transparent;border-right:calc(var(--ck-clipboard-drop-target-dot-width)*0.5) solid transparent;border-top:calc(var(--ck-clipboard-drop-target-dot-height)) solid var(--ck-clipboard-drop-target-color)}.ck.ck-editor__editable .ck-widget.ck-clipboard-drop-target-range{outline:var(--ck-widget-outline-thickness) solid var(--ck-clipboard-drop-target-color)!important}.ck.ck-editor__editable .ck-widget:-webkit-drag{zoom:.6;outline:none!important}';},function(e,t,i){var n=i(1),o=i(68);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck .ck-button.ck-color-table__remove-color{display:flex;align-items:center;width:100%}label.ck.ck-color-grid__label{font-weight:unset}.ck .ck-button.ck-color-table__remove-color{padding:calc(var(--ck-spacing-standard)/2) var(--ck-spacing-standard);border-bottom-left-radius:0;border-bottom-right-radius:0}.ck .ck-button.ck-color-table__remove-color:not(:focus){border-bottom:1px solid var(--ck-color-base-border)}[dir=ltr] .ck .ck-button.ck-color-table__remove-color .ck.ck-icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck .ck-button.ck-color-table__remove-color .ck.ck-icon{margin-left:var(--ck-spacing-standard)}";},function(e,t,i){var n=i(1),o=i(70);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck-content .text-tiny{font-size:.7em}.ck-content .text-small{font-size:.85em}.ck-content .text-big{font-size:1.4em}.ck-content .text-huge{font-size:1.8em}";},function(e,t,i){var n=i(1),o=i(72);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck-content blockquote{overflow:hidden;padding-right:1.5em;padding-left:1.5em;margin-left:0;margin-right:0;font-style:italic;border-left:5px solid #ccc}.ck-content[dir=rtl] blockquote{border-left:0;border-right:5px solid #ccc}";},function(e,t){e.exports=".ck.ck-heading_heading1{font-size:20px}.ck.ck-heading_heading2{font-size:17px}.ck.ck-heading_heading3{font-size:14px}.ck[class*=ck-heading_heading]{font-weight:700}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__button .ck-button__label{width:8em}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__panel .ck-list__item{min-width:18em}";},function(e,t,i){var n=i(1),o=i(75);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck .ck-widget_with-resizer{position:relative}.ck .ck-widget__resizer{display:none;position:absolute;pointer-events:none;left:0;top:0}.ck-focused .ck-widget_with-resizer.ck-widget_selected>.ck-widget__resizer{display:block}.ck .ck-widget__resizer__handle{position:absolute;pointer-events:all}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-right,.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-left{cursor:nwse-resize}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-left,.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-right{cursor:nesw-resize}:root{--ck-resizer-size:10px;--ck-resizer-offset:calc(var(--ck-resizer-size)/-2 - 2px);--ck-resizer-border-width:1px}.ck .ck-widget__resizer{outline:1px solid var(--ck-color-resizer)}.ck .ck-widget__resizer__handle{width:var(--ck-resizer-size);height:var(--ck-resizer-size);background:var(--ck-color-focus-border);border:var(--ck-resizer-border-width) solid #fff;border-radius:var(--ck-resizer-border-radius)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-left{top:var(--ck-resizer-offset);left:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-right{top:var(--ck-resizer-offset);right:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-right{bottom:var(--ck-resizer-offset);right:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-left{bottom:var(--ck-resizer-offset);left:var(--ck-resizer-offset)}";},function(e,t,i){var n=i(1),o=i(77);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck.ck-text-alternative-form{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-text-alternative-form .ck-labeled-field-view{display:inline-block}.ck.ck-text-alternative-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-text-alternative-form{flex-wrap:wrap}.ck.ck-text-alternative-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-text-alternative-form .ck-button{flex-basis:50%}}";},function(e,t){e.exports='.ck-vertical-form .ck-button:after{content:"";width:0;position:absolute;right:-1px;top:var(--ck-spacing-small);bottom:var(--ck-spacing-small);z-index:1}@media screen and (max-width:600px){.ck.ck-responsive-form .ck-button:after{content:"";width:0;position:absolute;right:-1px;top:var(--ck-spacing-small);bottom:var(--ck-spacing-small);z-index:1}}.ck-vertical-form>.ck-button:nth-last-child(2):after{border-right:1px solid var(--ck-color-base-border)}.ck.ck-responsive-form{padding:var(--ck-spacing-large)}.ck.ck-responsive-form:focus{outline:none}[dir=ltr] .ck.ck-responsive-form>:not(:first-child),[dir=rtl] .ck.ck-responsive-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-responsive-form{padding:0;width:calc(var(--ck-input-text-width)*0.8)}.ck.ck-responsive-form .ck-labeled-field-view{margin:var(--ck-spacing-large) var(--ck-spacing-large) 0}.ck.ck-responsive-form .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-responsive-form .ck-labeled-field-view .ck-labeled-field-view__error{white-space:normal}.ck.ck-responsive-form>.ck-button:last-child,.ck.ck-responsive-form>.ck-button:nth-last-child(2){padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-large);border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-responsive-form>.ck-button:last-child,[dir=ltr] .ck.ck-responsive-form>.ck-button:nth-last-child(2),[dir=rtl] .ck.ck-responsive-form>.ck-button:last-child,[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2){margin-left:0}.ck.ck-responsive-form>.ck-button:nth-last-child(2):after,[dir=rtl] .ck.ck-responsive-form>.ck-button:last-child:last-of-type,[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2):last-of-type{border-right:1px solid var(--ck-color-base-border)}}';},function(e,t){e.exports=".ck-content .image{display:table;clear:both;text-align:center;margin:.9em auto;min-width:50px}.ck-content .image img{display:block;margin:0 auto;max-width:100%;min-width:100%}.ck-content .image-inline{display:inline-flex;max-width:100%;align-items:flex-start}.ck-content .image-inline picture{display:flex}.ck-content .image-inline img,.ck-content .image-inline picture{flex-grow:1;flex-shrink:1;max-width:100%}.ck.ck-editor__editable .image>figcaption.ck-placeholder:before{padding-left:inherit;padding-right:inherit;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ck.ck-editor__editable .image-inline.ck-widget_selected,.ck.ck-editor__editable .image.ck-widget_selected{z-index:1}.ck.ck-editor__editable .image-inline.ck-widget_selected ::selection{display:none}.ck.ck-editor__editable td .image-inline img,.ck.ck-editor__editable th .image-inline img{max-width:none}";},function(e,t,i){var n=i(1),o=i(81);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=":root{--ck-color-image-caption-background:#f7f7f7;--ck-color-image-caption-text:#333;--ck-color-image-caption-highligted-background:#fd0}.ck-content .image>figcaption{display:table-caption;caption-side:bottom;word-break:break-word;color:var(--ck-color-image-caption-text);background-color:var(--ck-color-image-caption-background);padding:.6em;font-size:.75em;outline-offset:-1px}.ck.ck-editor__editable .image>figcaption.image__caption_highlighted{animation:ck-image-caption-highlight .6s ease-out}@keyframes ck-image-caption-highlight{0%{background-color:var(--ck-color-image-caption-highligted-background)}to{background-color:var(--ck-color-image-caption-background)}}";},function(e,t,i){var n=i(1),o=i(83);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck-content .image.image_resized{max-width:100%;display:block;box-sizing:border-box}.ck-content .image.image_resized img{width:100%}.ck-content .image.image_resized>figcaption{display:block}.ck.ck-editor__editable td .image-inline.image_resized img,.ck.ck-editor__editable th .image-inline.image_resized img{max-width:100%}[dir=ltr] .ck.ck-button.ck-button_with-text.ck-resize-image-button .ck-button__icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-button.ck-button_with-text.ck-resize-image-button .ck-button__icon{margin-left:var(--ck-spacing-standard)}.ck.ck-dropdown .ck-button.ck-resize-image-button .ck-button__label{width:4em}";},function(e,t,i){var n=i(1),o=i(85);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=":root{--ck-image-style-spacing:1.5em;--ck-inline-image-style-spacing:calc(var(--ck-image-style-spacing)/2)}.ck-content .image-style-block-align-left,.ck-content .image-style-block-align-right{max-width:calc(100% - var(--ck-image-style-spacing))}.ck-content .image-style-align-left,.ck-content .image-style-align-right{clear:none}.ck-content .image-style-side{float:right;margin-left:var(--ck-image-style-spacing);max-width:50%}.ck-content .image-style-align-left{float:left;margin-right:var(--ck-image-style-spacing)}.ck-content .image-style-align-center{margin-left:auto;margin-right:auto}.ck-content .image-style-align-right{float:right;margin-left:var(--ck-image-style-spacing)}.ck-content .image-style-block-align-right{margin-right:0;margin-left:auto}.ck-content .image-style-block-align-left{margin-left:0;margin-right:auto}.ck-content p+.image-style-align-left,.ck-content p+.image-style-align-right,.ck-content p+.image-style-side{margin-top:0}.ck-content .image-inline.image-style-align-left,.ck-content .image-inline.image-style-align-right{margin-top:var(--ck-inline-image-style-spacing);margin-bottom:var(--ck-inline-image-style-spacing)}.ck-content .image-inline.image-style-align-left{margin-right:var(--ck-inline-image-style-spacing)}.ck-content .image-inline.image-style-align-right{margin-left:var(--ck-inline-image-style-spacing)}.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__action:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover),.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__action:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover){background-color:var(--ck-color-button-on-background)}.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__action:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover):after,.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__action:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover):after{display:none}.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open:hover>.ck-splitbutton__action:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open:hover>.ck-splitbutton__arrow:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open:hover>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover){background-color:var(--ck-color-button-on-hover-background)}";},function(e,t,i){var n=i(1),o=i(87);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck.ck-editor__editable .image,.ck.ck-editor__editable .image-inline{position:relative}.ck.ck-editor__editable .image-inline .ck-progress-bar,.ck.ck-editor__editable .image .ck-progress-bar{position:absolute;top:0;left:0}.ck.ck-editor__editable .image-inline.ck-appear,.ck.ck-editor__editable .image.ck-appear{animation:fadeIn .7s}.ck.ck-editor__editable .image-inline .ck-progress-bar,.ck.ck-editor__editable .image .ck-progress-bar{height:2px;width:0;background:var(--ck-color-upload-bar-background);transition:width .1s}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}";},function(e,t,i){var n=i(1),o=i(89);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports='.ck-image-upload-complete-icon{display:block;position:absolute;top:min(var(--ck-spacing-medium),6%);right:min(var(--ck-spacing-medium),6%);border-radius:50%;z-index:1}.ck-image-upload-complete-icon:after{content:"";position:absolute}:root{--ck-color-image-upload-icon:#fff;--ck-color-image-upload-icon-background:#008a00;--ck-image-upload-icon-size:20;--ck-image-upload-icon-width:2px;--ck-image-upload-icon-is-visible:clamp(0px,100% - 50px,1px)}.ck-image-upload-complete-icon{opacity:0;background:var(--ck-color-image-upload-icon-background);animation-name:ck-upload-complete-icon-show,ck-upload-complete-icon-hide;animation-fill-mode:forwards,forwards;animation-duration:.5s,.5s;font-size:calc(1px*var(--ck-image-upload-icon-size));animation-delay:0ms,3s;overflow:hidden;width:calc(var(--ck-image-upload-icon-is-visible)*var(--ck-image-upload-icon-size));height:calc(var(--ck-image-upload-icon-is-visible)*var(--ck-image-upload-icon-size))}.ck-image-upload-complete-icon:after{left:25%;top:50%;opacity:0;height:0;width:0;transform:scaleX(-1) rotate(135deg);transform-origin:left top;border-top:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);border-right:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);animation-name:ck-upload-complete-icon-check;animation-duration:.5s;animation-delay:.5s;animation-fill-mode:forwards;box-sizing:border-box}@keyframes ck-upload-complete-icon-show{0%{opacity:0}to{opacity:1}}@keyframes ck-upload-complete-icon-hide{0%{opacity:1}to{opacity:0}}@keyframes ck-upload-complete-icon-check{0%{opacity:1;width:0;height:0}33%{width:.3em;height:0}to{opacity:1;width:.3em;height:.45em}}';},function(e,t,i){var n=i(1),o=i(91);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports='.ck .ck-upload-placeholder-loader{position:absolute;display:flex;align-items:center;justify-content:center;top:0;left:0}.ck .ck-upload-placeholder-loader:before{content:"";position:relative}:root{--ck-color-upload-placeholder-loader:#b3b3b3;--ck-upload-placeholder-loader-size:32px}.ck .ck-image-upload-placeholder{width:100%;margin:0}.ck .ck-upload-placeholder-loader{width:100%;height:100%}.ck .ck-upload-placeholder-loader:before{width:var(--ck-upload-placeholder-loader-size);height:var(--ck-upload-placeholder-loader-size);border-radius:50%;border-top:3px solid var(--ck-color-upload-placeholder-loader);border-right:2px solid transparent;animation:ck-upload-placeholder-loader 1s linear infinite}@keyframes ck-upload-placeholder-loader{to{transform:rotate(1turn)}}';},function(e,t,i){var n=i(1),o=i(93);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck .ck-link_selected{background:var(--ck-color-link-selected-background)}.ck .ck-link_selected span.image-inline{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-link-selected-background)}.ck .ck-fake-link-selection{background:var(--ck-color-link-fake-selection)}.ck .ck-fake-link-selection_collapsed{height:100%;border-right:1px solid var(--ck-color-base-text);margin-right:-1px;outline:1px solid hsla(0,0%,100%,.5)}";},function(e,t,i){var n=i(1),o=i(95);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck.ck-link-form{display:flex}.ck.ck-link-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-link-form{flex-wrap:wrap}.ck.ck-link-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-link-form .ck-button{flex-basis:50%}}.ck.ck-link-form_layout-vertical{display:block}.ck.ck-link-form_layout-vertical .ck-button.ck-button-cancel,.ck.ck-link-form_layout-vertical .ck-button.ck-button-save{margin-top:var(--ck-spacing-medium)}.ck.ck-link-form_layout-vertical{padding:0;min-width:var(--ck-input-text-width)}.ck.ck-link-form_layout-vertical .ck-labeled-field-view{margin:var(--ck-spacing-large) var(--ck-spacing-large) var(--ck-spacing-small)}.ck.ck-link-form_layout-vertical .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-link-form_layout-vertical .ck-button{padding:var(--ck-spacing-standard);margin:0;border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border);width:50%}[dir=ltr] .ck.ck-link-form_layout-vertical .ck-button,[dir=rtl] .ck.ck-link-form_layout-vertical .ck-button{margin-left:0}[dir=rtl] .ck.ck-link-form_layout-vertical .ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}.ck.ck-link-form_layout-vertical .ck.ck-list{margin:var(--ck-spacing-standard) var(--ck-spacing-large)}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton{border:0;padding:0;width:100%}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton:hover{background:none}";},function(e,t,i){var n=i(1),o=i(97);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck.ck-link-actions{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-link-actions .ck-link-actions__preview{display:inline-block}.ck.ck-link-actions .ck-link-actions__preview .ck-button__label{overflow:hidden}@media screen and (max-width:600px){.ck.ck-link-actions{flex-wrap:wrap}.ck.ck-link-actions .ck-link-actions__preview{flex-basis:100%}.ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){flex-basis:50%}}.ck.ck-link-actions .ck-button.ck-link-actions__preview{padding-left:0;padding-right:0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{padding:0 var(--ck-spacing-medium);color:var(--ck-color-link-default);text-overflow:ellipsis;cursor:pointer;max-width:var(--ck-input-text-width);min-width:3em;text-align:center}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label:hover{text-decoration:underline}.ck.ck-link-actions .ck-button.ck-link-actions__preview,.ck.ck-link-actions .ck-button.ck-link-actions__preview:active,.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus,.ck.ck-link-actions .ck-button.ck-link-actions__preview:hover{background:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:active{box-shadow:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus .ck-button__label{text-decoration:underline}[dir=ltr] .ck.ck-link-actions .ck-button:not(:first-child),[dir=rtl] .ck.ck-link-actions .ck-button:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-link-actions .ck-button.ck-link-actions__preview{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{min-width:0;max-width:100%}[dir=ltr] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview),[dir=rtl] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){margin-left:0}}";},function(e,t,i){var n=i(1),o=i(99);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck.ck-list-styles-dropdown>.ck-dropdown__panel>.ck-toolbar>.ck-toolbar__items{display:grid}:root{--ck-list-style-button-size:44px}.ck.ck-list-styles-dropdown>.ck-dropdown__panel>.ck-toolbar{background:none;padding:0}.ck.ck-list-styles-dropdown>.ck-dropdown__panel>.ck-toolbar>.ck-toolbar__items{grid-template-columns:repeat(3,auto);row-gap:var(--ck-spacing-medium);column-gap:var(--ck-spacing-medium);padding:var(--ck-spacing-medium)}.ck.ck-list-styles-dropdown>.ck-dropdown__panel>.ck-toolbar>.ck-toolbar__items .ck-button{width:var(--ck-list-style-button-size);height:var(--ck-list-style-button-size);padding:0;margin:0;box-sizing:content-box}.ck.ck-list-styles-dropdown>.ck-dropdown__panel>.ck-toolbar>.ck-toolbar__items .ck-button .ck-icon{width:var(--ck-list-style-button-size);height:var(--ck-list-style-button-size)}";},function(e,t,i){var n=i(1),o=i(101);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports='.ck-media__wrapper .ck-media__placeholder{display:flex;flex-direction:column;align-items:center}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-tooltip{display:block}@media (hover:none){.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-tooltip{display:none}}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url{max-width:100%;position:relative}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url:hover .ck-tooltip{visibility:visible;opacity:1}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-media__placeholder__url__text{overflow:hidden;display:block}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="goo.gl/maps"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="maps.app.goo.gl"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="maps.google.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck-media__placeholder__icon *{display:none}.ck-editor__editable:not(.ck-read-only) .ck-media__wrapper>:not(.ck-media__placeholder),.ck-editor__editable:not(.ck-read-only) .ck-widget:not(.ck-widget_selected) .ck-media__placeholder{pointer-events:none}:root{--ck-media-embed-placeholder-icon-size:3em;--ck-color-media-embed-placeholder-url-text:#757575;--ck-color-media-embed-placeholder-url-text-hover:var(--ck-color-base-text)}.ck-media__wrapper{margin:0 auto}.ck-media__wrapper .ck-media__placeholder{padding:calc(var(--ck-spacing-standard)*3);background:var(--ck-color-base-foreground)}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon{min-width:var(--ck-media-embed-placeholder-icon-size);height:var(--ck-media-embed-placeholder-icon-size);margin-bottom:var(--ck-spacing-large);background-position:50%;background-size:cover}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon .ck-icon{width:100%;height:100%}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text{color:var(--ck-color-media-embed-placeholder-url-text);white-space:nowrap;text-align:center;font-style:italic;text-overflow:ellipsis}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:var(--ck-color-media-embed-placeholder-url-text-hover);cursor:pointer;text-decoration:underline}.ck-media__wrapper[data-oembed-url*="open.spotify.com"]{max-width:300px;max-height:380px}.ck-media__wrapper[data-oembed-url*="goo.gl/maps"] .ck-media__placeholder__icon,.ck-media__wrapper[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon,.ck-media__wrapper[data-oembed-url*="maps.app.goo.gl"] .ck-media__placeholder__icon,.ck-media__wrapper[data-oembed-url*="maps.google.com"] .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTAuMzc4IiBoZWlnaHQ9IjI1NC4xNjciIHZpZXdCb3g9IjAgMCA2Ni4yNDYgNjcuMjQ4Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTcyLjUzMSAtMjE4LjQ1NSkgc2NhbGUoLjk4MDEyKSI+PHJlY3Qgcnk9IjUuMjM4IiByeD0iNS4yMzgiIHk9IjIzMS4zOTkiIHg9IjE3Ni4wMzEiIGhlaWdodD0iNjAuMDk5IiB3aWR0aD0iNjAuMDk5IiBmaWxsPSIjMzRhNjY4IiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxwYXRoIGQ9Ik0yMDYuNDc3IDI2MC45bC0yOC45ODcgMjguOTg3YTUuMjE4IDUuMjE4IDAgMDAzLjc4IDEuNjFoNDkuNjIxYzEuNjk0IDAgMy4xOS0uNzk4IDQuMTQ2LTIuMDM3eiIgZmlsbD0iIzVjODhjNSIvPjxwYXRoIGQ9Ik0yMjYuNzQyIDIyMi45ODhjLTkuMjY2IDAtMTYuNzc3IDcuMTctMTYuNzc3IDE2LjAxNC4wMDcgMi43NjIuNjYzIDUuNDc0IDIuMDkzIDcuODc1LjQzLjcwMy44MyAxLjQwOCAxLjE5IDIuMTA3LjMzMy41MDIuNjUgMS4wMDUuOTUgMS41MDguMzQzLjQ3Ny42NzMuOTU3Ljk4OCAxLjQ0IDEuMzEgMS43NjkgMi41IDMuNTAyIDMuNjM3IDUuMTY4Ljc5MyAxLjI3NSAxLjY4MyAyLjY0IDIuNDY2IDMuOTkgMi4zNjMgNC4wOTQgNC4wMDcgOC4wOTIgNC42IDEzLjkxNHYuMDEyYy4xODIuNDEyLjUxNi42NjYuODc5LjY2Ny40MDMtLjAwMS43NjgtLjMxNC45My0uNzk5LjYwMy01Ljc1NiAyLjIzOC05LjcyOSA0LjU4NS0xMy43OTQuNzgyLTEuMzUgMS42NzMtMi43MTUgMi40NjUtMy45OSAxLjEzNy0xLjY2NiAyLjMyOC0zLjQgMy42MzgtNS4xNjkuMzE1LS40ODIuNjQ1LS45NjIuOTg4LTEuNDM5LjMtLjUwMy42MTctMS4wMDYuOTUtMS41MDguMzU5LS43Ljc2LTEuNDA0IDEuMTktMi4xMDcgMS40MjYtMi40MDIgMi01LjExNCAyLjAwNC03Ljg3NSAwLTguODQ0LTcuNTExLTE2LjAxNC0xNi43NzYtMTYuMDE0eiIgZmlsbD0iI2RkNGIzZSIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48ZWxsaXBzZSByeT0iNS41NjQiIHJ4PSI1LjgyOCIgY3k9IjIzOS4wMDIiIGN4PSIyMjYuNzQyIiBmaWxsPSIjODAyZDI3IiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxwYXRoIGQ9Ik0xOTAuMzAxIDIzNy4yODNjLTQuNjcgMC04LjQ1NyAzLjg1My04LjQ1NyA4LjYwNnMzLjc4NiA4LjYwNyA4LjQ1NyA4LjYwN2MzLjA0MyAwIDQuODA2LS45NTggNi4zMzctMi41MTYgMS41My0xLjU1NyAyLjA4Ny0zLjkxMyAyLjA4Ny02LjI5IDAtLjM2Mi0uMDIzLS43MjItLjA2NC0xLjA3OWgtOC4yNTd2My4wNDNoNC44NWMtLjE5Ny43NTktLjUzMSAxLjQ1LTEuMDU4IDEuOTg2LS45NDIuOTU4LTIuMDI4IDEuNTQ4LTMuOTAxIDEuNTQ4LTIuODc2IDAtNS4yMDgtMi4zNzItNS4yMDgtNS4yOTkgMC0yLjkyNiAyLjMzMi01LjI5OSA1LjIwOC01LjI5OSAxLjM5OSAwIDIuNjE4LjQwNyAzLjU4NCAxLjI5M2wyLjM4MS0yLjM4YzAtLjAwMi0uMDAzLS4wMDQtLjAwNC0uMDA1LTEuNTg4LTEuNTI0LTMuNjItMi4yMTUtNS45NTUtMi4yMTV6bTQuNDMgNS42NmwuMDAzLjAwNnYtLjAwM3oiIGZpbGw9IiNmZmYiIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PHBhdGggZD0iTTIxNS4xODQgMjUxLjkyOWwtNy45OCA3Ljk3OSAyOC40NzcgMjguNDc1YTUuMjMzIDUuMjMzIDAgMDAuNDQ5LTIuMTIzdi0zMS4xNjVjLS40NjkuNjc1LS45MzQgMS4zNDktMS4zODIgMi4wMDUtLjc5MiAxLjI3NS0xLjY4MiAyLjY0LTIuNDY1IDMuOTktMi4zNDcgNC4wNjUtMy45ODIgOC4wMzgtNC41ODUgMTMuNzk0LS4xNjIuNDg1LS41MjcuNzk4LS45My43OTktLjM2My0uMDAxLS42OTctLjI1NS0uODc5LS42Njd2LS4wMTJjLS41OTMtNS44MjItMi4yMzctOS44Mi00LjYtMTMuOTE0LS43ODMtMS4zNS0xLjY3My0yLjcxNS0yLjQ2Ni0zLjk5LTEuMTM3LTEuNjY2LTIuMzI3LTMuNC0zLjYzNy01LjE2OWwtLjAwMi0uMDAzeiIgZmlsbD0iI2MzYzNjMyIvPjxwYXRoIGQ9Ik0yMTIuOTgzIDI0OC40OTVsLTM2Ljk1MiAzNi45NTN2LjgxMmE1LjIyNyA1LjIyNyAwIDAwNS4yMzggNS4yMzhoMS4wMTVsMzUuNjY2LTM1LjY2NmExMzYuMjc1IDEzNi4yNzUgMCAwMC0yLjc2NC0zLjkgMzcuNTc1IDM3LjU3NSAwIDAwLS45ODktMS40NCAzNS4xMjcgMzUuMTI3IDAgMDAtLjk1LTEuNTA4Yy0uMDgzLS4xNjItLjE3Ni0uMzI2LS4yNjQtLjQ4OXoiIGZpbGw9IiNmZGRjNGYiIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PHBhdGggZD0iTTIxMS45OTggMjYxLjA4M2wtNi4xNTIgNi4xNTEgMjQuMjY0IDI0LjI2NGguNzgxYTUuMjI3IDUuMjI3IDAgMDA1LjIzOS01LjIzOHYtMS4wNDV6IiBmaWxsPSIjZmZmIiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjwvZz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder{background:#4268b3}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik05NjcuNDg0IDBINTYuNTE3QzI1LjMwNCAwIDAgMjUuMzA0IDAgNTYuNTE3djkxMC45NjZDMCA5OTguNjk0IDI1LjI5NyAxMDI0IDU2LjUyMiAxMDI0SDU0N1Y2MjhINDE0VjQ3M2gxMzNWMzU5LjAyOWMwLTEzMi4yNjIgODAuNzczLTIwNC4yODIgMTk4Ljc1Ni0yMDQuMjgyIDU2LjUxMyAwIDEwNS4wODYgNC4yMDggMTE5LjI0NCA2LjA4OVYyOTlsLTgxLjYxNi4wMzdjLTYzLjk5MyAwLTc2LjM4NCAzMC40OTItNzYuMzg0IDc1LjIzNlY0NzNoMTUzLjQ4N2wtMTkuOTg2IDE1NUg3MDd2Mzk2aDI2MC40ODRjMzEuMjEzIDAgNTYuNTE2LTI1LjMwMyA1Ni41MTYtNTYuNTE2VjU2LjUxNUMxMDI0IDI1LjMwMyA5OTguNjk3IDAgOTY3LjQ4NCAwIiBmaWxsPSIjRkZGRkZFIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#cdf}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder{background:linear-gradient(-135deg,#1400c7,#b800b1,#f50000)}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTA0IiBoZWlnaHQ9IjUwNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0wIC4xNTloNTAzLjg0MVY1MDMuOTRIMHoiLz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48bWFzayBpZD0iYiIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYSIvPjwvbWFzaz48cGF0aCBkPSJNMjUxLjkyMS4xNTljLTY4LjQxOCAwLTc2Ljk5Ny4yOS0xMDMuODY3IDEuNTE2LTI2LjgxNCAxLjIyMy00NS4xMjcgNS40ODItNjEuMTUxIDExLjcxLTE2LjU2NiA2LjQzNy0zMC42MTUgMTUuMDUxLTQ0LjYyMSAyOS4wNTYtMTQuMDA1IDE0LjAwNi0yMi42MTkgMjguMDU1LTI5LjA1NiA0NC42MjEtNi4yMjggMTYuMDI0LTEwLjQ4NyAzNC4zMzctMTEuNzEgNjEuMTUxQy4yOSAxNzUuMDgzIDAgMTgzLjY2MiAwIDI1Mi4wOGMwIDY4LjQxNy4yOSA3Ni45OTYgMS41MTYgMTAzLjg2NiAxLjIyMyAyNi44MTQgNS40ODIgNDUuMTI3IDExLjcxIDYxLjE1MSA2LjQzNyAxNi41NjYgMTUuMDUxIDMwLjYxNSAyOS4wNTYgNDQuNjIxIDE0LjAwNiAxNC4wMDUgMjguMDU1IDIyLjYxOSA0NC42MjEgMjkuMDU3IDE2LjAyNCA2LjIyNyAzNC4zMzcgMTAuNDg2IDYxLjE1MSAxMS43MDkgMjYuODcgMS4yMjYgMzUuNDQ5IDEuNTE2IDEwMy44NjcgMS41MTYgNjguNDE3IDAgNzYuOTk2LS4yOSAxMDMuODY2LTEuNTE2IDI2LjgxNC0xLjIyMyA0NS4xMjctNS40ODIgNjEuMTUxLTExLjcwOSAxNi41NjYtNi40MzggMzAuNjE1LTE1LjA1MiA0NC42MjEtMjkuMDU3IDE0LjAwNS0xNC4wMDYgMjIuNjE5LTI4LjA1NSAyOS4wNTctNDQuNjIxIDYuMjI3LTE2LjAyNCAxMC40ODYtMzQuMzM3IDExLjcwOS02MS4xNTEgMS4yMjYtMjYuODcgMS41MTYtMzUuNDQ5IDEuNTE2LTEwMy44NjYgMC02OC40MTgtLjI5LTc2Ljk5Ny0xLjUxNi0xMDMuODY3LTEuMjIzLTI2LjgxNC01LjQ4Mi00NS4xMjctMTEuNzA5LTYxLjE1MS02LjQzOC0xNi41NjYtMTUuMDUyLTMwLjYxNS0yOS4wNTctNDQuNjIxLTE0LjAwNi0xNC4wMDUtMjguMDU1LTIyLjYxOS00NC42MjEtMjkuMDU2LTE2LjAyNC02LjIyOC0zNC4zMzctMTAuNDg3LTYxLjE1MS0xMS43MUMzMjguOTE3LjQ0OSAzMjAuMzM4LjE1OSAyNTEuOTIxLjE1OXptMCA0NS4zOTFjNjcuMjY1IDAgNzUuMjMzLjI1NyAxMDEuNzk3IDEuNDY5IDI0LjU2MiAxLjEyIDM3LjkwMSA1LjIyNCA0Ni43NzggOC42NzQgMTEuNzU5IDQuNTcgMjAuMTUxIDEwLjAyOSAyOC45NjYgMTguODQ1IDguODE2IDguODE1IDE0LjI3NSAxNy4yMDcgMTguODQ1IDI4Ljk2NiAzLjQ1IDguODc3IDcuNTU0IDIyLjIxNiA4LjY3NCA0Ni43NzggMS4yMTIgMjYuNTY0IDEuNDY5IDM0LjUzMiAxLjQ2OSAxMDEuNzk4IDAgNjcuMjY1LS4yNTcgNzUuMjMzLTEuNDY5IDEwMS43OTctMS4xMiAyNC41NjItNS4yMjQgMzcuOTAxLTguNjc0IDQ2Ljc3OC00LjU3IDExLjc1OS0xMC4wMjkgMjAuMTUxLTE4Ljg0NSAyOC45NjYtOC44MTUgOC44MTYtMTcuMjA3IDE0LjI3NS0yOC45NjYgMTguODQ1LTguODc3IDMuNDUtMjIuMjE2IDcuNTU0LTQ2Ljc3OCA4LjY3NC0yNi41NiAxLjIxMi0zNC41MjcgMS40NjktMTAxLjc5NyAxLjQ2OS02Ny4yNzEgMC03NS4yMzctLjI1Ny0xMDEuNzk4LTEuNDY5LTI0LjU2Mi0xLjEyLTM3LjkwMS01LjIyNC00Ni43NzgtOC42NzQtMTEuNzU5LTQuNTctMjAuMTUxLTEwLjAyOS0yOC45NjYtMTguODQ1LTguODE1LTguODE1LTE0LjI3NS0xNy4yMDctMTguODQ1LTI4Ljk2Ni0zLjQ1LTguODc3LTcuNTU0LTIyLjIxNi04LjY3NC00Ni43NzgtMS4yMTItMjYuNTY0LTEuNDY5LTM0LjUzMi0xLjQ2OS0xMDEuNzk3IDAtNjcuMjY2LjI1Ny03NS4yMzQgMS40NjktMTAxLjc5OCAxLjEyLTI0LjU2MiA1LjIyNC0zNy45MDEgOC42NzQtNDYuNzc4IDQuNTctMTEuNzU5IDEwLjAyOS0yMC4xNTEgMTguODQ1LTI4Ljk2NiA4LjgxNS04LjgxNiAxNy4yMDctMTQuMjc1IDI4Ljk2Ni0xOC44NDUgOC44NzctMy40NSAyMi4yMTYtNy41NTQgNDYuNzc4LTguNjc0IDI2LjU2NC0xLjIxMiAzNC41MzItMS40NjkgMTAxLjc5OC0xLjQ2OXoiIGZpbGw9IiNGRkYiIG1hc2s9InVybCgjYikiLz48cGF0aCBkPSJNMjUxLjkyMSAzMzYuMDUzYy00Ni4zNzggMC04My45NzQtMzcuNTk2LTgzLjk3NC04My45NzMgMC00Ni4zNzggMzcuNTk2LTgzLjk3NCA4My45NzQtODMuOTc0IDQ2LjM3NyAwIDgzLjk3MyAzNy41OTYgODMuOTczIDgzLjk3NCAwIDQ2LjM3Ny0zNy41OTYgODMuOTczLTgzLjk3MyA4My45NzN6bTAtMjEzLjMzOGMtNzEuNDQ3IDAtMTI5LjM2NSA1Ny45MTgtMTI5LjM2NSAxMjkuMzY1IDAgNzEuNDQ2IDU3LjkxOCAxMjkuMzY0IDEyOS4zNjUgMTI5LjM2NCA3MS40NDYgMCAxMjkuMzY0LTU3LjkxOCAxMjkuMzY0LTEyOS4zNjQgMC03MS40NDctNTcuOTE4LTEyOS4zNjUtMTI5LjM2NC0xMjkuMzY1ek00MTYuNjI3IDExNy42MDRjMCAxNi42OTYtMTMuNTM1IDMwLjIzLTMwLjIzMSAzMC4yMy0xNi42OTUgMC0zMC4yMy0xMy41MzQtMzAuMjMtMzAuMjMgMC0xNi42OTYgMTMuNTM1LTMwLjIzMSAzMC4yMy0zMC4yMzEgMTYuNjk2IDAgMzAuMjMxIDEzLjUzNSAzMC4yMzEgMzAuMjMxIiBmaWxsPSIjRkZGIi8+PC9nPjwvc3ZnPg==)}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#ffe0fe}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder{background:linear-gradient(90deg,#71c6f4,#0d70a5)}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MDAgNDAwIj48cGF0aCBkPSJNNDAwIDIwMGMwIDExMC41LTg5LjUgMjAwLTIwMCAyMDBTMCAzMTAuNSAwIDIwMCA4OS41IDAgMjAwIDBzMjAwIDg5LjUgMjAwIDIwMHpNMTYzLjQgMzA1LjVjODguNyAwIDEzNy4yLTczLjUgMTM3LjItMTM3LjIgMC0yLjEgMC00LjItLjEtNi4yIDkuNC02LjggMTcuNi0xNS4zIDI0LjEtMjUtOC42IDMuOC0xNy45IDYuNC0yNy43IDcuNiAxMC02IDE3LjYtMTUuNCAyMS4yLTI2LjctOS4zIDUuNS0xOS42IDkuNS0zMC42IDExLjctOC44LTkuNC0yMS4zLTE1LjItMzUuMi0xNS4yLTI2LjYgMC00OC4yIDIxLjYtNDguMiA0OC4yIDAgMy44LjQgNy41IDEuMyAxMS00MC4xLTItNzUuNi0yMS4yLTk5LjQtNTAuNC00LjEgNy4xLTYuNSAxNS40LTYuNSAyNC4yIDAgMTYuNyA4LjUgMzEuNSAyMS41IDQwLjEtNy45LS4yLTE1LjMtMi40LTIxLjgtNnYuNmMwIDIzLjQgMTYuNiA0Mi44IDM4LjcgNDcuMy00IDEuMS04LjMgMS43LTEyLjcgMS43LTMuMSAwLTYuMS0uMy05LjEtLjkgNi4xIDE5LjIgMjMuOSAzMy4xIDQ1IDMzLjUtMTYuNSAxMi45LTM3LjMgMjAuNi01OS45IDIwLjYtMy45IDAtNy43LS4yLTExLjUtLjcgMjEuMSAxMy44IDQ2LjUgMjEuOCA3My43IDIxLjgiIGZpbGw9IiNmZmYiLz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__url__text{color:#b8e6ff}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}';},function(e,t,i){var n=i(1),o=i(103);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck.ck-media-form{display:flex;align-items:flex-start;flex-direction:row;flex-wrap:nowrap}.ck.ck-media-form .ck-labeled-field-view{display:inline-block}.ck.ck-media-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-media-form{flex-wrap:wrap}.ck.ck-media-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-media-form .ck-button{flex-basis:50%}}";},function(e,t,i){var n=i(1),o=i(105);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck-content .media{clear:both;margin:.9em 0;display:block;min-width:15em}";},function(e,t,i){var n=i(1),o=i(107);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=":root{--ck-color-table-focused-cell-background:rgba(158,207,250,0.3)}.ck-widget.table td.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table td.ck-editor__nested-editable:focus,.ck-widget.table th.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table th.ck-editor__nested-editable:focus{background:var(--ck-color-table-focused-cell-background);border-style:none;outline:1px solid var(--ck-color-focus-border);outline-offset:-1px}";},function(e,t,i){var n=i(1),o=i(109);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck .ck-insert-table-dropdown__grid{display:flex;flex-direction:row;flex-wrap:wrap}:root{--ck-insert-table-dropdown-padding:10px;--ck-insert-table-dropdown-box-height:11px;--ck-insert-table-dropdown-box-width:12px;--ck-insert-table-dropdown-box-margin:1px}.ck .ck-insert-table-dropdown__grid{width:calc(var(--ck-insert-table-dropdown-box-width)*10 + var(--ck-insert-table-dropdown-box-margin)*20 + var(--ck-insert-table-dropdown-padding)*2);padding:var(--ck-insert-table-dropdown-padding) var(--ck-insert-table-dropdown-padding) 0}.ck .ck-insert-table-dropdown__label{text-align:center}.ck .ck-insert-table-dropdown-grid-box{width:var(--ck-insert-table-dropdown-box-width);height:var(--ck-insert-table-dropdown-box-height);margin:var(--ck-insert-table-dropdown-box-margin);border:1px solid var(--ck-color-base-border);border-radius:1px}.ck .ck-insert-table-dropdown-grid-box.ck-on{border-color:var(--ck-color-focus-border);background:var(--ck-color-focus-outer-shadow)}";},function(e,t,i){var n=i(1),o=i(111);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=':root{--ck-table-selected-cell-background:rgba(158,207,250,0.3)}.ck.ck-editor__editable .table table td.ck-editor__editable_selected,.ck.ck-editor__editable .table table th.ck-editor__editable_selected{position:relative;caret-color:transparent;outline:unset;box-shadow:unset}.ck.ck-editor__editable .table table td.ck-editor__editable_selected:after,.ck.ck-editor__editable .table table th.ck-editor__editable_selected:after{content:"";pointer-events:none;background-color:var(--ck-table-selected-cell-background);position:absolute;top:0;left:0;right:0;bottom:0}.ck.ck-editor__editable .table table td.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table td.ck-editor__editable_selected:focus,.ck.ck-editor__editable .table table th.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table th.ck-editor__editable_selected:focus{background-color:transparent}.ck.ck-editor__editable .table table td.ck-editor__editable_selected .ck-widget_selected,.ck.ck-editor__editable .table table th.ck-editor__editable_selected .ck-widget_selected{outline:unset}';},function(e,t,i){var n=i(1),o=i(113);"string"==typeof(o=o.__esModule?o["default"]:o)&&(o=[[e.i,o,""]]);var r={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};n(o,r);e.exports=o.locals||{};},function(e,t){e.exports=".ck-content .table{margin:.9em auto;display:table}.ck-content .table table{border-collapse:collapse;border-spacing:0;width:100%;height:100%;border:1px double #b3b3b3}.ck-content .table table td,.ck-content .table table th{min-width:2em;padding:.4em;border:1px solid #bfbfbf}.ck-content .table table th{font-weight:700;background:hsla(0,0%,0%,5%)}.ck-content[dir=rtl] .table th{text-align:right}.ck-content[dir=ltr] .table th{text-align:left}.ck-editor__editable .ck-table-bogus-paragraph{display:inline-block;width:100%}";},function(e,t,i){"use strict";var _marked=/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(hl),_marked2=/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(gl),_marked3=/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(qu);i.r(t),i.d(t,"default",function(){return r_;});var n=function n(){return function e(){e.called=!0;};};var o=/*#__PURE__*/_createClass(function o(e,t){_classCallCheck(this,o);this.source=e,this.name=t,this.path=[],this.stop=n(),this.off=n();});var r=new Array(256).fill().map(function(e,t){return("0"+t.toString(16)).slice(-2);});function s(){var e=4294967296*Math.random()>>>0,t=4294967296*Math.random()>>>0,i=4294967296*Math.random()>>>0,n=4294967296*Math.random()>>>0;return"e"+r[e>>0&255]+r[e>>8&255]+r[e>>16&255]+r[e>>24&255]+r[t>>0&255]+r[t>>8&255]+r[t>>16&255]+r[t>>24&255]+r[i>>0&255]+r[i>>8&255]+r[i>>16&255]+r[i>>24&255]+r[n>>0&255]+r[n>>8&255]+r[n>>16&255]+r[n>>24&255];}var a={get:function get(e){return"number"!=typeof e?this[e]||this.normal:e;},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5},l=(i(6),i(0));var c=Symbol("listeningTo"),d=Symbol("emitterId");var u={on:function on(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};this.listenTo(this,e,t,i);},once:function once(e,t,i){var n=!1;this.listenTo(this,e,function(e){for(var _len=arguments.length,i=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){i[_key-1]=arguments[_key];}n||(n=!0,e.off(),t.call.apply(t,[this,e].concat(i)));},i);},off:function off(e,t){this.stopListening(this,e,t);},listenTo:function listenTo(e,t,i){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var o,r;this[c]||(this[c]={});var s=this[c];g(e)||h(e);var a=g(e);(o=s[a])||(o=s[a]={emitter:e,callbacks:{}}),(r=o.callbacks[t])||(r=o.callbacks[t]=[]),r.push(i),function(e,t,i,n,o){t._addEventListener?t._addEventListener(i,n,o):e._addEventListener.call(t,i,n,o);}(this,e,t,i,n);},stopListening:function stopListening(e,t,i){var n=this[c];var o=e&&g(e);var r=n&&o&&n[o],s=r&&t&&r.callbacks[t];if(!(!n||e&&!r||t&&!s))if(i){b(this,e,t,i);-1!==s.indexOf(i)&&(1===s.length?delete r.callbacks[t]:b(this,e,t,i));}else if(s){for(;i=s.pop();){b(this,e,t,i);}delete r.callbacks[t];}else if(r){for(t in r.callbacks){this.stopListening(e,t);}delete n[o];}else{for(o in n){this.stopListening(n[o].emitter);}delete this[c];}},fire:function fire(e){try{var _i2=e instanceof o?e:new o(this,e),_n2=_i2.name;var _r2=function e(t,i){var n;if(!t._events||!(n=t._events[i])||!n.callbacks.length)return i.indexOf(":")>-1?e(t,i.substr(0,i.lastIndexOf(":"))):null;return n.callbacks;}(this,_n2);for(var _len2=arguments.length,t=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++){t[_key2-1]=arguments[_key2];}if(_i2.path.push(this),_r2){var _e2=[_i2].concat(t);_r2=Array.from(_r2);for(var _t2=0;_t2<_r2.length&&(_r2[_t2].callback.apply(this,_e2),_i2.off.called&&(delete _i2.off.called,this._removeEventListener(_n2,_r2[_t2].callback)),!_i2.stop.called);_t2++){;}}if(this._delegations){var _e3=this._delegations.get(_n2),_o2=this._delegations.get("*");_e3&&p(_e3,_i2,t),_o2&&p(_o2,_i2,t);}return _i2["return"];}catch(e){l.a.rethrowUnexpectedError(e,this);}},delegate:function delegate(){var _this2=this;for(var _len3=arguments.length,e=new Array(_len3),_key3=0;_key3<_len3;_key3++){e[_key3]=arguments[_key3];}return{to:function to(t,i){_this2._delegations||(_this2._delegations=new Map()),e.forEach(function(e){var n=_this2._delegations.get(e);n?n.set(t,i):_this2._delegations.set(e,new Map([[t,i]]));});}};},stopDelegating:function stopDelegating(e,t){if(this._delegations)if(e){if(t){var _i3=this._delegations.get(e);_i3&&_i3["delete"](t);}else this._delegations["delete"](e);}else this._delegations.clear();},_addEventListener:function _addEventListener(e,t,i){!function(e,t){var i=m(e);if(i[t])return;var n=t,o=null;var r=[];for(;""!==n&&!i[n];){i[n]={callbacks:[],childEvents:[]},r.push(i[n]),o&&i[n].childEvents.push(o),o=n,n=n.substr(0,n.lastIndexOf(":"));}if(""!==n){var _iterator=_createForOfIteratorHelper(r),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _e4=_step.value;_e4.callbacks=i[n].callbacks.slice();}}catch(err){_iterator.e(err);}finally{_iterator.f();}i[n].childEvents.push(o);}}(this,e);var n=f(this,e),o=a.get(i.priority),r={callback:t,priority:o};var _iterator2=_createForOfIteratorHelper(n),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _e5=_step2.value;var _t3=!1;for(var _i4=0;_i4<_e5.length;_i4++){if(_e5[_i4].priority<o){_e5.splice(_i4,0,r),_t3=!0;break;}}_t3||_e5.push(r);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}},_removeEventListener:function _removeEventListener(e,t){var i=f(this,e);var _iterator3=_createForOfIteratorHelper(i),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var _e6=_step3.value;for(var _i5=0;_i5<_e6.length;_i5++){_e6[_i5].callback==t&&(_e6.splice(_i5,1),_i5--);}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}};function h(e,t){e[d]||(e[d]=t||s());}function g(e){return e[d];}function m(e){return e._events||Object.defineProperty(e,"_events",{value:{}}),e._events;}function f(e,t){var i=m(e)[t];if(!i)return[];var n=[i.callbacks];for(var _t4=0;_t4<i.childEvents.length;_t4++){var _o3=f(e,i.childEvents[_t4]);n=n.concat(_o3);}return n;}function p(e,t,i){var _iterator4=_createForOfIteratorHelper(e),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _step4$value=_slicedToArray(_step4.value,2),_n3=_step4$value[0],_r3=_step4$value[1];_r3?"function"==typeof _r3&&(_r3=_r3(t.name)):_r3=t.name;var _e7=new o(t.source,_r3);_e7.path=_toConsumableArray(t.path),_n3.fire.apply(_n3,[_e7].concat(_toConsumableArray(i)));}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}}function b(e,t,i,n){t._removeEventListener?t._removeEventListener(i,n):e._removeEventListener.call(t,i,n);}var w=function w(e){var t=_typeof(e);return null!=e&&("object"==t||"function"==t);},k=i(3),_=k.a.Symbol,v=Object.prototype,y=v.hasOwnProperty,x=v.toString,A=_?_.toStringTag:void 0;var C=function C(e){var t=y.call(e,A),i=e[A];try{e[A]=void 0;var n=!0;}catch(e){}var o=x.call(e);return n&&(t?e[A]=i:delete e[A]),o;},T=Object.prototype.toString;var E=function E(e){return T.call(e);},I=_?_.toStringTag:void 0;var S=function S(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":I&&I in Object(e)?C(e):E(e);};var P,M=function M(e){if(!w(e))return!1;var t=S(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t;},N=k.a["__core-js_shared__"],R=(P=/[^.]+$/.exec(N&&N.keys&&N.keys.IE_PROTO||""))?"Symbol(src)_1."+P:"";var z=function z(e){return!!R&&R in e;},O=Function.prototype.toString;var D=function D(e){if(null!=e){try{return O.call(e);}catch(e){}try{return e+"";}catch(e){}}return"";},L=/^\[object .+?Constructor\]$/,V=Function.prototype,B=Object.prototype,j=V.toString,F=B.hasOwnProperty,H=RegExp("^"+j.call(F).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var U=function U(e){return!(!w(e)||z(e))&&(M(e)?H:L).test(D(e));};var W=function W(e,t){return null==e?void 0:e[t];};var q=function q(e,t){var i=W(e,t);return U(i)?i:void 0;},$=function(){try{var e=q(Object,"defineProperty");return e({},"",{}),e;}catch(e){}}();var Y=function Y(e,t,i){"__proto__"==t&&$?$(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i;};var G=function G(e,t){return e===t||e!=e&&t!=t;},K=Object.prototype.hasOwnProperty;var Q=function Q(e,t,i){var n=e[t];K.call(e,t)&&G(n,i)&&(void 0!==i||t in e)||Y(e,t,i);};var J=function J(e,t,i,n){var o=!i;i||(i={});for(var r=-1,s=t.length;++r<s;){var a=t[r],l=n?n(i[a],e[a],a,i,e):void 0;void 0===l&&(l=e[a]),o?Y(i,a,l):Q(i,a,l);}return i;};var Z=function Z(e){return e;};var X=function X(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2]);}return e.apply(t,i);},ee=Math.max;var te=function te(e,t,i){return t=ee(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,r=ee(n.length-t,0),s=Array(r);++o<r;){s[o]=n[t+o];}o=-1;for(var a=Array(t+1);++o<t;){a[o]=n[o];}return a[t]=i(s),X(e,this,a);};};var ie=function ie(e){return function(){return e;};},ne=$?function(e,t){return $(e,"toString",{configurable:!0,enumerable:!1,value:ie(t),writable:!0});}:Z,oe=Date.now;var re=function(e){var t=0,i=0;return function(){var n=oe(),o=16-(n-i);if(i=n,o>0){if(++t>=800)return arguments[0];}else t=0;return e.apply(void 0,arguments);};}(ne);var se=function se(e,t){return re(te(e,t,Z),e+"");};var ae=function ae(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991;};var le=function le(e){return null!=e&&ae(e.length)&&!M(e);},ce=/^(?:0|[1-9]\d*)$/;var de=function de(e,t){var i=_typeof(e);return!!(t=null==t?9007199254740991:t)&&("number"==i||"symbol"!=i&&ce.test(e))&&e>-1&&e%1==0&&e<t;};var ue=function ue(e,t,i){if(!w(i))return!1;var n=_typeof(t);return!!("number"==n?le(i)&&de(t,i.length):"string"==n&&t in i)&&G(i[t],e);};var he=function he(e){return se(function(t,i){var n=-1,o=i.length,r=o>1?i[o-1]:void 0,s=o>2?i[2]:void 0;for(r=e.length>3&&"function"==typeof r?(o--,r):void 0,s&&ue(i[0],i[1],s)&&(r=o<3?void 0:r,o=1),t=Object(t);++n<o;){var a=i[n];a&&e(t,a,n,r);}return t;});};var ge=function ge(e,t){for(var i=-1,n=Array(e);++i<e;){n[i]=t(i);}return n;};var me=function me(e){return null!=e&&"object"==_typeof(e);};var fe=function fe(e){return me(e)&&"[object Arguments]"==S(e);},pe=Object.prototype,be=pe.hasOwnProperty,we=pe.propertyIsEnumerable,ke=fe(function(){return arguments;}())?fe:function(e){return me(e)&&be.call(e,"callee")&&!we.call(e,"callee");},_e=Array.isArray,ve=i(4),ye={};ye["[object Float32Array]"]=ye["[object Float64Array]"]=ye["[object Int8Array]"]=ye["[object Int16Array]"]=ye["[object Int32Array]"]=ye["[object Uint8Array]"]=ye["[object Uint8ClampedArray]"]=ye["[object Uint16Array]"]=ye["[object Uint32Array]"]=!0,ye["[object Arguments]"]=ye["[object Array]"]=ye["[object ArrayBuffer]"]=ye["[object Boolean]"]=ye["[object DataView]"]=ye["[object Date]"]=ye["[object Error]"]=ye["[object Function]"]=ye["[object Map]"]=ye["[object Number]"]=ye["[object Object]"]=ye["[object RegExp]"]=ye["[object Set]"]=ye["[object String]"]=ye["[object WeakMap]"]=!1;var xe=function xe(e){return me(e)&&ae(e.length)&&!!ye[S(e)];};var Ae=function Ae(e){return function(t){return e(t);};},Ce=i(5),Te=Ce.a&&Ce.a.isTypedArray,Ee=Te?Ae(Te):xe,Ie=Object.prototype.hasOwnProperty;var Se=function Se(e,t){var i=_e(e),n=!i&&ke(e),o=!i&&!n&&Object(ve.a)(e),r=!i&&!n&&!o&&Ee(e),s=i||n||o||r,a=s?ge(e.length,String):[],l=a.length;for(var c in e){!t&&!Ie.call(e,c)||s&&("length"==c||o&&("offset"==c||"parent"==c)||r&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||de(c,l))||a.push(c);}return a;},Pe=Object.prototype;var Me=function Me(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Pe);};var Ne=function Ne(e){var t=[];if(null!=e)for(var i in Object(e)){t.push(i);}return t;},Re=Object.prototype.hasOwnProperty;var ze=function ze(e){if(!w(e))return Ne(e);var t=Me(e),i=[];for(var n in e){("constructor"!=n||!t&&Re.call(e,n))&&i.push(n);}return i;};var Oe=function Oe(e){return le(e)?Se(e,!0):ze(e);},De=he(function(e,t){J(t,Oe(t),e);});var Le=Symbol("observableProperties"),Ve=Symbol("boundObservables"),Be=Symbol("boundProperties"),je=Symbol("decoratedMethods"),Fe=Symbol("decoratedOriginal"),He={set:function set(e,t){var _this3=this;if(w(e))return void Object.keys(e).forEach(function(t){_this3.set(t,e[t]);},this);We(this);var i=this[Le];if(e in this&&!i.has(e))throw new l.a("observable-set-cannot-override",this);Object.defineProperty(this,e,{enumerable:!0,configurable:!0,get:function get(){return i.get(e);},set:function set(t){var n=i.get(e);var o=this.fire("set:"+e,e,t,n);void 0===o&&(o=t),n===o&&i.has(e)||(i.set(e,o),this.fire("change:"+e,e,o,n));}}),this[e]=t;},bind:function bind(){var _this4=this;for(var _len4=arguments.length,e=new Array(_len4),_key4=0;_key4<_len4;_key4++){e[_key4]=arguments[_key4];}if(!e.length||!Ye(e))throw new l.a("observable-bind-wrong-properties",this);if(new Set(e).size!==e.length)throw new l.a("observable-bind-duplicate-properties",this);We(this);var t=this[Be];e.forEach(function(e){if(t.has(e))throw new l.a("observable-bind-rebind",_this4);});var i=new Map();return e.forEach(function(e){var n={property:e,to:[]};t.set(e,n),i.set(e,n);}),{to:qe,toMany:$e,_observable:this,_bindProperties:e,_to:[],_bindings:i};},unbind:function unbind(){var _this5=this;if(!this[Le])return;var t=this[Be],i=this[Ve];for(var _len5=arguments.length,e=new Array(_len5),_key5=0;_key5<_len5;_key5++){e[_key5]=arguments[_key5];}if(e.length){if(!Ye(e))throw new l.a("observable-unbind-wrong-properties",this);e.forEach(function(e){var n=t.get(e);if(!n)return;var o,r,s,a;n.to.forEach(function(e){o=e[0],r=e[1],s=i.get(o),a=s[r],a["delete"](n),a.size||delete s[r],Object.keys(s).length||(i["delete"](o),_this5.stopListening(o,"change"));}),t["delete"](e);});}else i.forEach(function(e,t){_this5.stopListening(t,"change");}),i.clear(),t.clear();},decorate:function decorate(e){var _this6=this;var t=this[e];if(!t)throw new l.a("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:e});this.on(e,function(e,i){e["return"]=t.apply(_this6,i);}),this[e]=function(){for(var _len6=arguments.length,t=new Array(_len6),_key6=0;_key6<_len6;_key6++){t[_key6]=arguments[_key6];}return this.fire(e,t);},this[e][Fe]=t,this[je]||(this[je]=[]),this[je].push(e);}};De(He,u),He.stopListening=function(e,t,i){if(!e&&this[je]){var _iterator5=_createForOfIteratorHelper(this[je]),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var _e8=_step5.value;this[_e8]=this[_e8][Fe];}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}delete this[je];}u.stopListening.call(this,e,t,i);};var Ue=He;function We(e){e[Le]||(Object.defineProperty(e,Le,{value:new Map()}),Object.defineProperty(e,Ve,{value:new Map()}),Object.defineProperty(e,Be,{value:new Map()}));}function qe(){var _this7=this;var t=function(){for(var _len7=arguments.length,e=new Array(_len7),_key7=0;_key7<_len7;_key7++){e[_key7]=arguments[_key7];}if(!e.length)throw new l.a("observable-bind-to-parse-error",null);var t={to:[]};var i;"function"==typeof e[e.length-1]&&(t.callback=e.pop());return e.forEach(function(e){if("string"==typeof e)i.properties.push(e);else{if("object"!=_typeof(e))throw new l.a("observable-bind-to-parse-error",null);i={observable:e,properties:[]},t.to.push(i);}}),t;}.apply(void 0,arguments),i=Array.from(this._bindings.keys()),n=i.length;if(!t.callback&&t.to.length>1)throw new l.a("observable-bind-to-no-callback",this);if(n>1&&t.callback)throw new l.a("observable-bind-to-extra-callback",this);var o;t.to.forEach(function(e){if(e.properties.length&&e.properties.length!==n)throw new l.a("observable-bind-to-properties-length",_this7);e.properties.length||(e.properties=_this7._bindProperties);}),this._to=t.to,t.callback&&(this._bindings.get(i[0]).callback=t.callback),o=this._observable,this._to.forEach(function(e){var t=o[Ve];var i;t.get(e.observable)||o.listenTo(e.observable,"change",function(n,r){i=t.get(e.observable)[r],i&&i.forEach(function(e){Ge(o,e.property);});});}),function(e){var t;e._bindings.forEach(function(i,n){e._to.forEach(function(o){t=o.properties[i.callback?0:e._bindProperties.indexOf(n)],i.to.push([o.observable,t]),function(e,t,i,n){var o=e[Ve],r=o.get(i),s=r||{};s[n]||(s[n]=new Set());s[n].add(t),r||o.set(i,s);}(e._observable,i,o.observable,t);});});}(this),this._bindProperties.forEach(function(e){Ge(_this7._observable,e);});}function $e(e,t,i){if(this._bindings.size>1)throw new l.a("observable-bind-to-many-not-one-binding",this);this.to.apply(this,_toConsumableArray(function(e,t){var i=e.map(function(e){return[e,t];});return Array.prototype.concat.apply([],i);}(e,t)).concat([i]));}function Ye(e){return e.every(function(e){return"string"==typeof e;});}function Ge(e,t){var i=e[Be].get(t);var n;i.callback?n=i.callback.apply(e,i.to.map(function(e){return e[0][e[1]];})):(n=i.to[0],n=n[0][n[1]]),Object.prototype.hasOwnProperty.call(e,t)?e[t]=n:e.set(t,n);}function Ke(e){for(var _len8=arguments.length,t=new Array(_len8>1?_len8-1:0),_key8=1;_key8<_len8;_key8++){t[_key8-1]=arguments[_key8];}t.forEach(function(t){Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t)).forEach(function(i){if(i in e.prototype)return;var n=Object.getOwnPropertyDescriptor(t,i);n.enumerable=!1,Object.defineProperty(e.prototype,i,n);});});}var Qe=/*#__PURE__*/function(){function Qe(e){_classCallCheck(this,Qe);this.editor=e,this.set("isEnabled",!0),this._disableStack=new Set();}_createClass(Qe,[{key:"forceDisabled",value:function forceDisabled(e){this._disableStack.add(e),1==this._disableStack.size&&(this.on("set:isEnabled",Je,{priority:"highest"}),this.isEnabled=!1);}},{key:"clearForceDisabled",value:function clearForceDisabled(e){this._disableStack["delete"](e),0==this._disableStack.size&&(this.off("set:isEnabled",Je),this.isEnabled=!0);}},{key:"destroy",value:function destroy(){this.stopListening();}}],[{key:"isContextPlugin",get:function get(){return!1;}}]);return Qe;}();function Je(e){e["return"]=!1,e.stop();}Ke(Qe,Ue);var Ze=/*#__PURE__*/function(){function Ze(e){var _this8=this;_classCallCheck(this,Ze);this.editor=e,this.set("value",void 0),this.set("isEnabled",!1),this._disableStack=new Set(),this.decorate("execute"),this.listenTo(this.editor.model.document,"change",function(){_this8.refresh();}),this.on("execute",function(e){_this8.isEnabled||e.stop();},{priority:"high"}),this.listenTo(e,"change:isReadOnly",function(e,t,i){i?_this8.forceDisabled("readOnlyMode"):_this8.clearForceDisabled("readOnlyMode");});}_createClass(Ze,[{key:"refresh",value:function refresh(){this.isEnabled=!0;}},{key:"forceDisabled",value:function forceDisabled(e){this._disableStack.add(e),1==this._disableStack.size&&(this.on("set:isEnabled",Xe,{priority:"highest"}),this.isEnabled=!1);}},{key:"clearForceDisabled",value:function clearForceDisabled(e){this._disableStack["delete"](e),0==this._disableStack.size&&(this.off("set:isEnabled",Xe),this.refresh());}},{key:"execute",value:function execute(){}},{key:"destroy",value:function destroy(){this.stopListening();}}]);return Ze;}();function Xe(e){e["return"]=!1,e.stop();}Ke(Ze,Ue);var et=/*#__PURE__*/function(_Ze){_inherits(et,_Ze);var _super2=_createSuper(et);function et(e){var _this9;_classCallCheck(this,et);_this9=_super2.call(this,e),_this9._childCommands=[];return _this9;}_createClass(et,[{key:"refresh",value:function refresh(){}},{key:"execute",value:function execute(){var t=this._getFirstEnabledCommand();for(var _len9=arguments.length,e=new Array(_len9),_key9=0;_key9<_len9;_key9++){e[_key9]=arguments[_key9];}return null!=t&&t.execute(e);}},{key:"registerChildCommand",value:function registerChildCommand(e){var _this10=this;this._childCommands.push(e),e.on("change:isEnabled",function(){return _this10._checkEnabled();}),this._checkEnabled();}},{key:"_checkEnabled",value:function _checkEnabled(){this.isEnabled=!!this._getFirstEnabledCommand();}},{key:"_getFirstEnabledCommand",value:function _getFirstEnabledCommand(){return this._childCommands.find(function(e){return e.isEnabled;});}}]);return et;}(Ze);var tt=function tt(e,t){return function(i){return e(t(i));};},it=tt(Object.getPrototypeOf,Object),nt=Function.prototype,ot=Object.prototype,rt=nt.toString,st=ot.hasOwnProperty,at=rt.call(Object);var lt=function lt(e){if(!me(e)||"[object Object]"!=S(e))return!1;var t=it(e);if(null===t)return!0;var i=st.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&rt.call(i)==at;};var ct=function ct(){this.__data__=[],this.size=0;};var dt=function dt(e,t){for(var i=e.length;i--;){if(G(e[i][0],t))return i;}return-1;},ut=Array.prototype.splice;var ht=function ht(e){var t=this.__data__,i=dt(t,e);return!(i<0)&&(i==t.length-1?t.pop():ut.call(t,i,1),--this.size,!0);};var gt=function gt(e){var t=this.__data__,i=dt(t,e);return i<0?void 0:t[i][1];};var mt=function mt(e){return dt(this.__data__,e)>-1;};var ft=function ft(e,t){var i=this.__data__,n=dt(i,e);return n<0?(++this.size,i.push([e,t])):i[n][1]=t,this;};function pt(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1]);}}pt.prototype.clear=ct,pt.prototype["delete"]=ht,pt.prototype.get=gt,pt.prototype.has=mt,pt.prototype.set=ft;var bt=pt;var wt=function wt(){this.__data__=new bt(),this.size=0;};var kt=function kt(e){var t=this.__data__,i=t["delete"](e);return this.size=t.size,i;};var _t=function _t(e){return this.__data__.get(e);};var vt=function vt(e){return this.__data__.has(e);},yt=q(k.a,"Map"),xt=q(Object,"create");var At=function At(){this.__data__=xt?xt(null):{},this.size=0;};var Ct=function Ct(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t;},Tt=Object.prototype.hasOwnProperty;var Et=function Et(e){var t=this.__data__;if(xt){var i=t[e];return"__lodash_hash_undefined__"===i?void 0:i;}return Tt.call(t,e)?t[e]:void 0;},It=Object.prototype.hasOwnProperty;var St=function St(e){var t=this.__data__;return xt?void 0!==t[e]:It.call(t,e);};var Pt=function Pt(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=xt&&void 0===t?"__lodash_hash_undefined__":t,this;};function Mt(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1]);}}Mt.prototype.clear=At,Mt.prototype["delete"]=Ct,Mt.prototype.get=Et,Mt.prototype.has=St,Mt.prototype.set=Pt;var Nt=Mt;var Rt=function Rt(){this.size=0,this.__data__={hash:new Nt(),map:new(yt||bt)(),string:new Nt()};};var zt=function zt(e){var t=_typeof(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e;};var Ot=function Ot(e,t){var i=e.__data__;return zt(t)?i["string"==typeof t?"string":"hash"]:i.map;};var Dt=function Dt(e){var t=Ot(this,e)["delete"](e);return this.size-=t?1:0,t;};var Lt=function Lt(e){return Ot(this,e).get(e);};var Vt=function Vt(e){return Ot(this,e).has(e);};var Bt=function Bt(e,t){var i=Ot(this,e),n=i.size;return i.set(e,t),this.size+=i.size==n?0:1,this;};function jt(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1]);}}jt.prototype.clear=Rt,jt.prototype["delete"]=Dt,jt.prototype.get=Lt,jt.prototype.has=Vt,jt.prototype.set=Bt;var Ft=jt;var Ht=function Ht(e,t){var i=this.__data__;if(i instanceof bt){var n=i.__data__;if(!yt||n.length<199)return n.push([e,t]),this.size=++i.size,this;i=this.__data__=new Ft(n);}return i.set(e,t),this.size=i.size,this;};function Ut(e){var t=this.__data__=new bt(e);this.size=t.size;}Ut.prototype.clear=wt,Ut.prototype["delete"]=kt,Ut.prototype.get=_t,Ut.prototype.has=vt,Ut.prototype.set=Ht;var Wt=Ut;var qt=function qt(e,t){for(var i=-1,n=null==e?0:e.length;++i<n&&!1!==t(e[i],i,e);){;}return e;},$t=tt(Object.keys,Object),Yt=Object.prototype.hasOwnProperty;var Gt=function Gt(e){if(!Me(e))return $t(e);var t=[];for(var i in Object(e)){Yt.call(e,i)&&"constructor"!=i&&t.push(i);}return t;};var Kt=function Kt(e){return le(e)?Se(e):Gt(e);};var Qt=function Qt(e,t){return e&&J(t,Kt(t),e);};var Jt=function Jt(e,t){return e&&J(t,Oe(t),e);},Zt=i(9);var Xt=function Xt(e,t){var i=-1,n=e.length;for(t||(t=Array(n));++i<n;){t[i]=e[i];}return t;};var ei=function ei(e,t){for(var i=-1,n=null==e?0:e.length,o=0,r=[];++i<n;){var s=e[i];t(s,i,e)&&(r[o++]=s);}return r;};var ti=function ti(){return[];},ii=Object.prototype.propertyIsEnumerable,ni=Object.getOwnPropertySymbols,oi=ni?function(e){return null==e?[]:(e=Object(e),ei(ni(e),function(t){return ii.call(e,t);}));}:ti;var ri=function ri(e,t){return J(e,oi(e),t);};var si=function si(e,t){for(var i=-1,n=t.length,o=e.length;++i<n;){e[o+i]=t[i];}return e;},ai=Object.getOwnPropertySymbols?function(e){for(var t=[];e;){si(t,oi(e)),e=it(e);}return t;}:ti;var li=function li(e,t){return J(e,ai(e),t);};var ci=function ci(e,t,i){var n=t(e);return _e(e)?n:si(n,i(e));};var di=function di(e){return ci(e,Kt,oi);};var ui=function ui(e){return ci(e,Oe,ai);},hi=q(k.a,"DataView"),gi=q(k.a,"Promise"),mi=q(k.a,"Set"),fi=q(k.a,"WeakMap"),pi=D(hi),bi=D(yt),wi=D(gi),ki=D(mi),_i=D(fi),vi=S;(hi&&"[object DataView]"!=vi(new hi(new ArrayBuffer(1)))||yt&&"[object Map]"!=vi(new yt())||gi&&"[object Promise]"!=vi(gi.resolve())||mi&&"[object Set]"!=vi(new mi())||fi&&"[object WeakMap]"!=vi(new fi()))&&(vi=function vi(e){var t=S(e),i="[object Object]"==t?e.constructor:void 0,n=i?D(i):"";if(n)switch(n){case pi:return"[object DataView]";case bi:return"[object Map]";case wi:return"[object Promise]";case ki:return"[object Set]";case _i:return"[object WeakMap]";}return t;});var yi=vi,xi=Object.prototype.hasOwnProperty;var Ai=function Ai(e){var t=e.length,i=new e.constructor(t);return t&&"string"==typeof e[0]&&xi.call(e,"index")&&(i.index=e.index,i.input=e.input),i;},Ci=k.a.Uint8Array;var Ti=function Ti(e){var t=new e.constructor(e.byteLength);return new Ci(t).set(new Ci(e)),t;};var Ei=function Ei(e,t){var i=t?Ti(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength);},Ii=/\w*$/;var Si=function Si(e){var t=new e.constructor(e.source,Ii.exec(e));return t.lastIndex=e.lastIndex,t;},Pi=_?_.prototype:void 0,Mi=Pi?Pi.valueOf:void 0;var Ni=function Ni(e){return Mi?Object(Mi.call(e)):{};};var Ri=function Ri(e,t){var i=t?Ti(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length);};var zi=function zi(e,t,i){var n=e.constructor;switch(t){case"[object ArrayBuffer]":return Ti(e);case"[object Boolean]":case"[object Date]":return new n(+e);case"[object DataView]":return Ei(e,i);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Ri(e,i);case"[object Map]":return new n();case"[object Number]":case"[object String]":return new n(e);case"[object RegExp]":return Si(e);case"[object Set]":return new n();case"[object Symbol]":return Ni(e);}},Oi=Object.create,Di=function(){function e(){}return function(t){if(!w(t))return{};if(Oi)return Oi(t);e.prototype=t;var i=new e();return e.prototype=void 0,i;};}();var Li=function Li(e){return"function"!=typeof e.constructor||Me(e)?{}:Di(it(e));};var Vi=function Vi(e){return me(e)&&"[object Map]"==yi(e);},Bi=Ce.a&&Ce.a.isMap,ji=Bi?Ae(Bi):Vi;var Fi=function Fi(e){return me(e)&&"[object Set]"==yi(e);},Hi=Ce.a&&Ce.a.isSet,Ui=Hi?Ae(Hi):Fi,Wi={};Wi["[object Arguments]"]=Wi["[object Array]"]=Wi["[object ArrayBuffer]"]=Wi["[object DataView]"]=Wi["[object Boolean]"]=Wi["[object Date]"]=Wi["[object Float32Array]"]=Wi["[object Float64Array]"]=Wi["[object Int8Array]"]=Wi["[object Int16Array]"]=Wi["[object Int32Array]"]=Wi["[object Map]"]=Wi["[object Number]"]=Wi["[object Object]"]=Wi["[object RegExp]"]=Wi["[object Set]"]=Wi["[object String]"]=Wi["[object Symbol]"]=Wi["[object Uint8Array]"]=Wi["[object Uint8ClampedArray]"]=Wi["[object Uint16Array]"]=Wi["[object Uint32Array]"]=!0,Wi["[object Error]"]=Wi["[object Function]"]=Wi["[object WeakMap]"]=!1;var qi=function e(t,i,n,o,r,s){var a,l=1&i,c=2&i,d=4&i;if(n&&(a=r?n(t,o,r,s):n(t)),void 0!==a)return a;if(!w(t))return t;var u=_e(t);if(u){if(a=Ai(t),!l)return Xt(t,a);}else{var h=yi(t),g="[object Function]"==h||"[object GeneratorFunction]"==h;if(Object(ve.a)(t))return Object(Zt.a)(t,l);if("[object Object]"==h||"[object Arguments]"==h||g&&!r){if(a=c||g?{}:Li(t),!l)return c?li(t,Jt(a,t)):ri(t,Qt(a,t));}else{if(!Wi[h])return r?t:{};a=zi(t,h,l);}}s||(s=new Wt());var m=s.get(t);if(m)return m;s.set(t,a),Ui(t)?t.forEach(function(o){a.add(e(o,i,n,o,t,s));}):ji(t)&&t.forEach(function(o,r){a.set(r,e(o,i,n,r,t,s));});var f=u?void 0:(d?c?ui:di:c?Oe:Kt)(t);return qt(f||t,function(o,r){f&&(o=t[r=o]),Q(a,r,e(o,i,n,r,t,s));}),a;};var $i=function $i(e,t){return qi(e,5,t="function"==typeof t?t:void 0);};var Yi=function Yi(e){return me(e)&&1===e.nodeType&&!lt(e);};var Gi=/*#__PURE__*/function(){function Gi(e,t){_classCallCheck(this,Gi);this._config={},t&&this.define(Ki(t)),e&&this._setObjectToTarget(this._config,e);}_createClass(Gi,[{key:"set",value:function set(e,t){this._setToTarget(this._config,e,t);}},{key:"define",value:function define(e,t){this._setToTarget(this._config,e,t,!0);}},{key:"get",value:function get(e){return this._getFromSource(this._config,e);}},{key:"names",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function names(){var _i6,_Object$keys,_e9;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function names$(_context){while(1){switch(_context.prev=_context.next){case 0:_i6=0,_Object$keys=Object.keys(this._config);case 1:if(!(_i6<_Object$keys.length)){_context.next=8;break;}_e9=_Object$keys[_i6];_context.next=5;return _e9;case 5:_i6++;_context.next=1;break;case 8:case"end":return _context.stop();}}},names,this);})},{key:"_setToTarget",value:function _setToTarget(e,t,i){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:!1;if(lt(t))return void this._setObjectToTarget(e,t,n);var o=t.split(".");t=o.pop();var _iterator6=_createForOfIteratorHelper(o),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var _t5=_step6.value;lt(e[_t5])||(e[_t5]={}),e=e[_t5];}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}if(lt(i))return lt(e[t])||(e[t]={}),e=e[t],void this._setObjectToTarget(e,i,n);n&&void 0!==e[t]||(e[t]=i);}},{key:"_getFromSource",value:function _getFromSource(e,t){var i=t.split(".");t=i.pop();var _iterator7=_createForOfIteratorHelper(i),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var _t6=_step7.value;if(!lt(e[_t6])){e=null;break;}e=e[_t6];}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}return e?Ki(e[t]):void 0;}},{key:"_setObjectToTarget",value:function _setObjectToTarget(e,t,i){var _this11=this;Object.keys(t).forEach(function(n){_this11._setToTarget(e,n,t[n],i);});}}]);return Gi;}();function Ki(e){return $i(e,Qi);}function Qi(e){return Yi(e)?e:void 0;}function Ji(e){return!(!e||!e[Symbol.iterator]);}var Zi=/*#__PURE__*/function(_Symbol$iterator){function Zi(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,Zi);var i=Ji(e);if(i||(t=e),this._items=[],this._itemMap=new Map(),this._idProperty=t.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap(),this._bindToInternalToExternalMap=new WeakMap(),this._skippedIndexesFromExternal=[],i){var _iterator8=_createForOfIteratorHelper(e),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var _t7=_step8.value;this._items.push(_t7),this._itemMap.set(this._getItemIdBeforeAdding(_t7),_t7);}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}}}_createClass(Zi,[{key:"length",get:function get(){return this._items.length;}},{key:"first",get:function get(){return this._items[0]||null;}},{key:"last",get:function get(){return this._items[this.length-1]||null;}},{key:"add",value:function add(e,t){return this.addMany([e],t);}},{key:"addMany",value:function addMany(e,t){if(void 0===t)t=this._items.length;else if(t>this._items.length||t<0)throw new l.a("collection-add-item-invalid-index",this);for(var _i7=0;_i7<e.length;_i7++){var _n4=e[_i7],_o4=this._getItemIdBeforeAdding(_n4),_r4=t+_i7;this._items.splice(_r4,0,_n4),this._itemMap.set(_o4,_n4),this.fire("add",_n4,_r4);}return this.fire("change",{added:e,removed:[],index:t}),this;}},{key:"get",value:function get(e){var t;if("string"==typeof e)t=this._itemMap.get(e);else{if("number"!=typeof e)throw new l.a("collection-get-invalid-arg",this);t=this._items[e];}return t||null;}},{key:"has",value:function has(e){if("string"==typeof e)return this._itemMap.has(e);{var _t8=e[this._idProperty];return this._itemMap.has(_t8);}}},{key:"getIndex",value:function getIndex(e){var t;return t="string"==typeof e?this._itemMap.get(e):e,this._items.indexOf(t);}},{key:"remove",value:function remove(e){var _this$_remove=this._remove(e),_this$_remove2=_slicedToArray(_this$_remove,2),t=_this$_remove2[0],i=_this$_remove2[1];return this.fire("change",{added:[],removed:[t],index:i}),t;}},{key:"map",value:function map(e,t){return this._items.map(e,t);}},{key:"find",value:function find(e,t){return this._items.find(e,t);}},{key:"filter",value:function filter(e,t){return this._items.filter(e,t);}},{key:"clear",value:function clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);var e=Array.from(this._items);for(;this.length;){this._remove(0);}this.fire("change",{added:[],removed:e,index:0});}},{key:"bindTo",value:function bindTo(e){var _this12=this;if(this._bindToCollection)throw new l.a("collection-bind-to-rebind",this);return this._bindToCollection=e,{as:function as(e){_this12._setUpBindToBinding(function(t){return new e(t);});},using:function using(e){"function"==typeof e?_this12._setUpBindToBinding(function(t){return e(t);}):_this12._setUpBindToBinding(function(t){return t[e];});}};}},{key:"_setUpBindToBinding",value:function _setUpBindToBinding(e){var _this13=this;var t=this._bindToCollection,i=function i(_i9,n,o){var r=t._bindToCollection==_this13,s=t._bindToInternalToExternalMap.get(n);if(r&&s)_this13._bindToExternalToInternalMap.set(n,s),_this13._bindToInternalToExternalMap.set(s,n);else{var _i8=e(n);if(!_i8)return void _this13._skippedIndexesFromExternal.push(o);var _r5=o;var _iterator9=_createForOfIteratorHelper(_this13._skippedIndexesFromExternal),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var _e11=_step9.value;o>_e11&&_r5--;}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}var _iterator10=_createForOfIteratorHelper(t._skippedIndexesFromExternal),_step10;try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var _e12=_step10.value;_r5>=_e12&&_r5++;}}catch(err){_iterator10.e(err);}finally{_iterator10.f();}_this13._bindToExternalToInternalMap.set(n,_i8),_this13._bindToInternalToExternalMap.set(_i8,n),_this13.add(_i8,_r5);for(var _e10=0;_e10<t._skippedIndexesFromExternal.length;_e10++){_r5<=t._skippedIndexesFromExternal[_e10]&&t._skippedIndexesFromExternal[_e10]++;}}};var _iterator11=_createForOfIteratorHelper(t),_step11;try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var _e13=_step11.value;i(0,_e13,t.getIndex(_e13));}}catch(err){_iterator11.e(err);}finally{_iterator11.f();}this.listenTo(t,"add",i),this.listenTo(t,"remove",function(e,t,i){var n=_this13._bindToExternalToInternalMap.get(t);n&&_this13.remove(n),_this13._skippedIndexesFromExternal=_this13._skippedIndexesFromExternal.reduce(function(e,t){return i<t&&e.push(t-1),i>t&&e.push(t),e;},[]);});}},{key:"_getItemIdBeforeAdding",value:function _getItemIdBeforeAdding(e){var t=this._idProperty;var i;if(t in e){if(i=e[t],"string"!=typeof i)throw new l.a("collection-add-invalid-id",this);if(this.get(i))throw new l.a("collection-add-item-already-exists",this);}else e[t]=i=s();return i;}},{key:"_remove",value:function _remove(e){var t,i,n,o=!1;var r=this._idProperty;if("string"==typeof e?(i=e,n=this._itemMap.get(i),o=!n,n&&(t=this._items.indexOf(n))):"number"==typeof e?(t=e,n=this._items[t],o=!n,n&&(i=n[r])):(n=e,i=n[r],t=this._items.indexOf(n),o=-1==t||!this._itemMap.get(i)),o)throw new l.a("collection-remove-404",this);this._items.splice(t,1),this._itemMap["delete"](i);var s=this._bindToInternalToExternalMap.get(n);return this._bindToInternalToExternalMap["delete"](n),this._bindToExternalToInternalMap["delete"](s),this.fire("remove",n,t),[n,t];}},{key:_Symbol$iterator,value:function value(){return this._items[Symbol.iterator]();}}]);return Zi;}(Symbol.iterator);Ke(Zi,u);var Xi=/*#__PURE__*/function(_Symbol$iterator2){function Xi(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];_classCallCheck(this,Xi);this._context=e,this._plugins=new Map(),this._availablePlugins=new Map();var _iterator12=_createForOfIteratorHelper(t),_step12;try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var _e14=_step12.value;_e14.pluginName&&this._availablePlugins.set(_e14.pluginName,_e14);}}catch(err){_iterator12.e(err);}finally{_iterator12.f();}this._contextPlugins=new Map();var _iterator13=_createForOfIteratorHelper(i),_step13;try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var _step13$value=_slicedToArray(_step13.value,2),_e15=_step13$value[0],_t9=_step13$value[1];this._contextPlugins.set(_e15,_t9),this._contextPlugins.set(_t9,_e15),_e15.pluginName&&this._availablePlugins.set(_e15.pluginName,_e15);}}catch(err){_iterator13.e(err);}finally{_iterator13.f();}}_createClass(Xi,[{key:_Symbol$iterator2,value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function value(){var _iterator14,_step14,_e16;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function value$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_iterator14=_createForOfIteratorHelper(this._plugins);_context2.prev=1;_iterator14.s();case 3:if((_step14=_iterator14.n()).done){_context2.next=11;break;}_e16=_step14.value;_context2.t0="function"==typeof _e16[0];if(!_context2.t0){_context2.next=9;break;}_context2.next=9;return _e16;case 9:_context2.next=3;break;case 11:_context2.next=16;break;case 13:_context2.prev=13;_context2.t1=_context2["catch"](1);_iterator14.e(_context2.t1);case 16:_context2.prev=16;_iterator14.f();return _context2.finish(16);case 19:case"end":return _context2.stop();}}},value,this,[[1,13,16,19]]);})},{key:"get",value:function get(e){var t=this._plugins.get(e);if(!t){var _t10=e;throw"function"==typeof e&&(_t10=e.pluginName||e.name),new l.a("plugincollection-plugin-not-loaded",this._context,{plugin:_t10});}return t;}},{key:"has",value:function has(e){return this._plugins.has(e);}},{key:"init",value:function init(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var n=this,o=this._context;!function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new Set();t.forEach(function(t){a(t)&&(i.has(t)||(i.add(t),t.pluginName&&!n._availablePlugins.has(t.pluginName)&&n._availablePlugins.set(t.pluginName,t),t.requires&&e(t.requires,i)));});}(e),h(e);var r=_toConsumableArray(function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new Set();return t.map(function(e){return a(e)?e:n._availablePlugins.get(e);}).reduce(function(t,n){return i.has(n)?t:(i.add(n),n.requires&&(h(n.requires,n),e(n.requires,i).forEach(function(e){return t.add(e);})),t.add(n));},new Set());}(e.filter(function(e){return!d(e,t);})));!function(e,t){var _iterator15=_createForOfIteratorHelper(t),_step15;try{for(_iterator15.s();!(_step15=_iterator15.n()).done;){var _i10=_step15.value;if("function"!=typeof _i10)throw new l.a("plugincollection-replace-plugin-invalid-type",null,{pluginItem:_i10});var _t11=_i10.pluginName;if(!_t11)throw new l.a("plugincollection-replace-plugin-missing-name",null,{pluginItem:_i10});if(_i10.requires&&_i10.requires.length)throw new l.a("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:_t11});var _o5=n._availablePlugins.get(_t11);if(!_o5)throw new l.a("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:_t11});var _r6=e.indexOf(_o5);if(-1===_r6){if(n._contextPlugins.has(_o5))return;throw new l.a("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:_t11});}if(_o5.requires&&_o5.requires.length)throw new l.a("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:_t11});e.splice(_r6,1,_i10),n._availablePlugins.set(_t11,_i10);}}catch(err){_iterator15.e(err);}finally{_iterator15.f();}}(r,i);var s=function(e){return e.map(function(e){var t=n._contextPlugins.get(e)||new e(o);return n._add(e,t),t;});}(r);return g(s,"init").then(function(){return g(s,"afterInit");}).then(function(){return s;});function a(e){return"function"==typeof e;}function c(e){return a(e)&&e.isContextPlugin;}function d(e,t){return t.some(function(t){return t===e||u(e)===t||u(t)===e;});}function u(e){return a(e)?e.pluginName||e.name:e;}function h(e){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;e.map(function(e){return a(e)?e:n._availablePlugins.get(e)||e;}).forEach(function(e){!function(e,t){if(a(e))return;if(t)throw new l.a("plugincollection-soft-required",o,{missingPlugin:e,requiredBy:u(t)});throw new l.a("plugincollection-plugin-not-found",o,{plugin:e});}(e,i),function(e,t){if(!c(t))return;if(c(e))return;throw new l.a("plugincollection-context-required",o,{plugin:u(e),requiredBy:u(t)});}(e,i),function(e,i){if(!i)return;if(!d(e,t))return;throw new l.a("plugincollection-required",o,{plugin:u(e),requiredBy:u(i)});}(e,i);});}function g(e,t){return e.reduce(function(e,i){return i[t]?n._contextPlugins.has(i)?e:e.then(i[t].bind(i)):e;},Promise.resolve());}}},{key:"destroy",value:function destroy(){var e=[];var _iterator16=_createForOfIteratorHelper(this),_step16;try{for(_iterator16.s();!(_step16=_iterator16.n()).done;){var _step16$value=_slicedToArray(_step16.value,2),_t12=_step16$value[1];"function"!=typeof _t12.destroy||this._contextPlugins.has(_t12)||e.push(_t12.destroy());}}catch(err){_iterator16.e(err);}finally{_iterator16.f();}return Promise.all(e);}},{key:"_add",value:function _add(e,t){this._plugins.set(e,t);var i=e.pluginName;if(i){if(this._plugins.has(i))throw new l.a("plugincollection-plugin-name-conflict",null,{pluginName:i,plugin1:this._plugins.get(i).constructor,plugin2:e});this._plugins.set(i,t);}}}]);return Xi;}(Symbol.iterator);function en(e){return Array.isArray(e)?e:[e];}function tn(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;if("number"!=typeof i)throw new l.a("translation-service-quantity-not-a-number",null,{quantity:i});var n=Object.keys(window.CKEDITOR_TRANSLATIONS).length;1===n&&(e=Object.keys(window.CKEDITOR_TRANSLATIONS)[0]);var o=t.id||t.string;if(0===n||!function(e,t){return!!window.CKEDITOR_TRANSLATIONS[e]&&!!window.CKEDITOR_TRANSLATIONS[e].dictionary[t];}(e,o))return 1!==i?t.plural:t.string;var r=window.CKEDITOR_TRANSLATIONS[e].dictionary,s=window.CKEDITOR_TRANSLATIONS[e].getPluralForm||function(e){return 1===e?0:1;};if("string"==typeof r[o])return r[o];var a=Number(s(i));return r[o][a];}Ke(Xi,u),window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={});var nn=["ar","ara","fa","per","fas","he","heb","ku","kur","ug","uig"];function on(e){return nn.includes(e)?"rtl":"ltr";}var rn=/*#__PURE__*/function(){function rn(){var _this14=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,rn);this.uiLanguage=e.uiLanguage||"en",this.contentLanguage=e.contentLanguage||this.uiLanguage,this.uiLanguageDirection=on(this.uiLanguage),this.contentLanguageDirection=on(this.contentLanguage),this.t=function(e,t){return _this14._t(e,t);};}_createClass(rn,[{key:"language",get:function get(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage;}},{key:"_t",value:function _t(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];t=en(t),"string"==typeof e&&(e={string:e});var i=!!e.plural?t[0]:1;return function(e,t){return e.replace(/%(\d+)/g,function(e,i){return i<t.length?t[i]:e;});}(tn(this.uiLanguage,e,i),t);}}]);return rn;}();var sn=/*#__PURE__*/function(){function sn(e){_classCallCheck(this,sn);this.config=new Gi(e,this.constructor.defaultConfig);var t=this.constructor.builtinPlugins;this.config.define("plugins",t),this.plugins=new Xi(this,t);var i=this.config.get("language")||{};this.locale=new rn({uiLanguage:"string"==typeof i?i:i.ui,contentLanguage:this.config.get("language.content")}),this.t=this.locale.t,this.editors=new Zi(),this._contextOwner=null;}_createClass(sn,[{key:"initPlugins",value:function initPlugins(){var e=this.config.get("plugins")||[],t=this.config.get("substitutePlugins")||[];var _iterator17=_createForOfIteratorHelper(e.concat(t)),_step17;try{for(_iterator17.s();!(_step17=_iterator17.n()).done;){var _i11=_step17.value;if("function"!=typeof _i11)throw new l.a("context-initplugins-constructor-only",null,{Plugin:_i11});if(!0!==_i11.isContextPlugin)throw new l.a("context-initplugins-invalid-plugin",null,{Plugin:_i11});}}catch(err){_iterator17.e(err);}finally{_iterator17.f();}return this.plugins.init(e,[],t);}},{key:"destroy",value:function destroy(){var _this15=this;return Promise.all(Array.from(this.editors,function(e){return e.destroy();})).then(function(){return _this15.plugins.destroy();});}},{key:"_addEditor",value:function _addEditor(e,t){if(this._contextOwner)throw new l.a("context-addeditor-private-context");this.editors.add(e),t&&(this._contextOwner=e);}},{key:"_removeEditor",value:function _removeEditor(e){return this.editors.has(e)&&this.editors.remove(e),this._contextOwner===e?this.destroy():Promise.resolve();}},{key:"_getEditorConfig",value:function _getEditorConfig(){var e={};var _iterator18=_createForOfIteratorHelper(this.config.names()),_step18;try{for(_iterator18.s();!(_step18=_iterator18.n()).done;){var _t13=_step18.value;["plugins","removePlugins","extraPlugins"].includes(_t13)||(e[_t13]=this.config.get(_t13));}}catch(err){_iterator18.e(err);}finally{_iterator18.f();}return e;}}],[{key:"create",value:function create(e){var _this16=this;return new Promise(function(t){var i=new _this16(e);t(i.initPlugins().then(function(){return i;}));});}}]);return sn;}();var an=/*#__PURE__*/function(){function an(e){_classCallCheck(this,an);this.context=e;}_createClass(an,[{key:"destroy",value:function destroy(){this.stopListening();}}],[{key:"isContextPlugin",get:function get(){return!0;}}]);return an;}();function ln(e,t){var i=Math.min(e.length,t.length);for(var _n5=0;_n5<i;_n5++){if(e[_n5]!=t[_n5])return _n5;}return e.length==t.length?"same":e.length<t.length?"prefix":"extension";}Ke(an,Ue);var cn=function cn(e){return qi(e,4);};var dn=/*#__PURE__*/function(){function dn(e){_classCallCheck(this,dn);this.document=e,this.parent=null;}_createClass(dn,[{key:"index",get:function get(){var e;if(!this.parent)return null;if(-1==(e=this.parent.getChildIndex(this)))throw new l.a("view-node-not-found-in-parent",this);return e;}},{key:"nextSibling",get:function get(){var e=this.index;return null!==e&&this.parent.getChild(e+1)||null;}},{key:"previousSibling",get:function get(){var e=this.index;return null!==e&&this.parent.getChild(e-1)||null;}},{key:"root",get:function get(){var e=this;for(;e.parent;){e=e.parent;}return e;}},{key:"isAttached",value:function isAttached(){return this.root.is("rootElement");}},{key:"getPath",value:function getPath(){var e=[];var t=this;for(;t.parent;){e.unshift(t.index),t=t.parent;}return e;}},{key:"getAncestors",value:function getAncestors(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{includeSelf:!1,parentFirst:!1};var t=[];var i=e.includeSelf?this:this.parent;for(;i;){t[e.parentFirst?"push":"unshift"](i),i=i.parent;}return t;}},{key:"getCommonAncestor",value:function getCommonAncestor(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=this.getAncestors(t),n=e.getAncestors(t);var o=0;for(;i[o]==n[o]&&i[o];){o++;}return 0===o?null:i[o-1];}},{key:"isBefore",value:function isBefore(e){if(this==e)return!1;if(this.root!==e.root)return!1;var t=this.getPath(),i=e.getPath(),n=ln(t,i);switch(n){case"prefix":return!0;case"extension":return!1;default:return t[n]<i[n];}}},{key:"isAfter",value:function isAfter(e){return this!=e&&this.root===e.root&&!this.isBefore(e);}},{key:"_remove",value:function _remove(){this.parent._removeChildren(this.index);}},{key:"_fireChange",value:function _fireChange(e,t){this.fire("change:"+e,t),this.parent&&this.parent._fireChange(e,t);}},{key:"toJSON",value:function toJSON(){var e=cn(this);return delete e.parent,e;}},{key:"is",value:function is(e){return"node"===e||"view:node"===e;}}]);return dn;}();Ke(dn,u);var un=/*#__PURE__*/function(_dn){_inherits(un,_dn);var _super3=_createSuper(un);function un(e,t){var _this17;_classCallCheck(this,un);_this17=_super3.call(this,e),_this17._textData=t;return _this17;}_createClass(un,[{key:"is",value:function is(e){return"$text"===e||"view:$text"===e||"text"===e||"view:text"===e||"node"===e||"view:node"===e;}},{key:"data",get:function get(){return this._textData;}},{key:"_data",get:function get(){return this.data;},set:function set(e){this._fireChange("text",this),this._textData=e;}},{key:"isSimilar",value:function isSimilar(e){return e instanceof un&&(this===e||this.data===e.data);}},{key:"_clone",value:function _clone(){return new un(this.document,this.data);}}]);return un;}(dn);var hn=/*#__PURE__*/function(){function hn(e,t,i){_classCallCheck(this,hn);if(this.textNode=e,t<0||t>e.data.length)throw new l.a("view-textproxy-wrong-offsetintext",this);if(i<0||t+i>e.data.length)throw new l.a("view-textproxy-wrong-length",this);this.data=e.data.substring(t,t+i),this.offsetInText=t;}_createClass(hn,[{key:"offsetSize",get:function get(){return this.data.length;}},{key:"isPartial",get:function get(){return this.data.length!==this.textNode.data.length;}},{key:"parent",get:function get(){return this.textNode.parent;}},{key:"root",get:function get(){return this.textNode.root;}},{key:"document",get:function get(){return this.textNode.document;}},{key:"is",value:function is(e){return"$textProxy"===e||"view:$textProxy"===e||"textProxy"===e||"view:textProxy"===e;}},{key:"getAncestors",value:function getAncestors(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{includeSelf:!1,parentFirst:!1};var t=[];var i=e.includeSelf?this.textNode:this.parent;for(;null!==i;){t[e.parentFirst?"push":"unshift"](i),i=i.parent;}return t;}}]);return hn;}();function gn(e){return Ji(e)?new Map(e):function(e){var t=new Map();for(var _i12 in e){t.set(_i12,e[_i12]);}return t;}(e);}var mn=/*#__PURE__*/function(){function mn(){_classCallCheck(this,mn);this._patterns=[],this.add.apply(this,arguments);}_createClass(mn,[{key:"add",value:function add(){for(var _len10=arguments.length,e=new Array(_len10),_key10=0;_key10<_len10;_key10++){e[_key10]=arguments[_key10];}for(var _i13=0,_e17=e;_i13<_e17.length;_i13++){var _t14=_e17[_i13];("string"==typeof _t14||_t14 instanceof RegExp)&&(_t14={name:_t14}),this._patterns.push(_t14);}}},{key:"match",value:function match(){for(var _len11=arguments.length,e=new Array(_len11),_key11=0;_key11<_len11;_key11++){e[_key11]=arguments[_key11];}for(var _i14=0,_e18=e;_i14<_e18.length;_i14++){var _t15=_e18[_i14];var _iterator19=_createForOfIteratorHelper(this._patterns),_step19;try{for(_iterator19.s();!(_step19=_iterator19.n()).done;){var _e19=_step19.value;var _i15=fn(_t15,_e19);if(_i15)return{element:_t15,pattern:_e19,match:_i15};}}catch(err){_iterator19.e(err);}finally{_iterator19.f();}}return null;}},{key:"matchAll",value:function matchAll(){var t=[];for(var _len12=arguments.length,e=new Array(_len12),_key12=0;_key12<_len12;_key12++){e[_key12]=arguments[_key12];}for(var _i16=0,_e20=e;_i16<_e20.length;_i16++){var _i17=_e20[_i16];var _iterator20=_createForOfIteratorHelper(this._patterns),_step20;try{for(_iterator20.s();!(_step20=_iterator20.n()).done;){var _e21=_step20.value;var _n6=fn(_i17,_e21);_n6&&t.push({element:_i17,pattern:_e21,match:_n6});}}catch(err){_iterator20.e(err);}finally{_iterator20.f();}}return t.length>0?t:null;}},{key:"getElementName",value:function getElementName(){if(1!==this._patterns.length)return null;var e=this._patterns[0],t=e.name;return"function"==typeof e||!t||t instanceof RegExp?null:t;}}]);return mn;}();function fn(e,t){if("function"==typeof t)return t(e);var i={};return t.name&&(i.name=function(e,t){if(e instanceof RegExp)return e.test(t);return e===t;}(t.name,e.name),!i.name)||t.attributes&&(i.attributes=function(e,t){var i=new Set(t.getAttributeKeys());lt(e)?(void 0!==e.style&&Object(l.b)("matcher-pattern-deprecated-attributes-style-key",e),void 0!==e["class"]&&Object(l.b)("matcher-pattern-deprecated-attributes-class-key",e)):(i["delete"]("style"),i["delete"]("class"));return pn(e,i,function(e){return t.getAttribute(e);});}(t.attributes,e),!i.attributes)?null:!(t.classes&&(i.classes=function(e,t){return pn(e,t.getClassNames());}(t.classes,e),!i.classes))&&!(t.styles&&(i.styles=function(e,t){return pn(e,t.getStyleNames(!0),function(e){return t.getStyle(e);});}(t.styles,e),!i.styles))&&i;}function pn(e,t,i){var n=function(e){if(Array.isArray(e))return e.map(function(e){return lt(e)?(void 0!==e.key&&void 0!==e.value||Object(l.b)("matcher-pattern-missing-key-or-value",e),[e.key,e.value]):[e,!0];});if(lt(e))return Object.entries(e);return[[e,!0]];}(e),o=Array.from(t),r=[];return n.forEach(function(_ref){var _ref2=_slicedToArray(_ref,2),e=_ref2[0],t=_ref2[1];o.forEach(function(n){(function(e,t){return!0===e||e===t||e instanceof RegExp&&e.test(t);})(e,n)&&function(e,t,i){if(!0===e)return!0;var n=i(t);return e===n||e instanceof RegExp&&e.test(n);}(t,n,i)&&r.push(n);});}),!n.length||r.length<n.length?null:r;}var bn=function bn(e){return"symbol"==_typeof(e)||me(e)&&"[object Symbol]"==S(e);},wn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kn=/^\w*$/;var _n=function _n(e,t){if(_e(e))return!1;var i=_typeof(e);return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!bn(e))||kn.test(e)||!wn.test(e)||null!=t&&e in Object(t);};function vn(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var i=function i(){var n=arguments,o=t?t.apply(this,n):n[0],r=i.cache;if(r.has(o))return r.get(o);var s=e.apply(this,n);return i.cache=r.set(o,s)||r,s;};return i.cache=new(vn.Cache||Ft)(),i;}vn.Cache=Ft;var yn=vn;var xn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,An=/\\(\\)?/g,Cn=function(e){var t=yn(e,function(e){return 500===i.size&&i.clear(),e;}),i=t.cache;return t;}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(xn,function(e,i,n,o){t.push(n?o.replace(An,"$1"):i||e);}),t;});var Tn=function Tn(e,t){for(var i=-1,n=null==e?0:e.length,o=Array(n);++i<n;){o[i]=t(e[i],i,e);}return o;},En=_?_.prototype:void 0,In=En?En.toString:void 0;var Sn=function e(t){if("string"==typeof t)return t;if(_e(t))return Tn(t,e)+"";if(bn(t))return In?In.call(t):"";var i=t+"";return"0"==i&&1/t==-1/0?"-0":i;};var Pn=function Pn(e){return null==e?"":Sn(e);};var Mn=function Mn(e,t){return _e(e)?e:_n(e,t)?[e]:Cn(Pn(e));};var Nn=function Nn(e){var t=null==e?0:e.length;return t?e[t-1]:void 0;};var Rn=function Rn(e){if("string"==typeof e||bn(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t;};var zn=function zn(e,t){for(var i=0,n=(t=Mn(t,e)).length;null!=e&&i<n;){e=e[Rn(t[i++])];}return i&&i==n?e:void 0;};var On=function On(e,t,i){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(i=i>o?o:i)<0&&(i+=o),o=t>i?0:i-t>>>0,t>>>=0;for(var r=Array(o);++n<o;){r[n]=e[n+t];}return r;};var Dn=function Dn(e,t){return t.length<2?e:zn(e,On(t,0,-1));};var Ln=function Ln(e,t){return t=Mn(t,e),null==(e=Dn(e,t))||delete e[Rn(Nn(t))];};var Vn=function Vn(e,t){return null==e||Ln(e,t);};var Bn=function Bn(e,t,i){var n=null==e?void 0:zn(e,t);return void 0===n?i:n;};var jn=function jn(e,t,i){(void 0!==i&&!G(e[t],i)||void 0===i&&!(t in e))&&Y(e,t,i);};var Fn=function(e){return function(t,i,n){for(var o=-1,r=Object(t),s=n(t),a=s.length;a--;){var l=s[e?a:++o];if(!1===i(r[l],l,r))break;}return t;};}();var Hn=function Hn(e){return me(e)&&le(e);};var Un=function Un(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t];};var Wn=function Wn(e){return J(e,Oe(e));};var qn=function qn(e,t,i,n,o,r,s){var a=Un(e,i),l=Un(t,i),c=s.get(l);if(c)jn(e,i,c);else{var d=r?r(a,l,i+"",e,t,s):void 0,u=void 0===d;if(u){var h=_e(l),g=!h&&Object(ve.a)(l),m=!h&&!g&&Ee(l);d=l,h||g||m?_e(a)?d=a:Hn(a)?d=Xt(a):g?(u=!1,d=Object(Zt.a)(l,!0)):m?(u=!1,d=Ri(l,!0)):d=[]:lt(l)||ke(l)?(d=a,ke(a)?d=Wn(a):w(a)&&!M(a)||(d=Li(l))):u=!1;}u&&(s.set(l,d),o(d,l,n,r,s),s["delete"](l)),jn(e,i,d);}};var $n=function e(t,i,n,o,r){t!==i&&Fn(i,function(s,a){if(r||(r=new Wt()),w(s))qn(t,i,a,n,e,o,r);else{var l=o?o(Un(t,a),s,a+"",t,i,r):void 0;void 0===l&&(l=s),jn(t,a,l);}},Oe);},Yn=he(function(e,t,i){$n(e,t,i);});var Gn=function Gn(e,t,i,n){if(!w(e))return e;for(var o=-1,r=(t=Mn(t,e)).length,s=r-1,a=e;null!=a&&++o<r;){var l=Rn(t[o]),c=i;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(o!=s){var d=a[l];void 0===(c=n?n(d,l,a):void 0)&&(c=w(d)?d:de(t[o+1])?[]:{});}Q(a,l,c),a=a[l];}return e;};var Kn=function Kn(e,t,i){return null==e?e:Gn(e,t,i);};var Qn=/*#__PURE__*/function(){function Qn(e){_classCallCheck(this,Qn);this._styles={},this._styleProcessor=e;}_createClass(Qn,[{key:"isEmpty",get:function get(){var e=Object.entries(this._styles);return!Array.from(e).length;}},{key:"size",get:function get(){return this.isEmpty?0:this.getStyleNames().length;}},{key:"setTo",value:function setTo(e){this.clear();var t=Array.from(function(e){var t=null,i=0,n=0,o=null;var r=new Map();if(""===e)return r;";"!=e.charAt(e.length-1)&&(e+=";");for(var _s2=0;_s2<e.length;_s2++){var _a2=e.charAt(_s2);if(null===t)switch(_a2){case":":o||(o=e.substr(i,_s2-i),n=_s2+1);break;case'"':case"'":t=_a2;break;case";":{var _t16=e.substr(n,_s2-n);o&&r.set(o.trim(),_t16.trim()),o=null,i=_s2+1;break;}}else _a2===t&&(t=null);}return r;}(e).entries());for(var _i18=0,_t17=t;_i18<_t17.length;_i18++){var _t17$_i=_slicedToArray(_t17[_i18],2),_e22=_t17$_i[0],_i19=_t17$_i[1];this._styleProcessor.toNormalizedForm(_e22,_i19,this._styles);}}},{key:"has",value:function has(e){if(this.isEmpty)return!1;var t=this._styleProcessor.getReducedForm(e,this._styles).find(function(_ref3){var _ref4=_slicedToArray(_ref3,1),t=_ref4[0];return t===e;});return Array.isArray(t);}},{key:"set",value:function set(e,t){if(w(e))for(var _i20=0,_Object$entries=Object.entries(e);_i20<_Object$entries.length;_i20++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i20],2),_t18=_Object$entries$_i[0],_i21=_Object$entries$_i[1];this._styleProcessor.toNormalizedForm(_t18,_i21,this._styles);}else this._styleProcessor.toNormalizedForm(e,t,this._styles);}},{key:"remove",value:function remove(e){var t=Zn(e);Vn(this._styles,t),delete this._styles[e],this._cleanEmptyObjectsOnPath(t);}},{key:"getNormalized",value:function getNormalized(e){return this._styleProcessor.getNormalized(e,this._styles);}},{key:"toString",value:function toString(){return this.isEmpty?"":this._getStylesEntries().map(function(e){return e.join(":");}).sort().join(";")+";";}},{key:"getAsString",value:function getAsString(e){if(this.isEmpty)return;if(this._styles[e]&&!w(this._styles[e]))return this._styles[e];var t=this._styleProcessor.getReducedForm(e,this._styles).find(function(_ref5){var _ref6=_slicedToArray(_ref5,1),t=_ref6[0];return t===e;});return Array.isArray(t)?t[1]:void 0;}},{key:"getStyleNames",value:function getStyleNames(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:!1;if(this.isEmpty)return[];if(e)return this._styleProcessor.getStyleNames(this._styles);return this._getStylesEntries().map(function(_ref7){var _ref8=_slicedToArray(_ref7,1),e=_ref8[0];return e;});}},{key:"clear",value:function clear(){this._styles={};}},{key:"_getStylesEntries",value:function _getStylesEntries(){var e=[],t=Object.keys(this._styles);for(var _i22=0,_t19=t;_i22<_t19.length;_i22++){var _i23=_t19[_i22];e.push.apply(e,_toConsumableArray(this._styleProcessor.getReducedForm(_i23,this._styles)));}return e;}},{key:"_cleanEmptyObjectsOnPath",value:function _cleanEmptyObjectsOnPath(e){var t=e.split(".");if(!(t.length>1))return;var i=t.splice(0,t.length-1).join("."),n=Bn(this._styles,i);if(!n)return;!Array.from(Object.keys(n)).length&&this.remove(i);}}]);return Qn;}();var Jn=/*#__PURE__*/function(){function Jn(){_classCallCheck(this,Jn);this._normalizers=new Map(),this._extractors=new Map(),this._reducers=new Map(),this._consumables=new Map();}_createClass(Jn,[{key:"toNormalizedForm",value:function toNormalizedForm(e,t,i){if(w(t))Xn(i,Zn(e),t);else if(this._normalizers.has(e)){var _n7=this._normalizers.get(e),_n8=_n7(t),_o6=_n8.path,_r7=_n8.value;Xn(i,_o6,_r7);}else Xn(i,e,t);}},{key:"getNormalized",value:function getNormalized(e,t){if(!e)return Yn({},t);if(void 0!==t[e])return t[e];if(this._extractors.has(e)){var _i24=this._extractors.get(e);if("string"==typeof _i24)return Bn(t,_i24);var _n9=_i24(e,t);if(_n9)return _n9;}return Bn(t,Zn(e));}},{key:"getReducedForm",value:function getReducedForm(e,t){var i=this.getNormalized(e,t);if(void 0===i)return[];if(this._reducers.has(e)){return this._reducers.get(e)(i);}return[[e,i]];}},{key:"getStyleNames",value:function getStyleNames(e){var _this18=this;var t=Array.from(this._consumables.keys()).filter(function(t){var i=_this18.getNormalized(t,e);return i&&"object"==_typeof(i)?Object.keys(i).length:i;}),i=new Set([].concat(_toConsumableArray(t),_toConsumableArray(Object.keys(e))));return Array.from(i.values());}},{key:"getRelatedStyles",value:function getRelatedStyles(e){return this._consumables.get(e)||[];}},{key:"setNormalizer",value:function setNormalizer(e,t){this._normalizers.set(e,t);}},{key:"setExtractor",value:function setExtractor(e,t){this._extractors.set(e,t);}},{key:"setReducer",value:function setReducer(e,t){this._reducers.set(e,t);}},{key:"setStyleRelation",value:function setStyleRelation(e,t){this._mapStyleNames(e,t);var _iterator21=_createForOfIteratorHelper(t),_step21;try{for(_iterator21.s();!(_step21=_iterator21.n()).done;){var _i25=_step21.value;this._mapStyleNames(_i25,[e]);}}catch(err){_iterator21.e(err);}finally{_iterator21.f();}}},{key:"_mapStyleNames",value:function _mapStyleNames(e,t){var _this$_consumables$ge;this._consumables.has(e)||this._consumables.set(e,[]),(_this$_consumables$ge=this._consumables.get(e)).push.apply(_this$_consumables$ge,_toConsumableArray(t));}}]);return Jn;}();function Zn(e){return e.replace("-",".");}function Xn(e,t,i){var n=i;w(i)&&(n=Yn({},Bn(e,t),i)),Kn(e,t,n);}var eo=/*#__PURE__*/function(_dn2){_inherits(eo,_dn2);var _super4=_createSuper(eo);function eo(e,t,i,n){var _this19;_classCallCheck(this,eo);if(_this19=_super4.call(this,e),_this19.name=t,_this19._attrs=function(e){e=gn(e);var _iterator22=_createForOfIteratorHelper(e),_step22;try{for(_iterator22.s();!(_step22=_iterator22.n()).done;){var _step22$value=_slicedToArray(_step22.value,2),_t20=_step22$value[0],_i26=_step22$value[1];null===_i26?e["delete"](_t20):"string"!=typeof _i26&&e.set(_t20,String(_i26));}}catch(err){_iterator22.e(err);}finally{_iterator22.f();}return e;}(i),_this19._children=[],n&&_this19._insertChild(0,n),_this19._classes=new Set(),_this19._attrs.has("class")){var _e23=_this19._attrs.get("class");to(_this19._classes,_e23),_this19._attrs["delete"]("class");}_this19._styles=new Qn(_this19.document.stylesProcessor),_this19._attrs.has("style")&&(_this19._styles.setTo(_this19._attrs.get("style")),_this19._attrs["delete"]("style")),_this19._customProperties=new Map(),_this19._isAllowedInsideAttributeElement=!1;return _possibleConstructorReturn(_this19);}_createClass(eo,[{key:"childCount",get:function get(){return this._children.length;}},{key:"isEmpty",get:function get(){return 0===this._children.length;}},{key:"isAllowedInsideAttributeElement",get:function get(){return this._isAllowedInsideAttributeElement;}},{key:"is",value:function is(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return t?t===this.name&&("element"===e||"view:element"===e):"element"===e||"view:element"===e||"node"===e||"view:node"===e;}},{key:"getChild",value:function getChild(e){return this._children[e];}},{key:"getChildIndex",value:function getChildIndex(e){return this._children.indexOf(e);}},{key:"getChildren",value:function getChildren(){return this._children[Symbol.iterator]();}},{key:"getAttributeKeys",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getAttributeKeys(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getAttributeKeys$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.t0=this._classes.size>0;if(!_context3.t0){_context3.next=4;break;}_context3.next=4;return"class";case 4:_context3.t1=this._styles.isEmpty;if(_context3.t1){_context3.next=8;break;}_context3.next=8;return"style";case 8:return _context3.delegateYield(this._attrs.keys(),"t2",9);case 9:case"end":return _context3.stop();}}},getAttributeKeys,this);})},{key:"getAttributes",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getAttributes(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getAttributes$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:return _context4.delegateYield(this._attrs.entries(),"t0",1);case 1:_context4.t1=this._classes.size>0;if(!_context4.t1){_context4.next=5;break;}_context4.next=5;return["class",this.getAttribute("class")];case 5:_context4.t2=this._styles.isEmpty;if(_context4.t2){_context4.next=9;break;}_context4.next=9;return["style",this.getAttribute("style")];case 9:case"end":return _context4.stop();}}},getAttributes,this);})},{key:"getAttribute",value:function getAttribute(e){if("class"==e)return this._classes.size>0?_toConsumableArray(this._classes).join(" "):void 0;if("style"==e){var _e24=this._styles.toString();return""==_e24?void 0:_e24;}return this._attrs.get(e);}},{key:"hasAttribute",value:function hasAttribute(e){return"class"==e?this._classes.size>0:"style"==e?!this._styles.isEmpty:this._attrs.has(e);}},{key:"isSimilar",value:function isSimilar(e){if(!(e instanceof eo))return!1;if(this===e)return!0;if(this.name!=e.name)return!1;if(this.isAllowedInsideAttributeElement!=e.isAllowedInsideAttributeElement)return!1;if(this._attrs.size!==e._attrs.size||this._classes.size!==e._classes.size||this._styles.size!==e._styles.size)return!1;var _iterator23=_createForOfIteratorHelper(this._attrs),_step23;try{for(_iterator23.s();!(_step23=_iterator23.n()).done;){var _step23$value=_slicedToArray(_step23.value,2),_t21=_step23$value[0],_i27=_step23$value[1];if(!e._attrs.has(_t21)||e._attrs.get(_t21)!==_i27)return!1;}}catch(err){_iterator23.e(err);}finally{_iterator23.f();}var _iterator24=_createForOfIteratorHelper(this._classes),_step24;try{for(_iterator24.s();!(_step24=_iterator24.n()).done;){var _t22=_step24.value;if(!e._classes.has(_t22))return!1;}}catch(err){_iterator24.e(err);}finally{_iterator24.f();}var _iterator25=_createForOfIteratorHelper(this._styles.getStyleNames()),_step25;try{for(_iterator25.s();!(_step25=_iterator25.n()).done;){var _t23=_step25.value;if(!e._styles.has(_t23)||e._styles.getAsString(_t23)!==this._styles.getAsString(_t23))return!1;}}catch(err){_iterator25.e(err);}finally{_iterator25.f();}return!0;}},{key:"hasClass",value:function hasClass(){for(var _len13=arguments.length,e=new Array(_len13),_key13=0;_key13<_len13;_key13++){e[_key13]=arguments[_key13];}for(var _i28=0,_e25=e;_i28<_e25.length;_i28++){var _t24=_e25[_i28];if(!this._classes.has(_t24))return!1;}return!0;}},{key:"getClassNames",value:function getClassNames(){return this._classes.keys();}},{key:"getStyle",value:function getStyle(e){return this._styles.getAsString(e);}},{key:"getNormalizedStyle",value:function getNormalizedStyle(e){return this._styles.getNormalized(e);}},{key:"getStyleNames",value:function getStyleNames(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:!1;return this._styles.getStyleNames(e);}},{key:"hasStyle",value:function hasStyle(){for(var _len14=arguments.length,e=new Array(_len14),_key14=0;_key14<_len14;_key14++){e[_key14]=arguments[_key14];}for(var _i29=0,_e26=e;_i29<_e26.length;_i29++){var _t25=_e26[_i29];if(!this._styles.has(_t25))return!1;}return!0;}},{key:"findAncestor",value:function findAncestor(){for(var _len15=arguments.length,e=new Array(_len15),_key15=0;_key15<_len15;_key15++){e[_key15]=arguments[_key15];}var t=_construct(mn,e);var i=this.parent;for(;i;){if(t.match(i))return i;i=i.parent;}return null;}},{key:"getCustomProperty",value:function getCustomProperty(e){return this._customProperties.get(e);}},{key:"getCustomProperties",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getCustomProperties(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getCustomProperties$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:return _context5.delegateYield(this._customProperties.entries(),"t0",1);case 1:case"end":return _context5.stop();}}},getCustomProperties,this);})},{key:"getIdentity",value:function getIdentity(){var e=Array.from(this._classes).sort().join(","),t=this._styles.toString(),i=Array.from(this._attrs).map(function(e){return"".concat(e[0],"=\"").concat(e[1],"\"");}).sort().join(" ");return this.name+(""==e?"":" class=\"".concat(e,"\""))+(t?" style=\"".concat(t,"\""):"")+(""==i?"":" "+i);}},{key:"_clone",value:function _clone(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:!1;var t=[];if(e){var _iterator26=_createForOfIteratorHelper(this.getChildren()),_step26;try{for(_iterator26.s();!(_step26=_iterator26.n()).done;){var _i30=_step26.value;t.push(_i30._clone(e));}}catch(err){_iterator26.e(err);}finally{_iterator26.f();}}var i=new this.constructor(this.document,this.name,this._attrs,t);return i._classes=new Set(this._classes),i._styles.set(this._styles.getNormalized()),i._customProperties=new Map(this._customProperties),i.getFillerOffset=this.getFillerOffset,i._isAllowedInsideAttributeElement=this.isAllowedInsideAttributeElement,i;}},{key:"_appendChild",value:function _appendChild(e){return this._insertChild(this.childCount,e);}},{key:"_insertChild",value:function _insertChild(e,t){this._fireChange("children",this);var i=0;var n=function(e,t){if("string"==typeof t)return[new un(e,t)];Ji(t)||(t=[t]);return Array.from(t).map(function(t){return"string"==typeof t?new un(e,t):t instanceof hn?new un(e,t.data):t;});}(this.document,t);var _iterator27=_createForOfIteratorHelper(n),_step27;try{for(_iterator27.s();!(_step27=_iterator27.n()).done;){var _t26=_step27.value;null!==_t26.parent&&_t26._remove(),_t26.parent=this,_t26.document=this.document,this._children.splice(e,0,_t26),e++,i++;}}catch(err){_iterator27.e(err);}finally{_iterator27.f();}return i;}},{key:"_removeChildren",value:function _removeChildren(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;this._fireChange("children",this);for(var _i31=e;_i31<e+t;_i31++){this._children[_i31].parent=null;}return this._children.splice(e,t);}},{key:"_setAttribute",value:function _setAttribute(e,t){t=String(t),this._fireChange("attributes",this),"class"==e?to(this._classes,t):"style"==e?this._styles.setTo(t):this._attrs.set(e,t);}},{key:"_removeAttribute",value:function _removeAttribute(e){return this._fireChange("attributes",this),"class"==e?this._classes.size>0&&(this._classes.clear(),!0):"style"==e?!this._styles.isEmpty&&(this._styles.clear(),!0):this._attrs["delete"](e);}},{key:"_addClass",value:function _addClass(e){this._fireChange("attributes",this);var _iterator28=_createForOfIteratorHelper(en(e)),_step28;try{for(_iterator28.s();!(_step28=_iterator28.n()).done;){var _t27=_step28.value;this._classes.add(_t27);}}catch(err){_iterator28.e(err);}finally{_iterator28.f();}}},{key:"_removeClass",value:function _removeClass(e){this._fireChange("attributes",this);var _iterator29=_createForOfIteratorHelper(en(e)),_step29;try{for(_iterator29.s();!(_step29=_iterator29.n()).done;){var _t28=_step29.value;this._classes["delete"](_t28);}}catch(err){_iterator29.e(err);}finally{_iterator29.f();}}},{key:"_setStyle",value:function _setStyle(e,t){this._fireChange("attributes",this),this._styles.set(e,t);}},{key:"_removeStyle",value:function _removeStyle(e){this._fireChange("attributes",this);var _iterator30=_createForOfIteratorHelper(en(e)),_step30;try{for(_iterator30.s();!(_step30=_iterator30.n()).done;){var _t29=_step30.value;this._styles.remove(_t29);}}catch(err){_iterator30.e(err);}finally{_iterator30.f();}}},{key:"_setCustomProperty",value:function _setCustomProperty(e,t){this._customProperties.set(e,t);}},{key:"_removeCustomProperty",value:function _removeCustomProperty(e){return this._customProperties["delete"](e);}}]);return eo;}(dn);function to(e,t){var i=t.split(/\s+/);e.clear(),i.forEach(function(t){return e.add(t);});}var io=/*#__PURE__*/function(_eo){_inherits(io,_eo);var _super5=_createSuper(io);function io(e,t,i,n){var _this20;_classCallCheck(this,io);_this20=_super5.call(this,e,t,i,n),_this20.getFillerOffset=no;return _this20;}_createClass(io,[{key:"is",value:function is(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return t?t===this.name&&("containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e):"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e;}}]);return io;}(eo);function no(){var e=_toConsumableArray(this.getChildren()),t=e[this.childCount-1];if(t&&t.is("element","br"))return this.childCount;var _iterator31=_createForOfIteratorHelper(e),_step31;try{for(_iterator31.s();!(_step31=_iterator31.n()).done;){var _t30=_step31.value;if(!_t30.is("uiElement"))return null;}}catch(err){_iterator31.e(err);}finally{_iterator31.f();}return this.childCount;}var oo=/*#__PURE__*/function(_io){_inherits(oo,_io);var _super6=_createSuper(oo);function oo(e,t,i,n){var _this21;_classCallCheck(this,oo);_this21=_super6.call(this,e,t,i,n),_this21.set("isReadOnly",!1),_this21.set("isFocused",!1),_this21.bind("isReadOnly").to(e),_this21.bind("isFocused").to(e,"isFocused",function(t){return t&&e.selection.editableElement==_assertThisInitialized(_this21);}),_this21.listenTo(e.selection,"change",function(){_this21.isFocused=e.isFocused&&e.selection.editableElement==_assertThisInitialized(_this21);});return _this21;}_createClass(oo,[{key:"is",value:function is(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return t?t===this.name&&("editableElement"===e||"view:editableElement"===e||"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e):"editableElement"===e||"view:editableElement"===e||"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e;}},{key:"destroy",value:function destroy(){this.stopListening();}}]);return oo;}(io);Ke(oo,Ue);var ro=Symbol("rootName");var so=/*#__PURE__*/function(_oo){_inherits(so,_oo);var _super7=_createSuper(so);function so(e,t){var _this22;_classCallCheck(this,so);_this22=_super7.call(this,e,t),_this22.rootName="main";return _this22;}_createClass(so,[{key:"is",value:function is(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return t?t===this.name&&("rootElement"===e||"view:rootElement"===e||"editableElement"===e||"view:editableElement"===e||"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e):"rootElement"===e||"view:rootElement"===e||"editableElement"===e||"view:editableElement"===e||"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e;}},{key:"rootName",get:function get(){return this.getCustomProperty(ro);},set:function set(e){this._setCustomProperty(ro,e);}},{key:"_name",set:function set(e){this.name=e;}}]);return so;}(oo);var ao=/*#__PURE__*/function(_Symbol$iterator3){function ao(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,ao);if(!e.boundaries&&!e.startPosition)throw new l.a("view-tree-walker-no-start-position",null);if(e.direction&&"forward"!=e.direction&&"backward"!=e.direction)throw new l.a("view-tree-walker-unknown-direction",e.startPosition,{direction:e.direction});this.boundaries=e.boundaries||null,e.startPosition?this.position=lo._createAt(e.startPosition):this.position=lo._createAt(e.boundaries["backward"==e.direction?"end":"start"]),this.direction=e.direction||"forward",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null;}_createClass(ao,[{key:_Symbol$iterator3,value:function value(){return this;}},{key:"skip",value:function skip(e){var t,i,n;do{var _this$next;n=this.position,(_this$next=this.next(),t=_this$next.done,i=_this$next.value,_this$next);}while(!t&&e(i));t||(this.position=n);}},{key:"next",value:function next(){return"forward"==this.direction?this._next():this._previous();}},{key:"_next",value:function _next(){var e=this.position.clone();var t=this.position,i=e.parent;if(null===i.parent&&e.offset===i.childCount)return{done:!0};if(i===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0};var n;if(i instanceof un){if(e.isAtEnd)return this.position=lo._createAfter(i),this._next();n=i.data[e.offset];}else n=i.getChild(e.offset);if(n instanceof eo)return this.shallow?e.offset++:e=new lo(n,0),this.position=e,this._formatReturnValue("elementStart",n,t,e,1);if(n instanceof un){if(this.singleCharacters)return e=new lo(n,0),this.position=e,this._next();{var _i32,_o7=n.data.length;return n==this._boundaryEndParent?(_o7=this.boundaries.end.offset,_i32=new hn(n,0,_o7),e=lo._createAfter(_i32)):(_i32=new hn(n,0,n.data.length),e.offset++),this.position=e,this._formatReturnValue("text",_i32,t,e,_o7);}}if("string"==typeof n){var _n10;if(this.singleCharacters)_n10=1;else{_n10=(i===this._boundaryEndParent?this.boundaries.end.offset:i.data.length)-e.offset;}var _o8=new hn(i,e.offset,_n10);return e.offset+=_n10,this.position=e,this._formatReturnValue("text",_o8,t,e,_n10);}return e=lo._createAfter(i),this.position=e,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",i,t,e);}},{key:"_previous",value:function _previous(){var e=this.position.clone();var t=this.position,i=e.parent;if(null===i.parent&&0===e.offset)return{done:!0};if(i==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0};var n;if(i instanceof un){if(e.isAtStart)return this.position=lo._createBefore(i),this._previous();n=i.data[e.offset-1];}else n=i.getChild(e.offset-1);if(n instanceof eo)return this.shallow?(e.offset--,this.position=e,this._formatReturnValue("elementStart",n,t,e,1)):(e=new lo(n,n.childCount),this.position=e,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",n,t,e));if(n instanceof un){if(this.singleCharacters)return e=new lo(n,n.data.length),this.position=e,this._previous();{var _i33,_o9=n.data.length;if(n==this._boundaryStartParent){var _t31=this.boundaries.start.offset;_i33=new hn(n,_t31,n.data.length-_t31),_o9=_i33.data.length,e=lo._createBefore(_i33);}else _i33=new hn(n,0,n.data.length),e.offset--;return this.position=e,this._formatReturnValue("text",_i33,t,e,_o9);}}if("string"==typeof n){var _n11;if(this.singleCharacters)_n11=1;else{var _t32=i===this._boundaryStartParent?this.boundaries.start.offset:0;_n11=e.offset-_t32;}e.offset-=_n11;var _o10=new hn(i,e.offset,_n11);return this.position=e,this._formatReturnValue("text",_o10,t,e,_n11);}return e=lo._createBefore(i),this.position=e,this._formatReturnValue("elementStart",i,t,e,1);}},{key:"_formatReturnValue",value:function _formatReturnValue(e,t,i,n,o){return t instanceof hn&&(t.offsetInText+t.data.length==t.textNode.data.length&&("forward"!=this.direction||this.boundaries&&this.boundaries.end.isEqual(this.position)?i=lo._createAfter(t.textNode):(n=lo._createAfter(t.textNode),this.position=n)),0===t.offsetInText&&("backward"!=this.direction||this.boundaries&&this.boundaries.start.isEqual(this.position)?i=lo._createBefore(t.textNode):(n=lo._createBefore(t.textNode),this.position=n))),{done:!1,value:{type:e,item:t,previousPosition:i,nextPosition:n,length:o}};}}]);return ao;}(Symbol.iterator);var lo=/*#__PURE__*/function(){function lo(e,t){_classCallCheck(this,lo);this.parent=e,this.offset=t;}_createClass(lo,[{key:"nodeAfter",get:function get(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null;}},{key:"nodeBefore",get:function get(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null;}},{key:"isAtStart",get:function get(){return 0===this.offset;}},{key:"isAtEnd",get:function get(){var e=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===e;}},{key:"root",get:function get(){return this.parent.root;}},{key:"editableElement",get:function get(){var e=this.parent;for(;!(e instanceof oo);){if(!e.parent)return null;e=e.parent;}return e;}},{key:"getShiftedBy",value:function getShiftedBy(e){var t=lo._createAt(this),i=t.offset+e;return t.offset=i<0?0:i,t;}},{key:"getLastMatchingPosition",value:function getLastMatchingPosition(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};t.startPosition=this;var i=new ao(t);return i.skip(e),i.position;}},{key:"getAncestors",value:function getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0});}},{key:"getCommonAncestor",value:function getCommonAncestor(e){var t=this.getAncestors(),i=e.getAncestors();var n=0;for(;t[n]==i[n]&&t[n];){n++;}return 0===n?null:t[n-1];}},{key:"is",value:function is(e){return"position"===e||"view:position"===e;}},{key:"isEqual",value:function isEqual(e){return this.parent==e.parent&&this.offset==e.offset;}},{key:"isBefore",value:function isBefore(e){return"before"==this.compareWith(e);}},{key:"isAfter",value:function isAfter(e){return"after"==this.compareWith(e);}},{key:"compareWith",value:function compareWith(e){if(this.root!==e.root)return"different";if(this.isEqual(e))return"same";var t=this.parent.is("node")?this.parent.getPath():[],i=e.parent.is("node")?e.parent.getPath():[];t.push(this.offset),i.push(e.offset);var n=ln(t,i);switch(n){case"prefix":return"before";case"extension":return"after";default:return t[n]<i[n]?"before":"after";}}},{key:"getWalker",value:function getWalker(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return e.startPosition=this,new ao(e);}},{key:"clone",value:function clone(){return new lo(this.parent,this.offset);}}],[{key:"_createAt",value:function _createAt(e,t){if(e instanceof lo)return new this(e.parent,e.offset);{var _i34=e;if("end"==t)t=_i34.is("$text")?_i34.data.length:_i34.childCount;else{if("before"==t)return this._createBefore(_i34);if("after"==t)return this._createAfter(_i34);if(0!==t&&!t)throw new l.a("view-createpositionat-offset-required",_i34);}return new lo(_i34,t);}}},{key:"_createAfter",value:function _createAfter(e){if(e.is("$textProxy"))return new lo(e.textNode,e.offsetInText+e.data.length);if(!e.parent)throw new l.a("view-position-after-root",e,{root:e});return new lo(e.parent,e.index+1);}},{key:"_createBefore",value:function _createBefore(e){if(e.is("$textProxy"))return new lo(e.textNode,e.offsetInText);if(!e.parent)throw new l.a("view-position-before-root",e,{root:e});return new lo(e.parent,e.index);}}]);return lo;}();var co=/*#__PURE__*/function(_Symbol$iterator4){function co(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;_classCallCheck(this,co);this.start=e.clone(),this.end=t?t.clone():e.clone();}_createClass(co,[{key:_Symbol$iterator4,value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function value(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function value$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:return _context6.delegateYield(new ao({boundaries:this,ignoreElementEnd:!0}),"t0",1);case 1:case"end":return _context6.stop();}}},value,this);})},{key:"isCollapsed",get:function get(){return this.start.isEqual(this.end);}},{key:"isFlat",get:function get(){return this.start.parent===this.end.parent;}},{key:"root",get:function get(){return this.start.root;}},{key:"getEnlarged",value:function getEnlarged(){var e=this.start.getLastMatchingPosition(uo,{direction:"backward"}),t=this.end.getLastMatchingPosition(uo);return e.parent.is("$text")&&e.isAtStart&&(e=lo._createBefore(e.parent)),t.parent.is("$text")&&t.isAtEnd&&(t=lo._createAfter(t.parent)),new co(e,t);}},{key:"getTrimmed",value:function getTrimmed(){var e=this.start.getLastMatchingPosition(uo);if(e.isAfter(this.end)||e.isEqual(this.end))return new co(e,e);var t=this.end.getLastMatchingPosition(uo,{direction:"backward"});var i=e.nodeAfter,n=t.nodeBefore;return i&&i.is("$text")&&(e=new lo(i,0)),n&&n.is("$text")&&(t=new lo(n,n.data.length)),new co(e,t);}},{key:"isEqual",value:function isEqual(e){return this==e||this.start.isEqual(e.start)&&this.end.isEqual(e.end);}},{key:"containsPosition",value:function containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end);}},{key:"containsRange",value:function containsRange(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;e.isCollapsed&&(t=!1);var i=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),n=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return i&&n;}},{key:"getDifference",value:function getDifference(e){var t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new co(this.start,e.start)),this.containsPosition(e.end)&&t.push(new co(e.end,this.end))):t.push(this.clone()),t;}},{key:"getIntersection",value:function getIntersection(e){if(this.isIntersecting(e)){var _t33=this.start,_i35=this.end;return this.containsPosition(e.start)&&(_t33=e.start),this.containsPosition(e.end)&&(_i35=e.end),new co(_t33,_i35);}return null;}},{key:"getWalker",value:function getWalker(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return e.boundaries=this,new ao(e);}},{key:"getCommonAncestor",value:function getCommonAncestor(){return this.start.getCommonAncestor(this.end);}},{key:"getContainedElement",value:function getContainedElement(){if(this.isCollapsed)return null;var e=this.start.nodeAfter,t=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(e=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(t=this.end.parent.previousSibling),e&&e.is("element")&&e===t?e:null;}},{key:"clone",value:function clone(){return new co(this.start,this.end);}},{key:"getItems",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getItems(){var e,t,_iterator32,_step32,_e27,_args7=arguments;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getItems$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:e=_args7.length>0&&_args7[0]!==undefined?_args7[0]:{};e.boundaries=this,e.ignoreElementEnd=!0;t=new ao(e);_iterator32=_createForOfIteratorHelper(t);_context7.prev=4;_iterator32.s();case 6:if((_step32=_iterator32.n()).done){_context7.next=12;break;}_e27=_step32.value;_context7.next=10;return _e27.item;case 10:_context7.next=6;break;case 12:_context7.next=17;break;case 14:_context7.prev=14;_context7.t0=_context7["catch"](4);_iterator32.e(_context7.t0);case 17:_context7.prev=17;_iterator32.f();return _context7.finish(17);case 20:case"end":return _context7.stop();}}},getItems,this,[[4,14,17,20]]);})},{key:"getPositions",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getPositions(){var e,t,_iterator33,_step33,_e28,_args8=arguments;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getPositions$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:e=_args8.length>0&&_args8[0]!==undefined?_args8[0]:{};e.boundaries=this;t=new ao(e);_context8.next=5;return t.position;case 5:_iterator33=_createForOfIteratorHelper(t);_context8.prev=6;_iterator33.s();case 8:if((_step33=_iterator33.n()).done){_context8.next=14;break;}_e28=_step33.value;_context8.next=12;return _e28.nextPosition;case 12:_context8.next=8;break;case 14:_context8.next=19;break;case 16:_context8.prev=16;_context8.t0=_context8["catch"](6);_iterator33.e(_context8.t0);case 19:_context8.prev=19;_iterator33.f();return _context8.finish(19);case 22:case"end":return _context8.stop();}}},getPositions,this,[[6,16,19,22]]);})},{key:"is",value:function is(e){return"range"===e||"view:range"===e;}},{key:"isIntersecting",value:function isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start);}}],[{key:"_createFromParentsAndOffsets",value:function _createFromParentsAndOffsets(e,t,i,n){return new this(new lo(e,t),new lo(i,n));}},{key:"_createFromPositionAndShift",value:function _createFromPositionAndShift(e,t){var i=e,n=e.getShiftedBy(t);return t>0?new this(i,n):new this(n,i);}},{key:"_createIn",value:function _createIn(e){return this._createFromParentsAndOffsets(e,0,e,e.childCount);}},{key:"_createOn",value:function _createOn(e){var t=e.is("$textProxy")?e.offsetSize:1;return this._createFromPositionAndShift(lo._createBefore(e),t);}}]);return co;}(Symbol.iterator);function uo(e){return!(!e.item.is("attributeElement")&&!e.item.is("uiElement"));}function ho(e){var t=0;var _iterator34=_createForOfIteratorHelper(e),_step34;try{for(_iterator34.s();!(_step34=_iterator34.n()).done;){var _i36=_step34.value;t++;}}catch(err){_iterator34.e(err);}finally{_iterator34.f();}return t;}var go=/*#__PURE__*/function(){function go(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var t=arguments.length>1?arguments[1]:undefined;var i=arguments.length>2?arguments[2]:undefined;_classCallCheck(this,go);this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",this.setTo(e,t,i);}_createClass(go,[{key:"isFake",get:function get(){return this._isFake;}},{key:"fakeSelectionLabel",get:function get(){return this._fakeSelectionLabel;}},{key:"anchor",get:function get(){if(!this._ranges.length)return null;var e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.end:e.start).clone();}},{key:"focus",get:function get(){if(!this._ranges.length)return null;var e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.start:e.end).clone();}},{key:"isCollapsed",get:function get(){return 1===this.rangeCount&&this._ranges[0].isCollapsed;}},{key:"rangeCount",get:function get(){return this._ranges.length;}},{key:"isBackward",get:function get(){return!this.isCollapsed&&this._lastRangeBackward;}},{key:"editableElement",get:function get(){return this.anchor?this.anchor.editableElement:null;}},{key:"getRanges",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getRanges(){var _iterator35,_step35,_e29;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getRanges$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_iterator35=_createForOfIteratorHelper(this._ranges);_context9.prev=1;_iterator35.s();case 3:if((_step35=_iterator35.n()).done){_context9.next=9;break;}_e29=_step35.value;_context9.next=7;return _e29.clone();case 7:_context9.next=3;break;case 9:_context9.next=14;break;case 11:_context9.prev=11;_context9.t0=_context9["catch"](1);_iterator35.e(_context9.t0);case 14:_context9.prev=14;_iterator35.f();return _context9.finish(14);case 17:case"end":return _context9.stop();}}},getRanges,this,[[1,11,14,17]]);})},{key:"getFirstRange",value:function getFirstRange(){var e=null;var _iterator36=_createForOfIteratorHelper(this._ranges),_step36;try{for(_iterator36.s();!(_step36=_iterator36.n()).done;){var _t34=_step36.value;e&&!_t34.start.isBefore(e.start)||(e=_t34);}}catch(err){_iterator36.e(err);}finally{_iterator36.f();}return e?e.clone():null;}},{key:"getLastRange",value:function getLastRange(){var e=null;var _iterator37=_createForOfIteratorHelper(this._ranges),_step37;try{for(_iterator37.s();!(_step37=_iterator37.n()).done;){var _t35=_step37.value;e&&!_t35.end.isAfter(e.end)||(e=_t35);}}catch(err){_iterator37.e(err);}finally{_iterator37.f();}return e?e.clone():null;}},{key:"getFirstPosition",value:function getFirstPosition(){var e=this.getFirstRange();return e?e.start.clone():null;}},{key:"getLastPosition",value:function getLastPosition(){var e=this.getLastRange();return e?e.end.clone():null;}},{key:"isEqual",value:function isEqual(e){if(this.isFake!=e.isFake)return!1;if(this.isFake&&this.fakeSelectionLabel!=e.fakeSelectionLabel)return!1;if(this.rangeCount!=e.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;var _iterator38=_createForOfIteratorHelper(this._ranges),_step38;try{for(_iterator38.s();!(_step38=_iterator38.n()).done;){var _t36=_step38.value;var _i37=!1;var _iterator39=_createForOfIteratorHelper(e._ranges),_step39;try{for(_iterator39.s();!(_step39=_iterator39.n()).done;){var _n12=_step39.value;if(_t36.isEqual(_n12)){_i37=!0;break;}}}catch(err){_iterator39.e(err);}finally{_iterator39.f();}if(!_i37)return!1;}}catch(err){_iterator38.e(err);}finally{_iterator38.f();}return!0;}},{key:"isSimilar",value:function isSimilar(e){if(this.isBackward!=e.isBackward)return!1;var t=ho(this.getRanges());if(t!=ho(e.getRanges()))return!1;if(0==t)return!0;var _iterator40=_createForOfIteratorHelper(this.getRanges()),_step40;try{for(_iterator40.s();!(_step40=_iterator40.n()).done;){var _t37=_step40.value;_t37=_t37.getTrimmed();var _i38=!1;var _iterator41=_createForOfIteratorHelper(e.getRanges()),_step41;try{for(_iterator41.s();!(_step41=_iterator41.n()).done;){var _n13=_step41.value;if(_n13=_n13.getTrimmed(),_t37.start.isEqual(_n13.start)&&_t37.end.isEqual(_n13.end)){_i38=!0;break;}}}catch(err){_iterator41.e(err);}finally{_iterator41.f();}if(!_i38)return!1;}}catch(err){_iterator40.e(err);}finally{_iterator40.f();}return!0;}},{key:"getSelectedElement",value:function getSelectedElement(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement();}},{key:"setTo",value:function setTo(e,t,i){if(null===e)this._setRanges([]),this._setFakeOptions(t);else if(e instanceof go||e instanceof mo)this._setRanges(e.getRanges(),e.isBackward),this._setFakeOptions({fake:e.isFake,label:e.fakeSelectionLabel});else if(e instanceof co)this._setRanges([e],t&&t.backward),this._setFakeOptions(t);else if(e instanceof lo)this._setRanges([new co(e)]),this._setFakeOptions(t);else if(e instanceof dn){var _n14=!!i&&!!i.backward;var _o11;if(void 0===t)throw new l.a("view-selection-setto-required-second-parameter",this);_o11="in"==t?co._createIn(e):"on"==t?co._createOn(e):new co(lo._createAt(e,t)),this._setRanges([_o11],_n14),this._setFakeOptions(i);}else{if(!Ji(e))throw new l.a("view-selection-setto-not-selectable",this);this._setRanges(e,t&&t.backward),this._setFakeOptions(t);}this.fire("change");}},{key:"setFocus",value:function setFocus(e,t){if(null===this.anchor)throw new l.a("view-selection-setfocus-no-ranges",this);var i=lo._createAt(e,t);if("same"==i.compareWith(this.focus))return;var n=this.anchor;this._ranges.pop(),"before"==i.compareWith(n)?this._addRange(new co(i,n),!0):this._addRange(new co(n,i)),this.fire("change");}},{key:"is",value:function is(e){return"selection"===e||"view:selection"===e;}},{key:"_setRanges",value:function _setRanges(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;e=Array.from(e),this._ranges=[];var _iterator42=_createForOfIteratorHelper(e),_step42;try{for(_iterator42.s();!(_step42=_iterator42.n()).done;){var _t38=_step42.value;this._addRange(_t38);}}catch(err){_iterator42.e(err);}finally{_iterator42.f();}this._lastRangeBackward=!!t;}},{key:"_setFakeOptions",value:function _setFakeOptions(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};this._isFake=!!e.fake,this._fakeSelectionLabel=e.fake&&e.label||"";}},{key:"_addRange",value:function _addRange(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;if(!(e instanceof co))throw new l.a("view-selection-add-range-not-range",this);this._pushRange(e),this._lastRangeBackward=!!t;}},{key:"_pushRange",value:function _pushRange(e){var _iterator43=_createForOfIteratorHelper(this._ranges),_step43;try{for(_iterator43.s();!(_step43=_iterator43.n()).done;){var _t39=_step43.value;if(e.isIntersecting(_t39))throw new l.a("view-selection-range-intersects",this,{addedRange:e,intersectingRange:_t39});}}catch(err){_iterator43.e(err);}finally{_iterator43.f();}this._ranges.push(new co(e.start,e.end));}}]);return go;}();Ke(go,u);var mo=/*#__PURE__*/function(){function mo(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var t=arguments.length>1?arguments[1]:undefined;var i=arguments.length>2?arguments[2]:undefined;_classCallCheck(this,mo);this._selection=new go(),this._selection.delegate("change").to(this),this._selection.setTo(e,t,i);}_createClass(mo,[{key:"isFake",get:function get(){return this._selection.isFake;}},{key:"fakeSelectionLabel",get:function get(){return this._selection.fakeSelectionLabel;}},{key:"anchor",get:function get(){return this._selection.anchor;}},{key:"focus",get:function get(){return this._selection.focus;}},{key:"isCollapsed",get:function get(){return this._selection.isCollapsed;}},{key:"rangeCount",get:function get(){return this._selection.rangeCount;}},{key:"isBackward",get:function get(){return this._selection.isBackward;}},{key:"editableElement",get:function get(){return this._selection.editableElement;}},{key:"_ranges",get:function get(){return this._selection._ranges;}},{key:"getRanges",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getRanges(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getRanges$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:return _context10.delegateYield(this._selection.getRanges(),"t0",1);case 1:case"end":return _context10.stop();}}},getRanges,this);})},{key:"getFirstRange",value:function getFirstRange(){return this._selection.getFirstRange();}},{key:"getLastRange",value:function getLastRange(){return this._selection.getLastRange();}},{key:"getFirstPosition",value:function getFirstPosition(){return this._selection.getFirstPosition();}},{key:"getLastPosition",value:function getLastPosition(){return this._selection.getLastPosition();}},{key:"getSelectedElement",value:function getSelectedElement(){return this._selection.getSelectedElement();}},{key:"isEqual",value:function isEqual(e){return this._selection.isEqual(e);}},{key:"isSimilar",value:function isSimilar(e){return this._selection.isSimilar(e);}},{key:"is",value:function is(e){return"selection"===e||"documentSelection"==e||"view:selection"==e||"view:documentSelection"==e;}},{key:"_setTo",value:function _setTo(e,t,i){this._selection.setTo(e,t,i);}},{key:"_setFocus",value:function _setFocus(e,t){this._selection.setFocus(e,t);}}]);return mo;}();Ke(mo,u);var fo=/*#__PURE__*/function(_o12){_inherits(fo,_o12);var _super8=_createSuper(fo);function fo(e,t,i){var _this23;_classCallCheck(this,fo);_this23=_super8.call(this,e,t),_this23.startRange=i,_this23._eventPhase="none",_this23._currentTarget=null;return _this23;}_createClass(fo,[{key:"eventPhase",get:function get(){return this._eventPhase;}},{key:"currentTarget",get:function get(){return this._currentTarget;}}]);return fo;}(o);var po=Symbol("bubbling contexts");var bo={fire:function fire(e){try{var _i39=e instanceof o?e:new o(this,e),_n15=vo(this);if(!_n15.size)return;for(var _len16=arguments.length,t=new Array(_len16>1?_len16-1:0),_key16=1;_key16<_len16;_key16++){t[_key16-1]=arguments[_key16];}if(wo(_i39,"capturing",this),ko.apply(void 0,[_n15,"$capture",_i39].concat(t)))return _i39["return"];var _r8=_i39.startRange||this.selection.getFirstRange(),_s3=_r8?_r8.getContainedElement():null,_a3=!!_s3&&Boolean(_o(_n15,_s3));var _l2=_s3||function(e){if(!e)return null;var t=e.start.parent,i=e.end.parent,n=t.getPath(),o=i.getPath();return n.length>o.length?t:i;}(_r8);if(wo(_i39,"atTarget",_l2),!_a3){if(ko.apply(void 0,[_n15,"$text",_i39].concat(t)))return _i39["return"];wo(_i39,"bubbling",_l2);}for(;_l2;){if(_l2.is("rootElement")){if(ko.apply(void 0,[_n15,"$root",_i39].concat(t)))return _i39["return"];}else if(_l2.is("element")&&ko.apply(void 0,[_n15,_l2.name,_i39].concat(t)))return _i39["return"];if(ko.apply(void 0,[_n15,_l2,_i39].concat(t)))return _i39["return"];_l2=_l2.parent,wo(_i39,"bubbling",_l2);}return wo(_i39,"bubbling",this),ko.apply(void 0,[_n15,"$document",_i39].concat(t)),_i39["return"];}catch(e){l.a.rethrowUnexpectedError(e,this);}},_addEventListener:function _addEventListener(e,t,i){var n=en(i.context||"$document"),o=vo(this);var _iterator44=_createForOfIteratorHelper(n),_step44;try{for(_iterator44.s();!(_step44=_iterator44.n()).done;){var _r9=_step44.value;var _n16=o.get(_r9);_n16||(_n16=Object.create(u),o.set(_r9,_n16)),this.listenTo(_n16,e,t,i);}}catch(err){_iterator44.e(err);}finally{_iterator44.f();}},_removeEventListener:function _removeEventListener(e,t){var i=vo(this);var _iterator45=_createForOfIteratorHelper(i.values()),_step45;try{for(_iterator45.s();!(_step45=_iterator45.n()).done;){var _n17=_step45.value;this.stopListening(_n17,e,t);}}catch(err){_iterator45.e(err);}finally{_iterator45.f();}}};function wo(e,t,i){e instanceof fo&&(e._eventPhase=t,e._currentTarget=i);}function ko(e,t,i){var o="string"==typeof t?e.get(t):_o(e,t);for(var _len17=arguments.length,n=new Array(_len17>3?_len17-3:0),_key17=3;_key17<_len17;_key17++){n[_key17-3]=arguments[_key17];}return!!o&&(o.fire.apply(o,[i].concat(n)),i.stop.called);}function _o(e,t){var _iterator46=_createForOfIteratorHelper(e),_step46;try{for(_iterator46.s();!(_step46=_iterator46.n()).done;){var _step46$value=_slicedToArray(_step46.value,2),_i40=_step46$value[0],_n18=_step46$value[1];if("function"==typeof _i40&&_i40(t))return _n18;}}catch(err){_iterator46.e(err);}finally{_iterator46.f();}return null;}function vo(e){return e[po]||(e[po]=new Map()),e[po];}var yo=/*#__PURE__*/function(){function yo(e){_classCallCheck(this,yo);this.selection=new mo(),this.roots=new Zi({idProperty:"rootName"}),this.stylesProcessor=e,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isComposing",!1),this._postFixers=new Set();}_createClass(yo,[{key:"getRoot",value:function getRoot(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"main";return this.roots.get(e);}},{key:"registerPostFixer",value:function registerPostFixer(e){this._postFixers.add(e);}},{key:"destroy",value:function destroy(){this.roots.map(function(e){return e.destroy();}),this.stopListening();}},{key:"_callPostFixers",value:function _callPostFixers(e){var t=!1;do{var _iterator47=_createForOfIteratorHelper(this._postFixers),_step47;try{for(_iterator47.s();!(_step47=_iterator47.n()).done;){var _i41=_step47.value;if(t=_i41(e),t)break;}}catch(err){_iterator47.e(err);}finally{_iterator47.f();}}while(t);}}]);return yo;}();Ke(yo,bo),Ke(yo,Ue);var xo=/*#__PURE__*/function(_eo2){_inherits(xo,_eo2);var _super9=_createSuper(xo);function xo(e,t,i,n){var _this24;_classCallCheck(this,xo);_this24=_super9.call(this,e,t,i,n),_this24.getFillerOffset=Ao,_this24._priority=10,_this24._id=null,_this24._clonesGroup=null;return _this24;}_createClass(xo,[{key:"priority",get:function get(){return this._priority;}},{key:"id",get:function get(){return this._id;}},{key:"getElementsWithSameId",value:function getElementsWithSameId(){if(null===this.id)throw new l.a("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup);}},{key:"is",value:function is(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return t?t===this.name&&("attributeElement"===e||"view:attributeElement"===e||"element"===e||"view:element"===e):"attributeElement"===e||"view:attributeElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e;}},{key:"isSimilar",value:function isSimilar(e){return null!==this.id||null!==e.id?this.id===e.id:_get(_getPrototypeOf(xo.prototype),"isSimilar",this).call(this,e)&&this.priority==e.priority;}},{key:"_clone",value:function _clone(e){var t=_get(_getPrototypeOf(xo.prototype),"_clone",this).call(this,e);return t._priority=this._priority,t._id=this._id,t;}}]);return xo;}(eo);function Ao(){if(Co(this))return null;var e=this.parent;for(;e&&e.is("attributeElement");){if(Co(e)>1)return null;e=e.parent;}return!e||Co(e)>1?null:this.childCount;}function Co(e){return Array.from(e.getChildren()).filter(function(e){return!e.is("uiElement");}).length;}xo.DEFAULT_PRIORITY=10;var To=/*#__PURE__*/function(_eo3){_inherits(To,_eo3);var _super10=_createSuper(To);function To(e,t,i,n){var _this25;_classCallCheck(this,To);_this25=_super10.call(this,e,t,i,n),_this25._isAllowedInsideAttributeElement=!0,_this25.getFillerOffset=Eo;return _this25;}_createClass(To,[{key:"is",value:function is(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return t?t===this.name&&("emptyElement"===e||"view:emptyElement"===e||"element"===e||"view:element"===e):"emptyElement"===e||"view:emptyElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e;}},{key:"_insertChild",value:function _insertChild(e,t){if(t&&(t instanceof dn||Array.from(t).length>0))throw new l.a("view-emptyelement-cannot-add",[this,t]);}}]);return To;}(eo);function Eo(){return null;}var Io=navigator.userAgent.toLowerCase();var So={isMac:function(e){return e.indexOf("macintosh")>-1;}(Io),isGecko:function(e){return!!e.match(/gecko\/\d+/);}(Io),isSafari:function(e){return e.indexOf(" applewebkit/")>-1&&-1===e.indexOf("chrome");}(Io),isAndroid:function(e){return e.indexOf("android")>-1;}(Io),isBlink:function(e){return e.indexOf("chrome/")>-1&&e.indexOf("edge/")<0;}(Io),features:{isRegExpUnicodePropertySupported:function(){var e=!1;try{e=0==="ć".search(new RegExp("[\\p{L}]","u"));}catch(e){}return e;}()}};var Po={ctrl:"⌃",cmd:"⌘",alt:"⌥",shift:"⇧"},Mo={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},No=function(){var e={arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,"delete":46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(var _t40=65;_t40<=90;_t40++){var _i42=String.fromCharCode(_t40);e[_i42.toLowerCase()]=_t40;}for(var _t41=48;_t41<=57;_t41++){e[_t41-48]=_t41;}for(var _t42=112;_t42<=123;_t42++){e["f"+(_t42-111)]=_t42;}return e;}(),Ro=Object.fromEntries(Object.entries(No).map(function(_ref9){var _ref10=_slicedToArray(_ref9,2),e=_ref10[0],t=_ref10[1];return[t,e.charAt(0).toUpperCase()+e.slice(1)];}));function zo(e){var t;if("string"==typeof e){if(t=No[e.toLowerCase()],!t)throw new l.a("keyboard-unknown-key",null,{key:e});}else t=e.keyCode+(e.altKey?No.alt:0)+(e.ctrlKey?No.ctrl:0)+(e.shiftKey?No.shift:0)+(e.metaKey?No.cmd:0);return t;}function Oo(e){return"string"==typeof e&&(e=function(e){return e.split("+").map(function(e){return e.trim();});}(e)),e.map(function(e){return"string"==typeof e?function(e){if(e.endsWith("!"))return zo(e.slice(0,-1));var t=zo(e);return So.isMac&&t==No.ctrl?No.cmd:t;}(e):e;}).reduce(function(e,t){return t+e;},0);}function Do(e){var t=Oo(e);return Object.entries(So.isMac?Po:Mo).reduce(function(e,_ref11){var _ref12=_slicedToArray(_ref11,2),i=_ref12[0],n=_ref12[1];return 0!=(t&No[i])&&(t&=~No[i],e+=n),e;},"")+(t?Ro[t]:"");}function Lo(e,t){var i="ltr"===t;switch(e){case No.arrowleft:return i?"left":"right";case No.arrowright:return i?"right":"left";case No.arrowup:return"up";case No.arrowdown:return"down";}}function Vo(e,t){var i=Lo(e,t);return"down"===i||"right"===i;}var Bo=/*#__PURE__*/function(_eo4){_inherits(Bo,_eo4);var _super11=_createSuper(Bo);function Bo(e,t,i,n){var _this26;_classCallCheck(this,Bo);_this26=_super11.call(this,e,t,i,n),_this26._isAllowedInsideAttributeElement=!0,_this26.getFillerOffset=Fo;return _this26;}_createClass(Bo,[{key:"is",value:function is(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return t?t===this.name&&("uiElement"===e||"view:uiElement"===e||"element"===e||"view:element"===e):"uiElement"===e||"view:uiElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e;}},{key:"_insertChild",value:function _insertChild(e,t){if(t&&(t instanceof dn||Array.from(t).length>0))throw new l.a("view-uielement-cannot-add",this);}},{key:"render",value:function render(e){return this.toDomElement(e);}},{key:"toDomElement",value:function toDomElement(e){var t=e.createElement(this.name);var _iterator48=_createForOfIteratorHelper(this.getAttributeKeys()),_step48;try{for(_iterator48.s();!(_step48=_iterator48.n()).done;){var _e30=_step48.value;t.setAttribute(_e30,this.getAttribute(_e30));}}catch(err){_iterator48.e(err);}finally{_iterator48.f();}return t;}}]);return Bo;}(eo);function jo(e){e.document.on("arrowKey",function(t,i){return function(e,t,i){if(t.keyCode==No.arrowright){var _e31=t.domTarget.ownerDocument.defaultView.getSelection(),_n19=1==_e31.rangeCount&&_e31.getRangeAt(0).collapsed;if(_n19||t.shiftKey){var _t43=_e31.focusNode,_o13=_e31.focusOffset,_r10=i.domPositionToView(_t43,_o13);if(null===_r10)return;var _s4=!1;var _a4=_r10.getLastMatchingPosition(function(e){return e.item.is("uiElement")&&(_s4=!0),!(!e.item.is("uiElement")&&!e.item.is("attributeElement"));});if(_s4){var _t44=i.viewPositionToDom(_a4);_n19?_e31.collapse(_t44.parent,_t44.offset):_e31.extend(_t44.parent,_t44.offset);}}}}(0,i,e.domConverter);},{priority:"low"});}function Fo(){return null;}var Ho=/*#__PURE__*/function(_eo5){_inherits(Ho,_eo5);var _super12=_createSuper(Ho);function Ho(e,t,i,n){var _this27;_classCallCheck(this,Ho);_this27=_super12.call(this,e,t,i,n),_this27._isAllowedInsideAttributeElement=!0,_this27.getFillerOffset=Uo;return _this27;}_createClass(Ho,[{key:"is",value:function is(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return t?t===this.name&&("rawElement"===e||"view:rawElement"===e||"element"===e||"view:element"===e):"rawElement"===e||"view:rawElement"===e||e===this.name||e==="view:"+this.name||"element"===e||"view:element"===e||"node"===e||"view:node"===e;}},{key:"_insertChild",value:function _insertChild(e,t){if(t&&(t instanceof dn||Array.from(t).length>0))throw new l.a("view-rawelement-cannot-add",[this,t]);}}]);return Ho;}(eo);function Uo(){return null;}var Wo=/*#__PURE__*/function(_Symbol$iterator5){function Wo(e,t){_classCallCheck(this,Wo);this.document=e,this._children=[],t&&this._insertChild(0,t);}_createClass(Wo,[{key:_Symbol$iterator5,value:function value(){return this._children[Symbol.iterator]();}},{key:"childCount",get:function get(){return this._children.length;}},{key:"isEmpty",get:function get(){return 0===this.childCount;}},{key:"root",get:function get(){return this;}},{key:"parent",get:function get(){return null;}},{key:"is",value:function is(e){return"documentFragment"===e||"view:documentFragment"===e;}},{key:"_appendChild",value:function _appendChild(e){return this._insertChild(this.childCount,e);}},{key:"getChild",value:function getChild(e){return this._children[e];}},{key:"getChildIndex",value:function getChildIndex(e){return this._children.indexOf(e);}},{key:"getChildren",value:function getChildren(){return this._children[Symbol.iterator]();}},{key:"_insertChild",value:function _insertChild(e,t){this._fireChange("children",this);var i=0;var n=function(e,t){if("string"==typeof t)return[new un(e,t)];Ji(t)||(t=[t]);return Array.from(t).map(function(t){return"string"==typeof t?new un(e,t):t instanceof hn?new un(e,t.data):t;});}(this.document,t);var _iterator49=_createForOfIteratorHelper(n),_step49;try{for(_iterator49.s();!(_step49=_iterator49.n()).done;){var _t45=_step49.value;null!==_t45.parent&&_t45._remove(),_t45.parent=this,this._children.splice(e,0,_t45),e++,i++;}}catch(err){_iterator49.e(err);}finally{_iterator49.f();}return i;}},{key:"_removeChildren",value:function _removeChildren(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;this._fireChange("children",this);for(var _i43=e;_i43<e+t;_i43++){this._children[_i43].parent=null;}return this._children.splice(e,t);}},{key:"_fireChange",value:function _fireChange(e,t){this.fire("change:"+e,t);}}]);return Wo;}(Symbol.iterator);Ke(Wo,u);var qo=/*#__PURE__*/function(){function qo(e){_classCallCheck(this,qo);this.document=e,this._cloneGroups=new Map();}_createClass(qo,[{key:"setSelection",value:function setSelection(e,t,i){this.document.selection._setTo(e,t,i);}},{key:"setSelectionFocus",value:function setSelectionFocus(e,t){this.document.selection._setFocus(e,t);}},{key:"createDocumentFragment",value:function createDocumentFragment(e){return new Wo(this.document,e);}},{key:"createText",value:function createText(e){return new un(this.document,e);}},{key:"createAttributeElement",value:function createAttributeElement(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var n=new xo(this.document,e,t);return"number"==typeof i.priority&&(n._priority=i.priority),i.id&&(n._id=i.id),n;}},{key:"createContainerElement",value:function createContainerElement(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var n=new io(this.document,e,t);return void 0!==i.isAllowedInsideAttributeElement&&(n._isAllowedInsideAttributeElement=i.isAllowedInsideAttributeElement),n;}},{key:"createEditableElement",value:function createEditableElement(e,t){var i=new oo(this.document,e,t);return i._document=this.document,i;}},{key:"createEmptyElement",value:function createEmptyElement(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var n=new To(this.document,e,t);return void 0!==i.isAllowedInsideAttributeElement&&(n._isAllowedInsideAttributeElement=i.isAllowedInsideAttributeElement),n;}},{key:"createUIElement",value:function createUIElement(e,t,i){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var o=new Bo(this.document,e,t);return i&&(o.render=i),void 0!==n.isAllowedInsideAttributeElement&&(o._isAllowedInsideAttributeElement=n.isAllowedInsideAttributeElement),o;}},{key:"createRawElement",value:function createRawElement(e,t,i){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var o=new Ho(this.document,e,t);return o.render=i||function(){},void 0!==n.isAllowedInsideAttributeElement&&(o._isAllowedInsideAttributeElement=n.isAllowedInsideAttributeElement),o;}},{key:"setAttribute",value:function setAttribute(e,t,i){i._setAttribute(e,t);}},{key:"removeAttribute",value:function removeAttribute(e,t){t._removeAttribute(e);}},{key:"addClass",value:function addClass(e,t){t._addClass(e);}},{key:"removeClass",value:function removeClass(e,t){t._removeClass(e);}},{key:"setStyle",value:function setStyle(e,t,i){lt(e)&&void 0===i&&(i=t),i._setStyle(e,t);}},{key:"removeStyle",value:function removeStyle(e,t){t._removeStyle(e);}},{key:"setCustomProperty",value:function setCustomProperty(e,t,i){i._setCustomProperty(e,t);}},{key:"removeCustomProperty",value:function removeCustomProperty(e,t){return t._removeCustomProperty(e);}},{key:"breakAttributes",value:function breakAttributes(e){return e instanceof lo?this._breakAttributes(e):this._breakAttributesRange(e);}},{key:"breakContainer",value:function breakContainer(e){var t=e.parent;if(!t.is("containerElement"))throw new l.a("view-writer-break-non-container-element",this.document);if(!t.parent)throw new l.a("view-writer-break-root",this.document);if(e.isAtStart)return lo._createBefore(t);if(!e.isAtEnd){var _i44=t._clone(!1);this.insert(lo._createAfter(t),_i44);var _n20=new co(e,lo._createAt(t,"end")),_o14=new lo(_i44,0);this.move(_n20,_o14);}return lo._createAfter(t);}},{key:"mergeAttributes",value:function mergeAttributes(e){var t=e.offset,i=e.parent;if(i.is("$text"))return e;if(i.is("attributeElement")&&0===i.childCount){var _e32=i.parent,_t46=i.index;return i._remove(),this._removeFromClonedElementsGroup(i),this.mergeAttributes(new lo(_e32,_t46));}var n=i.getChild(t-1),o=i.getChild(t);if(!n||!o)return e;if(n.is("$text")&&o.is("$text"))return Qo(n,o);if(n.is("attributeElement")&&o.is("attributeElement")&&n.isSimilar(o)){var _e33=n.childCount;return n._appendChild(o.getChildren()),o._remove(),this._removeFromClonedElementsGroup(o),this.mergeAttributes(new lo(n,_e33));}return e;}},{key:"mergeContainers",value:function mergeContainers(e){var t=e.nodeBefore,i=e.nodeAfter;if(!(t&&i&&t.is("containerElement")&&i.is("containerElement")))throw new l.a("view-writer-merge-containers-invalid-position",this.document);var n=t.getChild(t.childCount-1),o=n instanceof un?lo._createAt(n,"end"):lo._createAt(t,"end");return this.move(co._createIn(i),lo._createAt(t,"end")),this.remove(co._createOn(i)),o;}},{key:"insert",value:function insert(e,t){(function e(t,i){var _iterator50=_createForOfIteratorHelper(t),_step50;try{var _loop=function _loop(){var n=_step50.value;if(!Jo.some(function(e){return n instanceof e;}))throw new l.a("view-writer-insert-invalid-node-type",i);n.is("$text")||e(n.getChildren(),i);};for(_iterator50.s();!(_step50=_iterator50.n()).done;){_loop();}}catch(err){_iterator50.e(err);}finally{_iterator50.f();}})(t=Ji(t)?_toConsumableArray(t):[t],this.document);var i=t.reduce(function(e,t){var i=e[e.length-1],n=!(t.is("uiElement")&&t.isAllowedInsideAttributeElement);return i&&i.breakAttributes==n?i.nodes.push(t):e.push({breakAttributes:n,nodes:[t]}),e;},[]);var n=null,o=e;var _iterator51=_createForOfIteratorHelper(i),_step51;try{for(_iterator51.s();!(_step51=_iterator51.n()).done;){var _step51$value=_step51.value,_e34=_step51$value.nodes,_t47=_step51$value.breakAttributes;var _i45=this._insertNodes(o,_e34,_t47);n||(n=_i45.start),o=_i45.end;}}catch(err){_iterator51.e(err);}finally{_iterator51.f();}return n?new co(n,o):new co(e);}},{key:"remove",value:function remove(e){var t=e instanceof co?e:co._createOn(e);if(Xo(t,this.document),t.isCollapsed)return new Wo(this.document);var _this$_breakAttribute=this._breakAttributesRange(t,!0),i=_this$_breakAttribute.start,n=_this$_breakAttribute.end,o=i.parent,r=n.offset-i.offset,s=o._removeChildren(i.offset,r);var _iterator52=_createForOfIteratorHelper(s),_step52;try{for(_iterator52.s();!(_step52=_iterator52.n()).done;){var _e35=_step52.value;this._removeFromClonedElementsGroup(_e35);}}catch(err){_iterator52.e(err);}finally{_iterator52.f();}var a=this.mergeAttributes(i);return t.start=a,t.end=a.clone(),new Wo(this.document,s);}},{key:"clear",value:function clear(e,t){Xo(e,this.document);var i=e.getWalker({direction:"backward",ignoreElementEnd:!0});var _iterator53=_createForOfIteratorHelper(i),_step53;try{for(_iterator53.s();!(_step53=_iterator53.n()).done;){var _n21=_step53.value;var _i46=_n21.item;var _o15=void 0;if(_i46.is("element")&&t.isSimilar(_i46))_o15=co._createOn(_i46);else if(!_n21.nextPosition.isAfter(e.start)&&_i46.is("$textProxy")){var _e36=_i46.getAncestors().find(function(e){return e.is("element")&&t.isSimilar(e);});_e36&&(_o15=co._createIn(_e36));}_o15&&(_o15.end.isAfter(e.end)&&(_o15.end=e.end),_o15.start.isBefore(e.start)&&(_o15.start=e.start),this.remove(_o15));}}catch(err){_iterator53.e(err);}finally{_iterator53.f();}}},{key:"move",value:function move(e,t){var i;if(t.isAfter(e.end)){var _n22=(t=this._breakAttributes(t,!0)).parent,_o16=_n22.childCount;e=this._breakAttributesRange(e,!0),i=this.remove(e),t.offset+=_n22.childCount-_o16;}else i=this.remove(e);return this.insert(t,i);}},{key:"wrap",value:function wrap(e,t){if(!(t instanceof xo))throw new l.a("view-writer-wrap-invalid-attribute",this.document);if(Xo(e,this.document),e.isCollapsed){var _n23=e.start;_n23.parent.is("element")&&(i=_n23.parent,!Array.from(i.getChildren()).some(function(e){return!e.is("uiElement");}))&&(_n23=_n23.getLastMatchingPosition(function(e){return e.item.is("uiElement");})),_n23=this._wrapPosition(_n23,t);var _o17=this.document.selection;return _o17.isCollapsed&&_o17.getFirstPosition().isEqual(e.start)&&this.setSelection(_n23),new co(_n23);}return this._wrapRange(e,t);var i;}},{key:"unwrap",value:function unwrap(e,t){if(!(t instanceof xo))throw new l.a("view-writer-unwrap-invalid-attribute",this.document);if(Xo(e,this.document),e.isCollapsed)return e;var _this$_breakAttribute2=this._breakAttributesRange(e,!0),i=_this$_breakAttribute2.start,n=_this$_breakAttribute2.end,o=i.parent,r=this._unwrapChildren(o,i.offset,n.offset,t),s=this.mergeAttributes(r.start);s.isEqual(r.start)||r.end.offset--;var a=this.mergeAttributes(r.end);return new co(s,a);}},{key:"rename",value:function rename(e,t){var i=new io(this.document,e,t.getAttributes());return this.insert(lo._createAfter(t),i),this.move(co._createIn(t),lo._createAt(i,0)),this.remove(co._createOn(t)),i;}},{key:"clearClonedElementsGroup",value:function clearClonedElementsGroup(e){this._cloneGroups["delete"](e);}},{key:"createPositionAt",value:function createPositionAt(e,t){return lo._createAt(e,t);}},{key:"createPositionAfter",value:function createPositionAfter(e){return lo._createAfter(e);}},{key:"createPositionBefore",value:function createPositionBefore(e){return lo._createBefore(e);}},{key:"createRange",value:function createRange(e,t){return new co(e,t);}},{key:"createRangeOn",value:function createRangeOn(e){return co._createOn(e);}},{key:"createRangeIn",value:function createRangeIn(e){return co._createIn(e);}},{key:"createSelection",value:function createSelection(e,t,i){return new go(e,t,i);}},{key:"_insertNodes",value:function _insertNodes(e,t,i){var n,o;if(n=i?$o(e):e.parent.is("$text")?e.parent.parent:e.parent,!n)throw new l.a("view-writer-invalid-position-container",this.document);o=i?this._breakAttributes(e,!0):e.parent.is("$text")?Ko(e):e;var r=n._insertChild(o.offset,t);var _iterator54=_createForOfIteratorHelper(t),_step54;try{for(_iterator54.s();!(_step54=_iterator54.n()).done;){var _e37=_step54.value;this._addToClonedElementsGroup(_e37);}}catch(err){_iterator54.e(err);}finally{_iterator54.f();}var s=o.getShiftedBy(r),a=this.mergeAttributes(o);a.isEqual(o)||s.offset--;var c=this.mergeAttributes(s);return new co(a,c);}},{key:"_wrapChildren",value:function _wrapChildren(e,t,i,n){var o=t;var r=[];for(;o<i;){var _t48=e.getChild(o),_i47=_t48.is("$text"),_s5=_t48.is("attributeElement"),_a5=_t48.isAllowedInsideAttributeElement;if(_s5&&this._wrapAttributeElement(n,_t48))r.push(new lo(e,o));else if(_i47||_a5||_s5&&Yo(n,_t48)){var _i48=n._clone();_t48._remove(),_i48._appendChild(_t48),e._insertChild(o,_i48),this._addToClonedElementsGroup(_i48),r.push(new lo(e,o));}else _s5&&this._wrapChildren(_t48,0,_t48.childCount,n);o++;}var s=0;for(var _i49=0,_r11=r;_i49<_r11.length;_i49++){var _e38=_r11[_i49];if(_e38.offset-=s,_e38.offset==t)continue;this.mergeAttributes(_e38).isEqual(_e38)||(s++,i--);}return co._createFromParentsAndOffsets(e,t,e,i);}},{key:"_unwrapChildren",value:function _unwrapChildren(e,t,i,n){var o=t;var r=[];for(;o<i;){var _t49=e.getChild(o);if(_t49.is("attributeElement")){if(_t49.isSimilar(n)){var _n24=_t49.getChildren(),_s6=_t49.childCount;_t49._remove(),e._insertChild(o,_n24),this._removeFromClonedElementsGroup(_t49),r.push(new lo(e,o),new lo(e,o+_s6)),o+=_s6,i+=_s6-1;}else this._unwrapAttributeElement(n,_t49)?(r.push(new lo(e,o),new lo(e,o+1)),o++):(this._unwrapChildren(_t49,0,_t49.childCount,n),o++);}else o++;}var s=0;for(var _i50=0,_r12=r;_i50<_r12.length;_i50++){var _e39=_r12[_i50];if(_e39.offset-=s,_e39.offset==t||_e39.offset==i)continue;this.mergeAttributes(_e39).isEqual(_e39)||(s++,i--);}return co._createFromParentsAndOffsets(e,t,e,i);}},{key:"_wrapRange",value:function _wrapRange(e,t){var _this$_breakAttribute3=this._breakAttributesRange(e,!0),i=_this$_breakAttribute3.start,n=_this$_breakAttribute3.end,o=i.parent,r=this._wrapChildren(o,i.offset,n.offset,t),s=this.mergeAttributes(r.start);s.isEqual(r.start)||r.end.offset--;var a=this.mergeAttributes(r.end);return new co(s,a);}},{key:"_wrapPosition",value:function _wrapPosition(e,t){if(t.isSimilar(e.parent))return Go(e.clone());e.parent.is("$text")&&(e=Ko(e));var i=this.createAttributeElement();i._priority=Number.POSITIVE_INFINITY,i.isSimilar=function(){return!1;},e.parent._insertChild(e.offset,i);var n=new co(e,e.getShiftedBy(1));this.wrap(n,t);var o=new lo(i.parent,i.index);i._remove();var r=o.nodeBefore,s=o.nodeAfter;return r instanceof un&&s instanceof un?Qo(r,s):Go(o);}},{key:"_wrapAttributeElement",value:function _wrapAttributeElement(e,t){if(!er(e,t))return!1;if(e.name!==t.name||e.priority!==t.priority)return!1;var _iterator55=_createForOfIteratorHelper(e.getAttributeKeys()),_step55;try{for(_iterator55.s();!(_step55=_iterator55.n()).done;){var _i51=_step55.value;if("class"!==_i51&&"style"!==_i51&&t.hasAttribute(_i51)&&t.getAttribute(_i51)!==e.getAttribute(_i51))return!1;}}catch(err){_iterator55.e(err);}finally{_iterator55.f();}var _iterator56=_createForOfIteratorHelper(e.getStyleNames()),_step56;try{for(_iterator56.s();!(_step56=_iterator56.n()).done;){var _i52=_step56.value;if(t.hasStyle(_i52)&&t.getStyle(_i52)!==e.getStyle(_i52))return!1;}}catch(err){_iterator56.e(err);}finally{_iterator56.f();}var _iterator57=_createForOfIteratorHelper(e.getAttributeKeys()),_step57;try{for(_iterator57.s();!(_step57=_iterator57.n()).done;){var _i53=_step57.value;"class"!==_i53&&"style"!==_i53&&(t.hasAttribute(_i53)||this.setAttribute(_i53,e.getAttribute(_i53),t));}}catch(err){_iterator57.e(err);}finally{_iterator57.f();}var _iterator58=_createForOfIteratorHelper(e.getStyleNames()),_step58;try{for(_iterator58.s();!(_step58=_iterator58.n()).done;){var _i54=_step58.value;t.hasStyle(_i54)||this.setStyle(_i54,e.getStyle(_i54),t);}}catch(err){_iterator58.e(err);}finally{_iterator58.f();}var _iterator59=_createForOfIteratorHelper(e.getClassNames()),_step59;try{for(_iterator59.s();!(_step59=_iterator59.n()).done;){var _i55=_step59.value;t.hasClass(_i55)||this.addClass(_i55,t);}}catch(err){_iterator59.e(err);}finally{_iterator59.f();}return!0;}},{key:"_unwrapAttributeElement",value:function _unwrapAttributeElement(e,t){if(!er(e,t))return!1;if(e.name!==t.name||e.priority!==t.priority)return!1;var _iterator60=_createForOfIteratorHelper(e.getAttributeKeys()),_step60;try{for(_iterator60.s();!(_step60=_iterator60.n()).done;){var _i56=_step60.value;if("class"!==_i56&&"style"!==_i56&&(!t.hasAttribute(_i56)||t.getAttribute(_i56)!==e.getAttribute(_i56)))return!1;}}catch(err){_iterator60.e(err);}finally{_iterator60.f();}if(!t.hasClass.apply(t,_toConsumableArray(e.getClassNames())))return!1;var _iterator61=_createForOfIteratorHelper(e.getStyleNames()),_step61;try{for(_iterator61.s();!(_step61=_iterator61.n()).done;){var _i57=_step61.value;if(!t.hasStyle(_i57)||t.getStyle(_i57)!==e.getStyle(_i57))return!1;}}catch(err){_iterator61.e(err);}finally{_iterator61.f();}var _iterator62=_createForOfIteratorHelper(e.getAttributeKeys()),_step62;try{for(_iterator62.s();!(_step62=_iterator62.n()).done;){var _i58=_step62.value;"class"!==_i58&&"style"!==_i58&&this.removeAttribute(_i58,t);}}catch(err){_iterator62.e(err);}finally{_iterator62.f();}return this.removeClass(Array.from(e.getClassNames()),t),this.removeStyle(Array.from(e.getStyleNames()),t),!0;}},{key:"_breakAttributesRange",value:function _breakAttributesRange(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;var i=e.start,n=e.end;if(Xo(e,this.document),e.isCollapsed){var _i59=this._breakAttributes(e.start,t);return new co(_i59,_i59);}var o=this._breakAttributes(n,t),r=o.parent.childCount,s=this._breakAttributes(i,t);return o.offset+=o.parent.childCount-r,new co(s,o);}},{key:"_breakAttributes",value:function _breakAttributes(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;var i=e.offset,n=e.parent;if(e.parent.is("emptyElement"))throw new l.a("view-writer-cannot-break-empty-element",this.document);if(e.parent.is("uiElement"))throw new l.a("view-writer-cannot-break-ui-element",this.document);if(e.parent.is("rawElement"))throw new l.a("view-writer-cannot-break-raw-element",this.document);if(!t&&n.is("$text")&&Zo(n.parent))return e.clone();if(Zo(n))return e.clone();if(n.is("$text"))return this._breakAttributes(Ko(e),t);if(i==n.childCount){var _e40=new lo(n.parent,n.index+1);return this._breakAttributes(_e40,t);}if(0===i){var _e41=new lo(n.parent,n.index);return this._breakAttributes(_e41,t);}{var _e42=n.index+1,_o18=n._clone();n.parent._insertChild(_e42,_o18),this._addToClonedElementsGroup(_o18);var _r13=n.childCount-i,_s7=n._removeChildren(i,_r13);_o18._appendChild(_s7);var _a6=new lo(n.parent,_e42);return this._breakAttributes(_a6,t);}}},{key:"_addToClonedElementsGroup",value:function _addToClonedElementsGroup(e){if(!e.root.is("rootElement"))return;if(e.is("element")){var _iterator63=_createForOfIteratorHelper(e.getChildren()),_step63;try{for(_iterator63.s();!(_step63=_iterator63.n()).done;){var _t50=_step63.value;this._addToClonedElementsGroup(_t50);}}catch(err){_iterator63.e(err);}finally{_iterator63.f();}}var t=e.id;if(!t)return;var i=this._cloneGroups.get(t);i||(i=new Set(),this._cloneGroups.set(t,i)),i.add(e),e._clonesGroup=i;}},{key:"_removeFromClonedElementsGroup",value:function _removeFromClonedElementsGroup(e){if(e.is("element")){var _iterator64=_createForOfIteratorHelper(e.getChildren()),_step64;try{for(_iterator64.s();!(_step64=_iterator64.n()).done;){var _t51=_step64.value;this._removeFromClonedElementsGroup(_t51);}}catch(err){_iterator64.e(err);}finally{_iterator64.f();}}var t=e.id;if(!t)return;var i=this._cloneGroups.get(t);i&&i["delete"](e);}}]);return qo;}();function $o(e){var t=e.parent;for(;!Zo(t);){if(!t)return;t=t.parent;}return t;}function Yo(e,t){return e.priority<t.priority||!(e.priority>t.priority)&&e.getIdentity()<t.getIdentity();}function Go(e){var t=e.nodeBefore;if(t&&t.is("$text"))return new lo(t,t.data.length);var i=e.nodeAfter;return i&&i.is("$text")?new lo(i,0):e;}function Ko(e){if(e.offset==e.parent.data.length)return new lo(e.parent.parent,e.parent.index+1);if(0===e.offset)return new lo(e.parent.parent,e.parent.index);var t=e.parent.data.slice(e.offset);return e.parent._data=e.parent.data.slice(0,e.offset),e.parent.parent._insertChild(e.parent.index+1,new un(e.root.document,t)),new lo(e.parent.parent,e.parent.index+1);}function Qo(e,t){var i=e.data.length;return e._data+=t.data,t._remove(),new lo(e,i);}var Jo=[un,xo,io,To,Ho,Bo];function Zo(e){return e&&(e.is("containerElement")||e.is("documentFragment"));}function Xo(e,t){var i=$o(e.start),n=$o(e.end);if(!i||!n||i!==n)throw new l.a("view-writer-invalid-range-container",t);}function er(e,t){return null===e.id&&null===t.id;}function tr(e){return"[object Text]"==Object.prototype.toString.call(e);}var ir=function ir(e){return e.createTextNode(" ");},nr=function nr(e){var t=e.createElement("span");return t.dataset.ckeFiller=!0,t.innerHTML=" ",t;},or=function or(e){var t=e.createElement("br");return t.dataset.ckeFiller=!0,t;},rr="⁠".repeat(7);function sr(e){return tr(e)&&e.data.substr(0,7)===rr;}function ar(e){return 7==e.data.length&&sr(e);}function lr(e){return sr(e)?e.data.slice(7):e.data;}function cr(e,t){if(t.keyCode==No.arrowleft){var _e43=t.domTarget.ownerDocument.defaultView.getSelection();if(1==_e43.rangeCount&&_e43.getRangeAt(0).collapsed){var _t52=_e43.getRangeAt(0).startContainer,_i60=_e43.getRangeAt(0).startOffset;sr(_t52)&&_i60<=7&&_e43.collapse(_t52,0);}}}function dr(e,t,i){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:!1;i=i||function(e,t){return e===t;},Array.isArray(e)||(e=Array.prototype.slice.call(e)),Array.isArray(t)||(t=Array.prototype.slice.call(t));var o=function(e,t,i){var n=ur(e,t,i);if(-1===n)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};var o=hr(e,n),r=hr(t,n),s=ur(o,r,i),a=e.length-s,l=t.length-s;return{firstIndex:n,lastIndexOld:a,lastIndexNew:l};}(e,t,i);return n?function(e,t){var i=e.firstIndex,n=e.lastIndexOld,o=e.lastIndexNew;if(-1===i)return Array(t).fill("equal");var r=[];i>0&&(r=r.concat(Array(i).fill("equal")));o-i>0&&(r=r.concat(Array(o-i).fill("insert")));n-i>0&&(r=r.concat(Array(n-i).fill("delete")));o<t&&(r=r.concat(Array(t-o).fill("equal")));return r;}(o,t.length):function(e,t){var i=[],n=t.firstIndex,o=t.lastIndexOld,r=t.lastIndexNew;r-n>0&&i.push({index:n,type:"insert",values:e.slice(n,r)});o-n>0&&i.push({index:n+(r-n),type:"delete",howMany:o-n});return i;}(t,o);}function ur(e,t,i){for(var _n25=0;_n25<Math.max(e.length,t.length);_n25++){if(void 0===e[_n25]||void 0===t[_n25]||!i(e[_n25],t[_n25]))return _n25;}return-1;}function hr(e,t){return e.slice(t).reverse();}function gr(e,t,i){i=i||function(e,t){return e===t;};var n=e.length,o=t.length;if(n>200||o>200||n+o>300)return gr.fastDiff(e,t,i,!0);var r,s;if(o<n){var _i61=e;e=t,t=_i61,r="delete",s="insert";}else r="insert",s="delete";var a=e.length,l=t.length,c=l-a,d={},u={};function h(n){var o=(void 0!==u[n-1]?u[n-1]:-1)+1,c=void 0!==u[n+1]?u[n+1]:-1,h=o>c?-1:1;d[n+h]&&(d[n]=d[n+h].slice(0)),d[n]||(d[n]=[]),d[n].push(o>c?r:s);var g=Math.max(o,c),m=g-n;for(;m<a&&g<l&&i(e[m],t[g]);){m++,g++,d[n].push("equal");}return g;}var g,m=0;do{for(g=-m;g<c;g++){u[g]=h(g);}for(g=c+m;g>c;g--){u[g]=h(g);}u[c]=h(c),m++;}while(u[c]!==l);return d[c].slice(1);}function mr(e,t,i){e.insertBefore(i,e.childNodes[t]||null);}function fr(e){var t=e.parentNode;t&&t.removeChild(e);}function pr(e){if(e){if(e.defaultView)return e instanceof e.defaultView.Document;if(e.ownerDocument&&e.ownerDocument.defaultView)return e instanceof e.ownerDocument.defaultView.Node;}return!1;}gr.fastDiff=dr;var br=/*#__PURE__*/function(){function br(e,t){_classCallCheck(this,br);this.domDocuments=new Set(),this.domConverter=e,this.markedAttributes=new Set(),this.markedChildren=new Set(),this.markedTexts=new Set(),this.selection=t,this.isFocused=!1,this._inlineFiller=null,this._fakeSelectionContainer=null;}_createClass(br,[{key:"markToSync",value:function markToSync(e,t){if("text"===e)this.domConverter.mapViewToDom(t.parent)&&this.markedTexts.add(t);else{if(!this.domConverter.mapViewToDom(t))return;if("attributes"===e)this.markedAttributes.add(t);else{if("children"!==e)throw new l.a("view-renderer-unknown-type",this);this.markedChildren.add(t);}}}},{key:"render",value:function render(){var e;var _iterator65=_createForOfIteratorHelper(this.markedChildren),_step65;try{for(_iterator65.s();!(_step65=_iterator65.n()).done;){var _e44=_step65.value;this._updateChildrenMappings(_e44);}}catch(err){_iterator65.e(err);}finally{_iterator65.f();}this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?e=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(e=this.selection.getFirstPosition(),this.markedChildren.add(e.parent));var _iterator66=_createForOfIteratorHelper(this.markedAttributes),_step66;try{for(_iterator66.s();!(_step66=_iterator66.n()).done;){var _e45=_step66.value;this._updateAttrs(_e45);}}catch(err){_iterator66.e(err);}finally{_iterator66.f();}var _iterator67=_createForOfIteratorHelper(this.markedChildren),_step67;try{for(_iterator67.s();!(_step67=_iterator67.n()).done;){var _t54=_step67.value;this._updateChildren(_t54,{inlineFillerPosition:e});}}catch(err){_iterator67.e(err);}finally{_iterator67.f();}var _iterator68=_createForOfIteratorHelper(this.markedTexts),_step68;try{for(_iterator68.s();!(_step68=_iterator68.n()).done;){var _t55=_step68.value;!this.markedChildren.has(_t55.parent)&&this.domConverter.mapViewToDom(_t55.parent)&&this._updateText(_t55,{inlineFillerPosition:e});}}catch(err){_iterator68.e(err);}finally{_iterator68.f();}if(e){var _t53=this.domConverter.viewPositionToDom(e),_i62=_t53.parent.ownerDocument;sr(_t53.parent)?this._inlineFiller=_t53.parent:this._inlineFiller=wr(_i62,_t53.parent,_t53.offset);}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear();}},{key:"_updateChildrenMappings",value:function _updateChildrenMappings(e){var t=this.domConverter.mapViewToDom(e);if(!t)return;var i=Array.from(this.domConverter.mapViewToDom(e).childNodes),n=Array.from(this.domConverter.viewChildrenToDom(e,t.ownerDocument,{withChildren:!1})),o=this._diffNodeLists(i,n),r=this._findReplaceActions(o,i,n);if(-1!==r.indexOf("replace")){var _t56={equal:0,insert:0,"delete":0};var _iterator69=_createForOfIteratorHelper(r),_step69;try{for(_iterator69.s();!(_step69=_iterator69.n()).done;){var _o19=_step69.value;if("replace"===_o19){var _o20=_t56.equal+_t56.insert,_r14=_t56.equal+_t56["delete"],_s8=e.getChild(_o20);!_s8||_s8.is("uiElement")||_s8.is("rawElement")||this._updateElementMappings(_s8,i[_r14]),fr(n[_o20]),_t56.equal++;}else _t56[_o19]++;}}catch(err){_iterator69.e(err);}finally{_iterator69.f();}}}},{key:"_updateElementMappings",value:function _updateElementMappings(e,t){this.domConverter.unbindDomElement(t),this.domConverter.bindElements(t,e),this.markedChildren.add(e),this.markedAttributes.add(e);}},{key:"_getInlineFillerPosition",value:function _getInlineFillerPosition(){var e=this.selection.getFirstPosition();return e.parent.is("$text")?lo._createBefore(this.selection.getFirstPosition().parent):e;}},{key:"_isSelectionInInlineFiller",value:function _isSelectionInInlineFiller(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;var e=this.selection.getFirstPosition(),t=this.domConverter.viewPositionToDom(e);return!!(t&&tr(t.parent)&&sr(t.parent));}},{key:"_removeInlineFiller",value:function _removeInlineFiller(){var e=this._inlineFiller;if(!sr(e))throw new l.a("view-renderer-filler-was-lost",this);ar(e)?e.parentNode.removeChild(e):e.data=e.data.substr(7),this._inlineFiller=null;}},{key:"_needsInlineFillerAtSelection",value:function _needsInlineFillerAtSelection(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;var e=this.selection.getFirstPosition(),t=e.parent,i=e.offset;if(!this.domConverter.mapViewToDom(t.root))return!1;if(!t.is("element"))return!1;if(!function(e){if("false"==e.getAttribute("contenteditable"))return!1;var t=e.findAncestor(function(e){return e.hasAttribute("contenteditable");});return!t||"true"==t.getAttribute("contenteditable");}(t))return!1;if(i===t.getFillerOffset())return!1;var n=e.nodeBefore,o=e.nodeAfter;return!(n instanceof un||o instanceof un);}},{key:"_updateText",value:function _updateText(e,t){var i=this.domConverter.findCorrespondingDomText(e),n=this.domConverter.viewToDom(e,i.ownerDocument),o=i.data;var r=n.data;var s=t.inlineFillerPosition;if(s&&s.parent==e.parent&&s.offset==e.index&&(r=rr+r),o!=r){var _e46=dr(o,r);var _iterator70=_createForOfIteratorHelper(_e46),_step70;try{for(_iterator70.s();!(_step70=_iterator70.n()).done;){var _t57=_step70.value;"insert"===_t57.type?i.insertData(_t57.index,_t57.values.join("")):i.deleteData(_t57.index,_t57.howMany);}}catch(err){_iterator70.e(err);}finally{_iterator70.f();}}}},{key:"_updateAttrs",value:function _updateAttrs(e){var t=this.domConverter.mapViewToDom(e);if(!t)return;var i=Array.from(t.attributes).map(function(e){return e.name;}),n=e.getAttributeKeys();var _iterator71=_createForOfIteratorHelper(n),_step71;try{for(_iterator71.s();!(_step71=_iterator71.n()).done;){var _i63=_step71.value;t.setAttribute(_i63,e.getAttribute(_i63));}}catch(err){_iterator71.e(err);}finally{_iterator71.f();}var _iterator72=_createForOfIteratorHelper(i),_step72;try{for(_iterator72.s();!(_step72=_iterator72.n()).done;){var _n26=_step72.value;e.hasAttribute(_n26)||t.removeAttribute(_n26);}}catch(err){_iterator72.e(err);}finally{_iterator72.f();}}},{key:"_updateChildren",value:function _updateChildren(e,t){var i=this.domConverter.mapViewToDom(e);if(!i)return;var n=t.inlineFillerPosition,o=this.domConverter.mapViewToDom(e).childNodes,r=Array.from(this.domConverter.viewChildrenToDom(e,i.ownerDocument,{bind:!0,inlineFillerPosition:n}));n&&n.parent===e&&wr(i.ownerDocument,r,n.offset);var s=this._diffNodeLists(o,r);var a=0;var l=new Set();var _iterator73=_createForOfIteratorHelper(s),_step73;try{for(_iterator73.s();!(_step73=_iterator73.n()).done;){var _e47=_step73.value;"delete"===_e47?(l.add(o[a]),fr(o[a])):"equal"===_e47&&a++;}}catch(err){_iterator73.e(err);}finally{_iterator73.f();}a=0;var _iterator74=_createForOfIteratorHelper(s),_step74;try{for(_iterator74.s();!(_step74=_iterator74.n()).done;){var _e48=_step74.value;"insert"===_e48?(mr(i,a,r[a]),a++):"equal"===_e48&&(this._markDescendantTextToSync(this.domConverter.domToView(r[a])),a++);}}catch(err){_iterator74.e(err);}finally{_iterator74.f();}var _iterator75=_createForOfIteratorHelper(l),_step75;try{for(_iterator75.s();!(_step75=_iterator75.n()).done;){var _e49=_step75.value;_e49.parentNode||this.domConverter.unbindDomElement(_e49);}}catch(err){_iterator75.e(err);}finally{_iterator75.f();}}},{key:"_diffNodeLists",value:function _diffNodeLists(e,t){return gr(e=function(e,t){var i=Array.from(e);if(0==i.length||!t)return i;i[i.length-1]==t&&i.pop();return i;}(e,this._fakeSelectionContainer),t,_r.bind(null,this.domConverter));}},{key:"_findReplaceActions",value:function _findReplaceActions(e,t,i){if(-1===e.indexOf("insert")||-1===e.indexOf("delete"))return e;var n=[],o=[],r=[];var s={equal:0,insert:0,"delete":0};var _iterator76=_createForOfIteratorHelper(e),_step76;try{for(_iterator76.s();!(_step76=_iterator76.n()).done;){var _a7=_step76.value;"insert"===_a7?r.push(i[s.equal+s.insert]):"delete"===_a7?o.push(t[s.equal+s["delete"]]):(n=n.concat(gr(o,r,kr).map(function(e){return"equal"===e?"replace":e;})),n.push("equal"),o=[],r=[]),s[_a7]++;}}catch(err){_iterator76.e(err);}finally{_iterator76.f();}return n.concat(gr(o,r,kr).map(function(e){return"equal"===e?"replace":e;}));}},{key:"_markDescendantTextToSync",value:function _markDescendantTextToSync(e){if(e)if(e.is("$text"))this.markedTexts.add(e);else if(e.is("element")){var _iterator77=_createForOfIteratorHelper(e.getChildren()),_step77;try{for(_iterator77.s();!(_step77=_iterator77.n()).done;){var _t58=_step77.value;this._markDescendantTextToSync(_t58);}}catch(err){_iterator77.e(err);}finally{_iterator77.f();}}}},{key:"_updateSelection",value:function _updateSelection(){if(0===this.selection.rangeCount)return this._removeDomSelection(),void this._removeFakeSelection();var e=this.domConverter.mapViewToDom(this.selection.editableElement);this.isFocused&&e&&(this.selection.isFake?this._updateFakeSelection(e):(this._removeFakeSelection(),this._updateDomSelection(e)));}},{key:"_updateFakeSelection",value:function _updateFakeSelection(e){var t=e.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=function(e){var t=e.createElement("div");return t.className="ck-fake-selection-container",Object.assign(t.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),t.textContent=" ",t;}(t));var i=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(i,this.selection),!this._fakeSelectionNeedsUpdate(e))return;i.parentElement&&i.parentElement==e||e.appendChild(i),i.textContent=this.selection.fakeSelectionLabel||" ";var n=t.getSelection(),o=t.createRange();n.removeAllRanges(),o.selectNodeContents(i),n.addRange(o);}},{key:"_updateDomSelection",value:function _updateDomSelection(e){var t=e.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(t))return;var i=this.domConverter.viewPositionToDom(this.selection.anchor),n=this.domConverter.viewPositionToDom(this.selection.focus);t.collapse(i.parent,i.offset),t.extend(n.parent,n.offset),So.isGecko&&function(e,t){var i=e.parent;if(i.nodeType!=Node.ELEMENT_NODE||e.offset!=i.childNodes.length-1)return;var n=i.childNodes[e.offset];n&&"BR"==n.tagName&&t.addRange(t.getRangeAt(0));}(n,t);}},{key:"_domSelectionNeedsUpdate",value:function _domSelectionNeedsUpdate(e){if(!this.domConverter.isDomSelectionCorrect(e))return!0;var t=e&&this.domConverter.domSelectionToView(e);return(!t||!this.selection.isEqual(t))&&!(!this.selection.isCollapsed&&this.selection.isSimilar(t));}},{key:"_fakeSelectionNeedsUpdate",value:function _fakeSelectionNeedsUpdate(e){var t=this._fakeSelectionContainer,i=e.ownerDocument.getSelection();return!t||t.parentElement!==e||i.anchorNode!==t&&!t.contains(i.anchorNode)||t.textContent!==this.selection.fakeSelectionLabel;}},{key:"_removeDomSelection",value:function _removeDomSelection(){var _iterator78=_createForOfIteratorHelper(this.domDocuments),_step78;try{for(_iterator78.s();!(_step78=_iterator78.n()).done;){var _e50=_step78.value;if(_e50.getSelection().rangeCount){var _t59=_e50.activeElement,_i64=this.domConverter.mapDomToView(_t59);_t59&&_i64&&_e50.getSelection().removeAllRanges();}}}catch(err){_iterator78.e(err);}finally{_iterator78.f();}}},{key:"_removeFakeSelection",value:function _removeFakeSelection(){var e=this._fakeSelectionContainer;e&&e.remove();}},{key:"_updateFocus",value:function _updateFocus(){if(this.isFocused){var _e51=this.selection.editableElement;_e51&&this.domConverter.focus(_e51);}}}]);return br;}();function wr(e,t,i){var n=t instanceof Array?t:t.childNodes,o=n[i];if(tr(o))return o.data=rr+o.data,o;{var _o21=e.createTextNode(rr);return Array.isArray(t)?n.splice(i,0,_o21):mr(t,i,_o21),_o21;}}function kr(e,t){return pr(e)&&pr(t)&&!tr(e)&&!tr(t)&&e.nodeType!==Node.COMMENT_NODE&&t.nodeType!==Node.COMMENT_NODE&&e.tagName.toLowerCase()===t.tagName.toLowerCase();}function _r(e,t,i){return t===i||(tr(t)&&tr(i)?t.data===i.data:!(!e.isBlockFiller(t)||!e.isBlockFiller(i)));}Ke(br,Ue);var vr={window:window,document:document};function yr(e){var t=0;for(;e.previousSibling;){e=e.previousSibling,t++;}return t;}function xr(e){var t=[];for(;e&&e.nodeType!=Node.DOCUMENT_NODE;){t.unshift(e),e=e.parentNode;}return t;}var Ar=or(document),Cr=ir(document),Tr=nr(document);var Er=/*#__PURE__*/function(){function Er(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,Er);this.document=e,this.blockFillerMode=t.blockFillerMode||"br",this.preElements=["pre"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this._domToViewMapping=new WeakMap(),this._viewToDomMapping=new WeakMap(),this._fakeSelectionMapping=new WeakMap(),this._rawContentElementMatcher=new mn(),this._encounteredRawContentDomNodes=new WeakSet();}_createClass(Er,[{key:"bindFakeSelection",value:function bindFakeSelection(e,t){this._fakeSelectionMapping.set(e,new go(t));}},{key:"fakeSelectionToView",value:function fakeSelectionToView(e){return this._fakeSelectionMapping.get(e);}},{key:"bindElements",value:function bindElements(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e);}},{key:"unbindDomElement",value:function unbindDomElement(e){var t=this._domToViewMapping.get(e);if(t){this._domToViewMapping["delete"](e),this._viewToDomMapping["delete"](t);var _iterator79=_createForOfIteratorHelper(e.childNodes),_step79;try{for(_iterator79.s();!(_step79=_iterator79.n()).done;){var _t60=_step79.value;this.unbindDomElement(_t60);}}catch(err){_iterator79.e(err);}finally{_iterator79.f();}}}},{key:"bindDocumentFragments",value:function bindDocumentFragments(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e);}},{key:"viewToDom",value:function viewToDom(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(e.is("$text")){var _i65=this._processDataFromViewText(e);return t.createTextNode(_i65);}{if(this.mapViewToDom(e))return this.mapViewToDom(e);var _n27;if(e.is("documentFragment"))_n27=t.createDocumentFragment(),i.bind&&this.bindDocumentFragments(_n27,e);else{if(e.is("uiElement"))return _n27="$comment"===e.name?t.createComment(e.getCustomProperty("$rawContent")):e.render(t),i.bind&&this.bindElements(_n27,e),_n27;_n27=e.hasAttribute("xmlns")?t.createElementNS(e.getAttribute("xmlns"),e.name):t.createElement(e.name),e.is("rawElement")&&e.render(_n27),i.bind&&this.bindElements(_n27,e);var _iterator80=_createForOfIteratorHelper(e.getAttributeKeys()),_step80;try{for(_iterator80.s();!(_step80=_iterator80.n()).done;){var _t61=_step80.value;_n27.setAttribute(_t61,e.getAttribute(_t61));}}catch(err){_iterator80.e(err);}finally{_iterator80.f();}}if(!1!==i.withChildren){var _iterator81=_createForOfIteratorHelper(this.viewChildrenToDom(e,t,i)),_step81;try{for(_iterator81.s();!(_step81=_iterator81.n()).done;){var _o22=_step81.value;_n27.appendChild(_o22);}}catch(err){_iterator81.e(err);}finally{_iterator81.f();}}return _n27;}}},{key:"viewChildrenToDom",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function viewChildrenToDom(e,t){var i,n,o,_iterator82,_step82,_r15,_args11=arguments;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function viewChildrenToDom$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:i=_args11.length>2&&_args11[2]!==undefined?_args11[2]:{};n=e.getFillerOffset&&e.getFillerOffset();o=0;_iterator82=_createForOfIteratorHelper(e.getChildren());_context11.prev=4;_iterator82.s();case 6:if((_step82=_iterator82.n()).done){_context11.next=17;break;}_r15=_step82.value;_context11.t0=n===o;if(!_context11.t0){_context11.next=12;break;}_context11.next=12;return this._getBlockFiller(t);case 12:_context11.next=14;return this.viewToDom(_r15,t,i);case 14:o++;case 15:_context11.next=6;break;case 17:_context11.next=22;break;case 19:_context11.prev=19;_context11.t1=_context11["catch"](4);_iterator82.e(_context11.t1);case 22:_context11.prev=22;_iterator82.f();return _context11.finish(22);case 25:_context11.t2=n===o;if(!_context11.t2){_context11.next=29;break;}_context11.next=29;return this._getBlockFiller(t);case 29:case"end":return _context11.stop();}}},viewChildrenToDom,this,[[4,19,22,25]]);})},{key:"viewRangeToDom",value:function viewRangeToDom(e){var t=this.viewPositionToDom(e.start),i=this.viewPositionToDom(e.end),n=document.createRange();return n.setStart(t.parent,t.offset),n.setEnd(i.parent,i.offset),n;}},{key:"viewPositionToDom",value:function viewPositionToDom(e){var t=e.parent;if(t.is("$text")){var _i66=this.findCorrespondingDomText(t);if(!_i66)return null;var _n28=e.offset;return sr(_i66)&&(_n28+=7),{parent:_i66,offset:_n28};}{var _i67,_n29,_o23;if(0===e.offset){if(_i67=this.mapViewToDom(t),!_i67)return null;_o23=_i67.childNodes[0];}else{var _t62=e.nodeBefore;if(_n29=_t62.is("$text")?this.findCorrespondingDomText(_t62):this.mapViewToDom(e.nodeBefore),!_n29)return null;_i67=_n29.parentNode,_o23=_n29.nextSibling;}if(tr(_o23)&&sr(_o23))return{parent:_o23,offset:7};return{parent:_i67,offset:_n29?yr(_n29)+1:0};}}},{key:"domToView",value:function domToView(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(this.isBlockFiller(e))return null;var i=this.getHostViewElement(e);if(i)return i;if(this.isComment(e)&&t.skipComments)return null;if(tr(e)){if(ar(e))return null;{var _t63=this._processDataFromDomText(e);return""===_t63?null:new un(this.document,_t63);}}{if(this.mapDomToView(e))return this.mapDomToView(e);var _i68;if(this.isDocumentFragment(e))_i68=new Wo(this.document),t.bind&&this.bindDocumentFragments(e,_i68);else{_i68=this._createViewElement(e,t),t.bind&&this.bindElements(e,_i68);var _n30=e.attributes;if(_n30)for(var _e52=_n30.length-1;_e52>=0;_e52--){_i68._setAttribute(_n30[_e52].name,_n30[_e52].value);}if(this._isViewElementWithRawContent(_i68,t)||this.isComment(e)){var _t64=this.isComment(e)?e.data:e.innerHTML;return _i68._setCustomProperty("$rawContent",_t64),this._encounteredRawContentDomNodes.add(e),_i68;}}if(!1!==t.withChildren){var _iterator83=_createForOfIteratorHelper(this.domChildrenToView(e,t)),_step83;try{for(_iterator83.s();!(_step83=_iterator83.n()).done;){var _n31=_step83.value;_i68._appendChild(_n31);}}catch(err){_iterator83.e(err);}finally{_iterator83.f();}}return _i68;}}},{key:"domChildrenToView",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function domChildrenToView(e){var t,_i69,_n32,_o24,_args12=arguments;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function domChildrenToView$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:t=_args12.length>1&&_args12[1]!==undefined?_args12[1]:{};_i69=0;case 2:if(!(_i69<e.childNodes.length)){_context12.next=11;break;}_n32=e.childNodes[_i69],_o24=this.domToView(_n32,t);_context12.t0=null!==_o24;if(!_context12.t0){_context12.next=8;break;}_context12.next=8;return _o24;case 8:_i69++;_context12.next=2;break;case 11:case"end":return _context12.stop();}}},domChildrenToView,this);})},{key:"domSelectionToView",value:function domSelectionToView(e){if(1===e.rangeCount){var _t65=e.getRangeAt(0).startContainer;tr(_t65)&&(_t65=_t65.parentNode);var _i70=this.fakeSelectionToView(_t65);if(_i70)return _i70;}var t=this.isDomSelectionBackward(e),i=[];for(var _t66=0;_t66<e.rangeCount;_t66++){var _n33=e.getRangeAt(_t66),_o25=this.domRangeToView(_n33);_o25&&i.push(_o25);}return new go(i,{backward:t});}},{key:"domRangeToView",value:function domRangeToView(e){var t=this.domPositionToView(e.startContainer,e.startOffset),i=this.domPositionToView(e.endContainer,e.endOffset);return t&&i?new co(t,i):null;}},{key:"domPositionToView",value:function domPositionToView(e,t){if(this.isBlockFiller(e))return this.domPositionToView(e.parentNode,yr(e));var i=this.mapDomToView(e);if(i&&(i.is("uiElement")||i.is("rawElement")))return lo._createBefore(i);if(tr(e)){if(ar(e))return this.domPositionToView(e.parentNode,yr(e));var _i71=this.findCorrespondingViewText(e);var _n34=t;return _i71?(sr(e)&&(_n34-=7,_n34=_n34<0?0:_n34),new lo(_i71,_n34)):null;}if(0===t){var _t67=this.mapDomToView(e);if(_t67)return new lo(_t67,0);}else{var _i72=e.childNodes[t-1],_n35=tr(_i72)?this.findCorrespondingViewText(_i72):this.mapDomToView(_i72);if(_n35&&_n35.parent)return new lo(_n35.parent,_n35.index+1);}return null;}},{key:"mapDomToView",value:function mapDomToView(e){return this.getHostViewElement(e)||this._domToViewMapping.get(e);}},{key:"findCorrespondingViewText",value:function findCorrespondingViewText(e){if(ar(e))return null;var t=this.getHostViewElement(e);if(t)return t;var i=e.previousSibling;if(i){if(!this.isElement(i))return null;var _e53=this.mapDomToView(i);if(_e53){return _e53.nextSibling instanceof un?_e53.nextSibling:null;}}else{var _t68=this.mapDomToView(e.parentNode);if(_t68){var _e54=_t68.getChild(0);return _e54 instanceof un?_e54:null;}}return null;}},{key:"mapViewToDom",value:function mapViewToDom(e){return this._viewToDomMapping.get(e);}},{key:"findCorrespondingDomText",value:function findCorrespondingDomText(e){var t=e.previousSibling;return t&&this.mapViewToDom(t)?this.mapViewToDom(t).nextSibling:!t&&e.parent&&this.mapViewToDom(e.parent)?this.mapViewToDom(e.parent).childNodes[0]:null;}},{key:"focus",value:function focus(e){var t=this.mapViewToDom(e);if(t&&t.ownerDocument.activeElement!==t){var _vr$window=vr.window,_e55=_vr$window.scrollX,_i73=_vr$window.scrollY,_n36=[];Ir(t,function(e){var t=e.scrollLeft,i=e.scrollTop;_n36.push([t,i]);}),t.focus(),Ir(t,function(e){var _n36$shift=_n36.shift(),_n36$shift2=_slicedToArray(_n36$shift,2),t=_n36$shift2[0],i=_n36$shift2[1];e.scrollLeft=t,e.scrollTop=i;}),vr.window.scrollTo(_e55,_i73);}}},{key:"isElement",value:function isElement(e){return e&&e.nodeType==Node.ELEMENT_NODE;}},{key:"isDocumentFragment",value:function isDocumentFragment(e){return e&&e.nodeType==Node.DOCUMENT_FRAGMENT_NODE;}},{key:"isComment",value:function isComment(e){return e&&e.nodeType==Node.COMMENT_NODE;}},{key:"isBlockFiller",value:function isBlockFiller(e){return"br"==this.blockFillerMode?e.isEqualNode(Ar):!("BR"!==e.tagName||!Sr(e,this.blockElements)||1!==e.parentNode.childNodes.length)||e.isEqualNode(Tr)||function(e,t){return e.isEqualNode(Cr)&&Sr(e,t)&&1===e.parentNode.childNodes.length;}(e,this.blockElements);}},{key:"isDomSelectionBackward",value:function isDomSelectionBackward(e){if(e.isCollapsed)return!1;var t=document.createRange();t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset);var i=t.collapsed;return t.detach(),i;}},{key:"getHostViewElement",value:function getHostViewElement(e){var t=xr(e);for(t.pop();t.length;){var _e56=t.pop(),_i74=this._domToViewMapping.get(_e56);if(_i74&&(_i74.is("uiElement")||_i74.is("rawElement")))return _i74;}return null;}},{key:"isDomSelectionCorrect",value:function isDomSelectionCorrect(e){return this._isDomSelectionPositionCorrect(e.anchorNode,e.anchorOffset)&&this._isDomSelectionPositionCorrect(e.focusNode,e.focusOffset);}},{key:"registerRawContentMatcher",value:function registerRawContentMatcher(e){this._rawContentElementMatcher.add(e);}},{key:"_getBlockFiller",value:function _getBlockFiller(e){switch(this.blockFillerMode){case"nbsp":return ir(e);case"markedNbsp":return nr(e);case"br":return or(e);}}},{key:"_isDomSelectionPositionCorrect",value:function _isDomSelectionPositionCorrect(e,t){if(tr(e)&&sr(e)&&t<7)return!1;if(this.isElement(e)&&sr(e.childNodes[t]))return!1;var i=this.mapDomToView(e);return!i||!i.is("uiElement")&&!i.is("rawElement");}},{key:"_processDataFromViewText",value:function _processDataFromViewText(e){var _this28=this;var t=e.data;if(e.getAncestors().some(function(e){return _this28.preElements.includes(e.name);}))return t;if(" "==t.charAt(0)){var _i75=this._getTouchingInlineViewNode(e,!1);!(_i75&&_i75.is("$textProxy")&&this._nodeEndsWithSpace(_i75))&&_i75||(t=" "+t.substr(1));}if(" "==t.charAt(t.length-1)){var _i76=this._getTouchingInlineViewNode(e,!0),_n37=_i76&&_i76.is("$textProxy")&&" "==_i76.data.charAt(0);" "!=t.charAt(t.length-2)&&_i76&&!_n37||(t=t.substr(0,t.length-1)+" ");}return t.replace(/ {2}/g,"  ");}},{key:"_nodeEndsWithSpace",value:function _nodeEndsWithSpace(e){var _this29=this;if(e.getAncestors().some(function(e){return _this29.preElements.includes(e.name);}))return!1;var t=this._processDataFromViewText(e);return" "==t.charAt(t.length-1);}},{key:"_processDataFromDomText",value:function _processDataFromDomText(e){var t=e.data;if(function(e,t){return xr(e).some(function(e){return e.tagName&&t.includes(e.tagName.toLowerCase());});}(e,this.preElements))return lr(e);t=t.replace(/[ \n\t\r]{1,}/g," ");var i=this._getTouchingInlineDomNode(e,!1),n=this._getTouchingInlineDomNode(e,!0),o=this._checkShouldLeftTrimDomText(e,i),r=this._checkShouldRightTrimDomText(e,n);o&&(t=t.replace(/^ /,"")),r&&(t=t.replace(/ $/,"")),t=lr(new Text(t)),t=t.replace(/ \u00A0/g,"  ");var s=n&&this.isElement(n)&&"BR"!=n.tagName,a=n&&tr(n)&&" "==n.data.charAt(0);return(/( |\u00A0)\u00A0$/.test(t)||!n||s||a)&&(t=t.replace(/\u00A0$/," ")),(o||i&&this.isElement(i)&&"BR"!=i.tagName)&&(t=t.replace(/^\u00A0/," ")),t;}},{key:"_checkShouldLeftTrimDomText",value:function _checkShouldLeftTrimDomText(e,t){return!t||(this.isElement(t)?"BR"===t.tagName:!this._encounteredRawContentDomNodes.has(e.previousSibling)&&/[^\S\u00A0]/.test(t.data.charAt(t.data.length-1)));}},{key:"_checkShouldRightTrimDomText",value:function _checkShouldRightTrimDomText(e,t){return!t&&!sr(e);}},{key:"_getTouchingInlineViewNode",value:function _getTouchingInlineViewNode(e,t){var i=new ao({startPosition:t?lo._createAfter(e):lo._createBefore(e),direction:t?"forward":"backward"});var _iterator84=_createForOfIteratorHelper(i),_step84;try{for(_iterator84.s();!(_step84=_iterator84.n()).done;){var _e57=_step84.value;if(_e57.item.is("element")&&this.inlineObjectElements.includes(_e57.item.name))return _e57.item;if(_e57.item.is("containerElement"))return null;if(_e57.item.is("element","br"))return null;if(_e57.item.is("$textProxy"))return _e57.item;}}catch(err){_iterator84.e(err);}finally{_iterator84.f();}return null;}},{key:"_getTouchingInlineDomNode",value:function _getTouchingInlineDomNode(e,t){if(!e.parentNode)return null;var i=t?"firstChild":"lastChild",n=t?"nextSibling":"previousSibling";var o=!0;do{if(!o&&e[i]?e=e[i]:e[n]?(e=e[n],o=!1):(e=e.parentNode,o=!0),!e||this._isBlockElement(e))return null;}while(!tr(e)&&"BR"!=e.tagName&&!this._isInlineObjectElement(e));return e;}},{key:"_isBlockElement",value:function _isBlockElement(e){return this.isElement(e)&&this.blockElements.includes(e.tagName.toLowerCase());}},{key:"_isInlineObjectElement",value:function _isInlineObjectElement(e){return this.isElement(e)&&this.inlineObjectElements.includes(e.tagName.toLowerCase());}},{key:"_createViewElement",value:function _createViewElement(e,t){if(this.isComment(e))return new Bo(this.document,"$comment");var i=t.keepOriginalCase?e.tagName:e.tagName.toLowerCase();return new eo(this.document,i);}},{key:"_isViewElementWithRawContent",value:function _isViewElementWithRawContent(e,t){return!1!==t.withChildren&&this._rawContentElementMatcher.match(e);}}]);return Er;}();function Ir(e,t){for(;e&&e!=vr.document;){t(e),e=e.parentNode;}}function Sr(e,t){var i=e.parentNode;return i&&i.tagName&&t.includes(i.tagName.toLowerCase());}function Pr(e){var t=Object.prototype.toString.apply(e);return"[object Window]"==t||"[object global]"==t;}var Mr=De({},u,{listenTo:function listenTo(e){var _u$listenTo;for(var _len18=arguments.length,t=new Array(_len18>1?_len18-1:0),_key18=1;_key18<_len18;_key18++){t[_key18-1]=arguments[_key18];}if(pr(e)||Pr(e)){var _i77=this._getProxyEmitter(e)||new Nr(e);_i77.attach.apply(_i77,t),e=_i77;}(_u$listenTo=u.listenTo).call.apply(_u$listenTo,[this,e].concat(t));},stopListening:function stopListening(e,t,i){if(pr(e)||Pr(e)){var _t69=this._getProxyEmitter(e);if(!_t69)return;e=_t69;}u.stopListening.call(this,e,t,i),e instanceof Nr&&e.detach(t);},_getProxyEmitter:function _getProxyEmitter(e){return t=this,i=Rr(e),t[c]&&t[c][i]?t[c][i].emitter:null;var t,i;}});var Nr=/*#__PURE__*/_createClass(function Nr(e){_classCallCheck(this,Nr);h(this,Rr(e)),this._domNode=e;});function Rr(e){return e["data-ck-expando"]||(e["data-ck-expando"]=s());}De(Nr.prototype,u,{attach:function attach(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(this._domListeners&&this._domListeners[e])return;var n={capture:!!i.useCapture,passive:!!i.usePassive},o=this._createDomListener(e,n);this._domNode.addEventListener(e,o,n),this._domListeners||(this._domListeners={}),this._domListeners[e]=o;},detach:function detach(e){var t;!this._domListeners[e]||(t=this._events[e])&&t.callbacks.length||this._domListeners[e].removeListener();},_createDomListener:function _createDomListener(e,t){var _this30=this;var i=function i(t){_this30.fire(e,t);};return i.removeListener=function(){_this30._domNode.removeEventListener(e,i,t),delete _this30._domListeners[e];},i;}});var zr=/*#__PURE__*/function(){function zr(e){_classCallCheck(this,zr);this.view=e,this.document=e.document,this.isEnabled=!1;}_createClass(zr,[{key:"enable",value:function enable(){this.isEnabled=!0;}},{key:"disable",value:function disable(){this.isEnabled=!1;}},{key:"destroy",value:function destroy(){this.disable(),this.stopListening();}},{key:"checkShouldIgnoreEventFromTarget",value:function checkShouldIgnoreEventFromTarget(e){return e&&3===e.nodeType&&(e=e.parentNode),!(!e||1!==e.nodeType)&&e.matches("[data-cke-ignore-events], [data-cke-ignore-events] *");}}]);return zr;}();Ke(zr,Mr);var Or=function Or(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this;};var Dr=function Dr(e){return this.__data__.has(e);};function Lr(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new Ft();++t<i;){this.add(e[t]);}}Lr.prototype.add=Lr.prototype.push=Or,Lr.prototype.has=Dr;var Vr=Lr;var Br=function Br(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;){if(t(e[i],i,e))return!0;}return!1;};var jr=function jr(e,t){return e.has(t);};var Fr=function Fr(e,t,i,n,o,r){var s=1&i,a=e.length,l=t.length;if(a!=l&&!(s&&l>a))return!1;var c=r.get(e),d=r.get(t);if(c&&d)return c==t&&d==e;var u=-1,h=!0,g=2&i?new Vr():void 0;for(r.set(e,t),r.set(t,e);++u<a;){var m=e[u],f=t[u];if(n)var p=s?n(f,m,u,t,e,r):n(m,f,u,e,t,r);if(void 0!==p){if(p)continue;h=!1;break;}if(g){if(!Br(t,function(e,t){if(!jr(g,t)&&(m===e||o(m,e,i,n,r)))return g.push(t);})){h=!1;break;}}else if(m!==f&&!o(m,f,i,n,r)){h=!1;break;}}return r["delete"](e),r["delete"](t),h;};var Hr=function Hr(e){var t=-1,i=Array(e.size);return e.forEach(function(e,n){i[++t]=[n,e];}),i;};var Ur=function Ur(e){var t=-1,i=Array(e.size);return e.forEach(function(e){i[++t]=e;}),i;},Wr=_?_.prototype:void 0,qr=Wr?Wr.valueOf:void 0;var $r=function $r(e,t,i,n,o,r,s){switch(i){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!r(new Ci(e),new Ci(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return G(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=Hr;case"[object Set]":var l=1&n;if(a||(a=Ur),e.size!=t.size&&!l)return!1;var c=s.get(e);if(c)return c==t;n|=2,s.set(e,t);var d=Fr(a(e),a(t),n,o,r,s);return s["delete"](e),d;case"[object Symbol]":if(qr)return qr.call(e)==qr.call(t);}return!1;},Yr=Object.prototype.hasOwnProperty;var Gr=function Gr(e,t,i,n,o,r){var s=1&i,a=di(e),l=a.length;if(l!=di(t).length&&!s)return!1;for(var c=l;c--;){var d=a[c];if(!(s?d in t:Yr.call(t,d)))return!1;}var u=r.get(e),h=r.get(t);if(u&&h)return u==t&&h==e;var g=!0;r.set(e,t),r.set(t,e);for(var m=s;++c<l;){var f=e[d=a[c]],p=t[d];if(n)var b=s?n(p,f,d,t,e,r):n(f,p,d,e,t,r);if(!(void 0===b?f===p||o(f,p,i,n,r):b)){g=!1;break;}m||(m="constructor"==d);}if(g&&!m){var w=e.constructor,k=t.constructor;w==k||!("constructor"in e)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof k&&k instanceof k||(g=!1);}return r["delete"](e),r["delete"](t),g;},Kr=Object.prototype.hasOwnProperty;var Qr=function Qr(e,t,i,n,o,r){var s=_e(e),a=_e(t),l=s?"[object Array]":yi(e),c=a?"[object Array]":yi(t),d="[object Object]"==(l="[object Arguments]"==l?"[object Object]":l),u="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c),h=l==c;if(h&&Object(ve.a)(e)){if(!Object(ve.a)(t))return!1;s=!0,d=!1;}if(h&&!d)return r||(r=new Wt()),s||Ee(e)?Fr(e,t,i,n,o,r):$r(e,t,l,i,n,o,r);if(!(1&i)){var g=d&&Kr.call(e,"__wrapped__"),m=u&&Kr.call(t,"__wrapped__");if(g||m){var f=g?e.value():e,p=m?t.value():t;return r||(r=new Wt()),o(f,p,i,n,r);}}return!!h&&(r||(r=new Wt()),Gr(e,t,i,n,o,r));};var Jr=function e(t,i,n,o,r){return t===i||(null==t||null==i||!me(t)&&!me(i)?t!=t&&i!=i:Qr(t,i,n,o,e,r));};var Zr=function Zr(e,t,i){var n=(i="function"==typeof i?i:void 0)?i(e,t):void 0;return void 0===n?Jr(e,t,void 0,i):!!n;};var Xr=/*#__PURE__*/function(_zr){_inherits(Xr,_zr);var _super13=_createSuper(Xr);function Xr(e){var _this31;_classCallCheck(this,Xr);_this31=_super13.call(this,e),_this31._config={childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0},_this31.domConverter=e.domConverter,_this31.renderer=e._renderer,_this31._domElements=[],_this31._mutationObserver=new window.MutationObserver(_this31._onMutations.bind(_assertThisInitialized(_this31)));return _this31;}_createClass(Xr,[{key:"flush",value:function flush(){this._onMutations(this._mutationObserver.takeRecords());}},{key:"observe",value:function observe(e){this._domElements.push(e),this.isEnabled&&this._mutationObserver.observe(e,this._config);}},{key:"enable",value:function enable(){_get(_getPrototypeOf(Xr.prototype),"enable",this).call(this);var _iterator85=_createForOfIteratorHelper(this._domElements),_step85;try{for(_iterator85.s();!(_step85=_iterator85.n()).done;){var _e58=_step85.value;this._mutationObserver.observe(_e58,this._config);}}catch(err){_iterator85.e(err);}finally{_iterator85.f();}}},{key:"disable",value:function disable(){_get(_getPrototypeOf(Xr.prototype),"disable",this).call(this),this._mutationObserver.disconnect();}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Xr.prototype),"destroy",this).call(this),this._mutationObserver.disconnect();}},{key:"_onMutations",value:function _onMutations(e){if(0===e.length)return;var t=this.domConverter,i=new Map(),n=new Set();var _iterator86=_createForOfIteratorHelper(e),_step86;try{for(_iterator86.s();!(_step86=_iterator86.n()).done;){var _i79=_step86.value;if("childList"===_i79.type){var _e60=t.mapDomToView(_i79.target);if(_e60&&(_e60.is("uiElement")||_e60.is("rawElement")))continue;_e60&&!this._isBogusBrMutation(_i79)&&n.add(_e60);}}}catch(err){_iterator86.e(err);}finally{_iterator86.f();}var _iterator87=_createForOfIteratorHelper(e),_step87;try{for(_iterator87.s();!(_step87=_iterator87.n()).done;){var _o26=_step87.value;var _e61=t.mapDomToView(_o26.target);if((!_e61||!_e61.is("uiElement")&&!_e61.is("rawElement"))&&"characterData"===_o26.type){var _e62=t.findCorrespondingViewText(_o26.target);_e62&&!n.has(_e62.parent)?i.set(_e62,{type:"text",oldText:_e62.data,newText:lr(_o26.target),node:_e62}):!_e62&&sr(_o26.target)&&n.add(t.mapDomToView(_o26.target.parentNode));}}}catch(err){_iterator87.e(err);}finally{_iterator87.f();}var o=[];var _iterator88=_createForOfIteratorHelper(i.values()),_step88;try{for(_iterator88.s();!(_step88=_iterator88.n()).done;){var _e63=_step88.value;this.renderer.markToSync("text",_e63.node),o.push(_e63);}}catch(err){_iterator88.e(err);}finally{_iterator88.f();}var _iterator89=_createForOfIteratorHelper(n),_step89;try{for(_iterator89.s();!(_step89=_iterator89.n()).done;){var _e64=_step89.value;var _i80=t.mapViewToDom(_e64),_n38=Array.from(_e64.getChildren()),_r16=Array.from(t.domChildrenToView(_i80,{withChildren:!1}));Zr(_n38,_r16,a)||(this.renderer.markToSync("children",_e64),o.push({type:"children",oldChildren:_n38,newChildren:_r16,node:_e64}));}}catch(err){_iterator89.e(err);}finally{_iterator89.f();}var r=e[0].target.ownerDocument.getSelection();var s=null;if(r&&r.anchorNode){var _e59=t.domPositionToView(r.anchorNode,r.anchorOffset),_i78=t.domPositionToView(r.focusNode,r.focusOffset);_e59&&_i78&&(s=new go(_e59),s.setFocus(_i78));}function a(e,t){if(!Array.isArray(e))return e===t||!(!e.is("$text")||!t.is("$text"))&&e.data===t.data;}o.length&&(this.document.fire("mutations",o,s),this.view.forceRender());}},{key:"_isBogusBrMutation",value:function _isBogusBrMutation(e){var t=null;return null===e.nextSibling&&0===e.removedNodes.length&&1==e.addedNodes.length&&(t=this.domConverter.domToView(e.addedNodes[0],{withChildren:!1})),t&&t.is("element","br");}}]);return Xr;}(zr);var es=/*#__PURE__*/function(){function es(e,t,i){_classCallCheck(this,es);this.view=e,this.document=e.document,this.domEvent=t,this.domTarget=t.target,De(this,i);}_createClass(es,[{key:"target",get:function get(){return this.view.domConverter.mapDomToView(this.domTarget);}},{key:"preventDefault",value:function preventDefault(){this.domEvent.preventDefault();}},{key:"stopPropagation",value:function stopPropagation(){this.domEvent.stopPropagation();}}]);return es;}();var ts=/*#__PURE__*/function(_zr2){_inherits(ts,_zr2);var _super14=_createSuper(ts);function ts(e){var _this32;_classCallCheck(this,ts);_this32=_super14.call(this,e),_this32.useCapture=!1;return _this32;}_createClass(ts,[{key:"observe",value:function observe(e){var _this33=this;("string"==typeof this.domEventType?[this.domEventType]:this.domEventType).forEach(function(t){_this33.listenTo(e,t,function(e,t){_this33.isEnabled&&!_this33.checkShouldIgnoreEventFromTarget(t.target)&&_this33.onDomEvent(t);},{useCapture:_this33.useCapture});});}},{key:"fire",value:function fire(e,t,i){this.isEnabled&&this.document.fire(e,new es(this.view,t,i));}}]);return ts;}(zr);var is=/*#__PURE__*/function(_ts){_inherits(is,_ts);var _super15=_createSuper(is);function is(e){var _this34;_classCallCheck(this,is);_this34=_super15.call(this,e),_this34.domEventType=["keydown","keyup"];return _this34;}_createClass(is,[{key:"onDomEvent",value:function onDomEvent(e){this.fire(e.type,e,{keyCode:e.keyCode,altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,get keystroke(){return zo(this);}});}}]);return is;}(ts);var ns=function ns(){return k.a.Date.now();},os=/\s/;var rs=function rs(e){for(var t=e.length;t--&&os.test(e.charAt(t));){;}return t;},ss=/^\s+/;var as=function as(e){return e?e.slice(0,rs(e)+1).replace(ss,""):e;},ls=/^[-+]0x[0-9a-f]+$/i,cs=/^0b[01]+$/i,ds=/^0o[0-7]+$/i,us=parseInt;var hs=function hs(e){if("number"==typeof e)return e;if(bn(e))return NaN;if(w(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=w(t)?t+"":t;}if("string"!=typeof e)return 0===e?e:+e;e=as(e);var i=cs.test(e);return i||ds.test(e)?us(e.slice(2),i?2:8):ls.test(e)?NaN:+e;},gs=Math.max,ms=Math.min;var fs=function fs(e,t,i){var n,o,r,s,a,l,c=0,d=!1,u=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function g(t){var i=n,r=o;return n=o=void 0,c=t,s=e.apply(r,i);}function m(e){return c=e,a=setTimeout(p,t),d?g(e):s;}function f(e){var i=e-l;return void 0===l||i>=t||i<0||u&&e-c>=r;}function p(){var e=ns();if(f(e))return b(e);a=setTimeout(p,function(e){var i=t-(e-l);return u?ms(i,r-(e-c)):i;}(e));}function b(e){return a=void 0,h&&n?g(e):(n=o=void 0,s);}function k(){var e=ns(),i=f(e);if(n=arguments,o=this,l=e,i){if(void 0===a)return m(l);if(u)return clearTimeout(a),a=setTimeout(p,t),g(l);}return void 0===a&&(a=setTimeout(p,t)),s;}return t=hs(t)||0,w(i)&&(d=!!i.leading,r=(u="maxWait"in i)?gs(hs(i.maxWait)||0,t):r,h="trailing"in i?!!i.trailing:h),k.cancel=function(){void 0!==a&&clearTimeout(a),c=0,n=l=o=a=void 0;},k.flush=function(){return void 0===a?s:b(ns());},k;};var ps=/*#__PURE__*/function(_zr3){_inherits(ps,_zr3);var _super16=_createSuper(ps);function ps(e){var _this35;_classCallCheck(this,ps);_this35=_super16.call(this,e),_this35._fireSelectionChangeDoneDebounced=fs(function(e){return _this35.document.fire("selectionChangeDone",e);},200);return _this35;}_createClass(ps,[{key:"observe",value:function observe(){var _this36=this;var e=this.document;e.on("arrowKey",function(t,i){e.selection.isFake&&_this36.isEnabled&&i.preventDefault();},{context:"$capture"}),e.on("arrowKey",function(t,i){e.selection.isFake&&_this36.isEnabled&&_this36._handleSelectionMove(i.keyCode);},{priority:"lowest"});}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(ps.prototype),"destroy",this).call(this),this._fireSelectionChangeDoneDebounced.cancel();}},{key:"_handleSelectionMove",value:function _handleSelectionMove(e){var t=this.document.selection,i=new go(t.getRanges(),{backward:t.isBackward,fake:!1});e!=No.arrowleft&&e!=No.arrowup||i.setTo(i.getFirstPosition()),e!=No.arrowright&&e!=No.arrowdown||i.setTo(i.getLastPosition());var n={oldSelection:t,newSelection:i,domSelection:null};this.document.fire("selectionChange",n),this._fireSelectionChangeDoneDebounced(n);}}]);return ps;}(zr);var bs=/*#__PURE__*/function(_zr4){_inherits(bs,_zr4);var _super17=_createSuper(bs);function bs(e){var _this37;_classCallCheck(this,bs);_this37=_super17.call(this,e),_this37.mutationObserver=e.getObserver(Xr),_this37.selection=_this37.document.selection,_this37.domConverter=e.domConverter,_this37._documents=new WeakSet(),_this37._fireSelectionChangeDoneDebounced=fs(function(e){return _this37.document.fire("selectionChangeDone",e);},200),_this37._clearInfiniteLoopInterval=setInterval(function(){return _this37._clearInfiniteLoop();},1e3),_this37._loopbackCounter=0;return _this37;}_createClass(bs,[{key:"observe",value:function observe(e){var _this38=this;var t=e.ownerDocument;this._documents.has(t)||(this.listenTo(t,"selectionchange",function(e,i){_this38._handleSelectionChange(i,t);}),this._documents.add(t));}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(bs.prototype),"destroy",this).call(this),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel();}},{key:"_handleSelectionChange",value:function _handleSelectionChange(e,t){if(!this.isEnabled)return;var i=t.defaultView.getSelection();if(this.checkShouldIgnoreEventFromTarget(i.anchorNode))return;this.mutationObserver.flush();var n=this.domConverter.domSelectionToView(i);if(0!=n.rangeCount){if(this.view.hasDomSelection=!0,!(this.selection.isEqual(n)&&this.domConverter.isDomSelectionCorrect(i)||++this._loopbackCounter>60))if(this.selection.isSimilar(n))this.view.forceRender();else{var _e65={oldSelection:this.selection,newSelection:n,domSelection:i};this.document.fire("selectionChange",_e65),this._fireSelectionChangeDoneDebounced(_e65);}}else this.view.hasDomSelection=!1;}},{key:"_clearInfiniteLoop",value:function _clearInfiniteLoop(){this._loopbackCounter=0;}}]);return bs;}(zr);var ws=/*#__PURE__*/function(_ts2){_inherits(ws,_ts2);var _super18=_createSuper(ws);function ws(e){var _this39;_classCallCheck(this,ws);_this39=_super18.call(this,e),_this39.domEventType=["focus","blur"],_this39.useCapture=!0;var t=_this39.document;t.on("focus",function(){t.isFocused=!0,_this39._renderTimeoutId=setTimeout(function(){return e.change(function(){});},50);}),t.on("blur",function(i,n){var o=t.selection.editableElement;null!==o&&o!==n.target||(t.isFocused=!1,e.change(function(){}));});return _this39;}_createClass(ws,[{key:"onDomEvent",value:function onDomEvent(e){this.fire(e.type,e);}},{key:"destroy",value:function destroy(){this._renderTimeoutId&&clearTimeout(this._renderTimeoutId),_get(_getPrototypeOf(ws.prototype),"destroy",this).call(this);}}]);return ws;}(ts);var ks=/*#__PURE__*/function(_ts3){_inherits(ks,_ts3);var _super19=_createSuper(ks);function ks(e){var _this40;_classCallCheck(this,ks);_this40=_super19.call(this,e),_this40.domEventType=["compositionstart","compositionupdate","compositionend"];var t=_this40.document;t.on("compositionstart",function(){t.isComposing=!0;}),t.on("compositionend",function(){t.isComposing=!1;});return _this40;}_createClass(ks,[{key:"onDomEvent",value:function onDomEvent(e){this.fire(e.type,e);}}]);return ks;}(ts);var _s=/*#__PURE__*/function(_ts4){_inherits(_s,_ts4);var _super20=_createSuper(_s);function _s(e){var _this41;_classCallCheck(this,_s);_this41=_super20.call(this,e),_this41.domEventType=["beforeinput"];return _this41;}_createClass(_s,[{key:"onDomEvent",value:function onDomEvent(e){this.fire(e.type,e);}}]);return _s;}(ts);var vs=function vs(e){return"string"==typeof e||!_e(e)&&me(e)&&"[object String]"==S(e);};function ys(e){return"[object Range]"==Object.prototype.toString.apply(e);}function xs(e){var t=e.ownerDocument.defaultView.getComputedStyle(e);return{top:parseInt(t.borderTopWidth,10),right:parseInt(t.borderRightWidth,10),bottom:parseInt(t.borderBottomWidth,10),left:parseInt(t.borderLeftWidth,10)};}var As=["top","right","bottom","left","width","height"];var Cs=/*#__PURE__*/function(){function Cs(e){_classCallCheck(this,Cs);var t=ys(e);if(Object.defineProperty(this,"_source",{value:e._source||e,writable:!0,enumerable:!1}),Yi(e)||t){if(t){var _t70=Cs.getDomRangeRects(e);Ts(this,Cs.getBoundingRect(_t70));}else Ts(this,e.getBoundingClientRect());}else if(Pr(e)){var _t71=e.innerWidth,_i81=e.innerHeight;Ts(this,{top:0,right:_t71,bottom:_i81,left:0,width:_t71,height:_i81});}else Ts(this,e);}_createClass(Cs,[{key:"clone",value:function clone(){return new Cs(this);}},{key:"moveTo",value:function moveTo(e,t){return this.top=t,this.right=e+this.width,this.bottom=t+this.height,this.left=e,this;}},{key:"moveBy",value:function moveBy(e,t){return this.top+=t,this.right+=e,this.left+=e,this.bottom+=t,this;}},{key:"getIntersection",value:function getIntersection(e){var t={top:Math.max(this.top,e.top),right:Math.min(this.right,e.right),bottom:Math.min(this.bottom,e.bottom),left:Math.max(this.left,e.left)};return t.width=t.right-t.left,t.height=t.bottom-t.top,t.width<0||t.height<0?null:new Cs(t);}},{key:"getIntersectionArea",value:function getIntersectionArea(e){var t=this.getIntersection(e);return t?t.getArea():0;}},{key:"getArea",value:function getArea(){return this.width*this.height;}},{key:"getVisible",value:function getVisible(){var e=this._source;var t=this.clone();if(!Es(e)){var _i82=e.parentNode||e.commonAncestorContainer;for(;_i82&&!Es(_i82);){var _e66=new Cs(_i82),_n39=t.getIntersection(_e66);if(!_n39)return null;_n39.getArea()<t.getArea()&&(t=_n39),_i82=_i82.parentNode;}}return t;}},{key:"isEqual",value:function isEqual(e){var _iterator90=_createForOfIteratorHelper(As),_step90;try{for(_iterator90.s();!(_step90=_iterator90.n()).done;){var _t72=_step90.value;if(this[_t72]!==e[_t72])return!1;}}catch(err){_iterator90.e(err);}finally{_iterator90.f();}return!0;}},{key:"contains",value:function contains(e){var t=this.getIntersection(e);return!(!t||!t.isEqual(e));}},{key:"excludeScrollbarsAndBorders",value:function excludeScrollbarsAndBorders(){var e=this._source;var t,i,n;if(Pr(e))t=e.innerWidth-e.document.documentElement.clientWidth,i=e.innerHeight-e.document.documentElement.clientHeight,n=e.getComputedStyle(e.document.documentElement).direction;else{var _o27=xs(this._source);t=e.offsetWidth-e.clientWidth-_o27.left-_o27.right,i=e.offsetHeight-e.clientHeight-_o27.top-_o27.bottom,n=e.ownerDocument.defaultView.getComputedStyle(e).direction,this.left+=_o27.left,this.top+=_o27.top,this.right-=_o27.right,this.bottom-=_o27.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top;}return this.width-=t,"ltr"===n?this.right-=t:this.left+=t,this.height-=i,this.bottom-=i,this;}}],[{key:"getDomRangeRects",value:function getDomRangeRects(e){var t=[],i=Array.from(e.getClientRects());if(i.length){var _iterator91=_createForOfIteratorHelper(i),_step91;try{for(_iterator91.s();!(_step91=_iterator91.n()).done;){var _e67=_step91.value;t.push(new Cs(_e67));}}catch(err){_iterator91.e(err);}finally{_iterator91.f();}}else{var _i83=e.startContainer;tr(_i83)&&(_i83=_i83.parentNode);var _n40=new Cs(_i83.getBoundingClientRect());_n40.right=_n40.left,_n40.width=0,t.push(_n40);}return t;}},{key:"getBoundingRect",value:function getBoundingRect(e){var t={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY};var i=0;var _iterator92=_createForOfIteratorHelper(e),_step92;try{for(_iterator92.s();!(_step92=_iterator92.n()).done;){var _n41=_step92.value;i++,t.left=Math.min(t.left,_n41.left),t.top=Math.min(t.top,_n41.top),t.right=Math.max(t.right,_n41.right),t.bottom=Math.max(t.bottom,_n41.bottom);}}catch(err){_iterator92.e(err);}finally{_iterator92.f();}return 0==i?null:(t.width=t.right-t.left,t.height=t.bottom-t.top,new Cs(t));}}]);return Cs;}();function Ts(e,t){var _iterator93=_createForOfIteratorHelper(As),_step93;try{for(_iterator93.s();!(_step93=_iterator93.n()).done;){var _i84=_step93.value;e[_i84]=t[_i84];}}catch(err){_iterator93.e(err);}finally{_iterator93.f();}}function Es(e){return!!Yi(e)&&e===e.ownerDocument.body;}var Is=/*#__PURE__*/function(){function Is(e,t){_classCallCheck(this,Is);Is._observerInstance||Is._createObserver(),this._element=e,this._callback=t,Is._addElementCallback(e,t),Is._observerInstance.observe(e);}_createClass(Is,[{key:"destroy",value:function destroy(){Is._deleteElementCallback(this._element,this._callback);}}],[{key:"_addElementCallback",value:function _addElementCallback(e,t){Is._elementCallbacks||(Is._elementCallbacks=new Map());var i=Is._elementCallbacks.get(e);i||(i=new Set(),Is._elementCallbacks.set(e,i)),i.add(t);}},{key:"_deleteElementCallback",value:function _deleteElementCallback(e,t){var i=Is._getElementCallbacks(e);i&&(i["delete"](t),i.size||(Is._elementCallbacks["delete"](e),Is._observerInstance.unobserve(e))),Is._elementCallbacks&&!Is._elementCallbacks.size&&(Is._observerInstance=null,Is._elementCallbacks=null);}},{key:"_getElementCallbacks",value:function _getElementCallbacks(e){return Is._elementCallbacks?Is._elementCallbacks.get(e):null;}},{key:"_createObserver",value:function _createObserver(){var e;e="function"==typeof vr.window.ResizeObserver?vr.window.ResizeObserver:Ss,Is._observerInstance=new e(function(e){var _iterator94=_createForOfIteratorHelper(e),_step94;try{for(_iterator94.s();!(_step94=_iterator94.n()).done;){var _t73=_step94.value;var _e68=Is._getElementCallbacks(_t73.target);if(_e68){var _iterator95=_createForOfIteratorHelper(_e68),_step95;try{for(_iterator95.s();!(_step95=_iterator95.n()).done;){var _i85=_step95.value;_i85(_t73);}}catch(err){_iterator95.e(err);}finally{_iterator95.f();}}}}catch(err){_iterator94.e(err);}finally{_iterator94.f();}});}}]);return Is;}();Is._observerInstance=null,Is._elementCallbacks=null;var Ss=/*#__PURE__*/function(){function Ss(e){_classCallCheck(this,Ss);this._callback=e,this._elements=new Set(),this._previousRects=new Map(),this._periodicCheckTimeout=null;}_createClass(Ss,[{key:"observe",value:function observe(e){this._elements.add(e),this._checkElementRectsAndExecuteCallback(),1===this._elements.size&&this._startPeriodicCheck();}},{key:"unobserve",value:function unobserve(e){this._elements["delete"](e),this._previousRects["delete"](e),this._elements.size||this._stopPeriodicCheck();}},{key:"_startPeriodicCheck",value:function _startPeriodicCheck(){var _this42=this;var e=function e(){_this42._checkElementRectsAndExecuteCallback(),_this42._periodicCheckTimeout=setTimeout(e,100);};this.listenTo(vr.window,"resize",function(){_this42._checkElementRectsAndExecuteCallback();}),this._periodicCheckTimeout=setTimeout(e,100);}},{key:"_stopPeriodicCheck",value:function _stopPeriodicCheck(){clearTimeout(this._periodicCheckTimeout),this.stopListening(),this._previousRects.clear();}},{key:"_checkElementRectsAndExecuteCallback",value:function _checkElementRectsAndExecuteCallback(){var e=[];var _iterator96=_createForOfIteratorHelper(this._elements),_step96;try{for(_iterator96.s();!(_step96=_iterator96.n()).done;){var _t74=_step96.value;this._hasRectChanged(_t74)&&e.push({target:_t74,contentRect:this._previousRects.get(_t74)});}}catch(err){_iterator96.e(err);}finally{_iterator96.f();}e.length&&this._callback(e);}},{key:"_hasRectChanged",value:function _hasRectChanged(e){if(!e.ownerDocument.body.contains(e))return!1;var t=new Cs(e),i=this._previousRects.get(e),n=!i||!i.isEqual(t);return this._previousRects.set(e,t),n;}}]);return Ss;}();function Ps(e,t){e instanceof HTMLTextAreaElement&&(e.value=t),e.innerHTML=t;}function Ms(e){return function(t){return t+e;};}function Ns(e){var t=e.next();return t.done?null:t.value;}Ke(Ss,Mr);var Rs=/*#__PURE__*/function(){function Rs(){_classCallCheck(this,Rs);this.set("isFocused",!1),this.set("focusedElement",null),this._elements=new Set(),this._nextEventLoopTimeout=null;}_createClass(Rs,[{key:"add",value:function add(e){var _this43=this;if(this._elements.has(e))throw new l.a("focustracker-add-element-already-exist",this);this.listenTo(e,"focus",function(){return _this43._focus(e);},{useCapture:!0}),this.listenTo(e,"blur",function(){return _this43._blur();},{useCapture:!0}),this._elements.add(e);}},{key:"remove",value:function remove(e){e===this.focusedElement&&this._blur(e),this._elements.has(e)&&(this.stopListening(e),this._elements["delete"](e));}},{key:"destroy",value:function destroy(){this.stopListening();}},{key:"_focus",value:function _focus(e){clearTimeout(this._nextEventLoopTimeout),this.focusedElement=e,this.isFocused=!0;}},{key:"_blur",value:function _blur(){var _this44=this;clearTimeout(this._nextEventLoopTimeout),this._nextEventLoopTimeout=setTimeout(function(){_this44.focusedElement=null,_this44.isFocused=!1;},0);}}]);return Rs;}();Ke(Rs,Mr),Ke(Rs,Ue);var zs=/*#__PURE__*/function(){function zs(){_classCallCheck(this,zs);this._listener=Object.create(Mr);}_createClass(zs,[{key:"listenTo",value:function listenTo(e){var _this45=this;this._listener.listenTo(e,"keydown",function(e,t){_this45._listener.fire("_keydown:"+zo(t),t);});}},{key:"set",value:function set(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var n=Oo(e),o=i.priority;this._listener.listenTo(this._listener,"_keydown:"+n,function(e,i){t(i,function(){i.preventDefault(),i.stopPropagation(),e.stop();}),e["return"]=!0;},{priority:o});}},{key:"press",value:function press(e){return!!this._listener.fire("_keydown:"+zo(e),e);}},{key:"destroy",value:function destroy(){this._listener.stopListening();}}]);return zs;}();var Os=/*#__PURE__*/function(_zr5){_inherits(Os,_zr5);var _super21=_createSuper(Os);function Os(e){var _this46;_classCallCheck(this,Os);_this46=_super21.call(this,e),_this46.document.on("keydown",function(e,t){if(_this46.isEnabled&&((i=t.keyCode)==No.arrowright||i==No.arrowleft||i==No.arrowup||i==No.arrowdown)){var _i86=new fo(_this46.document,"arrowKey",_this46.document.selection.getFirstRange());_this46.document.fire(_i86,t),_i86.stop.called&&e.stop();}var i;});return _this46;}_createClass(Os,[{key:"observe",value:function observe(){}}]);return Os;}(zr);function Ds(_ref13){var e=_ref13.target,_ref13$viewportOffset=_ref13.viewportOffset,t=_ref13$viewportOffset===void 0?0:_ref13$viewportOffset;var i=Us(e);var n=i,o=null;for(;n;){var _r17=void 0;_r17=Ws(n==i?e:o),Vs(_r17,function(){return qs(e,n);});var _s9=qs(e,n);if(Ls(n,_s9,t),n.parent!=n){if(o=n.frameElement,n=n.parent,!o)return;}else n=null;}}function Ls(e,t,i){var n=t.clone().moveBy(0,i),o=t.clone().moveBy(0,-i),r=new Cs(e).excludeScrollbarsAndBorders();if(![o,n].every(function(e){return r.contains(e);})){var _s10=e.scrollX,_a8=e.scrollY;js(o,r)?_a8-=r.top-t.top+i:Bs(n,r)&&(_a8+=t.bottom-r.bottom+i),Fs(t,r)?_s10-=r.left-t.left+i:Hs(t,r)&&(_s10+=t.right-r.right+i),e.scrollTo(_s10,_a8);}}function Vs(e,t){var i=Us(e);var n,o;for(;e!=i.document.body;){o=t(),n=new Cs(e).excludeScrollbarsAndBorders(),n.contains(o)||(js(o,n)?e.scrollTop-=n.top-o.top:Bs(o,n)&&(e.scrollTop+=o.bottom-n.bottom),Fs(o,n)?e.scrollLeft-=n.left-o.left:Hs(o,n)&&(e.scrollLeft+=o.right-n.right)),e=e.parentNode;}}function Bs(e,t){return e.bottom>t.bottom;}function js(e,t){return e.top<t.top;}function Fs(e,t){return e.left<t.left;}function Hs(e,t){return e.right>t.right;}function Us(e){return ys(e)?e.startContainer.ownerDocument.defaultView:e.ownerDocument.defaultView;}function Ws(e){if(ys(e)){var _t75=e.commonAncestorContainer;return tr(_t75)&&(_t75=_t75.parentNode),_t75;}return e.parentNode;}function qs(e,t){var i=Us(e),n=new Cs(e);if(i===t)return n;{var _e69=i;for(;_e69!=t;){var _t76=_e69.frameElement,_i87=new Cs(_t76).excludeScrollbarsAndBorders();n.moveBy(_i87.left,_i87.top),_e69=_e69.parent;}}return n;}Object.assign({},{scrollViewportToShowTarget:Ds,scrollAncestorsToShowTarget:function scrollAncestorsToShowTarget(e){Vs(Ws(e),function(){return new Cs(e);});}});var $s=/*#__PURE__*/function(){function $s(e){var _this47=this;_classCallCheck(this,$s);this.document=new yo(e),this.domConverter=new Er(this.document),this.domRoots=new Map(),this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new br(this.domConverter,this.document.selection),this._renderer.bind("isFocused").to(this.document),this._initialDomRootAttributes=new WeakMap(),this._observers=new Map(),this._ongoingChange=!1,this._postFixersInProgress=!1,this._renderingDisabled=!1,this._hasChangedSinceTheLastRendering=!1,this._writer=new qo(this.document),this.addObserver(Xr),this.addObserver(bs),this.addObserver(ws),this.addObserver(is),this.addObserver(ps),this.addObserver(ks),this.addObserver(Os),So.isAndroid&&this.addObserver(_s),this.document.on("arrowKey",cr,{priority:"low"}),jo(this),this.on("render",function(){_this47._render(),_this47.document.fire("layoutChanged"),_this47._hasChangedSinceTheLastRendering=!1;}),this.listenTo(this.document.selection,"change",function(){_this47._hasChangedSinceTheLastRendering=!0;}),this.listenTo(this.document,"change:isFocused",function(){_this47._hasChangedSinceTheLastRendering=!0;});}_createClass($s,[{key:"attachDomRoot",value:function attachDomRoot(e){var _this48=this;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"main";var i=this.document.getRoot(t);i._name=e.tagName.toLowerCase();var n={};for(var _i88=0,_Array$from=Array.from(e.attributes);_i88<_Array$from.length;_i88++){var _Array$from$_i=_Array$from[_i88],_t77=_Array$from$_i.name,_o28=_Array$from$_i.value;n[_t77]=_o28,"class"===_t77?this._writer.addClass(_o28.split(" "),i):this._writer.setAttribute(_t77,_o28,i);}this._initialDomRootAttributes.set(e,n);var o=function o(){_this48._writer.setAttribute("contenteditable",!i.isReadOnly,i),i.isReadOnly?_this48._writer.addClass("ck-read-only",i):_this48._writer.removeClass("ck-read-only",i);};o(),this.domRoots.set(t,e),this.domConverter.bindElements(e,i),this._renderer.markToSync("children",i),this._renderer.markToSync("attributes",i),this._renderer.domDocuments.add(e.ownerDocument),i.on("change:children",function(e,t){return _this48._renderer.markToSync("children",t);}),i.on("change:attributes",function(e,t){return _this48._renderer.markToSync("attributes",t);}),i.on("change:text",function(e,t){return _this48._renderer.markToSync("text",t);}),i.on("change:isReadOnly",function(){return _this48.change(o);}),i.on("change",function(){_this48._hasChangedSinceTheLastRendering=!0;});var _iterator97=_createForOfIteratorHelper(this._observers.values()),_step97;try{for(_iterator97.s();!(_step97=_iterator97.n()).done;){var _i89=_step97.value;_i89.observe(e,t);}}catch(err){_iterator97.e(err);}finally{_iterator97.f();}}},{key:"detachDomRoot",value:function detachDomRoot(e){var t=this.domRoots.get(e);Array.from(t.attributes).forEach(function(_ref14){var e=_ref14.name;return t.removeAttribute(e);});var i=this._initialDomRootAttributes.get(t);for(var _e70 in i){t.setAttribute(_e70,i[_e70]);}this.domRoots["delete"](e),this.domConverter.unbindDomElement(t);}},{key:"getDomRoot",value:function getDomRoot(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"main";return this.domRoots.get(e);}},{key:"addObserver",value:function addObserver(e){var t=this._observers.get(e);if(t)return t;t=new e(this),this._observers.set(e,t);var _iterator98=_createForOfIteratorHelper(this.domRoots),_step98;try{for(_iterator98.s();!(_step98=_iterator98.n()).done;){var _step98$value=_slicedToArray(_step98.value,2),_e71=_step98$value[0],_i90=_step98$value[1];t.observe(_i90,_e71);}}catch(err){_iterator98.e(err);}finally{_iterator98.f();}return t.enable(),t;}},{key:"getObserver",value:function getObserver(e){return this._observers.get(e);}},{key:"disableObservers",value:function disableObservers(){var _iterator99=_createForOfIteratorHelper(this._observers.values()),_step99;try{for(_iterator99.s();!(_step99=_iterator99.n()).done;){var _e72=_step99.value;_e72.disable();}}catch(err){_iterator99.e(err);}finally{_iterator99.f();}}},{key:"enableObservers",value:function enableObservers(){var _iterator100=_createForOfIteratorHelper(this._observers.values()),_step100;try{for(_iterator100.s();!(_step100=_iterator100.n()).done;){var _e73=_step100.value;_e73.enable();}}catch(err){_iterator100.e(err);}finally{_iterator100.f();}}},{key:"scrollToTheSelection",value:function scrollToTheSelection(){var e=this.document.selection.getFirstRange();e&&Ds({target:this.domConverter.viewRangeToDom(e),viewportOffset:20});}},{key:"focus",value:function focus(){if(!this.document.isFocused){var _e74=this.document.selection.editableElement;_e74&&(this.domConverter.focus(_e74),this.forceRender());}}},{key:"change",value:function change(e){if(this.isRenderingInProgress||this._postFixersInProgress)throw new l.a("cannot-change-view-tree",this);try{if(this._ongoingChange)return e(this._writer);this._ongoingChange=!0;var _t78=e(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),_t78;}catch(e){l.a.rethrowUnexpectedError(e,this);}}},{key:"forceRender",value:function forceRender(){this._hasChangedSinceTheLastRendering=!0,this.change(function(){});}},{key:"destroy",value:function destroy(){var _iterator101=_createForOfIteratorHelper(this._observers.values()),_step101;try{for(_iterator101.s();!(_step101=_iterator101.n()).done;){var _e75=_step101.value;_e75.destroy();}}catch(err){_iterator101.e(err);}finally{_iterator101.f();}this.document.destroy(),this.stopListening();}},{key:"createPositionAt",value:function createPositionAt(e,t){return lo._createAt(e,t);}},{key:"createPositionAfter",value:function createPositionAfter(e){return lo._createAfter(e);}},{key:"createPositionBefore",value:function createPositionBefore(e){return lo._createBefore(e);}},{key:"createRange",value:function createRange(e,t){return new co(e,t);}},{key:"createRangeOn",value:function createRangeOn(e){return co._createOn(e);}},{key:"createRangeIn",value:function createRangeIn(e){return co._createIn(e);}},{key:"createSelection",value:function createSelection(e,t,i){return new go(e,t,i);}},{key:"_disableRendering",value:function _disableRendering(e){this._renderingDisabled=e,0==e&&this.change(function(){});}},{key:"_render",value:function _render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1;}}]);return $s;}();Ke($s,Ue);var Ys=/*#__PURE__*/function(){function Ys(e){_classCallCheck(this,Ys);this.parent=null,this._attrs=gn(e);}_createClass(Ys,[{key:"index",get:function get(){var e;if(!this.parent)return null;if(null===(e=this.parent.getChildIndex(this)))throw new l.a("model-node-not-found-in-parent",this);return e;}},{key:"startOffset",get:function get(){var e;if(!this.parent)return null;if(null===(e=this.parent.getChildStartOffset(this)))throw new l.a("model-node-not-found-in-parent",this);return e;}},{key:"offsetSize",get:function get(){return 1;}},{key:"endOffset",get:function get(){return this.parent?this.startOffset+this.offsetSize:null;}},{key:"nextSibling",get:function get(){var e=this.index;return null!==e&&this.parent.getChild(e+1)||null;}},{key:"previousSibling",get:function get(){var e=this.index;return null!==e&&this.parent.getChild(e-1)||null;}},{key:"root",get:function get(){var e=this;for(;e.parent;){e=e.parent;}return e;}},{key:"isAttached",value:function isAttached(){return this.root.is("rootElement");}},{key:"getPath",value:function getPath(){var e=[];var t=this;for(;t.parent;){e.unshift(t.startOffset),t=t.parent;}return e;}},{key:"getAncestors",value:function getAncestors(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{includeSelf:!1,parentFirst:!1};var t=[];var i=e.includeSelf?this:this.parent;for(;i;){t[e.parentFirst?"push":"unshift"](i),i=i.parent;}return t;}},{key:"getCommonAncestor",value:function getCommonAncestor(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=this.getAncestors(t),n=e.getAncestors(t);var o=0;for(;i[o]==n[o]&&i[o];){o++;}return 0===o?null:i[o-1];}},{key:"isBefore",value:function isBefore(e){if(this==e)return!1;if(this.root!==e.root)return!1;var t=this.getPath(),i=e.getPath(),n=ln(t,i);switch(n){case"prefix":return!0;case"extension":return!1;default:return t[n]<i[n];}}},{key:"isAfter",value:function isAfter(e){return this!=e&&this.root===e.root&&!this.isBefore(e);}},{key:"hasAttribute",value:function hasAttribute(e){return this._attrs.has(e);}},{key:"getAttribute",value:function getAttribute(e){return this._attrs.get(e);}},{key:"getAttributes",value:function getAttributes(){return this._attrs.entries();}},{key:"getAttributeKeys",value:function getAttributeKeys(){return this._attrs.keys();}},{key:"toJSON",value:function toJSON(){var e={};return this._attrs.size&&(e.attributes=Array.from(this._attrs).reduce(function(e,t){return e[t[0]]=t[1],e;},{})),e;}},{key:"is",value:function is(e){return"node"===e||"model:node"===e;}},{key:"_clone",value:function _clone(){return new Ys(this._attrs);}},{key:"_remove",value:function _remove(){this.parent._removeChildren(this.index);}},{key:"_setAttribute",value:function _setAttribute(e,t){this._attrs.set(e,t);}},{key:"_setAttributesTo",value:function _setAttributesTo(e){this._attrs=gn(e);}},{key:"_removeAttribute",value:function _removeAttribute(e){return this._attrs["delete"](e);}},{key:"_clearAttributes",value:function _clearAttributes(){this._attrs.clear();}}]);return Ys;}();var Gs=/*#__PURE__*/function(_Ys){_inherits(Gs,_Ys);var _super22=_createSuper(Gs);function Gs(e,t){var _this49;_classCallCheck(this,Gs);_this49=_super22.call(this,t),_this49._data=e||"";return _this49;}_createClass(Gs,[{key:"offsetSize",get:function get(){return this.data.length;}},{key:"data",get:function get(){return this._data;}},{key:"is",value:function is(e){return"$text"===e||"model:$text"===e||"text"===e||"model:text"===e||"node"===e||"model:node"===e;}},{key:"toJSON",value:function toJSON(){var e=_get(_getPrototypeOf(Gs.prototype),"toJSON",this).call(this);return e.data=this.data,e;}},{key:"_clone",value:function _clone(){return new Gs(this.data,this.getAttributes());}}],[{key:"fromJSON",value:function fromJSON(e){return new Gs(e.data,e.attributes);}}]);return Gs;}(Ys);var Ks=/*#__PURE__*/function(){function Ks(e,t,i){_classCallCheck(this,Ks);if(this.textNode=e,t<0||t>e.offsetSize)throw new l.a("model-textproxy-wrong-offsetintext",this);if(i<0||t+i>e.offsetSize)throw new l.a("model-textproxy-wrong-length",this);this.data=e.data.substring(t,t+i),this.offsetInText=t;}_createClass(Ks,[{key:"startOffset",get:function get(){return null!==this.textNode.startOffset?this.textNode.startOffset+this.offsetInText:null;}},{key:"offsetSize",get:function get(){return this.data.length;}},{key:"endOffset",get:function get(){return null!==this.startOffset?this.startOffset+this.offsetSize:null;}},{key:"isPartial",get:function get(){return this.offsetSize!==this.textNode.offsetSize;}},{key:"parent",get:function get(){return this.textNode.parent;}},{key:"root",get:function get(){return this.textNode.root;}},{key:"is",value:function is(e){return"$textProxy"===e||"model:$textProxy"===e||"textProxy"===e||"model:textProxy"===e;}},{key:"getPath",value:function getPath(){var e=this.textNode.getPath();return e.length>0&&(e[e.length-1]+=this.offsetInText),e;}},{key:"getAncestors",value:function getAncestors(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{includeSelf:!1,parentFirst:!1};var t=[];var i=e.includeSelf?this:this.parent;for(;i;){t[e.parentFirst?"push":"unshift"](i),i=i.parent;}return t;}},{key:"hasAttribute",value:function hasAttribute(e){return this.textNode.hasAttribute(e);}},{key:"getAttribute",value:function getAttribute(e){return this.textNode.getAttribute(e);}},{key:"getAttributes",value:function getAttributes(){return this.textNode.getAttributes();}},{key:"getAttributeKeys",value:function getAttributeKeys(){return this.textNode.getAttributeKeys();}}]);return Ks;}();var Qs=/*#__PURE__*/function(_Symbol$iterator6){function Qs(e){_classCallCheck(this,Qs);this._nodes=[],e&&this._insertNodes(0,e);}_createClass(Qs,[{key:_Symbol$iterator6,value:function value(){return this._nodes[Symbol.iterator]();}},{key:"length",get:function get(){return this._nodes.length;}},{key:"maxOffset",get:function get(){return this._nodes.reduce(function(e,t){return e+t.offsetSize;},0);}},{key:"getNode",value:function getNode(e){return this._nodes[e]||null;}},{key:"getNodeIndex",value:function getNodeIndex(e){var t=this._nodes.indexOf(e);return-1==t?null:t;}},{key:"getNodeStartOffset",value:function getNodeStartOffset(e){var t=this.getNodeIndex(e);return null===t?null:this._nodes.slice(0,t).reduce(function(e,t){return e+t.offsetSize;},0);}},{key:"indexToOffset",value:function indexToOffset(e){if(e==this._nodes.length)return this.maxOffset;var t=this._nodes[e];if(!t)throw new l.a("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(t);}},{key:"offsetToIndex",value:function offsetToIndex(e){var t=0;var _iterator102=_createForOfIteratorHelper(this._nodes),_step102;try{for(_iterator102.s();!(_step102=_iterator102.n()).done;){var _i91=_step102.value;if(e>=t&&e<t+_i91.offsetSize)return this.getNodeIndex(_i91);t+=_i91.offsetSize;}}catch(err){_iterator102.e(err);}finally{_iterator102.f();}if(t!=e)throw new l.a("model-nodelist-offset-out-of-bounds",this,{offset:e,nodeList:this});return this.length;}},{key:"_insertNodes",value:function _insertNodes(e,t){var _this$_nodes;var _iterator103=_createForOfIteratorHelper(t),_step103;try{for(_iterator103.s();!(_step103=_iterator103.n()).done;){var _e76=_step103.value;if(!(_e76 instanceof Ys))throw new l.a("model-nodelist-insertnodes-not-node",this);}}catch(err){_iterator103.e(err);}finally{_iterator103.f();}(_this$_nodes=this._nodes).splice.apply(_this$_nodes,[e,0].concat(_toConsumableArray(t)));}},{key:"_removeNodes",value:function _removeNodes(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;return this._nodes.splice(e,t);}},{key:"toJSON",value:function toJSON(){return this._nodes.map(function(e){return e.toJSON();});}}]);return Qs;}(Symbol.iterator);var Js=/*#__PURE__*/function(_Ys2){_inherits(Js,_Ys2);var _super23=_createSuper(Js);function Js(e,t,i){var _this50;_classCallCheck(this,Js);_this50=_super23.call(this,t),_this50.name=e,_this50._children=new Qs(),i&&_this50._insertChild(0,i);return _this50;}_createClass(Js,[{key:"childCount",get:function get(){return this._children.length;}},{key:"maxOffset",get:function get(){return this._children.maxOffset;}},{key:"isEmpty",get:function get(){return 0===this.childCount;}},{key:"is",value:function is(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return t?t===this.name&&("element"===e||"model:element"===e):"element"===e||"model:element"===e||"node"===e||"model:node"===e;}},{key:"getChild",value:function getChild(e){return this._children.getNode(e);}},{key:"getChildren",value:function getChildren(){return this._children[Symbol.iterator]();}},{key:"getChildIndex",value:function getChildIndex(e){return this._children.getNodeIndex(e);}},{key:"getChildStartOffset",value:function getChildStartOffset(e){return this._children.getNodeStartOffset(e);}},{key:"offsetToIndex",value:function offsetToIndex(e){return this._children.offsetToIndex(e);}},{key:"getNodeByPath",value:function getNodeByPath(e){var t=this;var _iterator104=_createForOfIteratorHelper(e),_step104;try{for(_iterator104.s();!(_step104=_iterator104.n()).done;){var _i92=_step104.value;t=t.getChild(t.offsetToIndex(_i92));}}catch(err){_iterator104.e(err);}finally{_iterator104.f();}return t;}},{key:"findAncestor",value:function findAncestor(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{includeSelf:!1};var i=t.includeSelf?this:this.parent;for(;i;){if(i.name===e)return i;i=i.parent;}return null;}},{key:"toJSON",value:function toJSON(){var e=_get(_getPrototypeOf(Js.prototype),"toJSON",this).call(this);if(e.name=this.name,this._children.length>0){e.children=[];var _iterator105=_createForOfIteratorHelper(this._children),_step105;try{for(_iterator105.s();!(_step105=_iterator105.n()).done;){var _t79=_step105.value;e.children.push(_t79.toJSON());}}catch(err){_iterator105.e(err);}finally{_iterator105.f();}}return e;}},{key:"_clone",value:function _clone(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:!1;var t=e?Array.from(this._children).map(function(e){return e._clone(!0);}):null;return new Js(this.name,this.getAttributes(),t);}},{key:"_appendChild",value:function _appendChild(e){this._insertChild(this.childCount,e);}},{key:"_insertChild",value:function _insertChild(e,t){var i=function(e){if("string"==typeof e)return[new Gs(e)];Ji(e)||(e=[e]);return Array.from(e).map(function(e){return"string"==typeof e?new Gs(e):e instanceof Ks?new Gs(e.data,e.getAttributes()):e;});}(t);var _iterator106=_createForOfIteratorHelper(i),_step106;try{for(_iterator106.s();!(_step106=_iterator106.n()).done;){var _e77=_step106.value;null!==_e77.parent&&_e77._remove(),_e77.parent=this;}}catch(err){_iterator106.e(err);}finally{_iterator106.f();}this._children._insertNodes(e,i);}},{key:"_removeChildren",value:function _removeChildren(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var i=this._children._removeNodes(e,t);var _iterator107=_createForOfIteratorHelper(i),_step107;try{for(_iterator107.s();!(_step107=_iterator107.n()).done;){var _e78=_step107.value;_e78.parent=null;}}catch(err){_iterator107.e(err);}finally{_iterator107.f();}return i;}}],[{key:"fromJSON",value:function fromJSON(e){var t=null;if(e.children){t=[];var _iterator108=_createForOfIteratorHelper(e.children),_step108;try{for(_iterator108.s();!(_step108=_iterator108.n()).done;){var _i93=_step108.value;_i93.name?t.push(Js.fromJSON(_i93)):t.push(Gs.fromJSON(_i93));}}catch(err){_iterator108.e(err);}finally{_iterator108.f();}}return new Js(e.name,e.attributes,t);}}]);return Js;}(Ys);var Zs=/*#__PURE__*/function(_Symbol$iterator7){function Zs(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,Zs);if(!e.boundaries&&!e.startPosition)throw new l.a("model-tree-walker-no-start-position",null);var t=e.direction||"forward";if("forward"!=t&&"backward"!=t)throw new l.a("model-tree-walker-unknown-direction",e,{direction:t});this.direction=t,this.boundaries=e.boundaries||null,e.startPosition?this.position=e.startPosition.clone():this.position=ea._createAt(this.boundaries["backward"==this.direction?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent;}_createClass(Zs,[{key:_Symbol$iterator7,value:function value(){return this;}},{key:"skip",value:function skip(e){var t,i,n,o;do{var _this$next2;n=this.position,o=this._visitedParent,(_this$next2=this.next(),t=_this$next2.done,i=_this$next2.value,_this$next2);}while(!t&&e(i));t||(this.position=n,this._visitedParent=o);}},{key:"next",value:function next(){return"forward"==this.direction?this._next():this._previous();}},{key:"_next",value:function _next(){var e=this.position,t=this.position.clone(),i=this._visitedParent;if(null===i.parent&&t.offset===i.maxOffset)return{done:!0};if(i===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0};var n=t.parent,o=ta(t,n),r=o||ia(t,n,o);if(r instanceof Js)return this.shallow?t.offset++:(t.path.push(0),this._visitedParent=r),this.position=t,Xs("elementStart",r,e,t,1);if(r instanceof Gs){var _n42;if(this.singleCharacters)_n42=1;else{var _e79=r.endOffset;this._boundaryEndParent==i&&this.boundaries.end.offset<_e79&&(_e79=this.boundaries.end.offset),_n42=_e79-t.offset;}var _o29=t.offset-r.startOffset,_s11=new Ks(r,_o29,_n42);return t.offset+=_n42,this.position=t,Xs("text",_s11,e,t,_n42);}return t.path.pop(),t.offset++,this.position=t,this._visitedParent=i.parent,this.ignoreElementEnd?this._next():Xs("elementEnd",i,e,t);}},{key:"_previous",value:function _previous(){var e=this.position,t=this.position.clone(),i=this._visitedParent;if(null===i.parent&&0===t.offset)return{done:!0};if(i==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0};var n=t.parent,o=ta(t,n),r=o||na(t,n,o);if(r instanceof Js)return t.offset--,this.shallow?(this.position=t,Xs("elementStart",r,e,t,1)):(t.path.push(r.maxOffset),this.position=t,this._visitedParent=r,this.ignoreElementEnd?this._previous():Xs("elementEnd",r,e,t));if(r instanceof Gs){var _n43;if(this.singleCharacters)_n43=1;else{var _e80=r.startOffset;this._boundaryStartParent==i&&this.boundaries.start.offset>_e80&&(_e80=this.boundaries.start.offset),_n43=t.offset-_e80;}var _o30=t.offset-r.startOffset,_s12=new Ks(r,_o30-_n43,_n43);return t.offset-=_n43,this.position=t,Xs("text",_s12,e,t,_n43);}return t.path.pop(),this.position=t,this._visitedParent=i.parent,Xs("elementStart",i,e,t,1);}}]);return Zs;}(Symbol.iterator);function Xs(e,t,i,n,o){return{done:!1,value:{type:e,item:t,previousPosition:i,nextPosition:n,length:o}};}var ea=/*#__PURE__*/function(){function ea(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"toNone";_classCallCheck(this,ea);if(!e.is("element")&&!e.is("documentFragment"))throw new l.a("model-position-root-invalid",e);if(!(t instanceof Array)||0===t.length)throw new l.a("model-position-path-incorrect-format",e,{path:t});e.is("rootElement")?t=t.slice():(t=[].concat(_toConsumableArray(e.getPath()),_toConsumableArray(t)),e=e.root),this.root=e,this.path=t,this.stickiness=i;}_createClass(ea,[{key:"offset",get:function get(){return this.path[this.path.length-1];},set:function set(e){this.path[this.path.length-1]=e;}},{key:"parent",get:function get(){var e=this.root;for(var _t80=0;_t80<this.path.length-1;_t80++){if(e=e.getChild(e.offsetToIndex(this.path[_t80])),!e)throw new l.a("model-position-path-incorrect",this,{position:this});}if(e.is("$text"))throw new l.a("model-position-path-incorrect",this,{position:this});return e;}},{key:"index",get:function get(){return this.parent.offsetToIndex(this.offset);}},{key:"textNode",get:function get(){return ta(this,this.parent);}},{key:"nodeAfter",get:function get(){var e=this.parent;return ia(this,e,ta(this,e));}},{key:"nodeBefore",get:function get(){var e=this.parent;return na(this,e,ta(this,e));}},{key:"isAtStart",get:function get(){return 0===this.offset;}},{key:"isAtEnd",get:function get(){return this.offset==this.parent.maxOffset;}},{key:"compareWith",value:function compareWith(e){if(this.root!=e.root)return"different";var t=ln(this.path,e.path);switch(t){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[t]<e.path[t]?"before":"after";}}},{key:"getLastMatchingPosition",value:function getLastMatchingPosition(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};t.startPosition=this;var i=new Zs(t);return i.skip(e),i.position;}},{key:"getParentPath",value:function getParentPath(){return this.path.slice(0,-1);}},{key:"getAncestors",value:function getAncestors(){var e=this.parent;return e.is("documentFragment")?[e]:e.getAncestors({includeSelf:!0});}},{key:"findAncestor",value:function findAncestor(e){var t=this.parent;return t.is("element")?t.findAncestor(e,{includeSelf:!0}):null;}},{key:"getCommonPath",value:function getCommonPath(e){if(this.root!=e.root)return[];var t=ln(this.path,e.path),i="string"==typeof t?Math.min(this.path.length,e.path.length):t;return this.path.slice(0,i);}},{key:"getCommonAncestor",value:function getCommonAncestor(e){var t=this.getAncestors(),i=e.getAncestors();var n=0;for(;t[n]==i[n]&&t[n];){n++;}return 0===n?null:t[n-1];}},{key:"getShiftedBy",value:function getShiftedBy(e){var t=this.clone(),i=t.offset+e;return t.offset=i<0?0:i,t;}},{key:"isAfter",value:function isAfter(e){return"after"==this.compareWith(e);}},{key:"isBefore",value:function isBefore(e){return"before"==this.compareWith(e);}},{key:"isEqual",value:function isEqual(e){return"same"==this.compareWith(e);}},{key:"isTouching",value:function isTouching(e){var t=null,i=null;switch(this.compareWith(e)){case"same":return!0;case"before":t=ea._createAt(this),i=ea._createAt(e);break;case"after":t=ea._createAt(e),i=ea._createAt(this);break;default:return!1;}var n=t.parent;for(;t.path.length+i.path.length;){if(t.isEqual(i))return!0;if(t.path.length>i.path.length){if(t.offset!==n.maxOffset)return!1;t.path=t.path.slice(0,-1),n=n.parent,t.offset++;}else{if(0!==i.offset)return!1;i.path=i.path.slice(0,-1);}}}},{key:"is",value:function is(e){return"position"===e||"model:position"===e;}},{key:"hasSameParentAs",value:function hasSameParentAs(e){if(this.root!==e.root)return!1;return"same"==ln(this.getParentPath(),e.getParentPath());}},{key:"getTransformedByOperation",value:function getTransformedByOperation(e){var t;switch(e.type){case"insert":t=this._getTransformedByInsertOperation(e);break;case"move":case"remove":case"reinsert":t=this._getTransformedByMoveOperation(e);break;case"split":t=this._getTransformedBySplitOperation(e);break;case"merge":t=this._getTransformedByMergeOperation(e);break;default:t=ea._createAt(this);}return t;}},{key:"_getTransformedByInsertOperation",value:function _getTransformedByInsertOperation(e){return this._getTransformedByInsertion(e.position,e.howMany);}},{key:"_getTransformedByMoveOperation",value:function _getTransformedByMoveOperation(e){return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany);}},{key:"_getTransformedBySplitOperation",value:function _getTransformedBySplitOperation(e){var t=e.movedRange;return t.containsPosition(this)||t.start.isEqual(this)&&"toNext"==this.stickiness?this._getCombined(e.splitPosition,e.moveTargetPosition):e.graveyardPosition?this._getTransformedByMove(e.graveyardPosition,e.insertionPosition,1):this._getTransformedByInsertion(e.insertionPosition,1);}},{key:"_getTransformedByMergeOperation",value:function _getTransformedByMergeOperation(e){var t=e.movedRange;var i;return t.containsPosition(this)||t.start.isEqual(this)?(i=this._getCombined(e.sourcePosition,e.targetPosition),e.sourcePosition.isBefore(e.targetPosition)&&(i=i._getTransformedByDeletion(e.deletionPosition,1))):i=this.isEqual(e.deletionPosition)?ea._createAt(e.deletionPosition):this._getTransformedByMove(e.deletionPosition,e.graveyardPosition,1),i;}},{key:"_getTransformedByDeletion",value:function _getTransformedByDeletion(e,t){var i=ea._createAt(this);if(this.root!=e.root)return i;if("same"==ln(e.getParentPath(),this.getParentPath())){if(e.offset<this.offset){if(e.offset+t>this.offset)return null;i.offset-=t;}}else if("prefix"==ln(e.getParentPath(),this.getParentPath())){var _n44=e.path.length-1;if(e.offset<=this.path[_n44]){if(e.offset+t>this.path[_n44])return null;i.path[_n44]-=t;}}return i;}},{key:"_getTransformedByInsertion",value:function _getTransformedByInsertion(e,t){var i=ea._createAt(this);if(this.root!=e.root)return i;if("same"==ln(e.getParentPath(),this.getParentPath()))(e.offset<this.offset||e.offset==this.offset&&"toPrevious"!=this.stickiness)&&(i.offset+=t);else if("prefix"==ln(e.getParentPath(),this.getParentPath())){var _n45=e.path.length-1;e.offset<=this.path[_n45]&&(i.path[_n45]+=t);}return i;}},{key:"_getTransformedByMove",value:function _getTransformedByMove(e,t,i){if(t=t._getTransformedByDeletion(e,i),e.isEqual(t))return ea._createAt(this);var n=this._getTransformedByDeletion(e,i);return null===n||e.isEqual(this)&&"toNext"==this.stickiness||e.getShiftedBy(i).isEqual(this)&&"toPrevious"==this.stickiness?this._getCombined(e,t):n._getTransformedByInsertion(t,i);}},{key:"_getCombined",value:function _getCombined(e,t){var i=e.path.length-1,n=ea._createAt(t);return n.stickiness=this.stickiness,n.offset=n.offset+this.path[i]-e.offset,n.path=[].concat(_toConsumableArray(n.path),_toConsumableArray(this.path.slice(i+1))),n;}},{key:"toJSON",value:function toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness};}},{key:"clone",value:function clone(){return new this.constructor(this.root,this.path,this.stickiness);}}],[{key:"_createAt",value:function _createAt(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"toNone";if(e instanceof ea)return new ea(e.root,e.path,e.stickiness);{var _n46=e;if("end"==t)t=_n46.maxOffset;else{if("before"==t)return this._createBefore(_n46,i);if("after"==t)return this._createAfter(_n46,i);if(0!==t&&!t)throw new l.a("model-createpositionat-offset-required",[this,e]);}if(!_n46.is("element")&&!_n46.is("documentFragment"))throw new l.a("model-position-parent-incorrect",[this,e]);var _o31=_n46.getPath();return _o31.push(t),new this(_n46.root,_o31,i);}}},{key:"_createAfter",value:function _createAfter(e,t){if(!e.parent)throw new l.a("model-position-after-root",[this,e],{root:e});return this._createAt(e.parent,e.endOffset,t);}},{key:"_createBefore",value:function _createBefore(e,t){if(!e.parent)throw new l.a("model-position-before-root",e,{root:e});return this._createAt(e.parent,e.startOffset,t);}},{key:"fromJSON",value:function fromJSON(e,t){if("$graveyard"===e.root){var _i94=new ea(t.graveyard,e.path);return _i94.stickiness=e.stickiness,_i94;}if(!t.getRoot(e.root))throw new l.a("model-position-fromjson-no-root",t,{rootName:e.root});return new ea(t.getRoot(e.root),e.path,e.stickiness);}}]);return ea;}();function ta(e,t){var i=t.getChild(t.offsetToIndex(e.offset));return i&&i.is("$text")&&i.startOffset<e.offset?i:null;}function ia(e,t,i){return null!==i?null:t.getChild(t.offsetToIndex(e.offset));}function na(e,t,i){return null!==i?null:t.getChild(t.offsetToIndex(e.offset)-1);}var oa=/*#__PURE__*/function(_Symbol$iterator8){function oa(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;_classCallCheck(this,oa);this.start=ea._createAt(e),this.end=t?ea._createAt(t):ea._createAt(e),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious";}_createClass(oa,[{key:_Symbol$iterator8,value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function value(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function value$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:return _context13.delegateYield(new Zs({boundaries:this,ignoreElementEnd:!0}),"t0",1);case 1:case"end":return _context13.stop();}}},value,this);})},{key:"isCollapsed",get:function get(){return this.start.isEqual(this.end);}},{key:"isFlat",get:function get(){return"same"==ln(this.start.getParentPath(),this.end.getParentPath());}},{key:"root",get:function get(){return this.start.root;}},{key:"containsPosition",value:function containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end);}},{key:"containsRange",value:function containsRange(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;e.isCollapsed&&(t=!1);var i=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),n=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return i&&n;}},{key:"containsItem",value:function containsItem(e){var t=ea._createBefore(e);return this.containsPosition(t)||this.start.isEqual(t);}},{key:"is",value:function is(e){return"range"===e||"model:range"===e;}},{key:"isEqual",value:function isEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end);}},{key:"isIntersecting",value:function isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start);}},{key:"getDifference",value:function getDifference(e){var t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new oa(this.start,e.start)),this.containsPosition(e.end)&&t.push(new oa(e.end,this.end))):t.push(new oa(this.start,this.end)),t;}},{key:"getIntersection",value:function getIntersection(e){if(this.isIntersecting(e)){var _t81=this.start,_i95=this.end;return this.containsPosition(e.start)&&(_t81=e.start),this.containsPosition(e.end)&&(_i95=e.end),new oa(_t81,_i95);}return null;}},{key:"getJoined",value:function getJoined(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;var i=this.isIntersecting(e);if(i||(i=this.start.isBefore(e.start)?t?this.end.isTouching(e.start):this.end.isEqual(e.start):t?e.end.isTouching(this.start):e.end.isEqual(this.start)),!i)return null;var n=this.start,o=this.end;return e.start.isBefore(n)&&(n=e.start),e.end.isAfter(o)&&(o=e.end),new oa(n,o);}},{key:"getMinimalFlatRanges",value:function getMinimalFlatRanges(){var e=[],t=this.start.getCommonPath(this.end).length,i=ea._createAt(this.start);var n=i.parent;for(;i.path.length>t+1;){var _t82=n.maxOffset-i.offset;0!==_t82&&e.push(new oa(i,i.getShiftedBy(_t82))),i.path=i.path.slice(0,-1),i.offset++,n=n.parent;}for(;i.path.length<=this.end.path.length;){var _t83=this.end.path[i.path.length-1],_n47=_t83-i.offset;0!==_n47&&e.push(new oa(i,i.getShiftedBy(_n47))),i.offset=_t83,i.path.push(0);}return e;}},{key:"getWalker",value:function getWalker(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return e.boundaries=this,new Zs(e);}},{key:"getItems",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getItems(){var e,t,_iterator109,_step109,_e81,_args14=arguments;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getItems$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:e=_args14.length>0&&_args14[0]!==undefined?_args14[0]:{};e.boundaries=this,e.ignoreElementEnd=!0;t=new Zs(e);_iterator109=_createForOfIteratorHelper(t);_context14.prev=4;_iterator109.s();case 6:if((_step109=_iterator109.n()).done){_context14.next=12;break;}_e81=_step109.value;_context14.next=10;return _e81.item;case 10:_context14.next=6;break;case 12:_context14.next=17;break;case 14:_context14.prev=14;_context14.t0=_context14["catch"](4);_iterator109.e(_context14.t0);case 17:_context14.prev=17;_iterator109.f();return _context14.finish(17);case 20:case"end":return _context14.stop();}}},getItems,this,[[4,14,17,20]]);})},{key:"getPositions",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getPositions(){var e,t,_iterator110,_step110,_e82,_args15=arguments;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getPositions$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:e=_args15.length>0&&_args15[0]!==undefined?_args15[0]:{};e.boundaries=this;t=new Zs(e);_context15.next=5;return t.position;case 5:_iterator110=_createForOfIteratorHelper(t);_context15.prev=6;_iterator110.s();case 8:if((_step110=_iterator110.n()).done){_context15.next=14;break;}_e82=_step110.value;_context15.next=12;return _e82.nextPosition;case 12:_context15.next=8;break;case 14:_context15.next=19;break;case 16:_context15.prev=16;_context15.t0=_context15["catch"](6);_iterator110.e(_context15.t0);case 19:_context15.prev=19;_iterator110.f();return _context15.finish(19);case 22:case"end":return _context15.stop();}}},getPositions,this,[[6,16,19,22]]);})},{key:"getTransformedByOperation",value:function getTransformedByOperation(e){switch(e.type){case"insert":return this._getTransformedByInsertOperation(e);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(e);case"split":return[this._getTransformedBySplitOperation(e)];case"merge":return[this._getTransformedByMergeOperation(e)];}return[new oa(this.start,this.end)];}},{key:"getTransformedByOperations",value:function getTransformedByOperations(e){var t=[new oa(this.start,this.end)];var _iterator111=_createForOfIteratorHelper(e),_step111;try{for(_iterator111.s();!(_step111=_iterator111.n()).done;){var _i97=_step111.value;for(var _e85=0;_e85<t.length;_e85++){var _n49=t[_e85].getTransformedByOperation(_i97);t.splice.apply(t,[_e85,1].concat(_toConsumableArray(_n49))),_e85+=_n49.length-1;}}}catch(err){_iterator111.e(err);}finally{_iterator111.f();}for(var _e83=0;_e83<t.length;_e83++){var _i96=t[_e83];for(var _n48=_e83+1;_n48<t.length;_n48++){var _e84=t[_n48];(_i96.containsRange(_e84)||_e84.containsRange(_i96)||_i96.isEqual(_e84))&&t.splice(_n48,1);}}return t;}},{key:"getCommonAncestor",value:function getCommonAncestor(){return this.start.getCommonAncestor(this.end);}},{key:"getContainedElement",value:function getContainedElement(){if(this.isCollapsed)return null;var e=this.start.nodeAfter,t=this.end.nodeBefore;return e&&e.is("element")&&e===t?e:null;}},{key:"toJSON",value:function toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()};}},{key:"clone",value:function clone(){return new this.constructor(this.start,this.end);}},{key:"_getTransformedByInsertOperation",value:function _getTransformedByInsertOperation(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;return this._getTransformedByInsertion(e.position,e.howMany,t);}},{key:"_getTransformedByMoveOperation",value:function _getTransformedByMoveOperation(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;var i=e.sourcePosition,n=e.howMany,o=e.targetPosition;return this._getTransformedByMove(i,o,n,t);}},{key:"_getTransformedBySplitOperation",value:function _getTransformedBySplitOperation(e){var t=this.start._getTransformedBySplitOperation(e);var i=this.end._getTransformedBySplitOperation(e);return this.end.isEqual(e.insertionPosition)&&(i=this.end.getShiftedBy(1)),t.root!=i.root&&(i=this.end.getShiftedBy(-1)),new oa(t,i);}},{key:"_getTransformedByMergeOperation",value:function _getTransformedByMergeOperation(e){if(this.start.isEqual(e.targetPosition)&&this.end.isEqual(e.deletionPosition))return new oa(this.start);var t=this.start._getTransformedByMergeOperation(e),i=this.end._getTransformedByMergeOperation(e);return t.root!=i.root&&(i=this.end.getShiftedBy(-1)),t.isAfter(i)?(e.sourcePosition.isBefore(e.targetPosition)?(t=ea._createAt(i),t.offset=0):(e.deletionPosition.isEqual(t)||(i=e.deletionPosition),t=e.targetPosition),new oa(t,i)):new oa(t,i);}},{key:"_getTransformedByInsertion",value:function _getTransformedByInsertion(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!1;if(i&&this.containsPosition(e))return[new oa(this.start,e),new oa(e.getShiftedBy(t),this.end._getTransformedByInsertion(e,t))];{var _i98=new oa(this.start,this.end);return _i98.start=_i98.start._getTransformedByInsertion(e,t),_i98.end=_i98.end._getTransformedByInsertion(e,t),[_i98];}}},{key:"_getTransformedByMove",value:function _getTransformedByMove(e,t,i){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:!1;if(this.isCollapsed){var _n50=this.start._getTransformedByMove(e,t,i);return[new oa(_n50)];}var o=oa._createFromPositionAndShift(e,i),r=t._getTransformedByDeletion(e,i);if(this.containsPosition(t)&&!n&&(o.containsPosition(this.start)||o.containsPosition(this.end))){var _n51=this.start._getTransformedByMove(e,t,i),_o32=this.end._getTransformedByMove(e,t,i);return[new oa(_n51,_o32)];}var s;var a=this.getDifference(o);var l=null;var c=this.getIntersection(o);if(1==a.length?l=new oa(a[0].start._getTransformedByDeletion(e,i),a[0].end._getTransformedByDeletion(e,i)):2==a.length&&(l=new oa(this.start,this.end._getTransformedByDeletion(e,i))),s=l?l._getTransformedByInsertion(r,i,null!==c||n):[],c){var _e86=new oa(c.start._getCombined(o.start,r),c.end._getCombined(o.start,r));2==s.length?s.splice(1,0,_e86):s.push(_e86);}return s;}},{key:"_getTransformedByDeletion",value:function _getTransformedByDeletion(e,t){var i=this.start._getTransformedByDeletion(e,t),n=this.end._getTransformedByDeletion(e,t);return null==i&&null==n?null:(null==i&&(i=e),null==n&&(n=e),new oa(i,n));}}],[{key:"_createFromPositionAndShift",value:function _createFromPositionAndShift(e,t){var i=e,n=e.getShiftedBy(t);return t>0?new this(i,n):new this(n,i);}},{key:"_createIn",value:function _createIn(e){return new this(ea._createAt(e,0),ea._createAt(e,e.maxOffset));}},{key:"_createOn",value:function _createOn(e){return this._createFromPositionAndShift(ea._createBefore(e),e.offsetSize);}},{key:"_createFromRanges",value:function _createFromRanges(e){if(0===e.length)throw new l.a("range-create-from-ranges-empty-array",null);if(1==e.length)return e[0].clone();var t=e[0];e.sort(function(e,t){return e.start.isAfter(t.start)?1:-1;});var i=e.indexOf(t),n=new this(t.start,t.end);if(i>0)for(var _t84=i-1;e[_t84].end.isEqual(n.start);_t84++){n.start=ea._createAt(e[_t84].start);}for(var _t85=i+1;_t85<e.length&&e[_t85].start.isEqual(n.end);_t85++){n.end=ea._createAt(e[_t85].end);}return n;}},{key:"fromJSON",value:function fromJSON(e,t){return new this(ea.fromJSON(e.start,t),ea.fromJSON(e.end,t));}}]);return oa;}(Symbol.iterator);var ra=/*#__PURE__*/function(){function ra(){var _this51=this;_classCallCheck(this,ra);this._modelToViewMapping=new WeakMap(),this._viewToModelMapping=new WeakMap(),this._viewToModelLengthCallbacks=new Map(),this._markerNameToElements=new Map(),this._elementToMarkerNames=new Map(),this._unboundMarkerNames=new Set(),this.on("modelToViewPosition",function(e,t){if(t.viewPosition)return;var i=_this51._modelToViewMapping.get(t.modelPosition.parent);t.viewPosition=_this51.findPositionIn(i,t.modelPosition.offset);},{priority:"low"}),this.on("viewToModelPosition",function(e,t){if(t.modelPosition)return;var i=_this51.findMappedViewAncestor(t.viewPosition),n=_this51._viewToModelMapping.get(i),o=_this51._toModelOffset(t.viewPosition.parent,t.viewPosition.offset,i);t.modelPosition=ea._createAt(n,o);},{priority:"low"});}_createClass(ra,[{key:"bindElements",value:function bindElements(e,t){this._modelToViewMapping.set(e,t),this._viewToModelMapping.set(t,e);}},{key:"unbindViewElement",value:function unbindViewElement(e){var t=this.toModelElement(e);if(this._viewToModelMapping["delete"](e),this._elementToMarkerNames.has(e)){var _iterator112=_createForOfIteratorHelper(this._elementToMarkerNames.get(e)),_step112;try{for(_iterator112.s();!(_step112=_iterator112.n()).done;){var _t86=_step112.value;this._unboundMarkerNames.add(_t86);}}catch(err){_iterator112.e(err);}finally{_iterator112.f();}}this._modelToViewMapping.get(t)==e&&this._modelToViewMapping["delete"](t);}},{key:"unbindModelElement",value:function unbindModelElement(e){var t=this.toViewElement(e);this._modelToViewMapping["delete"](e),this._viewToModelMapping.get(t)==e&&this._viewToModelMapping["delete"](t);}},{key:"bindElementToMarker",value:function bindElementToMarker(e,t){var i=this._markerNameToElements.get(t)||new Set();i.add(e);var n=this._elementToMarkerNames.get(e)||new Set();n.add(t),this._markerNameToElements.set(t,i),this._elementToMarkerNames.set(e,n);}},{key:"unbindElementFromMarkerName",value:function unbindElementFromMarkerName(e,t){var i=this._markerNameToElements.get(t);i&&(i["delete"](e),0==i.size&&this._markerNameToElements["delete"](t));var n=this._elementToMarkerNames.get(e);n&&(n["delete"](t),0==n.size&&this._elementToMarkerNames["delete"](e));}},{key:"flushUnboundMarkerNames",value:function flushUnboundMarkerNames(){var e=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),e;}},{key:"clearBindings",value:function clearBindings(){this._modelToViewMapping=new WeakMap(),this._viewToModelMapping=new WeakMap(),this._markerNameToElements=new Map(),this._elementToMarkerNames=new Map(),this._unboundMarkerNames=new Set();}},{key:"toModelElement",value:function toModelElement(e){return this._viewToModelMapping.get(e);}},{key:"toViewElement",value:function toViewElement(e){return this._modelToViewMapping.get(e);}},{key:"toModelRange",value:function toModelRange(e){return new oa(this.toModelPosition(e.start),this.toModelPosition(e.end));}},{key:"toViewRange",value:function toViewRange(e){return new co(this.toViewPosition(e.start),this.toViewPosition(e.end));}},{key:"toModelPosition",value:function toModelPosition(e){var t={viewPosition:e,mapper:this};return this.fire("viewToModelPosition",t),t.modelPosition;}},{key:"toViewPosition",value:function toViewPosition(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{isPhantom:!1};var i={modelPosition:e,mapper:this,isPhantom:t.isPhantom};return this.fire("modelToViewPosition",i),i.viewPosition;}},{key:"markerNameToElements",value:function markerNameToElements(e){var t=this._markerNameToElements.get(e);if(!t)return null;var i=new Set();var _iterator113=_createForOfIteratorHelper(t),_step113;try{for(_iterator113.s();!(_step113=_iterator113.n()).done;){var _e87=_step113.value;if(_e87.is("attributeElement")){var _iterator114=_createForOfIteratorHelper(_e87.getElementsWithSameId()),_step114;try{for(_iterator114.s();!(_step114=_iterator114.n()).done;){var _t87=_step114.value;i.add(_t87);}}catch(err){_iterator114.e(err);}finally{_iterator114.f();}}else i.add(_e87);}}catch(err){_iterator113.e(err);}finally{_iterator113.f();}return i;}},{key:"registerViewToModelLength",value:function registerViewToModelLength(e,t){this._viewToModelLengthCallbacks.set(e,t);}},{key:"findMappedViewAncestor",value:function findMappedViewAncestor(e){var t=e.parent;for(;!this._viewToModelMapping.has(t);){t=t.parent;}return t;}},{key:"_toModelOffset",value:function _toModelOffset(e,t,i){if(i!=e){return this._toModelOffset(e.parent,e.index,i)+this._toModelOffset(e,t,e);}if(e.is("$text"))return t;var n=0;for(var _i99=0;_i99<t;_i99++){n+=this.getModelLength(e.getChild(_i99));}return n;}},{key:"getModelLength",value:function getModelLength(e){if(this._viewToModelLengthCallbacks.get(e.name)){return this._viewToModelLengthCallbacks.get(e.name)(e);}if(this._viewToModelMapping.has(e))return 1;if(e.is("$text"))return e.data.length;if(e.is("uiElement"))return 0;{var _t88=0;var _iterator115=_createForOfIteratorHelper(e.getChildren()),_step115;try{for(_iterator115.s();!(_step115=_iterator115.n()).done;){var _i100=_step115.value;_t88+=this.getModelLength(_i100);}}catch(err){_iterator115.e(err);}finally{_iterator115.f();}return _t88;}}},{key:"findPositionIn",value:function findPositionIn(e,t){var i,n=0,o=0,r=0;if(e.is("$text"))return new lo(e,t);for(;o<t;){i=e.getChild(r),n=this.getModelLength(i),o+=n,r++;}return o==t?this._moveViewPositionToTextNode(new lo(e,r)):this.findPositionIn(i,t-(o-n));}},{key:"_moveViewPositionToTextNode",value:function _moveViewPositionToTextNode(e){var t=e.nodeBefore,i=e.nodeAfter;return t instanceof un?new lo(t,t.data.length):i instanceof un?new lo(i,0):e;}}]);return ra;}();Ke(ra,u);var sa=/*#__PURE__*/function(){function sa(){_classCallCheck(this,sa);this._consumable=new Map(),this._textProxyRegistry=new Map();}_createClass(sa,[{key:"add",value:function add(e,t){t=aa(t),e instanceof Ks&&(e=this._getSymbolForTextProxy(e)),this._consumable.has(e)||this._consumable.set(e,new Map()),this._consumable.get(e).set(t,!0);}},{key:"consume",value:function consume(e,t){return t=aa(t),e instanceof Ks&&(e=this._getSymbolForTextProxy(e)),!!this.test(e,t)&&(this._consumable.get(e).set(t,!1),!0);}},{key:"test",value:function test(e,t){t=aa(t),e instanceof Ks&&(e=this._getSymbolForTextProxy(e));var i=this._consumable.get(e);if(void 0===i)return null;var n=i.get(t);return void 0===n?null:n;}},{key:"revert",value:function revert(e,t){t=aa(t),e instanceof Ks&&(e=this._getSymbolForTextProxy(e));var i=this.test(e,t);return!1===i?(this._consumable.get(e).set(t,!0),!0):!0!==i&&null;}},{key:"_getSymbolForTextProxy",value:function _getSymbolForTextProxy(e){var t=null;var i=this._textProxyRegistry.get(e.startOffset);if(i){var _n52=i.get(e.endOffset);_n52&&(t=_n52.get(e.parent));}return t||(t=this._addSymbolForTextProxy(e.startOffset,e.endOffset,e.parent)),t;}},{key:"_addSymbolForTextProxy",value:function _addSymbolForTextProxy(e,t,i){var n=Symbol("textProxySymbol");var o,r;return o=this._textProxyRegistry.get(e),o||(o=new Map(),this._textProxyRegistry.set(e,o)),r=o.get(t),r||(r=new Map(),o.set(t,r)),r.set(i,n),n;}}]);return sa;}();function aa(e){var t=e.split(":");return"addMarker"==t[0]||"removeMarker"==t[0]?e:t.length>1?t[0]+":"+t[1]:t[0];}var la=/*#__PURE__*/function(){function la(e){_classCallCheck(this,la);this.conversionApi=Object.assign({dispatcher:this},e),this._reconversionEventsMapping=new Map();}_createClass(la,[{key:"convertChanges",value:function convertChanges(e,t,i){var _iterator116=_createForOfIteratorHelper(e.getMarkersToRemove()),_step116;try{for(_iterator116.s();!(_step116=_iterator116.n()).done;){var _t89=_step116.value;this.convertMarkerRemove(_t89.name,_t89.range,i);}}catch(err){_iterator116.e(err);}finally{_iterator116.f();}var n=this._mapChangesWithAutomaticReconversion(e);var _iterator117=_createForOfIteratorHelper(n),_step117;try{for(_iterator117.s();!(_step117=_iterator117.n()).done;){var _e88=_step117.value;"insert"===_e88.type?this.convertInsert(oa._createFromPositionAndShift(_e88.position,_e88.length),i):"remove"===_e88.type?this.convertRemove(_e88.position,_e88.length,_e88.name,i):"reconvert"===_e88.type?this.reconvertElement(_e88.element,i):this.convertAttribute(_e88.range,_e88.attributeKey,_e88.attributeOldValue,_e88.attributeNewValue,i);}}catch(err){_iterator117.e(err);}finally{_iterator117.f();}var _iterator118=_createForOfIteratorHelper(this.conversionApi.mapper.flushUnboundMarkerNames()),_step118;try{for(_iterator118.s();!(_step118=_iterator118.n()).done;){var _e89=_step118.value;var _n53=t.get(_e89).getRange();this.convertMarkerRemove(_e89,_n53,i),this.convertMarkerAdd(_e89,_n53,i);}}catch(err){_iterator118.e(err);}finally{_iterator118.f();}var _iterator119=_createForOfIteratorHelper(e.getMarkersToAdd()),_step119;try{for(_iterator119.s();!(_step119=_iterator119.n()).done;){var _t90=_step119.value;this.convertMarkerAdd(_t90.name,_t90.range,i);}}catch(err){_iterator119.e(err);}finally{_iterator119.f();}}},{key:"convertInsert",value:function convertInsert(e,t){this.conversionApi.writer=t,this.conversionApi.consumable=this._createInsertConsumable(e);var _iterator120=_createForOfIteratorHelper(Array.from(e).map(da)),_step120;try{for(_iterator120.s();!(_step120=_iterator120.n()).done;){var _t91=_step120.value;this._convertInsertWithAttributes(_t91);}}catch(err){_iterator120.e(err);}finally{_iterator120.f();}this._clearConversionApi();}},{key:"convertRemove",value:function convertRemove(e,t,i,n){this.conversionApi.writer=n,this.fire("remove:"+i,{position:e,length:t},this.conversionApi),this._clearConversionApi();}},{key:"convertAttribute",value:function convertAttribute(e,t,i,n,o){this.conversionApi.writer=o,this.conversionApi.consumable=this._createConsumableForRange(e,"attribute:"+t);var _iterator121=_createForOfIteratorHelper(e),_step121;try{for(_iterator121.s();!(_step121=_iterator121.n()).done;){var _o33=_step121.value;var _e90={item:_o33.item,range:oa._createFromPositionAndShift(_o33.previousPosition,_o33.length),attributeKey:t,attributeOldValue:i,attributeNewValue:n};this._testAndFire("attribute:"+t,_e90);}}catch(err){_iterator121.e(err);}finally{_iterator121.f();}this._clearConversionApi();}},{key:"reconvertElement",value:function reconvertElement(e,t){var i=oa._createOn(e);this.conversionApi.writer=t,this.conversionApi.consumable=this._createInsertConsumable(i);var n=this.conversionApi.mapper,o=n.toViewElement(e);t.remove(o),this._convertInsertWithAttributes({item:e,range:i});var r=n.toViewElement(e);var _iterator122=_createForOfIteratorHelper(oa._createIn(e)),_step122;try{for(_iterator122.s();!(_step122=_iterator122.n()).done;){var _i101=_step122.value;var _e91=_i101.item,_o34=ua(_e91,n);_o34?_o34.root!==r.root&&t.move(t.createRangeOn(_o34),n.toViewPosition(ea._createBefore(_e91))):this._convertInsertWithAttributes(da(_i101));}}catch(err){_iterator122.e(err);}finally{_iterator122.f();}n.unbindViewElement(o),this._clearConversionApi();}},{key:"convertSelection",value:function convertSelection(e,t,i){var n=Array.from(t.getMarkersAtPosition(e.getFirstPosition()));if(this.conversionApi.writer=i,this.conversionApi.consumable=this._createSelectionConsumable(e,n),this.fire("selection",{selection:e},this.conversionApi),e.isCollapsed){var _iterator123=_createForOfIteratorHelper(n),_step123;try{for(_iterator123.s();!(_step123=_iterator123.n()).done;){var _t92=_step123.value;var _i102=_t92.getRange();if(!ca(e.getFirstPosition(),_t92,this.conversionApi.mapper))continue;var _n54={item:e,markerName:_t92.name,markerRange:_i102};this.conversionApi.consumable.test(e,"addMarker:"+_t92.name)&&this.fire("addMarker:"+_t92.name,_n54,this.conversionApi);}}catch(err){_iterator123.e(err);}finally{_iterator123.f();}var _iterator124=_createForOfIteratorHelper(e.getAttributeKeys()),_step124;try{for(_iterator124.s();!(_step124=_iterator124.n()).done;){var _t93=_step124.value;var _i103={item:e,range:e.getFirstRange(),attributeKey:_t93,attributeOldValue:null,attributeNewValue:e.getAttribute(_t93)};this.conversionApi.consumable.test(e,"attribute:"+_i103.attributeKey)&&this.fire("attribute:"+_i103.attributeKey+":$text",_i103,this.conversionApi);}}catch(err){_iterator124.e(err);}finally{_iterator124.f();}this._clearConversionApi();}else this._clearConversionApi();}},{key:"convertMarkerAdd",value:function convertMarkerAdd(e,t,i){if("$graveyard"==t.root.rootName)return;this.conversionApi.writer=i;var n="addMarker:"+e,o=new sa();if(o.add(t,n),this.conversionApi.consumable=o,this.fire(n,{markerName:e,markerRange:t},this.conversionApi),o.test(t,n)){this.conversionApi.consumable=this._createConsumableForRange(t,n);var _iterator125=_createForOfIteratorHelper(t.getItems()),_step125;try{for(_iterator125.s();!(_step125=_iterator125.n()).done;){var _i104=_step125.value;if(!this.conversionApi.consumable.test(_i104,n))continue;var _o35={item:_i104,range:oa._createOn(_i104),markerName:e,markerRange:t};this.fire(n,_o35,this.conversionApi);}}catch(err){_iterator125.e(err);}finally{_iterator125.f();}this._clearConversionApi();}else this._clearConversionApi();}},{key:"convertMarkerRemove",value:function convertMarkerRemove(e,t,i){"$graveyard"!=t.root.rootName&&(this.conversionApi.writer=i,this.fire("removeMarker:"+e,{markerName:e,markerRange:t},this.conversionApi),this._clearConversionApi());}},{key:"_mapReconversionTriggerEvent",value:function _mapReconversionTriggerEvent(e,t){this._reconversionEventsMapping.set(t,e);}},{key:"_createInsertConsumable",value:function _createInsertConsumable(e){var t=new sa();var _iterator126=_createForOfIteratorHelper(e),_step126;try{for(_iterator126.s();!(_step126=_iterator126.n()).done;){var _i105=_step126.value;var _e92=_i105.item;t.add(_e92,"insert");var _iterator127=_createForOfIteratorHelper(_e92.getAttributeKeys()),_step127;try{for(_iterator127.s();!(_step127=_iterator127.n()).done;){var _i106=_step127.value;t.add(_e92,"attribute:"+_i106);}}catch(err){_iterator127.e(err);}finally{_iterator127.f();}}}catch(err){_iterator126.e(err);}finally{_iterator126.f();}return t;}},{key:"_createConsumableForRange",value:function _createConsumableForRange(e,t){var i=new sa();var _iterator128=_createForOfIteratorHelper(e.getItems()),_step128;try{for(_iterator128.s();!(_step128=_iterator128.n()).done;){var _n55=_step128.value;i.add(_n55,t);}}catch(err){_iterator128.e(err);}finally{_iterator128.f();}return i;}},{key:"_createSelectionConsumable",value:function _createSelectionConsumable(e,t){var i=new sa();i.add(e,"selection");var _iterator129=_createForOfIteratorHelper(t),_step129;try{for(_iterator129.s();!(_step129=_iterator129.n()).done;){var _n56=_step129.value;i.add(e,"addMarker:"+_n56.name);}}catch(err){_iterator129.e(err);}finally{_iterator129.f();}var _iterator130=_createForOfIteratorHelper(e.getAttributeKeys()),_step130;try{for(_iterator130.s();!(_step130=_iterator130.n()).done;){var _t94=_step130.value;i.add(e,"attribute:"+_t94);}}catch(err){_iterator130.e(err);}finally{_iterator130.f();}return i;}},{key:"_testAndFire",value:function _testAndFire(e,t){this.conversionApi.consumable.test(t.item,e)&&this.fire(function(e,t){var i=t.item.name||"$text";return"".concat(e,":").concat(i);}(e,t),t,this.conversionApi);}},{key:"_clearConversionApi",value:function _clearConversionApi(){delete this.conversionApi.writer,delete this.conversionApi.consumable;}},{key:"_convertInsertWithAttributes",value:function _convertInsertWithAttributes(e){this._testAndFire("insert",e);var _iterator131=_createForOfIteratorHelper(e.item.getAttributeKeys()),_step131;try{for(_iterator131.s();!(_step131=_iterator131.n()).done;){var _t95=_step131.value;e.attributeKey=_t95,e.attributeOldValue=null,e.attributeNewValue=e.item.getAttribute(_t95),this._testAndFire("attribute:"+_t95,e);}}catch(err){_iterator131.e(err);}finally{_iterator131.f();}}},{key:"_mapChangesWithAutomaticReconversion",value:function _mapChangesWithAutomaticReconversion(e){var t=new Set(),i=[];var _iterator132=_createForOfIteratorHelper(e.getChanges()),_step132;try{for(_iterator132.s();!(_step132=_iterator132.n()).done;){var _n57=_step132.value;var _e93=_n57.position||_n57.range.start,_o36=_e93.parent;if(ta(_e93,_o36)){i.push(_n57);continue;}var _r18="attribute"===_n57.type?ia(_e93,_o36,null):_o36;if(_r18.is("$text")){i.push(_n57);continue;}var _s13=void 0;if(_s13="attribute"===_n57.type?"attribute:".concat(_n57.attributeKey,":").concat(_r18.name):"".concat(_n57.type,":").concat(_n57.name),this._isReconvertTriggerEvent(_s13,_r18.name)){if(t.has(_r18))continue;t.add(_r18),i.push({type:"reconvert",element:_r18});}else i.push(_n57);}}catch(err){_iterator132.e(err);}finally{_iterator132.f();}return i;}},{key:"_isReconvertTriggerEvent",value:function _isReconvertTriggerEvent(e,t){return this._reconversionEventsMapping.get(e)===t;}}]);return la;}();function ca(e,t,i){var n=t.getRange(),o=Array.from(e.getAncestors());o.shift(),o.reverse();return!o.some(function(e){if(n.containsItem(e)){return!!i.toViewElement(e).getCustomProperty("addHighlight");}});}function da(e){return{item:e.item,range:oa._createFromPositionAndShift(e.previousPosition,e.length)};}function ua(e,t){if(e.is("textProxy")){var _i107=t.toViewPosition(ea._createBefore(e)).parent;return _i107.is("$text")?_i107:null;}return t.toViewElement(e);}Ke(la,u);var ha=/*#__PURE__*/function(){function ha(e,t,i){_classCallCheck(this,ha);this._lastRangeBackward=!1,this._ranges=[],this._attrs=new Map(),e&&this.setTo(e,t,i);}_createClass(ha,[{key:"anchor",get:function get(){if(this._ranges.length>0){var _e94=this._ranges[this._ranges.length-1];return this._lastRangeBackward?_e94.end:_e94.start;}return null;}},{key:"focus",get:function get(){if(this._ranges.length>0){var _e95=this._ranges[this._ranges.length-1];return this._lastRangeBackward?_e95.start:_e95.end;}return null;}},{key:"isCollapsed",get:function get(){return 1===this._ranges.length&&this._ranges[0].isCollapsed;}},{key:"rangeCount",get:function get(){return this._ranges.length;}},{key:"isBackward",get:function get(){return!this.isCollapsed&&this._lastRangeBackward;}},{key:"isEqual",value:function isEqual(e){if(this.rangeCount!=e.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;var _iterator133=_createForOfIteratorHelper(this._ranges),_step133;try{for(_iterator133.s();!(_step133=_iterator133.n()).done;){var _t96=_step133.value;var _i108=!1;var _iterator134=_createForOfIteratorHelper(e._ranges),_step134;try{for(_iterator134.s();!(_step134=_iterator134.n()).done;){var _n58=_step134.value;if(_t96.isEqual(_n58)){_i108=!0;break;}}}catch(err){_iterator134.e(err);}finally{_iterator134.f();}if(!_i108)return!1;}}catch(err){_iterator133.e(err);}finally{_iterator133.f();}return!0;}},{key:"getRanges",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getRanges(){var _iterator135,_step135,_e96;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getRanges$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:_iterator135=_createForOfIteratorHelper(this._ranges);_context16.prev=1;_iterator135.s();case 3:if((_step135=_iterator135.n()).done){_context16.next=9;break;}_e96=_step135.value;_context16.next=7;return new oa(_e96.start,_e96.end);case 7:_context16.next=3;break;case 9:_context16.next=14;break;case 11:_context16.prev=11;_context16.t0=_context16["catch"](1);_iterator135.e(_context16.t0);case 14:_context16.prev=14;_iterator135.f();return _context16.finish(14);case 17:case"end":return _context16.stop();}}},getRanges,this,[[1,11,14,17]]);})},{key:"getFirstRange",value:function getFirstRange(){var e=null;var _iterator136=_createForOfIteratorHelper(this._ranges),_step136;try{for(_iterator136.s();!(_step136=_iterator136.n()).done;){var _t97=_step136.value;e&&!_t97.start.isBefore(e.start)||(e=_t97);}}catch(err){_iterator136.e(err);}finally{_iterator136.f();}return e?new oa(e.start,e.end):null;}},{key:"getLastRange",value:function getLastRange(){var e=null;var _iterator137=_createForOfIteratorHelper(this._ranges),_step137;try{for(_iterator137.s();!(_step137=_iterator137.n()).done;){var _t98=_step137.value;e&&!_t98.end.isAfter(e.end)||(e=_t98);}}catch(err){_iterator137.e(err);}finally{_iterator137.f();}return e?new oa(e.start,e.end):null;}},{key:"getFirstPosition",value:function getFirstPosition(){var e=this.getFirstRange();return e?e.start.clone():null;}},{key:"getLastPosition",value:function getLastPosition(){var e=this.getLastRange();return e?e.end.clone():null;}},{key:"setTo",value:function setTo(e,t,i){if(null===e)this._setRanges([]);else if(e instanceof ha)this._setRanges(e.getRanges(),e.isBackward);else if(e&&"function"==typeof e.getRanges)this._setRanges(e.getRanges(),e.isBackward);else if(e instanceof oa)this._setRanges([e],!!t&&!!t.backward);else if(e instanceof ea)this._setRanges([new oa(e)]);else if(e instanceof Ys){var _n59=!!i&&!!i.backward;var _o37;if("in"==t)_o37=oa._createIn(e);else if("on"==t)_o37=oa._createOn(e);else{if(void 0===t)throw new l.a("model-selection-setto-required-second-parameter",[this,e]);_o37=new oa(ea._createAt(e,t));}this._setRanges([_o37],_n59);}else{if(!Ji(e))throw new l.a("model-selection-setto-not-selectable",[this,e]);this._setRanges(e,t&&!!t.backward);}}},{key:"_setRanges",value:function _setRanges(e){var _this52=this;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;var i=(e=Array.from(e)).some(function(t){if(!(t instanceof oa))throw new l.a("model-selection-set-ranges-not-range",[_this52,e]);return _this52._ranges.every(function(e){return!e.isEqual(t);});});if(e.length!==this._ranges.length||i){this._removeAllRanges();var _iterator138=_createForOfIteratorHelper(e),_step138;try{for(_iterator138.s();!(_step138=_iterator138.n()).done;){var _t99=_step138.value;this._pushRange(_t99);}}catch(err){_iterator138.e(err);}finally{_iterator138.f();}this._lastRangeBackward=!!t,this.fire("change:range",{directChange:!0});}}},{key:"setFocus",value:function setFocus(e,t){if(null===this.anchor)throw new l.a("model-selection-setfocus-no-ranges",[this,e]);var i=ea._createAt(e,t);if("same"==i.compareWith(this.focus))return;var n=this.anchor;this._ranges.length&&this._popRange(),"before"==i.compareWith(n)?(this._pushRange(new oa(i,n)),this._lastRangeBackward=!0):(this._pushRange(new oa(n,i)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0});}},{key:"getAttribute",value:function getAttribute(e){return this._attrs.get(e);}},{key:"getAttributes",value:function getAttributes(){return this._attrs.entries();}},{key:"getAttributeKeys",value:function getAttributeKeys(){return this._attrs.keys();}},{key:"hasAttribute",value:function hasAttribute(e){return this._attrs.has(e);}},{key:"removeAttribute",value:function removeAttribute(e){this.hasAttribute(e)&&(this._attrs["delete"](e),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}));}},{key:"setAttribute",value:function setAttribute(e,t){this.getAttribute(e)!==t&&(this._attrs.set(e,t),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}));}},{key:"getSelectedElement",value:function getSelectedElement(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement();}},{key:"is",value:function is(e){return"selection"===e||"model:selection"===e;}},{key:"getSelectedBlocks",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getSelectedBlocks(){var e,_iterator139,_step139,_t100,_i109,_iterator140,_step140,_i110,_n61,_n60;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getSelectedBlocks$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:e=new WeakSet();_iterator139=_createForOfIteratorHelper(this.getRanges());_context17.prev=2;_iterator139.s();case 4:if((_step139=_iterator139.n()).done){_context17.next=38;break;}_t100=_step139.value;_i109=fa(_t100.start,e);_context17.t0=_i109&&pa(_i109,_t100);if(!_context17.t0){_context17.next=11;break;}_context17.next=11;return _i109;case 11:_iterator140=_createForOfIteratorHelper(_t100.getWalker());_context17.prev=12;_iterator140.s();case 14:if((_step140=_iterator140.n()).done){_context17.next=23;break;}_i110=_step140.value;_n61=_i110.item;_context17.t1="elementEnd"==_i110.type&&ma(_n61,e,_t100);if(!_context17.t1){_context17.next=21;break;}_context17.next=21;return _n61;case 21:_context17.next=14;break;case 23:_context17.next=28;break;case 25:_context17.prev=25;_context17.t2=_context17["catch"](12);_iterator140.e(_context17.t2);case 28:_context17.prev=28;_iterator140.f();return _context17.finish(28);case 31:_n60=fa(_t100.end,e);_context17.t3=_n60&&!_t100.end.isTouching(ea._createAt(_n60,0))&&pa(_n60,_t100);if(!_context17.t3){_context17.next=36;break;}_context17.next=36;return _n60;case 36:_context17.next=4;break;case 38:_context17.next=43;break;case 40:_context17.prev=40;_context17.t4=_context17["catch"](2);_iterator139.e(_context17.t4);case 43:_context17.prev=43;_iterator139.f();return _context17.finish(43);case 46:case"end":return _context17.stop();}}},getSelectedBlocks,this,[[2,40,43,46],[12,25,28,31]]);})},{key:"containsEntireContent",value:function containsEntireContent(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.anchor.root;var t=ea._createAt(e,0),i=ea._createAt(e,"end");return t.isTouching(this.getFirstPosition())&&i.isTouching(this.getLastPosition());}},{key:"_pushRange",value:function _pushRange(e){this._checkRange(e),this._ranges.push(new oa(e.start,e.end));}},{key:"_checkRange",value:function _checkRange(e){for(var _t101=0;_t101<this._ranges.length;_t101++){if(e.isIntersecting(this._ranges[_t101]))throw new l.a("model-selection-range-intersects",[this,e],{addedRange:e,intersectingRange:this._ranges[_t101]});}}},{key:"_removeAllRanges",value:function _removeAllRanges(){for(;this._ranges.length>0;){this._popRange();}}},{key:"_popRange",value:function _popRange(){this._ranges.pop();}}]);return ha;}();function ga(e,t){return!t.has(e)&&(t.add(e),e.root.document.model.schema.isBlock(e)&&e.parent);}function ma(e,t,i){return ga(e,t)&&pa(e,i);}function fa(e,t){var i=e.parent.root.document.model.schema,n=e.parent.getAncestors({parentFirst:!0,includeSelf:!0});var o=!1;var r=n.find(function(e){return!o&&(o=i.isLimit(e),!o&&ga(e,t));});return n.forEach(function(e){return t.add(e);}),r;}function pa(e,t){var i=function(e){var t=e.root.document.model.schema;var i=e.parent;for(;i;){if(t.isBlock(i))return i;i=i.parent;}}(e);if(!i)return!0;return!t.containsRange(oa._createOn(i),!0);}Ke(ha,u);var ba=/*#__PURE__*/function(_oa){_inherits(ba,_oa);var _super24=_createSuper(ba);function ba(e,t){var _this53;_classCallCheck(this,ba);_this53=_super24.call(this,e,t),wa.call(_assertThisInitialized(_this53));return _this53;}_createClass(ba,[{key:"detach",value:function detach(){this.stopListening();}},{key:"is",value:function is(e){return"liveRange"===e||"model:liveRange"===e||"range"==e||"model:range"===e;}},{key:"toRange",value:function toRange(){return new oa(this.start,this.end);}}],[{key:"fromRange",value:function fromRange(e){return new ba(e.start,e.end);}}]);return ba;}(oa);function wa(){var _this54=this;this.listenTo(this.root.document.model,"applyOperation",function(e,t){var i=t[0];i.isDocumentOperation&&ka.call(_this54,i);},{priority:"low"});}function ka(e){var t=this.getTransformedByOperation(e),i=oa._createFromRanges(t),n=!i.isEqual(this),o=function(e,t){switch(t.type){case"insert":return e.containsPosition(t.position);case"move":case"remove":case"reinsert":case"merge":return e.containsPosition(t.sourcePosition)||e.start.isEqual(t.sourcePosition)||e.containsPosition(t.targetPosition);case"split":return e.containsPosition(t.splitPosition)||e.containsPosition(t.insertionPosition);}return!1;}(this,e);var r=null;if(n){"$graveyard"==i.root.rootName&&(r="remove"==e.type?e.sourcePosition:e.deletionPosition);var _t102=this.toRange();this.start=i.start,this.end=i.end,this.fire("change:range",_t102,{deletionPosition:r});}else o&&this.fire("change:content",this.toRange(),{deletionPosition:r});}Ke(ba,u);var _a=/*#__PURE__*/function(){function _a(e){_classCallCheck(this,_a);this._selection=new va(e),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this);}_createClass(_a,[{key:"isCollapsed",get:function get(){return this._selection.isCollapsed;}},{key:"anchor",get:function get(){return this._selection.anchor;}},{key:"focus",get:function get(){return this._selection.focus;}},{key:"rangeCount",get:function get(){return this._selection.rangeCount;}},{key:"hasOwnRange",get:function get(){return this._selection.hasOwnRange;}},{key:"isBackward",get:function get(){return this._selection.isBackward;}},{key:"isGravityOverridden",get:function get(){return this._selection.isGravityOverridden;}},{key:"markers",get:function get(){return this._selection.markers;}},{key:"_ranges",get:function get(){return this._selection._ranges;}},{key:"getRanges",value:function getRanges(){return this._selection.getRanges();}},{key:"getFirstPosition",value:function getFirstPosition(){return this._selection.getFirstPosition();}},{key:"getLastPosition",value:function getLastPosition(){return this._selection.getLastPosition();}},{key:"getFirstRange",value:function getFirstRange(){return this._selection.getFirstRange();}},{key:"getLastRange",value:function getLastRange(){return this._selection.getLastRange();}},{key:"getSelectedBlocks",value:function getSelectedBlocks(){return this._selection.getSelectedBlocks();}},{key:"getSelectedElement",value:function getSelectedElement(){return this._selection.getSelectedElement();}},{key:"containsEntireContent",value:function containsEntireContent(e){return this._selection.containsEntireContent(e);}},{key:"destroy",value:function destroy(){this._selection.destroy();}},{key:"getAttributeKeys",value:function getAttributeKeys(){return this._selection.getAttributeKeys();}},{key:"getAttributes",value:function getAttributes(){return this._selection.getAttributes();}},{key:"getAttribute",value:function getAttribute(e){return this._selection.getAttribute(e);}},{key:"hasAttribute",value:function hasAttribute(e){return this._selection.hasAttribute(e);}},{key:"refresh",value:function refresh(){this._selection._updateMarkers(),this._selection._updateAttributes(!1);}},{key:"observeMarkers",value:function observeMarkers(e){this._selection.observeMarkers(e);}},{key:"is",value:function is(e){return"selection"===e||"model:selection"==e||"documentSelection"==e||"model:documentSelection"==e;}},{key:"_setFocus",value:function _setFocus(e,t){this._selection.setFocus(e,t);}},{key:"_setTo",value:function _setTo(e,t,i){this._selection.setTo(e,t,i);}},{key:"_setAttribute",value:function _setAttribute(e,t){this._selection.setAttribute(e,t);}},{key:"_removeAttribute",value:function _removeAttribute(e){this._selection.removeAttribute(e);}},{key:"_getStoredAttributes",value:function _getStoredAttributes(){return this._selection._getStoredAttributes();}},{key:"_overrideGravity",value:function _overrideGravity(){return this._selection.overrideGravity();}},{key:"_restoreGravity",value:function _restoreGravity(e){this._selection.restoreGravity(e);}}],[{key:"_getStoreAttributeKey",value:function _getStoreAttributeKey(e){return"selection:"+e;}},{key:"_isStoreAttributeKey",value:function _isStoreAttributeKey(e){return e.startsWith("selection:");}}]);return _a;}();Ke(_a,u);var va=/*#__PURE__*/function(_ha){_inherits(va,_ha);var _super25=_createSuper(va);function va(e){var _this55;_classCallCheck(this,va);_this55=_super25.call(this),_this55.markers=new Zi({idProperty:"name"}),_this55._model=e.model,_this55._document=e,_this55._attributePriority=new Map(),_this55._selectionRestorePosition=null,_this55._hasChangedRange=!1,_this55._overriddenGravityRegister=new Set(),_this55._observedMarkers=new Set(),_this55.listenTo(_this55._model,"applyOperation",function(e,t){var i=t[0];i.isDocumentOperation&&"marker"!=i.type&&"rename"!=i.type&&"noop"!=i.type&&(0==_this55._ranges.length&&_this55._selectionRestorePosition&&_this55._fixGraveyardSelection(_this55._selectionRestorePosition),_this55._selectionRestorePosition=null,_this55._hasChangedRange&&(_this55._hasChangedRange=!1,_this55.fire("change:range",{directChange:!1})));},{priority:"lowest"}),_this55.on("change:range",function(){var _iterator141=_createForOfIteratorHelper(_this55.getRanges()),_step141;try{for(_iterator141.s();!(_step141=_iterator141.n()).done;){var _e97=_step141.value;if(!_this55._document._validateSelectionRange(_e97))throw new l.a("document-selection-wrong-position",_assertThisInitialized(_this55),{range:_e97});}}catch(err){_iterator141.e(err);}finally{_iterator141.f();}}),_this55.listenTo(_this55._model.markers,"update",function(e,t,i,n){_this55._updateMarker(t,n);}),_this55.listenTo(_this55._document,"change",function(e,t){!function(e,t){var i=e.document.differ;var _iterator142=_createForOfIteratorHelper(i.getChanges()),_step142;try{var _loop2=function _loop2(){var n=_step142.value;if("insert"!=n.type)return"continue";var i=n.position.parent;n.length===i.maxOffset&&e.enqueueChange(t,function(e){var t=Array.from(i.getAttributeKeys()).filter(function(e){return e.startsWith("selection:");});var _iterator143=_createForOfIteratorHelper(t),_step143;try{for(_iterator143.s();!(_step143=_iterator143.n()).done;){var _n62=_step143.value;e.removeAttribute(_n62,i);}}catch(err){_iterator143.e(err);}finally{_iterator143.f();}});};for(_iterator142.s();!(_step142=_iterator142.n()).done;){var _ret=_loop2();if(_ret==="continue")continue;}}catch(err){_iterator142.e(err);}finally{_iterator142.f();}}(_this55._model,t);});return _this55;}_createClass(va,[{key:"isCollapsed",get:function get(){return 0===this._ranges.length?this._document._getDefaultRange().isCollapsed:_get(_getPrototypeOf(va.prototype),"isCollapsed",this);}},{key:"anchor",get:function get(){return _get(_getPrototypeOf(va.prototype),"anchor",this)||this._document._getDefaultRange().start;}},{key:"focus",get:function get(){return _get(_getPrototypeOf(va.prototype),"focus",this)||this._document._getDefaultRange().end;}},{key:"rangeCount",get:function get(){return this._ranges.length?this._ranges.length:1;}},{key:"hasOwnRange",get:function get(){return this._ranges.length>0;}},{key:"isGravityOverridden",get:function get(){return!!this._overriddenGravityRegister.size;}},{key:"destroy",value:function destroy(){for(var _e98=0;_e98<this._ranges.length;_e98++){this._ranges[_e98].detach();}this.stopListening();}},{key:"getRanges",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getRanges(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getRanges$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:if(!this._ranges.length){_context18.next=4;break;}return _context18.delegateYield(_get(_getPrototypeOf(va.prototype),"getRanges",this).call(this),"t0",2);case 2:_context18.next=6;break;case 4:_context18.next=6;return this._document._getDefaultRange();case 6:case"end":return _context18.stop();}}},getRanges,this);})},{key:"getFirstRange",value:function getFirstRange(){return _get(_getPrototypeOf(va.prototype),"getFirstRange",this).call(this)||this._document._getDefaultRange();}},{key:"getLastRange",value:function getLastRange(){return _get(_getPrototypeOf(va.prototype),"getLastRange",this).call(this)||this._document._getDefaultRange();}},{key:"setTo",value:function setTo(e,t,i){_get(_getPrototypeOf(va.prototype),"setTo",this).call(this,e,t,i),this._updateAttributes(!0),this._updateMarkers();}},{key:"setFocus",value:function setFocus(e,t){_get(_getPrototypeOf(va.prototype),"setFocus",this).call(this,e,t),this._updateAttributes(!0),this._updateMarkers();}},{key:"setAttribute",value:function setAttribute(e,t){if(this._setAttribute(e,t)){var _t103=[e];this.fire("change:attribute",{attributeKeys:_t103,directChange:!0});}}},{key:"removeAttribute",value:function removeAttribute(e){if(this._removeAttribute(e)){var _t104=[e];this.fire("change:attribute",{attributeKeys:_t104,directChange:!0});}}},{key:"overrideGravity",value:function overrideGravity(){var e=s();return this._overriddenGravityRegister.add(e),1===this._overriddenGravityRegister.size&&this._updateAttributes(!0),e;}},{key:"restoreGravity",value:function restoreGravity(e){if(!this._overriddenGravityRegister.has(e))throw new l.a("document-selection-gravity-wrong-restore",this,{uid:e});this._overriddenGravityRegister["delete"](e),this.isGravityOverridden||this._updateAttributes(!0);}},{key:"observeMarkers",value:function observeMarkers(e){this._observedMarkers.add(e),this._updateMarkers();}},{key:"_popRange",value:function _popRange(){this._ranges.pop().detach();}},{key:"_pushRange",value:function _pushRange(e){var t=this._prepareRange(e);t&&this._ranges.push(t);}},{key:"_prepareRange",value:function _prepareRange(e){var _this56=this;if(this._checkRange(e),e.root==this._document.graveyard)return;var t=ba.fromRange(e);return t.on("change:range",function(e,i,n){if(_this56._hasChangedRange=!0,t.root==_this56._document.graveyard){_this56._selectionRestorePosition=n.deletionPosition;var _e99=_this56._ranges.indexOf(t);_this56._ranges.splice(_e99,1),t.detach();}}),t;}},{key:"_updateMarkers",value:function _updateMarkers(){if(!this._observedMarkers.size)return;var e=[];var t=!1;var _iterator144=_createForOfIteratorHelper(this._model.markers),_step144;try{for(_iterator144.s();!(_step144=_iterator144.n()).done;){var _t105=_step144.value;var _i115=_t105.name.split(":",1)[0];if(!this._observedMarkers.has(_i115))continue;var _n63=_t105.getRange();var _iterator145=_createForOfIteratorHelper(this.getRanges()),_step145;try{for(_iterator145.s();!(_step145=_iterator145.n()).done;){var _i116=_step145.value;_n63.containsRange(_i116,!_i116.isCollapsed)&&e.push(_t105);}}catch(err){_iterator145.e(err);}finally{_iterator145.f();}}}catch(err){_iterator144.e(err);}finally{_iterator144.f();}var i=Array.from(this.markers);for(var _i111=0,_e100=e;_i111<_e100.length;_i111++){var _i112=_e100[_i111];this.markers.has(_i112)||(this.markers.add(_i112),t=!0);}for(var _i113=0,_Array$from2=Array.from(this.markers);_i113<_Array$from2.length;_i113++){var _i114=_Array$from2[_i113];e.includes(_i114)||(this.markers.remove(_i114),t=!0);}t&&this.fire("change:marker",{oldMarkers:i,directChange:!1});}},{key:"_updateMarker",value:function _updateMarker(e,t){var i=e.name.split(":",1)[0];if(!this._observedMarkers.has(i))return;var n=!1;var o=Array.from(this.markers),r=this.markers.has(e);if(t){var _i117=!1;var _iterator146=_createForOfIteratorHelper(this.getRanges()),_step146;try{for(_iterator146.s();!(_step146=_iterator146.n()).done;){var _e101=_step146.value;if(t.containsRange(_e101,!_e101.isCollapsed)){_i117=!0;break;}}}catch(err){_iterator146.e(err);}finally{_iterator146.f();}_i117&&!r?(this.markers.add(e),n=!0):!_i117&&r&&(this.markers.remove(e),n=!0);}else r&&(this.markers.remove(e),n=!0);n&&this.fire("change:marker",{oldMarkers:o,directChange:!1});}},{key:"_updateAttributes",value:function _updateAttributes(e){var t=gn(this._getSurroundingAttributes()),i=gn(this.getAttributes());if(e)this._attributePriority=new Map(),this._attrs=new Map();else{var _iterator147=_createForOfIteratorHelper(this._attributePriority),_step147;try{for(_iterator147.s();!(_step147=_iterator147.n()).done;){var _step147$value=_slicedToArray(_step147.value,2),_e102=_step147$value[0],_t106=_step147$value[1];"low"==_t106&&(this._attrs["delete"](_e102),this._attributePriority["delete"](_e102));}}catch(err){_iterator147.e(err);}finally{_iterator147.f();}}this._setAttributesTo(t);var n=[];var _iterator148=_createForOfIteratorHelper(this.getAttributes()),_step148;try{for(_iterator148.s();!(_step148=_iterator148.n()).done;){var _step148$value=_slicedToArray(_step148.value,2),_e103=_step148$value[0],_t107=_step148$value[1];i.has(_e103)&&i.get(_e103)===_t107||n.push(_e103);}}catch(err){_iterator148.e(err);}finally{_iterator148.f();}var _iterator149=_createForOfIteratorHelper(i),_step149;try{for(_iterator149.s();!(_step149=_iterator149.n()).done;){var _step149$value=_slicedToArray(_step149.value,1),_e104=_step149$value[0];this.hasAttribute(_e104)||n.push(_e104);}}catch(err){_iterator149.e(err);}finally{_iterator149.f();}n.length>0&&this.fire("change:attribute",{attributeKeys:n,directChange:!1});}},{key:"_setAttribute",value:function _setAttribute(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!0;var n=i?"normal":"low";if("low"==n&&"normal"==this._attributePriority.get(e))return!1;return _get(_getPrototypeOf(va.prototype),"getAttribute",this).call(this,e)!==t&&(this._attrs.set(e,t),this._attributePriority.set(e,n),!0);}},{key:"_removeAttribute",value:function _removeAttribute(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!0;var i=t?"normal":"low";return("low"!=i||"normal"!=this._attributePriority.get(e))&&(this._attributePriority.set(e,i),!!_get(_getPrototypeOf(va.prototype),"hasAttribute",this).call(this,e)&&(this._attrs["delete"](e),!0));}},{key:"_setAttributesTo",value:function _setAttributesTo(e){var t=new Set();var _iterator150=_createForOfIteratorHelper(this.getAttributes()),_step150;try{for(_iterator150.s();!(_step150=_iterator150.n()).done;){var _step150$value=_slicedToArray(_step150.value,2),_t108=_step150$value[0],_i118=_step150$value[1];e.get(_t108)!==_i118&&this._removeAttribute(_t108,!1);}}catch(err){_iterator150.e(err);}finally{_iterator150.f();}var _iterator151=_createForOfIteratorHelper(e),_step151;try{for(_iterator151.s();!(_step151=_iterator151.n()).done;){var _step151$value=_slicedToArray(_step151.value,2),_i119=_step151$value[0],_n64=_step151$value[1];this._setAttribute(_i119,_n64,!1)&&t.add(_i119);}}catch(err){_iterator151.e(err);}finally{_iterator151.f();}return t;}},{key:"_getStoredAttributes",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function _getStoredAttributes(){var e,_iterator152,_step152,_t109,_i120;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _getStoredAttributes$(_context19){while(1){switch(_context19.prev=_context19.next){case 0:e=this.getFirstPosition().parent;if(!(this.isCollapsed&&e.isEmpty)){_context19.next=21;break;}_iterator152=_createForOfIteratorHelper(e.getAttributeKeys());_context19.prev=3;_iterator152.s();case 5:if((_step152=_iterator152.n()).done){_context19.next=13;break;}_t109=_step152.value;if(!_t109.startsWith("selection:")){_context19.next=11;break;}_i120=_t109.substr("selection:".length);_context19.next=11;return[_i120,e.getAttribute(_t109)];case 11:_context19.next=5;break;case 13:_context19.next=18;break;case 15:_context19.prev=15;_context19.t0=_context19["catch"](3);_iterator152.e(_context19.t0);case 18:_context19.prev=18;_iterator152.f();return _context19.finish(18);case 21:case"end":return _context19.stop();}}},_getStoredAttributes,this,[[3,15,18,21]]);})},{key:"_getSurroundingAttributes",value:function _getSurroundingAttributes(){var e=this.getFirstPosition(),t=this._model.schema;var i=null;if(this.isCollapsed){var _n65=e.textNode?e.textNode:e.nodeBefore,_o38=e.textNode?e.textNode:e.nodeAfter;if(this.isGravityOverridden||(i=ya(_n65)),i||(i=ya(_o38)),!this.isGravityOverridden&&!i){var _e105=_n65;for(;_e105&&!t.isInline(_e105)&&!i;){_e105=_e105.previousSibling,i=ya(_e105);}}if(!i){var _e106=_o38;for(;_e106&&!t.isInline(_e106)&&!i;){_e106=_e106.nextSibling,i=ya(_e106);}}i||(i=this._getStoredAttributes());}else{var _e107=this.getFirstRange();var _iterator153=_createForOfIteratorHelper(_e107),_step153;try{for(_iterator153.s();!(_step153=_iterator153.n()).done;){var _n66=_step153.value;if(_n66.item.is("element")&&t.isObject(_n66.item))break;if("text"==_n66.type){i=_n66.item.getAttributes();break;}}}catch(err){_iterator153.e(err);}finally{_iterator153.f();}}return i;}},{key:"_fixGraveyardSelection",value:function _fixGraveyardSelection(e){var t=this._model.schema.getNearestSelectionRange(e);t&&this._pushRange(t);}}]);return va;}(ha);function ya(e){return e instanceof Ks||e instanceof Gs?e.getAttributes():null;}var xa=/*#__PURE__*/function(){function xa(e){_classCallCheck(this,xa);this._dispatchers=e;}_createClass(xa,[{key:"add",value:function add(e){var _iterator154=_createForOfIteratorHelper(this._dispatchers),_step154;try{for(_iterator154.s();!(_step154=_iterator154.n()).done;){var _t110=_step154.value;e(_t110);}}catch(err){_iterator154.e(err);}finally{_iterator154.f();}return this;}}]);return xa;}();var Aa=function Aa(e){return qi(e,5);};var Ca=/*#__PURE__*/function(_xa){_inherits(Ca,_xa);var _super26=_createSuper(Ca);function Ca(){_classCallCheck(this,Ca);return _super26.apply(this,arguments);}_createClass(Ca,[{key:"elementToElement",value:function elementToElement(e){return this.add(function(e){return(e=Aa(e)).view=Ia(e.view,"container"),function(t){var i;if(t.on("insert:"+e.model,(i=e.view,function(e,t,n){var o=i(t.item,n);if(!o)return;if(!n.consumable.consume(t.item,"insert"))return;var r=n.mapper.toViewPosition(t.range.start);n.mapper.bindElements(t.item,o),n.writer.insert(r,o);}),{priority:e.converterPriority||"normal"}),e.triggerBy){if(e.triggerBy.attributes){var _iterator155=_createForOfIteratorHelper(e.triggerBy.attributes),_step155;try{for(_iterator155.s();!(_step155=_iterator155.n()).done;){var _i121=_step155.value;t._mapReconversionTriggerEvent(e.model,"attribute:".concat(_i121,":").concat(e.model));}}catch(err){_iterator155.e(err);}finally{_iterator155.f();}}if(e.triggerBy.children){var _iterator156=_createForOfIteratorHelper(e.triggerBy.children),_step156;try{for(_iterator156.s();!(_step156=_iterator156.n()).done;){var _i122=_step156.value;t._mapReconversionTriggerEvent(e.model,"insert:"+_i122),t._mapReconversionTriggerEvent(e.model,"remove:"+_i122);}}catch(err){_iterator156.e(err);}finally{_iterator156.f();}}}};}(e));}},{key:"attributeToElement",value:function attributeToElement(e){return this.add(function(e){e=Aa(e);var t="attribute:"+(e.model.key?e.model.key:e.model);e.model.name&&(t+=":"+e.model.name);if(e.model.values){var _iterator157=_createForOfIteratorHelper(e.model.values),_step157;try{for(_iterator157.s();!(_step157=_iterator157.n()).done;){var _t111=_step157.value;e.view[_t111]=Ia(e.view[_t111],"attribute");}}catch(err){_iterator157.e(err);}finally{_iterator157.f();}}else e.view=Ia(e.view,"attribute");var i=Sa(e);return function(n){n.on(t,function(e){return function(t,i,n){var o=e(i.attributeOldValue,n),r=e(i.attributeNewValue,n);if(!o&&!r)return;if(!n.consumable.consume(i.item,t.name))return;var s=n.writer,a=s.document.selection;if(i.item instanceof ha||i.item instanceof _a)s.wrap(a.getFirstRange(),r);else{var _e108=n.mapper.toViewRange(i.range);null!==i.attributeOldValue&&o&&(_e108=s.unwrap(_e108,o)),null!==i.attributeNewValue&&r&&s.wrap(_e108,r);}};}(i),{priority:e.converterPriority||"normal"});};}(e));}},{key:"attributeToAttribute",value:function attributeToAttribute(e){return this.add(function(e){e=Aa(e);var t="attribute:"+(e.model.key?e.model.key:e.model);e.model.name&&(t+=":"+e.model.name);if(e.model.values){var _iterator158=_createForOfIteratorHelper(e.model.values),_step158;try{for(_iterator158.s();!(_step158=_iterator158.n()).done;){var _t112=_step158.value;e.view[_t112]=Pa(e.view[_t112]);}}catch(err){_iterator158.e(err);}finally{_iterator158.f();}}else e.view=Pa(e.view);var i=Sa(e);return function(n){var o;n.on(t,(o=i,function(e,t,i){var n=o(t.attributeOldValue,i),r=o(t.attributeNewValue,i);if(!n&&!r)return;if(!i.consumable.consume(t.item,e.name))return;var s=i.mapper.toViewElement(t.item),a=i.writer;if(!s)throw new l.a("conversion-attribute-to-attribute-on-text",[t,i]);if(null!==t.attributeOldValue&&n)if("class"==n.key){var _e109=en(n.value);var _iterator159=_createForOfIteratorHelper(_e109),_step159;try{for(_iterator159.s();!(_step159=_iterator159.n()).done;){var _t113=_step159.value;a.removeClass(_t113,s);}}catch(err){_iterator159.e(err);}finally{_iterator159.f();}}else if("style"==n.key){var _e110=Object.keys(n.value);for(var _i123=0,_e111=_e110;_i123<_e111.length;_i123++){var _t114=_e111[_i123];a.removeStyle(_t114,s);}}else a.removeAttribute(n.key,s);if(null!==t.attributeNewValue&&r)if("class"==r.key){var _e112=en(r.value);var _iterator160=_createForOfIteratorHelper(_e112),_step160;try{for(_iterator160.s();!(_step160=_iterator160.n()).done;){var _t115=_step160.value;a.addClass(_t115,s);}}catch(err){_iterator160.e(err);}finally{_iterator160.f();}}else if("style"==r.key){var _e113=Object.keys(r.value);for(var _i124=0,_e114=_e113;_i124<_e114.length;_i124++){var _t116=_e114[_i124];a.setStyle(_t116,r.value[_t116],s);}}else a.setAttribute(r.key,r.value,s);}),{priority:e.converterPriority||"normal"});};}(e));}},{key:"markerToElement",value:function markerToElement(e){return this.add(function(e){return(e=Aa(e)).view=Ia(e.view,"ui"),function(t){var i;t.on("addMarker:"+e.model,(i=e.view,function(e,t,n){t.isOpening=!0;var o=i(t,n);t.isOpening=!1;var r=i(t,n);if(!o||!r)return;var s=t.markerRange;if(s.isCollapsed&&!n.consumable.consume(s,e.name))return;var _iterator161=_createForOfIteratorHelper(s),_step161;try{for(_iterator161.s();!(_step161=_iterator161.n()).done;){var _t117=_step161.value;if(!n.consumable.consume(_t117.item,e.name))return;}}catch(err){_iterator161.e(err);}finally{_iterator161.f();}var a=n.mapper,l=n.writer;l.insert(a.toViewPosition(s.start),o),n.mapper.bindElementToMarker(o,t.markerName),s.isCollapsed||(l.insert(a.toViewPosition(s.end),r),n.mapper.bindElementToMarker(r,t.markerName)),e.stop();}),{priority:e.converterPriority||"normal"}),t.on("removeMarker:"+e.model,(e.view,function(e,t,i){var n=i.mapper.markerNameToElements(t.markerName);if(n){var _iterator162=_createForOfIteratorHelper(n),_step162;try{for(_iterator162.s();!(_step162=_iterator162.n()).done;){var _e115=_step162.value;i.mapper.unbindElementFromMarkerName(_e115,t.markerName),i.writer.clear(i.writer.createRangeOn(_e115),_e115);}}catch(err){_iterator162.e(err);}finally{_iterator162.f();}i.writer.clearClonedElementsGroup(t.markerName),e.stop();}}),{priority:e.converterPriority||"normal"});};}(e));}},{key:"markerToHighlight",value:function markerToHighlight(e){return this.add(function(e){return function(t){var i;t.on("addMarker:"+e.model,(i=e.view,function(e,t,n){if(!t.item)return;if(!(t.item instanceof ha||t.item instanceof _a||t.item.is("$textProxy")))return;var o=Ma(i,t,n);if(!o)return;if(!n.consumable.consume(t.item,e.name))return;var r=n.writer,s=Ta(r,o),a=r.document.selection;if(t.item instanceof ha||t.item instanceof _a)r.wrap(a.getFirstRange(),s,a);else{var _e116=n.mapper.toViewRange(t.range),_i125=r.wrap(_e116,s);var _iterator163=_createForOfIteratorHelper(_i125.getItems()),_step163;try{for(_iterator163.s();!(_step163=_iterator163.n()).done;){var _e117=_step163.value;if(_e117.is("attributeElement")&&_e117.isSimilar(s)){n.mapper.bindElementToMarker(_e117,t.markerName);break;}}}catch(err){_iterator163.e(err);}finally{_iterator163.f();}}}),{priority:e.converterPriority||"normal"}),t.on("addMarker:"+e.model,function(e){return function(t,i,n){if(!i.item)return;if(!(i.item instanceof Js))return;var o=Ma(e,i,n);if(!o)return;if(!n.consumable.test(i.item,t.name))return;var r=n.mapper.toViewElement(i.item);if(r&&r.getCustomProperty("addHighlight")){n.consumable.consume(i.item,t.name);var _iterator164=_createForOfIteratorHelper(oa._createIn(i.item)),_step164;try{for(_iterator164.s();!(_step164=_iterator164.n()).done;){var _e118=_step164.value;n.consumable.consume(_e118.item,t.name);}}catch(err){_iterator164.e(err);}finally{_iterator164.f();}r.getCustomProperty("addHighlight")(r,o,n.writer),n.mapper.bindElementToMarker(r,i.markerName);}};}(e.view),{priority:e.converterPriority||"normal"}),t.on("removeMarker:"+e.model,function(e){return function(t,i,n){if(i.markerRange.isCollapsed)return;var o=Ma(e,i,n);if(!o)return;var r=Ta(n.writer,o),s=n.mapper.markerNameToElements(i.markerName);if(s){var _iterator165=_createForOfIteratorHelper(s),_step165;try{for(_iterator165.s();!(_step165=_iterator165.n()).done;){var _e119=_step165.value;n.mapper.unbindElementFromMarkerName(_e119,i.markerName),_e119.is("attributeElement")?n.writer.unwrap(n.writer.createRangeOn(_e119),r):_e119.getCustomProperty("removeHighlight")(_e119,o.id,n.writer);}}catch(err){_iterator165.e(err);}finally{_iterator165.f();}n.writer.clearClonedElementsGroup(i.markerName),t.stop();}};}(e.view),{priority:e.converterPriority||"normal"});};}(e));}},{key:"markerToData",value:function markerToData(e){return this.add(function(e){var t=(e=Aa(e)).model;e.view||(e.view=function(i){return{group:t,name:i.substr(e.model.length+1)};});return function(i){var n;i.on("addMarker:"+t,(n=e.view,function(e,t,i){var o=n(t.markerName,i);if(!o)return;var r=t.markerRange;i.consumable.consume(r,e.name)&&(Ea(r,!1,i,t,o),Ea(r,!0,i,t,o),e.stop());}),{priority:e.converterPriority||"normal"}),i.on("removeMarker:"+t,function(e){return function(t,i,n){var o=e(i.markerName,n);if(!o)return;var r=n.mapper.markerNameToElements(i.markerName);if(r){var _iterator166=_createForOfIteratorHelper(r),_step166;try{for(_iterator166.s();!(_step166=_iterator166.n()).done;){var _e120=_step166.value;n.mapper.unbindElementFromMarkerName(_e120,i.markerName),_e120.is("containerElement")?(s("data-".concat(o.group,"-start-before"),_e120),s("data-".concat(o.group,"-start-after"),_e120),s("data-".concat(o.group,"-end-before"),_e120),s("data-".concat(o.group,"-end-after"),_e120)):n.writer.clear(n.writer.createRangeOn(_e120),_e120);}}catch(err){_iterator166.e(err);}finally{_iterator166.f();}n.writer.clearClonedElementsGroup(i.markerName),t.stop();}function s(e,t){if(t.hasAttribute(e)){var _i126=new Set(t.getAttribute(e).split(","));_i126["delete"](o.name),0==_i126.size?n.writer.removeAttribute(e,t):n.writer.setAttribute(e,Array.from(_i126).join(","),t);}}};}(e.view),{priority:e.converterPriority||"normal"});};}(e));}}]);return Ca;}(xa);function Ta(e,t){var i=e.createAttributeElement("span",t.attributes);return t.classes&&i._addClass(t.classes),"number"==typeof t.priority&&(i._priority=t.priority),i._id=t.id,i;}function Ea(e,t,i,n,o){var r=t?e.start:e.end,s=r.nodeAfter&&r.nodeAfter.is("element")?r.nodeAfter:null,a=r.nodeBefore&&r.nodeBefore.is("element")?r.nodeBefore:null;if(s||a){var _e121,_r19;t&&s||!t&&!a?(_e121=s,_r19=!0):(_e121=a,_r19=!1);var _l3=i.mapper.toViewElement(_e121);if(_l3)return void function(e,t,i,n,o,r){var s="data-".concat(r.group,"-").concat(t?"start":"end","-").concat(i?"before":"after"),a=e.hasAttribute(s)?e.getAttribute(s).split(","):[];a.unshift(r.name),n.writer.setAttribute(s,a.join(","),e),n.mapper.bindElementToMarker(e,o.markerName);}(_l3,t,_r19,i,n,o);}!function(e,t,i,n,o){var r="".concat(o.group,"-").concat(t?"start":"end"),s=o.name?{name:o.name}:null,a=i.writer.createUIElement(r,s);i.writer.insert(e,a),i.mapper.bindElementToMarker(a,n.markerName);}(i.mapper.toViewPosition(r),t,i,n,o);}function Ia(e,t){return"function"==typeof e?e:function(i,n){return function(e,t,i){"string"==typeof e&&(e={name:e});var n;var o=t.writer,r=Object.assign({},e.attributes);if("container"==i)n=o.createContainerElement(e.name,r);else if("attribute"==i){var _t118={priority:e.priority||xo.DEFAULT_PRIORITY};n=o.createAttributeElement(e.name,r,_t118);}else n=o.createUIElement(e.name,r);if(e.styles){var _t119=Object.keys(e.styles);for(var _i127=0,_t120=_t119;_i127<_t120.length;_i127++){var _i128=_t120[_i127];o.setStyle(_i128,e.styles[_i128],n);}}if(e.classes){var _t121=e.classes;if("string"==typeof _t121)o.addClass(_t121,n);else{var _iterator167=_createForOfIteratorHelper(_t121),_step167;try{for(_iterator167.s();!(_step167=_iterator167.n()).done;){var _e122=_step167.value;o.addClass(_e122,n);}}catch(err){_iterator167.e(err);}finally{_iterator167.f();}}}return n;}(e,n,t);};}function Sa(e){return e.model.values?function(t,i){var n=e.view[t];return n?n(t,i):null;}:e.view;}function Pa(e){return"string"==typeof e?function(t){return{key:e,value:t};}:"object"==_typeof(e)?e.value?function(){return e;}:function(t){return{key:e.key,value:t};}:e;}function Ma(e,t,i){var n="function"==typeof e?e(t,i):e;return n?(n.priority||(n.priority=10),n.id||(n.id=t.markerName),n):null;}function Na(e){var _e$model=e.model,t=_e$model.schema,i=_e$model.document;var _iterator168=_createForOfIteratorHelper(i.getRootNames()),_step168;try{for(_iterator168.s();!(_step168=_iterator168.n()).done;){var _n67=_step168.value;var _o39=i.getRoot(_n67);if(_o39.isEmpty&&!t.checkChild(_o39,"$text")&&t.checkChild(_o39,"paragraph"))return e.insertElement("paragraph",_o39),!0;}}catch(err){_iterator168.e(err);}finally{_iterator168.f();}return!1;}function Ra(e,t,i){var n=i.createContext(e);return!!i.checkChild(n,"paragraph")&&!!i.checkChild(n.push("paragraph"),t);}function za(e,t){var i=t.createElement("paragraph");return t.insert(i,e),t.createPositionAt(i,0);}var Oa=/*#__PURE__*/function(_xa2){_inherits(Oa,_xa2);var _super27=_createSuper(Oa);function Oa(){_classCallCheck(this,Oa);return _super27.apply(this,arguments);}_createClass(Oa,[{key:"elementToElement",value:function elementToElement(e){return this.add(Da(e));}},{key:"elementToAttribute",value:function elementToAttribute(e){return this.add(function(e){Ba(e=Aa(e));var t=ja(e,!1),i=La(e.view),n=i?"element:"+i:"element";return function(i){i.on(n,t,{priority:e.converterPriority||"low"});};}(e));}},{key:"attributeToAttribute",value:function attributeToAttribute(e){return this.add(function(e){e=Aa(e);var t=null;("string"==typeof e.view||e.view.key)&&(t=function(e){"string"==typeof e.view&&(e.view={key:e.view});var t=e.view.key;var i;if("class"==t||"style"==t){i=_defineProperty({},"class"==t?"classes":"styles",e.view.value);}else{var _n68=void 0===e.view.value?/[\s\S]*/:e.view.value;i={attributes:_defineProperty({},t,_n68)};}e.view.name&&(i.name=e.view.name);return e.view=i,t;}(e));Ba(e,t);var i=ja(e,!0);return function(t){t.on("element",i,{priority:e.converterPriority||"low"});};}(e));}},{key:"elementToMarker",value:function elementToMarker(e){return this.add(function(e){return function(e){var t=e.model;e.model=function(e,i){var n="string"==typeof t?t:t(e,i);return i.writer.createElement("$marker",{"data-name":n});};}(e=Aa(e)),Da(e);}(e));}},{key:"dataToMarker",value:function dataToMarker(e){return this.add(function(e){(e=Aa(e)).model||(e.model=function(t){return t?e.view+":"+t:e.view;});var t=Va(Fa(e,"start")),i=Va(Fa(e,"end"));return function(n){n.on("element:"+e.view+"-start",t,{priority:e.converterPriority||"normal"}),n.on("element:"+e.view+"-end",i,{priority:e.converterPriority||"normal"});var o=a.get("low"),r=a.get("highest"),s=a.get(e.converterPriority)/r;n.on("element",function(e){return function(t,i,n){var o="data-"+e.view;function r(t,o){var _iterator169=_createForOfIteratorHelper(o),_step169;try{for(_iterator169.s();!(_step169=_iterator169.n()).done;){var _r20=_step169.value;var _o40=e.model(_r20,n),_s14=n.writer.createElement("$marker",{"data-name":_o40});n.writer.insert(_s14,t),i.modelCursor.isEqual(t)?i.modelCursor=i.modelCursor.getShiftedBy(1):i.modelCursor=i.modelCursor._getTransformedByInsertion(t,1),i.modelRange=i.modelRange._getTransformedByInsertion(t,1)[0];}}catch(err){_iterator169.e(err);}finally{_iterator169.f();}}(n.consumable.test(i.viewItem,{attributes:o+"-end-after"})||n.consumable.test(i.viewItem,{attributes:o+"-start-after"})||n.consumable.test(i.viewItem,{attributes:o+"-end-before"})||n.consumable.test(i.viewItem,{attributes:o+"-start-before"}))&&(i.modelRange||Object.assign(i,n.convertChildren(i.viewItem,i.modelCursor)),n.consumable.consume(i.viewItem,{attributes:o+"-end-after"})&&r(i.modelRange.end,i.viewItem.getAttribute(o+"-end-after").split(",")),n.consumable.consume(i.viewItem,{attributes:o+"-start-after"})&&r(i.modelRange.end,i.viewItem.getAttribute(o+"-start-after").split(",")),n.consumable.consume(i.viewItem,{attributes:o+"-end-before"})&&r(i.modelRange.start,i.viewItem.getAttribute(o+"-end-before").split(",")),n.consumable.consume(i.viewItem,{attributes:o+"-start-before"})&&r(i.modelRange.start,i.viewItem.getAttribute(o+"-start-before").split(",")));};}(e),{priority:o+s});};}(e));}}]);return Oa;}(xa);function Da(e){var t=Va(e=Aa(e)),i=La(e.view),n=i?"element:"+i:"element";return function(i){i.on(n,t,{priority:e.converterPriority||"normal"});};}function La(e){return"string"==typeof e?e:"object"==_typeof(e)&&"string"==typeof e.name?e.name:null;}function Va(e){var t=new mn(e.view);return function(i,n,o){var r=t.match(n.viewItem);if(!r)return;var s=r.match;if(s.name=!0,!o.consumable.test(n.viewItem,s))return;var a=function(e,t,i){return e instanceof Function?e(t,i):i.writer.createElement(e);}(e.model,n.viewItem,o);a&&o.safeInsert(a,n.modelCursor)&&(o.consumable.consume(n.viewItem,s),o.convertChildren(n.viewItem,a),o.updateConversionResult(a,n));};}function Ba(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var i=null===t||function(e){return e.getAttribute(t);},n="object"!=_typeof(e.model)?e.model:e.model.key,o="object"!=_typeof(e.model)||void 0===e.model.value?i:e.model.value;e.model={key:n,value:o};}function ja(e,t){var i=new mn(e.view);return function(n,o,r){var s=i.match(o.viewItem);if(!s)return;if(!function(e,t){var i="function"==typeof e?e(t):e;if("object"==_typeof(i)&&!La(i))return!1;return!i.classes&&!i.attributes&&!i.styles;}(e.view,o.viewItem)?delete s.match.name:s.match.name=!0,!r.consumable.test(o.viewItem,s.match))return;var a=e.model.key,l="function"==typeof e.model.value?e.model.value(o.viewItem,r):e.model.value;if(null===l)return;o.modelRange||Object.assign(o,r.convertChildren(o.viewItem,o.modelCursor));(function(e,t,i,n){var o=!1;for(var _i130=0,_Array$from3=Array.from(e.getItems({shallow:i}));_i130<_Array$from3.length;_i130++){var _r21=_Array$from3[_i130];n.schema.checkAttribute(_r21,t.key)&&(o=!0,_r21.hasAttribute(t.key)||n.writer.setAttribute(t.key,t.value,_r21));}return o;})(o.modelRange,{key:a,value:l},t,r)&&r.consumable.consume(o.viewItem,s.match);};}function Fa(e,t){var i={};return i.view=e.view+"-"+t,i.model=function(t,i){var n=t.getAttribute("name"),o=e.model(n,i);return i.writer.createElement("$marker",{"data-name":o});},i;}var Ha=/*#__PURE__*/function(){function Ha(e,t){var _this57=this;_classCallCheck(this,Ha);this.model=e,this.view=new $s(t),this.mapper=new ra(),this.downcastDispatcher=new la({mapper:this.mapper,schema:e.schema});var i=this.model.document,n=i.selection,o=this.model.markers;this.listenTo(this.model,"_beforeChanges",function(){_this57.view._disableRendering(!0);},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",function(){_this57.view._disableRendering(!1);},{priority:"lowest"}),this.listenTo(i,"change",function(){_this57.view.change(function(e){_this57.downcastDispatcher.convertChanges(i.differ,o,e),_this57.downcastDispatcher.convertSelection(n,o,e);});},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",function(e,t){return function(i,n){var o=n.newSelection,r=[];var _iterator170=_createForOfIteratorHelper(o.getRanges()),_step170;try{for(_iterator170.s();!(_step170=_iterator170.n()).done;){var _e123=_step170.value;r.push(t.toModelRange(_e123));}}catch(err){_iterator170.e(err);}finally{_iterator170.f();}var s=e.createSelection(r,{backward:o.isBackward});s.isEqual(e.document.selection)||e.change(function(e){e.setSelection(s);});};}(this.model,this.mapper)),this.downcastDispatcher.on("insert:$text",function(e,t,i){if(!i.consumable.consume(t.item,"insert"))return;var n=i.writer,o=i.mapper.toViewPosition(t.range.start),r=n.createText(t.item.data);n.insert(o,r);},{priority:"lowest"}),this.downcastDispatcher.on("remove",function(e,t,i){var n=i.mapper.toViewPosition(t.position),o=t.position.getShiftedBy(t.length),r=i.mapper.toViewPosition(o,{isPhantom:!0}),s=i.writer.createRange(n,r),a=i.writer.remove(s.getTrimmed());var _iterator171=_createForOfIteratorHelper(i.writer.createRangeIn(a).getItems()),_step171;try{for(_iterator171.s();!(_step171=_iterator171.n()).done;){var _e124=_step171.value;i.mapper.unbindViewElement(_e124);}}catch(err){_iterator171.e(err);}finally{_iterator171.f();}},{priority:"low"}),this.downcastDispatcher.on("selection",function(e,t,i){var n=i.writer,o=n.document.selection;var _iterator172=_createForOfIteratorHelper(o.getRanges()),_step172;try{for(_iterator172.s();!(_step172=_iterator172.n()).done;){var _e125=_step172.value;_e125.isCollapsed&&_e125.end.parent.isAttached()&&i.writer.mergeAttributes(_e125.start);}}catch(err){_iterator172.e(err);}finally{_iterator172.f();}n.setSelection(null);},{priority:"high"}),this.downcastDispatcher.on("selection",function(e,t,i){var n=t.selection;if(n.isCollapsed)return;if(!i.consumable.consume(n,"selection"))return;var o=[];var _iterator173=_createForOfIteratorHelper(n.getRanges()),_step173;try{for(_iterator173.s();!(_step173=_iterator173.n()).done;){var _e126=_step173.value;var _t122=i.mapper.toViewRange(_e126);o.push(_t122);}}catch(err){_iterator173.e(err);}finally{_iterator173.f();}i.writer.setSelection(o,{backward:n.isBackward});},{priority:"low"}),this.downcastDispatcher.on("selection",function(e,t,i){var n=t.selection;if(!n.isCollapsed)return;if(!i.consumable.consume(n,"selection"))return;var o=i.writer,r=n.getFirstPosition(),s=i.mapper.toViewPosition(r),a=o.breakAttributes(s);o.setSelection(a);},{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(function(e){if("$graveyard"==e.rootName)return null;var t=new so(_this57.view.document,e.name);return t.rootName=e.rootName,_this57.mapper.bindElements(e,t),t;});}_createClass(Ha,[{key:"destroy",value:function destroy(){this.view.destroy(),this.stopListening();}}]);return Ha;}();Ke(Ha,Ue);var Ua=/*#__PURE__*/function(_Symbol$iterator9){function Ua(){_classCallCheck(this,Ua);this._commands=new Map();}_createClass(Ua,[{key:"add",value:function add(e,t){this._commands.set(e,t);}},{key:"get",value:function get(e){return this._commands.get(e);}},{key:"execute",value:function execute(e){var i=this.get(e);if(!i)throw new l.a("commandcollection-command-not-found",this,{commandName:e});for(var _len19=arguments.length,t=new Array(_len19>1?_len19-1:0),_key19=1;_key19<_len19;_key19++){t[_key19-1]=arguments[_key19];}return i.execute.apply(i,t);}},{key:"names",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function names(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function names$(_context20){while(1){switch(_context20.prev=_context20.next){case 0:return _context20.delegateYield(this._commands.keys(),"t0",1);case 1:case"end":return _context20.stop();}}},names,this);})},{key:"commands",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function commands(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function commands$(_context21){while(1){switch(_context21.prev=_context21.next){case 0:return _context21.delegateYield(this._commands.values(),"t0",1);case 1:case"end":return _context21.stop();}}},commands,this);})},{key:_Symbol$iterator9,value:function value(){return this._commands[Symbol.iterator]();}},{key:"destroy",value:function destroy(){var _iterator174=_createForOfIteratorHelper(this.commands()),_step174;try{for(_iterator174.s();!(_step174=_iterator174.n()).done;){var _e127=_step174.value;_e127.destroy();}}catch(err){_iterator174.e(err);}finally{_iterator174.f();}}}]);return Ua;}(Symbol.iterator);var Wa=/*#__PURE__*/function(){function Wa(){_classCallCheck(this,Wa);this._consumables=new Map();}_createClass(Wa,[{key:"add",value:function add(e,t){var i;e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):(this._consumables.has(e)?i=this._consumables.get(e):(i=new qa(e),this._consumables.set(e,i)),i.add(t));}},{key:"test",value:function test(e,t){var i=this._consumables.get(e);return void 0===i?null:e.is("$text")||e.is("documentFragment")?i:i.test(t);}},{key:"consume",value:function consume(e,t){return!!this.test(e,t)&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!1):this._consumables.get(e).consume(t),!0);}},{key:"revert",value:function revert(e,t){var i=this._consumables.get(e);void 0!==i&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):i.revert(t));}}],[{key:"consumablesFromElement",value:function consumablesFromElement(e){var t={element:e,name:!0,attributes:[],classes:[],styles:[]},i=e.getAttributeKeys();var _iterator175=_createForOfIteratorHelper(i),_step175;try{for(_iterator175.s();!(_step175=_iterator175.n()).done;){var _e128=_step175.value;"style"!=_e128&&"class"!=_e128&&t.attributes.push(_e128);}}catch(err){_iterator175.e(err);}finally{_iterator175.f();}var n=e.getClassNames();var _iterator176=_createForOfIteratorHelper(n),_step176;try{for(_iterator176.s();!(_step176=_iterator176.n()).done;){var _e129=_step176.value;t.classes.push(_e129);}}catch(err){_iterator176.e(err);}finally{_iterator176.f();}var o=e.getStyleNames();var _iterator177=_createForOfIteratorHelper(o),_step177;try{for(_iterator177.s();!(_step177=_iterator177.n()).done;){var _e130=_step177.value;t.styles.push(_e130);}}catch(err){_iterator177.e(err);}finally{_iterator177.f();}return t;}},{key:"createFrom",value:function createFrom(e,t){if(t||(t=new Wa(e)),e.is("$text"))return t.add(e),t;e.is("element")&&t.add(e,Wa.consumablesFromElement(e)),e.is("documentFragment")&&t.add(e);var _iterator178=_createForOfIteratorHelper(e.getChildren()),_step178;try{for(_iterator178.s();!(_step178=_iterator178.n()).done;){var _i131=_step178.value;t=Wa.createFrom(_i131,t);}}catch(err){_iterator178.e(err);}finally{_iterator178.f();}return t;}}]);return Wa;}();var qa=/*#__PURE__*/function(){function qa(e){_classCallCheck(this,qa);this.element=e,this._canConsumeName=null,this._consumables={attributes:new Map(),styles:new Map(),classes:new Map()};}_createClass(qa,[{key:"add",value:function add(e){e.name&&(this._canConsumeName=!0);for(var _t123 in this._consumables){_t123 in e&&this._add(_t123,e[_t123]);}}},{key:"test",value:function test(e){if(e.name&&!this._canConsumeName)return this._canConsumeName;for(var _t124 in this._consumables){if(_t124 in e){var _i132=this._test(_t124,e[_t124]);if(!0!==_i132)return _i132;}}return!0;}},{key:"consume",value:function consume(e){e.name&&(this._canConsumeName=!1);for(var _t125 in this._consumables){_t125 in e&&this._consume(_t125,e[_t125]);}}},{key:"revert",value:function revert(e){e.name&&(this._canConsumeName=!0);for(var _t126 in this._consumables){_t126 in e&&this._revert(_t126,e[_t126]);}}},{key:"_add",value:function _add(e,t){var i=_e(t)?t:[t],n=this._consumables[e];var _iterator179=_createForOfIteratorHelper(i),_step179;try{for(_iterator179.s();!(_step179=_iterator179.n()).done;){var _t127=_step179.value;if("attributes"===e&&("class"===_t127||"style"===_t127))throw new l.a("viewconsumable-invalid-attribute",this);if(n.set(_t127,!0),"styles"===e){var _iterator180=_createForOfIteratorHelper(this.element.document.stylesProcessor.getRelatedStyles(_t127)),_step180;try{for(_iterator180.s();!(_step180=_iterator180.n()).done;){var _e131=_step180.value;n.set(_e131,!0);}}catch(err){_iterator180.e(err);}finally{_iterator180.f();}}}}catch(err){_iterator179.e(err);}finally{_iterator179.f();}}},{key:"_test",value:function _test(e,t){var i=_e(t)?t:[t],n=this._consumables[e];var _iterator181=_createForOfIteratorHelper(i),_step181;try{for(_iterator181.s();!(_step181=_iterator181.n()).done;){var _t128=_step181.value;if("attributes"!==e||"class"!==_t128&&"style"!==_t128){var _e132=n.get(_t128);if(void 0===_e132)return null;if(!_e132)return!1;}else{var _e133="class"==_t128?"classes":"styles",_i133=this._test(_e133,_toConsumableArray(this._consumables[_e133].keys()));if(!0!==_i133)return _i133;}}}catch(err){_iterator181.e(err);}finally{_iterator181.f();}return!0;}},{key:"_consume",value:function _consume(e,t){var i=_e(t)?t:[t],n=this._consumables[e];var _iterator182=_createForOfIteratorHelper(i),_step182;try{for(_iterator182.s();!(_step182=_iterator182.n()).done;){var _t129=_step182.value;if("attributes"!==e||"class"!==_t129&&"style"!==_t129){if(n.set(_t129,!1),"styles"==e){var _iterator183=_createForOfIteratorHelper(this.element.document.stylesProcessor.getRelatedStyles(_t129)),_step183;try{for(_iterator183.s();!(_step183=_iterator183.n()).done;){var _e134=_step183.value;n.set(_e134,!1);}}catch(err){_iterator183.e(err);}finally{_iterator183.f();}}}else{var _e135="class"==_t129?"classes":"styles";this._consume(_e135,_toConsumableArray(this._consumables[_e135].keys()));}}}catch(err){_iterator182.e(err);}finally{_iterator182.f();}}},{key:"_revert",value:function _revert(e,t){var i=_e(t)?t:[t],n=this._consumables[e];var _iterator184=_createForOfIteratorHelper(i),_step184;try{for(_iterator184.s();!(_step184=_iterator184.n()).done;){var _t130=_step184.value;if("attributes"!==e||"class"!==_t130&&"style"!==_t130){!1===n.get(_t130)&&n.set(_t130,!0);}else{var _e136="class"==_t130?"classes":"styles";this._revert(_e136,_toConsumableArray(this._consumables[_e136].keys()));}}}catch(err){_iterator184.e(err);}finally{_iterator184.f();}}}]);return qa;}();var $a=/*#__PURE__*/function(){function $a(){var _this58=this;_classCallCheck(this,$a);this._sourceDefinitions={},this._attributeProperties={},this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",function(e,t){t[0]=new Ya(t[0]);},{priority:"highest"}),this.on("checkChild",function(e,t){t[0]=new Ya(t[0]),t[1]=_this58.getDefinition(t[1]);},{priority:"highest"});}_createClass($a,[{key:"register",value:function register(e,t){if(this._sourceDefinitions[e])throw new l.a("schema-cannot-register-item-twice",this,{itemName:e});this._sourceDefinitions[e]=[Object.assign({},t)],this._clearCache();}},{key:"extend",value:function extend(e,t){if(!this._sourceDefinitions[e])throw new l.a("schema-cannot-extend-missing-item",this,{itemName:e});this._sourceDefinitions[e].push(Object.assign({},t)),this._clearCache();}},{key:"getDefinitions",value:function getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions;}},{key:"getDefinition",value:function getDefinition(e){var t;return t="string"==typeof e?e:e.is&&(e.is("$text")||e.is("$textProxy"))?"$text":e.name,this.getDefinitions()[t];}},{key:"isRegistered",value:function isRegistered(e){return!!this.getDefinition(e);}},{key:"isBlock",value:function isBlock(e){var t=this.getDefinition(e);return!(!t||!t.isBlock);}},{key:"isLimit",value:function isLimit(e){var t=this.getDefinition(e);return!!t&&!(!t.isLimit&&!t.isObject);}},{key:"isObject",value:function isObject(e){var t=this.getDefinition(e);return!!t&&!!(t.isObject||t.isLimit&&t.isSelectable&&t.isContent);}},{key:"isInline",value:function isInline(e){var t=this.getDefinition(e);return!(!t||!t.isInline);}},{key:"isSelectable",value:function isSelectable(e){var t=this.getDefinition(e);return!!t&&!(!t.isSelectable&&!t.isObject);}},{key:"isContent",value:function isContent(e){var t=this.getDefinition(e);return!!t&&!(!t.isContent&&!t.isObject);}},{key:"checkChild",value:function checkChild(e,t){return!!t&&this._checkContextMatch(t,e);}},{key:"checkAttribute",value:function checkAttribute(e,t){var i=this.getDefinition(e.last);return!!i&&i.allowAttributes.includes(t);}},{key:"checkMerge",value:function checkMerge(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(e instanceof ea){var _t131=e.nodeBefore,_i134=e.nodeAfter;if(!(_t131 instanceof Js))throw new l.a("schema-check-merge-no-element-before",this);if(!(_i134 instanceof Js))throw new l.a("schema-check-merge-no-element-after",this);return this.checkMerge(_t131,_i134);}var _iterator185=_createForOfIteratorHelper(t.getChildren()),_step185;try{for(_iterator185.s();!(_step185=_iterator185.n()).done;){var _i135=_step185.value;if(!this.checkChild(e,_i135))return!1;}}catch(err){_iterator185.e(err);}finally{_iterator185.f();}return!0;}},{key:"addChildCheck",value:function addChildCheck(e){this.on("checkChild",function(t,_ref15){var _ref16=_slicedToArray(_ref15,2),i=_ref16[0],n=_ref16[1];if(!n)return;var o=e(i,n);"boolean"==typeof o&&(t.stop(),t["return"]=o);},{priority:"high"});}},{key:"addAttributeCheck",value:function addAttributeCheck(e){this.on("checkAttribute",function(t,_ref17){var _ref18=_slicedToArray(_ref17,2),i=_ref18[0],n=_ref18[1];var o=e(i,n);"boolean"==typeof o&&(t.stop(),t["return"]=o);},{priority:"high"});}},{key:"setAttributeProperties",value:function setAttributeProperties(e,t){this._attributeProperties[e]=Object.assign(this.getAttributeProperties(e),t);}},{key:"getAttributeProperties",value:function getAttributeProperties(e){return this._attributeProperties[e]||{};}},{key:"getLimitElement",value:function getLimitElement(e){var t;if(e instanceof ea)t=e.parent;else{t=(e instanceof oa?[e]:Array.from(e.getRanges())).reduce(function(e,t){var i=t.getCommonAncestor();return e?e.getCommonAncestor(i,{includeSelf:!0}):i;},null);}for(;!this.isLimit(t)&&t.parent;){t=t.parent;}return t;}},{key:"checkAttributeInSelection",value:function checkAttributeInSelection(e,t){if(e.isCollapsed){var _i136=[].concat(_toConsumableArray(e.getFirstPosition().getAncestors()),[new Gs("",e.getAttributes())]);return this.checkAttribute(_i136,t);}{var _i137=e.getRanges();var _iterator186=_createForOfIteratorHelper(_i137),_step186;try{for(_iterator186.s();!(_step186=_iterator186.n()).done;){var _e137=_step186.value;var _iterator187=_createForOfIteratorHelper(_e137),_step187;try{for(_iterator187.s();!(_step187=_iterator187.n()).done;){var _i138=_step187.value;if(this.checkAttribute(_i138.item,t))return!0;}}catch(err){_iterator187.e(err);}finally{_iterator187.f();}}}catch(err){_iterator186.e(err);}finally{_iterator186.f();}}return!1;}},{key:"getValidRanges",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getValidRanges(e,t){var _iterator189,_step189,_i139;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getValidRanges$(_context23){while(1){switch(_context23.prev=_context23.next){case 0:e=/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function _callee(e){var _iterator188,_step188,_t132;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _callee$(_context22){while(1){switch(_context22.prev=_context22.next){case 0:_iterator188=_createForOfIteratorHelper(e);_context22.prev=1;_iterator188.s();case 3:if((_step188=_iterator188.n()).done){_context22.next=8;break;}_t132=_step188.value;return _context22.delegateYield(_t132.getMinimalFlatRanges(),"t0",6);case 6:_context22.next=3;break;case 8:_context22.next=13;break;case 10:_context22.prev=10;_context22.t1=_context22["catch"](1);_iterator188.e(_context22.t1);case 13:_context22.prev=13;_iterator188.f();return _context22.finish(13);case 16:case"end":return _context22.stop();}}},_callee,null,[[1,10,13,16]]);})(e);_iterator189=_createForOfIteratorHelper(e);_context23.prev=2;_iterator189.s();case 4:if((_step189=_iterator189.n()).done){_context23.next=9;break;}_i139=_step189.value;return _context23.delegateYield(this._getValidRangesForRange(_i139,t),"t0",7);case 7:_context23.next=4;break;case 9:_context23.next=14;break;case 11:_context23.prev=11;_context23.t1=_context23["catch"](2);_iterator189.e(_context23.t1);case 14:_context23.prev=14;_iterator189.f();return _context23.finish(14);case 17:case"end":return _context23.stop();}}},getValidRanges,this,[[2,11,14,17]]);})},{key:"getNearestSelectionRange",value:function getNearestSelectionRange(e){var _this59=this;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"both";if(this.checkChild(e,"$text"))return new oa(e);var i,n;var o=e.getAncestors().reverse().find(function(e){return _this59.isLimit(e);})||e.root;"both"!=t&&"backward"!=t||(i=new Zs({boundaries:oa._createIn(o),startPosition:e,direction:"backward"})),"both"!=t&&"forward"!=t||(n=new Zs({boundaries:oa._createIn(o),startPosition:e}));var _iterator190=_createForOfIteratorHelper(/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function _callee2(e,t){var i,_t133,_e138;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _callee2$(_context24){while(1){switch(_context24.prev=_context24.next){case 0:i=!1;case 1:if(i){_context24.next=18;break;}if(!(i=!0,e)){_context24.next=9;break;}_t133=e.next();_context24.t0=_t133.done;if(_context24.t0){_context24.next=9;break;}i=!1;_context24.next=9;return{walker:e,value:_t133.value};case 9:if(!t){_context24.next=16;break;}_e138=t.next();_context24.t1=_e138.done;if(_context24.t1){_context24.next=16;break;}i=!1;_context24.next=16;return{walker:t,value:_e138.value};case 16:_context24.next=1;break;case 18:case"end":return _context24.stop();}}},_callee2);})(i,n)),_step190;try{for(_iterator190.s();!(_step190=_iterator190.n()).done;){var _e139=_step190.value;var _t134=_e139.walker==i?"elementEnd":"elementStart",_n69=_e139.value;if(_n69.type==_t134&&this.isObject(_n69.item))return oa._createOn(_n69.item);if(this.checkChild(_n69.nextPosition,"$text"))return new oa(_n69.nextPosition);}}catch(err){_iterator190.e(err);}finally{_iterator190.f();}return null;}},{key:"findAllowedParent",value:function findAllowedParent(e,t){var i=e.parent;for(;i;){if(this.checkChild(i,t))return i;if(this.isLimit(i))return null;i=i.parent;}return null;}},{key:"removeDisallowedAttributes",value:function removeDisallowedAttributes(e,t){var _iterator191=_createForOfIteratorHelper(e),_step191;try{for(_iterator191.s();!(_step191=_iterator191.n()).done;){var _i140=_step191.value;if(_i140.is("$text"))sl(this,_i140,t);else{var _e140=oa._createIn(_i140).getPositions();var _iterator192=_createForOfIteratorHelper(_e140),_step192;try{for(_iterator192.s();!(_step192=_iterator192.n()).done;){var _i141=_step192.value;sl(this,_i141.nodeBefore||_i141.parent,t);}}catch(err){_iterator192.e(err);}finally{_iterator192.f();}}}}catch(err){_iterator191.e(err);}finally{_iterator191.f();}}},{key:"createContext",value:function createContext(e){return new Ya(e);}},{key:"_clearCache",value:function _clearCache(){this._compiledDefinitions=null;}},{key:"_compile",value:function _compile(){var e={},t=this._sourceDefinitions,i=Object.keys(t);for(var _i143=0,_i142=i;_i143<_i142.length;_i143++){var _n70=_i142[_i143];e[_n70]=Ga(t[_n70],_n70);}for(var _i145=0,_i144=i;_i145<_i144.length;_i145++){var _t135=_i144[_i145];Ka(e,_t135);}for(var _i147=0,_i146=i;_i147<_i146.length;_i147++){var _t136=_i146[_i147];Qa(e,_t136);}for(var _i149=0,_i148=i;_i149<_i148.length;_i149++){var _t137=_i148[_i149];Ja(e,_t137);}for(var _i151=0,_i150=i;_i151<_i150.length;_i151++){var _t138=_i150[_i151];Za(e,_t138),Xa(e,_t138);}for(var _i153=0,_i152=i;_i153<_i152.length;_i153++){var _t139=_i152[_i153];el(e,_t139),tl(e,_t139),il(e,_t139);}this._compiledDefinitions=e;}},{key:"_checkContextMatch",value:function _checkContextMatch(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:t.length-1;var n=t.getItem(i);if(e.allowIn.includes(n.name)){if(0==i)return!0;{var _e141=this.getDefinition(n);return this._checkContextMatch(_e141,t,i-1);}}return!1;}},{key:"_getValidRangesForRange",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function _getValidRangesForRange(e,t){var i,n,_iterator193,_step193,_o41;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _getValidRangesForRange$(_context25){while(1){switch(_context25.prev=_context25.next){case 0:i=e.start,n=e.start;_iterator193=_createForOfIteratorHelper(e.getItems({shallow:!0}));_context25.prev=2;_iterator193.s();case 4:if((_step193=_iterator193.n()).done){_context25.next=19;break;}_o41=_step193.value;_context25.t0=_o41.is("element");if(!_context25.t0){_context25.next=9;break;}return _context25.delegateYield(this._getValidRangesForRange(oa._createIn(_o41),t),"t1",9);case 9:_context25.t2=this.checkAttribute(_o41,t);if(_context25.t2){_context25.next=16;break;}_context25.t3=i.isEqual(n);if(_context25.t3){_context25.next=15;break;}_context25.next=15;return new oa(i,n);case 15:i=ea._createAfter(_o41);case 16:n=ea._createAfter(_o41);case 17:_context25.next=4;break;case 19:_context25.next=24;break;case 21:_context25.prev=21;_context25.t4=_context25["catch"](2);_iterator193.e(_context25.t4);case 24:_context25.prev=24;_iterator193.f();return _context25.finish(24);case 27:_context25.t5=i.isEqual(n);if(_context25.t5){_context25.next=31;break;}_context25.next=31;return new oa(i,n);case 31:case"end":return _context25.stop();}}},_getValidRangesForRange,this,[[2,21,24,27]]);})}]);return $a;}();Ke($a,Ue);var Ya=/*#__PURE__*/function(_Symbol$iterator10){function Ya(e){_classCallCheck(this,Ya);if(e instanceof Ya)return e;"string"==typeof e?e=[e]:Array.isArray(e)||(e=e.getAncestors({includeSelf:!0})),this._items=e.map(rl);}_createClass(Ya,[{key:"length",get:function get(){return this._items.length;}},{key:"last",get:function get(){return this._items[this._items.length-1];}},{key:_Symbol$iterator10,value:function value(){return this._items[Symbol.iterator]();}},{key:"push",value:function push(e){var t=new Ya([e]);return t._items=[].concat(_toConsumableArray(this._items),_toConsumableArray(t._items)),t;}},{key:"getItem",value:function getItem(e){return this._items[e];}},{key:"getNames",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getNames(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getNames$(_context26){while(1){switch(_context26.prev=_context26.next){case 0:return _context26.delegateYield(this._items.map(function(e){return e.name;}),"t0",1);case 1:case"end":return _context26.stop();}}},getNames,this);})},{key:"endsWith",value:function endsWith(e){return Array.from(this.getNames()).join(" ").endsWith(e);}},{key:"startsWith",value:function startsWith(e){return Array.from(this.getNames()).join(" ").startsWith(e);}}]);return Ya;}(Symbol.iterator);function Ga(e,t){var i={name:t,allowIn:[],allowContentOf:[],allowWhere:[],allowAttributes:[],allowAttributesOf:[],allowChildren:[],inheritTypesFrom:[]};return function(e,t){var _iterator194=_createForOfIteratorHelper(e),_step194;try{for(_iterator194.s();!(_step194=_iterator194.n()).done;){var _i154=_step194.value;var _e142=Object.keys(_i154).filter(function(e){return e.startsWith("is");});var _iterator195=_createForOfIteratorHelper(_e142),_step195;try{for(_iterator195.s();!(_step195=_iterator195.n()).done;){var _n71=_step195.value;t[_n71]=_i154[_n71];}}catch(err){_iterator195.e(err);}finally{_iterator195.f();}}}catch(err){_iterator194.e(err);}finally{_iterator194.f();}}(e,i),nl(e,i,"allowIn"),nl(e,i,"allowContentOf"),nl(e,i,"allowWhere"),nl(e,i,"allowAttributes"),nl(e,i,"allowAttributesOf"),nl(e,i,"allowChildren"),nl(e,i,"inheritTypesFrom"),function(e,t){var _iterator196=_createForOfIteratorHelper(e),_step196;try{for(_iterator196.s();!(_step196=_iterator196.n()).done;){var _i155=_step196.value;var _e143=_i155.inheritAllFrom;_e143&&(t.allowContentOf.push(_e143),t.allowWhere.push(_e143),t.allowAttributesOf.push(_e143),t.inheritTypesFrom.push(_e143));}}catch(err){_iterator196.e(err);}finally{_iterator196.f();}}(e,i),i;}function Ka(e,t){var i=e[t];var _iterator197=_createForOfIteratorHelper(i.allowChildren),_step197;try{for(_iterator197.s();!(_step197=_iterator197.n()).done;){var _n72=_step197.value;var _i156=e[_n72];_i156&&_i156.allowIn.push(t);}}catch(err){_iterator197.e(err);}finally{_iterator197.f();}i.allowChildren.length=0;}function Qa(e,t){var _iterator198=_createForOfIteratorHelper(e[t].allowContentOf),_step198;try{for(_iterator198.s();!(_step198=_iterator198.n()).done;){var _i157=_step198.value;if(e[_i157]){ol(e,_i157).forEach(function(e){e.allowIn.push(t);});}}}catch(err){_iterator198.e(err);}finally{_iterator198.f();}delete e[t].allowContentOf;}function Ja(e,t){var _iterator199=_createForOfIteratorHelper(e[t].allowWhere),_step199;try{for(_iterator199.s();!(_step199=_iterator199.n()).done;){var _i158=_step199.value;var _n73=e[_i158];if(_n73){var _e$t$allowIn;var _i159=_n73.allowIn;(_e$t$allowIn=e[t].allowIn).push.apply(_e$t$allowIn,_toConsumableArray(_i159));}}}catch(err){_iterator199.e(err);}finally{_iterator199.f();}delete e[t].allowWhere;}function Za(e,t){var _iterator200=_createForOfIteratorHelper(e[t].allowAttributesOf),_step200;try{for(_iterator200.s();!(_step200=_iterator200.n()).done;){var _i160=_step200.value;var _n74=e[_i160];if(_n74){var _e$t$allowAttributes;var _i161=_n74.allowAttributes;(_e$t$allowAttributes=e[t].allowAttributes).push.apply(_e$t$allowAttributes,_toConsumableArray(_i161));}}}catch(err){_iterator200.e(err);}finally{_iterator200.f();}delete e[t].allowAttributesOf;}function Xa(e,t){var i=e[t];var _iterator201=_createForOfIteratorHelper(i.inheritTypesFrom),_step201;try{for(_iterator201.s();!(_step201=_iterator201.n()).done;){var _t140=_step201.value;var _n75=e[_t140];if(_n75){var _e144=Object.keys(_n75).filter(function(e){return e.startsWith("is");});var _iterator202=_createForOfIteratorHelper(_e144),_step202;try{for(_iterator202.s();!(_step202=_iterator202.n()).done;){var _t141=_step202.value;_t141 in i||(i[_t141]=_n75[_t141]);}}catch(err){_iterator202.e(err);}finally{_iterator202.f();}}}}catch(err){_iterator201.e(err);}finally{_iterator201.f();}delete i.inheritTypesFrom;}function el(e,t){var i=e[t],n=i.allowIn.filter(function(t){return e[t];});i.allowIn=Array.from(new Set(n));}function tl(e,t){var i=e[t];var _iterator203=_createForOfIteratorHelper(i.allowIn),_step203;try{for(_iterator203.s();!(_step203=_iterator203.n()).done;){var _n76=_step203.value;e[_n76].allowChildren.push(t);}}catch(err){_iterator203.e(err);}finally{_iterator203.f();}}function il(e,t){var i=e[t];i.allowAttributes=Array.from(new Set(i.allowAttributes));}function nl(e,t,i){var _iterator204=_createForOfIteratorHelper(e),_step204;try{for(_iterator204.s();!(_step204=_iterator204.n()).done;){var _t$i;var _n77=_step204.value;"string"==typeof _n77[i]?t[i].push(_n77[i]):Array.isArray(_n77[i])&&(_t$i=t[i]).push.apply(_t$i,_toConsumableArray(_n77[i]));}}catch(err){_iterator204.e(err);}finally{_iterator204.f();}}function ol(e,t){var i=e[t];return(n=e,Object.keys(n).map(function(e){return n[e];})).filter(function(e){return e.allowIn.includes(i.name);});var n;}function rl(e){return"string"==typeof e||e.is("documentFragment")?{name:"string"==typeof e?e:"$documentFragment",getAttributeKeys:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getAttributeKeys(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getAttributeKeys$(_context27){while(1){switch(_context27.prev=_context27.next){case 0:case"end":return _context27.stop();}}},getAttributeKeys);}),getAttribute:function getAttribute(){}}:{name:e.is("element")?e.name:"$text",getAttributeKeys:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getAttributeKeys(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getAttributeKeys$(_context28){while(1){switch(_context28.prev=_context28.next){case 0:return _context28.delegateYield(e.getAttributeKeys(),"t0",1);case 1:case"end":return _context28.stop();}}},getAttributeKeys);}),getAttribute:function getAttribute(t){return e.getAttribute(t);}};}function sl(e,t,i){var _iterator205=_createForOfIteratorHelper(t.getAttributeKeys()),_step205;try{for(_iterator205.s();!(_step205=_iterator205.n()).done;){var _n78=_step205.value;e.checkAttribute(t,_n78)||i.removeAttribute(_n78,t);}}catch(err){_iterator205.e(err);}finally{_iterator205.f();}}var al=/*#__PURE__*/function(){function al(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,al);this._splitParts=new Map(),this._cursorParents=new Map(),this._modelCursor=null,this.conversionApi=Object.assign({},e),this.conversionApi.convertItem=this._convertItem.bind(this),this.conversionApi.convertChildren=this._convertChildren.bind(this),this.conversionApi.safeInsert=this._safeInsert.bind(this),this.conversionApi.updateConversionResult=this._updateConversionResult.bind(this),this.conversionApi.splitToAllowedParent=this._splitToAllowedParent.bind(this),this.conversionApi.getSplitParts=this._getSplitParts.bind(this);}_createClass(al,[{key:"convert",value:function convert(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:["$root"];this.fire("viewCleanup",e),this._modelCursor=function(e,t){var i;var _iterator206=_createForOfIteratorHelper(new Ya(e)),_step206;try{for(_iterator206.s();!(_step206=_iterator206.n()).done;){var _n79=_step206.value;var _e145={};var _iterator207=_createForOfIteratorHelper(_n79.getAttributeKeys()),_step207;try{for(_iterator207.s();!(_step207=_iterator207.n()).done;){var _t142=_step207.value;_e145[_t142]=_n79.getAttribute(_t142);}}catch(err){_iterator207.e(err);}finally{_iterator207.f();}var _o42=t.createElement(_n79.name,_e145);i&&t.append(_o42,i),i=ea._createAt(_o42,0);}}catch(err){_iterator206.e(err);}finally{_iterator206.f();}return i;}(i,t),this.conversionApi.writer=t,this.conversionApi.consumable=Wa.createFrom(e),this.conversionApi.store={};var _this$_convertItem=this._convertItem(e,this._modelCursor),n=_this$_convertItem.modelRange,o=t.createDocumentFragment();if(n){this._removeEmptyElements();for(var _i162=0,_Array$from4=Array.from(this._modelCursor.parent.getChildren());_i162<_Array$from4.length;_i162++){var _e146=_Array$from4[_i162];t.append(_e146,o);}o.markers=function(e,t){var i=new Set(),n=new Map(),o=oa._createIn(e).getItems();var _iterator208=_createForOfIteratorHelper(o),_step208;try{for(_iterator208.s();!(_step208=_iterator208.n()).done;){var _e147=_step208.value;"$marker"==_e147.name&&i.add(_e147);}}catch(err){_iterator208.e(err);}finally{_iterator208.f();}var _iterator209=_createForOfIteratorHelper(i),_step209;try{for(_iterator209.s();!(_step209=_iterator209.n()).done;){var _e148=_step209.value;var _i163=_e148.getAttribute("data-name"),_o43=t.createPositionBefore(_e148);n.has(_i163)?n.get(_i163).end=_o43.clone():n.set(_i163,new oa(_o43.clone())),t.remove(_e148);}}catch(err){_iterator209.e(err);}finally{_iterator209.f();}return n;}(o,t);}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,o;}},{key:"_convertItem",value:function _convertItem(e,t){var i=Object.assign({viewItem:e,modelCursor:t,modelRange:null});if(e.is("element")?this.fire("element:"+e.name,i,this.conversionApi):e.is("$text")?this.fire("text",i,this.conversionApi):this.fire("documentFragment",i,this.conversionApi),i.modelRange&&!(i.modelRange instanceof oa))throw new l.a("view-conversion-dispatcher-incorrect-result",this);return{modelRange:i.modelRange,modelCursor:i.modelCursor};}},{key:"_convertChildren",value:function _convertChildren(e,t){var i=t.is("position")?t:ea._createAt(t,0);var n=new oa(i);for(var _i164=0,_Array$from5=Array.from(e.getChildren());_i164<_Array$from5.length;_i164++){var _t143=_Array$from5[_i164];var _e149=this._convertItem(_t143,i);_e149.modelRange instanceof oa&&(n.end=_e149.modelRange.end,i=_e149.modelCursor);}return{modelRange:n,modelCursor:i};}},{key:"_safeInsert",value:function _safeInsert(e,t){var i=this._splitToAllowedParent(e,t);return!!i&&(this.conversionApi.writer.insert(e,i.position),!0);}},{key:"_updateConversionResult",value:function _updateConversionResult(e,t){var i=this._getSplitParts(e),n=this.conversionApi.writer;t.modelRange||(t.modelRange=n.createRange(n.createPositionBefore(e),n.createPositionAfter(i[i.length-1])));var o=this._cursorParents.get(e);t.modelCursor=o?n.createPositionAt(o,0):t.modelRange.end;}},{key:"_splitToAllowedParent",value:function _splitToAllowedParent(e,t){var _this$conversionApi=this.conversionApi,i=_this$conversionApi.schema,n=_this$conversionApi.writer;var o=i.findAllowedParent(t,e);if(o){if(o===t.parent)return{position:t};this._modelCursor.parent.getAncestors().includes(o)&&(o=null);}if(!o)return Ra(t,e,i)?{position:za(t,n)}:null;var r=this.conversionApi.writer.split(t,o),s=[];var _iterator210=_createForOfIteratorHelper(r.range.getWalker()),_step210;try{for(_iterator210.s();!(_step210=_iterator210.n()).done;){var _e150=_step210.value;if("elementEnd"==_e150.type)s.push(_e150.item);else{var _t144=s.pop(),_i165=_e150.item;this._registerSplitPair(_t144,_i165);}}}catch(err){_iterator210.e(err);}finally{_iterator210.f();}var a=r.range.end.parent;return this._cursorParents.set(e,a),{position:r.position,cursorParent:a};}},{key:"_registerSplitPair",value:function _registerSplitPair(e,t){this._splitParts.has(e)||this._splitParts.set(e,[e]);var i=this._splitParts.get(e);this._splitParts.set(t,i),i.push(t);}},{key:"_getSplitParts",value:function _getSplitParts(e){var t;return t=this._splitParts.has(e)?this._splitParts.get(e):[e],t;}},{key:"_removeEmptyElements",value:function _removeEmptyElements(){var e=!1;var _iterator211=_createForOfIteratorHelper(this._splitParts.keys()),_step211;try{for(_iterator211.s();!(_step211=_iterator211.n()).done;){var _t145=_step211.value;_t145.isEmpty&&(this.conversionApi.writer.remove(_t145),this._splitParts["delete"](_t145),e=!0);}}catch(err){_iterator211.e(err);}finally{_iterator211.f();}e&&this._removeEmptyElements();}}]);return al;}();Ke(al,u);var ll=/*#__PURE__*/function(){function ll(){_classCallCheck(this,ll);}_createClass(ll,[{key:"getHtml",value:function getHtml(e){var t=document.implementation.createHTMLDocument("").createElement("div");return t.appendChild(e),t.innerHTML;}}]);return ll;}();var cl=/*#__PURE__*/function(){function cl(e){_classCallCheck(this,cl);this._domParser=new DOMParser(),this._domConverter=new Er(e,{blockFillerMode:"nbsp"}),this._htmlWriter=new ll();}_createClass(cl,[{key:"toData",value:function toData(e){var t=this._domConverter.viewToDom(e,document);return this._htmlWriter.getHtml(t);}},{key:"toView",value:function toView(e){var t=this._toDom(e);return this._domConverter.domToView(t);}},{key:"registerRawContentMatcher",value:function registerRawContentMatcher(e){this._domConverter.registerRawContentMatcher(e);}},{key:"useFillerType",value:function useFillerType(e){this._domConverter.blockFillerMode="marked"==e?"markedNbsp":"nbsp";}},{key:"_toDom",value:function _toDom(e){var t=this._domParser.parseFromString(e,"text/html"),i=t.createDocumentFragment();var n=t.firstChild;for(;!n.isSameNode(t.documentElement);){var _e151=n;n=n.nextSibling,_e151.nodeType==Node.COMMENT_NODE&&i.appendChild(_e151);}var o=t.body.childNodes;for(;o.length>0;){i.appendChild(o[0]);}return i;}}]);return cl;}();var dl=/*#__PURE__*/function(){function dl(e,t){var _this60=this;_classCallCheck(this,dl);this.model=e,this.mapper=new ra(),this.downcastDispatcher=new la({mapper:this.mapper,schema:e.schema}),this.downcastDispatcher.on("insert:$text",function(e,t,i){if(!i.consumable.consume(t.item,"insert"))return;var n=i.writer,o=i.mapper.toViewPosition(t.range.start),r=n.createText(t.item.data);n.insert(o,r);},{priority:"lowest"}),this.upcastDispatcher=new al({schema:e.schema}),this.viewDocument=new yo(t),this.stylesProcessor=t,this.htmlProcessor=new cl(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new qo(this.viewDocument),this.upcastDispatcher.on("text",function(e,t,_ref19){var i=_ref19.schema,n=_ref19.consumable,o=_ref19.writer;var r=t.modelCursor;if(!n.test(t.viewItem))return;if(!i.checkChild(r,"$text")){if(!Ra(r,"$text",i))return;r=za(r,o);}n.consume(t.viewItem);var s=o.createText(t.viewItem.data);o.insert(s,r),t.modelRange=o.createRange(r,r.getShiftedBy(s.offsetSize)),t.modelCursor=t.modelRange.end;},{priority:"lowest"}),this.upcastDispatcher.on("element",function(e,t,i){if(!t.modelRange&&i.consumable.consume(t.viewItem,{name:!0})){var _i$convertChildren=i.convertChildren(t.viewItem,t.modelCursor),_e152=_i$convertChildren.modelRange,_n80=_i$convertChildren.modelCursor;t.modelRange=_e152,t.modelCursor=_n80;}},{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",function(e,t,i){if(!t.modelRange&&i.consumable.consume(t.viewItem,{name:!0})){var _i$convertChildren2=i.convertChildren(t.viewItem,t.modelCursor),_e153=_i$convertChildren2.modelRange,_n81=_i$convertChildren2.modelCursor;t.modelRange=_e153,t.modelCursor=_n81;}},{priority:"lowest"}),this.decorate("init"),this.decorate("set"),this.on("init",function(){_this60.fire("ready");},{priority:"lowest"}),this.on("ready",function(){_this60.model.enqueueChange("transparent",Na);},{priority:"lowest"});}_createClass(dl,[{key:"get",value:function get(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var _e$rootName=e.rootName,t=_e$rootName===void 0?"main":_e$rootName,_e$trim=e.trim,i=_e$trim===void 0?"empty":_e$trim;if(!this._checkIfRootsExists([t]))throw new l.a("datacontroller-get-non-existent-root",this);var n=this.model.document.getRoot(t);return"empty"!==i||this.model.hasContent(n,{ignoreWhitespaces:!0})?this.stringify(n,e):"";}},{key:"stringify",value:function stringify(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=this.toView(e,t);return this.processor.toData(i);}},{key:"toView",value:function toView(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=this.viewDocument,n=this._viewWriter;this.mapper.clearBindings();var o=oa._createIn(e),r=new Wo(i);this.mapper.bindElements(e,r),this.downcastDispatcher.conversionApi.options=t,this.downcastDispatcher.convertInsert(o,n);var s=e.is("documentFragment")?Array.from(e.markers):function(e){var t=[],i=e.root.document;if(!i)return[];var n=oa._createIn(e);var _iterator212=_createForOfIteratorHelper(i.model.markers),_step212;try{for(_iterator212.s();!(_step212=_iterator212.n()).done;){var _e154=_step212.value;var _i166=_e154.getRange(),_o44=_i166.isCollapsed,_r22=_i166.start.isEqual(n.start)||_i166.end.isEqual(n.end);if(_o44&&_r22)t.push([_e154.name,_i166]);else{var _o45=n.getIntersection(_i166);_o45&&t.push([_e154.name,_o45]);}}}catch(err){_iterator212.e(err);}finally{_iterator212.f();}return t;}(e);var _iterator213=_createForOfIteratorHelper(s),_step213;try{for(_iterator213.s();!(_step213=_iterator213.n()).done;){var _step213$value=_slicedToArray(_step213.value,2),_e155=_step213$value[0],_t146=_step213$value[1];this.downcastDispatcher.convertMarkerAdd(_e155,_t146,n);}}catch(err){_iterator213.e(err);}finally{_iterator213.f();}return delete this.downcastDispatcher.conversionApi.options,r;}},{key:"init",value:function init(e){var _this61=this;if(this.model.document.version)throw new l.a("datacontroller-init-document-not-empty",this);var t={};if("string"==typeof e?t.main=e:t=e,!this._checkIfRootsExists(Object.keys(t)))throw new l.a("datacontroller-init-non-existent-root",this);return this.model.enqueueChange("transparent",function(e){for(var _i167=0,_Object$keys2=Object.keys(t);_i167<_Object$keys2.length;_i167++){var _i168=_Object$keys2[_i167];var _n82=_this61.model.document.getRoot(_i168);e.insert(_this61.parse(t[_i168],_n82),_n82,0);}}),Promise.resolve();}},{key:"set",value:function set(e){var _this62=this;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i={};if("string"==typeof e?i.main=e:i=e,!this._checkIfRootsExists(Object.keys(i)))throw new l.a("datacontroller-set-non-existent-root",this);var n=t.batchType||"default";this.model.enqueueChange(n,function(e){e.setSelection(null),e.removeSelectionAttribute(_this62.model.document.selection.getAttributeKeys());for(var _i169=0,_Object$keys3=Object.keys(i);_i169<_Object$keys3.length;_i169++){var _t147=_Object$keys3[_i169];var _n83=_this62.model.document.getRoot(_t147);e.remove(e.createRangeIn(_n83)),e.insert(_this62.parse(i[_t147],_n83),_n83,0);}});}},{key:"parse",value:function parse(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"$root";var i=this.processor.toView(e);return this.toModel(i,t);}},{key:"toModel",value:function toModel(e){var _this63=this;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"$root";return this.model.change(function(i){return _this63.upcastDispatcher.convert(e,i,t);});}},{key:"addStyleProcessorRules",value:function addStyleProcessorRules(e){e(this.stylesProcessor);}},{key:"registerRawContentMatcher",value:function registerRawContentMatcher(e){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(e),this.htmlProcessor.registerRawContentMatcher(e);}},{key:"destroy",value:function destroy(){this.stopListening();}},{key:"_checkIfRootsExists",value:function _checkIfRootsExists(e){var _iterator214=_createForOfIteratorHelper(e),_step214;try{for(_iterator214.s();!(_step214=_iterator214.n()).done;){var _t148=_step214.value;if(!this.model.document.getRootNames().includes(_t148))return!1;}}catch(err){_iterator214.e(err);}finally{_iterator214.f();}return!0;}}]);return dl;}();Ke(dl,Ue);var ul=/*#__PURE__*/function(){function ul(e,t){_classCallCheck(this,ul);this._helpers=new Map(),this._downcast=en(e),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=en(t),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1});}_createClass(ul,[{key:"addAlias",value:function addAlias(e,t){var i=this._downcast.includes(t);if(!this._upcast.includes(t)&&!i)throw new l.a("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:e,dispatchers:[t],isDowncast:i});}},{key:"for",value:function _for(e){if(!this._helpers.has(e))throw new l.a("conversion-for-unknown-group",this);return this._helpers.get(e);}},{key:"elementToElement",value:function elementToElement(e){this["for"]("downcast").elementToElement(e);var _iterator215=_createForOfIteratorHelper(hl(e)),_step215;try{for(_iterator215.s();!(_step215=_iterator215.n()).done;){var _step215$value=_step215.value,_t149=_step215$value.model,_i170=_step215$value.view;this["for"]("upcast").elementToElement({model:_t149,view:_i170,converterPriority:e.converterPriority});}}catch(err){_iterator215.e(err);}finally{_iterator215.f();}}},{key:"attributeToElement",value:function attributeToElement(e){this["for"]("downcast").attributeToElement(e);var _iterator216=_createForOfIteratorHelper(hl(e)),_step216;try{for(_iterator216.s();!(_step216=_iterator216.n()).done;){var _step216$value=_step216.value,_t150=_step216$value.model,_i171=_step216$value.view;this["for"]("upcast").elementToAttribute({view:_i171,model:_t150,converterPriority:e.converterPriority});}}catch(err){_iterator216.e(err);}finally{_iterator216.f();}}},{key:"attributeToAttribute",value:function attributeToAttribute(e){this["for"]("downcast").attributeToAttribute(e);var _iterator217=_createForOfIteratorHelper(hl(e)),_step217;try{for(_iterator217.s();!(_step217=_iterator217.n()).done;){var _step217$value=_step217.value,_t151=_step217$value.model,_i172=_step217$value.view;this["for"]("upcast").attributeToAttribute({view:_i172,model:_t151});}}catch(err){_iterator217.e(err);}finally{_iterator217.f();}}},{key:"_createConversionHelpers",value:function _createConversionHelpers(_ref20){var e=_ref20.name,t=_ref20.dispatchers,i=_ref20.isDowncast;if(this._helpers.has(e))throw new l.a("conversion-group-exists",this);var n=i?new Ca(t):new Oa(t);this._helpers.set(e,n);}}]);return ul;}();function hl(e){var _iterator218,_step218,_t152,_i173,_n84,_o46;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function hl$(_context29){while(1){switch(_context29.prev=_context29.next){case 0:if(!e.model.values){_context29.next=20;break;}_iterator218=_createForOfIteratorHelper(e.model.values);_context29.prev=2;_iterator218.s();case 4:if((_step218=_iterator218.n()).done){_context29.next=10;break;}_t152=_step218.value;_i173={key:e.model.key,value:_t152},_n84=e.view[_t152],_o46=e.upcastAlso?e.upcastAlso[_t152]:void 0;return _context29.delegateYield(gl(_i173,_n84,_o46),"t0",8);case 8:_context29.next=4;break;case 10:_context29.next=15;break;case 12:_context29.prev=12;_context29.t1=_context29["catch"](2);_iterator218.e(_context29.t1);case 15:_context29.prev=15;_iterator218.f();return _context29.finish(15);case 18:_context29.next=21;break;case 20:return _context29.delegateYield(gl(e.model,e.view,e.upcastAlso),"t2",21);case 21:case"end":return _context29.stop();}}},_marked,null,[[2,12,15,18]]);}function gl(e,t,i){var _iterator219,_step219,_t153;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function gl$(_context30){while(1){switch(_context30.prev=_context30.next){case 0:_context30.next=2;return{model:e,view:t};case 2:if(!i){_context30.next=20;break;}_iterator219=_createForOfIteratorHelper(en(i));_context30.prev=4;_iterator219.s();case 6:if((_step219=_iterator219.n()).done){_context30.next=12;break;}_t153=_step219.value;_context30.next=10;return{model:e,view:_t153};case 10:_context30.next=6;break;case 12:_context30.next=17;break;case 14:_context30.prev=14;_context30.t0=_context30["catch"](4);_iterator219.e(_context30.t0);case 17:_context30.prev=17;_iterator219.f();return _context30.finish(17);case 20:case"end":return _context30.stop();}}},_marked2,null,[[4,14,17,20]]);}var ml=/*#__PURE__*/function(){function ml(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"default";_classCallCheck(this,ml);this.operations=[],this.type=e;}_createClass(ml,[{key:"baseVersion",get:function get(){var _iterator220=_createForOfIteratorHelper(this.operations),_step220;try{for(_iterator220.s();!(_step220=_iterator220.n()).done;){var _e156=_step220.value;if(null!==_e156.baseVersion)return _e156.baseVersion;}}catch(err){_iterator220.e(err);}finally{_iterator220.f();}return null;}},{key:"addOperation",value:function addOperation(e){return e.batch=this,this.operations.push(e),e;}}]);return ml;}();var fl=/*#__PURE__*/function(){function fl(e){_classCallCheck(this,fl);this.baseVersion=e,this.isDocumentOperation=null!==this.baseVersion,this.batch=null;}_createClass(fl,[{key:"_validate",value:function _validate(){}},{key:"toJSON",value:function toJSON(){var e=Object.assign({},this);return e.__className=this.constructor.className,delete e.batch,delete e.isDocumentOperation,e;}}],[{key:"className",get:function get(){return"Operation";}},{key:"fromJSON",value:function fromJSON(e){return new this(e.baseVersion);}}]);return fl;}();var pl=/*#__PURE__*/function(_Symbol$iterator11){function pl(e){_classCallCheck(this,pl);this.markers=new Map(),this._children=new Qs(),e&&this._insertChild(0,e);}_createClass(pl,[{key:_Symbol$iterator11,value:function value(){return this.getChildren();}},{key:"childCount",get:function get(){return this._children.length;}},{key:"maxOffset",get:function get(){return this._children.maxOffset;}},{key:"isEmpty",get:function get(){return 0===this.childCount;}},{key:"root",get:function get(){return this;}},{key:"parent",get:function get(){return null;}},{key:"is",value:function is(e){return"documentFragment"===e||"model:documentFragment"===e;}},{key:"getChild",value:function getChild(e){return this._children.getNode(e);}},{key:"getChildren",value:function getChildren(){return this._children[Symbol.iterator]();}},{key:"getChildIndex",value:function getChildIndex(e){return this._children.getNodeIndex(e);}},{key:"getChildStartOffset",value:function getChildStartOffset(e){return this._children.getNodeStartOffset(e);}},{key:"getPath",value:function getPath(){return[];}},{key:"getNodeByPath",value:function getNodeByPath(e){var t=this;var _iterator221=_createForOfIteratorHelper(e),_step221;try{for(_iterator221.s();!(_step221=_iterator221.n()).done;){var _i174=_step221.value;t=t.getChild(t.offsetToIndex(_i174));}}catch(err){_iterator221.e(err);}finally{_iterator221.f();}return t;}},{key:"offsetToIndex",value:function offsetToIndex(e){return this._children.offsetToIndex(e);}},{key:"toJSON",value:function toJSON(){var e=[];var _iterator222=_createForOfIteratorHelper(this._children),_step222;try{for(_iterator222.s();!(_step222=_iterator222.n()).done;){var _t154=_step222.value;e.push(_t154.toJSON());}}catch(err){_iterator222.e(err);}finally{_iterator222.f();}return e;}},{key:"_appendChild",value:function _appendChild(e){this._insertChild(this.childCount,e);}},{key:"_insertChild",value:function _insertChild(e,t){var i=function(e){if("string"==typeof e)return[new Gs(e)];Ji(e)||(e=[e]);return Array.from(e).map(function(e){return"string"==typeof e?new Gs(e):e instanceof Ks?new Gs(e.data,e.getAttributes()):e;});}(t);var _iterator223=_createForOfIteratorHelper(i),_step223;try{for(_iterator223.s();!(_step223=_iterator223.n()).done;){var _e157=_step223.value;null!==_e157.parent&&_e157._remove(),_e157.parent=this;}}catch(err){_iterator223.e(err);}finally{_iterator223.f();}this._children._insertNodes(e,i);}},{key:"_removeChildren",value:function _removeChildren(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var i=this._children._removeNodes(e,t);var _iterator224=_createForOfIteratorHelper(i),_step224;try{for(_iterator224.s();!(_step224=_iterator224.n()).done;){var _e158=_step224.value;_e158.parent=null;}}catch(err){_iterator224.e(err);}finally{_iterator224.f();}return i;}}],[{key:"fromJSON",value:function fromJSON(e){var t=[];var _iterator225=_createForOfIteratorHelper(e),_step225;try{for(_iterator225.s();!(_step225=_iterator225.n()).done;){var _i175=_step225.value;_i175.name?t.push(Js.fromJSON(_i175)):t.push(Gs.fromJSON(_i175));}}catch(err){_iterator225.e(err);}finally{_iterator225.f();}return new pl(t);}}]);return pl;}(Symbol.iterator);function bl(e,t){var i=(t=_l(t)).reduce(function(e,t){return e+t.offsetSize;},0),n=e.parent;yl(e);var o=e.index;return n._insertChild(o,t),vl(n,o+t.length),vl(n,o),new oa(e,e.getShiftedBy(i));}function wl(e){if(!e.isFlat)throw new l.a("operation-utils-remove-range-not-flat",this);var t=e.start.parent;yl(e.start),yl(e.end);var i=t._removeChildren(e.start.index,e.end.index-e.start.index);return vl(t,e.start.index),i;}function kl(e,t){if(!e.isFlat)throw new l.a("operation-utils-move-range-not-flat",this);var i=wl(e);return bl(t=t._getTransformedByDeletion(e.start,e.end.offset-e.start.offset),i);}function _l(e){var t=[];e instanceof Array||(e=[e]);for(var _i176=0;_i176<e.length;_i176++){if("string"==typeof e[_i176])t.push(new Gs(e[_i176]));else if(e[_i176]instanceof Ks)t.push(new Gs(e[_i176].data,e[_i176].getAttributes()));else if(e[_i176]instanceof pl||e[_i176]instanceof Qs){var _iterator226=_createForOfIteratorHelper(e[_i176]),_step226;try{for(_iterator226.s();!(_step226=_iterator226.n()).done;){var _n85=_step226.value;t.push(_n85);}}catch(err){_iterator226.e(err);}finally{_iterator226.f();}}else e[_i176]instanceof Ys&&t.push(e[_i176]);}for(var _e159=1;_e159<t.length;_e159++){var _i177=t[_e159],_n86=t[_e159-1];_i177 instanceof Gs&&_n86 instanceof Gs&&xl(_i177,_n86)&&(t.splice(_e159-1,2,new Gs(_n86.data+_i177.data,_n86.getAttributes())),_e159--);}return t;}function vl(e,t){var i=e.getChild(t-1),n=e.getChild(t);if(i&&n&&i.is("$text")&&n.is("$text")&&xl(i,n)){var _o47=new Gs(i.data+n.data,i.getAttributes());e._removeChildren(t-1,2),e._insertChild(t-1,_o47);}}function yl(e){var t=e.textNode,i=e.parent;if(t){var _n87=e.offset-t.startOffset,_o48=t.index;i._removeChildren(_o48,1);var _r23=new Gs(t.data.substr(0,_n87),t.getAttributes()),_s15=new Gs(t.data.substr(_n87),t.getAttributes());i._insertChild(_o48,[_r23,_s15]);}}function xl(e,t){var i=e.getAttributes(),n=t.getAttributes();var _iterator227=_createForOfIteratorHelper(i),_step227;try{for(_iterator227.s();!(_step227=_iterator227.n()).done;){var _e160=_step227.value;if(_e160[1]!==t.getAttribute(_e160[0]))return!1;n.next();}}catch(err){_iterator227.e(err);}finally{_iterator227.f();}return n.next().done;}var Al=function Al(e,t){return Jr(e,t);};var Cl=/*#__PURE__*/function(_fl){_inherits(Cl,_fl);var _super28=_createSuper(Cl);function Cl(e,t,i,n,o){var _this64;_classCallCheck(this,Cl);_this64=_super28.call(this,o),_this64.range=e.clone(),_this64.key=t,_this64.oldValue=void 0===i?null:i,_this64.newValue=void 0===n?null:n;return _this64;}_createClass(Cl,[{key:"type",get:function get(){return null===this.oldValue?"addAttribute":null===this.newValue?"removeAttribute":"changeAttribute";}},{key:"clone",value:function clone(){return new Cl(this.range,this.key,this.oldValue,this.newValue,this.baseVersion);}},{key:"getReversed",value:function getReversed(){return new Cl(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1);}},{key:"toJSON",value:function toJSON(){var e=_get(_getPrototypeOf(Cl.prototype),"toJSON",this).call(this);return e.range=this.range.toJSON(),e;}},{key:"_validate",value:function _validate(){if(!this.range.isFlat)throw new l.a("attribute-operation-range-not-flat",this);var _iterator228=_createForOfIteratorHelper(this.range.getItems({shallow:!0})),_step228;try{for(_iterator228.s();!(_step228=_iterator228.n()).done;){var _e161=_step228.value;if(null!==this.oldValue&&!Al(_e161.getAttribute(this.key),this.oldValue))throw new l.a("attribute-operation-wrong-old-value",this,{item:_e161,key:this.key,value:this.oldValue});if(null===this.oldValue&&null!==this.newValue&&_e161.hasAttribute(this.key))throw new l.a("attribute-operation-attribute-exists",this,{node:_e161,key:this.key});}}catch(err){_iterator228.e(err);}finally{_iterator228.f();}}},{key:"_execute",value:function _execute(){Al(this.oldValue,this.newValue)||function(e,t,i){yl(e.start),yl(e.end);var _iterator229=_createForOfIteratorHelper(e.getItems({shallow:!0})),_step229;try{for(_iterator229.s();!(_step229=_iterator229.n()).done;){var _n88=_step229.value;var _e162=_n88.is("$textProxy")?_n88.textNode:_n88;null!==i?_e162._setAttribute(t,i):_e162._removeAttribute(t),vl(_e162.parent,_e162.index);}}catch(err){_iterator229.e(err);}finally{_iterator229.f();}vl(e.end.parent,e.end.index);}(this.range,this.key,this.newValue);}}],[{key:"className",get:function get(){return"AttributeOperation";}},{key:"fromJSON",value:function fromJSON(e,t){return new Cl(oa.fromJSON(e.range,t),e.key,e.oldValue,e.newValue,e.baseVersion);}}]);return Cl;}(fl);var Tl=/*#__PURE__*/function(_fl2){_inherits(Tl,_fl2);var _super29=_createSuper(Tl);function Tl(e,t){var _this65;_classCallCheck(this,Tl);_this65=_super29.call(this,null),_this65.sourcePosition=e.clone(),_this65.howMany=t;return _this65;}_createClass(Tl,[{key:"type",get:function get(){return"detach";}},{key:"toJSON",value:function toJSON(){var e=_get(_getPrototypeOf(Tl.prototype),"toJSON",this).call(this);return e.sourcePosition=this.sourcePosition.toJSON(),e;}},{key:"_validate",value:function _validate(){if(this.sourcePosition.root.document)throw new l.a("detach-operation-on-document-node",this);}},{key:"_execute",value:function _execute(){wl(oa._createFromPositionAndShift(this.sourcePosition,this.howMany));}}],[{key:"className",get:function get(){return"DetachOperation";}}]);return Tl;}(fl);var El=/*#__PURE__*/function(_fl3){_inherits(El,_fl3);var _super30=_createSuper(El);function El(e,t,i,n){var _this66;_classCallCheck(this,El);_this66=_super30.call(this,n),_this66.sourcePosition=e.clone(),_this66.sourcePosition.stickiness="toNext",_this66.howMany=t,_this66.targetPosition=i.clone(),_this66.targetPosition.stickiness="toNone";return _this66;}_createClass(El,[{key:"type",get:function get(){return"$graveyard"==this.targetPosition.root.rootName?"remove":"$graveyard"==this.sourcePosition.root.rootName?"reinsert":"move";}},{key:"clone",value:function clone(){return new this.constructor(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion);}},{key:"getMovedRangeStart",value:function getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany);}},{key:"getReversed",value:function getReversed(){var e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new this.constructor(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1);}},{key:"_validate",value:function _validate(){var e=this.sourcePosition.parent,t=this.targetPosition.parent,i=this.sourcePosition.offset,n=this.targetPosition.offset;if(i+this.howMany>e.maxOffset)throw new l.a("move-operation-nodes-do-not-exist",this);if(e===t&&i<n&&n<i+this.howMany)throw new l.a("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&"prefix"==ln(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())){var _e163=this.sourcePosition.path.length-1;if(this.targetPosition.path[_e163]>=i&&this.targetPosition.path[_e163]<i+this.howMany)throw new l.a("move-operation-node-into-itself",this);}}},{key:"_execute",value:function _execute(){kl(oa._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition);}},{key:"toJSON",value:function toJSON(){var e=_get(_getPrototypeOf(El.prototype),"toJSON",this).call(this);return e.sourcePosition=this.sourcePosition.toJSON(),e.targetPosition=this.targetPosition.toJSON(),e;}}],[{key:"className",get:function get(){return"MoveOperation";}},{key:"fromJSON",value:function fromJSON(e,t){var i=ea.fromJSON(e.sourcePosition,t),n=ea.fromJSON(e.targetPosition,t);return new this(i,e.howMany,n,e.baseVersion);}}]);return El;}(fl);var Il=/*#__PURE__*/function(_fl4){_inherits(Il,_fl4);var _super31=_createSuper(Il);function Il(e,t,i){var _this67;_classCallCheck(this,Il);_this67=_super31.call(this,i),_this67.position=e.clone(),_this67.position.stickiness="toNone",_this67.nodes=new Qs(_l(t)),_this67.shouldReceiveAttributes=!1;return _this67;}_createClass(Il,[{key:"type",get:function get(){return"insert";}},{key:"howMany",get:function get(){return this.nodes.maxOffset;}},{key:"clone",value:function clone(){var e=new Qs(_toConsumableArray(this.nodes).map(function(e){return e._clone(!0);})),t=new Il(this.position,e,this.baseVersion);return t.shouldReceiveAttributes=this.shouldReceiveAttributes,t;}},{key:"getReversed",value:function getReversed(){var e=this.position.root.document.graveyard,t=new ea(e,[0]);return new El(this.position,this.nodes.maxOffset,t,this.baseVersion+1);}},{key:"_validate",value:function _validate(){var e=this.position.parent;if(!e||e.maxOffset<this.position.offset)throw new l.a("insert-operation-position-invalid",this);}},{key:"_execute",value:function _execute(){var e=this.nodes;this.nodes=new Qs(_toConsumableArray(e).map(function(e){return e._clone(!0);})),bl(this.position,e);}},{key:"toJSON",value:function toJSON(){var e=_get(_getPrototypeOf(Il.prototype),"toJSON",this).call(this);return e.position=this.position.toJSON(),e.nodes=this.nodes.toJSON(),e;}}],[{key:"className",get:function get(){return"InsertOperation";}},{key:"fromJSON",value:function fromJSON(e,t){var i=[];var _iterator230=_createForOfIteratorHelper(e.nodes),_step230;try{for(_iterator230.s();!(_step230=_iterator230.n()).done;){var _t155=_step230.value;_t155.name?i.push(Js.fromJSON(_t155)):i.push(Gs.fromJSON(_t155));}}catch(err){_iterator230.e(err);}finally{_iterator230.f();}var n=new Il(ea.fromJSON(e.position,t),i,e.baseVersion);return n.shouldReceiveAttributes=e.shouldReceiveAttributes,n;}}]);return Il;}(fl);var Sl=/*#__PURE__*/function(_fl5){_inherits(Sl,_fl5);var _super32=_createSuper(Sl);function Sl(e,t,i,n,o,r){var _this68;_classCallCheck(this,Sl);_this68=_super32.call(this,r),_this68.name=e,_this68.oldRange=t?t.clone():null,_this68.newRange=i?i.clone():null,_this68.affectsData=o,_this68._markers=n;return _this68;}_createClass(Sl,[{key:"type",get:function get(){return"marker";}},{key:"clone",value:function clone(){return new Sl(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion);}},{key:"getReversed",value:function getReversed(){return new Sl(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1);}},{key:"_execute",value:function _execute(){var e=this.newRange?"_set":"_remove";this._markers[e](this.name,this.newRange,!0,this.affectsData);}},{key:"toJSON",value:function toJSON(){var e=_get(_getPrototypeOf(Sl.prototype),"toJSON",this).call(this);return this.oldRange&&(e.oldRange=this.oldRange.toJSON()),this.newRange&&(e.newRange=this.newRange.toJSON()),delete e._markers,e;}}],[{key:"className",get:function get(){return"MarkerOperation";}},{key:"fromJSON",value:function fromJSON(e,t){return new Sl(e.name,e.oldRange?oa.fromJSON(e.oldRange,t):null,e.newRange?oa.fromJSON(e.newRange,t):null,t.model.markers,e.affectsData,e.baseVersion);}}]);return Sl;}(fl);var Pl=/*#__PURE__*/function(_fl6){_inherits(Pl,_fl6);var _super33=_createSuper(Pl);function Pl(e,t,i,n){var _this69;_classCallCheck(this,Pl);_this69=_super33.call(this,n),_this69.position=e,_this69.position.stickiness="toNext",_this69.oldName=t,_this69.newName=i;return _this69;}_createClass(Pl,[{key:"type",get:function get(){return"rename";}},{key:"clone",value:function clone(){return new Pl(this.position.clone(),this.oldName,this.newName,this.baseVersion);}},{key:"getReversed",value:function getReversed(){return new Pl(this.position.clone(),this.newName,this.oldName,this.baseVersion+1);}},{key:"_validate",value:function _validate(){var e=this.position.nodeAfter;if(!(e instanceof Js))throw new l.a("rename-operation-wrong-position",this);if(e.name!==this.oldName)throw new l.a("rename-operation-wrong-name",this);}},{key:"_execute",value:function _execute(){this.position.nodeAfter.name=this.newName;}},{key:"toJSON",value:function toJSON(){var e=_get(_getPrototypeOf(Pl.prototype),"toJSON",this).call(this);return e.position=this.position.toJSON(),e;}}],[{key:"className",get:function get(){return"RenameOperation";}},{key:"fromJSON",value:function fromJSON(e,t){return new Pl(ea.fromJSON(e.position,t),e.oldName,e.newName,e.baseVersion);}}]);return Pl;}(fl);var Ml=/*#__PURE__*/function(_fl7){_inherits(Ml,_fl7);var _super34=_createSuper(Ml);function Ml(e,t,i,n,o){var _this70;_classCallCheck(this,Ml);_this70=_super34.call(this,o),_this70.root=e,_this70.key=t,_this70.oldValue=i,_this70.newValue=n;return _this70;}_createClass(Ml,[{key:"type",get:function get(){return null===this.oldValue?"addRootAttribute":null===this.newValue?"removeRootAttribute":"changeRootAttribute";}},{key:"clone",value:function clone(){return new Ml(this.root,this.key,this.oldValue,this.newValue,this.baseVersion);}},{key:"getReversed",value:function getReversed(){return new Ml(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1);}},{key:"_validate",value:function _validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new l.a("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(null!==this.oldValue&&this.root.getAttribute(this.key)!==this.oldValue)throw new l.a("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(null===this.oldValue&&null!==this.newValue&&this.root.hasAttribute(this.key))throw new l.a("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key});}},{key:"_execute",value:function _execute(){null!==this.newValue?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key);}},{key:"toJSON",value:function toJSON(){var e=_get(_getPrototypeOf(Ml.prototype),"toJSON",this).call(this);return e.root=this.root.toJSON(),e;}}],[{key:"className",get:function get(){return"RootAttributeOperation";}},{key:"fromJSON",value:function fromJSON(e,t){if(!t.getRoot(e.root))throw new l.a("rootattribute-operation-fromjson-no-root",this,{rootName:e.root});return new Ml(t.getRoot(e.root),e.key,e.oldValue,e.newValue,e.baseVersion);}}]);return Ml;}(fl);var Nl=/*#__PURE__*/function(_fl8){_inherits(Nl,_fl8);var _super35=_createSuper(Nl);function Nl(e,t,i,n,o){var _this71;_classCallCheck(this,Nl);_this71=_super35.call(this,o),_this71.sourcePosition=e.clone(),_this71.sourcePosition.stickiness="toPrevious",_this71.howMany=t,_this71.targetPosition=i.clone(),_this71.targetPosition.stickiness="toNext",_this71.graveyardPosition=n.clone();return _this71;}_createClass(Nl,[{key:"type",get:function get(){return"merge";}},{key:"deletionPosition",get:function get(){return new ea(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1));}},{key:"movedRange",get:function get(){var e=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new oa(this.sourcePosition,e);}},{key:"clone",value:function clone(){return new this.constructor(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion);}},{key:"getReversed",value:function getReversed(){var e=this.targetPosition._getTransformedByMergeOperation(this),t=this.sourcePosition.path.slice(0,-1),i=new ea(this.sourcePosition.root,t)._getTransformedByMergeOperation(this);return new Rl(e,this.howMany,i,this.graveyardPosition,this.baseVersion+1);}},{key:"_validate",value:function _validate(){var e=this.sourcePosition.parent,t=this.targetPosition.parent;if(!e.parent)throw new l.a("merge-operation-source-position-invalid",this);if(!t.parent)throw new l.a("merge-operation-target-position-invalid",this);if(this.howMany!=e.maxOffset)throw new l.a("merge-operation-how-many-invalid",this);}},{key:"_execute",value:function _execute(){var e=this.sourcePosition.parent;kl(oa._createIn(e),this.targetPosition),kl(oa._createOn(e),this.graveyardPosition);}},{key:"toJSON",value:function toJSON(){var e=_get(_getPrototypeOf(Nl.prototype),"toJSON",this).call(this);return e.sourcePosition=e.sourcePosition.toJSON(),e.targetPosition=e.targetPosition.toJSON(),e.graveyardPosition=e.graveyardPosition.toJSON(),e;}}],[{key:"className",get:function get(){return"MergeOperation";}},{key:"fromJSON",value:function fromJSON(e,t){var i=ea.fromJSON(e.sourcePosition,t),n=ea.fromJSON(e.targetPosition,t),o=ea.fromJSON(e.graveyardPosition,t);return new this(i,e.howMany,n,o,e.baseVersion);}}]);return Nl;}(fl);var Rl=/*#__PURE__*/function(_fl9){_inherits(Rl,_fl9);var _super36=_createSuper(Rl);function Rl(e,t,i,n,o){var _this72;_classCallCheck(this,Rl);_this72=_super36.call(this,o),_this72.splitPosition=e.clone(),_this72.splitPosition.stickiness="toNext",_this72.howMany=t,_this72.insertionPosition=i,_this72.graveyardPosition=n?n.clone():null,_this72.graveyardPosition&&(_this72.graveyardPosition.stickiness="toNext");return _this72;}_createClass(Rl,[{key:"type",get:function get(){return"split";}},{key:"moveTargetPosition",get:function get(){var e=this.insertionPosition.path.slice();return e.push(0),new ea(this.insertionPosition.root,e);}},{key:"movedRange",get:function get(){var e=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new oa(this.splitPosition,e);}},{key:"clone",value:function clone(){return new this.constructor(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion);}},{key:"getReversed",value:function getReversed(){var e=this.splitPosition.root.document.graveyard,t=new ea(e,[0]);return new Nl(this.moveTargetPosition,this.howMany,this.splitPosition,t,this.baseVersion+1);}},{key:"_validate",value:function _validate(){var e=this.splitPosition.parent,t=this.splitPosition.offset;if(!e||e.maxOffset<t)throw new l.a("split-operation-position-invalid",this);if(!e.parent)throw new l.a("split-operation-split-in-root",this);if(this.howMany!=e.maxOffset-this.splitPosition.offset)throw new l.a("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new l.a("split-operation-graveyard-position-invalid",this);}},{key:"_execute",value:function _execute(){var e=this.splitPosition.parent;if(this.graveyardPosition)kl(oa._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{var _t156=e._clone();bl(this.insertionPosition,_t156);}kl(new oa(ea._createAt(e,this.splitPosition.offset),ea._createAt(e,e.maxOffset)),this.moveTargetPosition);}},{key:"toJSON",value:function toJSON(){var e=_get(_getPrototypeOf(Rl.prototype),"toJSON",this).call(this);return e.splitPosition=this.splitPosition.toJSON(),e.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(e.graveyardPosition=this.graveyardPosition.toJSON()),e;}}],[{key:"className",get:function get(){return"SplitOperation";}},{key:"getInsertionPosition",value:function getInsertionPosition(e){var t=e.path.slice(0,-1);return t[t.length-1]++,new ea(e.root,t,"toPrevious");}},{key:"fromJSON",value:function fromJSON(e,t){var i=ea.fromJSON(e.splitPosition,t),n=ea.fromJSON(e.insertionPosition,t),o=e.graveyardPosition?ea.fromJSON(e.graveyardPosition,t):null;return new this(i,e.howMany,n,o,e.baseVersion);}}]);return Rl;}(fl);var zl=/*#__PURE__*/function(_Js){_inherits(zl,_Js);var _super37=_createSuper(zl);function zl(e,t){var _this73;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"main";_classCallCheck(this,zl);_this73=_super37.call(this,t),_this73._document=e,_this73.rootName=i;return _this73;}_createClass(zl,[{key:"document",get:function get(){return this._document;}},{key:"is",value:function is(e,t){return t?t===this.name&&("rootElement"===e||"model:rootElement"===e||"element"===e||"model:element"===e):"rootElement"===e||"model:rootElement"===e||"element"===e||"model:element"===e||"node"===e||"model:node"===e;}},{key:"toJSON",value:function toJSON(){return this.rootName;}}]);return zl;}(Js);var Ol=/*#__PURE__*/function(){function Ol(e,t){_classCallCheck(this,Ol);this.model=e,this.batch=t;}_createClass(Ol,[{key:"createText",value:function createText(e,t){return new Gs(e,t);}},{key:"createElement",value:function createElement(e,t){return new Js(e,t);}},{key:"createDocumentFragment",value:function createDocumentFragment(){return new pl();}},{key:"cloneElement",value:function cloneElement(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!0;return e._clone(t);}},{key:"insert",value:function insert(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(this._assertWriterUsedCorrectly(),e instanceof Gs&&""==e.data)return;var n=ea._createAt(t,i);if(e.parent){if(jl(e.root,n.root))return void this.move(oa._createOn(e),n);if(e.root.document)throw new l.a("model-writer-insert-forbidden-move",this);this.remove(e);}var o=n.root.document?n.root.document.version:null,r=new Il(n,e,o);if(e instanceof Gs&&(r.shouldReceiveAttributes=!0),this.batch.addOperation(r),this.model.applyOperation(r),e instanceof pl){var _iterator231=_createForOfIteratorHelper(e.markers),_step231;try{for(_iterator231.s();!(_step231=_iterator231.n()).done;){var _step231$value=_slicedToArray(_step231.value,2),_t157=_step231$value[0],_i178=_step231$value[1];var _e164=ea._createAt(_i178.root,0),_o49={range:new oa(_i178.start._getCombined(_e164,n),_i178.end._getCombined(_e164,n)),usingOperation:!0,affectsData:!0};this.model.markers.has(_t157)?this.updateMarker(_t157,_o49):this.addMarker(_t157,_o49);}}catch(err){_iterator231.e(err);}finally{_iterator231.f();}}}},{key:"insertText",value:function insertText(e,t,i,n){t instanceof pl||t instanceof Js||t instanceof ea?this.insert(this.createText(e),t,i):this.insert(this.createText(e,t),i,n);}},{key:"insertElement",value:function insertElement(e,t,i,n){t instanceof pl||t instanceof Js||t instanceof ea?this.insert(this.createElement(e),t,i):this.insert(this.createElement(e,t),i,n);}},{key:"append",value:function append(e,t){this.insert(e,t,"end");}},{key:"appendText",value:function appendText(e,t,i){t instanceof pl||t instanceof Js?this.insert(this.createText(e),t,"end"):this.insert(this.createText(e,t),i,"end");}},{key:"appendElement",value:function appendElement(e,t,i){t instanceof pl||t instanceof Js?this.insert(this.createElement(e),t,"end"):this.insert(this.createElement(e,t),i,"end");}},{key:"setAttribute",value:function setAttribute(e,t,i){if(this._assertWriterUsedCorrectly(),i instanceof oa){var _n89=i.getMinimalFlatRanges();var _iterator232=_createForOfIteratorHelper(_n89),_step232;try{for(_iterator232.s();!(_step232=_iterator232.n()).done;){var _i179=_step232.value;Dl(this,e,t,_i179);}}catch(err){_iterator232.e(err);}finally{_iterator232.f();}}else Ll(this,e,t,i);}},{key:"setAttributes",value:function setAttributes(e,t){var _iterator233=_createForOfIteratorHelper(gn(e)),_step233;try{for(_iterator233.s();!(_step233=_iterator233.n()).done;){var _step233$value=_slicedToArray(_step233.value,2),_i180=_step233$value[0],_n90=_step233$value[1];this.setAttribute(_i180,_n90,t);}}catch(err){_iterator233.e(err);}finally{_iterator233.f();}}},{key:"removeAttribute",value:function removeAttribute(e,t){if(this._assertWriterUsedCorrectly(),t instanceof oa){var _i181=t.getMinimalFlatRanges();var _iterator234=_createForOfIteratorHelper(_i181),_step234;try{for(_iterator234.s();!(_step234=_iterator234.n()).done;){var _t158=_step234.value;Dl(this,e,null,_t158);}}catch(err){_iterator234.e(err);}finally{_iterator234.f();}}else Ll(this,e,null,t);}},{key:"clearAttributes",value:function clearAttributes(e){var _this74=this;this._assertWriterUsedCorrectly();var t=function t(e){var _iterator235=_createForOfIteratorHelper(e.getAttributeKeys()),_step235;try{for(_iterator235.s();!(_step235=_iterator235.n()).done;){var _t159=_step235.value;_this74.removeAttribute(_t159,e);}}catch(err){_iterator235.e(err);}finally{_iterator235.f();}};if(e instanceof oa){var _iterator236=_createForOfIteratorHelper(e.getItems()),_step236;try{for(_iterator236.s();!(_step236=_iterator236.n()).done;){var _i182=_step236.value;t(_i182);}}catch(err){_iterator236.e(err);}finally{_iterator236.f();}}else t(e);}},{key:"move",value:function move(e,t,i){if(this._assertWriterUsedCorrectly(),!(e instanceof oa))throw new l.a("writer-move-invalid-range",this);if(!e.isFlat)throw new l.a("writer-move-range-not-flat",this);var n=ea._createAt(t,i);if(n.isEqual(e.start))return;if(this._addOperationForAffectedMarkers("move",e),!jl(e.root,n.root))throw new l.a("writer-move-different-document",this);var o=e.root.document?e.root.document.version:null,r=new El(e.start,e.end.offset-e.start.offset,n,o);this.batch.addOperation(r),this.model.applyOperation(r);}},{key:"remove",value:function remove(e){this._assertWriterUsedCorrectly();var t=(e instanceof oa?e:oa._createOn(e)).getMinimalFlatRanges().reverse();var _iterator237=_createForOfIteratorHelper(t),_step237;try{for(_iterator237.s();!(_step237=_iterator237.n()).done;){var _e165=_step237.value;this._addOperationForAffectedMarkers("move",_e165),Bl(_e165.start,_e165.end.offset-_e165.start.offset,this.batch,this.model);}}catch(err){_iterator237.e(err);}finally{_iterator237.f();}}},{key:"merge",value:function merge(e){this._assertWriterUsedCorrectly();var t=e.nodeBefore,i=e.nodeAfter;if(this._addOperationForAffectedMarkers("merge",e),!(t instanceof Js))throw new l.a("writer-merge-no-element-before",this);if(!(i instanceof Js))throw new l.a("writer-merge-no-element-after",this);e.root.document?this._merge(e):this._mergeDetached(e);}},{key:"createPositionFromPath",value:function createPositionFromPath(e,t,i){return this.model.createPositionFromPath(e,t,i);}},{key:"createPositionAt",value:function createPositionAt(e,t){return this.model.createPositionAt(e,t);}},{key:"createPositionAfter",value:function createPositionAfter(e){return this.model.createPositionAfter(e);}},{key:"createPositionBefore",value:function createPositionBefore(e){return this.model.createPositionBefore(e);}},{key:"createRange",value:function createRange(e,t){return this.model.createRange(e,t);}},{key:"createRangeIn",value:function createRangeIn(e){return this.model.createRangeIn(e);}},{key:"createRangeOn",value:function createRangeOn(e){return this.model.createRangeOn(e);}},{key:"createSelection",value:function createSelection(e,t,i){return this.model.createSelection(e,t,i);}},{key:"_mergeDetached",value:function _mergeDetached(e){var t=e.nodeBefore,i=e.nodeAfter;this.move(oa._createIn(i),ea._createAt(t,"end")),this.remove(i);}},{key:"_merge",value:function _merge(e){var t=ea._createAt(e.nodeBefore,"end"),i=ea._createAt(e.nodeAfter,0),n=e.root.document.graveyard,o=new ea(n,[0]),r=e.root.document.version,s=new Nl(i,e.nodeAfter.maxOffset,t,o,r);this.batch.addOperation(s),this.model.applyOperation(s);}},{key:"rename",value:function rename(e,t){if(this._assertWriterUsedCorrectly(),!(e instanceof Js))throw new l.a("writer-rename-not-element-instance",this);var i=e.root.document?e.root.document.version:null,n=new Pl(ea._createBefore(e),e.name,t,i);this.batch.addOperation(n),this.model.applyOperation(n);}},{key:"split",value:function split(e,t){this._assertWriterUsedCorrectly();var i,n,o=e.parent;if(!o.parent)throw new l.a("writer-split-element-no-parent",this);if(t||(t=o.parent),!e.parent.getAncestors({includeSelf:!0}).includes(t))throw new l.a("writer-split-invalid-limit-element",this);do{var _t160=o.root.document?o.root.document.version:null,_r24=o.maxOffset-e.offset,_s16=Rl.getInsertionPosition(e),_a9=new Rl(e,_r24,_s16,null,_t160);this.batch.addOperation(_a9),this.model.applyOperation(_a9),i||n||(i=o,n=e.parent.nextSibling),o=(e=this.createPositionAfter(e.parent)).parent;}while(o!==t);return{position:e,range:new oa(ea._createAt(i,"end"),ea._createAt(n,0))};}},{key:"wrap",value:function wrap(e,t){if(this._assertWriterUsedCorrectly(),!e.isFlat)throw new l.a("writer-wrap-range-not-flat",this);var i=t instanceof Js?t:new Js(t);if(i.childCount>0)throw new l.a("writer-wrap-element-not-empty",this);if(null!==i.parent)throw new l.a("writer-wrap-element-attached",this);this.insert(i,e.start);var n=new oa(e.start.getShiftedBy(1),e.end.getShiftedBy(1));this.move(n,ea._createAt(i,0));}},{key:"unwrap",value:function unwrap(e){if(this._assertWriterUsedCorrectly(),null===e.parent)throw new l.a("writer-unwrap-element-no-parent",this);this.move(oa._createIn(e),this.createPositionAfter(e)),this.remove(e);}},{key:"addMarker",value:function addMarker(e,t){if(this._assertWriterUsedCorrectly(),!t||"boolean"!=typeof t.usingOperation)throw new l.a("writer-addmarker-no-usingoperation",this);var i=t.usingOperation,n=t.range,o=void 0!==t.affectsData&&t.affectsData;if(this.model.markers.has(e))throw new l.a("writer-addmarker-marker-exists",this);if(!n)throw new l.a("writer-addmarker-no-range",this);return i?(Vl(this,e,null,n,o),this.model.markers.get(e)):this.model.markers._set(e,n,i,o);}},{key:"updateMarker",value:function updateMarker(e,t){this._assertWriterUsedCorrectly();var i="string"==typeof e?e:e.name,n=this.model.markers.get(i);if(!n)throw new l.a("writer-updatemarker-marker-not-exists",this);if(!t)return void this.model.markers._refresh(n);var o="boolean"==typeof t.usingOperation,r="boolean"==typeof t.affectsData,s=r?t.affectsData:n.affectsData;if(!o&&!t.range&&!r)throw new l.a("writer-updatemarker-wrong-options",this);var a=n.getRange(),c=t.range?t.range:a;o&&t.usingOperation!==n.managedUsingOperations?t.usingOperation?Vl(this,i,null,c,s):(Vl(this,i,a,null,s),this.model.markers._set(i,c,void 0,s)):n.managedUsingOperations?Vl(this,i,a,c,s):this.model.markers._set(i,c,void 0,s);}},{key:"removeMarker",value:function removeMarker(e){this._assertWriterUsedCorrectly();var t="string"==typeof e?e:e.name;if(!this.model.markers.has(t))throw new l.a("writer-removemarker-no-marker",this);var i=this.model.markers.get(t);if(!i.managedUsingOperations)return void this.model.markers._remove(t);Vl(this,t,i.getRange(),null,i.affectsData);}},{key:"setSelection",value:function setSelection(e,t,i){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(e,t,i);}},{key:"setSelectionFocus",value:function setSelectionFocus(e,t){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(e,t);}},{key:"setSelectionAttribute",value:function setSelectionAttribute(e,t){if(this._assertWriterUsedCorrectly(),"string"==typeof e)this._setSelectionAttribute(e,t);else{var _iterator238=_createForOfIteratorHelper(gn(e)),_step238;try{for(_iterator238.s();!(_step238=_iterator238.n()).done;){var _step238$value=_slicedToArray(_step238.value,2),_t161=_step238$value[0],_i183=_step238$value[1];this._setSelectionAttribute(_t161,_i183);}}catch(err){_iterator238.e(err);}finally{_iterator238.f();}}}},{key:"removeSelectionAttribute",value:function removeSelectionAttribute(e){if(this._assertWriterUsedCorrectly(),"string"==typeof e)this._removeSelectionAttribute(e);else{var _iterator239=_createForOfIteratorHelper(e),_step239;try{for(_iterator239.s();!(_step239=_iterator239.n()).done;){var _t162=_step239.value;this._removeSelectionAttribute(_t162);}}catch(err){_iterator239.e(err);}finally{_iterator239.f();}}}},{key:"overrideSelectionGravity",value:function overrideSelectionGravity(){return this.model.document.selection._overrideGravity();}},{key:"restoreSelectionGravity",value:function restoreSelectionGravity(e){this.model.document.selection._restoreGravity(e);}},{key:"_setSelectionAttribute",value:function _setSelectionAttribute(e,t){var i=this.model.document.selection;if(i.isCollapsed&&i.anchor.parent.isEmpty){var _n91=_a._getStoreAttributeKey(e);this.setAttribute(_n91,t,i.anchor.parent);}i._setAttribute(e,t);}},{key:"_removeSelectionAttribute",value:function _removeSelectionAttribute(e){var t=this.model.document.selection;if(t.isCollapsed&&t.anchor.parent.isEmpty){var _i184=_a._getStoreAttributeKey(e);this.removeAttribute(_i184,t.anchor.parent);}t._removeAttribute(e);}},{key:"_assertWriterUsedCorrectly",value:function _assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new l.a("writer-incorrect-use",this);}},{key:"_addOperationForAffectedMarkers",value:function _addOperationForAffectedMarkers(e,t){var _iterator240=_createForOfIteratorHelper(this.model.markers),_step240;try{for(_iterator240.s();!(_step240=_iterator240.n()).done;){var _i185=_step240.value;if(!_i185.managedUsingOperations)continue;var _n92=_i185.getRange();var _o50=!1;if("move"===e)_o50=t.containsPosition(_n92.start)||t.start.isEqual(_n92.start)||t.containsPosition(_n92.end)||t.end.isEqual(_n92.end);else{var _e166=t.nodeBefore,_i186=t.nodeAfter,_r25=_n92.start.parent==_e166&&_n92.start.isAtEnd,_s17=_n92.end.parent==_i186&&0==_n92.end.offset,_a10=_n92.end.nodeAfter==_i186,_l4=_n92.start.nodeAfter==_i186;_o50=_r25||_s17||_a10||_l4;}_o50&&this.updateMarker(_i185.name,{range:_n92});}}catch(err){_iterator240.e(err);}finally{_iterator240.f();}}}]);return Ol;}();function Dl(e,t,i,n){var o=e.model,r=o.document;var s,a,l,c=n.start;var _iterator241=_createForOfIteratorHelper(n.getWalker({shallow:!0})),_step241;try{for(_iterator241.s();!(_step241=_iterator241.n()).done;){var _e167=_step241.value;l=_e167.item.getAttribute(t),s&&a!=l&&(a!=i&&d(),c=s),s=_e167.nextPosition,a=l;}}catch(err){_iterator241.e(err);}finally{_iterator241.f();}function d(){var n=new oa(c,s),l=n.root.document?r.version:null,d=new Cl(n,t,a,i,l);e.batch.addOperation(d),o.applyOperation(d);}s instanceof ea&&s!=c&&a!=i&&d();}function Ll(e,t,i,n){var o=e.model,r=o.document,s=n.getAttribute(t);var a,l;if(s!=i){if(n.root===n){var _e168=n.document?r.version:null;l=new Ml(n,t,s,i,_e168);}else{a=new oa(ea._createBefore(n),e.createPositionAfter(n));var _o51=a.root.document?r.version:null;l=new Cl(a,t,s,i,_o51);}e.batch.addOperation(l),o.applyOperation(l);}}function Vl(e,t,i,n,o){var r=e.model,s=r.document,a=new Sl(t,i,n,r.markers,o,s.version);e.batch.addOperation(a),r.applyOperation(a);}function Bl(e,t,i,n){var o;if(e.root.document){var _i187=n.document,_r26=new ea(_i187.graveyard,[0]);o=new El(e,t,_r26,_i187.version);}else o=new Tl(e,t);i.addOperation(o),n.applyOperation(o);}function jl(e,t){return e===t||e instanceof zl&&t instanceof zl;}var Fl=/*#__PURE__*/function(){function Fl(e){_classCallCheck(this,Fl);this._markerCollection=e,this._changesInElement=new Map(),this._elementSnapshots=new Map(),this._changedMarkers=new Map(),this._changeCount=0,this._cachedChanges=null,this._cachedChangesWithGraveyard=null;}_createClass(Fl,[{key:"isEmpty",get:function get(){return 0==this._changesInElement.size&&0==this._changedMarkers.size;}},{key:"refreshItem",value:function refreshItem(e){if(this._isInInsertedElement(e.parent))return;this._markRemove(e.parent,e.startOffset,e.offsetSize),this._markInsert(e.parent,e.startOffset,e.offsetSize);var t=oa._createOn(e);var _iterator242=_createForOfIteratorHelper(this._markerCollection.getMarkersIntersectingRange(t)),_step242;try{for(_iterator242.s();!(_step242=_iterator242.n()).done;){var _e169=_step242.value;var _t163=_e169.getRange();this.bufferMarkerChange(_e169.name,_t163,_t163,_e169.affectsData);}}catch(err){_iterator242.e(err);}finally{_iterator242.f();}this._cachedChanges=null;}},{key:"bufferOperation",value:function bufferOperation(e){switch(e.type){case"insert":if(this._isInInsertedElement(e.position.parent))return;this._markInsert(e.position.parent,e.position.offset,e.nodes.maxOffset);break;case"addAttribute":case"removeAttribute":case"changeAttribute":var _iterator243=_createForOfIteratorHelper(e.range.getItems({shallow:!0})),_step243;try{for(_iterator243.s();!(_step243=_iterator243.n()).done;){var _t164=_step243.value;this._isInInsertedElement(_t164.parent)||this._markAttribute(_t164);}}catch(err){_iterator243.e(err);}finally{_iterator243.f();}break;case"remove":case"move":case"reinsert":{if(e.sourcePosition.isEqual(e.targetPosition)||e.sourcePosition.getShiftedBy(e.howMany).isEqual(e.targetPosition))return;var _t165=this._isInInsertedElement(e.sourcePosition.parent),_i188=this._isInInsertedElement(e.targetPosition.parent);_t165||this._markRemove(e.sourcePosition.parent,e.sourcePosition.offset,e.howMany),_i188||this._markInsert(e.targetPosition.parent,e.getMovedRangeStart().offset,e.howMany);break;}case"rename":{if(this._isInInsertedElement(e.position.parent))return;this._markRemove(e.position.parent,e.position.offset,1),this._markInsert(e.position.parent,e.position.offset,1);var _t166=oa._createFromPositionAndShift(e.position,1);var _iterator244=_createForOfIteratorHelper(this._markerCollection.getMarkersIntersectingRange(_t166)),_step244;try{for(_iterator244.s();!(_step244=_iterator244.n()).done;){var _e170=_step244.value;var _t167=_e170.getRange();this.bufferMarkerChange(_e170.name,_t167,_t167,_e170.affectsData);}}catch(err){_iterator244.e(err);}finally{_iterator244.f();}break;}case"split":{var _t168=e.splitPosition.parent;this._isInInsertedElement(_t168)||this._markRemove(_t168,e.splitPosition.offset,e.howMany),this._isInInsertedElement(e.insertionPosition.parent)||this._markInsert(e.insertionPosition.parent,e.insertionPosition.offset,1),e.graveyardPosition&&this._markRemove(e.graveyardPosition.parent,e.graveyardPosition.offset,1);break;}case"merge":{var _t169=e.sourcePosition.parent;this._isInInsertedElement(_t169.parent)||this._markRemove(_t169.parent,_t169.startOffset,1);var _i189=e.graveyardPosition.parent;this._markInsert(_i189,e.graveyardPosition.offset,1);var _n93=e.targetPosition.parent;this._isInInsertedElement(_n93)||this._markInsert(_n93,e.targetPosition.offset,_t169.maxOffset);break;}}this._cachedChanges=null;}},{key:"bufferMarkerChange",value:function bufferMarkerChange(e,t,i,n){var o=this._changedMarkers.get(e);o?(o.newRange=i,o.affectsData=n,null==o.oldRange&&null==o.newRange&&this._changedMarkers["delete"](e)):this._changedMarkers.set(e,{oldRange:t,newRange:i,affectsData:n});}},{key:"getMarkersToRemove",value:function getMarkersToRemove(){var e=[];var _iterator245=_createForOfIteratorHelper(this._changedMarkers),_step245;try{for(_iterator245.s();!(_step245=_iterator245.n()).done;){var _step245$value=_slicedToArray(_step245.value,2),_t170=_step245$value[0],_i190=_step245$value[1];null!=_i190.oldRange&&e.push({name:_t170,range:_i190.oldRange});}}catch(err){_iterator245.e(err);}finally{_iterator245.f();}return e;}},{key:"getMarkersToAdd",value:function getMarkersToAdd(){var e=[];var _iterator246=_createForOfIteratorHelper(this._changedMarkers),_step246;try{for(_iterator246.s();!(_step246=_iterator246.n()).done;){var _step246$value=_slicedToArray(_step246.value,2),_t171=_step246$value[0],_i191=_step246$value[1];null!=_i191.newRange&&e.push({name:_t171,range:_i191.newRange});}}catch(err){_iterator246.e(err);}finally{_iterator246.f();}return e;}},{key:"getChangedMarkers",value:function getChangedMarkers(){return Array.from(this._changedMarkers).map(function(e){return{name:e[0],data:{oldRange:e[1].oldRange,newRange:e[1].newRange}};});}},{key:"hasDataChanges",value:function hasDataChanges(){var _iterator247=_createForOfIteratorHelper(this._changedMarkers),_step247;try{for(_iterator247.s();!(_step247=_iterator247.n()).done;){var _step247$value=_slicedToArray(_step247.value,2),_e171=_step247$value[1];if(_e171.affectsData)return!0;}}catch(err){_iterator247.e(err);}finally{_iterator247.f();}return this._changesInElement.size>0;}},{key:"getChanges",value:function getChanges(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{includeChangesInGraveyard:!1};if(this._cachedChanges)return e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();var t=[];var _iterator248=_createForOfIteratorHelper(this._changesInElement.keys()),_step248;try{for(_iterator248.s();!(_step248=_iterator248.n()).done;){var _e173=_step248.value;var _i193=this._changesInElement.get(_e173).sort(function(e,t){return e.offset===t.offset?e.type!=t.type?"remove"==e.type?-1:1:0:e.offset<t.offset?-1:1;}),_n95=this._elementSnapshots.get(_e173),_o53=Hl(_e173.getChildren()),_r28=Ul(_n95.length,_i193);var _s19=0,_a12=0;var _iterator250=_createForOfIteratorHelper(_r28),_step250;try{for(_iterator250.s();!(_step250=_iterator250.n()).done;){var _i194=_step250.value;if("i"===_i194)t.push(this._getInsertDiff(_e173,_s19,_o53[_s19].name)),_s19++;else if("r"===_i194)t.push(this._getRemoveDiff(_e173,_s19,_n95[_a12].name)),_a12++;else if("a"===_i194){var _t173;var _i195=_o53[_s19].attributes,_r29=_n95[_a12].attributes;var _l5=void 0;if("$text"==_o53[_s19].name)_l5=new oa(ea._createAt(_e173,_s19),ea._createAt(_e173,_s19+1));else{var _t172=_e173.offsetToIndex(_s19);_l5=new oa(ea._createAt(_e173,_s19),ea._createAt(_e173.getChild(_t172),0));}(_t173=t).push.apply(_t173,_toConsumableArray(this._getAttributesDiff(_l5,_r29,_i195))),_s19++,_a12++;}else _s19++,_a12++;}}catch(err){_iterator250.e(err);}finally{_iterator250.f();}}}catch(err){_iterator248.e(err);}finally{_iterator248.f();}t.sort(function(e,t){return e.position.root!=t.position.root?e.position.root.rootName<t.position.root.rootName?-1:1:e.position.isEqual(t.position)?e.changeCount-t.changeCount:e.position.isBefore(t.position)?-1:1;});for(var _e172=1,_i192=0;_e172<t.length;_e172++){var _n94=t[_i192],_o52=t[_e172],_r27="remove"==_n94.type&&"remove"==_o52.type&&"$text"==_n94.name&&"$text"==_o52.name&&_n94.position.isEqual(_o52.position),_s18="insert"==_n94.type&&"insert"==_o52.type&&"$text"==_n94.name&&"$text"==_o52.name&&_n94.position.parent==_o52.position.parent&&_n94.position.offset+_n94.length==_o52.position.offset,_a11="attribute"==_n94.type&&"attribute"==_o52.type&&_n94.position.parent==_o52.position.parent&&_n94.range.isFlat&&_o52.range.isFlat&&_n94.position.offset+_n94.length==_o52.position.offset&&_n94.attributeKey==_o52.attributeKey&&_n94.attributeOldValue==_o52.attributeOldValue&&_n94.attributeNewValue==_o52.attributeNewValue;_r27||_s18||_a11?(_n94.length++,_a11&&(_n94.range.end=_n94.range.end.getShiftedBy(1)),t[_e172]=null):_i192=_e172;}t=t.filter(function(e){return e;});var _iterator249=_createForOfIteratorHelper(t),_step249;try{for(_iterator249.s();!(_step249=_iterator249.n()).done;){var _e174=_step249.value;delete _e174.changeCount,"attribute"==_e174.type&&(delete _e174.position,delete _e174.length);}}catch(err){_iterator249.e(err);}finally{_iterator249.f();}return this._changeCount=0,this._cachedChangesWithGraveyard=t.slice(),this._cachedChanges=t.filter(Wl),e.includeChangesInGraveyard?this._cachedChangesWithGraveyard:this._cachedChanges;}},{key:"reset",value:function reset(){this._changesInElement.clear(),this._elementSnapshots.clear(),this._changedMarkers.clear(),this._cachedChanges=null;}},{key:"_markInsert",value:function _markInsert(e,t,i){var n={type:"insert",offset:t,howMany:i,count:this._changeCount++};this._markChange(e,n);}},{key:"_markRemove",value:function _markRemove(e,t,i){var n={type:"remove",offset:t,howMany:i,count:this._changeCount++};this._markChange(e,n),this._removeAllNestedChanges(e,t,i);}},{key:"_markAttribute",value:function _markAttribute(e){var t={type:"attribute",offset:e.startOffset,howMany:e.offsetSize,count:this._changeCount++};this._markChange(e.parent,t);}},{key:"_markChange",value:function _markChange(e,t){this._makeSnapshot(e);var i=this._getChangesForElement(e);this._handleChange(t,i),i.push(t);for(var _e175=0;_e175<i.length;_e175++){i[_e175].howMany<1&&(i.splice(_e175,1),_e175--);}}},{key:"_getChangesForElement",value:function _getChangesForElement(e){var t;return this._changesInElement.has(e)?t=this._changesInElement.get(e):(t=[],this._changesInElement.set(e,t)),t;}},{key:"_makeSnapshot",value:function _makeSnapshot(e){this._elementSnapshots.has(e)||this._elementSnapshots.set(e,Hl(e.getChildren()));}},{key:"_handleChange",value:function _handleChange(e,t){e.nodesToHandle=e.howMany;var _iterator251=_createForOfIteratorHelper(t),_step251;try{for(_iterator251.s();!(_step251=_iterator251.n()).done;){var _i196=_step251.value;var _n96=e.offset+e.howMany,_o54=_i196.offset+_i196.howMany;if("insert"==e.type&&("insert"==_i196.type&&(e.offset<=_i196.offset?_i196.offset+=e.howMany:e.offset<_o54&&(_i196.howMany+=e.nodesToHandle,e.nodesToHandle=0)),"remove"==_i196.type&&e.offset<_i196.offset&&(_i196.offset+=e.howMany),"attribute"==_i196.type))if(e.offset<=_i196.offset)_i196.offset+=e.howMany;else if(e.offset<_o54){var _o55=_i196.howMany;_i196.howMany=e.offset-_i196.offset,t.unshift({type:"attribute",offset:_n96,howMany:_o55-_i196.howMany,count:this._changeCount++});}if("remove"==e.type){if("insert"==_i196.type)if(_n96<=_i196.offset)_i196.offset-=e.howMany;else if(_n96<=_o54){if(e.offset<_i196.offset){var _t174=_n96-_i196.offset;_i196.offset=e.offset,_i196.howMany-=_t174,e.nodesToHandle-=_t174;}else _i196.howMany-=e.nodesToHandle,e.nodesToHandle=0;}else if(e.offset<=_i196.offset)e.nodesToHandle-=_i196.howMany,_i196.howMany=0;else if(e.offset<_o54){var _t175=_o54-e.offset;_i196.howMany-=_t175,e.nodesToHandle-=_t175;}if("remove"==_i196.type&&(_n96<=_i196.offset?_i196.offset-=e.howMany:e.offset<_i196.offset&&(e.nodesToHandle+=_i196.howMany,_i196.howMany=0)),"attribute"==_i196.type)if(_n96<=_i196.offset)_i196.offset-=e.howMany;else if(e.offset<_i196.offset){var _t176=_n96-_i196.offset;_i196.offset=e.offset,_i196.howMany-=_t176;}else if(e.offset<_o54)if(_n96<=_o54){var _n97=_i196.howMany;_i196.howMany=e.offset-_i196.offset;var _o56=_n97-_i196.howMany-e.nodesToHandle;t.unshift({type:"attribute",offset:e.offset,howMany:_o56,count:this._changeCount++});}else _i196.howMany-=_o54-e.offset;}if("attribute"==e.type){if("insert"==_i196.type)if(e.offset<_i196.offset&&_n96>_i196.offset){if(_n96>_o54){var _e176={type:"attribute",offset:_o54,howMany:_n96-_o54,count:this._changeCount++};this._handleChange(_e176,t),t.push(_e176);}e.nodesToHandle=_i196.offset-e.offset,e.howMany=e.nodesToHandle;}else e.offset>=_i196.offset&&e.offset<_o54&&(_n96>_o54?(e.nodesToHandle=_n96-_o54,e.offset=_o54):e.nodesToHandle=0);if("remove"==_i196.type&&e.offset<_i196.offset&&_n96>_i196.offset){var _o57={type:"attribute",offset:_i196.offset,howMany:_n96-_i196.offset,count:this._changeCount++};this._handleChange(_o57,t),t.push(_o57),e.nodesToHandle=_i196.offset-e.offset,e.howMany=e.nodesToHandle;}"attribute"==_i196.type&&(e.offset>=_i196.offset&&_n96<=_o54?(e.nodesToHandle=0,e.howMany=0,e.offset=0):e.offset<=_i196.offset&&_n96>=_o54&&(_i196.howMany=0));}}}catch(err){_iterator251.e(err);}finally{_iterator251.f();}e.howMany=e.nodesToHandle,delete e.nodesToHandle;}},{key:"_getInsertDiff",value:function _getInsertDiff(e,t,i){return{type:"insert",position:ea._createAt(e,t),name:i,length:1,changeCount:this._changeCount++};}},{key:"_getRemoveDiff",value:function _getRemoveDiff(e,t,i){return{type:"remove",position:ea._createAt(e,t),name:i,length:1,changeCount:this._changeCount++};}},{key:"_getAttributesDiff",value:function _getAttributesDiff(e,t,i){var n=[];i=new Map(i);var _iterator252=_createForOfIteratorHelper(t),_step252;try{for(_iterator252.s();!(_step252=_iterator252.n()).done;){var _step252$value=_slicedToArray(_step252.value,2),_o58=_step252$value[0],_r30=_step252$value[1];var _t177=i.has(_o58)?i.get(_o58):null;_t177!==_r30&&n.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:_o58,attributeOldValue:_r30,attributeNewValue:_t177,changeCount:this._changeCount++}),i["delete"](_o58);}}catch(err){_iterator252.e(err);}finally{_iterator252.f();}var _iterator253=_createForOfIteratorHelper(i),_step253;try{for(_iterator253.s();!(_step253=_iterator253.n()).done;){var _step253$value=_slicedToArray(_step253.value,2),_t178=_step253$value[0],_o59=_step253$value[1];n.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:_t178,attributeOldValue:null,attributeNewValue:_o59,changeCount:this._changeCount++});}}catch(err){_iterator253.e(err);}finally{_iterator253.f();}return n;}},{key:"_isInInsertedElement",value:function _isInInsertedElement(e){var t=e.parent;if(!t)return!1;var i=this._changesInElement.get(t),n=e.startOffset;if(i){var _iterator254=_createForOfIteratorHelper(i),_step254;try{for(_iterator254.s();!(_step254=_iterator254.n()).done;){var _e177=_step254.value;if("insert"==_e177.type&&n>=_e177.offset&&n<_e177.offset+_e177.howMany)return!0;}}catch(err){_iterator254.e(err);}finally{_iterator254.f();}}return this._isInInsertedElement(t);}},{key:"_removeAllNestedChanges",value:function _removeAllNestedChanges(e,t,i){var n=new oa(ea._createAt(e,t),ea._createAt(e,t+i));var _iterator255=_createForOfIteratorHelper(n.getItems({shallow:!0})),_step255;try{for(_iterator255.s();!(_step255=_iterator255.n()).done;){var _e178=_step255.value;_e178.is("element")&&(this._elementSnapshots["delete"](_e178),this._changesInElement["delete"](_e178),this._removeAllNestedChanges(_e178,0,_e178.maxOffset));}}catch(err){_iterator255.e(err);}finally{_iterator255.f();}}}]);return Fl;}();function Hl(e){var t=[];var _iterator256=_createForOfIteratorHelper(e),_step256;try{for(_iterator256.s();!(_step256=_iterator256.n()).done;){var _i197=_step256.value;if(_i197.is("$text"))for(var _e179=0;_e179<_i197.data.length;_e179++){t.push({name:"$text",attributes:new Map(_i197.getAttributes())});}else t.push({name:_i197.name,attributes:new Map(_i197.getAttributes())});}}catch(err){_iterator256.e(err);}finally{_iterator256.f();}return t;}function Ul(e,t){var i=[];var n=0,o=0;var _iterator257=_createForOfIteratorHelper(t),_step257;try{for(_iterator257.s();!(_step257=_iterator257.n()).done;){var _e180=_step257.value;if(_e180.offset>n){for(var _t180=0;_t180<_e180.offset-n;_t180++){i.push("e");}o+=_e180.offset-n;}if("insert"==_e180.type){for(var _t181=0;_t181<_e180.howMany;_t181++){i.push("i");}n=_e180.offset+_e180.howMany;}else if("remove"==_e180.type){for(var _t182=0;_t182<_e180.howMany;_t182++){i.push("r");}n=_e180.offset,o+=_e180.howMany;}else i.push.apply(i,_toConsumableArray("a".repeat(_e180.howMany).split(""))),n=_e180.offset+_e180.howMany,o+=_e180.howMany;}}catch(err){_iterator257.e(err);}finally{_iterator257.f();}if(o<e)for(var _t179=0;_t179<e-o-n;_t179++){i.push("e");}return i;}function Wl(e){var t=e.position&&"$graveyard"==e.position.root.rootName,i=e.range&&"$graveyard"==e.range.root.rootName;return!t&&!i;}var ql=/*#__PURE__*/function(){function ql(){_classCallCheck(this,ql);this._operations=[],this._undoPairs=new Map(),this._undoneOperations=new Set();}_createClass(ql,[{key:"addOperation",value:function addOperation(e){this._operations.includes(e)||this._operations.push(e);}},{key:"getOperations",value:function getOperations(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:Number.NEGATIVE_INFINITY;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Number.POSITIVE_INFINITY;var i=[];var _iterator258=_createForOfIteratorHelper(this._operations),_step258;try{for(_iterator258.s();!(_step258=_iterator258.n()).done;){var _n98=_step258.value;_n98.baseVersion>=e&&_n98.baseVersion<t&&i.push(_n98);}}catch(err){_iterator258.e(err);}finally{_iterator258.f();}return i;}},{key:"getOperation",value:function getOperation(e){var _iterator259=_createForOfIteratorHelper(this._operations),_step259;try{for(_iterator259.s();!(_step259=_iterator259.n()).done;){var _t183=_step259.value;if(_t183.baseVersion==e)return _t183;}}catch(err){_iterator259.e(err);}finally{_iterator259.f();}}},{key:"setOperationAsUndone",value:function setOperationAsUndone(e,t){this._undoPairs.set(t,e),this._undoneOperations.add(e);}},{key:"isUndoingOperation",value:function isUndoingOperation(e){return this._undoPairs.has(e);}},{key:"isUndoneOperation",value:function isUndoneOperation(e){return this._undoneOperations.has(e);}},{key:"getUndoneOperation",value:function getUndoneOperation(e){return this._undoPairs.get(e);}}]);return ql;}();function $l(e,t){return!!(i=e.charAt(t-1))&&1==i.length&&/[\ud800-\udbff]/.test(i)&&function(e){return!!e&&1==e.length&&/[\udc00-\udfff]/.test(e);}(e.charAt(t));var i;}function Yl(e,t){return!!(i=e.charAt(t))&&1==i.length&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(i);var i;}var Gl=/*#__PURE__*/function(){function Gl(e){var _this75=this;_classCallCheck(this,Gl);this.model=e,this.version=0,this.history=new ql(this),this.selection=new _a(this),this.roots=new Zi({idProperty:"rootName"}),this.differ=new Fl(e.markers),this._postFixers=new Set(),this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root","$graveyard"),this.listenTo(e,"applyOperation",function(e,t){var i=t[0];if(i.isDocumentOperation&&i.baseVersion!==_this75.version)throw new l.a("model-document-applyoperation-wrong-version",_this75,{operation:i});},{priority:"highest"}),this.listenTo(e,"applyOperation",function(e,t){var i=t[0];i.isDocumentOperation&&_this75.differ.bufferOperation(i);},{priority:"high"}),this.listenTo(e,"applyOperation",function(e,t){var i=t[0];i.isDocumentOperation&&(_this75.version++,_this75.history.addOperation(i));},{priority:"low"}),this.listenTo(this.selection,"change",function(){_this75._hasSelectionChangedFromTheLastChangeBlock=!0;}),this.listenTo(e.markers,"update",function(e,t,i,n){_this75.differ.bufferMarkerChange(t.name,i,n,t.affectsData),null===i&&t.on("change",function(e,i){_this75.differ.bufferMarkerChange(t.name,i,t.getRange(),t.affectsData);});});}_createClass(Gl,[{key:"graveyard",get:function get(){return this.getRoot("$graveyard");}},{key:"createRoot",value:function createRoot(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"$root";var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"main";if(this.roots.get(t))throw new l.a("model-document-createroot-name-exists",this,{name:t});var i=new zl(this,e,t);return this.roots.add(i),i;}},{key:"destroy",value:function destroy(){this.selection.destroy(),this.stopListening();}},{key:"getRoot",value:function getRoot(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"main";return this.roots.get(e);}},{key:"getRootNames",value:function getRootNames(){return Array.from(this.roots,function(e){return e.rootName;}).filter(function(e){return"$graveyard"!=e;});}},{key:"registerPostFixer",value:function registerPostFixer(e){this._postFixers.add(e);}},{key:"toJSON",value:function toJSON(){var e=cn(this);return e.selection="[engine.model.DocumentSelection]",e.model="[engine.model.Model]",e;}},{key:"_handleChangeBlock",value:function _handleChangeBlock(e){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(e),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",e.batch):this.fire("change",e.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1;}},{key:"_hasDocumentChangedFromTheLastChangeBlock",value:function _hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock;}},{key:"_getDefaultRoot",value:function _getDefaultRoot(){var _iterator260=_createForOfIteratorHelper(this.roots),_step260;try{for(_iterator260.s();!(_step260=_iterator260.n()).done;){var _e181=_step260.value;if(_e181!==this.graveyard)return _e181;}}catch(err){_iterator260.e(err);}finally{_iterator260.f();}return this.graveyard;}},{key:"_getDefaultRange",value:function _getDefaultRange(){var e=this._getDefaultRoot(),t=this.model,i=t.schema,n=t.createPositionFromPath(e,[0]);return i.getNearestSelectionRange(n)||t.createRange(n);}},{key:"_validateSelectionRange",value:function _validateSelectionRange(e){return Kl(e.start)&&Kl(e.end);}},{key:"_callPostFixers",value:function _callPostFixers(e){var t=!1;do{var _iterator261=_createForOfIteratorHelper(this._postFixers),_step261;try{for(_iterator261.s();!(_step261=_iterator261.n()).done;){var _i198=_step261.value;if(this.selection.refresh(),t=_i198(e),t)break;}}catch(err){_iterator261.e(err);}finally{_iterator261.f();}}while(t);}}]);return Gl;}();function Kl(e){var t=e.textNode;if(t){var _i199=t.data,_n99=e.offset-t.startOffset;return!$l(_i199,_n99)&&!Yl(_i199,_n99);}return!0;}Ke(Gl,u);var Ql=/*#__PURE__*/function(_Symbol$iterator12){function Ql(){_classCallCheck(this,Ql);this._markers=new Map();}_createClass(Ql,[{key:_Symbol$iterator12,value:function value(){return this._markers.values();}},{key:"has",value:function has(e){return this._markers.has(e);}},{key:"get",value:function get(e){return this._markers.get(e)||null;}},{key:"_set",value:function _set(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!1;var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:!1;var o=e instanceof Jl?e.name:e;if(o.includes(","))throw new l.a("markercollection-incorrect-marker-name",this);var r=this._markers.get(o);if(r){var _e182=r.getRange();var _s20=!1;return _e182.isEqual(t)||(r._attachLiveRange(ba.fromRange(t)),_s20=!0),i!=r.managedUsingOperations&&(r._managedUsingOperations=i,_s20=!0),"boolean"==typeof n&&n!=r.affectsData&&(r._affectsData=n,_s20=!0),_s20&&this.fire("update:"+o,r,_e182,t),r;}var s=ba.fromRange(t),a=new Jl(o,s,i,n);return this._markers.set(o,a),this.fire("update:"+o,a,null,t),a;}},{key:"_remove",value:function _remove(e){var t=e instanceof Jl?e.name:e,i=this._markers.get(t);return!!i&&(this._markers["delete"](t),this.fire("update:"+t,i,i.getRange(),null),this._destroyMarker(i),!0);}},{key:"_refresh",value:function _refresh(e){var t=e instanceof Jl?e.name:e,i=this._markers.get(t);if(!i)throw new l.a("markercollection-refresh-marker-not-exists",this);var n=i.getRange();this.fire("update:"+t,i,n,n,i.managedUsingOperations,i.affectsData);}},{key:"getMarkersAtPosition",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getMarkersAtPosition(e){var _iterator262,_step262,_t184;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getMarkersAtPosition$(_context31){while(1){switch(_context31.prev=_context31.next){case 0:_iterator262=_createForOfIteratorHelper(this);_context31.prev=1;_iterator262.s();case 3:if((_step262=_iterator262.n()).done){_context31.next=11;break;}_t184=_step262.value;_context31.t0=_t184.getRange().containsPosition(e);if(!_context31.t0){_context31.next=9;break;}_context31.next=9;return _t184;case 9:_context31.next=3;break;case 11:_context31.next=16;break;case 13:_context31.prev=13;_context31.t1=_context31["catch"](1);_iterator262.e(_context31.t1);case 16:_context31.prev=16;_iterator262.f();return _context31.finish(16);case 19:case"end":return _context31.stop();}}},getMarkersAtPosition,this,[[1,13,16,19]]);})},{key:"getMarkersIntersectingRange",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getMarkersIntersectingRange(e){var _iterator263,_step263,_t185;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getMarkersIntersectingRange$(_context32){while(1){switch(_context32.prev=_context32.next){case 0:_iterator263=_createForOfIteratorHelper(this);_context32.prev=1;_iterator263.s();case 3:if((_step263=_iterator263.n()).done){_context32.next=11;break;}_t185=_step263.value;_context32.t0=null!==_t185.getRange().getIntersection(e);if(!_context32.t0){_context32.next=9;break;}_context32.next=9;return _t185;case 9:_context32.next=3;break;case 11:_context32.next=16;break;case 13:_context32.prev=13;_context32.t1=_context32["catch"](1);_iterator263.e(_context32.t1);case 16:_context32.prev=16;_iterator263.f();return _context32.finish(16);case 19:case"end":return _context32.stop();}}},getMarkersIntersectingRange,this,[[1,13,16,19]]);})},{key:"destroy",value:function destroy(){var _iterator264=_createForOfIteratorHelper(this._markers.values()),_step264;try{for(_iterator264.s();!(_step264=_iterator264.n()).done;){var _e183=_step264.value;this._destroyMarker(_e183);}}catch(err){_iterator264.e(err);}finally{_iterator264.f();}this._markers=null,this.stopListening();}},{key:"getMarkersGroup",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getMarkersGroup(e){var _iterator265,_step265,_t186;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getMarkersGroup$(_context33){while(1){switch(_context33.prev=_context33.next){case 0:_iterator265=_createForOfIteratorHelper(this._markers.values());_context33.prev=1;_iterator265.s();case 3:if((_step265=_iterator265.n()).done){_context33.next=11;break;}_t186=_step265.value;_context33.t0=_t186.name.startsWith(e+":");if(!_context33.t0){_context33.next=9;break;}_context33.next=9;return _t186;case 9:_context33.next=3;break;case 11:_context33.next=16;break;case 13:_context33.prev=13;_context33.t1=_context33["catch"](1);_iterator265.e(_context33.t1);case 16:_context33.prev=16;_iterator265.f();return _context33.finish(16);case 19:case"end":return _context33.stop();}}},getMarkersGroup,this,[[1,13,16,19]]);})},{key:"_destroyMarker",value:function _destroyMarker(e){e.stopListening(),e._detachLiveRange();}}]);return Ql;}(Symbol.iterator);Ke(Ql,u);var Jl=/*#__PURE__*/function(){function Jl(e,t,i,n){_classCallCheck(this,Jl);this.name=e,this._liveRange=this._attachLiveRange(t),this._managedUsingOperations=i,this._affectsData=n;}_createClass(Jl,[{key:"managedUsingOperations",get:function get(){if(!this._liveRange)throw new l.a("marker-destroyed",this);return this._managedUsingOperations;}},{key:"affectsData",get:function get(){if(!this._liveRange)throw new l.a("marker-destroyed",this);return this._affectsData;}},{key:"getStart",value:function getStart(){if(!this._liveRange)throw new l.a("marker-destroyed",this);return this._liveRange.start.clone();}},{key:"getEnd",value:function getEnd(){if(!this._liveRange)throw new l.a("marker-destroyed",this);return this._liveRange.end.clone();}},{key:"getRange",value:function getRange(){if(!this._liveRange)throw new l.a("marker-destroyed",this);return this._liveRange.toRange();}},{key:"is",value:function is(e){return"marker"===e||"model:marker"===e;}},{key:"_attachLiveRange",value:function _attachLiveRange(e){return this._liveRange&&this._detachLiveRange(),e.delegate("change:range").to(this),e.delegate("change:content").to(this),this._liveRange=e,e;}},{key:"_detachLiveRange",value:function _detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null;}}]);return Jl;}();Ke(Jl,u);var Zl=/*#__PURE__*/function(_fl10){_inherits(Zl,_fl10);var _super38=_createSuper(Zl);function Zl(){_classCallCheck(this,Zl);return _super38.apply(this,arguments);}_createClass(Zl,[{key:"type",get:function get(){return"noop";}},{key:"clone",value:function clone(){return new Zl(this.baseVersion);}},{key:"getReversed",value:function getReversed(){return new Zl(this.baseVersion+1);}},{key:"_execute",value:function _execute(){}}],[{key:"className",get:function get(){return"NoOperation";}}]);return Zl;}(fl);var Xl={};Xl[Cl.className]=Cl,Xl[Il.className]=Il,Xl[Sl.className]=Sl,Xl[El.className]=El,Xl[Zl.className]=Zl,Xl[fl.className]=fl,Xl[Pl.className]=Pl,Xl[Ml.className]=Ml,Xl[Rl.className]=Rl,Xl[Nl.className]=Nl;var ec=/*#__PURE__*/function(_ea){_inherits(ec,_ea);var _super39=_createSuper(ec);function ec(e,t){var _this76;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"toNone";_classCallCheck(this,ec);if(_this76=_super39.call(this,e,t,i),!_this76.root.is("rootElement"))throw new l.a("model-liveposition-root-not-rootelement",e);tc.call(_assertThisInitialized(_this76));return _possibleConstructorReturn(_this76);}_createClass(ec,[{key:"detach",value:function detach(){this.stopListening();}},{key:"is",value:function is(e){return"livePosition"===e||"model:livePosition"===e||"position"==e||"model:position"===e;}},{key:"toPosition",value:function toPosition(){return new ea(this.root,this.path.slice(),this.stickiness);}}],[{key:"fromPosition",value:function fromPosition(e,t){return new this(e.root,e.path.slice(),t||e.stickiness);}}]);return ec;}(ea);function tc(){var _this77=this;this.listenTo(this.root.document.model,"applyOperation",function(e,t){var i=t[0];i.isDocumentOperation&&ic.call(_this77,i);},{priority:"low"});}function ic(e){var t=this.getTransformedByOperation(e);if(!this.isEqual(t)){var _e184=this.toPosition();this.path=t.path,this.root=t.root,this.fire("change",_e184);}}Ke(ec,u);var nc=/*#__PURE__*/function(){function nc(e,t,i){_classCallCheck(this,nc);this.model=e,this.writer=t,this.position=i,this.canMergeWith=new Set([this.position.parent]),this.schema=e.schema,this._documentFragment=t.createDocumentFragment(),this._documentFragmentPosition=t.createPositionAt(this._documentFragment,0),this._firstNode=null,this._lastNode=null,this._lastAutoParagraph=null,this._filterAttributesOf=[],this._affectedStart=null,this._affectedEnd=null;}_createClass(nc,[{key:"handleNodes",value:function handleNodes(e){for(var _i200=0,_Array$from6=Array.from(e);_i200<_Array$from6.length;_i200++){var _t187=_Array$from6[_i200];this._handleNode(_t187);}this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[];}},{key:"_updateLastNodeFromAutoParagraph",value:function _updateLastNodeFromAutoParagraph(e){var t=this.writer.createPositionAfter(this._lastNode),i=this.writer.createPositionAfter(e);if(i.isAfter(t)){if(this._lastNode=e,this.position.parent!=e||!this.position.isAtEnd)throw new l.a("insertcontent-invalid-insertion-position",this);this.position=i,this._setAffectedBoundaries(this.position);}}},{key:"getSelectionRange",value:function getSelectionRange(){return this.nodeToSelect?oa._createOn(this.nodeToSelect):this.model.schema.getNearestSelectionRange(this.position);}},{key:"getAffectedRange",value:function getAffectedRange(){return this._affectedStart?new oa(this._affectedStart,this._affectedEnd):null;}},{key:"destroy",value:function destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach();}},{key:"_handleNode",value:function _handleNode(e){if(this.schema.isObject(e))return void this._handleObject(e);var t=this._checkAndAutoParagraphToAllowedPosition(e);t||(t=this._checkAndSplitToAllowedPosition(e),t)?(this._appendToFragment(e),this._firstNode||(this._firstNode=e),this._lastNode=e):this._handleDisallowedNode(e);}},{key:"_insertPartialFragment",value:function _insertPartialFragment(){if(this._documentFragment.isEmpty)return;var e=ec.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=e.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=e.toPosition(),e.detach();}},{key:"_handleObject",value:function _handleObject(e){this._checkAndSplitToAllowedPosition(e)?this._appendToFragment(e):this._tryAutoparagraphing(e);}},{key:"_handleDisallowedNode",value:function _handleDisallowedNode(e){e.is("element")?this.handleNodes(e.getChildren()):this._tryAutoparagraphing(e);}},{key:"_appendToFragment",value:function _appendToFragment(e){if(!this.schema.checkChild(this.position,e))throw new l.a("insertcontent-wrong-position",this,{node:e,position:this.position});this.writer.insert(e,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(e.offsetSize),this.schema.isObject(e)&&!this.schema.checkChild(this.position,"$text")?this.nodeToSelect=e:this.nodeToSelect=null,this._filterAttributesOf.push(e);}},{key:"_setAffectedBoundaries",value:function _setAffectedBoundaries(e){this._affectedStart||(this._affectedStart=ec.fromPosition(e,"toPrevious")),this._affectedEnd&&!this._affectedEnd.isBefore(e)||(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=ec.fromPosition(e,"toNext"));}},{key:"_mergeOnLeft",value:function _mergeOnLeft(){var e=this._firstNode;if(!(e instanceof Js))return;if(!this._canMergeLeft(e))return;var t=ec._createBefore(e);t.stickiness="toNext";var i=ec.fromPosition(this.position,"toNext");this._affectedStart.isEqual(t)&&(this._affectedStart.detach(),this._affectedStart=ec._createAt(t.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=ec._createAt(t.nodeBefore,"end","toNext")),this.position=i.toPosition(),i.detach(),this._filterAttributesOf.push(this.position.parent),t.detach();}},{key:"_mergeOnRight",value:function _mergeOnRight(){var e=this._lastNode;if(!(e instanceof Js))return;if(!this._canMergeRight(e))return;var t=ec._createAfter(e);if(t.stickiness="toNext",!this.position.isEqual(t))throw new l.a("insertcontent-invalid-insertion-position",this);this.position=ea._createAt(t.nodeBefore,"end");var i=ec.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(t)&&(this._affectedEnd.detach(),this._affectedEnd=ec._createAt(t.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=ec._createAt(t.nodeBefore,0,"toPrevious")),this.position=i.toPosition(),i.detach(),this._filterAttributesOf.push(this.position.parent),t.detach();}},{key:"_canMergeLeft",value:function _canMergeLeft(e){var t=e.previousSibling;return t instanceof Js&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(t,e);}},{key:"_canMergeRight",value:function _canMergeRight(e){var t=e.nextSibling;return t instanceof Js&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(e,t);}},{key:"_tryAutoparagraphing",value:function _tryAutoparagraphing(e){var t=this.writer.createElement("paragraph");this._getAllowedIn(this.position.parent,t)&&this.schema.checkChild(t,e)&&(t._appendChild(e),this._handleNode(t));}},{key:"_checkAndAutoParagraphToAllowedPosition",value:function _checkAndAutoParagraphToAllowedPosition(e){if(this.schema.checkChild(this.position.parent,e))return!0;if(!this.schema.checkChild(this.position.parent,"paragraph")||!this.schema.checkChild("paragraph",e))return!1;this._insertPartialFragment();var t=this.writer.createElement("paragraph");return this.writer.insert(t,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=t,this.position=this.writer.createPositionAt(t,0),!0;}},{key:"_checkAndSplitToAllowedPosition",value:function _checkAndSplitToAllowedPosition(e){var t=this._getAllowedIn(this.position.parent,e);if(!t)return!1;for(t!=this.position.parent&&this._insertPartialFragment();t!=this.position.parent;){if(this.position.isAtStart){var _e185=this.position.parent;this.position=this.writer.createPositionBefore(_e185),_e185.isEmpty&&_e185.parent===t&&this.writer.remove(_e185);}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{var _e186=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=_e186,this.canMergeWith.add(this.position.nodeAfter);}}return!0;}},{key:"_getAllowedIn",value:function _getAllowedIn(e,t){return this.schema.checkChild(e,t)?e:this.schema.isLimit(e)?null:this._getAllowedIn(e.parent,t);}}]);return nc;}();function oc(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(t.isCollapsed)return;var n=t.getFirstRange();if("$graveyard"==n.root.rootName)return;var o=e.schema;e.change(function(e){if(!i.doNotResetEntireContent&&function(e,t){var i=e.getLimitElement(t);if(!t.containsEntireContent(i))return!1;var n=t.getFirstRange();if(n.start.parent==n.end.parent)return!1;return e.checkChild(i,"paragraph");}(o,t))return void function(e,t){var i=e.model.schema.getLimitElement(t);e.remove(e.createRangeIn(i)),sc(e,e.createPositionAt(i,0),t);}(e,t);var _ref21=function(e){var t=e.root.document.model,i=e.start;var n=e.end;if(t.hasContent(e,{ignoreMarkers:!0})){var _i201=function(e){var t=e.parent,i=t.root.document.model.schema,n=t.getAncestors({parentFirst:!0,includeSelf:!0});var _iterator266=_createForOfIteratorHelper(n),_step266;try{for(_iterator266.s();!(_step266=_iterator266.n()).done;){var _e187=_step266.value;if(i.isLimit(_e187))return null;if(i.isBlock(_e187))return _e187;}}catch(err){_iterator266.e(err);}finally{_iterator266.f();}}(n);if(_i201&&n.isTouching(t.createPositionAt(_i201,0))){var _i202=t.createSelection(e);t.modifySelection(_i202,{direction:"backward"});var _o60=_i202.getLastPosition(),_r31=t.createRange(_o60,n);t.hasContent(_r31,{ignoreMarkers:!0})||(n=_o60);}}return[ec.fromPosition(i,"toPrevious"),ec.fromPosition(n,"toNext")];}(n),_ref22=_slicedToArray(_ref21,2),r=_ref22[0],s=_ref22[1];r.isTouching(s)||e.remove(e.createRange(r,s)),i.leaveUnmerged||(!function(e,t,i){var n=e.model;if(!rc(e.model.schema,t,i))return;var _ref23=function(e,t){var i=e.getAncestors(),n=t.getAncestors();var o=0;for(;i[o]&&i[o]==n[o];){o++;}return[i[o],n[o]];}(t,i),_ref24=_slicedToArray(_ref23,2),o=_ref24[0],r=_ref24[1];if(!o||!r)return;!n.hasContent(o,{ignoreMarkers:!0})&&n.hasContent(r,{ignoreMarkers:!0})?function e(t,i,n,o){var r=i.parent,s=n.parent;if(r==o||s==o)return;i=t.createPositionAfter(r),(n=t.createPositionBefore(s)).isEqual(i)||t.insert(r,n);for(;i.parent.isEmpty;){var _e188=i.parent;i=t.createPositionBefore(_e188),t.remove(_e188);}if(n=t.createPositionBefore(s),function(e,t){var i=t.nodeBefore,n=t.nodeAfter;i.name!=n.name&&e.rename(i,n.name);e.clearAttributes(i),e.setAttributes(Object.fromEntries(n.getAttributes()),i),e.merge(t);}(t,n),!rc(t.model.schema,i,n))return;e(t,i,n,o);}(e,t,i,o.parent):function e(t,i,n,o){var r=i.parent,s=n.parent;if(r==o||s==o)return;i=t.createPositionAfter(r),(n=t.createPositionBefore(s)).isEqual(i)||t.insert(s,i);t.merge(i);for(;n.parent.isEmpty;){var _e189=n.parent;n=t.createPositionBefore(_e189),t.remove(_e189);}if(!rc(t.model.schema,i,n))return;e(t,i,n,o);}(e,t,i,o.parent);}(e,r,s),o.removeDisallowedAttributes(r.parent.getChildren(),e)),ac(e,t,r),!i.doNotAutoparagraph&&function(e,t){var i=e.checkChild(t,"$text"),n=e.checkChild(t,"paragraph");return!i&&n;}(o,r)&&sc(e,r,t),r.detach(),s.detach();});}function rc(e,t,i){var n=t.parent,o=i.parent;return n!=o&&!e.isLimit(n)&&!e.isLimit(o)&&function(e,t,i){var n=new oa(e,t);var _iterator267=_createForOfIteratorHelper(n.getWalker()),_step267;try{for(_iterator267.s();!(_step267=_iterator267.n()).done;){var _e190=_step267.value;if(i.isLimit(_e190.item))return!1;}}catch(err){_iterator267.e(err);}finally{_iterator267.f();}return!0;}(t,i,e);}function sc(e,t,i){var n=e.createElement("paragraph");e.insert(n,t),ac(e,i,e.createPositionAt(n,0));}function ac(e,t,i){t instanceof _a?e.setSelection(i):t.setTo(i);}function lc(e,t){var i=e.isForward,n=e.walker,o=e.unit,r=e.schema,s=t.type,a=t.item,l=t.nextPosition;if("text"==s)return"word"===e.unit?function(e,t){var i=e.position.textNode;if(i){var _n100=e.position.offset-i.startOffset;for(;!dc(i.data,_n100,t)&&!uc(i,_n100,t);){e.next();var _o61=t?e.position.nodeAfter:e.position.nodeBefore;if(_o61&&_o61.is("$text")){var _n101=_o61.data.charAt(t?0:_o61.data.length-1);' ,.?!:;"-()'.includes(_n101)||(e.next(),i=e.position.textNode);}_n100=e.position.offset-i.startOffset;}}return e.position;}(n,i):function(e,t){var i=e.position.textNode;if(i){var _n102=i.data;var _o62=e.position.offset-i.startOffset;for(;$l(_n102,_o62)||"character"==t&&Yl(_n102,_o62);){e.next(),_o62=e.position.offset-i.startOffset;}}return e.position;}(n,o);if(s==(i?"elementStart":"elementEnd")){if(r.isSelectable(a))return ea._createAt(a,i?"after":"before");if(r.checkChild(l,"$text"))return l;}else{if(r.isLimit(a))return void n.skip(function(){return!0;});if(r.checkChild(l,"$text"))return l;}}function cc(e,t){var i=e.root,n=ea._createAt(i,t?"end":0);return t?new oa(e,n):new oa(n,e);}function dc(e,t,i){var n=t+(i?0:-1);return' ,.?!:;"-()'.includes(e.charAt(n));}function uc(e,t,i){return t===(i?e.endOffset:0);}function hc(e,t){var i=[];Array.from(e.getItems({direction:"backward"})).map(function(e){return t.createRangeOn(e);}).filter(function(t){return(t.start.isAfter(e.start)||t.start.isEqual(e.start))&&(t.end.isBefore(e.end)||t.end.isEqual(e.end));}).forEach(function(e){i.push(e.start.parent),t.remove(e);}),i.forEach(function(e){var i=e;for(;i.parent&&i.isEmpty;){var _e191=t.createRangeOn(i);i=i.parent,t.remove(_e191);}});}function gc(e){e.document.registerPostFixer(function(t){return function(e,t){var i=t.document.selection,n=t.schema,o=[];var r=!1;var _iterator268=_createForOfIteratorHelper(i.getRanges()),_step268;try{for(_iterator268.s();!(_step268=_iterator268.n()).done;){var _e193=_step268.value;var _t188=mc(_e193,n);_t188&&!_t188.isEqual(_e193)?(o.push(_t188),r=!0):o.push(_e193);}}catch(err){_iterator268.e(err);}finally{_iterator268.f();}r&&e.setSelection(function(e){var t=[];t.push(e.shift());var _iterator269=_createForOfIteratorHelper(e),_step269;try{for(_iterator269.s();!(_step269=_iterator269.n()).done;){var _i203=_step269.value;var _e192=t.pop();if(_i203.isEqual(_e192))t.push(_e192);else if(_i203.isIntersecting(_e192)){var _n103=_e192.start.isAfter(_i203.start)?_i203.start:_e192.start,_o63=_e192.end.isAfter(_i203.end)?_e192.end:_i203.end,_r32=new oa(_n103,_o63);t.push(_r32);}else t.push(_e192),t.push(_i203);}}catch(err){_iterator269.e(err);}finally{_iterator269.f();}return t;}(o),{backward:i.isBackward});}(t,e);});}function mc(e,t){return e.isCollapsed?function(e,t){var i=e.start,n=t.getNearestSelectionRange(i);if(!n)return null;if(!n.isCollapsed)return n;var o=n.start;if(i.isEqual(o))return null;return new oa(o);}(e,t):function(e,t){var i=e.start,n=e.end,o=t.checkChild(i,"$text"),r=t.checkChild(n,"$text"),s=t.getLimitElement(i),a=t.getLimitElement(n);if(s===a){if(o&&r)return null;if(function(e,t,i){var n=e.nodeAfter&&!i.isLimit(e.nodeAfter)||i.checkChild(e,"$text"),o=t.nodeBefore&&!i.isLimit(t.nodeBefore)||i.checkChild(t,"$text");return n||o;}(i,n,t)){var _e194=i.nodeAfter&&t.isSelectable(i.nodeAfter)?null:t.getNearestSelectionRange(i,"forward"),_o64=n.nodeBefore&&t.isSelectable(n.nodeBefore)?null:t.getNearestSelectionRange(n,"backward"),_r33=_e194?_e194.start:i,_s21=_o64?_o64.end:n;return new oa(_r33,_s21);}}var l=s&&!s.is("rootElement"),c=a&&!a.is("rootElement");if(l||c){var _e195=i.nodeAfter&&n.nodeBefore&&i.nodeAfter.parent===n.nodeBefore.parent,_o65=l&&(!_e195||!pc(i.nodeAfter,t)),_r34=c&&(!_e195||!pc(n.nodeBefore,t));var _d2=i,_u2=n;return _o65&&(_d2=ea._createBefore(fc(s,t))),_r34&&(_u2=ea._createAfter(fc(a,t))),new oa(_d2,_u2);}return null;}(e,t);}function fc(e,t){var i=e,n=i;for(;t.isLimit(n)&&n.parent;){i=n,n=n.parent;}return i;}function pc(e,t){return e&&t.isSelectable(e);}var bc=/*#__PURE__*/function(){function bc(){var _this78=this;_classCallCheck(this,bc);this.markers=new Ql(),this.document=new Gl(this),this.schema=new $a(),this._pendingChanges=[],this._currentWriter=null,["insertContent","deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(function(e){return _this78.decorate(e);}),this.on("applyOperation",function(e,t){t[0]._validate();},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$block",{allowIn:"$root",isBlock:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck(function(e,t){if("$marker"===t.name)return!0;}),gc(this),this.document.registerPostFixer(Na);}_createClass(bc,[{key:"change",value:function change(e){try{return 0===this._pendingChanges.length?(this._pendingChanges.push({batch:new ml(),callback:e}),this._runPendingChanges()[0]):e(this._currentWriter);}catch(e){l.a.rethrowUnexpectedError(e,this);}}},{key:"enqueueChange",value:function enqueueChange(e,t){try{"string"==typeof e?e=new ml(e):"function"==typeof e&&(t=e,e=new ml()),this._pendingChanges.push({batch:e,callback:t}),1==this._pendingChanges.length&&this._runPendingChanges();}catch(e){l.a.rethrowUnexpectedError(e,this);}}},{key:"applyOperation",value:function applyOperation(e){e._execute();}},{key:"insertContent",value:function insertContent(e,t,i){return function(e,t,i,n){return e.change(function(o){var r;r=i?i instanceof ha||i instanceof _a?i:o.createSelection(i,n):e.document.selection,r.isCollapsed||e.deleteContent(r,{doNotAutoparagraph:!0});var s=new nc(e,o,r.anchor);var a;a=t.is("documentFragment")?t.getChildren():[t],s.handleNodes(a);var l=s.getSelectionRange();l&&(r instanceof _a?o.setSelection(l):r.setTo(l));var c=s.getAffectedRange()||e.createRange(r.anchor);return s.destroy(),c;});}(this,e,t,i);}},{key:"deleteContent",value:function deleteContent(e,t){oc(this,e,t);}},{key:"modifySelection",value:function modifySelection(e,t){!function(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var n=e.schema,o="backward"!=i.direction,r=i.unit?i.unit:"character",s=t.focus,a=new Zs({boundaries:cc(s,o),singleCharacters:!0,direction:o?"forward":"backward"}),l={walker:a,schema:n,isForward:o,unit:r};var c;var _loop3=function _loop3(){if(c.done)return{v:void 0};var i=lc(l,c.value);if(i)return{v:void(t instanceof _a?e.change(function(e){e.setSelectionFocus(i);}):t.setFocus(i))};};for(;c=a.next();){var _ret2=_loop3();if(_typeof(_ret2)==="object")return _ret2.v;}}(this,e,t);}},{key:"getSelectedContent",value:function getSelectedContent(e){return function(e,t){return e.change(function(e){var i=e.createDocumentFragment(),n=t.getFirstRange();if(!n||n.isCollapsed)return i;var o=n.start.root,r=n.start.getCommonPath(n.end),s=o.getNodeByPath(r);var a;a=n.start.parent==n.end.parent?n:e.createRange(e.createPositionAt(s,n.start.path[r.length]),e.createPositionAt(s,n.end.path[r.length]+1));var l=a.end.offset-a.start.offset;var _iterator270=_createForOfIteratorHelper(a.getItems({shallow:!0})),_step270;try{for(_iterator270.s();!(_step270=_iterator270.n()).done;){var _t190=_step270.value;_t190.is("$textProxy")?e.appendText(_t190.data,_t190.getAttributes(),i):e.append(e.cloneElement(_t190,!0),i);}}catch(err){_iterator270.e(err);}finally{_iterator270.f();}if(a!=n){var _t189=n._getTransformedByMove(a.start,e.createPositionAt(i,0),l)[0],_o66=e.createRange(e.createPositionAt(i,0),_t189.start);hc(e.createRange(_t189.end,e.createPositionAt(i,"end")),e),hc(_o66,e);}return i;});}(this,e);}},{key:"hasContent",value:function hasContent(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=e instanceof Js?oa._createIn(e):e;if(i.isCollapsed)return!1;var _t$ignoreWhitespaces=t.ignoreWhitespaces,n=_t$ignoreWhitespaces===void 0?!1:_t$ignoreWhitespaces,_t$ignoreMarkers=t.ignoreMarkers,o=_t$ignoreMarkers===void 0?!1:_t$ignoreMarkers;if(!o){var _iterator271=_createForOfIteratorHelper(this.markers.getMarkersIntersectingRange(i)),_step271;try{for(_iterator271.s();!(_step271=_iterator271.n()).done;){var _e196=_step271.value;if(_e196.affectsData)return!0;}}catch(err){_iterator271.e(err);}finally{_iterator271.f();}}var _iterator272=_createForOfIteratorHelper(i.getItems()),_step272;try{for(_iterator272.s();!(_step272=_iterator272.n()).done;){var _e197=_step272.value;if(this.schema.isContent(_e197)){if(!_e197.is("$textProxy"))return!0;if(!n)return!0;if(-1!==_e197.data.search(/\S/))return!0;}}}catch(err){_iterator272.e(err);}finally{_iterator272.f();}return!1;}},{key:"createPositionFromPath",value:function createPositionFromPath(e,t,i){return new ea(e,t,i);}},{key:"createPositionAt",value:function createPositionAt(e,t){return ea._createAt(e,t);}},{key:"createPositionAfter",value:function createPositionAfter(e){return ea._createAfter(e);}},{key:"createPositionBefore",value:function createPositionBefore(e){return ea._createBefore(e);}},{key:"createRange",value:function createRange(e,t){return new oa(e,t);}},{key:"createRangeIn",value:function createRangeIn(e){return oa._createIn(e);}},{key:"createRangeOn",value:function createRangeOn(e){return oa._createOn(e);}},{key:"createSelection",value:function createSelection(e,t,i){return new ha(e,t,i);}},{key:"createBatch",value:function createBatch(e){return new ml(e);}},{key:"createOperationFromJSON",value:function createOperationFromJSON(e){return/*#__PURE__*/function(){function _class(){_classCallCheck(this,_class);}_createClass(_class,null,[{key:"fromJSON",value:function fromJSON(e,t){return Xl[e.__className].fromJSON(e,t);}}]);return _class;}().fromJSON(e,this.document);}},{key:"destroy",value:function destroy(){this.document.destroy(),this.stopListening();}},{key:"_runPendingChanges",value:function _runPendingChanges(){var e=[];for(this.fire("_beforeChanges");this._pendingChanges.length;){var _t191=this._pendingChanges[0].batch;this._currentWriter=new Ol(this,_t191);var _i204=this._pendingChanges[0].callback(this._currentWriter);e.push(_i204),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null;}return this.fire("_afterChanges"),e;}}]);return bc;}();Ke(bc,Ue);var wc=/*#__PURE__*/function(_zs){_inherits(wc,_zs);var _super40=_createSuper(wc);function wc(e){var _this79;_classCallCheck(this,wc);_this79=_super40.call(this),_this79.editor=e;return _this79;}_createClass(wc,[{key:"set",value:function set(e,t){var _this80=this;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if("string"==typeof t){var _e198=t;t=function t(_t192,i){_this80.editor.execute(_e198),i();};}_get(_getPrototypeOf(wc.prototype),"set",this).call(this,e,t,i);}}]);return wc;}(zs);var kc=/*#__PURE__*/function(){function kc(){var _this81=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,kc);this._context=e.context||new sn({language:e.language}),this._context._addEditor(this,!e.context);var t=Array.from(this.constructor.builtinPlugins||[]);this.config=new Gi(e,this.constructor.defaultConfig),this.config.define("plugins",t),this.config.define(this._context._getEditorConfig()),this.plugins=new Xi(this,t,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this.commands=new Ua(),this.set("state","initializing"),this.once("ready",function(){return _this81.state="ready";},{priority:"high"}),this.once("destroy",function(){return _this81.state="destroyed";},{priority:"high"}),this.set("isReadOnly",!1),this.model=new bc();var i=new Jn();this.data=new dl(this.model,i),this.editing=new Ha(this.model,i),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new ul([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new wc(this),this.keystrokes.listenTo(this.editing.view.document);}_createClass(kc,[{key:"initPlugins",value:function initPlugins(){var e=this.config,t=e.get("plugins"),i=e.get("removePlugins")||[],n=e.get("extraPlugins")||[],o=e.get("substitutePlugins")||[];return this.plugins.init(t.concat(n),i,o);}},{key:"destroy",value:function destroy(){var _this82=this;var e=Promise.resolve();return"initializing"==this.state&&(e=new Promise(function(e){return _this82.once("ready",e);})),e.then(function(){_this82.fire("destroy"),_this82.stopListening(),_this82.commands.destroy();}).then(function(){return _this82.plugins.destroy();}).then(function(){_this82.model.destroy(),_this82.data.destroy(),_this82.editing.destroy(),_this82.keystrokes.destroy();}).then(function(){return _this82._context._removeEditor(_this82);});}},{key:"execute",value:function execute(){try{var _this$commands;return(_this$commands=this.commands).execute.apply(_this$commands,arguments);}catch(e){l.a.rethrowUnexpectedError(e,this);}}},{key:"focus",value:function focus(){this.editing.view.focus();}}]);return kc;}();Ke(kc,Ue);var _c=/*#__PURE__*/function(){function _c(e){_classCallCheck(this,_c);this.editor=e,this._components=new Map();}_createClass(_c,[{key:"names",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function names(){var _iterator273,_step273,_e199;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function names$(_context34){while(1){switch(_context34.prev=_context34.next){case 0:_iterator273=_createForOfIteratorHelper(this._components.values());_context34.prev=1;_iterator273.s();case 3:if((_step273=_iterator273.n()).done){_context34.next=9;break;}_e199=_step273.value;_context34.next=7;return _e199.originalName;case 7:_context34.next=3;break;case 9:_context34.next=14;break;case 11:_context34.prev=11;_context34.t0=_context34["catch"](1);_iterator273.e(_context34.t0);case 14:_context34.prev=14;_iterator273.f();return _context34.finish(14);case 17:case"end":return _context34.stop();}}},names,this,[[1,11,14,17]]);})},{key:"add",value:function add(e,t){this._components.set(vc(e),{callback:t,originalName:e});}},{key:"create",value:function create(e){if(!this.has(e))throw new l.a("componentfactory-item-missing",this,{name:e});return this._components.get(vc(e)).callback(this.editor.locale);}},{key:"has",value:function has(e){return this._components.has(vc(e));}}]);return _c;}();function vc(e){return String(e).toLowerCase();}var yc=/*#__PURE__*/function(){function yc(e){var _this83=this;_classCallCheck(this,yc);this.editor=e,this.componentFactory=new _c(e),this.focusTracker=new Rs(),this._editableElementsMap=new Map(),this.listenTo(e.editing.view.document,"layoutChanged",function(){return _this83.update();});}_createClass(yc,[{key:"element",get:function get(){return null;}},{key:"update",value:function update(){this.fire("update");}},{key:"destroy",value:function destroy(){this.stopListening(),this.focusTracker.destroy();var _iterator274=_createForOfIteratorHelper(this._editableElementsMap.values()),_step274;try{for(_iterator274.s();!(_step274=_iterator274.n()).done;){var _e200=_step274.value;_e200.ckeditorInstance=null;}}catch(err){_iterator274.e(err);}finally{_iterator274.f();}this._editableElementsMap=new Map();}},{key:"setEditableElement",value:function setEditableElement(e,t){this._editableElementsMap.set(e,t),t.ckeditorInstance||(t.ckeditorInstance=this.editor);}},{key:"getEditableElement",value:function getEditableElement(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"main";return this._editableElementsMap.get(e);}},{key:"getEditableElementsNames",value:function getEditableElementsNames(){return this._editableElementsMap.keys();}},{key:"_editableElements",get:function get(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap;}}]);return yc;}();Ke(yc,u);var xc={setData:function setData(e){this.data.set(e);},getData:function getData(e){return this.data.get(e);}};var Ac=/*#__PURE__*/function(_an,_Symbol$iterator13){_inherits(Ac,_an);var _super41=_createSuper(Ac);function Ac(){_classCallCheck(this,Ac);return _super41.apply(this,arguments);}_createClass(Ac,[{key:"init",value:function init(){this.set("hasAny",!1),this._actions=new Zi({idProperty:"_id"}),this._actions.delegate("add","remove").to(this);}},{key:"add",value:function add(e){if("string"!=typeof e)throw new l.a("pendingactions-add-invalid-message",this);var t=Object.create(Ue);return t.set("message",e),this._actions.add(t),this.hasAny=!0,t;}},{key:"remove",value:function remove(e){this._actions.remove(e),this.hasAny=!!this._actions.length;}},{key:"first",get:function get(){return this._actions.get(0);}},{key:_Symbol$iterator13,value:function value(){return this._actions[Symbol.iterator]();}}],[{key:"pluginName",get:function get(){return"PendingActions";}}]);return Ac;}(an,Symbol.iterator);var Cc={cancel:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>',caption:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2z"/><path d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492L17 2.5z" fill-opacity=".6"/></svg>',check:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',cog:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.333 2 .19 2.263a5.899 5.899 0 0 1 1.458.604L14.714 3.4 16.6 5.286l-1.467 1.733c.263.452.468.942.605 1.46L18 8.666v2.666l-2.263.19a5.899 5.899 0 0 1-.604 1.458l1.467 1.733-1.886 1.886-1.733-1.467a5.899 5.899 0 0 1-1.46.605L11.334 18H8.667l-.19-2.263a5.899 5.899 0 0 1-1.458-.604L5.286 16.6 3.4 14.714l1.467-1.733a5.899 5.899 0 0 1-.604-1.458L2 11.333V8.667l2.262-.189a5.899 5.899 0 0 1 .605-1.459L3.4 5.286 5.286 3.4l1.733 1.467a5.899 5.899 0 0 1 1.46-.605L8.666 2h2.666zM10 6.267a3.733 3.733 0 1 0 0 7.466 3.733 3.733 0 0 0 0-7.466z"/></svg>',eraser:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',lowVision:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22 2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z"/></svg>',image:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.91 10.54c.26-.23.64-.21.88.03l3.36 3.14 2.23-2.06a.64.64 0 0 1 .87 0l2.52 2.97V4.5H3.2v10.12l3.71-4.08zm10.27-7.51c.6 0 1.09.47 1.09 1.05v11.84c0 .59-.49 1.06-1.09 1.06H2.79c-.6 0-1.09-.47-1.09-1.06V4.08c0-.58.49-1.05 1.1-1.05h14.38zm-5.22 5.56a1.96 1.96 0 1 1 3.4-1.96 1.96 1.96 0 0 1-3.4 1.96z"/></svg>',alignBottom:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.239 13.938-2.88-1.663a.75.75 0 0 1 .75-1.3L9 12.067V4.75a.75.75 0 1 1 1.5 0v7.318l1.89-1.093a.75.75 0 0 1 .75 1.3l-2.879 1.663a.752.752 0 0 1-.511.187.752.752 0 0 1-.511-.187zM4.25 17a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5H4.25z"/></svg>',alignMiddle:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.75 11.875a.752.752 0 0 1 .508.184l2.883 1.666a.75.75 0 0 1-.659 1.344l-.091-.044-1.892-1.093.001 4.318a.75.75 0 1 1-1.5 0v-4.317l-1.89 1.092a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .51-.187zM15.25 9a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM9.75.375a.75.75 0 0 1 .75.75v4.318l1.89-1.093.092-.045a.75.75 0 0 1 .659 1.344l-2.883 1.667a.752.752 0 0 1-.508.184.752.752 0 0 1-.511-.187L6.359 5.65a.75.75 0 0 1 .75-1.299L9 5.442V1.125a.75.75 0 0 1 .75-.75z"/></svg>',alignTop:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m10.261 7.062 2.88 1.663a.75.75 0 0 1-.75 1.3L10.5 8.933v7.317a.75.75 0 1 1-1.5 0V8.932l-1.89 1.093a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .511-.187.752.752 0 0 1 .511.187zM15.25 4a.75.75 0 1 1 0 1.5H4.75a.75.75 0 0 1 0-1.5h10.5z"/></svg>',alignLeft:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',alignCenter:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>',alignRight:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>',alignJustify:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',objectLeft:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',objectCenter:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M15.003 7v5.5a1 1 0 0 1-1 1H5.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H6.5V12h6.997V7.5z"/></svg>',objectRight:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2zm0-9h5v1.5H2zm0 3h5v1.5H2zm0 3h5v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',objectFullWidth:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18 7v5.5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1zm-1.505.5H3.504V12h12.991V7.5z"/></svg>',objectInline:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',objectBlockLeft:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',objectBlockRight:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',objectSizeFull:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2zm0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.489.489 0 0 1-.476-.5V4c0-.276.213-.5.476-.5h16.19z"/></svg>',objectSizeLarge:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M13 6H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5V8a.5.5 0 0 1 .5-.5h11z"/></svg>',objectSizeSmall:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M7 10H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4a.5.5 0 0 1 .5-.5h5z"/></svg>',objectSizeMedium:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M10 8H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6a.5.5 0 0 1 .5-.5h8z"/></svg>',pencil:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.3 17.37-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5 9.375 17H19v1.5H8z"/></svg>',pilcrow:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4z"/></svg>',quote:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>',threeVerticalDots:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>'};function Tc(_ref25){var e=_ref25.emitter,t=_ref25.activator,i=_ref25.callback,n=_ref25.contextElements;e.listenTo(document,"mousedown",function(e,o){if(!t())return;var r="function"==typeof o.composedPath?o.composedPath():[];var _iterator275=_createForOfIteratorHelper(n),_step275;try{for(_iterator275.s();!(_step275=_iterator275.n()).done;){var _e201=_step275.value;if(_e201.contains(o.target)||r.includes(_e201))return;}}catch(err){_iterator275.e(err);}finally{_iterator275.f();}i();});}function Ec(e){e.set("_isCssTransitionsDisabled",!1),e.disableCssTransitions=function(){e._isCssTransitionsDisabled=!0;},e.enableCssTransitions=function(){e._isCssTransitionsDisabled=!1;},e.extendTemplate({attributes:{"class":[e.bindTemplate["if"]("_isCssTransitionsDisabled","ck-transitions-disabled")]}});}function Ic(_ref26){var e=_ref26.view;e.listenTo(e.element,"submit",function(t,i){i.preventDefault(),e.fire("submit");},{useCapture:!0});}var Sc=/*#__PURE__*/function(_Zi){_inherits(Sc,_Zi);var _super42=_createSuper(Sc);function Sc(){var _this84;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];_classCallCheck(this,Sc);_this84=_super42.call(this,e,{idProperty:"viewUid"}),_this84.on("add",function(e,t,i){_this84._renderViewIntoCollectionParent(t,i);}),_this84.on("remove",function(e,t){t.element&&_this84._parentElement&&t.element.remove();}),_this84._parentElement=null;return _this84;}_createClass(Sc,[{key:"destroy",value:function destroy(){this.map(function(e){return e.destroy();});}},{key:"setParent",value:function setParent(e){this._parentElement=e;var _iterator276=_createForOfIteratorHelper(this),_step276;try{for(_iterator276.s();!(_step276=_iterator276.n()).done;){var _e202=_step276.value;this._renderViewIntoCollectionParent(_e202);}}catch(err){_iterator276.e(err);}finally{_iterator276.f();}}},{key:"delegate",value:function delegate(){var _this85=this;for(var _len20=arguments.length,e=new Array(_len20),_key20=0;_key20<_len20;_key20++){e[_key20]=arguments[_key20];}if(!e.length||!e.every(function(e){return"string"==typeof e;}))throw new l.a("ui-viewcollection-delegate-wrong-events",this);return{to:function to(t){var _iterator277=_createForOfIteratorHelper(_this85),_step277;try{for(_iterator277.s();!(_step277=_iterator277.n()).done;){var _i207=_step277.value;var _iterator280=_createForOfIteratorHelper(e),_step280;try{for(_iterator280.s();!(_step280=_iterator280.n()).done;){var _n104=_step280.value;_i207.delegate(_n104).to(t);}}catch(err){_iterator280.e(err);}finally{_iterator280.f();}}}catch(err){_iterator277.e(err);}finally{_iterator277.f();}_this85.on("add",function(i,n){var _iterator278=_createForOfIteratorHelper(e),_step278;try{for(_iterator278.s();!(_step278=_iterator278.n()).done;){var _i205=_step278.value;n.delegate(_i205).to(t);}}catch(err){_iterator278.e(err);}finally{_iterator278.f();}}),_this85.on("remove",function(i,n){var _iterator279=_createForOfIteratorHelper(e),_step279;try{for(_iterator279.s();!(_step279=_iterator279.n()).done;){var _i206=_step279.value;n.stopDelegating(_i206,t);}}catch(err){_iterator279.e(err);}finally{_iterator279.f();}});}};}},{key:"_renderViewIntoCollectionParent",value:function _renderViewIntoCollectionParent(e,t){e.isRendered||e.render(),e.element&&this._parentElement&&this._parentElement.insertBefore(e.element,this._parentElement.children[t]);}}]);return Sc;}(Zi);i(15);var Pc=/*#__PURE__*/function(){function Pc(e){_classCallCheck(this,Pc);this.element=null,this.isRendered=!1,this.locale=e,this.t=e&&e.t,this._viewCollections=new Zi(),this._unboundChildren=this.createCollection(),this._viewCollections.on("add",function(t,i){i.locale=e;}),this.decorate("render");}_createClass(Pc,[{key:"bindTemplate",get:function get(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=Mc.bind(this,this);}},{key:"createCollection",value:function createCollection(e){var t=new Sc(e);return this._viewCollections.add(t),t;}},{key:"registerChild",value:function registerChild(e){Ji(e)||(e=[e]);var _iterator281=_createForOfIteratorHelper(e),_step281;try{for(_iterator281.s();!(_step281=_iterator281.n()).done;){var _t193=_step281.value;this._unboundChildren.add(_t193);}}catch(err){_iterator281.e(err);}finally{_iterator281.f();}}},{key:"deregisterChild",value:function deregisterChild(e){Ji(e)||(e=[e]);var _iterator282=_createForOfIteratorHelper(e),_step282;try{for(_iterator282.s();!(_step282=_iterator282.n()).done;){var _t194=_step282.value;this._unboundChildren.remove(_t194);}}catch(err){_iterator282.e(err);}finally{_iterator282.f();}}},{key:"setTemplate",value:function setTemplate(e){this.template=new Mc(e);}},{key:"extendTemplate",value:function extendTemplate(e){Mc.extend(this.template,e);}},{key:"render",value:function render(){if(this.isRendered)throw new l.a("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0;}},{key:"destroy",value:function destroy(){this.stopListening(),this._viewCollections.map(function(e){return e.destroy();}),this.template&&this.template._revertData&&this.template.revert(this.element);}}]);return Pc;}();Ke(Pc,Mr),Ke(Pc,Ue);var Mc=/*#__PURE__*/function(){function Mc(e){_classCallCheck(this,Mc);Object.assign(this,Fc(jc(e))),this._isRendered=!1,this._revertData=null;}_createClass(Mc,[{key:"render",value:function render(){var e=this._renderNode({intoFragment:!0});return this._isRendered=!0,e;}},{key:"apply",value:function apply(e){return this._revertData={children:[],bindings:[],attributes:{}},this._renderNode({node:e,isApplying:!0,revertData:this._revertData}),e;}},{key:"revert",value:function revert(e){if(!this._revertData)throw new l.a("ui-template-revert-not-applied",[this,e]);this._revertTemplateFromNode(e,this._revertData);}},{key:"getViews",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function getViews(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function getViews$(_context36){while(1){switch(_context36.prev=_context36.next){case 0:return _context36.delegateYield(/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function e(t){var _iterator283,_step283,_i208;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function e$(_context35){while(1){switch(_context35.prev=_context35.next){case 0:if(!t.children){_context35.next=24;break;}_iterator283=_createForOfIteratorHelper(t.children);_context35.prev=2;_iterator283.s();case 4:if((_step283=_iterator283.n()).done){_context35.next=16;break;}_i208=_step283.value;if(!$c(_i208)){_context35.next=11;break;}_context35.next=9;return _i208;case 9:_context35.next=14;break;case 11:_context35.t0=Yc(_i208);if(!_context35.t0){_context35.next=14;break;}return _context35.delegateYield(e(_i208),"t1",14);case 14:_context35.next=4;break;case 16:_context35.next=21;break;case 18:_context35.prev=18;_context35.t2=_context35["catch"](2);_iterator283.e(_context35.t2);case 21:_context35.prev=21;_iterator283.f();return _context35.finish(21);case 24:case"end":return _context35.stop();}}},e,null,[[2,18,21,24]]);})(this),"t0",1);case 1:case"end":return _context36.stop();}}},getViews,this);})},{key:"_renderNode",value:function _renderNode(e){var t;if(t=e.node?this.tag&&this.text:this.tag?this.text:!this.text,t)throw new l.a("ui-template-wrong-syntax",this);return this.text?this._renderText(e):this._renderElement(e);}},{key:"_renderElement",value:function _renderElement(e){var t=e.node;return t||(t=e.node=document.createElementNS(this.ns||"http://www.w3.org/1999/xhtml",this.tag)),this._renderAttributes(e),this._renderElementChildren(e),this._setUpListeners(e),t;}},{key:"_renderText",value:function _renderText(e){var t=e.node;return t?e.revertData.text=t.textContent:t=e.node=document.createTextNode(""),Oc(this.text)?this._bindToObservable({schema:this.text,updater:Lc(t),data:e}):t.textContent=this.text.join(""),t;}},{key:"_renderAttributes",value:function _renderAttributes(e){var t,i,n,o;if(!this.attributes)return;var r=e.node,s=e.revertData;for(t in this.attributes){if(n=r.getAttribute(t),i=this.attributes[t],s&&(s.attributes[t]=n),o=w(i[0])&&i[0].ns?i[0].ns:null,Oc(i)){var _a13=o?i[0].value:i;s&&Kc(t)&&_a13.unshift(n),this._bindToObservable({schema:_a13,updater:Vc(r,t,o),data:e});}else"style"==t&&"string"!=typeof i[0]?this._renderStyleAttribute(i[0],e):(s&&n&&Kc(t)&&i.unshift(n),i=i.map(function(e){return e&&e.value||e;}).reduce(function(e,t){return e.concat(t);},[]).reduce(Uc,""),qc(i)||r.setAttributeNS(o,t,i));}}},{key:"_renderStyleAttribute",value:function _renderStyleAttribute(e,t){var i=t.node;for(var _n105 in e){var _o67=e[_n105];Oc(_o67)?this._bindToObservable({schema:[_o67],updater:Bc(i,_n105),data:t}):i.style[_n105]=_o67;}}},{key:"_renderElementChildren",value:function _renderElementChildren(e){var t=e.node,i=e.intoFragment?document.createDocumentFragment():t,n=e.isApplying;var o=0;var _iterator284=_createForOfIteratorHelper(this.children),_step284;try{for(_iterator284.s();!(_step284=_iterator284.n()).done;){var _r35=_step284.value;if(Gc(_r35)){if(!n){_r35.setParent(t);var _iterator285=_createForOfIteratorHelper(_r35),_step285;try{for(_iterator285.s();!(_step285=_iterator285.n()).done;){var _e203=_step285.value;i.appendChild(_e203.element);}}catch(err){_iterator285.e(err);}finally{_iterator285.f();}}}else if($c(_r35))n||(_r35.isRendered||_r35.render(),i.appendChild(_r35.element));else if(pr(_r35))i.appendChild(_r35);else if(n){var _t195={children:[],bindings:[],attributes:{}};e.revertData.children.push(_t195),_r35._renderNode({node:i.childNodes[o++],isApplying:!0,revertData:_t195});}else i.appendChild(_r35.render());}}catch(err){_iterator284.e(err);}finally{_iterator284.f();}e.intoFragment&&t.appendChild(i);}},{key:"_setUpListeners",value:function _setUpListeners(e){var _this86=this;if(this.eventListeners){var _loop4=function _loop4(_t196){var i=_this86.eventListeners[_t196].map(function(i){var _t196$split=_t196.split("@"),_t196$split2=_slicedToArray(_t196$split,2),n=_t196$split2[0],o=_t196$split2[1];return i.activateDomEventListener(n,o,e);});e.revertData&&e.revertData.bindings.push(i);};for(var _t196 in this.eventListeners){_loop4(_t196);}}}},{key:"_bindToObservable",value:function _bindToObservable(_ref27){var e=_ref27.schema,t=_ref27.updater,i=_ref27.data;var n=i.revertData;Dc(e,t,i);var o=e.filter(function(e){return!qc(e);}).filter(function(e){return e.observable;}).map(function(n){return n.activateAttributeListener(e,t,i);});n&&n.bindings.push(o);}},{key:"_revertTemplateFromNode",value:function _revertTemplateFromNode(e,t){var _iterator286=_createForOfIteratorHelper(t.bindings),_step286;try{for(_iterator286.s();!(_step286=_iterator286.n()).done;){var _e204=_step286.value;var _iterator287=_createForOfIteratorHelper(_e204),_step287;try{for(_iterator287.s();!(_step287=_iterator287.n()).done;){var _t197=_step287.value;_t197();}}catch(err){_iterator287.e(err);}finally{_iterator287.f();}}}catch(err){_iterator286.e(err);}finally{_iterator286.f();}if(t.text)e.textContent=t.text;else{for(var _i209 in t.attributes){var _n106=t.attributes[_i209];null===_n106?e.removeAttribute(_i209):e.setAttribute(_i209,_n106);}for(var _i210=0;_i210<t.children.length;++_i210){this._revertTemplateFromNode(e.childNodes[_i210],t.children[_i210]);}}}}],[{key:"bind",value:function bind(e,t){return{to:function to(i,n){return new Rc({eventNameOrFunction:i,attribute:i,observable:e,emitter:t,callback:n});},"if":function _if(i,n,o){return new zc({observable:e,emitter:t,attribute:i,valueIfTrue:n,callback:o});}};}},{key:"extend",value:function extend(e,t){if(e._isRendered)throw new l.a("template-extend-render",[this,e]);!function e(t,i){var _t$text;i.attributes&&(t.attributes||(t.attributes={}),Wc(t.attributes,i.attributes));i.eventListeners&&(t.eventListeners||(t.eventListeners={}),Wc(t.eventListeners,i.eventListeners));i.text&&(_t$text=t.text).push.apply(_t$text,_toConsumableArray(i.text));if(i.children&&i.children.length){if(t.children.length!=i.children.length)throw new l.a("ui-template-extend-children-mismatch",t);var _n107=0;var _iterator288=_createForOfIteratorHelper(i.children),_step288;try{for(_iterator288.s();!(_step288=_iterator288.n()).done;){var _o68=_step288.value;e(t.children[_n107++],_o68);}}catch(err){_iterator288.e(err);}finally{_iterator288.f();}}}(e,Fc(jc(t)));}}]);return Mc;}();Ke(Mc,u);var Nc=/*#__PURE__*/function(){function Nc(e){_classCallCheck(this,Nc);Object.assign(this,e);}_createClass(Nc,[{key:"getValue",value:function getValue(e){var t=this.observable[this.attribute];return this.callback?this.callback(t,e):t;}},{key:"activateAttributeListener",value:function activateAttributeListener(e,t,i){var _this87=this;var n=function n(){return Dc(e,t,i);};return this.emitter.listenTo(this.observable,"change:"+this.attribute,n),function(){_this87.emitter.stopListening(_this87.observable,"change:"+_this87.attribute,n);};}}]);return Nc;}();var Rc=/*#__PURE__*/function(_Nc){_inherits(Rc,_Nc);var _super43=_createSuper(Rc);function Rc(){_classCallCheck(this,Rc);return _super43.apply(this,arguments);}_createClass(Rc,[{key:"activateDomEventListener",value:function activateDomEventListener(e,t,i){var _this88=this;var n=function n(e,i){t&&!i.target.matches(t)||("function"==typeof _this88.eventNameOrFunction?_this88.eventNameOrFunction(i):_this88.observable.fire(_this88.eventNameOrFunction,i));};return this.emitter.listenTo(i.node,e,n),function(){_this88.emitter.stopListening(i.node,e,n);};}}]);return Rc;}(Nc);var zc=/*#__PURE__*/function(_Nc2){_inherits(zc,_Nc2);var _super44=_createSuper(zc);function zc(){_classCallCheck(this,zc);return _super44.apply(this,arguments);}_createClass(zc,[{key:"getValue",value:function getValue(e){return!qc(_get(_getPrototypeOf(zc.prototype),"getValue",this).call(this,e))&&(this.valueIfTrue||!0);}}]);return zc;}(Nc);function Oc(e){return!!e&&(e.value&&(e=e.value),Array.isArray(e)?e.some(Oc):e instanceof Nc);}function Dc(e,t,_ref28){var i=_ref28.node;var n=function(e,t){return e.map(function(e){return e instanceof Nc?e.getValue(t):e;});}(e,i);n=1==e.length&&e[0]instanceof zc?n[0]:n.reduce(Uc,""),qc(n)?t.remove():t.set(n);}function Lc(e){return{set:function set(t){e.textContent=t;},remove:function remove(){e.textContent="";}};}function Vc(e,t,i){return{set:function set(n){e.setAttributeNS(i,t,n);},remove:function remove(){e.removeAttributeNS(i,t);}};}function Bc(e,t){return{set:function set(i){e.style[t]=i;},remove:function remove(){e.style[t]=null;}};}function jc(e){return $i(e,function(e){if(e&&(e instanceof Nc||Yc(e)||$c(e)||Gc(e)))return e;});}function Fc(e){if("string"==typeof e?e=function(e){return{text:[e]};}(e):e.text&&function(e){e.text=en(e.text);}(e),e.on&&(e.eventListeners=function(e){for(var _t198 in e){Hc(e,_t198);}return e;}(e.on),delete e.on),!e.text){e.attributes&&function(e){for(var _t200 in e){e[_t200].value&&(e[_t200].value=en(e[_t200].value)),Hc(e,_t200);}}(e.attributes);var _t199=[];if(e.children)if(Gc(e.children))_t199.push(e.children);else{var _iterator289=_createForOfIteratorHelper(e.children),_step289;try{for(_iterator289.s();!(_step289=_iterator289.n()).done;){var _i211=_step289.value;Yc(_i211)||$c(_i211)||pr(_i211)?_t199.push(_i211):_t199.push(new Mc(_i211));}}catch(err){_iterator289.e(err);}finally{_iterator289.f();}}e.children=_t199;}return e;}function Hc(e,t){e[t]=en(e[t]);}function Uc(e,t){return qc(t)?e:qc(e)?t:"".concat(e," ").concat(t);}function Wc(e,t){for(var _i212 in t){var _e$_i;e[_i212]?(_e$_i=e[_i212]).push.apply(_e$_i,_toConsumableArray(t[_i212])):e[_i212]=t[_i212];}}function qc(e){return!e&&0!==e;}function $c(e){return e instanceof Pc;}function Yc(e){return e instanceof Mc;}function Gc(e){return e instanceof Sc;}function Kc(e){return"class"==e||"style"==e;}var Qc=/*#__PURE__*/function(_Sc){_inherits(Qc,_Sc);var _super45=_createSuper(Qc);function Qc(e){var _this89;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];_classCallCheck(this,Qc);_this89=_super45.call(this,t),_this89.locale=e;return _this89;}_createClass(Qc,[{key:"attachToDom",value:function attachToDom(){this._bodyCollectionContainer=new Mc({tag:"div",attributes:{"class":["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection},children:this}).render();var e=document.querySelector(".ck-body-wrapper");e||(e=function(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[];var o=i&&i.xmlns,r=o?e.createElementNS(o,t):e.createElement(t);for(var _e205 in i){r.setAttribute(_e205,i[_e205]);}!vs(n)&&Ji(n)||(n=[n]);var _iterator290=_createForOfIteratorHelper(n),_step290;try{for(_iterator290.s();!(_step290=_iterator290.n()).done;){var _t201=_step290.value;vs(_t201)&&(_t201=e.createTextNode(_t201)),r.appendChild(_t201);}}catch(err){_iterator290.e(err);}finally{_iterator290.f();}return r;}(document,"div",{"class":"ck-body-wrapper"}),document.body.appendChild(e)),e.appendChild(this._bodyCollectionContainer);}},{key:"detachFromDom",value:function detachFromDom(){_get(_getPrototypeOf(Qc.prototype),"destroy",this).call(this),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove();var e=document.querySelector(".ck-body-wrapper");e&&0==e.childElementCount&&e.remove();}}]);return Qc;}(Sc);i(17);var Jc=/*#__PURE__*/function(_Pc){_inherits(Jc,_Pc);var _super46=_createSuper(Jc);function Jc(){var _this90;_classCallCheck(this,Jc);_this90=_super46.call(this);var e=_this90.bindTemplate;_this90.set("content",""),_this90.set("viewBox","0 0 20 20"),_this90.set("fillColor",""),_this90.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{"class":["ck","ck-icon"],viewBox:e.to("viewBox")}});return _this90;}_createClass(Jc,[{key:"render",value:function render(){var _this91=this;_get(_getPrototypeOf(Jc.prototype),"render",this).call(this),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",function(){_this91._updateXMLContent(),_this91._colorFillPaths();}),this.on("change:fillColor",function(){_this91._colorFillPaths();});}},{key:"_updateXMLContent",value:function _updateXMLContent(){if(this.content){var _e206=new DOMParser().parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),_t202=_e206.getAttribute("viewBox");for(_t202&&(this.viewBox=_t202),this.element.innerHTML="";_e206.childNodes.length>0;){this.element.appendChild(_e206.childNodes[0]);}}}},{key:"_colorFillPaths",value:function _colorFillPaths(){var _this92=this;this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(function(e){e.style.fill=_this92.fillColor;});}}]);return Jc;}(Pc);i(19);var Zc=/*#__PURE__*/function(_Pc2){_inherits(Zc,_Pc2);var _super47=_createSuper(Zc);function Zc(e){var _this93;_classCallCheck(this,Zc);_this93=_super47.call(this,e),_this93.set("text",""),_this93.set("position","s");var t=_this93.bindTemplate;_this93.setTemplate({tag:"span",attributes:{"class":["ck","ck-tooltip",t.to("position",function(e){return"ck-tooltip_"+e;}),t["if"]("text","ck-hidden",function(e){return!e.trim();})]},children:[{tag:"span",attributes:{"class":["ck","ck-tooltip__text"]},children:[{text:t.to("text")}]}]});return _this93;}return _createClass(Zc);}(Pc);i(21);var Xc=/*#__PURE__*/function(_Pc3){_inherits(Xc,_Pc3);var _super48=_createSuper(Xc);function Xc(e){var _this94;_classCallCheck(this,Xc);_this94=_super48.call(this,e);var t=_this94.bindTemplate,i=s();_this94.set("class"),_this94.set("labelStyle"),_this94.set("icon"),_this94.set("isEnabled",!0),_this94.set("isOn",!1),_this94.set("isVisible",!0),_this94.set("isToggleable",!1),_this94.set("keystroke"),_this94.set("label"),_this94.set("tabindex",-1),_this94.set("tooltip"),_this94.set("tooltipPosition","s"),_this94.set("type","button"),_this94.set("withText",!1),_this94.set("withKeystroke",!1),_this94.children=_this94.createCollection(),_this94.tooltipView=_this94._createTooltipView(),_this94.labelView=_this94._createLabelView(i),_this94.iconView=new Jc(),_this94.iconView.extendTemplate({attributes:{"class":"ck-button__icon"}}),_this94.keystrokeView=_this94._createKeystrokeView(),_this94.bind("_tooltipString").to(_assertThisInitialized(_this94),"tooltip",_assertThisInitialized(_this94),"label",_assertThisInitialized(_this94),"keystroke",_this94._getTooltipString.bind(_assertThisInitialized(_this94))),_this94.setTemplate({tag:"button",attributes:{"class":["ck","ck-button",t.to("class"),t["if"]("isEnabled","ck-disabled",function(e){return!e;}),t["if"]("isVisible","ck-hidden",function(e){return!e;}),t.to("isOn",function(e){return e?"ck-on":"ck-off";}),t["if"]("withText","ck-button_with-text"),t["if"]("withKeystroke","ck-button_with-keystroke")],type:t.to("type",function(e){return e||"button";}),tabindex:t.to("tabindex"),"aria-labelledby":"ck-editor__aria-label_"+i,"aria-disabled":t["if"]("isEnabled",!0,function(e){return!e;}),"aria-pressed":t.to("isOn",function(e){return!!_this94.isToggleable&&String(e);})},children:_this94.children,on:{mousedown:t.to(function(e){e.preventDefault();}),click:t.to(function(e){_this94.isEnabled?_this94.fire("execute"):e.preventDefault();})}});return _this94;}_createClass(Xc,[{key:"render",value:function render(){_get(_getPrototypeOf(Xc.prototype),"render",this).call(this),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.tooltipView),this.children.add(this.labelView),this.withKeystroke&&this.children.add(this.keystrokeView);}},{key:"focus",value:function focus(){this.element.focus();}},{key:"_createTooltipView",value:function _createTooltipView(){var e=new Zc();return e.bind("text").to(this,"_tooltipString"),e.bind("position").to(this,"tooltipPosition"),e;}},{key:"_createLabelView",value:function _createLabelView(e){var t=new Pc(),i=this.bindTemplate;return t.setTemplate({tag:"span",attributes:{"class":["ck","ck-button__label"],style:i.to("labelStyle"),id:"ck-editor__aria-label_"+e},children:[{text:this.bindTemplate.to("label")}]}),t;}},{key:"_createKeystrokeView",value:function _createKeystrokeView(){var e=new Pc();return e.setTemplate({tag:"span",attributes:{"class":["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",function(e){return Do(e);})}]}),e;}},{key:"_getTooltipString",value:function _getTooltipString(e,t,i){return e?"string"==typeof e?e:(i&&(i=Do(i)),e instanceof Function?e(t,i):"".concat(t).concat(i?" (".concat(i,")"):"")):"";}}]);return Xc;}(Pc);i(23);var ed=/*#__PURE__*/function(_Xc){_inherits(ed,_Xc);var _super49=_createSuper(ed);function ed(e){var _this95;_classCallCheck(this,ed);_this95=_super49.call(this,e),_this95.isToggleable=!0,_this95.toggleSwitchView=_this95._createToggleView(),_this95.extendTemplate({attributes:{"class":"ck-switchbutton"}});return _this95;}_createClass(ed,[{key:"render",value:function render(){_get(_getPrototypeOf(ed.prototype),"render",this).call(this),this.children.add(this.toggleSwitchView);}},{key:"_createToggleView",value:function _createToggleView(){var e=new Pc();return e.setTemplate({tag:"span",attributes:{"class":["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{"class":["ck","ck-button__toggle__inner"]}}]}),e;}}]);return ed;}(Xc);function td(e){return"string"==typeof e?{model:e,label:e,hasBorder:!1,view:{name:"span",styles:{color:e}}}:{model:e.color,label:e.label||e.color,hasBorder:void 0!==e.hasBorder&&e.hasBorder,view:{name:"span",styles:{color:""+e.color}}};}var id=/*#__PURE__*/function(_Xc2){_inherits(id,_Xc2);var _super50=_createSuper(id);function id(e){var _this96;_classCallCheck(this,id);_this96=_super50.call(this,e);var t=_this96.bindTemplate;_this96.set("color"),_this96.set("hasBorder"),_this96.icon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M16.935 5.328a2 2 0 0 1 0 2.829l-7.778 7.778a2 2 0 0 1-2.829 0L3.5 13.107a1.999 1.999 0 1 1 2.828-2.829l.707.707a1 1 0 0 0 1.414 0l5.658-5.657a2 2 0 0 1 2.828 0z"/><path d="M14.814 6.035 8.448 12.4a1 1 0 0 1-1.414 0l-1.413-1.415A1 1 0 1 0 4.207 12.4l2.829 2.829a1 1 0 0 0 1.414 0l7.778-7.778a1 1 0 1 0-1.414-1.415z"/></svg>',_this96.extendTemplate({attributes:{style:{backgroundColor:t.to("color")},"class":["ck","ck-color-grid__tile",t["if"]("hasBorder","ck-color-table__color-tile_bordered")]}});return _this96;}_createClass(id,[{key:"render",value:function render(){_get(_getPrototypeOf(id.prototype),"render",this).call(this),this.iconView.fillColor="hsl(0, 0%, 100%)";}}]);return id;}(Xc);var nd=/*#__PURE__*/function(){function nd(e){var _this97=this;_classCallCheck(this,nd);if(Object.assign(this,e),e.actions&&e.keystrokeHandler){var _loop5=function _loop5(_t203){var i=e.actions[_t203];"string"==typeof i&&(i=[i]);var _iterator291=_createForOfIteratorHelper(i),_step291;try{for(_iterator291.s();!(_step291=_iterator291.n()).done;){var _n108=_step291.value;e.keystrokeHandler.set(_n108,function(e,i){_this97[_t203](),i();});}}catch(err){_iterator291.e(err);}finally{_iterator291.f();}};for(var _t203 in e.actions){_loop5(_t203);}}}_createClass(nd,[{key:"first",get:function get(){return this.focusables.find(od)||null;}},{key:"last",get:function get(){return this.focusables.filter(od).slice(-1)[0]||null;}},{key:"next",get:function get(){return this._getFocusableItem(1);}},{key:"previous",get:function get(){return this._getFocusableItem(-1);}},{key:"current",get:function get(){var _this98=this;var e=null;return null===this.focusTracker.focusedElement?null:(this.focusables.find(function(t,i){var n=t.element===_this98.focusTracker.focusedElement;return n&&(e=i),n;}),e);}},{key:"focusFirst",value:function focusFirst(){this._focus(this.first);}},{key:"focusLast",value:function focusLast(){this._focus(this.last);}},{key:"focusNext",value:function focusNext(){this._focus(this.next);}},{key:"focusPrevious",value:function focusPrevious(){this._focus(this.previous);}},{key:"_focus",value:function _focus(e){e&&e.focus();}},{key:"_getFocusableItem",value:function _getFocusableItem(e){var t=this.current,i=this.focusables.length;if(!i)return null;if(null===t)return this[1===e?"first":"last"];var n=(t+i+e)%i;do{var _t204=this.focusables.get(n);if(od(_t204))return _t204;n=(n+i+e)%i;}while(n!==t);return null;}}]);return nd;}();function od(e){return!(!e.focus||"none"==vr.window.getComputedStyle(e.element).display);}i(25);var rd=/*#__PURE__*/function(_Pc4){_inherits(rd,_Pc4);var _super51=_createSuper(rd);function rd(e,t){var _this99;_classCallCheck(this,rd);_this99=_super51.call(this,e);var i=t&&t.colorDefinitions||[],n={};t&&t.columns&&(n.gridTemplateColumns="repeat( ".concat(t.columns,", 1fr)")),_this99.set("selectedColor"),_this99.items=_this99.createCollection(),_this99.focusTracker=new Rs(),_this99.keystrokes=new zs(),_this99._focusCycler=new nd({focusables:_this99.items,focusTracker:_this99.focusTracker,keystrokeHandler:_this99.keystrokes,actions:{focusPrevious:"arrowleft",focusNext:"arrowright"}}),_this99.items.on("add",function(e,t){t.isOn=t.color===_this99.selectedColor;}),i.forEach(function(e){var t=new id();t.set({color:e.color,label:e.label,tooltip:!0,hasBorder:e.options.hasBorder}),t.on("execute",function(){_this99.fire("execute",{value:e.color,hasBorder:e.options.hasBorder,label:e.label});}),_this99.items.add(t);}),_this99.setTemplate({tag:"div",children:_this99.items,attributes:{"class":["ck","ck-color-grid"],style:n}}),_this99.on("change:selectedColor",function(e,t,i){var _iterator292=_createForOfIteratorHelper(_this99.items),_step292;try{for(_iterator292.s();!(_step292=_iterator292.n()).done;){var _e207=_step292.value;_e207.isOn=_e207.color===i;}}catch(err){_iterator292.e(err);}finally{_iterator292.f();}});return _this99;}_createClass(rd,[{key:"focus",value:function focus(){this.items.length&&this.items.first.focus();}},{key:"focusLast",value:function focusLast(){this.items.length&&this.items.last.focus();}},{key:"render",value:function render(){var _this100=this;_get(_getPrototypeOf(rd.prototype),"render",this).call(this);var _iterator293=_createForOfIteratorHelper(this.items),_step293;try{for(_iterator293.s();!(_step293=_iterator293.n()).done;){var _e208=_step293.value;this.focusTracker.add(_e208.element);}}catch(err){_iterator293.e(err);}finally{_iterator293.f();}this.items.on("add",function(e,t){_this100.focusTracker.add(t.element);}),this.items.on("remove",function(e,t){_this100.focusTracker.remove(t.element);}),this.keystrokes.listenTo(this.element);}}]);return rd;}(Pc);var sd='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>';var ad=/*#__PURE__*/function(_Xc3){_inherits(ad,_Xc3);var _super52=_createSuper(ad);function ad(e){var _this101;_classCallCheck(this,ad);_this101=_super52.call(this,e),_this101.arrowView=_this101._createArrowView(),_this101.extendTemplate({attributes:{"aria-haspopup":!0}}),_this101.delegate("execute").to(_assertThisInitialized(_this101),"open");return _this101;}_createClass(ad,[{key:"render",value:function render(){_get(_getPrototypeOf(ad.prototype),"render",this).call(this),this.children.add(this.arrowView);}},{key:"_createArrowView",value:function _createArrowView(){var e=new Jc();return e.content=sd,e.extendTemplate({attributes:{"class":"ck-dropdown__arrow"}}),e;}}]);return ad;}(Xc);i(27);var ld=/*#__PURE__*/function(_Pc5){_inherits(ld,_Pc5);var _super53=_createSuper(ld);function ld(e){var _this102;_classCallCheck(this,ld);_this102=_super53.call(this,e);var t=_this102.bindTemplate;_this102.set("class"),_this102.set("icon"),_this102.set("isEnabled",!0),_this102.set("isOn",!1),_this102.set("isToggleable",!1),_this102.set("isVisible",!0),_this102.set("keystroke"),_this102.set("label"),_this102.set("tabindex",-1),_this102.set("tooltip"),_this102.set("tooltipPosition","s"),_this102.set("type","button"),_this102.set("withText",!1),_this102.children=_this102.createCollection(),_this102.actionView=_this102._createActionView(),_this102.arrowView=_this102._createArrowView(),_this102.keystrokes=new zs(),_this102.focusTracker=new Rs(),_this102.setTemplate({tag:"div",attributes:{"class":["ck","ck-splitbutton",t.to("class"),t["if"]("isVisible","ck-hidden",function(e){return!e;}),_this102.arrowView.bindTemplate["if"]("isOn","ck-splitbutton_open")]},children:_this102.children});return _this102;}_createClass(ld,[{key:"render",value:function render(){var _this103=this;_get(_getPrototypeOf(ld.prototype),"render",this).call(this),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",function(e,t){_this103.focusTracker.focusedElement===_this103.actionView.element&&(_this103.arrowView.focus(),t());}),this.keystrokes.set("arrowleft",function(e,t){_this103.focusTracker.focusedElement===_this103.arrowView.element&&(_this103.actionView.focus(),t());});}},{key:"focus",value:function focus(){this.actionView.focus();}},{key:"_createActionView",value:function _createActionView(){var e=new Xc();return e.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),e.extendTemplate({attributes:{"class":"ck-splitbutton__action"}}),e.delegate("execute").to(this),e;}},{key:"_createArrowView",value:function _createArrowView(){var e=new Xc(),t=e.bindTemplate;return e.icon=sd,e.extendTemplate({attributes:{"class":"ck-splitbutton__arrow","aria-haspopup":!0,"aria-expanded":t.to("isOn",function(e){return String(e);})}}),e.bind("isEnabled").to(this),e.delegate("execute").to(this,"open"),e;}}]);return ld;}(Pc);var cd=/*#__PURE__*/function(_Pc6){_inherits(cd,_Pc6);var _super54=_createSuper(cd);function cd(e){var _this104;_classCallCheck(this,cd);_this104=_super54.call(this,e);var t=_this104.bindTemplate;_this104.set("isVisible",!1),_this104.set("position","se"),_this104.children=_this104.createCollection(),_this104.setTemplate({tag:"div",attributes:{"class":["ck","ck-reset","ck-dropdown__panel",t.to("position",function(e){return"ck-dropdown__panel_"+e;}),t["if"]("isVisible","ck-dropdown__panel-visible")]},children:_this104.children,on:{selectstart:t.to(function(e){return e.preventDefault();})}});return _this104;}_createClass(cd,[{key:"focus",value:function focus(){this.children.length&&this.children.first.focus();}},{key:"focusLast",value:function focusLast(){if(this.children.length){var _e209=this.children.last;"function"==typeof _e209.focusLast?_e209.focusLast():_e209.focus();}}}]);return cd;}(Pc);i(29);function dd(_ref29){var e=_ref29.element,t=_ref29.target,i=_ref29.positions,n=_ref29.limiter,o=_ref29.fitInViewport;M(t)&&(t=t()),M(n)&&(n=n());var r=function(e){return e&&e.parentNode?e.offsetParent===vr.document.body?null:e.offsetParent:null;}(e),s=new Cs(e),a=new Cs(t);var l,c;if(n||o){var _e210=function(e,t){var i=t.elementRect,n=t.viewportRect,o=i.getArea(),r=function(e,_ref30){var t=_ref30.targetRect,i=_ref30.elementRect,n=_ref30.limiterRect,o=_ref30.viewportRect;var r=[],s=i.getArea();var _iterator294=_createForOfIteratorHelper(e),_step294;try{for(_iterator294.s();!(_step294=_iterator294.n()).done;){var _a14=_step294.value;var _e211=ud(_a14,t,i);if(!_e211)continue;var _e212=_slicedToArray(_e211,2),_l6=_e212[0],_c2=_e212[1];var _d3=0,_u3=0;if(n)if(o){var _e213=n.getIntersection(o);_e213&&(_d3=_e213.getIntersectionArea(_c2));}else _d3=n.getIntersectionArea(_c2);o&&(_u3=o.getIntersectionArea(_c2));var _h2={positionName:_l6,positionRect:_c2,limiterIntersectArea:_d3,viewportIntersectArea:_u3};if(_d3===s)return[_h2];r.push(_h2);}}catch(err){_iterator294.e(err);}finally{_iterator294.f();}return r;}(e,t);if(n){var _e214=hd(r.filter(function(_ref31){var e=_ref31.viewportIntersectArea;return e===o;}),o);if(_e214)return _e214;}return hd(r,o);}(i,{targetRect:a,elementRect:s,limiterRect:n&&new Cs(n).getVisible(),viewportRect:o&&new Cs(vr.window)});var _ref32=_e210||ud(i[0],a,s);var _ref33=_slicedToArray(_ref32,2);c=_ref33[0];l=_ref33[1];}else{var _ud=ud(i[0],a,s);var _ud2=_slicedToArray(_ud,2);c=_ud2[0];l=_ud2[1];}var d=gd(l);return r&&(d=function(_ref34,i){var e=_ref34.left,t=_ref34.top;var n=gd(new Cs(i)),o=xs(i);return e-=n.left,t-=n.top,e+=i.scrollLeft,t+=i.scrollTop,e-=o.left,t-=o.top,{left:e,top:t};}(d,r)),{left:d.left,top:d.top,name:c};}function ud(e,t,i){var n=e(t,i);if(!n)return null;var o=n.left,r=n.top,s=n.name;return[s,i.clone().moveTo(o,r)];}function hd(e,t){var i,n,o=0;var _iterator295=_createForOfIteratorHelper(e),_step295;try{for(_iterator295.s();!(_step295=_iterator295.n()).done;){var _step295$value=_step295.value,_r36=_step295$value.positionName,_s22=_step295$value.positionRect,_a15=_step295$value.limiterIntersectArea,_l7=_step295$value.viewportIntersectArea;if(_a15===t)return[_r36,_s22];var _e215=Math.pow(_l7,2)+Math.pow(_a15,2);_e215>o&&(o=_e215,i=_s22,n=_r36);}}catch(err){_iterator295.e(err);}finally{_iterator295.f();}return i?[n,i]:null;}function gd(_ref35){var e=_ref35.left,t=_ref35.top;var _vr$window2=vr.window,i=_vr$window2.scrollX,n=_vr$window2.scrollY;return{left:e+i,top:t+n};}var md=/*#__PURE__*/function(_Pc7){_inherits(md,_Pc7);var _super55=_createSuper(md);function md(e,t,i){var _this105;_classCallCheck(this,md);_this105=_super55.call(this,e);var n=_this105.bindTemplate;_this105.buttonView=t,_this105.panelView=i,_this105.set("isOpen",!1),_this105.set("isEnabled",!0),_this105.set("class"),_this105.set("id"),_this105.set("panelPosition","auto"),_this105.keystrokes=new zs(),_this105.setTemplate({tag:"div",attributes:{"class":["ck","ck-dropdown",n.to("class"),n["if"]("isEnabled","ck-disabled",function(e){return!e;})],id:n.to("id"),"aria-describedby":n.to("ariaDescribedById")},children:[t,i]}),t.extendTemplate({attributes:{"class":["ck-dropdown__button"]}});return _this105;}_createClass(md,[{key:"render",value:function render(){var _this106=this;_get(_getPrototypeOf(md.prototype),"render",this).call(this),this.listenTo(this.buttonView,"open",function(){_this106.isOpen=!_this106.isOpen;}),this.panelView.bind("isVisible").to(this,"isOpen"),this.on("change:isOpen",function(){_this106.isOpen&&("auto"===_this106.panelPosition?_this106.panelView.position=md._getOptimalPosition({element:_this106.panelView.element,target:_this106.buttonView.element,fitInViewport:!0,positions:_this106._panelPositions}).name:_this106.panelView.position=_this106.panelPosition);}),this.keystrokes.listenTo(this.element);var e=function e(_e216,t){_this106.isOpen&&(_this106.buttonView.focus(),_this106.isOpen=!1,t());};this.keystrokes.set("arrowdown",function(e,t){_this106.buttonView.isEnabled&&!_this106.isOpen&&(_this106.isOpen=!0,t());}),this.keystrokes.set("arrowright",function(e,t){_this106.isOpen&&t();}),this.keystrokes.set("arrowleft",e),this.keystrokes.set("esc",e);}},{key:"focus",value:function focus(){this.buttonView.focus();}},{key:"_panelPositions",get:function get(){var _md$defaultPanelPosit=md.defaultPanelPositions,e=_md$defaultPanelPosit.south,t=_md$defaultPanelPosit.north,i=_md$defaultPanelPosit.southEast,n=_md$defaultPanelPosit.southWest,o=_md$defaultPanelPosit.northEast,r=_md$defaultPanelPosit.northWest,s=_md$defaultPanelPosit.southMiddleEast,a=_md$defaultPanelPosit.southMiddleWest,l=_md$defaultPanelPosit.northMiddleEast,c=_md$defaultPanelPosit.northMiddleWest;return"rtl"!==this.locale.uiLanguageDirection?[i,n,s,a,e,o,r,l,c,t]:[n,i,a,s,e,r,o,c,l,t];}}]);return md;}(Pc);md.defaultPanelPositions={south:function south(e,t){return{top:e.bottom,left:e.left-(t.width-e.width)/2,name:"s"};},southEast:function southEast(e){return{top:e.bottom,left:e.left,name:"se"};},southWest:function southWest(e,t){return{top:e.bottom,left:e.left-t.width+e.width,name:"sw"};},southMiddleEast:function southMiddleEast(e,t){return{top:e.bottom,left:e.left-(t.width-e.width)/4,name:"sme"};},southMiddleWest:function southMiddleWest(e,t){return{top:e.bottom,left:e.left-3*(t.width-e.width)/4,name:"smw"};},north:function north(e,t){return{top:e.top-t.height,left:e.left-(t.width-e.width)/2,name:"n"};},northEast:function northEast(e,t){return{top:e.top-t.height,left:e.left,name:"ne"};},northWest:function northWest(e,t){return{top:e.top-t.height,left:e.left-t.width+e.width,name:"nw"};},northMiddleEast:function northMiddleEast(e,t){return{top:e.top-t.height,left:e.left-(t.width-e.width)/4,name:"nme"};},northMiddleWest:function northMiddleWest(e,t){return{top:e.top-t.height,left:e.left-3*(t.width-e.width)/4,name:"nmw"};}},md._getOptimalPosition=dd;var fd=/*#__PURE__*/function(_Pc8){_inherits(fd,_Pc8);var _super56=_createSuper(fd);function fd(e){var _this107;_classCallCheck(this,fd);_this107=_super56.call(this,e),_this107.setTemplate({tag:"span",attributes:{"class":["ck","ck-toolbar__separator"]}});return _this107;}return _createClass(fd);}(Pc);var pd=/*#__PURE__*/function(_Pc9){_inherits(pd,_Pc9);var _super57=_createSuper(pd);function pd(e){var _this108;_classCallCheck(this,pd);_this108=_super57.call(this,e),_this108.setTemplate({tag:"span",attributes:{"class":["ck","ck-toolbar__line-break"]}});return _this108;}return _createClass(pd);}(Pc);function bd(e){return Array.isArray(e)?{items:e,removeItems:[]}:e?Object.assign({items:[],removeItems:[]},e):{items:[],removeItems:[]};}i(31);var wd=/*#__PURE__*/function(_Pc10){_inherits(wd,_Pc10);var _super58=_createSuper(wd);function wd(e,t){var _this109;_classCallCheck(this,wd);_this109=_super58.call(this,e);var i=_this109.bindTemplate,n=_this109.t;_this109.options=t||{},_this109.set("ariaLabel",n("Editor toolbar")),_this109.set("maxWidth","auto"),_this109.items=_this109.createCollection(),_this109.focusTracker=new Rs(),_this109.keystrokes=new zs(),_this109.set("class"),_this109.set("isCompact",!1),_this109.itemsView=new kd(e),_this109.children=_this109.createCollection(),_this109.children.add(_this109.itemsView),_this109.focusables=_this109.createCollection();var o="rtl"===e.uiLanguageDirection;_this109._focusCycler=new nd({focusables:_this109.focusables,focusTracker:_this109.focusTracker,keystrokeHandler:_this109.keystrokes,actions:{focusPrevious:[o?"arrowright":"arrowleft","arrowup"],focusNext:[o?"arrowleft":"arrowright","arrowdown"]}});var r=["ck","ck-toolbar",i.to("class"),i["if"]("isCompact","ck-toolbar_compact")];var s;_this109.options.shouldGroupWhenFull&&_this109.options.isFloating&&r.push("ck-toolbar_floating"),_this109.setTemplate({tag:"div",attributes:{"class":r,role:"toolbar","aria-label":i.to("ariaLabel"),style:{maxWidth:i.to("maxWidth")}},children:_this109.children,on:{mousedown:(s=_assertThisInitialized(_this109),s.bindTemplate.to(function(e){e.target===s.element&&e.preventDefault();}))}}),_this109._behavior=_this109.options.shouldGroupWhenFull?new vd(_assertThisInitialized(_this109)):new _d(_assertThisInitialized(_this109));return _this109;}_createClass(wd,[{key:"render",value:function render(){var _this110=this;_get(_getPrototypeOf(wd.prototype),"render",this).call(this);var _iterator296=_createForOfIteratorHelper(this.items),_step296;try{for(_iterator296.s();!(_step296=_iterator296.n()).done;){var _e217=_step296.value;this.focusTracker.add(_e217.element);}}catch(err){_iterator296.e(err);}finally{_iterator296.f();}this.items.on("add",function(e,t){_this110.focusTracker.add(t.element);}),this.items.on("remove",function(e,t){_this110.focusTracker.remove(t.element);}),this.keystrokes.listenTo(this.element),this._behavior.render(this);}},{key:"destroy",value:function destroy(){return this._behavior.destroy(),_get(_getPrototypeOf(wd.prototype),"destroy",this).call(this);}},{key:"focus",value:function focus(){this._focusCycler.focusFirst();}},{key:"focusLast",value:function focusLast(){this._focusCycler.focusLast();}},{key:"fillFromConfig",value:function fillFromConfig(e,t){var _this111=this;var i=bd(e),n=i.items.filter(function(e,n,o){return"|"===e||-1===i.removeItems.indexOf(e)&&("-"===e?!_this111.options.shouldGroupWhenFull||(Object(l.b)("toolbarview-line-break-ignored-when-grouping-items",o),!1):!!t.has(e)||(Object(l.b)("toolbarview-item-unavailable",{name:e}),!1));}),o=this._cleanSeparators(n).map(function(e){return"|"===e?new fd():"-"===e?new pd():t.create(e);});this.items.addMany(o);}},{key:"_cleanSeparators",value:function _cleanSeparators(e){var t=function t(e){return"-"!==e&&"|"!==e;},i=e.length,n=e.findIndex(t),o=i-e.slice().reverse().findIndex(t);return e.slice(n,o).filter(function(e,i,n){if(t(e))return!0;return!(i>0&&n[i-1]===e);});}}]);return wd;}(Pc);var kd=/*#__PURE__*/function(_Pc11){_inherits(kd,_Pc11);var _super59=_createSuper(kd);function kd(e){var _this112;_classCallCheck(this,kd);_this112=_super59.call(this,e),_this112.children=_this112.createCollection(),_this112.setTemplate({tag:"div",attributes:{"class":["ck","ck-toolbar__items"]},children:_this112.children});return _this112;}return _createClass(kd);}(Pc);var _d=/*#__PURE__*/function(){function _d(e){_classCallCheck(this,_d);var t=e.bindTemplate;e.set("isVertical",!1),e.itemsView.children.bindTo(e.items).using(function(e){return e;}),e.focusables.bindTo(e.items).using(function(e){return e;}),e.extendTemplate({attributes:{"class":[t["if"]("isVertical","ck-toolbar_vertical")]}});}_createClass(_d,[{key:"render",value:function render(){}},{key:"destroy",value:function destroy(){}}]);return _d;}();var vd=/*#__PURE__*/function(){function vd(e){var _this113=this;_classCallCheck(this,vd);this.view=e,this.viewChildren=e.children,this.viewFocusables=e.focusables,this.viewItemsView=e.itemsView,this.viewFocusTracker=e.focusTracker,this.viewLocale=e.locale,this.ungroupedItems=e.createCollection(),this.groupedItems=e.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),this.resizeObserver=null,this.cachedPadding=null,this.shouldUpdateGroupingOnNextResize=!1,e.itemsView.children.bindTo(this.ungroupedItems).using(function(e){return e;}),this.ungroupedItems.on("add",this._updateFocusCycleableItems.bind(this)),this.ungroupedItems.on("remove",this._updateFocusCycleableItems.bind(this)),e.children.on("add",this._updateFocusCycleableItems.bind(this)),e.children.on("remove",this._updateFocusCycleableItems.bind(this)),e.items.on("change",function(e,t){var i=t.index;var _iterator297=_createForOfIteratorHelper(t.removed),_step297;try{for(_iterator297.s();!(_step297=_iterator297.n()).done;){var _e219=_step297.value;i>=_this113.ungroupedItems.length?_this113.groupedItems.remove(_e219):_this113.ungroupedItems.remove(_e219);}}catch(err){_iterator297.e(err);}finally{_iterator297.f();}for(var _e218=i;_e218<i+t.added.length;_e218++){var _n109=t.added[_e218-i];_e218>_this113.ungroupedItems.length?_this113.groupedItems.add(_n109,_e218-_this113.ungroupedItems.length):_this113.ungroupedItems.add(_n109,_e218);}_this113._updateGrouping();}),e.extendTemplate({attributes:{"class":["ck-toolbar_grouping"]}});}_createClass(vd,[{key:"render",value:function render(e){this.viewElement=e.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(e);}},{key:"destroy",value:function destroy(){this.groupedItemsDropdown.destroy(),this.resizeObserver.destroy();}},{key:"_updateGrouping",value:function _updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!this.viewElement.offsetParent)return void(this.shouldUpdateGroupingOnNextResize=!0);var e=this.groupedItems.length;var t;for(;this._areItemsOverflowing;){this._groupLastItem(),t=!0;}if(!t&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;){this._ungroupFirstItem();}this._areItemsOverflowing&&this._groupLastItem();}this.groupedItems.length!==e&&this.view.fire("groupedItemsUpdate");}},{key:"_areItemsOverflowing",get:function get(){if(!this.ungroupedItems.length)return!1;var e=this.viewElement,t=this.viewLocale.uiLanguageDirection,i=new Cs(e.lastChild),n=new Cs(e);if(!this.cachedPadding){var _i213=vr.window.getComputedStyle(e),_n110="ltr"===t?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(_i213[_n110]);}return"ltr"===t?i.right>n.right-this.cachedPadding:i.left<n.left+this.cachedPadding;}},{key:"_enableGroupingOnResize",value:function _enableGroupingOnResize(){var _this114=this;var e;this.resizeObserver=new Is(this.viewElement,function(t){e&&e===t.contentRect.width&&!_this114.shouldUpdateGroupingOnNextResize||(_this114.shouldUpdateGroupingOnNextResize=!1,_this114._updateGrouping(),e=t.contentRect.width);}),this._updateGrouping();}},{key:"_enableGroupingOnMaxWidthChange",value:function _enableGroupingOnMaxWidthChange(e){var _this115=this;e.on("change:maxWidth",function(){_this115._updateGrouping();});}},{key:"_groupLastItem",value:function _groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new fd()),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0);}},{key:"_ungroupFirstItem",value:function _ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element));}},{key:"_createGroupedItemsDropdown",value:function _createGroupedItemsDropdown(){var e=this.viewLocale,t=e.t,i=Cd(e);return i["class"]="ck-toolbar__grouped-dropdown",i.panelPosition="ltr"===e.uiLanguageDirection?"sw":"se",Td(i,[]),i.buttonView.set({label:t("Show more items"),tooltip:!0,tooltipPosition:"rtl"===e.uiLanguageDirection?"se":"sw",icon:Cc.threeVerticalDots}),i.toolbarView.items.bindTo(this.groupedItems).using(function(e){return e;}),i;}},{key:"_updateFocusCycleableItems",value:function _updateFocusCycleableItems(){var _this116=this;this.viewFocusables.clear(),this.ungroupedItems.map(function(e){_this116.viewFocusables.add(e);}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown);}}]);return vd;}();i(33);var yd=/*#__PURE__*/function(_Pc12){_inherits(yd,_Pc12);var _super60=_createSuper(yd);function yd(){var _this117;_classCallCheck(this,yd);_this117=_super60.call(this),_this117.items=_this117.createCollection(),_this117.focusTracker=new Rs(),_this117.keystrokes=new zs(),_this117._focusCycler=new nd({focusables:_this117.items,focusTracker:_this117.focusTracker,keystrokeHandler:_this117.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),_this117.setTemplate({tag:"ul",attributes:{"class":["ck","ck-reset","ck-list"]},children:_this117.items});return _this117;}_createClass(yd,[{key:"render",value:function render(){var _this118=this;_get(_getPrototypeOf(yd.prototype),"render",this).call(this);var _iterator298=_createForOfIteratorHelper(this.items),_step298;try{for(_iterator298.s();!(_step298=_iterator298.n()).done;){var _e220=_step298.value;this.focusTracker.add(_e220.element);}}catch(err){_iterator298.e(err);}finally{_iterator298.f();}this.items.on("add",function(e,t){_this118.focusTracker.add(t.element);}),this.items.on("remove",function(e,t){_this118.focusTracker.remove(t.element);}),this.keystrokes.listenTo(this.element);}},{key:"focus",value:function focus(){this._focusCycler.focusFirst();}},{key:"focusLast",value:function focusLast(){this._focusCycler.focusLast();}}]);return yd;}(Pc);var xd=/*#__PURE__*/function(_Pc13){_inherits(xd,_Pc13);var _super61=_createSuper(xd);function xd(e){var _this119;_classCallCheck(this,xd);_this119=_super61.call(this,e),_this119.children=_this119.createCollection(),_this119.setTemplate({tag:"li",attributes:{"class":["ck","ck-list__item"]},children:_this119.children});return _this119;}_createClass(xd,[{key:"focus",value:function focus(){this.children.first.focus();}}]);return xd;}(Pc);var Ad=/*#__PURE__*/function(_Pc14){_inherits(Ad,_Pc14);var _super62=_createSuper(Ad);function Ad(e){var _this120;_classCallCheck(this,Ad);_this120=_super62.call(this,e),_this120.setTemplate({tag:"li",attributes:{"class":["ck","ck-list__separator"]}});return _this120;}return _createClass(Ad);}(Pc);i(35),i(37);function Cd(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:ad;var i=new t(e),n=new cd(e),o=new md(e,i,n);return i.bind("isEnabled").to(o),i instanceof ad?i.bind("isOn").to(o,"isOpen"):i.arrowView.bind("isOn").to(o,"isOpen"),function(e){(function(e){e.on("render",function(){Tc({emitter:e,activator:function activator(){return e.isOpen;},callback:function callback(){e.isOpen=!1;},contextElements:[e.element]});});})(e),function(e){e.on("execute",function(t){t.source instanceof ed||(e.isOpen=!1);});}(e),function(e){e.keystrokes.set("arrowdown",function(t,i){e.isOpen&&(e.panelView.focus(),i());}),e.keystrokes.set("arrowup",function(t,i){e.isOpen&&(e.panelView.focusLast(),i());});}(e);}(o),o;}function Td(e,t){var i=e.locale,n=i.t,o=e.toolbarView=new wd(i);o.set("ariaLabel",n("Dropdown toolbar")),e.extendTemplate({attributes:{"class":["ck-toolbar-dropdown"]}}),t.map(function(e){return o.items.add(e);}),e.panelView.children.add(o),o.items.delegate("execute").to(e);}function Ed(e,t){var i=e.locale,n=e.listView=new yd(i);n.items.bindTo(t).using(function(_ref36){var e=_ref36.type,t=_ref36.model;if("separator"===e)return new Ad(i);if("button"===e||"switchbutton"===e){var _o70;var _n111=new xd(i);var _o69;return _o69="button"===e?new Xc(i):new ed(i),(_o70=_o69).bind.apply(_o70,_toConsumableArray(Object.keys(t))).to(t),_o69.delegate("execute").to(_n111),_n111.children.add(_o69),_n111;}}),e.panelView.children.add(n),n.items.delegate("execute").to(e);}i(39);var Id=/*#__PURE__*/function(_Pc15){_inherits(Id,_Pc15);var _super63=_createSuper(Id);function Id(e){var _this121;_classCallCheck(this,Id);_this121=_super63.call(this,e),_this121.body=new Qc(e);return _this121;}_createClass(Id,[{key:"render",value:function render(){_get(_getPrototypeOf(Id.prototype),"render",this).call(this),this.body.attachToDom();}},{key:"destroy",value:function destroy(){return this.body.detachFromDom(),_get(_getPrototypeOf(Id.prototype),"destroy",this).call(this);}}]);return Id;}(Pc);i(41);var Sd=/*#__PURE__*/function(_Pc16){_inherits(Sd,_Pc16);var _super64=_createSuper(Sd);function Sd(e){var _this122;_classCallCheck(this,Sd);_this122=_super64.call(this,e),_this122.set("text"),_this122.set("for"),_this122.id="ck-editor__label_"+s();var t=_this122.bindTemplate;_this122.setTemplate({tag:"label",attributes:{"class":["ck","ck-label"],id:_this122.id,"for":t.to("for")},children:[{text:t.to("text")}]});return _this122;}return _createClass(Sd);}(Pc);var Pd=/*#__PURE__*/function(_Pc17){_inherits(Pd,_Pc17);var _super65=_createSuper(Pd);function Pd(e,t,i){var _this123;_classCallCheck(this,Pd);_this123=_super65.call(this,e),_this123.setTemplate({tag:"div",attributes:{"class":["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:e.contentLanguage,dir:e.contentLanguageDirection}}),_this123.name=null,_this123.set("isFocused",!1),_this123._editableElement=i,_this123._hasExternalElement=!!_this123._editableElement,_this123._editingView=t;return _this123;}_createClass(Pd,[{key:"render",value:function render(){var _this124=this;_get(_getPrototypeOf(Pd.prototype),"render",this).call(this),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",function(){return _this124._updateIsFocusedClasses();}),this._updateIsFocusedClasses();}},{key:"destroy",value:function destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),_get(_getPrototypeOf(Pd.prototype),"destroy",this).call(this);}},{key:"_updateIsFocusedClasses",value:function _updateIsFocusedClasses(){var e=this._editingView;function t(t){e.change(function(i){var n=e.document.getRoot(t.name);i.addClass(t.isFocused?"ck-focused":"ck-blurred",n),i.removeClass(t.isFocused?"ck-blurred":"ck-focused",n);});}e.isRenderingInProgress?function i(n){e.once("change:isRenderingInProgress",function(e,o,r){r?i(n):t(n);});}(this):t(this);}}]);return Pd;}(Pc);var Md=/*#__PURE__*/function(_Pd){_inherits(Md,_Pd);var _super66=_createSuper(Md);function Md(e,t,i){var _this125;_classCallCheck(this,Md);_this125=_super66.call(this,e,t,i),_this125.extendTemplate({attributes:{role:"textbox","class":"ck-editor__editable_inline"}});return _this125;}_createClass(Md,[{key:"render",value:function render(){var _this126=this;_get(_getPrototypeOf(Md.prototype),"render",this).call(this);var e=this._editingView,t=this.t;e.change(function(i){var n=e.document.getRoot(_this126.name);i.setAttribute("aria-label",t("Rich Text Editor, %0",_this126.name),n);});}}]);return Md;}(Pd);i(43);i(45);var Nd=/*#__PURE__*/function(_Pc18){_inherits(Nd,_Pc18);var _super67=_createSuper(Nd);function Nd(e){var _this127;_classCallCheck(this,Nd);_this127=_super67.call(this,e),_this127.set("value"),_this127.set("id"),_this127.set("placeholder"),_this127.set("isReadOnly",!1),_this127.set("hasError",!1),_this127.set("ariaDescribedById"),_this127.focusTracker=new Rs(),_this127.bind("isFocused").to(_this127.focusTracker),_this127.set("isEmpty",!0);var t=_this127.bindTemplate;_this127.setTemplate({tag:"input",attributes:{type:"text","class":["ck","ck-input","ck-input-text",t["if"]("isFocused","ck-input_focused"),t["if"]("isEmpty","ck-input-text_empty"),t["if"]("hasError","ck-error")],id:t.to("id"),placeholder:t.to("placeholder"),readonly:t.to("isReadOnly"),"aria-invalid":t["if"]("hasError",!0),"aria-describedby":t.to("ariaDescribedById")},on:{input:t.to("input"),change:t.to(_this127._updateIsEmpty.bind(_assertThisInitialized(_this127)))}});return _this127;}_createClass(Nd,[{key:"render",value:function render(){var _this128=this;_get(_getPrototypeOf(Nd.prototype),"render",this).call(this),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",function(e,t,i){_this128._setDomElementValue(i),_this128._updateIsEmpty();});}},{key:"select",value:function select(){this.element.select();}},{key:"focus",value:function focus(){this.element.focus();}},{key:"_updateIsEmpty",value:function _updateIsEmpty(){this.isEmpty=!this.element.value;}},{key:"_setDomElementValue",value:function _setDomElementValue(e){this.element.value=e||0===e?e:"";}}]);return Nd;}(Pc);i(47);var Rd=/*#__PURE__*/function(_Pc19){_inherits(Rd,_Pc19);var _super68=_createSuper(Rd);function Rd(e,t){var _this129;_classCallCheck(this,Rd);_this129=_super68.call(this,e);var i="ck-labeled-field-view-"+s(),n="ck-labeled-field-view-status-"+s();_this129.fieldView=t(_assertThisInitialized(_this129),i,n),_this129.set("label"),_this129.set("isEnabled",!0),_this129.set("isEmpty",!0),_this129.set("isFocused",!1),_this129.set("errorText",null),_this129.set("infoText",null),_this129.set("class"),_this129.set("placeholder"),_this129.labelView=_this129._createLabelView(i),_this129.statusView=_this129._createStatusView(n),_this129.bind("_statusText").to(_assertThisInitialized(_this129),"errorText",_assertThisInitialized(_this129),"infoText",function(e,t){return e||t;});var o=_this129.bindTemplate;_this129.setTemplate({tag:"div",attributes:{"class":["ck","ck-labeled-field-view",o.to("class"),o["if"]("isEnabled","ck-disabled",function(e){return!e;}),o["if"]("isEmpty","ck-labeled-field-view_empty"),o["if"]("isFocused","ck-labeled-field-view_focused"),o["if"]("placeholder","ck-labeled-field-view_placeholder"),o["if"]("errorText","ck-error")]},children:[{tag:"div",attributes:{"class":["ck","ck-labeled-field-view__input-wrapper"]},children:[_this129.fieldView,_this129.labelView]},_this129.statusView]});return _this129;}_createClass(Rd,[{key:"_createLabelView",value:function _createLabelView(e){var t=new Sd(this.locale);return t["for"]=e,t.bind("text").to(this,"label"),t;}},{key:"_createStatusView",value:function _createStatusView(e){var t=new Pc(this.locale),i=this.bindTemplate;return t.setTemplate({tag:"div",attributes:{"class":["ck","ck-labeled-field-view__status",i["if"]("errorText","ck-labeled-field-view__status_error"),i["if"]("_statusText","ck-hidden",function(e){return!e;})],id:e,role:i["if"]("errorText","alert")},children:[{text:i.to("_statusText")}]}),t;}},{key:"focus",value:function focus(){this.fieldView.focus();}}]);return Rd;}(Pc);function zd(e,t,i){var n=new Nd(e.locale);return n.set({id:t,ariaDescribedById:i}),n.bind("isReadOnly").to(e,"isEnabled",function(e){return!e;}),n.bind("hasError").to(e,"errorText",function(e){return!!e;}),n.on("input",function(){e.errorText=null;}),e.bind("isEmpty","isFocused","placeholder").to(n),n;}var Od=/*#__PURE__*/function(_an2){_inherits(Od,_an2);var _super69=_createSuper(Od);function Od(){_classCallCheck(this,Od);return _super69.apply(this,arguments);}_createClass(Od,[{key:"init",value:function init(){this.on("show:warning",function(e,t){window.alert(t.message);},{priority:"lowest"});}},{key:"showSuccess",value:function showSuccess(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this._showNotification({message:e,type:"success",namespace:t.namespace,title:t.title});}},{key:"showInfo",value:function showInfo(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this._showNotification({message:e,type:"info",namespace:t.namespace,title:t.title});}},{key:"showWarning",value:function showWarning(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this._showNotification({message:e,type:"warning",namespace:t.namespace,title:t.title});}},{key:"_showNotification",value:function _showNotification(e){var t="show:"+e.type+(e.namespace?":"+e.namespace:"");this.fire(t,{message:e.message,type:e.type,title:e.title||""});}}],[{key:"pluginName",get:function get(){return"Notification";}}]);return Od;}(an);var Dd=/*#__PURE__*/_createClass(function Dd(e,t){_classCallCheck(this,Dd);t&&De(this,t),e&&this.set(e);});Ke(Dd,Ue);i(49);var Ld=Ms("px"),Vd=vr.document.body;var Bd=/*#__PURE__*/function(_Pc20){_inherits(Bd,_Pc20);var _super70=_createSuper(Bd);function Bd(e){var _this130;_classCallCheck(this,Bd);_this130=_super70.call(this,e);var t=_this130.bindTemplate;_this130.set("top",0),_this130.set("left",0),_this130.set("position","arrow_nw"),_this130.set("isVisible",!1),_this130.set("withArrow",!0),_this130.set("class"),_this130.content=_this130.createCollection(),_this130.setTemplate({tag:"div",attributes:{"class":["ck","ck-balloon-panel",t.to("position",function(e){return"ck-balloon-panel_"+e;}),t["if"]("isVisible","ck-balloon-panel_visible"),t["if"]("withArrow","ck-balloon-panel_with-arrow"),t.to("class")],style:{top:t.to("top",Ld),left:t.to("left",Ld)}},children:_this130.content});return _this130;}_createClass(Bd,[{key:"show",value:function show(){this.isVisible=!0;}},{key:"hide",value:function hide(){this.isVisible=!1;}},{key:"attachTo",value:function attachTo(e){this.show();var t=Bd.defaultPositions,i=Object.assign({},{element:this.element,positions:[t.southArrowNorth,t.southArrowNorthMiddleWest,t.southArrowNorthMiddleEast,t.southArrowNorthWest,t.southArrowNorthEast,t.northArrowSouth,t.northArrowSouthMiddleWest,t.northArrowSouthMiddleEast,t.northArrowSouthWest,t.northArrowSouthEast],limiter:Vd,fitInViewport:!0},e),n=Bd._getOptimalPosition(i),o=parseInt(n.left),r=parseInt(n.top),s=n.name;Object.assign(this,{top:r,left:o,position:s});}},{key:"pin",value:function pin(e){var _this131=this;this.unpin(),this._pinWhenIsVisibleCallback=function(){_this131.isVisible?_this131._startPinning(e):_this131._stopPinning();},this._startPinning(e),this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback);}},{key:"unpin",value:function unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide());}},{key:"_startPinning",value:function _startPinning(e){var _this132=this;this.attachTo(e);var t=jd(e.target),i=e.limiter?jd(e.limiter):Vd;this.listenTo(vr.document,"scroll",function(n,o){var r=o.target,s=t&&r.contains(t),a=i&&r.contains(i);!s&&!a&&t&&i||_this132.attachTo(e);},{useCapture:!0}),this.listenTo(vr.window,"resize",function(){_this132.attachTo(e);});}},{key:"_stopPinning",value:function _stopPinning(){this.stopListening(vr.document,"scroll"),this.stopListening(vr.window,"resize");}}]);return Bd;}(Pc);function jd(e){return Yi(e)?e:ys(e)?e.commonAncestorContainer:"function"==typeof e?jd(e()):null;}function Fd(e,t){return e.top-t.height-Bd.arrowVerticalOffset;}function Hd(e){return e.bottom+Bd.arrowVerticalOffset;}Bd.arrowHorizontalOffset=25,Bd.arrowVerticalOffset=10,Bd._getOptimalPosition=dd,Bd.defaultPositions={northWestArrowSouthWest:function northWestArrowSouthWest(e,t){return{top:Fd(e,t),left:e.left-Bd.arrowHorizontalOffset,name:"arrow_sw"};},northWestArrowSouthMiddleWest:function northWestArrowSouthMiddleWest(e,t){return{top:Fd(e,t),left:e.left-.25*t.width-Bd.arrowHorizontalOffset,name:"arrow_smw"};},northWestArrowSouth:function northWestArrowSouth(e,t){return{top:Fd(e,t),left:e.left-t.width/2,name:"arrow_s"};},northWestArrowSouthMiddleEast:function northWestArrowSouthMiddleEast(e,t){return{top:Fd(e,t),left:e.left-.75*t.width+Bd.arrowHorizontalOffset,name:"arrow_sme"};},northWestArrowSouthEast:function northWestArrowSouthEast(e,t){return{top:Fd(e,t),left:e.left-t.width+Bd.arrowHorizontalOffset,name:"arrow_se"};},northArrowSouthWest:function northArrowSouthWest(e,t){return{top:Fd(e,t),left:e.left+e.width/2-Bd.arrowHorizontalOffset,name:"arrow_sw"};},northArrowSouthMiddleWest:function northArrowSouthMiddleWest(e,t){return{top:Fd(e,t),left:e.left+e.width/2-.25*t.width-Bd.arrowHorizontalOffset,name:"arrow_smw"};},northArrowSouth:function northArrowSouth(e,t){return{top:Fd(e,t),left:e.left+e.width/2-t.width/2,name:"arrow_s"};},northArrowSouthMiddleEast:function northArrowSouthMiddleEast(e,t){return{top:Fd(e,t),left:e.left+e.width/2-.75*t.width+Bd.arrowHorizontalOffset,name:"arrow_sme"};},northArrowSouthEast:function northArrowSouthEast(e,t){return{top:Fd(e,t),left:e.left+e.width/2-t.width+Bd.arrowHorizontalOffset,name:"arrow_se"};},northEastArrowSouthWest:function northEastArrowSouthWest(e,t){return{top:Fd(e,t),left:e.right-Bd.arrowHorizontalOffset,name:"arrow_sw"};},northEastArrowSouthMiddleWest:function northEastArrowSouthMiddleWest(e,t){return{top:Fd(e,t),left:e.right-.25*t.width-Bd.arrowHorizontalOffset,name:"arrow_smw"};},northEastArrowSouth:function northEastArrowSouth(e,t){return{top:Fd(e,t),left:e.right-t.width/2,name:"arrow_s"};},northEastArrowSouthMiddleEast:function northEastArrowSouthMiddleEast(e,t){return{top:Fd(e,t),left:e.right-.75*t.width+Bd.arrowHorizontalOffset,name:"arrow_sme"};},northEastArrowSouthEast:function northEastArrowSouthEast(e,t){return{top:Fd(e,t),left:e.right-t.width+Bd.arrowHorizontalOffset,name:"arrow_se"};},southWestArrowNorthWest:function southWestArrowNorthWest(e,t){return{top:Hd(e),left:e.left-Bd.arrowHorizontalOffset,name:"arrow_nw"};},southWestArrowNorthMiddleWest:function southWestArrowNorthMiddleWest(e,t){return{top:Hd(e),left:e.left-.25*t.width-Bd.arrowHorizontalOffset,name:"arrow_nmw"};},southWestArrowNorth:function southWestArrowNorth(e,t){return{top:Hd(e),left:e.left-t.width/2,name:"arrow_n"};},southWestArrowNorthMiddleEast:function southWestArrowNorthMiddleEast(e,t){return{top:Hd(e),left:e.left-.75*t.width+Bd.arrowHorizontalOffset,name:"arrow_nme"};},southWestArrowNorthEast:function southWestArrowNorthEast(e,t){return{top:Hd(e),left:e.left-t.width+Bd.arrowHorizontalOffset,name:"arrow_ne"};},southArrowNorthWest:function southArrowNorthWest(e,t){return{top:Hd(e),left:e.left+e.width/2-Bd.arrowHorizontalOffset,name:"arrow_nw"};},southArrowNorthMiddleWest:function southArrowNorthMiddleWest(e,t){return{top:Hd(e),left:e.left+e.width/2-.25*t.width-Bd.arrowHorizontalOffset,name:"arrow_nmw"};},southArrowNorth:function southArrowNorth(e,t){return{top:Hd(e),left:e.left+e.width/2-t.width/2,name:"arrow_n"};},southArrowNorthMiddleEast:function southArrowNorthMiddleEast(e,t){return{top:Hd(e),left:e.left+e.width/2-.75*t.width+Bd.arrowHorizontalOffset,name:"arrow_nme"};},southArrowNorthEast:function southArrowNorthEast(e,t){return{top:Hd(e),left:e.left+e.width/2-t.width+Bd.arrowHorizontalOffset,name:"arrow_ne"};},southEastArrowNorthWest:function southEastArrowNorthWest(e,t){return{top:Hd(e),left:e.right-Bd.arrowHorizontalOffset,name:"arrow_nw"};},southEastArrowNorthMiddleWest:function southEastArrowNorthMiddleWest(e,t){return{top:Hd(e),left:e.right-.25*t.width-Bd.arrowHorizontalOffset,name:"arrow_nmw"};},southEastArrowNorth:function southEastArrowNorth(e,t){return{top:Hd(e),left:e.right-t.width/2,name:"arrow_n"};},southEastArrowNorthMiddleEast:function southEastArrowNorthMiddleEast(e,t){return{top:Hd(e),left:e.right-.75*t.width+Bd.arrowHorizontalOffset,name:"arrow_nme"};},southEastArrowNorthEast:function southEastArrowNorthEast(e,t){return{top:Hd(e),left:e.right-t.width+Bd.arrowHorizontalOffset,name:"arrow_ne"};}};i(51),i(53);var Ud=Ms("px");var Wd=/*#__PURE__*/function(_Qe){_inherits(Wd,_Qe);var _super71=_createSuper(Wd);function Wd(e){var _this133;_classCallCheck(this,Wd);_this133=_super71.call(this,e),_this133.positionLimiter=function(){var e=_this133.editor.editing.view,t=e.document.selection.editableElement;return t?e.domConverter.mapViewToDom(t.root):null;},_this133.set("visibleView",null),_this133.view=new Bd(e.locale),e.ui.view.body.add(_this133.view),e.ui.focusTracker.add(_this133.view.element),_this133._viewToStack=new Map(),_this133._idToStack=new Map(),_this133.set("_numberOfStacks",0),_this133.set("_singleViewMode",!1),_this133._rotatorView=_this133._createRotatorView(),_this133._fakePanelsView=_this133._createFakePanelsView();return _this133;}_createClass(Wd,[{key:"hasView",value:function hasView(e){return Array.from(this._viewToStack.keys()).includes(e);}},{key:"add",value:function add(e){if(this.hasView(e.view))throw new l.a("contextualballoon-add-view-exist",[this,e]);var t=e.stackId||"main";if(!this._idToStack.has(t))return this._idToStack.set(t,new Map([[e.view,e]])),this._viewToStack.set(e.view,this._idToStack.get(t)),this._numberOfStacks=this._idToStack.size,void(this._visibleStack&&!e.singleViewMode||this.showStack(t));var i=this._idToStack.get(t);e.singleViewMode&&this.showStack(t),i.set(e.view,e),this._viewToStack.set(e.view,i),i===this._visibleStack&&this._showView(e);}},{key:"remove",value:function remove(e){if(!this.hasView(e))throw new l.a("contextualballoon-remove-view-not-exist",[this,e]);var t=this._viewToStack.get(e);this._singleViewMode&&this.visibleView===e&&(this._singleViewMode=!1),this.visibleView===e&&(1===t.size?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(t.values())[t.size-2])),1===t.size?(this._idToStack["delete"](this._getStackId(t)),this._numberOfStacks=this._idToStack.size):t["delete"](e),this._viewToStack["delete"](e);}},{key:"updatePosition",value:function updatePosition(e){e&&(this._visibleStack.get(this.visibleView).position=e),this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition();}},{key:"showStack",value:function showStack(e){this.visibleStack=e;var t=this._idToStack.get(e);if(!t)throw new l.a("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==t&&this._showView(Array.from(t.values()).pop());}},{key:"_visibleStack",get:function get(){return this._viewToStack.get(this.visibleView);}},{key:"_getStackId",value:function _getStackId(e){return Array.from(this._idToStack.entries()).find(function(t){return t[1]===e;})[0];}},{key:"_showNextStack",value:function _showNextStack(){var e=Array.from(this._idToStack.values());var t=e.indexOf(this._visibleStack)+1;e[t]||(t=0),this.showStack(this._getStackId(e[t]));}},{key:"_showPrevStack",value:function _showPrevStack(){var e=Array.from(this._idToStack.values());var t=e.indexOf(this._visibleStack)-1;e[t]||(t=e.length-1),this.showStack(this._getStackId(e[t]));}},{key:"_createRotatorView",value:function _createRotatorView(){var _this134=this;var e=new qd(this.editor.locale),t=this.editor.locale.t;return this.view.content.add(e),e.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",function(e,t){return!t&&e>1;}),e.on("change:isNavigationVisible",function(){return _this134.updatePosition();},{priority:"low"}),e.bind("counter").to(this,"visibleView",this,"_numberOfStacks",function(e,i){if(i<2)return"";var n=Array.from(_this134._idToStack.values()).indexOf(_this134._visibleStack)+1;return t("%0 of %1",[n,i]);}),e.buttonNextView.on("execute",function(){e.focusTracker.isFocused&&_this134.editor.editing.view.focus(),_this134._showNextStack();}),e.buttonPrevView.on("execute",function(){e.focusTracker.isFocused&&_this134.editor.editing.view.focus(),_this134._showPrevStack();}),e;}},{key:"_createFakePanelsView",value:function _createFakePanelsView(){var e=new $d(this.editor.locale,this.view);return e.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",function(e,t){return!t&&e>=2?Math.min(e-1,2):0;}),e.listenTo(this.view,"change:top",function(){return e.updatePosition();}),e.listenTo(this.view,"change:left",function(){return e.updatePosition();}),this.editor.ui.view.body.add(e),e;}},{key:"_showView",value:function _showView(_ref37){var e=_ref37.view,_ref37$balloonClassNa=_ref37.balloonClassName,t=_ref37$balloonClassNa===void 0?"":_ref37$balloonClassNa,_ref37$withArrow=_ref37.withArrow,i=_ref37$withArrow===void 0?!0:_ref37$withArrow,_ref37$singleViewMode=_ref37.singleViewMode,n=_ref37$singleViewMode===void 0?!1:_ref37$singleViewMode;this.view["class"]=t,this.view.withArrow=i,this._rotatorView.showView(e),this.visibleView=e,this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition(),n&&(this._singleViewMode=!0);}},{key:"_getBalloonPosition",value:function _getBalloonPosition(){var e=Array.from(this._visibleStack.values()).pop().position;return e&&!e.limiter&&(e=Object.assign({},e,{limiter:this.positionLimiter})),e;}}],[{key:"pluginName",get:function get(){return"ContextualBalloon";}}]);return Wd;}(Qe);var qd=/*#__PURE__*/function(_Pc21){_inherits(qd,_Pc21);var _super72=_createSuper(qd);function qd(e){var _this135;_classCallCheck(this,qd);_this135=_super72.call(this,e);var t=e.t,i=_this135.bindTemplate;_this135.set("isNavigationVisible",!0),_this135.focusTracker=new Rs(),_this135.buttonPrevView=_this135._createButtonView(t("Previous"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>'),_this135.buttonNextView=_this135._createButtonView(t("Next"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>'),_this135.content=_this135.createCollection(),_this135.setTemplate({tag:"div",attributes:{"class":["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{"class":["ck-balloon-rotator__navigation",i.to("isNavigationVisible",function(e){return e?"":"ck-hidden";})]},children:[_this135.buttonPrevView,{tag:"span",attributes:{"class":["ck-balloon-rotator__counter"]},children:[{text:i.to("counter")}]},_this135.buttonNextView]},{tag:"div",attributes:{"class":"ck-balloon-rotator__content"},children:_this135.content}]});return _this135;}_createClass(qd,[{key:"render",value:function render(){_get(_getPrototypeOf(qd.prototype),"render",this).call(this),this.focusTracker.add(this.element);}},{key:"showView",value:function showView(e){this.hideView(),this.content.add(e);}},{key:"hideView",value:function hideView(){this.content.clear();}},{key:"_createButtonView",value:function _createButtonView(e,t){var i=new Xc(this.locale);return i.set({label:e,icon:t,tooltip:!0}),i;}}]);return qd;}(Pc);var $d=/*#__PURE__*/function(_Pc22){_inherits($d,_Pc22);var _super73=_createSuper($d);function $d(e,t){var _this136;_classCallCheck(this,$d);_this136=_super73.call(this,e);var i=_this136.bindTemplate;_this136.set("top",0),_this136.set("left",0),_this136.set("height",0),_this136.set("width",0),_this136.set("numberOfPanels",0),_this136.content=_this136.createCollection(),_this136._balloonPanelView=t,_this136.setTemplate({tag:"div",attributes:{"class":["ck-fake-panel",i.to("numberOfPanels",function(e){return e?"":"ck-hidden";})],style:{top:i.to("top",Ud),left:i.to("left",Ud),width:i.to("width",Ud),height:i.to("height",Ud)}},children:_this136.content}),_this136.on("change:numberOfPanels",function(e,t,i,n){i>n?_this136._addPanels(i-n):_this136._removePanels(n-i),_this136.updatePosition();});return _this136;}_createClass($d,[{key:"_addPanels",value:function _addPanels(e){for(;e--;){var _e221=new Pc();_e221.setTemplate({tag:"div"}),this.content.add(_e221),this.registerChild(_e221);}}},{key:"_removePanels",value:function _removePanels(e){for(;e--;){var _e222=this.content.last;this.content.remove(_e222),this.deregisterChild(_e222),_e222.destroy();}}},{key:"updatePosition",value:function updatePosition(){if(this.numberOfPanels){var _this$_balloonPanelVi=this._balloonPanelView,_e223=_this$_balloonPanelVi.top,_t205=_this$_balloonPanelVi.left,_Cs=new Cs(this._balloonPanelView.element),_i214=_Cs.width,_n112=_Cs.height;Object.assign(this,{top:_e223,left:_t205,width:_i214,height:_n112});}}}]);return $d;}(Pc);i(55);Ms("px");Ms("px");i(57);Ms("px");Ms("px");i(59);var Yd=new WeakMap();function Gd(e){var t=e.view,i=e.element,n=e.text,_e$isDirectHost=e.isDirectHost,o=_e$isDirectHost===void 0?!0:_e$isDirectHost,_e$keepOnFocus=e.keepOnFocus,r=_e$keepOnFocus===void 0?!1:_e$keepOnFocus,s=t.document;Yd.has(s)||(Yd.set(s,new Map()),s.registerPostFixer(function(e){return Qd(s,e);})),Yd.get(s).set(i,{text:n,isDirectHost:o,keepOnFocus:r,hostElement:o?i:null}),t.change(function(e){return Qd(s,e);});}function Kd(e,t){return!!t.hasClass("ck-placeholder")&&(e.removeClass("ck-placeholder",t),!0);}function Qd(e,t){var i=Yd.get(e),n=[];var o=!1;var _iterator299=_createForOfIteratorHelper(i),_step299;try{for(_iterator299.s();!(_step299=_iterator299.n()).done;){var _step299$value=_slicedToArray(_step299.value,2),_e224=_step299$value[0],_r37=_step299$value[1];_r37.isDirectHost&&(n.push(_e224),Jd(t,_e224,_r37)&&(o=!0));}}catch(err){_iterator299.e(err);}finally{_iterator299.f();}var _iterator300=_createForOfIteratorHelper(i),_step300;try{for(_iterator300.s();!(_step300=_iterator300.n()).done;){var _step300$value=_slicedToArray(_step300.value,2),_e225=_step300$value[0],_r38=_step300$value[1];if(_r38.isDirectHost)continue;var _i215=Zd(_e225);_i215&&(n.includes(_i215)||(_r38.hostElement=_i215,Jd(t,_e225,_r38)&&(o=!0)));}}catch(err){_iterator300.e(err);}finally{_iterator300.f();}return o;}function Jd(e,t,i){var n=i.text,o=i.isDirectHost,r=i.hostElement;var s=!1;r.getAttribute("data-placeholder")!==n&&(e.setAttribute("data-placeholder",n,r),s=!0);return(o||1==t.childCount)&&function(e,t){if(!e.isAttached())return!1;if(Array.from(e.getChildren()).some(function(e){return!e.is("uiElement");}))return!1;if(t)return!0;var i=e.document;if(!i.isFocused)return!0;var n=i.selection.anchor;return n&&n.parent!==e;}(r,i.keepOnFocus)?function(e,t){return!t.hasClass("ck-placeholder")&&(e.addClass("ck-placeholder",t),!0);}(e,r)&&(s=!0):Kd(e,r)&&(s=!0),s;}function Zd(e){if(e.childCount){var _t206=e.getChild(0);if(_t206.is("element")&&!_t206.is("uiElement"))return _t206;}return null;}var Xd=new Map();function eu(e,t,i){var n=Xd.get(e);n||(n=new Map(),Xd.set(e,n)),n.set(t,i);}function tu(e){return[e];}function iu(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var n=function(e,t){var i=Xd.get(e);return i&&i.has(t)?i.get(t):tu;}(e.constructor,t.constructor);try{return n(e=e.clone(),t,i);}catch(e){throw e;}}function nu(e,t,i){e=e.slice(),t=t.slice();var n=new ou(i.document,i.useRelations,i.forceWeakRemove);n.setOriginalOperations(e),n.setOriginalOperations(t);var o=n.originalOperations;if(0==e.length||0==t.length)return{operationsA:e,operationsB:t,originalOperations:o};var r=new WeakMap();var _iterator301=_createForOfIteratorHelper(e),_step301;try{for(_iterator301.s();!(_step301=_iterator301.n()).done;){var _t208=_step301.value;r.set(_t208,0);}}catch(err){_iterator301.e(err);}finally{_iterator301.f();}var s={nextBaseVersionA:e[e.length-1].baseVersion+1,nextBaseVersionB:t[t.length-1].baseVersion+1,originalOperationsACount:e.length,originalOperationsBCount:t.length};var a=0;for(;a<e.length;){var _e226,_t207;var _i216=e[a],_o71=r.get(_i216);if(_o71==t.length){a++;continue;}var _s23=t[_o71],_l8=iu(_i216,_s23,n.getContext(_i216,_s23,!0)),_c3=iu(_s23,_i216,n.getContext(_s23,_i216,!1));n.updateRelation(_i216,_s23),n.setOriginalOperations(_l8,_i216),n.setOriginalOperations(_c3,_s23);var _iterator302=_createForOfIteratorHelper(_l8),_step302;try{for(_iterator302.s();!(_step302=_iterator302.n()).done;){var _e227=_step302.value;r.set(_e227,_o71+_c3.length);}}catch(err){_iterator302.e(err);}finally{_iterator302.f();}(_e226=e).splice.apply(_e226,[a,1].concat(_toConsumableArray(_l8))),(_t207=t).splice.apply(_t207,[_o71,1].concat(_toConsumableArray(_c3)));}if(i.padWithNoOps){var _i217=e.length-s.originalOperationsACount,_n113=t.length-s.originalOperationsBCount;su(e,_n113-_i217),su(t,_i217-_n113);}return ru(e,s.nextBaseVersionB),ru(t,s.nextBaseVersionA),{operationsA:e,operationsB:t,originalOperations:o};}var ou=/*#__PURE__*/function(){function ou(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!1;_classCallCheck(this,ou);this.originalOperations=new Map(),this._history=e.history,this._useRelations=t,this._forceWeakRemove=!!i,this._relations=new Map();}_createClass(ou,[{key:"setOriginalOperations",value:function setOriginalOperations(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var i=t?this.originalOperations.get(t):null;var _iterator303=_createForOfIteratorHelper(e),_step303;try{for(_iterator303.s();!(_step303=_iterator303.n()).done;){var _t209=_step303.value;this.originalOperations.set(_t209,i||_t209);}}catch(err){_iterator303.e(err);}finally{_iterator303.f();}}},{key:"updateRelation",value:function updateRelation(e,t){switch(e.constructor){case El:switch(t.constructor){case Nl:e.targetPosition.isEqual(t.sourcePosition)||t.movedRange.containsPosition(e.targetPosition)?this._setRelation(e,t,"insertAtSource"):e.targetPosition.isEqual(t.deletionPosition)?this._setRelation(e,t,"insertBetween"):e.targetPosition.isAfter(t.sourcePosition)&&this._setRelation(e,t,"moveTargetAfter");break;case El:e.targetPosition.isEqual(t.sourcePosition)||e.targetPosition.isBefore(t.sourcePosition)?this._setRelation(e,t,"insertBefore"):this._setRelation(e,t,"insertAfter");}break;case Rl:switch(t.constructor){case Nl:e.splitPosition.isBefore(t.sourcePosition)&&this._setRelation(e,t,"splitBefore");break;case El:if(e.splitPosition.isEqual(t.sourcePosition)||e.splitPosition.isBefore(t.sourcePosition))this._setRelation(e,t,"splitBefore");else{var _i218=oa._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.splitPosition.hasSameParentAs(t.sourcePosition)&&_i218.containsPosition(e.splitPosition)){var _n114=_i218.end.offset-e.splitPosition.offset,_o72=e.splitPosition.offset-_i218.start.offset;this._setRelation(e,t,{howMany:_n114,offset:_o72});}}}break;case Nl:switch(t.constructor){case Nl:e.targetPosition.isEqual(t.sourcePosition)||this._setRelation(e,t,"mergeTargetNotMoved"),e.sourcePosition.isEqual(t.targetPosition)&&this._setRelation(e,t,"mergeSourceNotMoved"),e.sourcePosition.isEqual(t.sourcePosition)&&this._setRelation(e,t,"mergeSameElement");break;case Rl:e.sourcePosition.isEqual(t.splitPosition)&&this._setRelation(e,t,"splitAtSource");}break;case Sl:{var _i219=e.newRange;if(!_i219)return;switch(t.constructor){case El:{var _n115=oa._createFromPositionAndShift(t.sourcePosition,t.howMany),_o73=_n115.containsPosition(_i219.start)||_n115.start.isEqual(_i219.start),_r39=_n115.containsPosition(_i219.end)||_n115.end.isEqual(_i219.end);!_o73&&!_r39||_n115.containsRange(_i219)||this._setRelation(e,t,{side:_o73?"left":"right",path:_o73?_i219.start.path.slice():_i219.end.path.slice()});break;}case Nl:{var _n116=_i219.start.isEqual(t.targetPosition),_o74=_i219.start.isEqual(t.deletionPosition),_r40=_i219.end.isEqual(t.deletionPosition),_s24=_i219.end.isEqual(t.sourcePosition);(_n116||_o74||_r40||_s24)&&this._setRelation(e,t,{wasInLeftElement:_n116,wasStartBeforeMergedElement:_o74,wasEndBeforeMergedElement:_r40,wasInRightElement:_s24});break;}}break;}}}},{key:"getContext",value:function getContext(e,t,i){return{aIsStrong:i,aWasUndone:this._wasUndone(e),bWasUndone:this._wasUndone(t),abRelation:this._useRelations?this._getRelation(e,t):null,baRelation:this._useRelations?this._getRelation(t,e):null,forceWeakRemove:this._forceWeakRemove};}},{key:"_wasUndone",value:function _wasUndone(e){var t=this.originalOperations.get(e);return t.wasUndone||this._history.isUndoneOperation(t);}},{key:"_getRelation",value:function _getRelation(e,t){var i=this.originalOperations.get(t),n=this._history.getUndoneOperation(i);if(!n)return null;var o=this.originalOperations.get(e),r=this._relations.get(o);return r&&r.get(n)||null;}},{key:"_setRelation",value:function _setRelation(e,t,i){var n=this.originalOperations.get(e),o=this.originalOperations.get(t);var r=this._relations.get(n);r||(r=new Map(),this._relations.set(n,r)),r.set(o,i);}}]);return ou;}();function ru(e,t){var _iterator304=_createForOfIteratorHelper(e),_step304;try{for(_iterator304.s();!(_step304=_iterator304.n()).done;){var _i220=_step304.value;_i220.baseVersion=t++;}}catch(err){_iterator304.e(err);}finally{_iterator304.f();}}function su(e,t){for(var _i221=0;_i221<t;_i221++){e.push(new Zl(0));}}function au(e,t,i){var n=e.nodes.getNode(0).getAttribute(t);if(n==i)return null;var o=new oa(e.position,e.position.getShiftedBy(e.howMany));return new Cl(o,t,n,i,0);}function lu(e,t){return null===e.targetPosition._getTransformedByDeletion(t.sourcePosition,t.howMany);}function cu(e,t){var i=[];for(var _n117=0;_n117<e.length;_n117++){var _o75=e[_n117],_r41=new El(_o75.start,_o75.end.offset-_o75.start.offset,t,0);i.push(_r41);for(var _t210=_n117+1;_t210<e.length;_t210++){e[_t210]=e[_t210]._getTransformedByMove(_r41.sourcePosition,_r41.targetPosition,_r41.howMany)[0];}t=t._getTransformedByMove(_r41.sourcePosition,_r41.targetPosition,_r41.howMany);}return i;}eu(Cl,Cl,function(e,t,i){if(e.key===t.key&&e.range.start.hasSameParentAs(t.range.start)){var _n118=e.range.getDifference(t.range).map(function(t){return new Cl(t,e.key,e.oldValue,e.newValue,0);}),_o76=e.range.getIntersection(t.range);return _o76&&i.aIsStrong&&_n118.push(new Cl(_o76,t.key,t.newValue,e.newValue,0)),0==_n118.length?[new Zl(0)]:_n118;}return[e];}),eu(Cl,Il,function(e,t){if(e.range.start.hasSameParentAs(t.position)&&e.range.containsPosition(t.position)){var _i222=e.range._getTransformedByInsertion(t.position,t.howMany,!t.shouldReceiveAttributes).map(function(t){return new Cl(t,e.key,e.oldValue,e.newValue,e.baseVersion);});if(t.shouldReceiveAttributes){var _n119=au(t,e.key,e.oldValue);_n119&&_i222.unshift(_n119);}return _i222;}return e.range=e.range._getTransformedByInsertion(t.position,t.howMany,!1)[0],[e];}),eu(Cl,Nl,function(e,t){var i=[];e.range.start.hasSameParentAs(t.deletionPosition)&&(e.range.containsPosition(t.deletionPosition)||e.range.start.isEqual(t.deletionPosition))&&i.push(oa._createFromPositionAndShift(t.graveyardPosition,1));var n=e.range._getTransformedByMergeOperation(t);return n.isCollapsed||i.push(n),i.map(function(t){return new Cl(t,e.key,e.oldValue,e.newValue,e.baseVersion);});}),eu(Cl,El,function(e,t){return function(e,t){var i=oa._createFromPositionAndShift(t.sourcePosition,t.howMany);var n=null,o=[];i.containsRange(e,!0)?n=e:e.start.hasSameParentAs(i.start)?(o=e.getDifference(i),n=e.getIntersection(i)):o=[e];var r=[];var _iterator305=_createForOfIteratorHelper(o),_step305;try{for(_iterator305.s();!(_step305=_iterator305.n()).done;){var _e228=_step305.value;_e228=_e228._getTransformedByDeletion(t.sourcePosition,t.howMany);var _i223=t.getMovedRangeStart(),_n120=_e228.start.hasSameParentAs(_i223);_e228=_e228._getTransformedByInsertion(_i223,t.howMany,_n120),r.push.apply(r,_toConsumableArray(_e228));}}catch(err){_iterator305.e(err);}finally{_iterator305.f();}n&&r.push(n._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany,!1)[0]);return r;}(e.range,t).map(function(t){return new Cl(t,e.key,e.oldValue,e.newValue,e.baseVersion);});}),eu(Cl,Rl,function(e,t){if(e.range.end.isEqual(t.insertionPosition))return t.graveyardPosition||e.range.end.offset++,[e];if(e.range.start.hasSameParentAs(t.splitPosition)&&e.range.containsPosition(t.splitPosition)){var _i224=e.clone();return _i224.range=new oa(t.moveTargetPosition.clone(),e.range.end._getCombined(t.splitPosition,t.moveTargetPosition)),e.range.end=t.splitPosition.clone(),e.range.end.stickiness="toPrevious",[e,_i224];}return e.range=e.range._getTransformedBySplitOperation(t),[e];}),eu(Il,Cl,function(e,t){var i=[e];if(e.shouldReceiveAttributes&&e.position.hasSameParentAs(t.range.start)&&t.range.containsPosition(e.position)){var _n121=au(e,t.key,t.newValue);_n121&&i.push(_n121);}return i;}),eu(Il,Il,function(e,t,i){return e.position.isEqual(t.position)&&i.aIsStrong||(e.position=e.position._getTransformedByInsertOperation(t)),[e];}),eu(Il,El,function(e,t){return e.position=e.position._getTransformedByMoveOperation(t),[e];}),eu(Il,Rl,function(e,t){return e.position=e.position._getTransformedBySplitOperation(t),[e];}),eu(Il,Nl,function(e,t){return e.position=e.position._getTransformedByMergeOperation(t),[e];}),eu(Sl,Il,function(e,t){return e.oldRange&&(e.oldRange=e.oldRange._getTransformedByInsertOperation(t)[0]),e.newRange&&(e.newRange=e.newRange._getTransformedByInsertOperation(t)[0]),[e];}),eu(Sl,Sl,function(e,t,i){if(e.name==t.name){if(!i.aIsStrong)return[new Zl(0)];e.oldRange=t.newRange?t.newRange.clone():null;}return[e];}),eu(Sl,Nl,function(e,t){return e.oldRange&&(e.oldRange=e.oldRange._getTransformedByMergeOperation(t)),e.newRange&&(e.newRange=e.newRange._getTransformedByMergeOperation(t)),[e];}),eu(Sl,El,function(e,t,i){if(e.oldRange&&(e.oldRange=oa._createFromRanges(e.oldRange._getTransformedByMoveOperation(t))),e.newRange){if(i.abRelation){var _n122=oa._createFromRanges(e.newRange._getTransformedByMoveOperation(t));if("left"==i.abRelation.side&&t.targetPosition.isEqual(e.newRange.start))return e.newRange.start.path=i.abRelation.path,e.newRange.end=_n122.end,[e];if("right"==i.abRelation.side&&t.targetPosition.isEqual(e.newRange.end))return e.newRange.start=_n122.start,e.newRange.end.path=i.abRelation.path,[e];}e.newRange=oa._createFromRanges(e.newRange._getTransformedByMoveOperation(t));}return[e];}),eu(Sl,Rl,function(e,t,i){if(e.oldRange&&(e.oldRange=e.oldRange._getTransformedBySplitOperation(t)),e.newRange){if(i.abRelation){var _n123=e.newRange._getTransformedBySplitOperation(t);return e.newRange.start.isEqual(t.splitPosition)&&i.abRelation.wasStartBeforeMergedElement?e.newRange.start=ea._createAt(t.insertionPosition):e.newRange.start.isEqual(t.splitPosition)&&!i.abRelation.wasInLeftElement&&(e.newRange.start=ea._createAt(t.moveTargetPosition)),e.newRange.end.isEqual(t.splitPosition)&&i.abRelation.wasInRightElement?e.newRange.end=ea._createAt(t.moveTargetPosition):e.newRange.end.isEqual(t.splitPosition)&&i.abRelation.wasEndBeforeMergedElement?e.newRange.end=ea._createAt(t.insertionPosition):e.newRange.end=_n123.end,[e];}e.newRange=e.newRange._getTransformedBySplitOperation(t);}return[e];}),eu(Nl,Il,function(e,t){return e.sourcePosition.hasSameParentAs(t.position)&&(e.howMany+=t.howMany),e.sourcePosition=e.sourcePosition._getTransformedByInsertOperation(t),e.targetPosition=e.targetPosition._getTransformedByInsertOperation(t),[e];}),eu(Nl,Nl,function(e,t,i){if(e.sourcePosition.isEqual(t.sourcePosition)&&e.targetPosition.isEqual(t.targetPosition)){if(i.bWasUndone){var _i225=t.graveyardPosition.path.slice();return _i225.push(0),e.sourcePosition=new ea(t.graveyardPosition.root,_i225),e.howMany=0,[e];}return[new Zl(0)];}if(e.sourcePosition.isEqual(t.sourcePosition)&&!e.targetPosition.isEqual(t.targetPosition)&&!i.bWasUndone&&"splitAtSource"!=i.abRelation){var _n124="$graveyard"==e.targetPosition.root.rootName,_o77="$graveyard"==t.targetPosition.root.rootName,_r42=_n124&&!_o77;if(_o77&&!_n124||!_r42&&i.aIsStrong){var _i226=t.targetPosition._getTransformedByMergeOperation(t),_n125=e.targetPosition._getTransformedByMergeOperation(t);return[new El(_i226,e.howMany,_n125,0)];}return[new Zl(0)];}return e.sourcePosition.hasSameParentAs(t.targetPosition)&&(e.howMany+=t.howMany),e.sourcePosition=e.sourcePosition._getTransformedByMergeOperation(t),e.targetPosition=e.targetPosition._getTransformedByMergeOperation(t),e.graveyardPosition.isEqual(t.graveyardPosition)&&i.aIsStrong||(e.graveyardPosition=e.graveyardPosition._getTransformedByMergeOperation(t)),[e];}),eu(Nl,El,function(e,t,i){var n=oa._createFromPositionAndShift(t.sourcePosition,t.howMany);return"remove"==t.type&&!i.bWasUndone&&!i.forceWeakRemove&&e.deletionPosition.hasSameParentAs(t.sourcePosition)&&n.containsPosition(e.sourcePosition)?[new Zl(0)]:(e.sourcePosition.hasSameParentAs(t.targetPosition)&&(e.howMany+=t.howMany),e.sourcePosition.hasSameParentAs(t.sourcePosition)&&(e.howMany-=t.howMany),e.sourcePosition=e.sourcePosition._getTransformedByMoveOperation(t),e.targetPosition=e.targetPosition._getTransformedByMoveOperation(t),e.graveyardPosition.isEqual(t.targetPosition)||(e.graveyardPosition=e.graveyardPosition._getTransformedByMoveOperation(t)),[e]);}),eu(Nl,Rl,function(e,t,i){if(t.graveyardPosition&&(e.graveyardPosition=e.graveyardPosition._getTransformedByDeletion(t.graveyardPosition,1),e.deletionPosition.isEqual(t.graveyardPosition)&&(e.howMany=t.howMany)),e.targetPosition.isEqual(t.splitPosition)){var _n126=0!=t.howMany,_o78=t.graveyardPosition&&e.deletionPosition.isEqual(t.graveyardPosition);if(_n126||_o78||"mergeTargetNotMoved"==i.abRelation)return e.sourcePosition=e.sourcePosition._getTransformedBySplitOperation(t),[e];}if(e.sourcePosition.isEqual(t.splitPosition)){if("mergeSourceNotMoved"==i.abRelation)return e.howMany=0,e.targetPosition=e.targetPosition._getTransformedBySplitOperation(t),[e];if("mergeSameElement"==i.abRelation||e.sourcePosition.offset>0)return e.sourcePosition=t.moveTargetPosition.clone(),e.targetPosition=e.targetPosition._getTransformedBySplitOperation(t),[e];}return e.sourcePosition.hasSameParentAs(t.splitPosition)&&(e.howMany=t.splitPosition.offset),e.sourcePosition=e.sourcePosition._getTransformedBySplitOperation(t),e.targetPosition=e.targetPosition._getTransformedBySplitOperation(t),[e];}),eu(El,Il,function(e,t){var i=oa._createFromPositionAndShift(e.sourcePosition,e.howMany)._getTransformedByInsertOperation(t,!1)[0];return e.sourcePosition=i.start,e.howMany=i.end.offset-i.start.offset,e.targetPosition.isEqual(t.position)||(e.targetPosition=e.targetPosition._getTransformedByInsertOperation(t)),[e];}),eu(El,El,function(e,t,i){var n=oa._createFromPositionAndShift(e.sourcePosition,e.howMany),o=oa._createFromPositionAndShift(t.sourcePosition,t.howMany);var r,s=i.aIsStrong,a=!i.aIsStrong;if("insertBefore"==i.abRelation||"insertAfter"==i.baRelation?a=!0:"insertAfter"!=i.abRelation&&"insertBefore"!=i.baRelation||(a=!1),r=e.targetPosition.isEqual(t.targetPosition)&&a?e.targetPosition._getTransformedByDeletion(t.sourcePosition,t.howMany):e.targetPosition._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),lu(e,t)&&lu(t,e))return[t.getReversed()];if(n.containsPosition(t.targetPosition)&&n.containsRange(o,!0))return n.start=n.start._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),n.end=n.end._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),cu([n],r);if(o.containsPosition(e.targetPosition)&&o.containsRange(n,!0))return n.start=n.start._getCombined(t.sourcePosition,t.getMovedRangeStart()),n.end=n.end._getCombined(t.sourcePosition,t.getMovedRangeStart()),cu([n],r);var l=ln(e.sourcePosition.getParentPath(),t.sourcePosition.getParentPath());if("prefix"==l||"extension"==l)return n.start=n.start._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),n.end=n.end._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),cu([n],r);"remove"!=e.type||"remove"==t.type||i.aWasUndone||i.forceWeakRemove?"remove"==e.type||"remove"!=t.type||i.bWasUndone||i.forceWeakRemove||(s=!1):s=!0;var c=[],d=n.getDifference(o);var _iterator306=_createForOfIteratorHelper(d),_step306;try{for(_iterator306.s();!(_step306=_iterator306.n()).done;){var _e229=_step306.value;_e229.start=_e229.start._getTransformedByDeletion(t.sourcePosition,t.howMany),_e229.end=_e229.end._getTransformedByDeletion(t.sourcePosition,t.howMany);var _i227="same"==ln(_e229.start.getParentPath(),t.getMovedRangeStart().getParentPath()),_n127=_e229._getTransformedByInsertion(t.getMovedRangeStart(),t.howMany,_i227);c.push.apply(c,_toConsumableArray(_n127));}}catch(err){_iterator306.e(err);}finally{_iterator306.f();}var u=n.getIntersection(o);return null!==u&&s&&(u.start=u.start._getCombined(t.sourcePosition,t.getMovedRangeStart()),u.end=u.end._getCombined(t.sourcePosition,t.getMovedRangeStart()),0===c.length?c.push(u):1==c.length?o.start.isBefore(n.start)||o.start.isEqual(n.start)?c.unshift(u):c.push(u):c.splice(1,0,u)),0===c.length?[new Zl(e.baseVersion)]:cu(c,r);}),eu(El,Rl,function(e,t,i){var n=e.targetPosition.clone();e.targetPosition.isEqual(t.insertionPosition)&&t.graveyardPosition&&"moveTargetAfter"!=i.abRelation||(n=e.targetPosition._getTransformedBySplitOperation(t));var o=oa._createFromPositionAndShift(e.sourcePosition,e.howMany);if(o.end.isEqual(t.insertionPosition))return t.graveyardPosition||e.howMany++,e.targetPosition=n,[e];if(o.start.hasSameParentAs(t.splitPosition)&&o.containsPosition(t.splitPosition)){var _e230=new oa(t.splitPosition,o.end);_e230=_e230._getTransformedBySplitOperation(t);return cu([new oa(o.start,t.splitPosition),_e230],n);}e.targetPosition.isEqual(t.splitPosition)&&"insertAtSource"==i.abRelation&&(n=t.moveTargetPosition),e.targetPosition.isEqual(t.insertionPosition)&&"insertBetween"==i.abRelation&&(n=e.targetPosition);var r=[o._getTransformedBySplitOperation(t)];if(t.graveyardPosition){var _n128=o.start.isEqual(t.graveyardPosition)||o.containsPosition(t.graveyardPosition);e.howMany>1&&_n128&&!i.aWasUndone&&r.push(oa._createFromPositionAndShift(t.insertionPosition,1));}return cu(r,n);}),eu(El,Nl,function(e,t,i){var n=oa._createFromPositionAndShift(e.sourcePosition,e.howMany);if(t.deletionPosition.hasSameParentAs(e.sourcePosition)&&n.containsPosition(t.sourcePosition))if("remove"!=e.type||i.forceWeakRemove){if(1==e.howMany)return i.bWasUndone?(e.sourcePosition=t.graveyardPosition.clone(),e.targetPosition=e.targetPosition._getTransformedByMergeOperation(t),[e]):[new Zl(0)];}else if(!i.aWasUndone){var _i228=[];var _n129=t.graveyardPosition.clone(),_o79=t.targetPosition._getTransformedByMergeOperation(t);e.howMany>1&&(_i228.push(new El(e.sourcePosition,e.howMany-1,e.targetPosition,0)),_n129=_n129._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany-1),_o79=_o79._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany-1));var _r43=t.deletionPosition._getCombined(e.sourcePosition,e.targetPosition),_s25=new El(_n129,1,_r43,0),_a16=_s25.getMovedRangeStart().path.slice();_a16.push(0);var _l9=new ea(_s25.targetPosition.root,_a16);_o79=_o79._getTransformedByMove(_n129,_r43,1);var _c4=new El(_o79,t.howMany,_l9,0);return _i228.push(_s25),_i228.push(_c4),_i228;}var o=oa._createFromPositionAndShift(e.sourcePosition,e.howMany)._getTransformedByMergeOperation(t);return e.sourcePosition=o.start,e.howMany=o.end.offset-o.start.offset,e.targetPosition=e.targetPosition._getTransformedByMergeOperation(t),[e];}),eu(Pl,Il,function(e,t){return e.position=e.position._getTransformedByInsertOperation(t),[e];}),eu(Pl,Nl,function(e,t){return e.position.isEqual(t.deletionPosition)?(e.position=t.graveyardPosition.clone(),e.position.stickiness="toNext",[e]):(e.position=e.position._getTransformedByMergeOperation(t),[e]);}),eu(Pl,El,function(e,t){return e.position=e.position._getTransformedByMoveOperation(t),[e];}),eu(Pl,Pl,function(e,t,i){if(e.position.isEqual(t.position)){if(!i.aIsStrong)return[new Zl(0)];e.oldName=t.newName;}return[e];}),eu(Pl,Rl,function(e,t){if("same"==ln(e.position.path,t.splitPosition.getParentPath())&&!t.graveyardPosition){var _t211=new Pl(e.position.getShiftedBy(1),e.oldName,e.newName,0);return[e,_t211];}return e.position=e.position._getTransformedBySplitOperation(t),[e];}),eu(Ml,Ml,function(e,t,i){if(e.root===t.root&&e.key===t.key){if(!i.aIsStrong||e.newValue===t.newValue)return[new Zl(0)];e.oldValue=t.newValue;}return[e];}),eu(Rl,Il,function(e,t){return e.splitPosition.hasSameParentAs(t.position)&&e.splitPosition.offset<t.position.offset&&(e.howMany+=t.howMany),e.splitPosition=e.splitPosition._getTransformedByInsertOperation(t),e.insertionPosition=e.insertionPosition._getTransformedByInsertOperation(t),[e];}),eu(Rl,Nl,function(e,t,i){if(!e.graveyardPosition&&!i.bWasUndone&&e.splitPosition.hasSameParentAs(t.sourcePosition)){var _i229=t.graveyardPosition.path.slice();_i229.push(0);var _n130=new ea(t.graveyardPosition.root,_i229),_o80=Rl.getInsertionPosition(new ea(t.graveyardPosition.root,_i229)),_r44=new Rl(_n130,0,_o80,null,0);return e.splitPosition=e.splitPosition._getTransformedByMergeOperation(t),e.insertionPosition=Rl.getInsertionPosition(e.splitPosition),e.graveyardPosition=_r44.insertionPosition.clone(),e.graveyardPosition.stickiness="toNext",[_r44,e];}return e.splitPosition.hasSameParentAs(t.deletionPosition)&&!e.splitPosition.isAfter(t.deletionPosition)&&e.howMany--,e.splitPosition.hasSameParentAs(t.targetPosition)&&(e.howMany+=t.howMany),e.splitPosition=e.splitPosition._getTransformedByMergeOperation(t),e.insertionPosition=Rl.getInsertionPosition(e.splitPosition),e.graveyardPosition&&(e.graveyardPosition=e.graveyardPosition._getTransformedByMergeOperation(t)),[e];}),eu(Rl,El,function(e,t,i){var n=oa._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.graveyardPosition){var _o81=n.start.isEqual(e.graveyardPosition)||n.containsPosition(e.graveyardPosition);if(!i.bWasUndone&&_o81){var _i230=e.splitPosition._getTransformedByMoveOperation(t),_n131=e.graveyardPosition._getTransformedByMoveOperation(t),_o82=_n131.path.slice();_o82.push(0);var _r45=new ea(_n131.root,_o82);return[new El(_i230,e.howMany,_r45,0)];}e.graveyardPosition=e.graveyardPosition._getTransformedByMoveOperation(t);}var o=e.splitPosition.isEqual(t.targetPosition);if(o&&("insertAtSource"==i.baRelation||"splitBefore"==i.abRelation))return e.howMany+=t.howMany,e.splitPosition=e.splitPosition._getTransformedByDeletion(t.sourcePosition,t.howMany),e.insertionPosition=Rl.getInsertionPosition(e.splitPosition),[e];if(o&&i.abRelation&&i.abRelation.howMany){var _i$abRelation=i.abRelation,_t212=_i$abRelation.howMany,_n132=_i$abRelation.offset;return e.howMany+=_t212,e.splitPosition=e.splitPosition.getShiftedBy(_n132),[e];}if(e.splitPosition.hasSameParentAs(t.sourcePosition)&&n.containsPosition(e.splitPosition)){var _i231=t.howMany-(e.splitPosition.offset-t.sourcePosition.offset);return e.howMany-=_i231,e.splitPosition.hasSameParentAs(t.targetPosition)&&e.splitPosition.offset<t.targetPosition.offset&&(e.howMany+=t.howMany),e.splitPosition=t.sourcePosition.clone(),e.insertionPosition=Rl.getInsertionPosition(e.splitPosition),[e];}return t.sourcePosition.isEqual(t.targetPosition)||(e.splitPosition.hasSameParentAs(t.sourcePosition)&&e.splitPosition.offset<=t.sourcePosition.offset&&(e.howMany-=t.howMany),e.splitPosition.hasSameParentAs(t.targetPosition)&&e.splitPosition.offset<t.targetPosition.offset&&(e.howMany+=t.howMany)),e.splitPosition.stickiness="toNone",e.splitPosition=e.splitPosition._getTransformedByMoveOperation(t),e.splitPosition.stickiness="toNext",e.graveyardPosition?e.insertionPosition=e.insertionPosition._getTransformedByMoveOperation(t):e.insertionPosition=Rl.getInsertionPosition(e.splitPosition),[e];}),eu(Rl,Rl,function(e,t,i){if(e.splitPosition.isEqual(t.splitPosition)){if(!e.graveyardPosition&&!t.graveyardPosition)return[new Zl(0)];if(e.graveyardPosition&&t.graveyardPosition&&e.graveyardPosition.isEqual(t.graveyardPosition))return[new Zl(0)];if("splitBefore"==i.abRelation)return e.howMany=0,e.graveyardPosition=e.graveyardPosition._getTransformedBySplitOperation(t),[e];}if(e.graveyardPosition&&t.graveyardPosition&&e.graveyardPosition.isEqual(t.graveyardPosition)){var _n133="$graveyard"==e.splitPosition.root.rootName,_o83="$graveyard"==t.splitPosition.root.rootName,_r46=_n133&&!_o83;if(_o83&&!_n133||!_r46&&i.aIsStrong){var _i232=[];return t.howMany&&_i232.push(new El(t.moveTargetPosition,t.howMany,t.splitPosition,0)),e.howMany&&_i232.push(new El(e.splitPosition,e.howMany,e.moveTargetPosition,0)),_i232;}return[new Zl(0)];}if(e.graveyardPosition&&(e.graveyardPosition=e.graveyardPosition._getTransformedBySplitOperation(t)),e.splitPosition.isEqual(t.insertionPosition)&&"splitBefore"==i.abRelation)return e.howMany++,[e];if(t.splitPosition.isEqual(e.insertionPosition)&&"splitBefore"==i.baRelation){var _i233=t.insertionPosition.path.slice();_i233.push(0);var _n134=new ea(t.insertionPosition.root,_i233);return[e,new El(e.insertionPosition,1,_n134,0)];}return e.splitPosition.hasSameParentAs(t.splitPosition)&&e.splitPosition.offset<t.splitPosition.offset&&(e.howMany-=t.howMany),e.splitPosition=e.splitPosition._getTransformedBySplitOperation(t),e.insertionPosition=Rl.getInsertionPosition(e.splitPosition),[e];});var du=/*#__PURE__*/function(_ts5){_inherits(du,_ts5);var _super74=_createSuper(du);function du(e){var _this137;_classCallCheck(this,du);_this137=_super74.call(this,e),_this137.domEventType="click";return _this137;}_createClass(du,[{key:"onDomEvent",value:function onDomEvent(e){this.fire(e.type,e);}}]);return du;}(ts);var uu=/*#__PURE__*/function(_ts6){_inherits(uu,_ts6);var _super75=_createSuper(uu);function uu(e){var _this138;_classCallCheck(this,uu);_this138=_super75.call(this,e),_this138.domEventType=["mousedown","mouseup","mouseover","mouseout"];return _this138;}_createClass(uu,[{key:"onDomEvent",value:function onDomEvent(e){this.fire(e.type,e);}}]);return uu;}(ts);var hu=/*#__PURE__*/function(){function hu(e){_classCallCheck(this,hu);this.document=e;}_createClass(hu,[{key:"createDocumentFragment",value:function createDocumentFragment(e){return new Wo(this.document,e);}},{key:"createElement",value:function createElement(e,t,i){return new eo(this.document,e,t,i);}},{key:"createText",value:function createText(e){return new un(this.document,e);}},{key:"clone",value:function clone(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;return e._clone(t);}},{key:"appendChild",value:function appendChild(e,t){return t._appendChild(e);}},{key:"insertChild",value:function insertChild(e,t,i){return i._insertChild(e,t);}},{key:"removeChildren",value:function removeChildren(e,t,i){return i._removeChildren(e,t);}},{key:"remove",value:function remove(e){var t=e.parent;return t?this.removeChildren(t.getChildIndex(e),1,t):[];}},{key:"replace",value:function replace(e,t){var i=e.parent;if(i){var _n135=i.getChildIndex(e);return this.removeChildren(_n135,1,i),this.insertChild(_n135,t,i),!0;}return!1;}},{key:"unwrapElement",value:function unwrapElement(e){var t=e.parent;if(t){var _i234=t.getChildIndex(e);this.remove(e),this.insertChild(_i234,e.getChildren(),t);}}},{key:"rename",value:function rename(e,t){var i=new eo(this.document,e,t.getAttributes(),t.getChildren());return this.replace(t,i)?i:null;}},{key:"setAttribute",value:function setAttribute(e,t,i){i._setAttribute(e,t);}},{key:"removeAttribute",value:function removeAttribute(e,t){t._removeAttribute(e);}},{key:"addClass",value:function addClass(e,t){t._addClass(e);}},{key:"removeClass",value:function removeClass(e,t){t._removeClass(e);}},{key:"setStyle",value:function setStyle(e,t,i){lt(e)&&void 0===i&&(i=t),i._setStyle(e,t);}},{key:"removeStyle",value:function removeStyle(e,t){t._removeStyle(e);}},{key:"setCustomProperty",value:function setCustomProperty(e,t,i){i._setCustomProperty(e,t);}},{key:"removeCustomProperty",value:function removeCustomProperty(e,t){return t._removeCustomProperty(e);}},{key:"createPositionAt",value:function createPositionAt(e,t){return lo._createAt(e,t);}},{key:"createPositionAfter",value:function createPositionAfter(e){return lo._createAfter(e);}},{key:"createPositionBefore",value:function createPositionBefore(e){return lo._createBefore(e);}},{key:"createRange",value:function createRange(e,t){return new co(e,t);}},{key:"createRangeOn",value:function createRangeOn(e){return co._createOn(e);}},{key:"createRangeIn",value:function createRangeIn(e){return co._createIn(e);}},{key:"createSelection",value:function createSelection(e,t,i){return new go(e,t,i);}}]);return hu;}();var gu=/^#([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i,mu=/^rgb\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}[0-9]{1,3}[ %]?\)$/i,fu=/^rgba\([ ]?([0-9]{1,3}[ %]?,[ ]?){3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,pu=/^hsl\([ ]?([0-9]{1,3}[ %]?[,]?[ ]*){3}(1|[0-9]+%|[0]?\.?[0-9]+)?\)$/i,bu=/^hsla\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,wu=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","rebeccapurple","currentcolor","transparent"]);function ku(e){return e.startsWith("#")?gu.test(e):e.startsWith("rgb")?mu.test(e)||fu.test(e):e.startsWith("hsl")?pu.test(e)||bu.test(e):wu.has(e.toLowerCase());}var _u=/^([+-]?[0-9]*([.][0-9]+)?(px|cm|mm|in|pc|pt|ch|em|ex|rem|vh|vw|vmin|vmax)|0)$/;function vu(e){return _u.test(e);}var yu=/^[+-]?[0-9]*([.][0-9]+)?%$/;var xu=["repeat-x","repeat-y","repeat","space","round","no-repeat"];var Au=["center","top","bottom","left","right"];function Cu(e){return Au.includes(e);}var Tu=["fixed","scroll","local"];function Eu(e){return Tu.includes(e);}var Iu=/^url\(/;function Su(e){return Iu.test(e);}function Pu(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";if(""===e)return{top:void 0,right:void 0,bottom:void 0,left:void 0};var t=zu(e),i=t[0],n=t[2]||i,o=t[1]||i;return{top:i,bottom:n,right:o,left:t[3]||o};}function Mu(e){return function(t){var i=t.top,n=t.right,o=t.bottom,r=t.left,s=[];return[i,n,r,o].every(function(e){return!!e;})?s.push([e,Nu(t)]):(i&&s.push([e+"-top",i]),n&&s.push([e+"-right",n]),o&&s.push([e+"-bottom",o]),r&&s.push([e+"-left",r])),s;};}function Nu(_ref38){var e=_ref38.top,t=_ref38.right,i=_ref38.bottom,n=_ref38.left;var o=[];return n!==t?o.push(e,t,i,n):i!==e?o.push(e,t,i):t!==e?o.push(e,t):o.push(e),o.join(" ");}function Ru(e){return function(t){return{path:e,value:Pu(t)};};}function zu(e){return e.replace(/, /g,",").split(" ").map(function(e){return e.replace(/,/g,", ");});}function Ou(e){e.setNormalizer("background",Du),e.setNormalizer("background-color",function(e){return{path:"background.color",value:e};}),e.setReducer("background",function(e){var t=[];return t.push(["background-color",e.color]),t;}),e.setStyleRelation("background",["background-color"]);}function Du(e){var t={},i=zu(e);var _iterator307=_createForOfIteratorHelper(i),_step307;try{for(_iterator307.s();!(_step307=_iterator307.n()).done;){var _e231=_step307.value;n=_e231,xu.includes(n)?(t.repeat=t.repeat||[],t.repeat.push(_e231)):Cu(_e231)?(t.position=t.position||[],t.position.push(_e231)):Eu(_e231)?t.attachment=_e231:ku(_e231)?t.color=_e231:Su(_e231)&&(t.image=_e231);}}catch(err){_iterator307.e(err);}finally{_iterator307.f();}var n;return{path:"background",value:t};}function Lu(e){e.setNormalizer("margin",Ru("margin")),e.setNormalizer("margin-top",function(e){return{path:"margin.top",value:e};}),e.setNormalizer("margin-right",function(e){return{path:"margin.right",value:e};}),e.setNormalizer("margin-bottom",function(e){return{path:"margin.bottom",value:e};}),e.setNormalizer("margin-left",function(e){return{path:"margin.left",value:e};}),e.setReducer("margin",Mu("margin")),e.setStyleRelation("margin",["margin-top","margin-right","margin-bottom","margin-left"]);}var Vu=/*#__PURE__*/function(_yc){_inherits(Vu,_yc);var _super76=_createSuper(Vu);function Vu(e,t){var _this139;_classCallCheck(this,Vu);_this139=_super76.call(this,e),_this139.view=t;return _this139;}_createClass(Vu,[{key:"init",value:function init(){var e=this.editor,t=this.view,i=e.editing.view,n=t.editable,o=i.document.getRoot();t.editable.name=o.rootName,t.render();var r=n.element;this.setEditableElement(n.name,r),this.focusTracker.add(r),t.editable.bind("isFocused").to(this.focusTracker),i.attachDomRoot(r),this._initPlaceholder(),this._initToolbar(),this.fire("ready");}},{key:"destroy",value:function destroy(){var e=this.view;this.editor.editing.view.detachDomRoot(e.editable.name),e.destroy(),_get(_getPrototypeOf(Vu.prototype),"destroy",this).call(this);}},{key:"_initToolbar",value:function _initToolbar(){var e=this.editor,t=this.view.toolbar;t.fillFromConfig(e.config.get("toolbar"),this.componentFactory),function(_ref39){var e=_ref39.origin,t=_ref39.originKeystrokeHandler,i=_ref39.originFocusTracker,n=_ref39.toolbar,o=_ref39.beforeFocus,r=_ref39.afterBlur;i.add(n.element),t.set("Alt+F10",function(e,t){i.isFocused&&!n.focusTracker.isFocused&&(o&&o(),n.focus(),t());}),n.keystrokes.set("Esc",function(t,i){n.focusTracker.isFocused&&(e.focus(),r&&r(),i());});}({origin:e.editing.view,originFocusTracker:this.focusTracker,originKeystrokeHandler:e.keystrokes,toolbar:t});}},{key:"_initPlaceholder",value:function _initPlaceholder(){var e=this.editor,t=e.editing.view,i=t.document.getRoot(),n=e.sourceElement,o=e.config.get("placeholder")||n&&"textarea"===n.tagName.toLowerCase()&&n.getAttribute("placeholder");o&&Gd({view:t,element:i,text:o,isDirectHost:!1,keepOnFocus:!0});}}]);return Vu;}(yc);var Bu=/*#__PURE__*/function(_Id){_inherits(Bu,_Id);var _super77=_createSuper(Bu);function Bu(e,t){var _this140;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};_classCallCheck(this,Bu);_this140=_super77.call(this,e),_this140.toolbar=new wd(e,{shouldGroupWhenFull:i.shouldToolbarGroupWhenFull}),_this140.editable=new Md(e,t,i.editableElement),_this140.toolbar.extendTemplate({attributes:{"class":["ck-reset_all","ck-rounded-corners"],dir:e.uiLanguageDirection}});return _this140;}_createClass(Bu,[{key:"render",value:function render(){_get(_getPrototypeOf(Bu.prototype),"render",this).call(this),this.registerChild([this.toolbar,this.editable]);}}]);return Bu;}(Id);var ju=/*#__PURE__*/function(_kc){_inherits(ju,_kc);var _super78=_createSuper(ju);function ju(e,t){var _this141;_classCallCheck(this,ju);_this141=_super78.call(this,t),Yi(e)&&(_this141.sourceElement=e,function(e){var t=e.sourceElement;if(t){if(t.ckeditorInstance)throw new l.a("editor-source-element-already-used",e);t.ckeditorInstance=e,e.once("destroy",function(){delete t.ckeditorInstance;});}}(_assertThisInitialized(_this141))),_this141.model.document.createRoot();var i=!_this141.config.get("toolbar.shouldNotGroupWhenFull"),n=new Bu(_this141.locale,_this141.editing.view,{editableElement:_this141.sourceElement,shouldToolbarGroupWhenFull:i});_this141.ui=new Vu(_assertThisInitialized(_this141),n);return _this141;}_createClass(ju,[{key:"destroy",value:function destroy(){var _this142=this;var e=this.getData();return this.ui.destroy(),_get(_getPrototypeOf(ju.prototype),"destroy",this).call(this).then(function(){_this142.sourceElement&&Ps(_this142.sourceElement,e);});}}],[{key:"create",value:function create(e){var _this143=this;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return new Promise(function(i){var n=Yi(e);if(n&&"TEXTAREA"===e.tagName)throw new l.a("editor-wrong-element",null);var o=new _this143(e,t);i(o.initPlugins().then(function(){o.ui.init();}).then(function(){if(!n&&t.initialData)throw new l.a("editor-create-initial-data",null);var i=void 0!==t.initialData?t.initialData:function(e){return Yi(e)?(t=e,t instanceof HTMLTextAreaElement?t.value:t.innerHTML):e;var t;}(e);return o.data.init(i);}).then(function(){return o.fire("ready");}).then(function(){return o;}));});}}]);return ju;}(kc);Ke(ju,xc);var Fu=/*#__PURE__*/function(){function Fu(e){_classCallCheck(this,Fu);this.files=function(e){var t=Array.from(e.files||[]),i=Array.from(e.items||[]);if(t.length)return t;return i.filter(function(e){return"file"===e.kind;}).map(function(e){return e.getAsFile();});}(e),this._native=e;}_createClass(Fu,[{key:"types",get:function get(){return this._native.types;}},{key:"getData",value:function getData(e){return this._native.getData(e);}},{key:"setData",value:function setData(e,t){this._native.setData(e,t);}},{key:"effectAllowed",get:function get(){return this._native.effectAllowed;},set:function set(e){this._native.effectAllowed=e;}},{key:"dropEffect",get:function get(){return this._native.dropEffect;},set:function set(e){this._native.dropEffect=e;}},{key:"isCanceled",get:function get(){return"none"==this._native.dropEffect||!!this._native.mozUserCancelled;}}]);return Fu;}();var Hu=/*#__PURE__*/function(_ts7){_inherits(Hu,_ts7);var _super79=_createSuper(Hu);function Hu(e){var _this144;_classCallCheck(this,Hu);_this144=_super79.call(this,e);var t=_this144.document;function i(e){return function(i,n){n.preventDefault();var r=n.dropRange?[n.dropRange]:null,s=new o(t,e);t.fire(s,{dataTransfer:n.dataTransfer,method:i.name,targetRanges:r,target:n.target}),s.stop.called&&n.stopPropagation();};}_this144.domEventType=["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"],_this144.listenTo(t,"paste",i("clipboardInput"),{priority:"low"}),_this144.listenTo(t,"drop",i("clipboardInput"),{priority:"low"}),_this144.listenTo(t,"dragover",i("dragging"),{priority:"low"});return _this144;}_createClass(Hu,[{key:"onDomEvent",value:function onDomEvent(e){var t={dataTransfer:new Fu(e.clipboardData?e.clipboardData:e.dataTransfer)};"drop"!=e.type&&"dragover"!=e.type||(t.dropRange=function(e,t){var i=t.target.ownerDocument,n=t.clientX,o=t.clientY;var r;i.caretRangeFromPoint&&i.caretRangeFromPoint(n,o)?r=i.caretRangeFromPoint(n,o):t.rangeParent&&(r=i.createRange(),r.setStart(t.rangeParent,t.rangeOffset),r.collapse(!0));if(r)return e.domConverter.domRangeToView(r);return null;}(this.view,e)),this.fire(e.type,e,t);}}]);return Hu;}(ts);var Uu=["figcaption","li"];var Wu=/*#__PURE__*/function(_Qe2){_inherits(Wu,_Qe2);var _super80=_createSuper(Wu);function Wu(){_classCallCheck(this,Wu);return _super80.apply(this,arguments);}_createClass(Wu,[{key:"init",value:function init(){this.editor.editing.view.addObserver(Hu),this._setupPasteDrop(),this._setupCopyCut();}},{key:"_setupPasteDrop",value:function _setupPasteDrop(){var _this145=this;var e=this.editor,t=e.model,i=e.editing.view,n=i.document;this.listenTo(n,"clipboardInput",function(t){e.isReadOnly&&t.stop();},{priority:"highest"}),this.listenTo(n,"clipboardInput",function(e,t){var n=t.dataTransfer;var r=t.content||"";var s;r||(n.getData("text/html")?r=function(e){return e.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,function(e,t){return 1==t.length?" ":t;}).replace(/<!--[\s\S]*?-->/g,"");}(n.getData("text/html")):n.getData("text/plain")&&(((s=(s=n.getData("text/plain")).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;")).includes("</p><p>")||s.includes("<br>"))&&(s="<p>".concat(s,"</p>")),r=s),r=_this145.editor.data.htmlProcessor.toView(r));var a=new o(_this145,"inputTransformation");_this145.fire(a,{content:r,dataTransfer:n,targetRanges:t.targetRanges,method:t.method}),a.stop.called&&e.stop(),i.scrollToTheSelection();},{priority:"low"}),this.listenTo(this,"inputTransformation",function(e,i){if(i.content.isEmpty)return;var n=_this145.editor.data.toModel(i.content,"$clipboardHolder");0!=n.childCount&&(e.stop(),t.change(function(){_this145.fire("contentInsertion",{content:n,method:i.method,dataTransfer:i.dataTransfer,targetRanges:i.targetRanges});}));},{priority:"low"}),this.listenTo(this,"contentInsertion",function(e,i){i.resultRange=t.insertContent(i.content);},{priority:"low"});}},{key:"_setupCopyCut",value:function _setupCopyCut(){var _this146=this;var e=this.editor,t=e.model.document,i=e.editing.view.document;function n(n,o){var r=o.dataTransfer;o.preventDefault();var s=e.data.toView(e.model.getSelectedContent(t.selection));i.fire("clipboardOutput",{dataTransfer:r,content:s,method:n.name});}this.listenTo(i,"copy",n,{priority:"low"}),this.listenTo(i,"cut",function(t,i){e.isReadOnly?i.preventDefault():n(t,i);},{priority:"low"}),this.listenTo(i,"clipboardOutput",function(i,n){n.content.isEmpty||(n.dataTransfer.setData("text/html",_this146.editor.data.htmlProcessor.toData(n.content)),n.dataTransfer.setData("text/plain",function e(t){var i="";if(t.is("$text")||t.is("$textProxy"))i=t.data;else if(t.is("element","img")&&t.hasAttribute("alt"))i=t.getAttribute("alt");else if(t.is("element","br"))i="\n";else{var _n136=null;var _iterator308=_createForOfIteratorHelper(t.getChildren()),_step308;try{for(_iterator308.s();!(_step308=_iterator308.n()).done;){var _o84=_step308.value;var _t213=e(_o84);_n136&&(_n136.is("containerElement")||_o84.is("containerElement"))&&(Uu.includes(_n136.name)||Uu.includes(_o84.name)?i+="\n":i+="\n\n"),i+=_t213,_n136=_o84;}}catch(err){_iterator308.e(err);}finally{_iterator308.f();}}return i;}(n.content))),"cut"==n.method&&e.model.deleteContent(t.selection);},{priority:"low"});}}],[{key:"pluginName",get:function get(){return"ClipboardPipeline";}}]);return Wu;}(Qe);function qu(e,t){var _iterator309,_step309,_i235;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function qu$(_context37){while(1){switch(_context37.prev=_context37.next){case 0:_iterator309=_createForOfIteratorHelper(t);_context37.prev=1;_iterator309.s();case 3:if((_step309=_iterator309.n()).done){_context37.next=11;break;}_i235=_step309.value;_context37.t0=_i235&&e.getAttributeProperties(_i235[0]).copyOnEnter;if(!_context37.t0){_context37.next=9;break;}_context37.next=9;return _i235;case 9:_context37.next=3;break;case 11:_context37.next=16;break;case 13:_context37.prev=13;_context37.t1=_context37["catch"](1);_iterator309.e(_context37.t1);case 16:_context37.prev=16;_iterator309.f();return _context37.finish(16);case 19:case"end":return _context37.stop();}}},_marked3,null,[[1,13,16,19]]);}var $u=/*#__PURE__*/function(_Ze2){_inherits($u,_Ze2);var _super81=_createSuper($u);function $u(){_classCallCheck(this,$u);return _super81.apply(this,arguments);}_createClass($u,[{key:"execute",value:function execute(){var _this147=this;var e=this.editor.model,t=e.document;e.change(function(i){!function(e,t,i,n){var o=i.isCollapsed,r=i.getFirstRange(),s=r.start.parent,a=r.end.parent;if(n.isLimit(s)||n.isLimit(a))return void(o||s!=a||e.deleteContent(i));if(o){var _e232=qu(t.model.schema,i.getAttributes());Yu(t,r.start),t.setSelectionAttribute(_e232);}else{var _n137=!(r.start.isAtStart&&r.end.isAtEnd),_o85=s==a;e.deleteContent(i,{leaveUnmerged:_n137}),_n137&&(_o85?Yu(t,i.focus):t.setSelection(a,0));}}(_this147.editor.model,i,t.selection,e.schema),_this147.fire("afterExecute",{writer:i});});}}]);return $u;}(Ze);function Yu(e,t){e.split(t),e.setSelection(t.parent.nextSibling,0);}var Gu=/*#__PURE__*/function(_zr6){_inherits(Gu,_zr6);var _super82=_createSuper(Gu);function Gu(e){var _this148;_classCallCheck(this,Gu);_this148=_super82.call(this,e);var t=_this148.document;t.on("keydown",function(e,i){if(_this148.isEnabled&&i.keyCode==No.enter){var _n138=new fo(t,"enter",t.selection.getFirstRange());t.fire(_n138,new es(t,i.domEvent,{isSoft:i.shiftKey})),_n138.stop.called&&e.stop();}});return _this148;}_createClass(Gu,[{key:"observe",value:function observe(){}}]);return Gu;}(zr);var Ku=/*#__PURE__*/function(_Qe3){_inherits(Ku,_Qe3);var _super83=_createSuper(Ku);function Ku(){_classCallCheck(this,Ku);return _super83.apply(this,arguments);}_createClass(Ku,[{key:"init",value:function init(){var e=this.editor,t=e.editing.view,i=t.document;t.addObserver(Gu),e.commands.add("enter",new $u(e)),this.listenTo(i,"enter",function(i,n){n.preventDefault(),n.isSoft||(e.execute("enter"),t.scrollToTheSelection());},{priority:"low"});}}],[{key:"pluginName",get:function get(){return"Enter";}}]);return Ku;}(Qe);var Qu=/*#__PURE__*/function(){function Qu(e){var _this149=this;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:20;_classCallCheck(this,Qu);this.model=e,this.size=0,this.limit=t,this.isLocked=!1,this._changeCallback=function(e,t){"transparent"!=t.type&&t!==_this149._batch&&_this149._reset(!0);},this._selectionChangeCallback=function(){_this149._reset();},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback);}_createClass(Qu,[{key:"batch",get:function get(){return this._batch||(this._batch=this.model.createBatch()),this._batch;}},{key:"input",value:function input(e){this.size+=e,this.size>=this.limit&&this._reset(!0);}},{key:"lock",value:function lock(){this.isLocked=!0;}},{key:"unlock",value:function unlock(){this.isLocked=!1;}},{key:"destroy",value:function destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback);}},{key:"_reset",value:function _reset(e){this.isLocked&&!e||(this._batch=null,this.size=0);}}]);return Qu;}();var Ju=/*#__PURE__*/function(_Ze3){_inherits(Ju,_Ze3);var _super84=_createSuper(Ju);function Ju(e,t){var _this150;_classCallCheck(this,Ju);_this150=_super84.call(this,e),_this150.direction=t,_this150._buffer=new Qu(e.model,e.config.get("typing.undoStep"));return _this150;}_createClass(Ju,[{key:"buffer",get:function get(){return this._buffer;}},{key:"execute",value:function execute(){var _this151=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=this.editor.model,i=t.document;t.enqueueChange(this._buffer.batch,function(n){_this151._buffer.lock();var o=n.createSelection(e.selection||i.selection),r=e.sequence||1,s=o.isCollapsed;if(o.isCollapsed&&t.modifySelection(o,{direction:_this151.direction,unit:e.unit}),_this151._shouldEntireContentBeReplacedWithParagraph(r))return void _this151._replaceEntireContentWithParagraph(n);if(_this151._shouldReplaceFirstBlockWithParagraph(o,r))return void _this151.editor.execute("paragraph",{selection:o});if(o.isCollapsed)return;var a=0;o.getFirstRange().getMinimalFlatRanges().forEach(function(e){a+=ho(e.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}));}),t.deleteContent(o,{doNotResetEntireContent:s,direction:_this151.direction}),_this151._buffer.input(a),n.setSelection(o),_this151._buffer.unlock();});}},{key:"_shouldEntireContentBeReplacedWithParagraph",value:function _shouldEntireContentBeReplacedWithParagraph(e){if(e>1)return!1;var t=this.editor.model,i=t.document.selection,n=t.schema.getLimitElement(i);if(!(i.isCollapsed&&i.containsEntireContent(n)))return!1;if(!t.schema.checkChild(n,"paragraph"))return!1;var o=n.getChild(0);return!o||"paragraph"!==o.name;}},{key:"_replaceEntireContentWithParagraph",value:function _replaceEntireContentWithParagraph(e){var t=this.editor.model,i=t.document.selection,n=t.schema.getLimitElement(i),o=e.createElement("paragraph");e.remove(e.createRangeIn(n)),e.insert(o,n),e.setSelection(o,0);}},{key:"_shouldReplaceFirstBlockWithParagraph",value:function _shouldReplaceFirstBlockWithParagraph(e,t){var i=this.editor.model;if(t>1||"backward"!=this.direction)return!1;if(!e.isCollapsed)return!1;var n=e.getFirstPosition(),o=i.schema.getLimitElement(n),r=o.getChild(0);return n.parent==r&&!!e.containsEntireContent(r)&&!!i.schema.checkChild(o,"paragraph")&&"paragraph"!=r.name;}}]);return Ju;}(Ze);var Zu=/*#__PURE__*/function(_zr7){_inherits(Zu,_zr7);var _super85=_createSuper(Zu);function Zu(e){var _this152;_classCallCheck(this,Zu);_this152=_super85.call(this,e);var t=e.document;var i=0;function n(e,i,n){var o=new fo(t,"delete",t.selection.getFirstRange());t.fire(o,new es(t,i,n)),o.stop.called&&e.stop();}t.on("keyup",function(e,t){t.keyCode!=No["delete"]&&t.keyCode!=No.backspace||(i=0);}),t.on("keydown",function(e,t){var o={};if(t.keyCode==No["delete"])o.direction="forward",o.unit="character";else{if(t.keyCode!=No.backspace)return;o.direction="backward",o.unit="codePoint";}var r=So.isMac?t.altKey:t.ctrlKey;o.unit=r?"word":o.unit,o.sequence=++i,n(e,t.domEvent,o);}),So.isAndroid&&t.on("beforeinput",function(t,i){if("deleteContentBackward"!=i.domEvent.inputType)return;var o={unit:"codepoint",direction:"backward",sequence:1},r=i.domTarget.ownerDocument.defaultView.getSelection();r.anchorNode==r.focusNode&&r.anchorOffset+1!=r.focusOffset&&(o.selectionToRemove=e.domConverter.domSelectionToView(r)),n(t,i.domEvent,o);});return _this152;}_createClass(Zu,[{key:"observe",value:function observe(){}}]);return Zu;}(zr);var Xu=/*#__PURE__*/function(_Qe4){_inherits(Xu,_Qe4);var _super86=_createSuper(Xu);function Xu(){_classCallCheck(this,Xu);return _super86.apply(this,arguments);}_createClass(Xu,[{key:"init",value:function init(){var e=this.editor,t=e.editing.view,i=t.document;t.addObserver(Zu);var n=new Ju(e,"forward");if(e.commands.add("deleteForward",n),e.commands.add("forwardDelete",n),e.commands.add("delete",new Ju(e,"backward")),this.listenTo(i,"delete",function(i,n){var o={unit:n.unit,sequence:n.sequence};if(n.selectionToRemove){var _t214=e.model.createSelection(),_i236=[];var _iterator310=_createForOfIteratorHelper(n.selectionToRemove.getRanges()),_step310;try{for(_iterator310.s();!(_step310=_iterator310.n()).done;){var _t215=_step310.value;_i236.push(e.editing.mapper.toModelRange(_t215));}}catch(err){_iterator310.e(err);}finally{_iterator310.f();}_t214.setTo(_i236),o.selection=_t214;}e.execute("forward"==n.direction?"deleteForward":"delete",o),n.preventDefault(),t.scrollToTheSelection();},{priority:"low"}),So.isAndroid){var _e233=null;this.listenTo(i,"delete",function(t,i){var n=i.domTarget.ownerDocument.defaultView.getSelection();_e233={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset};},{priority:"lowest"}),this.listenTo(i,"keyup",function(t,i){if(_e233){var _t216=i.domTarget.ownerDocument.defaultView.getSelection();_t216.collapse(_e233.anchorNode,_e233.anchorOffset),_t216.extend(_e233.focusNode,_e233.focusOffset),_e233=null;}});}}}],[{key:"pluginName",get:function get(){return"Delete";}}]);return Xu;}(Qe);var eh=/*#__PURE__*/function(){function eh(){_classCallCheck(this,eh);this._stack=[];}_createClass(eh,[{key:"add",value:function add(e,t){var i=this._stack,n=i[0];this._insertDescriptor(e);var o=i[0];n===o||th(n,o)||this.fire("change:top",{oldDescriptor:n,newDescriptor:o,writer:t});}},{key:"remove",value:function remove(e,t){var i=this._stack,n=i[0];this._removeDescriptor(e);var o=i[0];n===o||th(n,o)||this.fire("change:top",{oldDescriptor:n,newDescriptor:o,writer:t});}},{key:"_insertDescriptor",value:function _insertDescriptor(e){var t=this._stack,i=t.findIndex(function(t){return t.id===e.id;});if(th(e,t[i]))return;i>-1&&t.splice(i,1);var n=0;for(;t[n]&&ih(t[n],e);){n++;}t.splice(n,0,e);}},{key:"_removeDescriptor",value:function _removeDescriptor(e){var t=this._stack,i=t.findIndex(function(t){return t.id===e;});i>-1&&t.splice(i,1);}}]);return eh;}();function th(e,t){return e&&t&&e.priority==t.priority&&nh(e.classes)==nh(t.classes);}function ih(e,t){return e.priority>t.priority||!(e.priority<t.priority)&&nh(e.classes)>nh(t.classes);}function nh(e){return Array.isArray(e)?e.sort().join(","):e;}Ke(eh,u);function oh(e){return!!e.is("element")&&!!e.getCustomProperty("widget");}function rh(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(!e.is("containerElement"))throw new l.a("widget-to-widget-wrong-element-type",null,{element:e});return t.setAttribute("contenteditable","false",e),t.addClass("ck-widget",e),t.setCustomProperty("widget",!0,e),e.getFillerOffset=gh,i.label&&function(e,t,i){i.setCustomProperty("widgetLabel",t,e);}(e,i.label,t),i.hasSelectionHandle&&function(e,t){var i=t.createUIElement("div",{"class":"ck ck-widget__selection-handle"},function(e){var t=this.toDomElement(e),i=new Jc();return i.set("content",'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>'),i.render(),t.appendChild(i.element),t;});t.insert(t.createPositionAt(e,0),i),t.addClass(["ck-widget_with-selection-handle"],e);}(e,t),lh(e,t,sh,ah),e;}function sh(e,t,i){if(t.classes&&i.addClass(en(t.classes),e),t.attributes)for(var _n139 in t.attributes){i.setAttribute(_n139,t.attributes[_n139],e);}}function ah(e,t,i){if(t.classes&&i.removeClass(en(t.classes),e),t.attributes)for(var _n140 in t.attributes){i.removeAttribute(_n140,e);}}function lh(e,t,i,n){var o=new eh();o.on("change:top",function(t,o){o.oldDescriptor&&n(e,o.oldDescriptor,o.writer),o.newDescriptor&&i(e,o.newDescriptor,o.writer);}),t.setCustomProperty("addHighlight",function(e,t,i){return o.add(t,i);},e),t.setCustomProperty("removeHighlight",function(e,t,i){return o.remove(t,i);},e);}function ch(e){var t=e.getCustomProperty("widgetLabel");return t?"function"==typeof t?t():t:"";}function dh(e,t){return t.addClass(["ck-editor__editable","ck-editor__nested-editable"],e),t.setAttribute("contenteditable",e.isReadOnly?"false":"true",e),e.on("change:isReadOnly",function(i,n,o){t.setAttribute("contenteditable",o?"false":"true",e);}),e.on("change:isFocused",function(i,n,o){o?t.addClass("ck-editor__nested-editable_focused",e):t.removeClass("ck-editor__nested-editable_focused",e);}),e;}function uh(e,t){var i=e.getSelectedElement();if(i){var _n141=fh(e);if(_n141)return t.createRange(t.createPositionAt(i,_n141));if(t.schema.isObject(i)&&!t.schema.isInline(i))return t.createRangeOn(i);}var n=e.getSelectedBlocks().next().value;if(n){if(n.isEmpty)return t.createRange(t.createPositionAt(n,0));var _i237=t.createPositionAfter(n);return e.focus.isTouching(_i237)?t.createRange(_i237):t.createRange(t.createPositionBefore(n));}return t.createRange(e.focus);}function hh(e,t){var i=new Cs(vr.window),n=i.getIntersection(e),o=t.height+Bd.arrowVerticalOffset;if(e.top-o>i.top||e.bottom+o<i.bottom)return null;var r=n||e,s=r.left+r.width/2-t.width/2;return{top:Math.max(e.top,0)+Bd.arrowVerticalOffset,left:s,name:"arrow_n"};}function gh(){return null;}function mh(e,t,i){return e&&oh(e)&&!i.isInline(t);}function fh(e){return e.getAttribute("widget-type-around");}var ph=[zo("arrowUp"),zo("arrowRight"),zo("arrowDown"),zo("arrowLeft"),9,16,17,18,19,20,27,33,34,35,36,45,91,93,144,145,173,174,175,176,177,178,179,255];for(var _e234=112;_e234<=135;_e234++){ph.push(_e234);}function bh(e){return!(!e.ctrlKey&&!e.metaKey)||ph.includes(e.keyCode);}i(61);var wh=["before","after"],kh=new DOMParser().parseFromString('<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>',"image/svg+xml").firstChild;var _h=/*#__PURE__*/function(_Qe5){_inherits(_h,_Qe5);var _super87=_createSuper(_h);function _h(e){var _this153;_classCallCheck(this,_h);_this153=_super87.call(this,e),_this153._currentFakeCaretModelElement=null;return _this153;}_createClass(_h,[{key:"init",value:function init(){var e=this.editor,t=e.editing.view;this.on("change:isEnabled",function(i,n,o){t.change(function(e){var _iterator311=_createForOfIteratorHelper(t.document.roots),_step311;try{for(_iterator311.s();!(_step311=_iterator311.n()).done;){var _i238=_step311.value;o?e.removeClass("ck-widget__type-around_disabled",_i238):e.addClass("ck-widget__type-around_disabled",_i238);}}catch(err){_iterator311.e(err);}finally{_iterator311.f();}}),o||e.model.change(function(e){e.removeSelectionAttribute("widget-type-around");});}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableDeleteContentIntegration();}},{key:"destroy",value:function destroy(){this._currentFakeCaretModelElement=null;}},{key:"_insertParagraph",value:function _insertParagraph(e,t){var i=this.editor,n=i.editing.view;i.execute("insertParagraph",{position:i.model.createPositionAt(e,t)}),n.focus(),n.scrollToTheSelection();}},{key:"_listenToIfEnabled",value:function _listenToIfEnabled(e,t,i,n){var _this154=this;this.listenTo(e,t,function(){_this154.isEnabled&&i.apply(void 0,arguments);},n);}},{key:"_insertParagraphAccordingToFakeCaretPosition",value:function _insertParagraphAccordingToFakeCaretPosition(){var e=this.editor.model.document.selection,t=fh(e);if(!t)return!1;var i=e.getSelectedElement();return this._insertParagraph(i,t),!0;}},{key:"_enableTypeAroundUIInjection",value:function _enableTypeAroundUIInjection(){var e=this.editor,t=e.model.schema,i=e.locale.t,n={before:i("Insert paragraph before block"),after:i("Insert paragraph after block")};e.editing.downcastDispatcher.on("insert",function(e,i,o){var r=o.mapper.toViewElement(i.item);mh(r,i.item,t)&&function(e,t,i){var n=e.createUIElement("div",{"class":"ck ck-reset_all ck-widget__type-around"},function(e){var i=this.toDomElement(e);return function(e,t){var _iterator312=_createForOfIteratorHelper(wh),_step312;try{for(_iterator312.s();!(_step312=_iterator312.n()).done;){var _i239=_step312.value;var _n142=new Mc({tag:"div",attributes:{"class":["ck","ck-widget__type-around__button","ck-widget__type-around__button_"+_i239],title:t[_i239]},children:[e.ownerDocument.importNode(kh,!0)]});e.appendChild(_n142.render());}}catch(err){_iterator312.e(err);}finally{_iterator312.f();}}(i,t),function(e){var t=new Mc({tag:"div",attributes:{"class":["ck","ck-widget__type-around__fake-caret"]}});e.appendChild(t.render());}(i),i;});e.insert(e.createPositionAt(i,"end"),n);}(o.writer,n,r);},{priority:"low"});}},{key:"_enableTypeAroundFakeCaretActivationUsingKeyboardArrows",value:function _enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){var _this155=this;var e=this.editor,t=e.model,i=t.document.selection,n=t.schema,o=e.editing.view;function r(e){return"ck-widget_type-around_show-fake-caret_"+e;}this._listenToIfEnabled(o.document,"arrowKey",function(e,t){_this155._handleArrowKeyPress(e,t);},{context:[oh,"$text"],priority:"high"}),this._listenToIfEnabled(i,"change:range",function(t,i){i.directChange&&e.model.change(function(e){e.removeSelectionAttribute("widget-type-around");});}),this._listenToIfEnabled(t.document,"change:data",function(){var t=i.getSelectedElement();if(t){if(mh(e.editing.mapper.toViewElement(t),t,n))return;}e.model.change(function(e){e.removeSelectionAttribute("widget-type-around");});}),this._listenToIfEnabled(e.editing.downcastDispatcher,"selection",function(e,t,i){var o=i.writer;if(_this155._currentFakeCaretModelElement){var _e235=i.mapper.toViewElement(_this155._currentFakeCaretModelElement);_e235&&(o.removeClass(wh.map(r),_e235),_this155._currentFakeCaretModelElement=null);}var s=t.selection.getSelectedElement();if(!s)return;var a=i.mapper.toViewElement(s);if(!mh(a,s,n))return;var l=fh(t.selection);l&&(o.addClass(r(l),a),_this155._currentFakeCaretModelElement=s);}),this._listenToIfEnabled(e.ui.focusTracker,"change:isFocused",function(t,i,n){n||e.model.change(function(e){e.removeSelectionAttribute("widget-type-around");});});}},{key:"_handleArrowKeyPress",value:function _handleArrowKeyPress(e,t){var i=this.editor,n=i.model,o=n.document.selection,r=n.schema,s=i.editing.view,a=Vo(t.keyCode,i.locale.contentLanguageDirection),l=s.document.selection.getSelectedElement();var c;mh(l,i.editing.mapper.toModelElement(l),r)?c=this._handleArrowKeyPressOnSelectedWidget(a):o.isCollapsed&&(c=this._handleArrowKeyPressWhenSelectionNextToAWidget(a)),c&&(t.preventDefault(),e.stop());}},{key:"_handleArrowKeyPressOnSelectedWidget",value:function _handleArrowKeyPressOnSelectedWidget(e){var t=this.editor.model,i=fh(t.document.selection);return t.change(function(t){if(!i)return t.setSelectionAttribute("widget-type-around",e?"after":"before"),!0;if(!(i===(e?"after":"before")))return t.removeSelectionAttribute("widget-type-around"),!0;return!1;});}},{key:"_handleArrowKeyPressWhenSelectionNextToAWidget",value:function _handleArrowKeyPressWhenSelectionNextToAWidget(e){var t=this.editor,i=t.model,n=i.schema,o=t.plugins.get("Widget"),r=o._getObjectElementNextToSelection(e);return!!mh(t.editing.mapper.toViewElement(r),r,n)&&(i.change(function(t){o._setSelectionOverElement(r),t.setSelectionAttribute("widget-type-around",e?"before":"after");}),!0);}},{key:"_enableInsertingParagraphsOnButtonClick",value:function _enableInsertingParagraphsOnButtonClick(){var _this156=this;var e=this.editor,t=e.editing.view;this._listenToIfEnabled(t.document,"mousedown",function(i,n){var o=n.domTarget.closest(".ck-widget__type-around__button");if(!o)return;var r=function(e){return e.classList.contains("ck-widget__type-around__button_before")?"before":"after";}(o),s=function(e,t){var i=e.closest(".ck-widget");return t.mapDomToView(i);}(o,t.domConverter),a=e.editing.mapper.toModelElement(s);_this156._insertParagraph(a,r),n.preventDefault(),i.stop();});}},{key:"_enableInsertingParagraphsOnEnterKeypress",value:function _enableInsertingParagraphsOnEnterKeypress(){var _this157=this;var e=this.editor,t=e.model.document.selection,i=e.editing.view;this._listenToIfEnabled(i.document,"enter",function(i,n){if("atTarget"!=i.eventPhase)return;var o=t.getSelectedElement(),r=e.editing.mapper.toViewElement(o),s=e.model.schema;var a;_this157._insertParagraphAccordingToFakeCaretPosition()?a=!0:mh(r,o,s)&&(_this157._insertParagraph(o,n.isSoft?"before":"after"),a=!0),a&&(n.preventDefault(),i.stop());},{context:oh});}},{key:"_enableInsertingParagraphsOnTypingKeystroke",value:function _enableInsertingParagraphsOnTypingKeystroke(){var _this158=this;var e=this.editor.editing.view,t=[No.enter,No["delete"],No.backspace];this._listenToIfEnabled(e.document,"keydown",function(e,i){t.includes(i.keyCode)||bh(i)||_this158._insertParagraphAccordingToFakeCaretPosition();},{priority:"high"});}},{key:"_enableDeleteIntegration",value:function _enableDeleteIntegration(){var e=this.editor,t=e.editing.view,i=e.model,n=i.schema;this._listenToIfEnabled(t.document,"delete",function(t,o){if("atTarget"!=t.eventPhase)return;var r=fh(i.document.selection);if(!r)return;var s=o.direction,a=i.document.selection.getSelectedElement(),l="forward"==s;if("before"===r===l)e.execute("delete",{selection:i.createSelection(a,"on")});else{var _t217=n.getNearestSelectionRange(i.createPositionAt(a,r),s);if(_t217)if(_t217.isCollapsed){var _o86=i.createSelection(_t217.start);if(i.modifySelection(_o86,{direction:s}),_o86.focus.isEqual(_t217.start)){var _e236=function(e,t){var i=t;var _iterator313=_createForOfIteratorHelper(t.getAncestors({parentFirst:!0})),_step313;try{for(_iterator313.s();!(_step313=_iterator313.n()).done;){var _n143=_step313.value;if(_n143.childCount>1||e.isLimit(_n143))break;i=_n143;}}catch(err){_iterator313.e(err);}finally{_iterator313.f();}return i;}(n,_t217.start.parent);i.deleteContent(i.createSelection(_e236,"on"),{doNotAutoparagraph:!0});}else i.change(function(i){i.setSelection(_t217),e.execute(l?"deleteForward":"delete");});}else i.change(function(i){i.setSelection(_t217),e.execute(l?"deleteForward":"delete");});}o.preventDefault(),t.stop();},{context:oh});}},{key:"_enableInsertContentIntegration",value:function _enableInsertContentIntegration(){var e=this.editor,t=this.editor.model,i=t.document.selection;this._listenToIfEnabled(e.model,"insertContent",function(e,_ref40){var _ref41=_slicedToArray(_ref40,2),n=_ref41[0],o=_ref41[1];if(o&&!o.is("documentSelection"))return;var r=fh(i);return r?(e.stop(),t.change(function(e){var o=i.getSelectedElement(),s=t.createPositionAt(o,r),a=e.createSelection(s),l=t.insertContent(n,a);return e.setSelection(a),l;})):void 0;},{priority:"high"});}},{key:"_enableDeleteContentIntegration",value:function _enableDeleteContentIntegration(){var e=this.editor,t=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"deleteContent",function(e,_ref42){var _ref43=_slicedToArray(_ref42,1),i=_ref43[0];if(i&&!i.is("documentSelection"))return;fh(t)&&e.stop();},{priority:"high"});}}],[{key:"pluginName",get:function get(){return"WidgetTypeAround";}},{key:"requires",get:function get(){return[Ku,Xu];}}]);return _h;}(Qe);i(63);function vh(e){var t=e.model;return function(i,n){var o=n.keyCode==No.arrowup,r=n.keyCode==No.arrowdown,s=n.shiftKey,a=t.document.selection;if(!o&&!r)return;var l=r;if(s&&function(e,t){return!e.isCollapsed&&e.isBackward==t;}(a,l))return;var c=function(e,t,i){var n=e.model;if(i){var _e237=t.isCollapsed?t.focus:t.getLastPosition(),_i240=yh(n,_e237,"forward");if(!_i240)return null;var _o87=n.createRange(_e237,_i240),_r47=xh(n.schema,_o87,"backward");return _r47&&_e237.isBefore(_r47)?n.createRange(_e237,_r47):null;}{var _e238=t.isCollapsed?t.focus:t.getFirstPosition(),_i241=yh(n,_e238,"backward");if(!_i241)return null;var _o88=n.createRange(_i241,_e238),_r48=xh(n.schema,_o88,"forward");return _r48&&_e238.isAfter(_r48)?n.createRange(_r48,_e238):null;}}(e,a,l);c&&!c.isCollapsed&&function(e,t,i){var n=e.model,o=e.view.domConverter;if(i){var _e239=n.createSelection(t.start);n.modifySelection(_e239),_e239.focus.isAtEnd||t.start.isEqual(_e239.focus)||(t=n.createRange(_e239.focus,t.end));}var r=e.mapper.toViewRange(t),s=o.viewRangeToDom(r),a=Cs.getDomRangeRects(s);var l;var _iterator314=_createForOfIteratorHelper(a),_step314;try{for(_iterator314.s();!(_step314=_iterator314.n()).done;){var _e240=_step314.value;if(void 0!==l){if(Math.round(_e240.top)>=l)return!1;l=Math.max(l,Math.round(_e240.bottom));}else l=Math.round(_e240.bottom);}}catch(err){_iterator314.e(err);}finally{_iterator314.f();}return!0;}(e,c,l)&&(t.change(function(e){var i=l?c.end:c.start;if(s){var _n144=t.createSelection(a.anchor);_n144.setFocus(i),e.setSelection(_n144);}else e.setSelection(i);}),i.stop(),n.preventDefault(),n.stopPropagation());};}function yh(e,t,i){var n=e.schema,o=e.createRangeIn(t.root),r="forward"==i?"elementStart":"elementEnd";var _iterator315=_createForOfIteratorHelper(o.getWalker({startPosition:t,direction:i})),_step315;try{for(_iterator315.s();!(_step315=_iterator315.n()).done;){var _step315$value=_step315.value,_e241=_step315$value.previousPosition,_s26=_step315$value.item,_a17=_step315$value.type;if(n.isLimit(_s26)&&!n.isInline(_s26))return _e241;if(_a17==r&&n.isBlock(_s26))return null;}}catch(err){_iterator315.e(err);}finally{_iterator315.f();}return null;}function xh(e,t,i){var n="backward"==i?t.end:t.start;if(e.checkChild(n,"$text"))return n;var _iterator316=_createForOfIteratorHelper(t.getWalker({direction:i})),_step316;try{for(_iterator316.s();!(_step316=_iterator316.n()).done;){var _n145=_step316.value.nextPosition;if(e.checkChild(_n145,"$text"))return _n145;}}catch(err){_iterator316.e(err);}finally{_iterator316.f();}}var Ah=/*#__PURE__*/function(_Qe6){_inherits(Ah,_Qe6);var _super88=_createSuper(Ah);function Ah(){_classCallCheck(this,Ah);return _super88.apply(this,arguments);}_createClass(Ah,[{key:"init",value:function init(){var _this159=this;var e=this.editor,t=e.editing.view,i=t.document;this._previouslySelected=new Set(),this.editor.editing.downcastDispatcher.on("selection",function(t,i,n){var o=n.writer,r=i.selection;if(r.isCollapsed)return;var s=r.getSelectedElement();if(!s)return;var a=e.editing.mapper.toViewElement(s);oh(a)&&n.consumable.consume(r,"selection")&&o.setSelection(o.createRangeOn(a),{fake:!0,label:ch(a)});}),this.editor.editing.downcastDispatcher.on("selection",function(e,t,i){_this159._clearPreviouslySelectedWidgets(i.writer);var n=i.writer,o=n.document.selection;var r=null;var _iterator317=_createForOfIteratorHelper(o.getRanges()),_step317;try{for(_iterator317.s();!(_step317=_iterator317.n()).done;){var _e242=_step317.value;var _iterator318=_createForOfIteratorHelper(_e242),_step318;try{for(_iterator318.s();!(_step318=_iterator318.n()).done;){var _t218=_step318.value;var _e243=_t218.item;oh(_e243)&&!Ch(_e243,r)&&(n.addClass("ck-widget_selected",_e243),_this159._previouslySelected.add(_e243),r=_e243);}}catch(err){_iterator318.e(err);}finally{_iterator318.f();}}}catch(err){_iterator317.e(err);}finally{_iterator317.f();}},{priority:"low"}),t.addObserver(uu),this.listenTo(i,"mousedown",function(){return _this159._onMousedown.apply(_this159,arguments);}),this.listenTo(i,"arrowKey",function(){_this159._handleSelectionChangeOnArrowKeyPress.apply(_this159,arguments);},{context:[oh,"$text"]}),this.listenTo(i,"arrowKey",function(){_this159._preventDefaultOnArrowKeyPress.apply(_this159,arguments);},{context:"$root"}),this.listenTo(i,"arrowKey",vh(this.editor.editing),{context:"$text"}),this.listenTo(i,"delete",function(e,t){_this159._handleDelete("forward"==t.direction)&&(t.preventDefault(),e.stop());},{context:"$root"});}},{key:"_onMousedown",value:function _onMousedown(e,t){var i=this.editor,n=i.editing.view,o=n.document;var r=t.target;if(function(e){for(;e;){if(e.is("editableElement")&&!e.is("rootElement"))return!0;if(oh(e))return!1;e=e.parent;}return!1;}(r)){if((So.isSafari||So.isGecko)&&t.domEvent.detail>=3){var _e244=i.editing.mapper,_n146=r.is("attributeElement")?r.findAncestor(function(e){return!e.is("attributeElement");}):r,_o89=_e244.toModelElement(_n146);t.preventDefault(),this.editor.model.change(function(e){e.setSelection(_o89,"in");});}return;}if(!oh(r)&&(r=r.findAncestor(oh),!r))return;So.isAndroid&&t.preventDefault(),o.isFocused||n.focus();var s=i.editing.mapper.toModelElement(r);this._setSelectionOverElement(s);}},{key:"_handleSelectionChangeOnArrowKeyPress",value:function _handleSelectionChangeOnArrowKeyPress(e,t){var i=t.keyCode,n=this.editor.model,o=n.schema,r=n.document.selection,s=r.getSelectedElement(),a=Vo(i,this.editor.locale.contentLanguageDirection);if(s&&o.isObject(s)){var _i242=a?r.getLastPosition():r.getFirstPosition(),_s27=o.getNearestSelectionRange(_i242,a?"forward":"backward");return void(_s27&&(n.change(function(e){e.setSelection(_s27);}),t.preventDefault(),e.stop()));}if(!r.isCollapsed)return;var l=this._getObjectElementNextToSelection(a);l&&o.isObject(l)&&(this._setSelectionOverElement(l),t.preventDefault(),e.stop());}},{key:"_preventDefaultOnArrowKeyPress",value:function _preventDefaultOnArrowKeyPress(e,t){var i=this.editor.model,n=i.schema,o=i.document.selection.getSelectedElement();o&&n.isObject(o)&&(t.preventDefault(),e.stop());}},{key:"_handleDelete",value:function _handleDelete(e){var _this160=this;if(this.editor.isReadOnly)return;var t=this.editor.model.document.selection;if(!t.isCollapsed)return;var i=this._getObjectElementNextToSelection(e);return i?(this.editor.model.change(function(e){var n=t.anchor.parent;for(;n.isEmpty;){var _t219=n;n=_t219.parent,e.remove(_t219);}_this160._setSelectionOverElement(i);}),!0):void 0;}},{key:"_setSelectionOverElement",value:function _setSelectionOverElement(e){this.editor.model.change(function(t){t.setSelection(t.createRangeOn(e));});}},{key:"_getObjectElementNextToSelection",value:function _getObjectElementNextToSelection(e){var t=this.editor.model,i=t.schema,n=t.document.selection,o=t.createSelection(n);t.modifySelection(o,{direction:e?"forward":"backward"});var r=e?o.focus.nodeBefore:o.focus.nodeAfter;return r&&i.isObject(r)?r:null;}},{key:"_clearPreviouslySelectedWidgets",value:function _clearPreviouslySelectedWidgets(e){var _iterator319=_createForOfIteratorHelper(this._previouslySelected),_step319;try{for(_iterator319.s();!(_step319=_iterator319.n()).done;){var _t220=_step319.value;e.removeClass("ck-widget_selected",_t220);}}catch(err){_iterator319.e(err);}finally{_iterator319.f();}this._previouslySelected.clear();}}],[{key:"pluginName",get:function get(){return"Widget";}},{key:"requires",get:function get(){return[_h,Xu];}}]);return Ah;}(Qe);function Ch(e,t){return!!t&&Array.from(e.getAncestors()).includes(t);}var Th=function Th(e,t,i){var n=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return w(i)&&(n="leading"in i?!!i.leading:n,o="trailing"in i?!!i.trailing:o),fs(e,t,{leading:n,maxWait:t,trailing:o});};i(65);var Eh=/*#__PURE__*/function(_Qe7){_inherits(Eh,_Qe7);var _super89=_createSuper(Eh);function Eh(){_classCallCheck(this,Eh);return _super89.apply(this,arguments);}_createClass(Eh,[{key:"init",value:function init(){var _this161=this;var e=this.editor,t=e.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,this._updateDropMarkerThrottled=Th(function(e){return _this161._updateDropMarker(e);},40),this._removeDropMarkerDelayed=Ph(function(){return _this161._removeDropMarker();},40),this._clearDraggableAttributesDelayed=Ph(function(){return _this161._clearDraggableAttributes();},40),t.addObserver(Hu),t.addObserver(uu),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDropMarker(),this._setupDraggableAttributeHandling(),this.listenTo(e,"change:isReadOnly",function(e,t,i){i?_this161.forceDisabled("readOnlyMode"):_this161.clearForceDisabled("readOnlyMode");}),this.on("change:isEnabled",function(e,t,i){i||_this161._finalizeDragging(!1);}),So.isAndroid&&this.forceDisabled("noAndroidSupport");}},{key:"destroy",value:function destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._updateDropMarkerThrottled.cancel(),this._removeDropMarkerDelayed.cancel(),this._clearDraggableAttributesDelayed.cancel(),_get(_getPrototypeOf(Eh.prototype),"destroy",this).call(this);}},{key:"_setupDragging",value:function _setupDragging(){var _this162=this;var e=this.editor,t=e.model,i=t.document,n=e.editing.view,o=n.document;this.listenTo(o,"dragstart",function(n,r){var a=i.selection;if(r.target&&r.target.is("editableElement"))return void r.preventDefault();var l=r.target?Mh(r.target):null;if(l){var _i243=e.editing.mapper.toModelElement(l);_this162._draggedRange=ba.fromRange(t.createRangeOn(_i243)),e.plugins.has("WidgetToolbarRepository")&&e.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop");}else if(!o.selection.isCollapsed){var _e245=o.selection.getSelectedElement();_e245&&oh(_e245)||(_this162._draggedRange=ba.fromRange(a.getFirstRange()));}if(!_this162._draggedRange)return void r.preventDefault();_this162._draggingUid=s(),r.dataTransfer.effectAllowed=_this162.isEnabled?"copyMove":"copy",r.dataTransfer.setData("application/ckeditor5-dragging-uid",_this162._draggingUid);var c=t.createSelection(_this162._draggedRange.toRange()),d=e.data.toView(t.getSelectedContent(c));o.fire("clipboardOutput",{dataTransfer:r.dataTransfer,content:d,method:n.name}),_this162.isEnabled||(_this162._draggedRange.detach(),_this162._draggedRange=null,_this162._draggingUid="");},{priority:"low"}),this.listenTo(o,"dragend",function(e,t){_this162._finalizeDragging(!t.dataTransfer.isCanceled&&"move"==t.dataTransfer.dropEffect);},{priority:"low"}),this.listenTo(o,"dragenter",function(){_this162.isEnabled&&n.focus();}),this.listenTo(o,"dragleave",function(){_this162._removeDropMarkerDelayed();}),this.listenTo(o,"dragging",function(t,i){if(!_this162.isEnabled)return void(i.dataTransfer.dropEffect="none");_this162._removeDropMarkerDelayed.cancel();var n=Ih(e,i.targetRanges,i.target);_this162._draggedRange||(i.dataTransfer.dropEffect="copy"),So.isGecko||("copy"==i.dataTransfer.effectAllowed?i.dataTransfer.dropEffect="copy":["all","copyMove"].includes(i.dataTransfer.effectAllowed)&&(i.dataTransfer.dropEffect="move")),n&&_this162._updateDropMarkerThrottled(n);},{priority:"low"});}},{key:"_setupClipboardInputIntegration",value:function _setupClipboardInputIntegration(){var _this163=this;var e=this.editor,t=e.editing.view.document;this.listenTo(t,"clipboardInput",function(t,i){if("drop"!=i.method)return;var n=Ih(e,i.targetRanges,i.target);if(_this163._removeDropMarker(),!n)return _this163._finalizeDragging(!1),void t.stop();_this163._draggedRange&&_this163._draggingUid!=i.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(_this163._draggedRange.detach(),_this163._draggedRange=null,_this163._draggingUid="");if("move"==Sh(i.dataTransfer)&&_this163._draggedRange&&_this163._draggedRange.containsRange(n,!0))return _this163._finalizeDragging(!1),void t.stop();i.targetRanges=[e.editing.mapper.toViewRange(n)];},{priority:"high"});}},{key:"_setupContentInsertionIntegration",value:function _setupContentInsertionIntegration(){var _this164=this;var e=this.editor.plugins.get(Wu);e.on("contentInsertion",function(e,t){if(!_this164.isEnabled||"drop"!==t.method)return;var i=t.targetRanges.map(function(e){return _this164.editor.editing.mapper.toModelRange(e);});_this164.editor.model.change(function(e){return e.setSelection(i);});},{priority:"high"}),e.on("contentInsertion",function(e,t){if(!_this164.isEnabled||"drop"!==t.method)return;var i="move"==Sh(t.dataTransfer),n=!t.resultRange||!t.resultRange.isCollapsed;_this164._finalizeDragging(n&&i);},{priority:"lowest"});}},{key:"_setupDraggableAttributeHandling",value:function _setupDraggableAttributeHandling(){var _this165=this;var e=this.editor,t=e.editing.view,i=t.document;this.listenTo(i,"mousedown",function(n,o){if(So.isAndroid||!o)return;_this165._clearDraggableAttributesDelayed.cancel();var r=Mh(o.target);if(So.isBlink&&!e.isReadOnly&&!r&&!i.selection.isCollapsed){var _e246=i.selection.getSelectedElement();_e246&&oh(_e246)||(r=i.selection.editableElement);}r&&(t.change(function(e){e.setAttribute("draggable","true",r);}),_this165._draggableElement=e.editing.mapper.toModelElement(r));}),this.listenTo(i,"mouseup",function(){So.isAndroid||_this165._clearDraggableAttributesDelayed();});}},{key:"_clearDraggableAttributes",value:function _clearDraggableAttributes(){var _this166=this;var e=this.editor.editing;e.view.change(function(t){_this166._draggableElement&&"$graveyard"!=_this166._draggableElement.root.rootName&&t.removeAttribute("draggable",e.mapper.toViewElement(_this166._draggableElement)),_this166._draggableElement=null;});}},{key:"_setupDropMarker",value:function _setupDropMarker(){var e=this.editor;e.conversion["for"]("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),e.conversion["for"]("editingDowncast").markerToElement({model:"drop-target",view:function view(t,_ref44){var i=_ref44.writer;if(e.model.schema.checkChild(t.markerRange.start,"$text"))return i.createUIElement("span",{"class":"ck ck-clipboard-drop-target-position"},function(e){var t=this.toDomElement(e);return t.innerHTML="&NoBreak;<span></span>&NoBreak;",t;});}});}},{key:"_updateDropMarker",value:function _updateDropMarker(e){var t=this.editor,i=t.model.markers;t.model.change(function(t){i.has("drop-target")?i.get("drop-target").getRange().isEqual(e)||t.updateMarker("drop-target",{range:e}):t.addMarker("drop-target",{range:e,usingOperation:!1,affectsData:!1});});}},{key:"_removeDropMarker",value:function _removeDropMarker(){var e=this.editor.model;this._removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),e.markers.has("drop-target")&&e.change(function(e){e.removeMarker("drop-target");});}},{key:"_finalizeDragging",value:function _finalizeDragging(e){var t=this.editor,i=t.model;this._removeDropMarker(),this._clearDraggableAttributes(),t.plugins.has("WidgetToolbarRepository")&&t.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",this._draggedRange&&(e&&this.isEnabled&&i.deleteContent(i.createSelection(this._draggedRange),{doNotAutoparagraph:!0}),this._draggedRange.detach(),this._draggedRange=null);}}],[{key:"pluginName",get:function get(){return"DragDrop";}},{key:"requires",get:function get(){return[Wu,Ah];}}]);return Eh;}(Qe);function Ih(e,t,i){var n=e.model,o=e.editing.mapper;var r=null;var s=t?t[0].start:null;if(i.is("uiElement")&&(i=i.parent),r=function(e,t){var i=e.model,n=e.editing.mapper;if(oh(t))return i.createRangeOn(n.toModelElement(t));if(!t.is("editableElement")){var _e247=t.findAncestor(function(e){return oh(e)||e.is("editableElement");});if(oh(_e247))return i.createRangeOn(n.toModelElement(_e247));}return null;}(e,i),r)return r;var a=function(e,t){var i=e.editing.mapper,n=e.editing.view,o=i.toModelElement(t);if(o)return o;var r=n.createPositionBefore(t),s=i.findMappedViewAncestor(r);return i.toModelElement(s);}(e,i),l=s?o.toModelPosition(s):null;return l?(r=function(e,t,i){var n=e.model;if(!n.schema.checkChild(i,"$block"))return null;var o=n.createPositionAt(i,0),r=t.path.slice(0,o.path.length),s=n.createPositionFromPath(t.root,r).nodeAfter;if(s&&n.schema.isObject(s))return n.createRangeOn(s);return null;}(e,l,a),r||(r=n.schema.getNearestSelectionRange(l,So.isGecko?"forward":"backward"),r||function(e,t){var i=e.model;for(;t;){if(i.schema.isObject(t))return i.createRangeOn(t);t=t.parent;}}(e,l.parent))):function(e,t){var i=e.model,n=i.schema,o=i.createPositionAt(t,0);return n.getNearestSelectionRange(o,"forward");}(e,a);}function Sh(e){return So.isGecko?e.dropEffect:["all","copyMove"].includes(e.effectAllowed)?"move":"copy";}function Ph(e,t){var i;function n(){for(var _len21=arguments.length,o=new Array(_len21),_key21=0;_key21<_len21;_key21++){o[_key21]=arguments[_key21];}n.cancel(),i=setTimeout(function(){return e.apply(void 0,o);},t);}return n.cancel=function(){clearTimeout(i);},n;}function Mh(e){if(e.is("editableElement"))return null;if(e.hasClass("ck-widget__selection-handle"))return e.findAncestor(oh);if(oh(e))return e;var t=e.findAncestor(function(e){return oh(e)||e.is("editableElement");});return oh(t)?t:null;}var Nh=/*#__PURE__*/function(_Qe8){_inherits(Nh,_Qe8);var _super90=_createSuper(Nh);function Nh(){_classCallCheck(this,Nh);return _super90.apply(this,arguments);}_createClass(Nh,[{key:"init",value:function init(){var e=this.editor,t=e.model,i=e.editing.view,n=i.document,o=t.document.selection;var r=!1;i.addObserver(Hu),this.listenTo(n,"keydown",function(e,t){r=t.shiftKey;}),e.plugins.get(Wu).on("contentInsertion",function(e,i){(r||function(e,t){if(e.childCount>1)return!1;var i=e.getChild(0);if(t.isObject(i))return!1;return 0==_toConsumableArray(i.getAttributeKeys()).length;}(i.content,t.schema))&&t.change(function(e){var n=Array.from(o.getAttributes()).filter(function(_ref45){var _ref46=_slicedToArray(_ref45,1),e=_ref46[0];return t.schema.getAttributeProperties(e).isFormatting;});o.isCollapsed||t.deleteContent(o,{doNotAutoparagraph:!0}),n.push.apply(n,_toConsumableArray(o.getAttributes()));var r=e.createRangeIn(i.content);var _iterator320=_createForOfIteratorHelper(r.getItems()),_step320;try{for(_iterator320.s();!(_step320=_iterator320.n()).done;){var _t221=_step320.value;_t221.is("$textProxy")&&e.setAttributes(n,_t221);}}catch(err){_iterator320.e(err);}finally{_iterator320.f();}});});}}],[{key:"pluginName",get:function get(){return"PastePlainText";}},{key:"requires",get:function get(){return[Wu];}}]);return Nh;}(Qe);var Rh=/*#__PURE__*/function(_Qe9){_inherits(Rh,_Qe9);var _super91=_createSuper(Rh);function Rh(){_classCallCheck(this,Rh);return _super91.apply(this,arguments);}_createClass(Rh,null,[{key:"pluginName",get:function get(){return"Clipboard";}},{key:"requires",get:function get(){return[Wu,Eh,Nh];}}]);return Rh;}(Qe);var zh=/*#__PURE__*/function(_Ze4){_inherits(zh,_Ze4);var _super92=_createSuper(zh);function zh(){_classCallCheck(this,zh);return _super92.apply(this,arguments);}_createClass(zh,[{key:"execute",value:function execute(){var _this167=this;var e=this.editor.model,t=e.document;e.change(function(i){!function(e,t,i){var n=i.isCollapsed,o=i.getFirstRange(),r=o.start.parent,s=o.end.parent,a=r==s;if(n){var _n147=qu(e.schema,i.getAttributes());Oh(e,t,o.end),t.removeSelectionAttribute(i.getAttributeKeys()),t.setSelectionAttribute(_n147);}else{var _n148=!(o.start.isAtStart&&o.end.isAtEnd);e.deleteContent(i,{leaveUnmerged:_n148}),a?Oh(e,t,i.focus):_n148&&t.setSelection(s,0);}}(e,i,t.selection),_this167.fire("afterExecute",{writer:i});});}},{key:"refresh",value:function refresh(){var e=this.editor.model,t=e.document;this.isEnabled=function(e,t){if(t.rangeCount>1)return!1;var i=t.anchor;if(!i||!e.checkChild(i,"softBreak"))return!1;var n=t.getFirstRange(),o=n.start.parent,r=n.end.parent;if((Dh(o,e)||Dh(r,e))&&o!==r)return!1;return!0;}(e.schema,t.selection);}}]);return zh;}(Ze);function Oh(e,t,i){var n=t.createElement("softBreak");e.insertContent(n,i),t.setSelection(n,"after");}function Dh(e,t){return!e.is("rootElement")&&(t.isLimit(e)||Dh(e.parent,t));}var Lh=/*#__PURE__*/function(_Qe10){_inherits(Lh,_Qe10);var _super93=_createSuper(Lh);function Lh(){_classCallCheck(this,Lh);return _super93.apply(this,arguments);}_createClass(Lh,[{key:"init",value:function init(){var e=this.editor,t=e.model.schema,i=e.conversion,n=e.editing.view,o=n.document;t.register("softBreak",{allowWhere:"$text",isInline:!0}),i["for"]("upcast").elementToElement({model:"softBreak",view:"br"}),i["for"]("downcast").elementToElement({model:"softBreak",view:function view(e,_ref47){var t=_ref47.writer;return t.createEmptyElement("br");}}),n.addObserver(Gu),e.commands.add("shiftEnter",new zh(e)),this.listenTo(o,"enter",function(t,i){i.preventDefault(),i.isSoft&&(e.execute("shiftEnter"),n.scrollToTheSelection());},{priority:"low"});}}],[{key:"pluginName",get:function get(){return"ShiftEnter";}}]);return Lh;}(Qe);var Vh=/*#__PURE__*/function(_Ze5){_inherits(Vh,_Ze5);var _super94=_createSuper(Vh);function Vh(){_classCallCheck(this,Vh);return _super94.apply(this,arguments);}_createClass(Vh,[{key:"execute",value:function execute(){var e=this.editor.model,t=e.document.selection;var i=e.schema.getLimitElement(t);if(t.containsEntireContent(i)||!Bh(e.schema,i))do{if(i=i.parent,!i)return;}while(!Bh(e.schema,i));e.change(function(e){e.setSelection(i,"in");});}}]);return Vh;}(Ze);function Bh(e,t){return e.isLimit(t)&&(e.checkChild(t,"$text")||e.checkChild(t,"paragraph"));}var jh=Oo("Ctrl+A");var Fh=/*#__PURE__*/function(_Qe11){_inherits(Fh,_Qe11);var _super95=_createSuper(Fh);function Fh(){_classCallCheck(this,Fh);return _super95.apply(this,arguments);}_createClass(Fh,[{key:"init",value:function init(){var e=this.editor,t=e.editing.view.document;e.commands.add("selectAll",new Vh(e)),this.listenTo(t,"keydown",function(t,i){zo(i)===jh&&(e.execute("selectAll"),i.preventDefault());});}}],[{key:"pluginName",get:function get(){return"SelectAllEditing";}}]);return Fh;}(Qe);var Hh=/*#__PURE__*/function(_Qe12){_inherits(Hh,_Qe12);var _super96=_createSuper(Hh);function Hh(){_classCallCheck(this,Hh);return _super96.apply(this,arguments);}_createClass(Hh,[{key:"init",value:function init(){var _this168=this;var e=this.editor;e.ui.componentFactory.add("selectAll",function(t){var i=e.commands.get("selectAll"),n=new Xc(t),o=t.t;return n.set({label:o("Select all"),icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>',keystroke:"Ctrl+A",tooltip:!0}),n.bind("isOn","isEnabled").to(i,"value","isEnabled"),_this168.listenTo(n,"execute",function(){e.execute("selectAll"),e.editing.view.focus();}),n;});}}],[{key:"pluginName",get:function get(){return"SelectAllUI";}}]);return Hh;}(Qe);var Uh=/*#__PURE__*/function(_Qe13){_inherits(Uh,_Qe13);var _super97=_createSuper(Uh);function Uh(){_classCallCheck(this,Uh);return _super97.apply(this,arguments);}_createClass(Uh,null,[{key:"requires",get:function get(){return[Fh,Hh];}},{key:"pluginName",get:function get(){return"SelectAll";}}]);return Uh;}(Qe);var Wh=/*#__PURE__*/function(_Ze6){_inherits(Wh,_Ze6);var _super98=_createSuper(Wh);function Wh(e,t){var _this169;_classCallCheck(this,Wh);_this169=_super98.call(this,e),_this169._buffer=new Qu(e.model,t),_this169._batches=new WeakSet();return _this169;}_createClass(Wh,[{key:"buffer",get:function get(){return this._buffer;}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Wh.prototype),"destroy",this).call(this),this._buffer.destroy();}},{key:"execute",value:function execute(){var _this170=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=this.editor.model,i=t.document,n=e.text||"",o=n.length,r=e.range?t.createSelection(e.range):i.selection,s=e.resultRange;t.enqueueChange(this._buffer.batch,function(e){_this170._buffer.lock(),_this170._batches.add(_this170._buffer.batch),t.deleteContent(r),n&&t.insertContent(e.createText(n,i.selection.getAttributes()),r),s?e.setSelection(s):r.is("documentSelection")||e.setSelection(r),_this170._buffer.unlock(),_this170._buffer.input(o);});}}]);return Wh;}(Ze);function qh(e){if(e.newChildren.length-e.oldChildren.length!=1)return;var t=function(e,t){var i=[];var n,o=0;return e.forEach(function(e){"equal"==e?(r(),o++):"insert"==e?(s("insert")?n.values.push(t[o]):(r(),n={type:"insert",index:o,values:[t[o]]}),o++):s("delete")?n.howMany++:(r(),n={type:"delete",index:o,howMany:1});}),r(),i;function r(){n&&(i.push(n),n=null);}function s(e){return n&&n.type==e;}}(gr(e.oldChildren,e.newChildren,$h),e.newChildren);if(t.length>1)return;var i=t[0];return i.values[0]&&i.values[0].is("$text")?i:void 0;}function $h(e,t){return e&&e.is("$text")&&t&&t.is("$text")?e.data===t.data:e===t;}var Yh=/*#__PURE__*/function(){function Yh(e){_classCallCheck(this,Yh);this.editor=e,this.editing=this.editor.editing;}_createClass(Yh,[{key:"handle",value:function handle(e,t){if(function(e){if(0==e.length)return!1;var _iterator321=_createForOfIteratorHelper(e),_step321;try{for(_iterator321.s();!(_step321=_iterator321.n()).done;){var _t222=_step321.value;if("children"===_t222.type&&!qh(_t222))return!0;}}catch(err){_iterator321.e(err);}finally{_iterator321.f();}return!1;}(e))this._handleContainerChildrenMutations(e,t);else{var _iterator322=_createForOfIteratorHelper(e),_step322;try{for(_iterator322.s();!(_step322=_iterator322.n()).done;){var _i244=_step322.value;this._handleTextMutation(_i244,t),this._handleTextNodeInsertion(_i244);}}catch(err){_iterator322.e(err);}finally{_iterator322.f();}}}},{key:"_handleContainerChildrenMutations",value:function _handleContainerChildrenMutations(e,t){var i=function(e){var t=e.map(function(e){return e.node;}).reduce(function(e,t){return e.getCommonAncestor(t,{includeSelf:!0});});if(!t)return;return t.getAncestors({includeSelf:!0,parentFirst:!0}).find(function(e){return e.is("containerElement")||e.is("rootElement");});}(e);if(!i)return;var n=this.editor.editing.view.domConverter.mapViewToDom(i),o=new Er(this.editor.editing.view.document),r=this.editor.data.toModel(o.domToView(n)).getChild(0),s=this.editor.editing.mapper.toModelElement(i);if(!s)return;var a=Array.from(r.getChildren()),l=Array.from(s.getChildren()),c=a[a.length-1],d=l[l.length-1],u=c&&c.is("element","softBreak"),h=d&&!d.is("element","softBreak");u&&h&&a.pop();var g=this.editor.model.schema;if(!Gh(a,g)||!Gh(l,g))return;var m=a.map(function(e){return e.is("$text")?e.data:"@";}).join("").replace(/\u00A0/g," "),f=l.map(function(e){return e.is("$text")?e.data:"@";}).join("").replace(/\u00A0/g," ");if(f===m)return;var p=gr(f,m),_Kh=Kh(p),b=_Kh.firstChangeAt,w=_Kh.insertions,k=_Kh.deletions;var _=null;t&&(_=this.editing.mapper.toModelRange(t.getFirstRange()));var v=m.substr(b,w),y=this.editor.model.createRange(this.editor.model.createPositionAt(s,b),this.editor.model.createPositionAt(s,b+k));this.editor.execute("input",{text:v,range:y,resultRange:_});}},{key:"_handleTextMutation",value:function _handleTextMutation(e,t){if("text"!=e.type)return;var i=e.newText.replace(/\u00A0/g," "),n=e.oldText.replace(/\u00A0/g," ");if(n===i)return;var o=gr(n,i),_Kh2=Kh(o),r=_Kh2.firstChangeAt,s=_Kh2.insertions,a=_Kh2.deletions;var l=null;t&&(l=this.editing.mapper.toModelRange(t.getFirstRange()));var c=this.editing.view.createPositionAt(e.node,r),d=this.editing.mapper.toModelPosition(c),u=this.editor.model.createRange(d,d.getShiftedBy(a)),h=i.substr(r,s);this.editor.execute("input",{text:h,range:u,resultRange:l});}},{key:"_handleTextNodeInsertion",value:function _handleTextNodeInsertion(e){if("children"!=e.type)return;var t=qh(e),i=this.editing.view.createPositionAt(e.node,t.index),n=this.editing.mapper.toModelPosition(i),o=t.values[0].data;this.editor.execute("input",{text:o.replace(/\u00A0/g," "),range:this.editor.model.createRange(n)});}}]);return Yh;}();function Gh(e,t){return e.every(function(e){return t.isInline(e);});}function Kh(e){var t=null,i=null;for(var _n149=0;_n149<e.length;_n149++){"equal"!=e[_n149]&&(t=null===t?_n149:t,i=_n149);}var n=0,o=0;for(var _r49=t;_r49<=i;_r49++){"insert"!=e[_r49]&&n++,"delete"!=e[_r49]&&o++;}return{insertions:o,deletions:n,firstChangeAt:t};}var Qh=/*#__PURE__*/function(_Qe14){_inherits(Qh,_Qe14);var _super99=_createSuper(Qh);function Qh(){_classCallCheck(this,Qh);return _super99.apply(this,arguments);}_createClass(Qh,[{key:"init",value:function init(){var e=this.editor,t=new Wh(e,e.config.get("typing.undoStep")||20);e.commands.add("input",t),function(e){var t=null;var i=e.model,n=e.editing.view,o=e.commands.get("input");function r(e){var r=i.document,a=n.document.isComposing,l=t&&t.isEqual(r.selection);t=null,o.isEnabled&&(bh(e)||r.selection.isCollapsed||a&&229===e.keyCode||!a&&229===e.keyCode&&l||s());}function s(){var e=o.buffer;e.lock();var t=e.batch;o._batches.add(t),i.enqueueChange(t,function(){i.deleteContent(i.document.selection);}),e.unlock();}So.isAndroid?n.document.on("beforeinput",function(e,t){return r(t);},{priority:"lowest"}):n.document.on("keydown",function(e,t){return r(t);},{priority:"lowest"}),n.document.on("compositionstart",function(){var e=i.document,t=1!==e.selection.rangeCount||e.selection.getFirstRange().isFlat;if(e.selection.isCollapsed||t)return;s();},{priority:"lowest"}),n.document.on("compositionend",function(){t=i.createSelection(i.document.selection);},{priority:"lowest"});}(e),function(e){e.editing.view.document.on("mutations",function(t,i,n){new Yh(e).handle(i,n);});}(e);}},{key:"isInput",value:function isInput(e){return this.editor.commands.get("input")._batches.has(e);}}],[{key:"pluginName",get:function get(){return"Input";}}]);return Qh;}(Qe);var Jh=/*#__PURE__*/function(_Qe15){_inherits(Jh,_Qe15);var _super100=_createSuper(Jh);function Jh(){_classCallCheck(this,Jh);return _super100.apply(this,arguments);}_createClass(Jh,null,[{key:"requires",get:function get(){return[Qh,Xu];}},{key:"pluginName",get:function get(){return"Typing";}}]);return Jh;}(Qe);function Zh(e,t){var i=e.start;return{text:Array.from(e.getItems()).reduce(function(e,n){return n.is("$text")||n.is("$textProxy")?e+n.data:(i=t.createPositionAfter(n),"");},""),range:t.createRange(i,e.end)};}var Xh=/*#__PURE__*/function(){function Xh(e,t){var _this171=this;_classCallCheck(this,Xh);this.model=e,this.testCallback=t,this.hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",function(){_this171.isEnabled?_this171._startListening():(_this171.stopListening(e.document.selection),_this171.stopListening(e.document));}),this._startListening();}_createClass(Xh,[{key:"_startListening",value:function _startListening(){var _this172=this;var e=this.model.document;this.listenTo(e.selection,"change:range",function(t,_ref48){var i=_ref48.directChange;i&&(e.selection.isCollapsed?_this172._evaluateTextBeforeSelection("selection"):_this172.hasMatch&&(_this172.fire("unmatched"),_this172.hasMatch=!1));}),this.listenTo(e,"change:data",function(e,t){"transparent"!=t.type&&_this172._evaluateTextBeforeSelection("data",{batch:t});});}},{key:"_evaluateTextBeforeSelection",value:function _evaluateTextBeforeSelection(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=this.model,n=i.document.selection,o=i.createRange(i.createPositionAt(n.focus.parent,0),n.focus),_Zh=Zh(o,i),r=_Zh.text,s=_Zh.range,a=this.testCallback(r);if(!a&&this.hasMatch&&this.fire("unmatched"),this.hasMatch=!!a,a){var _i245=Object.assign(t,{text:r,range:s});"object"==_typeof(a)&&Object.assign(_i245,a),this.fire("matched:"+e,_i245);}}}]);return Xh;}();Ke(Xh,Ue);var eg=/*#__PURE__*/function(_Qe16){_inherits(eg,_Qe16);var _super101=_createSuper(eg);function eg(e){var _this173;_classCallCheck(this,eg);_this173=_super101.call(this,e),_this173.attributes=new Set(),_this173._overrideUid=null;return _this173;}_createClass(eg,[{key:"init",value:function init(){var _this174=this;var e=this.editor,t=e.model,i=e.editing.view,n=e.locale,o=t.document.selection;this.listenTo(i.document,"arrowKey",function(e,t){if(!o.isCollapsed)return;if(t.shiftKey||t.altKey||t.ctrlKey)return;var i=t.keyCode==No.arrowright,r=t.keyCode==No.arrowleft;if(!i&&!r)return;var s=n.contentLanguageDirection;var a=!1;a="ltr"===s&&i||"rtl"===s&&r?_this174._handleForwardMovement(t):_this174._handleBackwardMovement(t),!0===a&&e.stop();},{context:"$text",priority:"highest"}),this._isNextGravityRestorationSkipped=!1,this.listenTo(o,"change:range",function(e,t){_this174._isNextGravityRestorationSkipped?_this174._isNextGravityRestorationSkipped=!1:_this174._isGravityOverridden&&(!t.directChange&&og(o.getFirstPosition(),_this174.attributes)||_this174._restoreGravity());});}},{key:"registerAttribute",value:function registerAttribute(e){this.attributes.add(e);}},{key:"_handleForwardMovement",value:function _handleForwardMovement(e){var t=this.attributes,i=this.editor.model.document.selection,n=i.getFirstPosition();return!this._isGravityOverridden&&(!n.isAtStart||!tg(i,t))&&(og(n,t)?(ng(e),this._overrideGravity(),!0):void 0);}},{key:"_handleBackwardMovement",value:function _handleBackwardMovement(e){var t=this.attributes,i=this.editor.model,n=i.document.selection,o=n.getFirstPosition();return this._isGravityOverridden?(ng(e),this._restoreGravity(),ig(i,t,o),!0):o.isAtStart?!!tg(n,t)&&(ng(e),ig(i,t,o),!0):function(e,t){return og(e.getShiftedBy(-1),t);}(o,t)?o.isAtEnd&&!tg(n,t)&&og(o,t)?(ng(e),ig(i,t,o),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1):void 0;}},{key:"_isGravityOverridden",get:function get(){return!!this._overrideUid;}},{key:"_overrideGravity",value:function _overrideGravity(){this._overrideUid=this.editor.model.change(function(e){return e.overrideSelectionGravity();});}},{key:"_restoreGravity",value:function _restoreGravity(){var _this175=this;this.editor.model.change(function(e){e.restoreSelectionGravity(_this175._overrideUid),_this175._overrideUid=null;});}}],[{key:"pluginName",get:function get(){return"TwoStepCaretMovement";}}]);return eg;}(Qe);function tg(e,t){var _iterator323=_createForOfIteratorHelper(t),_step323;try{for(_iterator323.s();!(_step323=_iterator323.n()).done;){var _i246=_step323.value;if(e.hasAttribute(_i246))return!0;}}catch(err){_iterator323.e(err);}finally{_iterator323.f();}return!1;}function ig(e,t,i){var n=i.nodeBefore;e.change(function(e){n?e.setSelectionAttribute(n.getAttributes()):e.removeSelectionAttribute(t);});}function ng(e){e.preventDefault();}function og(e,t){var i=e.nodeBefore,n=e.nodeAfter;var _iterator324=_createForOfIteratorHelper(t),_step324;try{for(_iterator324.s();!(_step324=_iterator324.n()).done;){var _e248=_step324.value;var _t223=i?i.getAttribute(_e248):void 0;if((n?n.getAttribute(_e248):void 0)!==_t223)return!0;}}catch(err){_iterator324.e(err);}finally{_iterator324.f();}return!1;}var rg=/[\\^$.*+?()[\]{}|]/g,sg=RegExp(rg.source);var ag=function ag(e){return(e=Pn(e))&&sg.test(e)?e.replace(rg,"\\$&"):e;};var lg={copyright:{from:"(c)",to:"©"},registeredTrademark:{from:"(r)",to:"®"},trademark:{from:"(tm)",to:"™"},oneHalf:{from:"1/2",to:"½"},oneThird:{from:"1/3",to:"⅓"},twoThirds:{from:"2/3",to:"⅔"},oneForth:{from:"1/4",to:"¼"},threeQuarters:{from:"3/4",to:"¾"},lessThanOrEqual:{from:"<=",to:"≤"},greaterThanOrEqual:{from:">=",to:"≥"},notEqual:{from:"!=",to:"≠"},arrowLeft:{from:"<-",to:"←"},arrowRight:{from:"->",to:"→"},horizontalEllipsis:{from:"...",to:"…"},enDash:{from:/(^| )(--)( )$/,to:[null,"–",null]},emDash:{from:/(^| )(---)( )$/,to:[null,"—",null]},quotesPrimary:{from:mg('"'),to:[null,"“",null,"”"]},quotesSecondary:{from:mg("'"),to:[null,"‘",null,"’"]},quotesPrimaryEnGb:{from:mg("'"),to:[null,"‘",null,"’"]},quotesSecondaryEnGb:{from:mg('"'),to:[null,"“",null,"”"]},quotesPrimaryPl:{from:mg('"'),to:[null,"„",null,"”"]},quotesSecondaryPl:{from:mg("'"),to:[null,"‚",null,"’"]}},cg={symbols:["copyright","registeredTrademark","trademark"],mathematical:["oneHalf","oneThird","twoThirds","oneForth","threeQuarters","lessThanOrEqual","greaterThanOrEqual","notEqual","arrowLeft","arrowRight"],typography:["horizontalEllipsis","enDash","emDash"],quotes:["quotesPrimary","quotesSecondary"]},dg=["symbols","mathematical","typography","quotes"];function ug(e){return"string"==typeof e?new RegExp("(".concat(ag(e),")$")):e;}function hg(e){return"string"==typeof e?function(){return[e];}:e instanceof Array?function(){return e;}:e;}function gg(e){return(e.textNode?e.textNode:e.nodeAfter).getAttributes();}function mg(e){return new RegExp("(^|\\s)(".concat(e,")([^").concat(e,"]*)(").concat(e,")$"));}function fg(e,t,i,n){return n.createRange(pg(e,t,i,!0,n),pg(e,t,i,!1,n));}function pg(e,t,i,n,o){var r=e.textNode||(n?e.nodeBefore:e.nodeAfter),s=null;for(;r&&r.getAttribute(t)==i;){s=r,r=n?r.previousSibling:r.nextSibling;}return s?o.createPositionAt(s,n?"before":"after"):e;}var bg=/*#__PURE__*/function(_Ze7){_inherits(bg,_Ze7);var _super102=_createSuper(bg);function bg(e){var _this176;_classCallCheck(this,bg);_this176=_super102.call(this,e),_this176._stack=[],_this176._createdBatches=new WeakSet(),_this176.refresh(),_this176.listenTo(e.data,"set",function(e,t){t[1]=_objectSpread({},t[1]);var i=t[1];i.batchType||(i.batchType="transparent");},{priority:"high"}),_this176.listenTo(e.data,"set",function(e,t){"transparent"===t[1].batchType&&_this176.clearStack();});return _this176;}_createClass(bg,[{key:"refresh",value:function refresh(){this.isEnabled=this._stack.length>0;}},{key:"addBatch",value:function addBatch(e){var t=this.editor.model.document.selection,i={ranges:t.hasOwnRange?Array.from(t.getRanges()):[],isBackward:t.isBackward};this._stack.push({batch:e,selection:i}),this.refresh();}},{key:"clearStack",value:function clearStack(){this._stack=[],this.refresh();}},{key:"_restoreSelection",value:function _restoreSelection(e,t,i){var n=this.editor.model,o=n.document,r=[],s=e.map(function(e){return e.getTransformedByOperations(i);}),a=s.flat();var _iterator325=_createForOfIteratorHelper(s),_step325;try{for(_iterator325.s();!(_step325=_iterator325.n()).done;){var _e249=_step325.value;var _t224=_e249.filter(function(e){return e.root!=o.graveyard;}).filter(function(e){return!kg(e,a);});_t224.length&&(wg(_t224),r.push(_t224[0]));}}catch(err){_iterator325.e(err);}finally{_iterator325.f();}r.length&&n.change(function(e){e.setSelection(r,{backward:t});});}},{key:"_undo",value:function _undo(e,t){var i=this.editor.model,n=i.document;this._createdBatches.add(t);var o=e.operations.slice().filter(function(e){return e.isDocumentOperation;});o.reverse();var _iterator326=_createForOfIteratorHelper(o),_step326;try{for(_iterator326.s();!(_step326=_iterator326.n()).done;){var _e250=_step326.value;var _o90=_e250.baseVersion+1,_r50=Array.from(n.history.getOperations(_o90)),_s28=nu([_e250.getReversed()],_r50,{useRelations:!0,document:this.editor.model.document,padWithNoOps:!1,forceWeakRemove:!0}).operationsA;var _iterator327=_createForOfIteratorHelper(_s28),_step327;try{for(_iterator327.s();!(_step327=_iterator327.n()).done;){var _o91=_step327.value;t.addOperation(_o91),i.applyOperation(_o91),n.history.setOperationAsUndone(_e250,_o91);}}catch(err){_iterator327.e(err);}finally{_iterator327.f();}}}catch(err){_iterator326.e(err);}finally{_iterator326.f();}}}]);return bg;}(Ze);function wg(e){e.sort(function(e,t){return e.start.isBefore(t.start)?-1:1;});for(var _t225=1;_t225<e.length;_t225++){var _i247=e[_t225-1].getJoined(e[_t225],!0);_i247&&(_t225--,e.splice(_t225,2,_i247));}}function kg(e,t){return t.some(function(t){return t!==e&&t.containsRange(e,!0);});}var _g=/*#__PURE__*/function(_bg){_inherits(_g,_bg);var _super103=_createSuper(_g);function _g(){_classCallCheck(this,_g);return _super103.apply(this,arguments);}_createClass(_g,[{key:"execute",value:function execute(){var _this177=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var t=e?this._stack.findIndex(function(t){return t.batch==e;}):this._stack.length-1,i=this._stack.splice(t,1)[0],n=this.editor.model.createBatch("transparent");this.editor.model.enqueueChange(n,function(){_this177._undo(i.batch,n);var e=_this177.editor.model.document.history.getOperations(i.batch.baseVersion);_this177._restoreSelection(i.selection.ranges,i.selection.isBackward,e),_this177.fire("revert",i.batch,n);}),this.refresh();}}]);return _g;}(bg);var vg=/*#__PURE__*/function(_bg2){_inherits(vg,_bg2);var _super104=_createSuper(vg);function vg(){_classCallCheck(this,vg);return _super104.apply(this,arguments);}_createClass(vg,[{key:"execute",value:function execute(){var _this178=this;var e=this._stack.pop(),t=this.editor.model.createBatch("transparent");this.editor.model.enqueueChange(t,function(){var i=e.batch.operations[e.batch.operations.length-1].baseVersion+1,n=_this178.editor.model.document.history.getOperations(i);_this178._restoreSelection(e.selection.ranges,e.selection.isBackward,n),_this178._undo(e.batch,t);}),this.refresh();}}]);return vg;}(bg);var yg=/*#__PURE__*/function(_Qe17){_inherits(yg,_Qe17);var _super105=_createSuper(yg);function yg(e){var _this179;_classCallCheck(this,yg);_this179=_super105.call(this,e),_this179._batchRegistry=new WeakSet();return _this179;}_createClass(yg,[{key:"init",value:function init(){var _this180=this;var e=this.editor;this._undoCommand=new _g(e),this._redoCommand=new vg(e),e.commands.add("undo",this._undoCommand),e.commands.add("redo",this._redoCommand),this.listenTo(e.model,"applyOperation",function(e,t){var i=t[0];if(!i.isDocumentOperation)return;var n=i.batch,o=_this180._redoCommand._createdBatches.has(n),r=_this180._undoCommand._createdBatches.has(n);_this180._batchRegistry.has(n)||"transparent"==n.type&&!o&&!r||(o?_this180._undoCommand.addBatch(n):r||(_this180._undoCommand.addBatch(n),_this180._redoCommand.clearStack()),_this180._batchRegistry.add(n));},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",function(e,t,i){_this180._redoCommand.addBatch(i);}),e.keystrokes.set("CTRL+Z","undo"),e.keystrokes.set("CTRL+Y","redo"),e.keystrokes.set("CTRL+SHIFT+Z","redo");}}],[{key:"pluginName",get:function get(){return"UndoEditing";}}]);return yg;}(Qe);var xg='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',Ag='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>';var Cg=/*#__PURE__*/function(_Qe18){_inherits(Cg,_Qe18);var _super106=_createSuper(Cg);function Cg(){_classCallCheck(this,Cg);return _super106.apply(this,arguments);}_createClass(Cg,[{key:"init",value:function init(){var e=this.editor,t=e.locale,i=e.t,n="ltr"==t.uiLanguageDirection?xg:Ag,o="ltr"==t.uiLanguageDirection?Ag:xg;this._addButton("undo",i("Undo"),"CTRL+Z",n),this._addButton("redo",i("Redo"),"CTRL+Y",o);}},{key:"_addButton",value:function _addButton(e,t,i,n){var _this181=this;var o=this.editor;o.ui.componentFactory.add(e,function(r){var s=o.commands.get(e),a=new Xc(r);return a.set({label:t,icon:n,keystroke:i,tooltip:!0}),a.bind("isEnabled").to(s,"isEnabled"),_this181.listenTo(a,"execute",function(){o.execute(e),o.editing.view.focus();}),a;});}}],[{key:"pluginName",get:function get(){return"UndoUI";}}]);return Cg;}(Qe);var Tg=/*#__PURE__*/function(_Qe19){_inherits(Tg,_Qe19);var _super107=_createSuper(Tg);function Tg(){_classCallCheck(this,Tg);return _super107.apply(this,arguments);}_createClass(Tg,null,[{key:"requires",get:function get(){return[yg,Cg];}},{key:"pluginName",get:function get(){return"Undo";}}]);return Tg;}(Qe);var Eg=["left","right","center","justify"];function Ig(e){return Eg.includes(e);}function Sg(e,t){return"rtl"==t.contentLanguageDirection?"right"===e:"left"===e;}function Pg(e){var t=e.map(function(e){var t;return t="string"==typeof e?{name:e}:e,t;}).filter(function(e){var t=!!Eg.includes(e.name);return t||Object(l.b)("alignment-config-name-not-recognized",{option:e}),t;}),i=t.filter(function(e){return!!e.className;}).length;if(i&&i<t.length)throw new l.a("alignment-config-classnames-are-missing",{configuredOptions:e});return t.forEach(function(t,i,n){var o=n.slice(i+1);if(o.some(function(e){return e.name==t.name;}))throw new l.a("alignment-config-name-already-defined",{option:t,configuredOptions:e});if(t.className){if(o.some(function(e){return e.className==t.className;}))throw new l.a("alignment-config-classname-already-defined",{option:t,configuredOptions:e});}}),t;}var Mg=/*#__PURE__*/function(_Ze8){_inherits(Mg,_Ze8);var _super108=_createSuper(Mg);function Mg(){_classCallCheck(this,Mg);return _super108.apply(this,arguments);}_createClass(Mg,[{key:"refresh",value:function refresh(){var e=this.editor.locale,t=Ns(this.editor.model.document.selection.getSelectedBlocks());this.isEnabled=!!t&&this._canBeAligned(t),this.isEnabled&&t.hasAttribute("alignment")?this.value=t.getAttribute("alignment"):this.value="rtl"===e.contentLanguageDirection?"right":"left";}},{key:"execute",value:function execute(){var _this182=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=this.editor,i=t.locale,n=t.model,o=n.document,r=e.value;n.change(function(e){var t=Array.from(o.selection.getSelectedBlocks()).filter(function(e){return _this182._canBeAligned(e);}),n=t[0].getAttribute("alignment");Sg(r,i)||n===r||!r?function(e,t){var _iterator328=_createForOfIteratorHelper(e),_step328;try{for(_iterator328.s();!(_step328=_iterator328.n()).done;){var _i248=_step328.value;t.removeAttribute("alignment",_i248);}}catch(err){_iterator328.e(err);}finally{_iterator328.f();}}(t,e):function(e,t,i){var _iterator329=_createForOfIteratorHelper(e),_step329;try{for(_iterator329.s();!(_step329=_iterator329.n()).done;){var _n150=_step329.value;t.setAttribute("alignment",i,_n150);}}catch(err){_iterator329.e(err);}finally{_iterator329.f();}}(t,e,r);});}},{key:"_canBeAligned",value:function _canBeAligned(e){return this.editor.model.schema.checkAttribute(e,"alignment");}}]);return Mg;}(Ze);var Ng=/*#__PURE__*/function(_Qe20){_inherits(Ng,_Qe20);var _super109=_createSuper(Ng);function Ng(e){var _this183;_classCallCheck(this,Ng);_this183=_super109.call(this,e),e.config.define("alignment",{options:_toConsumableArray(Eg.map(function(e){return{name:e};}))});return _this183;}_createClass(Ng,[{key:"init",value:function init(){var e=this.editor,t=e.locale,i=e.model.schema,n=Pg(e.config.get("alignment.options")).filter(function(e){return Ig(e.name)&&!Sg(e.name,t);}),o=n.some(function(e){return!!e.className;});i.extend("$block",{allowAttributes:"alignment"}),e.model.schema.setAttributeProperties("alignment",{isFormatting:!0}),o?e.conversion.attributeToAttribute(function(e){var t={model:{key:"alignment",values:e.map(function(e){return e.name;})},view:{}};var _iterator330=_createForOfIteratorHelper(e),_step330;try{for(_iterator330.s();!(_step330=_iterator330.n()).done;){var _i249=_step330.value;t.view[_i249.name]={key:"class",value:_i249.className};}}catch(err){_iterator330.e(err);}finally{_iterator330.f();}return t;}(n)):e.conversion["for"]("downcast").attributeToAttribute(function(e){var t={model:{key:"alignment",values:e.map(function(e){return e.name;})},view:{}};var _iterator331=_createForOfIteratorHelper(e),_step331;try{for(_iterator331.s();!(_step331=_iterator331.n()).done;){var _i250=_step331.value.name;t.view[_i250]={key:"style",value:{"text-align":_i250}};}}catch(err){_iterator331.e(err);}finally{_iterator331.f();}return t;}(n));var r=function(e){var t=[];var _iterator332=_createForOfIteratorHelper(e),_step332;try{for(_iterator332.s();!(_step332=_iterator332.n()).done;){var _i251=_step332.value.name;t.push({view:{key:"style",value:{"text-align":_i251}},model:{key:"alignment",value:_i251}});}}catch(err){_iterator332.e(err);}finally{_iterator332.f();}return t;}(n);var _iterator333=_createForOfIteratorHelper(r),_step333;try{for(_iterator333.s();!(_step333=_iterator333.n()).done;){var _t226=_step333.value;e.conversion["for"]("upcast").attributeToAttribute(_t226);}}catch(err){_iterator333.e(err);}finally{_iterator333.f();}var s=function(e){var t=[];var _iterator334=_createForOfIteratorHelper(e),_step334;try{for(_iterator334.s();!(_step334=_iterator334.n()).done;){var _i252=_step334.value.name;t.push({view:{key:"align",value:_i252},model:{key:"alignment",value:_i252}});}}catch(err){_iterator334.e(err);}finally{_iterator334.f();}return t;}(n);var _iterator335=_createForOfIteratorHelper(s),_step335;try{for(_iterator335.s();!(_step335=_iterator335.n()).done;){var _t227=_step335.value;e.conversion["for"]("upcast").attributeToAttribute(_t227);}}catch(err){_iterator335.e(err);}finally{_iterator335.f();}e.commands.add("alignment",new Mg(e));}}],[{key:"pluginName",get:function get(){return"AlignmentEditing";}}]);return Ng;}(Qe);var Rg=new Map([["left",Cc.alignLeft],["right",Cc.alignRight],["center",Cc.alignCenter],["justify",Cc.alignJustify]]);var zg=/*#__PURE__*/function(_Qe21){_inherits(zg,_Qe21);var _super110=_createSuper(zg);function zg(){_classCallCheck(this,zg);return _super110.apply(this,arguments);}_createClass(zg,[{key:"localizedOptionTitles",get:function get(){var e=this.editor.t;return{left:e("Align left"),right:e("Align right"),center:e("Align center"),justify:e("Justify")};}},{key:"init",value:function init(){var _this184=this;var e=this.editor,t=e.ui.componentFactory,i=e.t,n=Pg(e.config.get("alignment.options"));n.map(function(e){return e.name;}).filter(Ig).forEach(function(e){return _this184._addButton(e);}),t.add("alignment",function(e){var o=Cd(e),r=n.map(function(e){return t.create("alignment:"+e.name);});Td(o,r),o.buttonView.set({label:i("Text alignment"),tooltip:!0}),o.toolbarView.isVertical=!0,o.toolbarView.ariaLabel=i("Text alignment toolbar"),o.extendTemplate({attributes:{"class":"ck-alignment-dropdown"}});var s="rtl"===e.contentLanguageDirection?Rg.get("right"):Rg.get("left");return o.buttonView.bind("icon").toMany(r,"isOn",function(){for(var _len22=arguments.length,e=new Array(_len22),_key22=0;_key22<_len22;_key22++){e[_key22]=arguments[_key22];}var t=e.findIndex(function(e){return e;});return t<0?s:r[t].icon;}),o.bind("isEnabled").toMany(r,"isEnabled",function(){for(var _len23=arguments.length,e=new Array(_len23),_key23=0;_key23<_len23;_key23++){e[_key23]=arguments[_key23];}return e.some(function(e){return e;});}),o;});}},{key:"_addButton",value:function _addButton(e){var _this185=this;var t=this.editor;t.ui.componentFactory.add("alignment:"+e,function(i){var n=t.commands.get("alignment"),o=new Xc(i);return o.set({label:_this185.localizedOptionTitles[e],icon:Rg.get(e),tooltip:!0,isToggleable:!0}),o.bind("isEnabled").to(n),o.bind("isOn").to(n,"value",function(t){return t===e;}),_this185.listenTo(o,"execute",function(){t.execute("alignment",{value:e}),t.editing.view.focus();}),o;});}}],[{key:"pluginName",get:function get(){return"AlignmentUI";}}]);return zg;}(Qe);var Og=/*#__PURE__*/function(_Ze9){_inherits(Og,_Ze9);var _super111=_createSuper(Og);function Og(e,t){var _this186;_classCallCheck(this,Og);_this186=_super111.call(this,e),_this186.attributeKey=t;return _this186;}_createClass(Og,[{key:"refresh",value:function refresh(){var e=this.editor.model,t=e.document;this.value=t.selection.getAttribute(this.attributeKey),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey);}},{key:"execute",value:function execute(){var _this187=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=this.editor.model,i=t.document.selection,n=e.value;t.change(function(e){if(i.isCollapsed)n?e.setSelectionAttribute(_this187.attributeKey,n):e.removeSelectionAttribute(_this187.attributeKey);else{var _o92=t.schema.getValidRanges(i.getRanges(),_this187.attributeKey);var _iterator336=_createForOfIteratorHelper(_o92),_step336;try{for(_iterator336.s();!(_step336=_iterator336.n()).done;){var _t228=_step336.value;n?e.setAttribute(_this187.attributeKey,n,_t228):e.removeAttribute(_this187.attributeKey,_t228);}}catch(err){_iterator336.e(err);}finally{_iterator336.f();}}});}}]);return Og;}(Ze);var Dg=/*#__PURE__*/function(_Zi2){_inherits(Dg,_Zi2);var _super112=_createSuper(Dg);function Dg(e){var _this188;_classCallCheck(this,Dg);_this188=_super112.call(this,e),_this188.set("isEmpty",!0),_this188.on("change",function(){_this188.set("isEmpty",0===_this188.length);});return _this188;}_createClass(Dg,[{key:"add",value:function add(e,t){this.find(function(t){return t.color===e.color;})||_get(_getPrototypeOf(Dg.prototype),"add",this).call(this,e,t);}},{key:"hasColor",value:function hasColor(e){return!!this.find(function(t){return t.color===e;});}}]);return Dg;}(Zi);Ke(Dg,Ue);i(67);var Lg=/*#__PURE__*/function(_Pc23){_inherits(Lg,_Pc23);var _super113=_createSuper(Lg);function Lg(e,_ref49){var _this189;var t=_ref49.colors,i=_ref49.columns,n=_ref49.removeButtonLabel,o=_ref49.documentColorsLabel,r=_ref49.documentColorsCount;_classCallCheck(this,Lg);_this189=_super113.call(this,e),_this189.items=_this189.createCollection(),_this189.colorDefinitions=t,_this189.focusTracker=new Rs(),_this189.keystrokes=new zs(),_this189.set("selectedColor"),_this189.removeButtonLabel=n,_this189.columns=i,_this189.documentColors=new Dg(),_this189.documentColorsCount=r,_this189._focusCycler=new nd({focusables:_this189.items,focusTracker:_this189.focusTracker,keystrokeHandler:_this189.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),_this189._documentColorsLabel=o,_this189.setTemplate({tag:"div",attributes:{"class":["ck","ck-color-table"]},children:_this189.items}),_this189.items.add(_this189._removeColorButton());return _this189;}_createClass(Lg,[{key:"updateDocumentColors",value:function updateDocumentColors(e,t){var i=e.document,n=this.documentColorsCount;this.documentColors.clear();var _iterator337=_createForOfIteratorHelper(i.getRootNames()),_step337;try{for(_iterator337.s();!(_step337=_iterator337.n()).done;){var _o93=_step337.value;var _r51=i.getRoot(_o93),_s29=e.createRangeIn(_r51);var _iterator338=_createForOfIteratorHelper(_s29.getItems()),_step338;try{for(_iterator338.s();!(_step338=_iterator338.n()).done;){var _e251=_step338.value;if(_e251.is("$textProxy")&&_e251.hasAttribute(t)&&(this._addColorToDocumentColors(_e251.getAttribute(t)),this.documentColors.length>=n))return;}}catch(err){_iterator338.e(err);}finally{_iterator338.f();}}}catch(err){_iterator337.e(err);}finally{_iterator337.f();}}},{key:"updateSelectedColors",value:function updateSelectedColors(){var e=this.documentColorsGrid,t=this.staticColorsGrid,i=this.selectedColor;t.selectedColor=i,e&&(e.selectedColor=i);}},{key:"render",value:function render(){_get(_getPrototypeOf(Lg.prototype),"render",this).call(this);var _iterator339=_createForOfIteratorHelper(this.items),_step339;try{for(_iterator339.s();!(_step339=_iterator339.n()).done;){var _e252=_step339.value;this.focusTracker.add(_e252.element);}}catch(err){_iterator339.e(err);}finally{_iterator339.f();}this.keystrokes.listenTo(this.element);}},{key:"appendGrids",value:function appendGrids(){if(!this.staticColorsGrid&&(this.staticColorsGrid=this._createStaticColorsGrid(),this.items.add(this.staticColorsGrid),this.documentColorsCount)){var _e253=Mc.bind(this.documentColors,this.documentColors),_t229=new Sd(this.locale);_t229.text=this._documentColorsLabel,_t229.extendTemplate({attributes:{"class":["ck","ck-color-grid__label",_e253["if"]("isEmpty","ck-hidden")]}}),this.items.add(_t229),this.documentColorsGrid=this._createDocumentColorsGrid(),this.items.add(this.documentColorsGrid);}}},{key:"focus",value:function focus(){this._focusCycler.focusFirst();}},{key:"focusLast",value:function focusLast(){this._focusCycler.focusLast();}},{key:"_removeColorButton",value:function _removeColorButton(){var _this190=this;var e=new Xc();return e.set({withText:!0,icon:Cc.eraser,tooltip:!0,label:this.removeButtonLabel}),e["class"]="ck-color-table__remove-color",e.on("execute",function(){_this190.fire("execute",{value:null});}),e;}},{key:"_createStaticColorsGrid",value:function _createStaticColorsGrid(){var e=new rd(this.locale,{colorDefinitions:this.colorDefinitions,columns:this.columns});return e.delegate("execute").to(this),e;}},{key:"_createDocumentColorsGrid",value:function _createDocumentColorsGrid(){var _this191=this;var e=Mc.bind(this.documentColors,this.documentColors),t=new rd(this.locale,{columns:this.columns});return t.delegate("execute").to(this),t.extendTemplate({attributes:{"class":e["if"]("isEmpty","ck-hidden")}}),t.items.bindTo(this.documentColors).using(function(e){var t=new id();return t.set({color:e.color,hasBorder:e.options&&e.options.hasBorder}),e.label&&t.set({label:e.label,tooltip:!0}),t.on("execute",function(){_this191.fire("execute",{value:e.color});}),t;}),this.documentColors.on("change:isEmpty",function(e,i,n){n&&(t.selectedColor=null);}),t;}},{key:"_addColorToDocumentColors",value:function _addColorToDocumentColors(e){var t=this.colorDefinitions.find(function(t){return t.color===e;});t?this.documentColors.add(Object.assign({},t)):this.documentColors.add({color:e,label:e,options:{hasBorder:!1}});}}]);return Lg;}(Pc);function Vg(e,t){var i={model:{key:e,values:[]},view:{},upcastAlso:{}};var _iterator340=_createForOfIteratorHelper(t),_step340;try{for(_iterator340.s();!(_step340=_iterator340.n()).done;){var _e254=_step340.value;i.model.values.push(_e254.model),i.view[_e254.model]=_e254.view,_e254.upcastAlso&&(i.upcastAlso[_e254.model]=_e254.upcastAlso);}}catch(err){_iterator340.e(err);}finally{_iterator340.f();}return i;}function Bg(e){return function(t){return t.getStyle(e).replace(/\s/g,"");};}function jg(e){return function(t,_ref50){var i=_ref50.writer;return i.createAttributeElement("span",{style:"".concat(e,":").concat(t)},{priority:7});};}var Fg=/*#__PURE__*/function(_Og){_inherits(Fg,_Og);var _super114=_createSuper(Fg);function Fg(e){_classCallCheck(this,Fg);return _super114.call(this,e,"fontSize");}return _createClass(Fg);}(Og);function Hg(e){return e.map(function(e){return function(e){if(t=e,"object"==_typeof(t)&&t.title&&t.model&&t.view)return Wg(e);var t;var i=function(e){return Ug[e]||Ug[e.model];}(e);if(i)return Wg(i);if("default"===e)return{model:void 0,title:"Default"};if(function(e){var t;if("object"==_typeof(e)){if(!e.model)throw new l.a("font-size-invalid-definition",null,e);t=parseFloat(e.model);}else t=parseFloat(e);return isNaN(t);}(e))return;return function(e){"number"!=typeof e&&"string"!=typeof e||(e={title:String(e),model:parseFloat(e)+"px"});return e.view={name:"span",styles:{"font-size":e.model}},Wg(e);}(e);}(e);}).filter(function(e){return!!e;});}var Ug={get tiny(){return{title:"Tiny",model:"tiny",view:{name:"span",classes:"text-tiny",priority:7}};},get small(){return{title:"Small",model:"small",view:{name:"span",classes:"text-small",priority:7}};},get big(){return{title:"Big",model:"big",view:{name:"span",classes:"text-big",priority:7}};},get huge(){return{title:"Huge",model:"huge",view:{name:"span",classes:"text-huge",priority:7}};}};function Wg(e){return e.view.priority||(e.view.priority=7),e;}var qg=["x-small","x-small","small","medium","large","x-large","xx-large","xxx-large"];var $g=/*#__PURE__*/function(_Qe22){_inherits($g,_Qe22);var _super115=_createSuper($g);function $g(e){var _this192;_classCallCheck(this,$g);_this192=_super115.call(this,e),e.config.define("fontSize",{options:["tiny","small","default","big","huge"],supportAllValues:!1});return _this192;}_createClass($g,[{key:"init",value:function init(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:"fontSize"}),e.model.schema.setAttributeProperties("fontSize",{isFormatting:!0,copyOnEnter:!0});var t=e.config.get("fontSize.supportAllValues"),i=Vg("fontSize",Hg(this.editor.config.get("fontSize.options")).filter(function(e){return e.model;}));t?(this._prepareAnyValueConverters(i),this._prepareCompatibilityConverter()):e.conversion.attributeToElement(i),e.commands.add("fontSize",new Fg(e));}},{key:"_prepareAnyValueConverters",value:function _prepareAnyValueConverters(e){var t=this.editor,i=e.model.values.filter(function(e){return!vu(String(e))&&(t=String(e),!yu.test(t));var t;});if(i.length)throw new l.a("font-size-invalid-use-of-named-presets",null,{presets:i});t.conversion["for"]("downcast").attributeToElement({model:"fontSize",view:function view(e,_ref51){var t=_ref51.writer;if(e)return t.createAttributeElement("span",{style:"font-size:"+e},{priority:7});}}),t.conversion["for"]("upcast").elementToAttribute({model:{key:"fontSize",value:function value(e){return e.getStyle("font-size");}},view:{name:"span",styles:{"font-size":/.*/}}});}},{key:"_prepareCompatibilityConverter",value:function _prepareCompatibilityConverter(){this.editor.conversion["for"]("upcast").elementToAttribute({view:{name:"font",attributes:{size:/^[+-]?\d{1,3}$/}},model:{key:"fontSize",value:function value(e){var t=e.getAttribute("size"),i="-"===t[0]||"+"===t[0];var n=parseInt(t,10);i&&(n=3+n);var o=qg.length-1,r=Math.min(Math.max(n,0),o);return qg[r];}}});}}],[{key:"pluginName",get:function get(){return"FontSizeEditing";}}]);return $g;}(Qe);i(69);var Yg=/*#__PURE__*/function(_Qe23){_inherits(Yg,_Qe23);var _super116=_createSuper(Yg);function Yg(){_classCallCheck(this,Yg);return _super116.apply(this,arguments);}_createClass(Yg,[{key:"init",value:function init(){var _this193=this;var e=this.editor,t=e.t,i=this._getLocalizedOptions(),n=e.commands.get("fontSize");e.ui.componentFactory.add("fontSize",function(o){var r=Cd(o);return Ed(r,function(e,t){var i=new Zi();var _iterator341=_createForOfIteratorHelper(e),_step341;try{var _loop6=function _loop6(){var n=_step341.value;var e={type:"button",model:new Dd({commandName:"fontSize",commandParam:n.model,label:n.title,"class":"ck-fontsize-option",withText:!0})};n.view&&n.view.styles&&e.model.set("labelStyle","font-size:"+n.view.styles["font-size"]),n.view&&n.view.classes&&e.model.set("class","".concat(e.model["class"]," ").concat(n.view.classes)),e.model.bind("isOn").to(t,"value",function(e){return e===n.model;}),i.add(e);};for(_iterator341.s();!(_step341=_iterator341.n()).done;){_loop6();}}catch(err){_iterator341.e(err);}finally{_iterator341.f();}return i;}(i,n)),r.buttonView.set({label:t("Font Size"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13zm7.55 2.279.779-.779.707.707-2.265 2.265-2.193-2.265.707-.707.765.765V4.825c0-.042 0-.083.002-.123l-.77.77-.707-.707L17.207 2.5l2.265 2.265-.707.707-.782-.782c.002.043.003.089.003.135v10.454z"/></svg>',tooltip:!0}),r.extendTemplate({attributes:{"class":["ck-font-size-dropdown"]}}),r.bind("isEnabled").to(n),_this193.listenTo(r,"execute",function(t){e.execute(t.source.commandName,{value:t.source.commandParam}),e.editing.view.focus();}),r;});}},{key:"_getLocalizedOptions",value:function _getLocalizedOptions(){var e=this.editor,t=e.t,i={Default:t("Default"),Tiny:t("Tiny"),Small:t("Small"),Big:t("Big"),Huge:t("Huge")};return Hg(e.config.get("fontSize").options).map(function(e){var t=i[e.title];return t&&t!=e.title&&(e=Object.assign({},e,{title:t})),e;});}}],[{key:"pluginName",get:function get(){return"FontSizeUI";}}]);return Yg;}(Qe);var Gg=/*#__PURE__*/function(_Og2){_inherits(Gg,_Og2);var _super117=_createSuper(Gg);function Gg(e){_classCallCheck(this,Gg);return _super117.call(this,e,"fontFamily");}return _createClass(Gg);}(Og);function Kg(e){return e.map(Qg).filter(function(e){return!!e;});}function Qg(e){return"object"==_typeof(e)?e:"default"===e?{title:"Default",model:void 0}:"string"==typeof e?function(e){var t=e.replace(/"|'/g,"").split(","),i=t[0],n=t.map(Jg).join(", ");return{title:i,model:n,view:{name:"span",styles:{"font-family":n},priority:7}};}(e):void 0;}function Jg(e){return(e=e.trim()).indexOf(" ")>0&&(e="'".concat(e,"'")),e;}var Zg=/*#__PURE__*/function(_Qe24){_inherits(Zg,_Qe24);var _super118=_createSuper(Zg);function Zg(e){var _this194;_classCallCheck(this,Zg);_this194=_super118.call(this,e),e.config.define("fontFamily",{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!1});return _this194;}_createClass(Zg,[{key:"init",value:function init(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:"fontFamily"}),e.model.schema.setAttributeProperties("fontFamily",{isFormatting:!0,copyOnEnter:!0});var t=Vg("fontFamily",Kg(e.config.get("fontFamily.options")).filter(function(e){return e.model;}));e.config.get("fontFamily.supportAllValues")?(this._prepareAnyValueConverters(),this._prepareCompatibilityConverter()):e.conversion.attributeToElement(t),e.commands.add("fontFamily",new Gg(e));}},{key:"_prepareAnyValueConverters",value:function _prepareAnyValueConverters(){var e=this.editor;e.conversion["for"]("downcast").attributeToElement({model:"fontFamily",view:function view(e,_ref52){var t=_ref52.writer;return t.createAttributeElement("span",{style:"font-family:"+e},{priority:7});}}),e.conversion["for"]("upcast").elementToAttribute({model:{key:"fontFamily",value:function value(e){return e.getStyle("font-family");}},view:{name:"span",styles:{"font-family":/.*/}}});}},{key:"_prepareCompatibilityConverter",value:function _prepareCompatibilityConverter(){this.editor.conversion["for"]("upcast").elementToAttribute({view:{name:"font",attributes:{face:/.*/}},model:{key:"fontFamily",value:function value(e){return e.getAttribute("face");}}});}}],[{key:"pluginName",get:function get(){return"FontFamilyEditing";}}]);return Zg;}(Qe);var Xg=/*#__PURE__*/function(_Qe25){_inherits(Xg,_Qe25);var _super119=_createSuper(Xg);function Xg(){_classCallCheck(this,Xg);return _super119.apply(this,arguments);}_createClass(Xg,[{key:"init",value:function init(){var _this195=this;var e=this.editor,t=e.t,i=this._getLocalizedOptions(),n=e.commands.get("fontFamily");e.ui.componentFactory.add("fontFamily",function(o){var r=Cd(o);return Ed(r,function(e,t){var i=new Zi();var _iterator342=_createForOfIteratorHelper(e),_step342;try{var _loop7=function _loop7(){var n=_step342.value;var e={type:"button",model:new Dd({commandName:"fontFamily",commandParam:n.model,label:n.title,withText:!0})};e.model.bind("isOn").to(t,"value",function(e){return e===n.model||!(!e||!n.model)&&e.split(",")[0].replace(/'/g,"").toLowerCase()===n.model.toLowerCase();}),n.view&&n.view.styles&&e.model.set("labelStyle","font-family: "+n.view.styles["font-family"]),i.add(e);};for(_iterator342.s();!(_step342=_iterator342.n()).done;){_loop7();}}catch(err){_iterator342.e(err);}finally{_iterator342.f();}return i;}(i,n)),r.buttonView.set({label:t("Font Family"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.03 3h6.149a.75.75 0 1 1 0 1.5h-5.514L11.03 3zm1.27 3h4.879a.75.75 0 1 1 0 1.5h-4.244L12.3 6zm1.27 3h3.609a.75.75 0 1 1 0 1.5h-2.973L13.57 9zm-2.754 2.5L8.038 4.785 5.261 11.5h5.555zm.62 1.5H4.641l-1.666 4.028H1.312l5.789-14h1.875l5.789 14h-1.663L11.436 13z"/></svg>',tooltip:!0}),r.extendTemplate({attributes:{"class":"ck-font-family-dropdown"}}),r.bind("isEnabled").to(n),_this195.listenTo(r,"execute",function(t){e.execute(t.source.commandName,{value:t.source.commandParam}),e.editing.view.focus();}),r;});}},{key:"_getLocalizedOptions",value:function _getLocalizedOptions(){var e=this.editor,t=e.t;return Kg(e.config.get("fontFamily").options).map(function(e){return"Default"===e.title&&(e.title=t("Default")),e;});}}],[{key:"pluginName",get:function get(){return"FontFamilyUI";}}]);return Xg;}(Qe);var em=/*#__PURE__*/function(_Og3){_inherits(em,_Og3);var _super120=_createSuper(em);function em(e){_classCallCheck(this,em);return _super120.call(this,e,"fontColor");}return _createClass(em);}(Og);var tm=/*#__PURE__*/function(_Qe26){_inherits(tm,_Qe26);var _super121=_createSuper(tm);function tm(e){var _this196;_classCallCheck(this,tm);_this196=_super121.call(this,e),e.config.define("fontColor",{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),e.conversion["for"]("upcast").elementToAttribute({view:{name:"span",styles:{color:/[\s\S]+/}},model:{key:"fontColor",value:Bg("color")}}),e.conversion["for"]("upcast").elementToAttribute({view:{name:"font",attributes:{color:/^#?\w+$/}},model:{key:"fontColor",value:function value(e){return e.getAttribute("color");}}}),e.conversion["for"]("downcast").attributeToElement({model:"fontColor",view:jg("color")}),e.commands.add("fontColor",new em(e)),e.model.schema.extend("$text",{allowAttributes:"fontColor"}),e.model.schema.setAttributeProperties("fontColor",{isFormatting:!0,copyOnEnter:!0});return _this196;}_createClass(tm,null,[{key:"pluginName",get:function get(){return"FontColorEditing";}}]);return tm;}(Qe);var im=/*#__PURE__*/function(_Qe27){_inherits(im,_Qe27);var _super122=_createSuper(im);function im(e,_ref53){var _this197;var t=_ref53.commandName,i=_ref53.icon,n=_ref53.componentName,o=_ref53.dropdownLabel;_classCallCheck(this,im);_this197=_super122.call(this,e),_this197.commandName=t,_this197.componentName=n,_this197.icon=i,_this197.dropdownLabel=o,_this197.columns=e.config.get(_this197.componentName+".columns"),_this197.colorTableView=void 0;return _this197;}_createClass(im,[{key:"init",value:function init(){var _this198=this;var e=this.editor,t=e.locale,i=t.t,n=e.commands.get(this.commandName);var o=function(e,t){var i=e.t,n={Black:i("Black"),"Dim grey":i("Dim grey"),Grey:i("Grey"),"Light grey":i("Light grey"),White:i("White"),Red:i("Red"),Orange:i("Orange"),Yellow:i("Yellow"),"Light green":i("Light green"),Green:i("Green"),Aquamarine:i("Aquamarine"),Turquoise:i("Turquoise"),"Light blue":i("Light blue"),Blue:i("Blue"),Purple:i("Purple")};return t.map(function(e){var t=n[e.label];return t&&t!=e.label&&(e.label=t),e;});}(t,e.config.get(this.componentName).colors.map(td).filter(function(e){return!!e;})),r=e.config.get(this.componentName+".documentColors");e.ui.componentFactory.add(this.componentName,function(t){var s=Cd(t);return _this198.colorTableView=function(_ref54){var e=_ref54.dropdownView,t=_ref54.colors,i=_ref54.columns,n=_ref54.removeButtonLabel,o=_ref54.documentColorsLabel,r=_ref54.documentColorsCount;var s=e.locale,a=new Lg(s,{colors:t,columns:i,removeButtonLabel:n,documentColorsLabel:o,documentColorsCount:r});return e.colorTableView=a,e.panelView.children.add(a),a.delegate("execute").to(e,"execute"),a;}({dropdownView:s,colors:o.map(function(e){return{label:e.label,color:e.model,options:{hasBorder:e.hasBorder}};}),columns:_this198.columns,removeButtonLabel:i("Remove color"),documentColorsLabel:0!==r?i("Document colors"):void 0,documentColorsCount:void 0===r?_this198.columns:r}),_this198.colorTableView.bind("selectedColor").to(n,"value"),s.buttonView.set({label:_this198.dropdownLabel,icon:_this198.icon,tooltip:!0}),s.extendTemplate({attributes:{"class":"ck-color-ui-dropdown"}}),s.bind("isEnabled").to(n),s.on("execute",function(t,i){e.execute(_this198.commandName,i),e.editing.view.focus();}),s.on("change:isOpen",function(t,i,n){s.colorTableView.appendGrids(),n&&(0!==r&&_this198.colorTableView.updateDocumentColors(e.model,_this198.componentName),_this198.colorTableView.updateSelectedColors());}),s;});}}]);return im;}(Qe);var nm=/*#__PURE__*/function(_im){_inherits(nm,_im);var _super123=_createSuper(nm);function nm(e){_classCallCheck(this,nm);return _super123.call(this,e,{commandName:"fontColor",componentName:"fontColor",icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.4 10.3 10 4.5l-2.4 5.8h4.8zm.5 1.2H7.1L5.7 15H4.2l5-12h1.6l5 12h-1.5L13 11.5zm3.1 7H4a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2z"/></svg>',dropdownLabel:(0,e.locale.t)("Font Color")});}_createClass(nm,null,[{key:"pluginName",get:function get(){return"FontColorUI";}}]);return nm;}(im);var om=/*#__PURE__*/function(_Og4){_inherits(om,_Og4);var _super124=_createSuper(om);function om(e){_classCallCheck(this,om);return _super124.call(this,e,"fontBackgroundColor");}return _createClass(om);}(Og);var rm=/*#__PURE__*/function(_Qe28){_inherits(rm,_Qe28);var _super125=_createSuper(rm);function rm(e){var _this199;_classCallCheck(this,rm);_this199=_super125.call(this,e),e.config.define("fontBackgroundColor",{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),e.data.addStyleProcessorRules(Ou),e.conversion["for"]("upcast").elementToAttribute({view:{name:"span",styles:{"background-color":/[\s\S]+/}},model:{key:"fontBackgroundColor",value:Bg("background-color")}}),e.conversion["for"]("downcast").attributeToElement({model:"fontBackgroundColor",view:jg("background-color")}),e.commands.add("fontBackgroundColor",new om(e)),e.model.schema.extend("$text",{allowAttributes:"fontBackgroundColor"}),e.model.schema.setAttributeProperties("fontBackgroundColor",{isFormatting:!0,copyOnEnter:!0});return _this199;}_createClass(rm,null,[{key:"pluginName",get:function get(){return"FontBackgroundColorEditing";}}]);return rm;}(Qe);var sm=/*#__PURE__*/function(_im2){_inherits(sm,_im2);var _super126=_createSuper(sm);function sm(e){_classCallCheck(this,sm);return _super126.call(this,e,{commandName:"fontBackgroundColor",componentName:"fontBackgroundColor",icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M4 2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm8.38 9.262H7.62L10 5.506l2.38 5.756zm.532 1.285L14.34 16h1.426L10.804 4H9.196L4.234 16H5.66l1.428-3.453h5.824z"/></svg>',dropdownLabel:(0,e.locale.t)("Font Background Color")});}_createClass(sm,null,[{key:"pluginName",get:function get(){return"FontBackgroundColorUI";}}]);return sm;}(im);var am=/*#__PURE__*/function(){function am(){var _this200=this;_classCallCheck(this,am);var e=new window.FileReader();this._reader=e,this._data=void 0,this.set("loaded",0),e.onprogress=function(e){_this200.loaded=e.loaded;};}_createClass(am,[{key:"error",get:function get(){return this._reader.error;}},{key:"data",get:function get(){return this._data;}},{key:"read",value:function read(e){var _this201=this;var t=this._reader;return this.total=e.size,new Promise(function(i,n){t.onload=function(){var e=t.result;_this201._data=e,i(e);},t.onerror=function(){n("error");},t.onabort=function(){n("aborted");},_this201._reader.readAsDataURL(e);});}},{key:"abort",value:function abort(){this._reader.abort();}}]);return am;}();Ke(am,Ue);var lm=/*#__PURE__*/function(_Qe29){_inherits(lm,_Qe29);var _super127=_createSuper(lm);function lm(){_classCallCheck(this,lm);return _super127.apply(this,arguments);}_createClass(lm,[{key:"init",value:function init(){var _this202=this;this.loaders=new Zi(),this.loaders.on("add",function(){return _this202._updatePendingAction();}),this.loaders.on("remove",function(){return _this202._updatePendingAction();}),this._loadersMap=new Map(),this._pendingAction=null,this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",function(e,t){return t?e/t*100:0;});}},{key:"getLoader",value:function getLoader(e){return this._loadersMap.get(e)||null;}},{key:"createLoader",value:function createLoader(e){var _this203=this;if(!this.createUploadAdapter)return Object(l.b)("filerepository-no-upload-adapter"),null;var t=new cm(Promise.resolve(e),this.createUploadAdapter);return this.loaders.add(t),this._loadersMap.set(e,t),e instanceof Promise&&t.file.then(function(e){_this203._loadersMap.set(e,t);})["catch"](function(){}),t.on("change:uploaded",function(){var e=0;var _iterator343=_createForOfIteratorHelper(_this203.loaders),_step343;try{for(_iterator343.s();!(_step343=_iterator343.n()).done;){var _t230=_step343.value;e+=_t230.uploaded;}}catch(err){_iterator343.e(err);}finally{_iterator343.f();}_this203.uploaded=e;}),t.on("change:uploadTotal",function(){var e=0;var _iterator344=_createForOfIteratorHelper(_this203.loaders),_step344;try{for(_iterator344.s();!(_step344=_iterator344.n()).done;){var _t231=_step344.value;_t231.uploadTotal&&(e+=_t231.uploadTotal);}}catch(err){_iterator344.e(err);}finally{_iterator344.f();}_this203.uploadTotal=e;}),t;}},{key:"destroyLoader",value:function destroyLoader(e){var _this204=this;var t=e instanceof cm?e:this.getLoader(e);t._destroy(),this.loaders.remove(t),this._loadersMap.forEach(function(e,i){e===t&&_this204._loadersMap["delete"](i);});}},{key:"_updatePendingAction",value:function _updatePendingAction(){var e=this.editor.plugins.get(Ac);if(this.loaders.length){if(!this._pendingAction){var _t232=this.editor.t,_i253=function _i253(e){return"".concat(_t232("Upload in progress")," ").concat(parseInt(e),"%.");};this._pendingAction=e.add(_i253(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",_i253);}}else e.remove(this._pendingAction),this._pendingAction=null;}}],[{key:"pluginName",get:function get(){return"FileRepository";}},{key:"requires",get:function get(){return[Ac];}}]);return lm;}(Qe);Ke(lm,Ue);var cm=/*#__PURE__*/function(){function cm(e,t){_classCallCheck(this,cm);this.id=s(),this._filePromiseWrapper=this._createFilePromiseWrapper(e),this._adapter=t(this),this._reader=new am(),this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",function(e,t){return t?e/t*100:0;}),this.set("uploadResponse",null);}_createClass(cm,[{key:"file",get:function get(){var _this205=this;return this._filePromiseWrapper?this._filePromiseWrapper.promise.then(function(e){return _this205._filePromiseWrapper?e:null;}):Promise.resolve(null);}},{key:"data",get:function get(){return this._reader.data;}},{key:"read",value:function read(){var _this206=this;if("idle"!=this.status)throw new l.a("filerepository-read-wrong-status",this);return this.status="reading",this.file.then(function(e){return _this206._reader.read(e);}).then(function(e){if("reading"!==_this206.status)throw _this206.status;return _this206.status="idle",e;})["catch"](function(e){if("aborted"===e)throw _this206.status="aborted","aborted";throw _this206.status="error",_this206._reader.error?_this206._reader.error:e;});}},{key:"upload",value:function upload(){var _this207=this;if("idle"!=this.status)throw new l.a("filerepository-upload-wrong-status",this);return this.status="uploading",this.file.then(function(){return _this207._adapter.upload();}).then(function(e){return _this207.uploadResponse=e,_this207.status="idle",e;})["catch"](function(e){if("aborted"===_this207.status)throw"aborted";throw _this207.status="error",e;});}},{key:"abort",value:function abort(){var e=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?"reading"==e?this._reader.abort():"uploading"==e&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise["catch"](function(){}),this._filePromiseWrapper.rejecter("aborted")),this._destroy();}},{key:"_destroy",value:function _destroy(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0;}},{key:"_createFilePromiseWrapper",value:function _createFilePromiseWrapper(e){var t={};return t.promise=new Promise(function(i,n){t.rejecter=n,t.isFulfilled=!1,e.then(function(e){t.isFulfilled=!0,i(e);})["catch"](function(e){t.isFulfilled=!0,n(e);});}),t;}}]);return cm;}();Ke(cm,Ue);var dm=/*#__PURE__*/function(_Pc24){_inherits(dm,_Pc24);var _super128=_createSuper(dm);function dm(e){var _this208;_classCallCheck(this,dm);_this208=_super128.call(this,e),_this208.buttonView=new Xc(e),_this208._fileInputView=new um(e),_this208._fileInputView.bind("acceptedType").to(_assertThisInitialized(_this208)),_this208._fileInputView.bind("allowMultipleFiles").to(_assertThisInitialized(_this208)),_this208._fileInputView.delegate("done").to(_assertThisInitialized(_this208)),_this208.setTemplate({tag:"span",attributes:{"class":"ck-file-dialog-button"},children:[_this208.buttonView,_this208._fileInputView]}),_this208.buttonView.on("execute",function(){_this208._fileInputView.open();});return _this208;}_createClass(dm,[{key:"focus",value:function focus(){this.buttonView.focus();}}]);return dm;}(Pc);var um=/*#__PURE__*/function(_Pc25){_inherits(um,_Pc25);var _super129=_createSuper(um);function um(e){var _this209;_classCallCheck(this,um);_this209=_super129.call(this,e),_this209.set("acceptedType"),_this209.set("allowMultipleFiles",!1);var t=_this209.bindTemplate;_this209.setTemplate({tag:"input",attributes:{"class":["ck-hidden"],type:"file",tabindex:"-1",accept:t.to("acceptedType"),multiple:t.to("allowMultipleFiles")},on:{change:t.to(function(){_this209.element&&_this209.element.files&&_this209.element.files.length&&_this209.fire("done",_this209.element.files),_this209.element.value="";})}});return _this209;}_createClass(um,[{key:"open",value:function open(){this.element.click();}}]);return um;}(Pc);function hm(){var e=function(e){e=e.toLowerCase();var t=document.cookie.split(";");var _iterator345=_createForOfIteratorHelper(t),_step345;try{for(_iterator345.s();!(_step345=_iterator345.n()).done;){var _i254=_step345.value;var _t233=_i254.split("=");if(decodeURIComponent(_t233[0].trim().toLowerCase())===e)return decodeURIComponent(_t233[1]);}}catch(err){_iterator345.e(err);}finally{_iterator345.f();}return null;}("ckCsrfToken");var t,i;return e&&40==e.length||(e=function(e){var t="";var i=new Uint8Array(e);window.crypto.getRandomValues(i);for(var _e255=0;_e255<i.length;_e255++){var _n151="abcdefghijklmnopqrstuvwxyz0123456789".charAt(i[_e255]%"abcdefghijklmnopqrstuvwxyz0123456789".length);t+=Math.random()>.5?_n151.toUpperCase():_n151;}return t;}(40),t="ckCsrfToken",i=e,document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(i)+";path=/"),e;}var gm=/*#__PURE__*/function(){function gm(e,t,i){_classCallCheck(this,gm);this.loader=e,this.url=t,this.t=i;}_createClass(gm,[{key:"upload",value:function upload(){var _this210=this;return this.loader.file.then(function(e){return new Promise(function(t,i){_this210._initRequest(),_this210._initListeners(t,i,e),_this210._sendRequest(e);});});}},{key:"abort",value:function abort(){this.xhr&&this.xhr.abort();}},{key:"_initRequest",value:function _initRequest(){var e=this.xhr=new XMLHttpRequest();e.open("POST",this.url,!0),e.responseType="json";}},{key:"_initListeners",value:function _initListeners(e,t,i){var n=this.xhr,o=this.loader,r=(0,this.t)("Cannot upload file:")+" ".concat(i.name,".");n.addEventListener("error",function(){return t(r);}),n.addEventListener("abort",function(){return t();}),n.addEventListener("load",function(){var i=n.response;if(!i||!i.uploaded)return t(i&&i.error&&i.error.message?i.error.message:r);e({"default":i.url});}),n.upload&&n.upload.addEventListener("progress",function(e){e.lengthComputable&&(o.uploadTotal=e.total,o.uploaded=e.loaded);});}},{key:"_sendRequest",value:function _sendRequest(e){var t=new FormData();t.append("upload",e),t.append("ckCsrfToken",hm()),this.xhr.send(t);}}]);return gm;}();function mm(e,t,i,n){var o,r=null;"function"==typeof n?o=n:(r=e.commands.get(n),o=function o(){e.execute(n);}),e.model.document.on("change:data",function(s,a){if(r&&!r.isEnabled||!t.isEnabled)return;var l=Ns(e.model.document.selection.getRanges());if(!l.isCollapsed)return;if("transparent"==a.type)return;var c=Array.from(e.model.document.differ.getChanges()),d=c[0];if(1!=c.length||"insert"!==d.type||"$text"!=d.name||1!=d.length)return;var u=d.position.parent;if(u.is("element","codeBlock"))return;if(u.is("element","listItem")&&"function"!=typeof n&&!["numberedList","bulletedList","todoList"].includes(n))return;if(r&&!0===r.value)return;var h=u.getChild(0),g=e.model.createRangeOn(h);if(!g.containsRange(l)&&!l.end.isEqual(g.end))return;var m=i.exec(h.data.substr(0,l.end.offset));m&&e.model.enqueueChange(function(t){var i=t.createPositionAt(u,0),n=t.createPositionAt(u,m[0].length),r=new ba(i,n);if(!1!==o({match:m})){t.remove(r);var _i255=e.model.document.selection.getFirstRange(),_n152=t.createRangeIn(u);!u.isEmpty||_n152.isEqual(_i255)||_n152.containsRange(_i255,!0)||t.remove(u);}r.detach();});});}function fm(e,t,i,n){var o,r;i instanceof RegExp?o=i:r=i,r=r||function(e){var t;var i=[],n=[];for(;null!==(t=o.exec(e))&&!(t&&t.length<4);){var _t234=t,_e256=_t234.index,_o94=_t234[1],_r52=_t234[2],_s30=_t234[3];var _a18=_o94+_r52+_s30;_e256+=t[0].length-_a18.length;var _l10=[_e256,_e256+_o94.length],_c5=[_e256+_o94.length+_r52.length,_e256+_o94.length+_r52.length+_s30.length];i.push(_l10),i.push(_c5),n.push([_e256+_o94.length,_e256+_o94.length+_r52.length]);}return{remove:i,format:n};},e.model.document.on("change:data",function(i,o){if("transparent"==o.type||!t.isEnabled)return;var s=e.model,a=s.document.selection;if(!a.isCollapsed)return;var l=Array.from(s.document.differ.getChanges()),c=l[0];if(1!=l.length||"insert"!==c.type||"$text"!=c.name||1!=c.length)return;var d=a.focus,u=d.parent,_ref55=function(e,t){var i=e.start;return{text:Array.from(e.getItems()).reduce(function(e,n){return!n.is("$text")&&!n.is("$textProxy")||n.getAttribute("code")?(i=t.createPositionAfter(n),""):e+n.data;},""),range:t.createRange(i,e.end)};}(s.createRange(s.createPositionAt(u,0),d),s),h=_ref55.text,g=_ref55.range,m=r(h),f=pm(g.start,m.format,s),p=pm(g.start,m.remove,s);f.length&&p.length&&s.enqueueChange(function(e){if(!1!==n(e,f)){var _iterator346=_createForOfIteratorHelper(p.reverse()),_step346;try{for(_iterator346.s();!(_step346=_iterator346.n()).done;){var _t235=_step346.value;e.remove(_t235);}}catch(err){_iterator346.e(err);}finally{_iterator346.f();}}});});}function pm(e,t,i){return t.filter(function(e){return void 0!==e[0]&&void 0!==e[1];}).map(function(t){return i.createRange(e.getShiftedBy(t[0]),e.getShiftedBy(t[1]));});}function bm(e,t){return function(i,n){if(!e.commands.get(t).isEnabled)return!1;var o=e.model.schema.getValidRanges(n,t);var _iterator347=_createForOfIteratorHelper(o),_step347;try{for(_iterator347.s();!(_step347=_iterator347.n()).done;){var _e257=_step347.value;i.setAttribute(t,!0,_e257);}}catch(err){_iterator347.e(err);}finally{_iterator347.f();}i.removeSelectionAttribute(t);};}var wm=/*#__PURE__*/function(_Ze10){_inherits(wm,_Ze10);var _super130=_createSuper(wm);function wm(e,t){var _this211;_classCallCheck(this,wm);_this211=_super130.call(this,e),_this211.attributeKey=t;return _this211;}_createClass(wm,[{key:"refresh",value:function refresh(){var e=this.editor.model,t=e.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey);}},{key:"execute",value:function execute(){var _this212=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=this.editor.model,i=t.document.selection,n=void 0===e.forceValue?!this.value:e.forceValue;t.change(function(e){if(i.isCollapsed)n?e.setSelectionAttribute(_this212.attributeKey,!0):e.removeSelectionAttribute(_this212.attributeKey);else{var _o95=t.schema.getValidRanges(i.getRanges(),_this212.attributeKey);var _iterator348=_createForOfIteratorHelper(_o95),_step348;try{for(_iterator348.s();!(_step348=_iterator348.n()).done;){var _t236=_step348.value;n?e.setAttribute(_this212.attributeKey,n,_t236):e.removeAttribute(_this212.attributeKey,_t236);}}catch(err){_iterator348.e(err);}finally{_iterator348.f();}}});}},{key:"_getValueFromFirstAllowedNode",value:function _getValueFromFirstAllowedNode(){var e=this.editor.model,t=e.schema,i=e.document.selection;if(i.isCollapsed)return i.hasAttribute(this.attributeKey);var _iterator349=_createForOfIteratorHelper(i.getRanges()),_step349;try{for(_iterator349.s();!(_step349=_iterator349.n()).done;){var _e258=_step349.value;var _iterator350=_createForOfIteratorHelper(_e258.getItems()),_step350;try{for(_iterator350.s();!(_step350=_iterator350.n()).done;){var _i256=_step350.value;if(t.checkAttribute(_i256,this.attributeKey))return _i256.hasAttribute(this.attributeKey);}}catch(err){_iterator350.e(err);}finally{_iterator350.f();}}}catch(err){_iterator349.e(err);}finally{_iterator349.f();}return!1;}}]);return wm;}(Ze);var km=/*#__PURE__*/function(_Qe30){_inherits(km,_Qe30);var _super131=_createSuper(km);function km(){_classCallCheck(this,km);return _super131.apply(this,arguments);}_createClass(km,[{key:"init",value:function init(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:"bold"}),e.model.schema.setAttributeProperties("bold",{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:"bold",view:"strong",upcastAlso:["b",function(e){var t=e.getStyle("font-weight");return t?"bold"==t||Number(t)>=600?{name:!0,styles:["font-weight"]}:void 0:null;}]}),e.commands.add("bold",new wm(e,"bold")),e.keystrokes.set("CTRL+B","bold");}}],[{key:"pluginName",get:function get(){return"BoldEditing";}}]);return km;}(Qe);var _m=/*#__PURE__*/function(_Qe31){_inherits(_m,_Qe31);var _super132=_createSuper(_m);function _m(){_classCallCheck(this,_m);return _super132.apply(this,arguments);}_createClass(_m,[{key:"init",value:function init(){var _this213=this;var e=this.editor,t=e.t;e.ui.componentFactory.add("bold",function(i){var n=e.commands.get("bold"),o=new Xc(i);return o.set({label:t("Bold"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',keystroke:"CTRL+B",tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(n,"value","isEnabled"),_this213.listenTo(o,"execute",function(){e.execute("bold"),e.editing.view.focus();}),o;});}}],[{key:"pluginName",get:function get(){return"BoldUI";}}]);return _m;}(Qe);var vm=/*#__PURE__*/function(_Qe32){_inherits(vm,_Qe32);var _super133=_createSuper(vm);function vm(){_classCallCheck(this,vm);return _super133.apply(this,arguments);}_createClass(vm,[{key:"init",value:function init(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:"italic"}),e.model.schema.setAttributeProperties("italic",{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:"italic",view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),e.commands.add("italic",new wm(e,"italic")),e.keystrokes.set("CTRL+I","italic");}}],[{key:"pluginName",get:function get(){return"ItalicEditing";}}]);return vm;}(Qe);var ym=/*#__PURE__*/function(_Qe33){_inherits(ym,_Qe33);var _super134=_createSuper(ym);function ym(){_classCallCheck(this,ym);return _super134.apply(this,arguments);}_createClass(ym,[{key:"init",value:function init(){var _this214=this;var e=this.editor,t=e.t;e.ui.componentFactory.add("italic",function(i){var n=e.commands.get("italic"),o=new Xc(i);return o.set({label:t("Italic"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>',keystroke:"CTRL+I",tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(n,"value","isEnabled"),_this214.listenTo(o,"execute",function(){e.execute("italic"),e.editing.view.focus();}),o;});}}],[{key:"pluginName",get:function get(){return"ItalicUI";}}]);return ym;}(Qe);var xm=/*#__PURE__*/function(_Qe34){_inherits(xm,_Qe34);var _super135=_createSuper(xm);function xm(){_classCallCheck(this,xm);return _super135.apply(this,arguments);}_createClass(xm,[{key:"init",value:function init(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:"strikethrough"}),e.model.schema.setAttributeProperties("strikethrough",{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:"strikethrough",view:"s",upcastAlso:["del","strike",{styles:{"text-decoration":"line-through"}}]}),e.commands.add("strikethrough",new wm(e,"strikethrough")),e.keystrokes.set("CTRL+SHIFT+X","strikethrough");}}],[{key:"pluginName",get:function get(){return"StrikethroughEditing";}}]);return xm;}(Qe);var Am=/*#__PURE__*/function(_Qe35){_inherits(Am,_Qe35);var _super136=_createSuper(Am);function Am(){_classCallCheck(this,Am);return _super136.apply(this,arguments);}_createClass(Am,[{key:"init",value:function init(){var _this215=this;var e=this.editor,t=e.t;e.ui.componentFactory.add("strikethrough",function(i){var n=e.commands.get("strikethrough"),o=new Xc(i);return o.set({label:t("Strikethrough"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 16.4c-.8-.4-1.5-.9-2.2-1.5a.6.6 0 0 1-.2-.5l.3-.6h1c1 1.2 2.1 1.7 3.7 1.7 1 0 1.8-.3 2.3-.6.6-.4.6-1.2.6-1.3.2-1.2-.9-2.1-.9-2.1h2.1c.3.7.4 1.2.4 1.7v.8l-.6 1.2c-.6.8-1.1 1-1.6 1.2a6 6 0 0 1-2.4.6c-1 0-1.8-.3-2.5-.6zM6.8 9 6 8.3c-.4-.5-.5-.8-.5-1.6 0-.7.1-1.3.5-1.8.4-.6 1-1 1.6-1.3a6.3 6.3 0 0 1 4.7 0 4 4 0 0 1 1.7 1l.3.7c0 .1.2.4-.2.7-.4.2-.9.1-1 0a3 3 0 0 0-1.2-1c-.4-.2-1-.3-2-.4-.7 0-1.4.2-2 .6-.8.6-1 .8-1 1.5 0 .8.5 1 1.2 1.5.6.4 1.1.7 1.9 1H6.8z"/><path d="M3 10.5V9h14v1.5z"/></svg>',keystroke:"CTRL+SHIFT+X",tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(n,"value","isEnabled"),_this215.listenTo(o,"execute",function(){e.execute("strikethrough"),e.editing.view.focus();}),o;});}}],[{key:"pluginName",get:function get(){return"StrikethroughUI";}}]);return Am;}(Qe);var Cm=/*#__PURE__*/function(_Qe36){_inherits(Cm,_Qe36);var _super137=_createSuper(Cm);function Cm(){_classCallCheck(this,Cm);return _super137.apply(this,arguments);}_createClass(Cm,[{key:"init",value:function init(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:"underline"}),e.model.schema.setAttributeProperties("underline",{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:"underline",view:"u",upcastAlso:{styles:{"text-decoration":"underline"}}}),e.commands.add("underline",new wm(e,"underline")),e.keystrokes.set("CTRL+U","underline");}}],[{key:"pluginName",get:function get(){return"UnderlineEditing";}}]);return Cm;}(Qe);var Tm=/*#__PURE__*/function(_Qe37){_inherits(Tm,_Qe37);var _super138=_createSuper(Tm);function Tm(){_classCallCheck(this,Tm);return _super138.apply(this,arguments);}_createClass(Tm,[{key:"init",value:function init(){var _this216=this;var e=this.editor,t=e.t;e.ui.componentFactory.add("underline",function(i){var n=e.commands.get("underline"),o=new Xc(i);return o.set({label:t("Underline"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8 1.9 0 3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4z"/></svg>',keystroke:"CTRL+U",tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(n,"value","isEnabled"),_this216.listenTo(o,"execute",function(){e.execute("underline"),e.editing.view.focus();}),o;});}}],[{key:"pluginName",get:function get(){return"UnderlineUI";}}]);return Tm;}(Qe);var Em=/*#__PURE__*/function(_Ze11){_inherits(Em,_Ze11);var _super139=_createSuper(Em);function Em(){_classCallCheck(this,Em);return _super139.apply(this,arguments);}_createClass(Em,[{key:"refresh",value:function refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled();}},{key:"execute",value:function execute(){var _this217=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=this.editor.model,i=t.schema,n=t.document.selection,o=Array.from(n.getSelectedBlocks()),r=void 0===e.forceValue?!this.value:e.forceValue;t.change(function(e){if(r){var _t237=o.filter(function(e){return Im(e)||Pm(i,e);});_this217._applyQuote(e,_t237);}else _this217._removeQuote(e,o.filter(Im));});}},{key:"_getValue",value:function _getValue(){var e=Ns(this.editor.model.document.selection.getSelectedBlocks());return!(!e||!Im(e));}},{key:"_checkEnabled",value:function _checkEnabled(){if(this.value)return!0;var e=this.editor.model.document.selection,t=this.editor.model.schema,i=Ns(e.getSelectedBlocks());return!!i&&Pm(t,i);}},{key:"_removeQuote",value:function _removeQuote(e,t){Sm(e,t).reverse().forEach(function(t){if(t.start.isAtStart&&t.end.isAtEnd)return void e.unwrap(t.start.parent);if(t.start.isAtStart){var _i257=e.createPositionBefore(t.start.parent);return void e.move(t,_i257);}t.end.isAtEnd||e.split(t.end);var i=e.createPositionAfter(t.end.parent);e.move(t,i);});}},{key:"_applyQuote",value:function _applyQuote(e,t){var i=[];Sm(e,t).reverse().forEach(function(t){var n=Im(t.start);n||(n=e.createElement("blockQuote"),e.wrap(t,n)),i.push(n);}),i.reverse().reduce(function(t,i){return t.nextSibling==i?(e.merge(e.createPositionAfter(t)),t):i;});}}]);return Em;}(Ze);function Im(e){return"blockQuote"==e.parent.name?e.parent:null;}function Sm(e,t){var i,n=0;var o=[];for(;n<t.length;){var _r53=t[n],_s31=t[n+1];i||(i=e.createPositionBefore(_r53)),_s31&&_r53.nextSibling==_s31||(o.push(e.createRange(i,e.createPositionAfter(_r53))),i=null),n++;}return o;}function Pm(e,t){var i=e.checkChild(t.parent,"blockQuote"),n=e.checkChild(["$root","blockQuote"],t);return i&&n;}var Mm=/*#__PURE__*/function(_Qe38){_inherits(Mm,_Qe38);var _super140=_createSuper(Mm);function Mm(){_classCallCheck(this,Mm);return _super140.apply(this,arguments);}_createClass(Mm,[{key:"init",value:function init(){var e=this.editor,t=e.model.schema;e.commands.add("blockQuote",new Em(e)),t.register("blockQuote",{allowWhere:"$block",allowContentOf:"$root"}),e.conversion.elementToElement({model:"blockQuote",view:"blockquote"}),e.model.document.registerPostFixer(function(i){var n=e.model.document.differ.getChanges();var _iterator351=_createForOfIteratorHelper(n),_step351;try{for(_iterator351.s();!(_step351=_iterator351.n()).done;){var _e259=_step351.value;if("insert"==_e259.type){var _n153=_e259.position.nodeAfter;if(!_n153)continue;if(_n153.is("element","blockQuote")&&_n153.isEmpty)return i.remove(_n153),!0;if(_n153.is("element","blockQuote")&&!t.checkChild(_e259.position,_n153))return i.unwrap(_n153),!0;if(_n153.is("element")){var _e260=i.createRangeIn(_n153);var _iterator352=_createForOfIteratorHelper(_e260.getItems()),_step352;try{for(_iterator352.s();!(_step352=_iterator352.n()).done;){var _n154=_step352.value;if(_n154.is("element","blockQuote")&&!t.checkChild(i.createPositionBefore(_n154),_n154))return i.unwrap(_n154),!0;}}catch(err){_iterator352.e(err);}finally{_iterator352.f();}}}else if("remove"==_e259.type){var _t238=_e259.position.parent;if(_t238.is("element","blockQuote")&&_t238.isEmpty)return i.remove(_t238),!0;}}}catch(err){_iterator351.e(err);}finally{_iterator351.f();}return!1;});var i=this.editor.editing.view.document,n=e.model.document.selection,o=e.commands.get("blockQuote");this.listenTo(i,"enter",function(t,i){if(!n.isCollapsed||!o.value)return;n.getLastPosition().parent.isEmpty&&(e.execute("blockQuote"),e.editing.view.scrollToTheSelection(),i.preventDefault(),t.stop());},{context:"blockquote"}),this.listenTo(i,"delete",function(t,i){if("backward"!=i.direction||!n.isCollapsed||!o.value)return;var r=n.getLastPosition().parent;r.isEmpty&&!r.previousSibling&&(e.execute("blockQuote"),e.editing.view.scrollToTheSelection(),i.preventDefault(),t.stop());},{context:"blockquote"});}}],[{key:"pluginName",get:function get(){return"BlockQuoteEditing";}},{key:"requires",get:function get(){return[Ku,Xu];}}]);return Mm;}(Qe);i(71);var Nm=/*#__PURE__*/function(_Qe39){_inherits(Nm,_Qe39);var _super141=_createSuper(Nm);function Nm(){_classCallCheck(this,Nm);return _super141.apply(this,arguments);}_createClass(Nm,[{key:"init",value:function init(){var _this218=this;var e=this.editor,t=e.t;e.ui.componentFactory.add("blockQuote",function(i){var n=e.commands.get("blockQuote"),o=new Xc(i);return o.set({label:t("Block quote"),icon:Cc.quote,tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(n,"value","isEnabled"),_this218.listenTo(o,"execute",function(){e.execute("blockQuote"),e.editing.view.focus();}),o;});}}],[{key:"pluginName",get:function get(){return"BlockQuoteUI";}}]);return Nm;}(Qe);var Rm=/*#__PURE__*/function(_Qe40){_inherits(Rm,_Qe40);var _super142=_createSuper(Rm);function Rm(){_classCallCheck(this,Rm);return _super142.apply(this,arguments);}_createClass(Rm,[{key:"init",value:function init(){var e=this.editor,t=e.ui.componentFactory,i=e.t;t.add("ckfinder",function(t){var n=e.commands.get("ckfinder"),o=new Xc(t);return o.set({label:i("Insert image or file"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.627 16.5zm5.873-.196zm0-7.001V8h-13v8.5h4.341c.191.54.457 1.044.785 1.5H2a1.5 1.5 0 0 1-1.5-1.5v-13A1.5 1.5 0 0 1 2 2h4.5a1.5 1.5 0 0 1 1.06.44L9.122 4H16a1.5 1.5 0 0 1 1.5 1.5v1A1.5 1.5 0 0 1 19 8v2.531a6.027 6.027 0 0 0-1.5-1.228zM16 6.5v-1H8.5l-2-2H2v13h1V8a1.5 1.5 0 0 1 1.5-1.5H16z"/><path d="M14.5 19.5a5 5 0 1 1 0-10 5 5 0 0 1 0 10zM15 14v-2h-1v2h-2v1h2v2h1v-2h2v-1h-2z"/></svg>',tooltip:!0}),o.bind("isEnabled").to(n),o.on("execute",function(){e.execute("ckfinder"),e.editing.view.focus();}),o;});}}],[{key:"pluginName",get:function get(){return"CKFinderUI";}}]);return Rm;}(Qe);var zm=/*#__PURE__*/function(_Ze12){_inherits(zm,_Ze12);var _super143=_createSuper(zm);function zm(e){var _this219;_classCallCheck(this,zm);_this219=_super143.call(this,e),_this219.stopListening(_this219.editor.model.document,"change"),_this219.listenTo(_this219.editor.model.document,"change",function(){return _this219.refresh();},{priority:"low"});return _this219;}_createClass(zm,[{key:"refresh",value:function refresh(){var e=this.editor.commands.get("insertImage"),t=this.editor.commands.get("link");this.isEnabled=e.isEnabled||t.isEnabled;}},{key:"execute",value:function execute(){var e=this.editor,t=this.editor.config.get("ckfinder.openerMethod")||"modal";if("popup"!=t&&"modal"!=t)throw new l.a("ckfinder-unknown-openermethod",e);var i=this.editor.config.get("ckfinder.options")||{};i.chooseFiles=!0;var n=i.onInit;i.language||(i.language=e.locale.uiLanguage),i.onInit=function(t){n&&n(t),t.on("files:choose",function(i){var n=i.data.files.toArray(),o=n.filter(function(e){return!e.isImage();}),r=n.filter(function(e){return e.isImage();});var _iterator353=_createForOfIteratorHelper(o),_step353;try{for(_iterator353.s();!(_step353=_iterator353.n()).done;){var _t239=_step353.value;e.execute("link",_t239.getUrl());}}catch(err){_iterator353.e(err);}finally{_iterator353.f();}var s=[];var _iterator354=_createForOfIteratorHelper(r),_step354;try{for(_iterator354.s();!(_step354=_iterator354.n()).done;){var _e261=_step354.value;var _i258=_e261.getUrl();s.push(_i258||t.request("file:getProxyUrl",{file:_e261}));}}catch(err){_iterator354.e(err);}finally{_iterator354.f();}s.length&&Om(e,s);}),t.on("file:choose:resizedImage",function(t){var i=t.data.resizedUrl;if(i)Om(e,[i]);else{var _t240=e.plugins.get("Notification"),_i259=e.locale.t;_t240.showWarning(_i259("Could not obtain resized image URL."),{title:_i259("Selecting resized image failed"),namespace:"ckfinder"});}});},window.CKFinder[t](i);}}]);return zm;}(Ze);function Om(e,t){if(e.commands.get("insertImage").isEnabled)e.execute("insertImage",{source:t});else{var _t241=e.plugins.get("Notification"),_i260=e.locale.t;_t241.showWarning(_i260("Could not insert image at the current position."),{title:_i260("Inserting image failed"),namespace:"ckfinder"});}}var Dm=/*#__PURE__*/function(_Qe41){_inherits(Dm,_Qe41);var _super144=_createSuper(Dm);function Dm(){_classCallCheck(this,Dm);return _super144.apply(this,arguments);}_createClass(Dm,[{key:"init",value:function init(){var e=this.editor;if(!e.plugins.has("ImageBlockEditing")&&!e.plugins.has("ImageInlineEditing"))throw new l.a("ckfinder-missing-image-plugin",e);e.commands.add("ckfinder",new zm(e));}}],[{key:"pluginName",get:function get(){return"CKFinderEditing";}},{key:"requires",get:function get(){return[Od,"LinkEditing"];}}]);return Dm;}(Qe);var Lm=/*#__PURE__*/function(_Qe42){_inherits(Lm,_Qe42);var _super145=_createSuper(Lm);function Lm(){_classCallCheck(this,Lm);return _super145.apply(this,arguments);}_createClass(Lm,[{key:"init",value:function init(){var _this220=this;var e=this.editor,t=e.plugins.get("CloudServices"),i=t.token,n=t.uploadUrl;i&&(this._uploadGateway=e.plugins.get("CloudServicesCore").createUploadGateway(i,n),e.plugins.get(lm).createUploadAdapter=function(e){return new Vm(_this220._uploadGateway,e);});}}],[{key:"pluginName",get:function get(){return"CloudServicesUploadAdapter";}},{key:"requires",get:function get(){return["CloudServices",lm];}}]);return Lm;}(Qe);var Vm=/*#__PURE__*/function(){function Vm(e,t){_classCallCheck(this,Vm);this.uploadGateway=e,this.loader=t;}_createClass(Vm,[{key:"upload",value:function upload(){var _this221=this;return this.loader.file.then(function(e){return _this221.fileUploader=_this221.uploadGateway.upload(e),_this221.fileUploader.on("progress",function(e,t){_this221.loader.uploadTotal=t.total,_this221.loader.uploaded=t.uploaded;}),_this221.fileUploader.send();});}},{key:"abort",value:function abort(){this.fileUploader.abort();}}]);return Vm;}();var Bm=/*#__PURE__*/function(_Ze13){_inherits(Bm,_Ze13);var _super146=_createSuper(Bm);function Bm(){_classCallCheck(this,Bm);return _super146.apply(this,arguments);}_createClass(Bm,[{key:"refresh",value:function refresh(){var e=this.editor.model,t=Ns(e.document.selection.getSelectedBlocks());this.value=!!t&&t.is("element","paragraph"),this.isEnabled=!!t&&jm(t,e.schema);}},{key:"execute",value:function execute(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=this.editor.model,i=t.document;t.change(function(n){var o=(e.selection||i.selection).getSelectedBlocks();var _iterator355=_createForOfIteratorHelper(o),_step355;try{for(_iterator355.s();!(_step355=_iterator355.n()).done;){var _e262=_step355.value;!_e262.is("element","paragraph")&&jm(_e262,t.schema)&&n.rename(_e262,"paragraph");}}catch(err){_iterator355.e(err);}finally{_iterator355.f();}});}}]);return Bm;}(Ze);function jm(e,t){return t.checkChild(e.parent,"paragraph")&&!t.isObject(e);}var Fm=/*#__PURE__*/function(_Ze14){_inherits(Fm,_Ze14);var _super147=_createSuper(Fm);function Fm(){_classCallCheck(this,Fm);return _super147.apply(this,arguments);}_createClass(Fm,[{key:"execute",value:function execute(e){var t=this.editor.model;var i=e.position;t.change(function(e){var n=e.createElement("paragraph");if(!t.schema.checkChild(i.parent,n)){var _o96=t.schema.findAllowedParent(i,n);if(!_o96)return;i=e.split(i,_o96).position;}t.insertContent(n,i),e.setSelection(n,"in");});}}]);return Fm;}(Ze);var Hm=/*#__PURE__*/function(_Qe43){_inherits(Hm,_Qe43);var _super148=_createSuper(Hm);function Hm(){_classCallCheck(this,Hm);return _super148.apply(this,arguments);}_createClass(Hm,[{key:"init",value:function init(){var e=this.editor,t=e.model;e.commands.add("paragraph",new Bm(e)),e.commands.add("insertParagraph",new Fm(e)),t.schema.register("paragraph",{inheritAllFrom:"$block"}),e.conversion.elementToElement({model:"paragraph",view:"p"}),e.conversion["for"]("upcast").elementToElement({model:function model(e,_ref56){var t=_ref56.writer;return Hm.paragraphLikeElements.has(e.name)?e.isEmpty?null:t.createElement("paragraph"):null;},view:/.+/,converterPriority:"low"});}}],[{key:"pluginName",get:function get(){return"Paragraph";}}]);return Hm;}(Qe);Hm.paragraphLikeElements=new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"]);var Um=/*#__PURE__*/function(_Ze15){_inherits(Um,_Ze15);var _super149=_createSuper(Um);function Um(e,t){var _this222;_classCallCheck(this,Um);_this222=_super149.call(this,e),_this222.modelElements=t;return _this222;}_createClass(Um,[{key:"refresh",value:function refresh(){var _this223=this;var e=Ns(this.editor.model.document.selection.getSelectedBlocks());this.value=!!e&&this.modelElements.includes(e.name)&&e.name,this.isEnabled=!!e&&this.modelElements.some(function(t){return Wm(e,t,_this223.editor.model.schema);});}},{key:"execute",value:function execute(e){var t=this.editor.model,i=t.document,n=e.value;t.change(function(e){var o=Array.from(i.selection.getSelectedBlocks()).filter(function(e){return Wm(e,n,t.schema);});var _iterator356=_createForOfIteratorHelper(o),_step356;try{for(_iterator356.s();!(_step356=_iterator356.n()).done;){var _t242=_step356.value;_t242.is("element",n)||e.rename(_t242,n);}}catch(err){_iterator356.e(err);}finally{_iterator356.f();}});}}]);return Um;}(Ze);function Wm(e,t,i){return i.checkChild(e.parent,t)&&!i.isObject(e);}var qm=/*#__PURE__*/function(_Qe44){_inherits(qm,_Qe44);var _super150=_createSuper(qm);function qm(e){var _this224;_classCallCheck(this,qm);_this224=_super150.call(this,e),e.config.define("heading",{options:[{model:"paragraph",title:"Paragraph","class":"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1","class":"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2","class":"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3","class":"ck-heading_heading3"}]});return _this224;}_createClass(qm,[{key:"init",value:function init(){var e=this.editor,t=e.config.get("heading.options"),i=[];var _iterator357=_createForOfIteratorHelper(t),_step357;try{for(_iterator357.s();!(_step357=_iterator357.n()).done;){var _n155=_step357.value;"paragraph"!==_n155.model&&(e.model.schema.register(_n155.model,{inheritAllFrom:"$block"}),e.conversion.elementToElement(_n155),i.push(_n155.model));}}catch(err){_iterator357.e(err);}finally{_iterator357.f();}this._addDefaultH1Conversion(e),e.commands.add("heading",new Um(e,i));}},{key:"afterInit",value:function afterInit(){var e=this.editor,t=e.commands.get("enter"),i=e.config.get("heading.options");t&&this.listenTo(t,"afterExecute",function(t,n){var o=e.model.document.selection.getFirstPosition().parent;i.some(function(e){return o.is("element",e.model);})&&!o.is("element","paragraph")&&0===o.childCount&&n.writer.rename(o,"paragraph");});}},{key:"_addDefaultH1Conversion",value:function _addDefaultH1Conversion(e){e.conversion["for"]("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:a.get("low")+1});}}],[{key:"pluginName",get:function get(){return"HeadingEditing";}},{key:"requires",get:function get(){return[Hm];}}]);return qm;}(Qe);i(13);var $m=/*#__PURE__*/function(_Qe45){_inherits($m,_Qe45);var _super151=_createSuper($m);function $m(){_classCallCheck(this,$m);return _super151.apply(this,arguments);}_createClass($m,[{key:"init",value:function init(){var _this225=this;var e=this.editor,t=e.t,i=function(e){var t=e.t,i={Paragraph:t("Paragraph"),"Heading 1":t("Heading 1"),"Heading 2":t("Heading 2"),"Heading 3":t("Heading 3"),"Heading 4":t("Heading 4"),"Heading 5":t("Heading 5"),"Heading 6":t("Heading 6")};return e.config.get("heading.options").map(function(e){var t=i[e.title];return t&&t!=e.title&&(e.title=t),e;});}(e),n=t("Choose heading"),o=t("Heading");e.ui.componentFactory.add("heading",function(t){var r={},s=new Zi(),a=e.commands.get("heading"),l=e.commands.get("paragraph"),c=[a];var _iterator358=_createForOfIteratorHelper(i),_step358;try{var _loop8=function _loop8(){var e=_step358.value;var t={type:"button",model:new Dd({label:e.title,"class":e["class"],withText:!0})};"paragraph"===e.model?(t.model.bind("isOn").to(l,"value"),t.model.set("commandName","paragraph"),c.push(l)):(t.model.bind("isOn").to(a,"value",function(t){return t===e.model;}),t.model.set({commandName:"heading",commandValue:e.model})),s.add(t),r[e.model]=e.title;};for(_iterator358.s();!(_step358=_iterator358.n()).done;){_loop8();}}catch(err){_iterator358.e(err);}finally{_iterator358.f();}var d=Cd(t);return Ed(d,s),d.buttonView.set({isOn:!1,withText:!0,tooltip:o}),d.extendTemplate({attributes:{"class":["ck-heading-dropdown"]}}),d.bind("isEnabled").toMany(c,"isEnabled",function(){for(var _len24=arguments.length,e=new Array(_len24),_key24=0;_key24<_len24;_key24++){e[_key24]=arguments[_key24];}return e.some(function(e){return e;});}),d.buttonView.bind("label").to(a,"value",l,"value",function(e,t){var i=e||t&&"paragraph";return r[i]?r[i]:n;}),_this225.listenTo(d,"execute",function(t){e.execute(t.source.commandName,t.source.commandValue?{value:t.source.commandValue}:void 0),e.editing.view.focus();}),d;});}}],[{key:"pluginName",get:function get(){return"HeadingUI";}}]);return $m;}(Qe);var Ym=/*#__PURE__*/function(_Qe46){_inherits(Ym,_Qe46);var _super152=_createSuper(Ym);function Ym(){_classCallCheck(this,Ym);return _super152.apply(this,arguments);}_createClass(Ym,[{key:"init",value:function init(){var _this226=this;var e=this.editor;if(e.plugins.has("BalloonToolbar")){var _t243=e.plugins.get("BalloonToolbar");this.listenTo(_t243,"show",function(t){(function(e){var t=e.getSelectedElement();return!(!t||!oh(t));})(e.editing.view.document.selection)&&t.stop();},{priority:"high"});}this._toolbarDefinitions=new Map(),this._balloon=this.editor.plugins.get("ContextualBalloon"),this.on("change:isEnabled",function(){_this226._updateToolbarsVisibility();}),this.listenTo(e.ui,"update",function(){_this226._updateToolbarsVisibility();}),this.listenTo(e.ui.focusTracker,"change:isFocused",function(){_this226._updateToolbarsVisibility();},{priority:"low"});}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Ym.prototype),"destroy",this).call(this);var _iterator359=_createForOfIteratorHelper(this._toolbarDefinitions.values()),_step359;try{for(_iterator359.s();!(_step359=_iterator359.n()).done;){var _e263=_step359.value;_e263.view.destroy();}}catch(err){_iterator359.e(err);}finally{_iterator359.f();}}},{key:"register",value:function register(e,_ref57){var t=_ref57.ariaLabel,i=_ref57.items,n=_ref57.getRelatedElement,_ref57$balloonClassNa=_ref57.balloonClassName,o=_ref57$balloonClassNa===void 0?"ck-toolbar-container":_ref57$balloonClassNa;if(!i.length)return void Object(l.b)("widget-toolbar-no-items",{toolbarId:e});var r=this.editor,s=r.t,a=new wd(r.locale);if(a.ariaLabel=t||s("Widget toolbar"),this._toolbarDefinitions.has(e))throw new l.a("widget-toolbar-duplicated",this,{toolbarId:e});a.fillFromConfig(i,r.ui.componentFactory),this._toolbarDefinitions.set(e,{view:a,getRelatedElement:n,balloonClassName:o});}},{key:"_updateToolbarsVisibility",value:function _updateToolbarsVisibility(){var e=0,t=null,i=null;var _iterator360=_createForOfIteratorHelper(this._toolbarDefinitions.values()),_step360;try{for(_iterator360.s();!(_step360=_iterator360.n()).done;){var _n156=_step360.value;var _o97=_n156.getRelatedElement(this.editor.editing.view.document.selection);if(this.isEnabled&&_o97){if(this.editor.ui.focusTracker.isFocused){var _r54=_o97.getAncestors().length;_r54>e&&(e=_r54,t=_o97,i=_n156);}else this._isToolbarVisible(_n156)&&this._hideToolbar(_n156);}else this._isToolbarInBalloon(_n156)&&this._hideToolbar(_n156);}}catch(err){_iterator360.e(err);}finally{_iterator360.f();}i&&this._showToolbar(i,t);}},{key:"_hideToolbar",value:function _hideToolbar(e){this._balloon.remove(e.view),this.stopListening(this._balloon,"change:visibleView");}},{key:"_showToolbar",value:function _showToolbar(e,t){var _this227=this;this._isToolbarVisible(e)?Gm(this.editor,t):this._isToolbarInBalloon(e)||(this._balloon.add({view:e.view,position:Km(this.editor,t),balloonClassName:e.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",function(){var _iterator361=_createForOfIteratorHelper(_this227._toolbarDefinitions.values()),_step361;try{for(_iterator361.s();!(_step361=_iterator361.n()).done;){var _e264=_step361.value;if(_this227._isToolbarVisible(_e264)){var _t244=_e264.getRelatedElement(_this227.editor.editing.view.document.selection);Gm(_this227.editor,_t244);}}}catch(err){_iterator361.e(err);}finally{_iterator361.f();}}));}},{key:"_isToolbarVisible",value:function _isToolbarVisible(e){return this._balloon.visibleView===e.view;}},{key:"_isToolbarInBalloon",value:function _isToolbarInBalloon(e){return this._balloon.hasView(e.view);}}],[{key:"requires",get:function get(){return[Wd];}},{key:"pluginName",get:function get(){return"WidgetToolbarRepository";}}]);return Ym;}(Qe);function Gm(e,t){var i=e.plugins.get("ContextualBalloon"),n=Km(e,t);i.updatePosition(n);}function Km(e,t){var i=e.editing.view,n=Bd.defaultPositions;return{target:i.domConverter.mapViewToDom(t),positions:[n.northArrowSouth,n.northArrowSouthWest,n.northArrowSouthEast,n.southArrowNorth,n.southArrowNorthWest,n.southArrowNorthEast,hh]};}var Qm=/*#__PURE__*/function(){function Qm(e){_classCallCheck(this,Qm);this.set("activeHandlePosition",null),this.set("proposedWidthPercents",null),this.set("proposedWidth",null),this.set("proposedHeight",null),this.set("proposedHandleHostWidth",null),this.set("proposedHandleHostHeight",null),this._options=e,this._referenceCoordinates=null;}_createClass(Qm,[{key:"begin",value:function begin(e,t,i){var n=new Cs(t);this.activeHandlePosition=function(e){var t=["top-left","top-right","bottom-right","bottom-left"];for(var _i261=0,_t245=t;_i261<_t245.length;_i261++){var _i262=_t245[_i261];if(e.classList.contains("ck-widget__resizer__handle-"+_i262))return _i262;}}(e),this._referenceCoordinates=function(e,t){var i=new Cs(e),n=t.split("-"),o={x:"right"==n[1]?i.right:i.left,y:"bottom"==n[0]?i.bottom:i.top};return o.x+=e.ownerDocument.defaultView.scrollX,o.y+=e.ownerDocument.defaultView.scrollY,o;}(t,function(e){var t=e.split("-"),i={top:"bottom",bottom:"top",left:"right",right:"left"};return"".concat(i[t[0]],"-").concat(i[t[1]]);}(this.activeHandlePosition)),this.originalWidth=n.width,this.originalHeight=n.height,this.aspectRatio=n.width/n.height;var o=i.style.width;o&&o.match(/^\d+(\.\d*)?%$/)?this.originalWidthPercents=parseFloat(o):this.originalWidthPercents=function(e,t){var i=e.parentElement,n=parseFloat(i.ownerDocument.defaultView.getComputedStyle(i).width);return t.width/n*100;}(i,n);}},{key:"update",value:function update(e){this.proposedWidth=e.width,this.proposedHeight=e.height,this.proposedWidthPercents=e.widthPercents,this.proposedHandleHostWidth=e.handleHostWidth,this.proposedHandleHostHeight=e.handleHostHeight;}}]);return Qm;}();Ke(Qm,Ue);var Jm=/*#__PURE__*/function(_Pc26){_inherits(Jm,_Pc26);var _super153=_createSuper(Jm);function Jm(){var _this228;_classCallCheck(this,Jm);_this228=_super153.call(this);var e=_this228.bindTemplate;_this228.setTemplate({tag:"div",attributes:{"class":["ck","ck-size-view",e.to("_viewPosition",function(e){return e?"ck-orientation-"+e:"";})],style:{display:e["if"]("_isVisible","none",function(e){return!e;})}},children:[{text:e.to("_label")}]});return _this228;}_createClass(Jm,[{key:"_bindToState",value:function _bindToState(e,t){this.bind("_isVisible").to(t,"proposedWidth",t,"proposedHeight",function(e,t){return null!==e&&null!==t;}),this.bind("_label").to(t,"proposedHandleHostWidth",t,"proposedHandleHostHeight",t,"proposedWidthPercents",function(t,i,n){return"px"===e.unit?"".concat(t,"\xD7").concat(i):n+"%";}),this.bind("_viewPosition").to(t,"activeHandlePosition",t,"proposedHandleHostWidth",t,"proposedHandleHostHeight",function(e,t,i){return t<50||i<50?"above-center":e;});}},{key:"_dismiss",value:function _dismiss(){this.unbind(),this._isVisible=!1;}}]);return Jm;}(Pc);var Zm=/*#__PURE__*/function(){function Zm(e){var _this229=this;_classCallCheck(this,Zm);this._options=e,this._viewResizerWrapper=null,this.set("isEnabled",!0),this.decorate("begin"),this.decorate("cancel"),this.decorate("commit"),this.decorate("updateSize"),this.on("commit",function(e){_this229.state.proposedWidth||_this229.state.proposedWidthPercents||(_this229._cleanup(),e.stop());},{priority:"high"}),this.on("change:isEnabled",function(){_this229.isEnabled&&_this229.redraw();});}_createClass(Zm,[{key:"attach",value:function attach(){var _this230=this;var e=this,t=this._options.viewElement;this._options.editor.editing.view.change(function(i){var n=i.createUIElement("div",{"class":"ck ck-reset_all ck-widget__resizer"},function(t){var i=this.toDomElement(t);return e._appendHandles(i),e._appendSizeUI(i),e.on("change:isEnabled",function(e,t,n){i.style.display=n?"":"none";}),i.style.display=e.isEnabled?"":"none",i;});i.insert(i.createPositionAt(t,"end"),n),i.addClass("ck-widget_with-resizer",t),_this230._viewResizerWrapper=n;});}},{key:"begin",value:function begin(e){this.state=new Qm(this._options),this._sizeView._bindToState(this._options,this.state),this._initialViewWidth=this._options.viewElement.getStyle("width"),this.state.begin(e,this._getHandleHost(),this._getResizeHost());}},{key:"updateSize",value:function updateSize(e){var _this231=this;var t=this._proposeNewSize(e);this._options.editor.editing.view.change(function(e){var i=_this231._options.unit||"%",n=("%"===i?t.widthPercents:t.width)+i;e.setStyle("width",n,_this231._options.viewElement);});var i=this._getHandleHost(),n=new Cs(i);t.handleHostWidth=Math.round(n.width),t.handleHostHeight=Math.round(n.height);var o=new Cs(i);t.width=Math.round(o.width),t.height=Math.round(o.height),this.redraw(n),this.state.update(t);}},{key:"commit",value:function commit(){var _this232=this;var e=this._options.unit||"%",t=("%"===e?this.state.proposedWidthPercents:this.state.proposedWidth)+e;this._options.editor.editing.view.change(function(){_this232._cleanup(),_this232._options.onCommit(t);});}},{key:"cancel",value:function cancel(){this._cleanup();}},{key:"destroy",value:function destroy(){this.cancel();}},{key:"redraw",value:function redraw(e){var t=this._domResizerWrapper;if(!((i=t)&&i.ownerDocument&&i.ownerDocument.contains(i)))return;var i;var n=t.parentElement,o=this._getHandleHost(),r=this._viewResizerWrapper,s=[r.getStyle("width"),r.getStyle("height"),r.getStyle("left"),r.getStyle("top")];var a;if(n.isSameNode(o)){var _t246=e||new Cs(o);a=[_t246.width+"px",_t246.height+"px",void 0,void 0];}else a=[o.offsetWidth+"px",o.offsetHeight+"px",o.offsetLeft+"px",o.offsetTop+"px"];"same"!==ln(s,a)&&this._options.editor.editing.view.change(function(e){e.setStyle({width:a[0],height:a[1],left:a[2],top:a[3]},r);});}},{key:"containsHandle",value:function containsHandle(e){return this._domResizerWrapper.contains(e);}},{key:"_cleanup",value:function _cleanup(){var _this233=this;this._sizeView._dismiss();this._options.editor.editing.view.change(function(e){e.setStyle("width",_this233._initialViewWidth,_this233._options.viewElement);});}},{key:"_proposeNewSize",value:function _proposeNewSize(e){var t=this.state,i={x:(n=e).pageX,y:n.pageY};var n;var o=!this._options.isCentered||this._options.isCentered(this),r={x:t._referenceCoordinates.x-(i.x+t.originalWidth),y:i.y-t.originalHeight-t._referenceCoordinates.y};o&&t.activeHandlePosition.endsWith("-right")&&(r.x=i.x-(t._referenceCoordinates.x+t.originalWidth)),o&&(r.x*=2);var s={width:Math.abs(t.originalWidth+r.x),height:Math.abs(t.originalHeight+r.y)};s.dominant=s.width/t.aspectRatio>s.height?"width":"height",s.max=s[s.dominant];var a={width:s.width,height:s.height};return"width"==s.dominant?a.height=a.width/t.aspectRatio:a.width=a.height*t.aspectRatio,{width:Math.round(a.width),height:Math.round(a.height),widthPercents:Math.min(Math.round(t.originalWidthPercents/t.originalWidth*a.width*100)/100,100)};}},{key:"_getResizeHost",value:function _getResizeHost(){var e=this._domResizerWrapper.parentElement;return this._options.getResizeHost(e);}},{key:"_getHandleHost",value:function _getHandleHost(){var e=this._domResizerWrapper.parentElement;return this._options.getHandleHost(e);}},{key:"_domResizerWrapper",get:function get(){return this._options.editor.editing.view.domConverter.mapViewToDom(this._viewResizerWrapper);}},{key:"_appendHandles",value:function _appendHandles(e){var t=["top-left","top-right","bottom-right","bottom-left"];for(var _i263=0,_t247=t;_i263<_t247.length;_i263++){var _n157=_t247[_i263];e.appendChild(new Mc({tag:"div",attributes:{"class":"ck-widget__resizer__handle "+(i=_n157,"ck-widget__resizer__handle-"+i)}}).render());}var i;}},{key:"_appendSizeUI",value:function _appendSizeUI(e){this._sizeView=new Jm(),this._sizeView.render(),e.appendChild(this._sizeView.element);}}],[{key:"isResizeHandle",value:function isResizeHandle(e){return e.classList.contains("ck-widget__resizer__handle");}}]);return Zm;}();Ke(Zm,Ue);i(74);var Xm=/*#__PURE__*/function(_Qe47){_inherits(Xm,_Qe47);var _super154=_createSuper(Xm);function Xm(){_classCallCheck(this,Xm);return _super154.apply(this,arguments);}_createClass(Xm,[{key:"init",value:function init(){var _this234=this;var e=this.editor.editing,t=vr.window.document;this.set("visibleResizer",null),this.set("_activeResizer",null),this._resizers=new Map(),e.view.addObserver(uu),this._observer=Object.create(Mr),this.listenTo(e.view.document,"mousedown",this._mouseDownListener.bind(this),{priority:"high"}),this._observer.listenTo(t,"mousemove",this._mouseMoveListener.bind(this)),this._observer.listenTo(t,"mouseup",this._mouseUpListener.bind(this));var i=function i(){_this234.visibleResizer&&_this234.visibleResizer.redraw();};this._redrawFocusedResizerThrottled=Th(i,200),this.on("change:visibleResizer",i),this.editor.ui.on("update",this._redrawFocusedResizerThrottled),this.editor.model.document.on("change",function(){var _iterator362=_createForOfIteratorHelper(_this234._resizers),_step362;try{for(_iterator362.s();!(_step362=_iterator362.n()).done;){var _step362$value=_slicedToArray(_step362.value,2),_e265=_step362$value[0],_t248=_step362$value[1];_e265.isAttached()||(_this234._resizers["delete"](_e265),_t248.destroy());}}catch(err){_iterator362.e(err);}finally{_iterator362.f();}},{priority:"lowest"}),this._observer.listenTo(vr.window,"resize",this._redrawFocusedResizerThrottled);var n=this.editor.editing.view.document.selection;n.on("change",function(){var e=n.getSelectedElement();_this234.visibleResizer=_this234.getResizerByViewElement(e)||null;});}},{key:"destroy",value:function destroy(){this._observer.stopListening();var _iterator363=_createForOfIteratorHelper(this._resizers.values()),_step363;try{for(_iterator363.s();!(_step363=_iterator363.n()).done;){var _e266=_step363.value;_e266.destroy();}}catch(err){_iterator363.e(err);}finally{_iterator363.f();}this._redrawFocusedResizerThrottled.cancel();}},{key:"attachTo",value:function attachTo(e){var t=new Zm(e),i=this.editor.plugins;if(t.attach(),i.has("WidgetToolbarRepository")){var _e267=i.get("WidgetToolbarRepository");t.on("begin",function(){_e267.forceDisabled("resize");},{priority:"lowest"}),t.on("cancel",function(){_e267.clearForceDisabled("resize");},{priority:"highest"}),t.on("commit",function(){_e267.clearForceDisabled("resize");},{priority:"highest"});}this._resizers.set(e.viewElement,t);var n=this.editor.editing.view.document.selection.getSelectedElement();return this.getResizerByViewElement(n)==t&&(this.visibleResizer=t),t;}},{key:"getResizerByViewElement",value:function getResizerByViewElement(e){return this._resizers.get(e);}},{key:"_getResizerByHandle",value:function _getResizerByHandle(e){var _iterator364=_createForOfIteratorHelper(this._resizers.values()),_step364;try{for(_iterator364.s();!(_step364=_iterator364.n()).done;){var _t249=_step364.value;if(_t249.containsHandle(e))return _t249;}}catch(err){_iterator364.e(err);}finally{_iterator364.f();}}},{key:"_mouseDownListener",value:function _mouseDownListener(e,t){var i=t.domTarget;Zm.isResizeHandle(i)&&(this._activeResizer=this._getResizerByHandle(i),this._activeResizer&&(this._activeResizer.begin(i),e.stop(),t.preventDefault()));}},{key:"_mouseMoveListener",value:function _mouseMoveListener(e,t){this._activeResizer&&this._activeResizer.updateSize(t);}},{key:"_mouseUpListener",value:function _mouseUpListener(){this._activeResizer&&(this._activeResizer.commit(),this._activeResizer=null);}}],[{key:"pluginName",get:function get(){return"WidgetResize";}}]);return Xm;}(Qe);Ke(Xm,Ue);var ef=/*#__PURE__*/function(_Ze16){_inherits(ef,_Ze16);var _super155=_createSuper(ef);function ef(){_classCallCheck(this,ef);return _super155.apply(this,arguments);}_createClass(ef,[{key:"refresh",value:function refresh(){var e=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!e,this.isEnabled&&e.hasAttribute("alt")?this.value=e.getAttribute("alt"):this.value=!1;}},{key:"execute",value:function execute(e){var t=this.editor,i=t.plugins.get("ImageUtils"),n=t.model,o=i.getClosestSelectedImageElement(n.document.selection);n.change(function(t){t.setAttribute("alt",e.newValue,o);});}}]);return ef;}(Ze);function tf(e,t){var i=e.createEmptyElement("img"),n="imageBlock"===t?e.createContainerElement("figure",{"class":"image"}):e.createContainerElement("span",{"class":"image-inline"},{isAllowedInsideAttributeElement:!0});return e.insert(e.createPositionAt(n,0),i),n;}function nf(e,t){if(e.plugins.has("ImageInlineEditing")!==e.plugins.has("ImageBlockEditing"))return{name:"img",attributes:{src:!0}};var i=e.plugins.get("ImageUtils");return function(e){if(!i.isInlineImageView(e)||!e.hasAttribute("src"))return null;return(e.findAncestor(i.isBlockImageView)?"imageBlock":"imageInline")!==t?null:{name:!0,attributes:["src"]};};}function of(e,t){var i=Ns(t.getSelectedBlocks());return!i||e.isObject(i)||i.isEmpty&&"listItem"!=i.name?"imageBlock":"imageInline";}var rf=/*#__PURE__*/function(_Qe48){_inherits(rf,_Qe48);var _super156=_createSuper(rf);function rf(){_classCallCheck(this,rf);return _super156.apply(this,arguments);}_createClass(rf,[{key:"isImage",value:function isImage(e){return this.isInlineImage(e)||this.isBlockImage(e);}},{key:"isInlineImageView",value:function isInlineImageView(e){return!!e&&e.is("element","img");}},{key:"isBlockImageView",value:function isBlockImageView(e){return!!e&&e.is("element","figure")&&e.hasClass("image");}},{key:"insertImage",value:function insertImage(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var n=this.editor,o=n.model,r=o.document.selection;i=sf(n,t||r,i),e=_objectSpread(_objectSpread({},Object.fromEntries(r.getAttributes())),e);for(var _t250 in e){o.schema.checkAttribute(i,_t250)||delete e[_t250];}return o.change(function(n){var s=n.createElement(i,e);return t||"imageInline"==i||(t=uh(r,o)),o.insertContent(s,t),s.parent?(n.setSelection(s,"on"),s):null;});}},{key:"getClosestSelectedImageWidget",value:function getClosestSelectedImageWidget(e){var t=e.getSelectedElement();if(t&&this.isImageWidget(t))return t;var i=e.getFirstPosition().parent;for(;i;){if(i.is("element")&&this.isImageWidget(i))return i;i=i.parent;}return null;}},{key:"getClosestSelectedImageElement",value:function getClosestSelectedImageElement(e){var t=e.getSelectedElement();return this.isImage(t)?t:e.getFirstPosition().findAncestor("imageBlock");}},{key:"isImageAllowed",value:function isImageAllowed(){var e=this.editor.model.document.selection;return function(e,t){if("imageBlock"==sf(e,t)){var _i264=function(e,t){var i=uh(e,t).start.parent;if(i.isEmpty&&!i.is("element","$root"))return i.parent;return i;}(t,e.model);if(e.model.schema.checkChild(_i264,"imageBlock"))return!0;}else if(e.model.schema.checkChild(t.focus,"imageInline"))return!0;return!1;}(this.editor,e)&&function(e){return _toConsumableArray(e.focus.getAncestors()).every(function(e){return!e.is("element","imageBlock");});}(e);}},{key:"toImageWidget",value:function toImageWidget(e,t,i){var _this235=this;t.setCustomProperty("image",!0,e);return rh(e,t,{label:function label(){var t=_this235.findViewImgElement(e).getAttribute("alt");return t?"".concat(t," ").concat(i):i;}});}},{key:"isImageWidget",value:function isImageWidget(e){return!!e.getCustomProperty("image")&&oh(e);}},{key:"isBlockImage",value:function isBlockImage(e){return!!e&&e.is("element","imageBlock");}},{key:"isInlineImage",value:function isInlineImage(e){return!!e&&e.is("element","imageInline");}},{key:"findViewImgElement",value:function findViewImgElement(e){if(this.isInlineImageView(e))return e;var t=this.editor.editing.view;var _iterator365=_createForOfIteratorHelper(t.createRangeIn(e)),_step365;try{for(_iterator365.s();!(_step365=_iterator365.n()).done;){var _i265=_step365.value.item;if(this.isInlineImageView(_i265))return _i265;}}catch(err){_iterator365.e(err);}finally{_iterator365.f();}}}],[{key:"pluginName",get:function get(){return"ImageUtils";}}]);return rf;}(Qe);function sf(e,t,i){var n=e.model.schema,o=e.config.get("image.insert.type");return e.plugins.has("ImageBlockEditing")?e.plugins.has("ImageInlineEditing")?i||("inline"===o?"imageInline":"block"===o?"imageBlock":t.is("selection")?of(n,t):n.checkChild(t,"imageInline")?"imageInline":"imageBlock"):"imageBlock":"imageInline";}var af=/*#__PURE__*/function(_Qe49){_inherits(af,_Qe49);var _super157=_createSuper(af);function af(){_classCallCheck(this,af);return _super157.apply(this,arguments);}_createClass(af,[{key:"init",value:function init(){this.editor.commands.add("imageTextAlternative",new ef(this.editor));}}],[{key:"requires",get:function get(){return[rf];}},{key:"pluginName",get:function get(){return"ImageTextAlternativeEditing";}}]);return af;}(Qe);i(76),i(7);var lf=/*#__PURE__*/function(_Pc27){_inherits(lf,_Pc27);var _super158=_createSuper(lf);function lf(e){var _this236;_classCallCheck(this,lf);_this236=_super158.call(this,e);var t=_this236.locale.t;_this236.focusTracker=new Rs(),_this236.keystrokes=new zs(),_this236.labeledInput=_this236._createLabeledInputView(),_this236.saveButtonView=_this236._createButton(t("Save"),Cc.check,"ck-button-save"),_this236.saveButtonView.type="submit",_this236.cancelButtonView=_this236._createButton(t("Cancel"),Cc.cancel,"ck-button-cancel","cancel"),_this236._focusables=new Sc(),_this236._focusCycler=new nd({focusables:_this236._focusables,focusTracker:_this236.focusTracker,keystrokeHandler:_this236.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),_this236.setTemplate({tag:"form",attributes:{"class":["ck","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:[_this236.labeledInput,_this236.saveButtonView,_this236.cancelButtonView]}),Ec(_assertThisInitialized(_this236));return _this236;}_createClass(lf,[{key:"render",value:function render(){var _this237=this;_get(_getPrototypeOf(lf.prototype),"render",this).call(this),this.keystrokes.listenTo(this.element),Ic({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(function(e){_this237._focusables.add(e),_this237.focusTracker.add(e.element);});}},{key:"_createButton",value:function _createButton(e,t,i,n){var o=new Xc(this.locale);return o.set({label:e,icon:t,tooltip:!0}),o.extendTemplate({attributes:{"class":i}}),n&&o.delegate("execute").to(this,n),o;}},{key:"_createLabeledInputView",value:function _createLabeledInputView(){var e=this.locale.t,t=new Rd(this.locale,zd);return t.label=e("Text alternative"),t;}}]);return lf;}(Pc);function cf(e){var t=e.editing.view,i=Bd.defaultPositions,n=e.plugins.get("ImageUtils");return{target:t.domConverter.viewToDom(n.getClosestSelectedImageWidget(t.document.selection)),positions:[i.northArrowSouth,i.northArrowSouthWest,i.northArrowSouthEast,i.southArrowNorth,i.southArrowNorthWest,i.southArrowNorthEast]};}var df=/*#__PURE__*/function(_Qe50){_inherits(df,_Qe50);var _super159=_createSuper(df);function df(){_classCallCheck(this,df);return _super159.apply(this,arguments);}_createClass(df,[{key:"init",value:function init(){this._createButton(),this._createForm();}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(df.prototype),"destroy",this).call(this),this._form.destroy();}},{key:"_createButton",value:function _createButton(){var _this238=this;var e=this.editor,t=e.t;e.ui.componentFactory.add("imageTextAlternative",function(i){var n=e.commands.get("imageTextAlternative"),o=new Xc(i);return o.set({label:t("Change image text alternative"),icon:Cc.lowVision,tooltip:!0}),o.bind("isEnabled").to(n,"isEnabled"),_this238.listenTo(o,"execute",function(){_this238._showForm();}),o;});}},{key:"_createForm",value:function _createForm(){var _this239=this;var e=this.editor,t=e.editing.view.document,i=e.plugins.get("ImageUtils");this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new lf(e.locale),this._form.render(),this.listenTo(this._form,"submit",function(){e.execute("imageTextAlternative",{newValue:_this239._form.labeledInput.fieldView.element.value}),_this239._hideForm(!0);}),this.listenTo(this._form,"cancel",function(){_this239._hideForm(!0);}),this._form.keystrokes.set("Esc",function(e,t){_this239._hideForm(!0),t();}),this.listenTo(e.ui,"update",function(){i.getClosestSelectedImageWidget(t.selection)?_this239._isVisible&&function(e){var t=e.plugins.get("ContextualBalloon");if(e.plugins.get("ImageUtils").getClosestSelectedImageWidget(e.editing.view.document.selection)){var _i266=cf(e);t.updatePosition(_i266);}}(e):_this239._hideForm(!0);}),Tc({emitter:this._form,activator:function activator(){return _this239._isVisible;},contextElements:[this._balloon.view.element],callback:function callback(){return _this239._hideForm();}});}},{key:"_showForm",value:function _showForm(){if(this._isVisible)return;var e=this.editor,t=e.commands.get("imageTextAlternative"),i=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:cf(e)}),i.fieldView.value=i.fieldView.element.value=t.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions();}},{key:"_hideForm",value:function _hideForm(e){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus());}},{key:"_isVisible",get:function get(){return this._balloon.visibleView===this._form;}},{key:"_isInBalloon",get:function get(){return this._balloon.hasView(this._form);}}],[{key:"requires",get:function get(){return[Wd];}},{key:"pluginName",get:function get(){return"ImageTextAlternativeUI";}}]);return df;}(Qe);var uf=/*#__PURE__*/function(_Qe51){_inherits(uf,_Qe51);var _super160=_createSuper(uf);function uf(){_classCallCheck(this,uf);return _super160.apply(this,arguments);}_createClass(uf,null,[{key:"requires",get:function get(){return[af,df];}},{key:"pluginName",get:function get(){return"ImageTextAlternative";}}]);return uf;}(Qe);function hf(e,t){return function(e){e.on("attribute:srcset:"+t,i);};function i(t,i,n){if(!n.consumable.consume(i.item,t.name))return;var o=n.writer,r=n.mapper.toViewElement(i.item),s=e.findViewImgElement(r);if(null===i.attributeNewValue){var _e268=i.attributeOldValue;_e268.data&&(o.removeAttribute("srcset",s),o.removeAttribute("sizes",s),_e268.width&&o.removeAttribute("width",s));}else{var _e269=i.attributeNewValue;_e269.data&&(o.setAttribute("srcset",_e269.data,s),o.setAttribute("sizes","100vw",s),_e269.width&&o.setAttribute("width",_e269.width,s));}}}function gf(e,t,i){return function(e){e.on("attribute:".concat(i,":").concat(t),n);};function n(t,i,n){if(!n.consumable.consume(i.item,t.name))return;var o=n.writer,r=n.mapper.toViewElement(i.item),s=e.findViewImgElement(r);o.setAttribute(i.attributeKey,i.attributeNewValue||"",s);}}var mf=/*#__PURE__*/function(_zr8){_inherits(mf,_zr8);var _super161=_createSuper(mf);function mf(){_classCallCheck(this,mf);return _super161.apply(this,arguments);}_createClass(mf,[{key:"observe",value:function observe(e){var _this240=this;this.listenTo(e,"load",function(e,t){var i=t.target;_this240.checkShouldIgnoreEventFromTarget(i)||"IMG"==i.tagName&&_this240._fireEvents(t);},{useCapture:!0});}},{key:"_fireEvents",value:function _fireEvents(e){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",e));}}]);return mf;}(zr);var ff=/*#__PURE__*/function(_Ze17){_inherits(ff,_Ze17);var _super162=_createSuper(ff);function ff(e){var _this241;_classCallCheck(this,ff);_this241=_super162.call(this,e);var t=e.config.get("image.insert.type");e.plugins.has("ImageBlockEditing")||"block"===t&&Object(l.b)("image-block-plugin-required"),e.plugins.has("ImageInlineEditing")||"inline"===t&&Object(l.b)("image-inline-plugin-required");return _this241;}_createClass(ff,[{key:"refresh",value:function refresh(){this.isEnabled=this.editor.plugins.get("ImageUtils").isImageAllowed();}},{key:"execute",value:function execute(e){var _this242=this;var t=en(e.source),i=this.editor.model.document.selection,n=this.editor.plugins.get("ImageUtils"),o=Object.fromEntries(i.getAttributes());t.forEach(function(e,t){var r=i.getSelectedElement();if("string"==typeof e&&(e={src:e}),t&&r&&n.isImage(r)){var _t251=_this242.editor.model.createPositionAfter(r);n.insertImage(_objectSpread(_objectSpread({},e),o),_t251);}else n.insertImage(_objectSpread(_objectSpread({},e),o));});}}]);return ff;}(Ze);var pf=/*#__PURE__*/function(_Qe52){_inherits(pf,_Qe52);var _super163=_createSuper(pf);function pf(){_classCallCheck(this,pf);return _super163.apply(this,arguments);}_createClass(pf,[{key:"init",value:function init(){var e=this.editor,t=e.conversion;e.editing.view.addObserver(mf),t["for"]("upcast").attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:{key:"srcset",value:function value(e){var t={data:e.getAttribute("srcset")};return e.hasAttribute("width")&&(t.width=e.getAttribute("width")),t;}}});var i=new ff(e);e.commands.add("insertImage",i),e.commands.add("imageInsert",i);}}],[{key:"requires",get:function get(){return[rf];}},{key:"pluginName",get:function get(){return"ImageEditing";}}]);return pf;}(Qe);var bf=/*#__PURE__*/function(_Ze18){_inherits(bf,_Ze18);var _super164=_createSuper(bf);function bf(e,t){var _this243;_classCallCheck(this,bf);_this243=_super164.call(this,e),_this243._modelElementName=t;return _this243;}_createClass(bf,[{key:"refresh",value:function refresh(){var e=this.editor.plugins.get("ImageUtils"),t=e.getClosestSelectedImageElement(this.editor.model.document.selection);"imageBlock"===this._modelElementName?this.isEnabled=e.isInlineImage(t):this.isEnabled=e.isBlockImage(t);}},{key:"execute",value:function execute(){var _this244=this;var e=this.editor,t=this.editor.model,i=e.plugins.get("ImageUtils"),n=i.getClosestSelectedImageElement(t.document.selection),o=Object.fromEntries(n.getAttributes());return o.src||o.uploadId?t.change(function(e){var r=Array.from(t.markers).filter(function(e){return e.getRange().containsItem(n);}),s=i.insertImage(o,t.createSelection(n,"on"),_this244._modelElementName);if(!s)return null;var a=e.createRangeOn(s);var _iterator366=_createForOfIteratorHelper(r),_step366;try{for(_iterator366.s();!(_step366=_iterator366.n()).done;){var _t252=_step366.value;var _i267=_t252.getRange(),_n158="$graveyard"!=_i267.root.rootName?_i267.getJoined(a,!0):a;e.updateMarker(_t252,{range:_n158});}}catch(err){_iterator366.e(err);}finally{_iterator366.f();}return{oldElement:n,newElement:s};}):null;}}]);return bf;}(Ze);var wf=/*#__PURE__*/function(_Qe53){_inherits(wf,_Qe53);var _super165=_createSuper(wf);function wf(){_classCallCheck(this,wf);return _super165.apply(this,arguments);}_createClass(wf,[{key:"init",value:function init(){var e=this.editor;e.model.schema.register("imageBlock",{isObject:!0,isBlock:!0,allowWhere:"$block",allowAttributes:["alt","src","srcset"]}),this._setupConversion(),e.plugins.has("ImageInlineEditing")&&(e.commands.add("imageTypeBlock",new bf(this.editor,"imageBlock")),this._setupClipboardIntegration());}},{key:"_setupConversion",value:function _setupConversion(){var e=this.editor,t=e.t,i=e.conversion,n=e.plugins.get("ImageUtils");i["for"]("dataDowncast").elementToElement({model:"imageBlock",view:function view(e,_ref58){var t=_ref58.writer;return tf(t,"imageBlock");}}),i["for"]("editingDowncast").elementToElement({model:"imageBlock",view:function view(e,_ref59){var i=_ref59.writer;return n.toImageWidget(tf(i,"imageBlock"),i,t("image widget"));}}),i["for"]("downcast").add(gf(n,"imageBlock","src")).add(gf(n,"imageBlock","alt")).add(hf(n,"imageBlock")),i["for"]("upcast").elementToElement({view:nf(e,"imageBlock"),model:function model(e,_ref60){var t=_ref60.writer;return t.createElement("imageBlock",{src:e.getAttribute("src")});}}).add(function(e){return function(e){e.on("element:figure",t);};function t(t,i,n){if(!n.consumable.test(i.viewItem,{name:!0,classes:"image"}))return;var o=e.findViewImgElement(i.viewItem);if(!o||!o.hasAttribute("src")||!n.consumable.test(o,{name:!0}))return;var r=Ns(n.convertItem(o,i.modelCursor).modelRange.getItems());r&&(n.convertChildren(i.viewItem,r),n.updateConversionResult(r,i));}}(n));}},{key:"_setupClipboardIntegration",value:function _setupClipboardIntegration(){var e=this.editor,t=e.model,i=e.editing.view,n=e.plugins.get("ImageUtils");this.listenTo(e.plugins.get("ClipboardPipeline"),"inputTransformation",function(o,r){var s=Array.from(r.content.getChildren());var a;if(!s.every(n.isInlineImageView))return;a=r.targetRanges?e.editing.mapper.toModelRange(r.targetRanges[0]):t.document.selection.getFirstRange();var l=t.createSelection(a);if("imageBlock"===of(t.schema,l)){var _e270=new hu(i.document),_t253=s.map(function(t){return _e270.createElement("figure",{"class":"image"},t);});r.content=_e270.createDocumentFragment(_t253);}});}}],[{key:"requires",get:function get(){return[pf,rf,Wu];}},{key:"pluginName",get:function get(){return"ImageBlockEditing";}}]);return wf;}(Qe);i(11);var kf=/*#__PURE__*/function(_Qe54){_inherits(kf,_Qe54);var _super166=_createSuper(kf);function kf(){_classCallCheck(this,kf);return _super166.apply(this,arguments);}_createClass(kf,null,[{key:"requires",get:function get(){return[wf,Ah,uf];}},{key:"pluginName",get:function get(){return"ImageBlock";}}]);return kf;}(Qe);var _f=/*#__PURE__*/function(_Qe55){_inherits(_f,_Qe55);var _super167=_createSuper(_f);function _f(){_classCallCheck(this,_f);return _super167.apply(this,arguments);}_createClass(_f,[{key:"init",value:function init(){var e=this.editor,t=e.model.schema;t.register("imageInline",{isObject:!0,isInline:!0,allowWhere:"$text",allowAttributes:["alt","src","srcset"]}),t.addChildCheck(function(e,t){if(e.endsWith("caption")&&"imageInline"===t.name)return!1;}),this._setupConversion(),e.plugins.has("ImageBlockEditing")&&(e.commands.add("imageTypeInline",new bf(this.editor,"imageInline")),this._setupClipboardIntegration());}},{key:"_setupConversion",value:function _setupConversion(){var e=this.editor,t=e.t,i=e.conversion,n=e.plugins.get("ImageUtils");i["for"]("dataDowncast").elementToElement({model:"imageInline",view:function view(e,_ref61){var t=_ref61.writer;return t.createEmptyElement("img");}}),i["for"]("editingDowncast").elementToElement({model:"imageInline",view:function view(e,_ref62){var i=_ref62.writer;return n.toImageWidget(tf(i,"imageInline"),i,t("image widget"));}}),i["for"]("downcast").add(gf(n,"imageInline","src")).add(gf(n,"imageInline","alt")).add(hf(n,"imageInline")),i["for"]("upcast").elementToElement({view:nf(e,"imageInline"),model:function model(e,_ref63){var t=_ref63.writer;return t.createElement("imageInline",{src:e.getAttribute("src")});}});}},{key:"_setupClipboardIntegration",value:function _setupClipboardIntegration(){var e=this.editor,t=e.model,i=e.editing.view,n=e.plugins.get("ImageUtils");this.listenTo(e.plugins.get("ClipboardPipeline"),"inputTransformation",function(o,r){var s=Array.from(r.content.getChildren());var a;if(!s.every(n.isBlockImageView))return;a=r.targetRanges?e.editing.mapper.toModelRange(r.targetRanges[0]):t.document.selection.getFirstRange();var l=t.createSelection(a);if("imageInline"===of(t.schema,l)){var _e271=new hu(i.document),_t254=s.map(function(t){return 1===t.childCount?(Array.from(t.getAttributes()).forEach(function(i){return _e271.setAttribute.apply(_e271,_toConsumableArray(i).concat([n.findViewImgElement(t)]));}),t.getChild(0)):t;});r.content=_e271.createDocumentFragment(_t254);}});}}],[{key:"requires",get:function get(){return[pf,rf,Wu];}},{key:"pluginName",get:function get(){return"ImageInlineEditing";}}]);return _f;}(Qe);var vf=/*#__PURE__*/function(_Qe56){_inherits(vf,_Qe56);var _super168=_createSuper(vf);function vf(){_classCallCheck(this,vf);return _super168.apply(this,arguments);}_createClass(vf,null,[{key:"requires",get:function get(){return[_f,Ah,uf];}},{key:"pluginName",get:function get(){return"ImageInline";}}]);return vf;}(Qe);function yf(e){var _iterator367=_createForOfIteratorHelper(e.getChildren()),_step367;try{for(_iterator367.s();!(_step367=_iterator367.n()).done;){var _t255=_step367.value;if(_t255&&_t255.is("element","caption"))return _t255;}}catch(err){_iterator367.e(err);}finally{_iterator367.f();}return null;}function xf(e,t){var i=t.getFirstPosition().findAncestor("caption");return i&&e.isBlockImage(i.parent)?i:null;}var Af=/*#__PURE__*/function(_Ze19){_inherits(Af,_Ze19);var _super169=_createSuper(Af);function Af(){_classCallCheck(this,Af);return _super169.apply(this,arguments);}_createClass(Af,[{key:"refresh",value:function refresh(){var e=this.editor,t=e.plugins.get("ImageUtils");if(!e.plugins.has(wf))return this.isEnabled=!1,void(this.value=!1);var i=e.model.document.selection,n=i.getSelectedElement();if(!n){var _e272=xf(t,i);return this.isEnabled=!!_e272,void(this.value=!!_e272);}this.isEnabled=this.editor.plugins.get("ImageUtils").isImage(n),this.isEnabled?this.value=!!yf(n):this.value=!1;}},{key:"execute",value:function execute(){var _this245=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=e.focusCaptionOnShow;this.editor.model.change(function(e){_this245.value?_this245._hideImageCaption(e):_this245._showImageCaption(e,t);});}},{key:"_showImageCaption",value:function _showImageCaption(e,t){var i=this.editor.model.document.selection,n=this.editor.plugins.get("ImageCaptionEditing");var o=i.getSelectedElement();var r=n._getSavedCaption(o);this.editor.plugins.get("ImageUtils").isInlineImage(o)&&(this.editor.execute("imageTypeBlock"),o=i.getSelectedElement());var s=r||e.createElement("caption");e.append(s,o),t&&e.setSelection(s,"in");}},{key:"_hideImageCaption",value:function _hideImageCaption(e){var t=this.editor,i=t.model.document.selection,n=t.plugins.get("ImageCaptionEditing"),o=t.plugins.get("ImageUtils");var r,s=i.getSelectedElement();s?r=yf(s):(r=xf(o,i),s=r.parent),n._saveCaption(s,r),e.setSelection(s,"on"),e.remove(r);}}]);return Af;}(Ze);var Cf=/*#__PURE__*/function(_Qe57){_inherits(Cf,_Qe57);var _super170=_createSuper(Cf);function Cf(e){var _this246;_classCallCheck(this,Cf);_this246=_super170.call(this,e),_this246._savedCaptionsMap=new WeakMap();return _this246;}_createClass(Cf,[{key:"init",value:function init(){var e=this.editor,t=e.model.schema;t.isRegistered("caption")?t.extend("caption",{allowIn:"imageBlock"}):t.register("caption",{allowIn:"imageBlock",allowContentOf:"$block",isLimit:!0}),e.commands.add("toggleImageCaption",new Af(this.editor)),this._setupConversion(),this._setupImageTypeCommandsIntegration();}},{key:"_setupConversion",value:function _setupConversion(){var e=this.editor,t=e.editing.view,i=e.plugins.get("ImageUtils"),n=e.t;e.conversion["for"]("upcast").elementToElement({view:function view(e){return function(e,t){return"figcaption"==t.name&&e.isBlockImageView(t.parent)?{name:!0}:null;}(i,e);},model:"caption"}),e.conversion["for"]("dataDowncast").elementToElement({model:"caption",view:function view(e,_ref64){var t=_ref64.writer;return i.isBlockImage(e.parent)?t.createContainerElement("figcaption"):null;}}),e.conversion["for"]("editingDowncast").elementToElement({model:"caption",view:function view(e,_ref65){var o=_ref65.writer;if(!i.isBlockImage(e.parent))return null;var r=o.createEditableElement("figcaption");o.setCustomProperty("imageCaption",!0,r),Gd({view:t,element:r,text:n("Enter image caption"),keepOnFocus:!0});var s=dh(r,o);return lh(s,o,function(e,t,i){return i.addClass(en(t.classes),e);},function(e,t,i){return i.removeClass(en(t.classes),e);}),s;}}),e.editing.mapper.on("modelToViewPosition",Tf(t)),e.data.mapper.on("modelToViewPosition",Tf(t));}},{key:"_setupImageTypeCommandsIntegration",value:function _setupImageTypeCommandsIntegration(){var _this247=this;var e=this.editor,t=e.plugins.get("ImageUtils"),i=e.commands.get("imageTypeInline"),n=e.commands.get("imageTypeBlock"),o=function o(e){if(!e["return"])return;var _e$return=e["return"],i=_e$return.oldElement,n=_e$return.newElement;if(!i)return;if(t.isBlockImage(i)){var _e273=yf(i);if(_e273)return void _this247._saveCaption(n,_e273);}var o=_this247._getSavedCaption(i);o&&_this247._saveCaption(n,o);};i&&this.listenTo(i,"execute",o,{priority:"low"}),n&&this.listenTo(n,"execute",o,{priority:"low"});}},{key:"_getSavedCaption",value:function _getSavedCaption(e){var t=this._savedCaptionsMap.get(e);return t?Js.fromJSON(t):null;}},{key:"_saveCaption",value:function _saveCaption(e,t){this._savedCaptionsMap.set(e,t.toJSON());}}],[{key:"requires",get:function get(){return[rf];}},{key:"pluginName",get:function get(){return"ImageCaptionEditing";}}]);return Cf;}(Qe);function Tf(e){return function(t,i){var n=i.modelPosition,o=n.parent;if(!o.is("element","imageBlock"))return;var r=i.mapper.toViewElement(o);i.viewPosition=e.createPositionAt(r,n.offset+1);};}var Ef=/*#__PURE__*/function(_Qe58){_inherits(Ef,_Qe58);var _super171=_createSuper(Ef);function Ef(){_classCallCheck(this,Ef);return _super171.apply(this,arguments);}_createClass(Ef,[{key:"init",value:function init(){var _this248=this;var e=this.editor,t=e.editing.view,i=e.plugins.get("ImageUtils"),n=e.t;e.ui.componentFactory.add("toggleImageCaption",function(o){var r=e.commands.get("toggleImageCaption"),s=new Xc(o);return s.set({icon:Cc.caption,tooltip:!0,isToggleable:!0}),s.bind("isOn","isEnabled").to(r,"value","isEnabled"),s.bind("label").to(r,"value",function(e){return n(e?"Toggle caption off":"Toggle caption on");}),_this248.listenTo(s,"execute",function(){e.execute("toggleImageCaption",{focusCaptionOnShow:!0});var n=xf(i,e.model.document.selection);if(n){var _i268=e.editing.mapper.toViewElement(n);t.scrollToTheSelection(),t.change(function(e){e.addClass("image__caption_highlighted",_i268);});}}),s;});}}],[{key:"requires",get:function get(){return[rf];}},{key:"pluginName",get:function get(){return"ImageCaptionUI";}}]);return Ef;}(Qe);i(80);var If=/*#__PURE__*/function(_Ze20){_inherits(If,_Ze20);var _super172=_createSuper(If);function If(){_classCallCheck(this,If);return _super172.apply(this,arguments);}_createClass(If,[{key:"refresh",value:function refresh(){var e=this.editor,t=e.plugins.get("ImageUtils").getClosestSelectedImageElement(e.model.document.selection);this.isEnabled=!!t,t&&t.hasAttribute("width")?this.value={width:t.getAttribute("width"),height:null}:this.value=null;}},{key:"execute",value:function execute(e){var t=this.editor,i=t.model,n=t.plugins.get("ImageUtils").getClosestSelectedImageElement(i.document.selection);this.value={width:e.width,height:null},n&&i.change(function(t){t.setAttribute("width",e.width,n);});}}]);return If;}(Ze);var Sf=/*#__PURE__*/function(_Qe59){_inherits(Sf,_Qe59);var _super173=_createSuper(Sf);function Sf(e){var _this249;_classCallCheck(this,Sf);_this249=_super173.call(this,e),e.config.define("image",{resizeUnit:"%",resizeOptions:[{name:"resizeImage:original",value:null,icon:"original"},{name:"resizeImage:25",value:"25",icon:"small"},{name:"resizeImage:50",value:"50",icon:"medium"},{name:"resizeImage:75",value:"75",icon:"large"}]});return _this249;}_createClass(Sf,[{key:"init",value:function init(){var e=this.editor,t=new If(e);this._registerSchema(),this._registerConverters("imageBlock"),this._registerConverters("imageInline"),e.commands.add("resizeImage",t),e.commands.add("imageResize",t);}},{key:"_registerSchema",value:function _registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:"width"}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:"width"});}},{key:"_registerConverters",value:function _registerConverters(e){var t=this.editor;t.conversion["for"]("downcast").add(function(t){return t.on("attribute:width:"+e,function(e,t,i){if(!i.consumable.consume(t.item,e.name))return;var n=i.writer,o=i.mapper.toViewElement(t.item);null!==t.attributeNewValue?(n.setStyle("width",t.attributeNewValue,o),n.addClass("image_resized",o)):(n.removeStyle("width",o),n.removeClass("image_resized",o));});}),t.conversion["for"]("upcast").attributeToAttribute({view:{name:"imageBlock"===e?"figure":"img",styles:{width:/.+/}},model:{key:"width",value:function value(e){return e.getStyle("width");}}});}}],[{key:"requires",get:function get(){return[rf];}},{key:"pluginName",get:function get(){return"ImageResizeEditing";}}]);return Sf;}(Qe);var Pf={small:Cc.objectSizeSmall,medium:Cc.objectSizeMedium,large:Cc.objectSizeLarge,original:Cc.objectSizeFull};var Mf=/*#__PURE__*/function(_Qe60){_inherits(Mf,_Qe60);var _super174=_createSuper(Mf);function Mf(e){var _this250;_classCallCheck(this,Mf);_this250=_super174.call(this,e),_this250._resizeUnit=e.config.get("image.resizeUnit");return _this250;}_createClass(Mf,[{key:"init",value:function init(){var e=this.editor,t=e.config.get("image.resizeOptions"),i=e.commands.get("resizeImage");this.bind("isEnabled").to(i);var _iterator368=_createForOfIteratorHelper(t),_step368;try{for(_iterator368.s();!(_step368=_iterator368.n()).done;){var _e274=_step368.value;this._registerImageResizeButton(_e274);}}catch(err){_iterator368.e(err);}finally{_iterator368.f();}this._registerImageResizeDropdown(t);}},{key:"_registerImageResizeButton",value:function _registerImageResizeButton(e){var _this251=this;var t=this.editor,i=e.name,n=e.value,o=e.icon,r=n?n+this._resizeUnit:null;t.ui.componentFactory.add(i,function(i){var n=new Xc(i),s=t.commands.get("resizeImage"),a=_this251._getOptionLabelValue(e,!0);if(!Pf[o])throw new l.a("imageresizebuttons-missing-icon",t,e);return n.set({label:a,icon:Pf[o],tooltip:a,isToggleable:!0}),n.bind("isEnabled").to(_this251),n.bind("isOn").to(s,"value",Nf(r)),_this251.listenTo(n,"execute",function(){t.execute("resizeImage",{width:r});}),n;});}},{key:"_registerImageResizeDropdown",value:function _registerImageResizeDropdown(e){var _this252=this;var t=this.editor,i=t.t,n=e.find(function(e){return!e.value;}),o=function o(_o98){var r=t.commands.get("resizeImage"),s=Cd(_o98,ad),a=s.buttonView;return a.set({tooltip:i("Resize image"),commandValue:n.value,icon:Pf.medium,isToggleable:!0,label:_this252._getOptionLabelValue(n),withText:!0,"class":"ck-resize-image-button"}),a.bind("label").to(r,"value",function(e){return e&&e.width?e.width:_this252._getOptionLabelValue(n);}),s.bind("isOn").to(r),s.bind("isEnabled").to(_this252),Ed(s,_this252._getResizeDropdownListItemDefinitions(e,r)),s.listView.ariaLabel=i("Image resize list"),_this252.listenTo(s,"execute",function(e){t.execute(e.source.commandName,{width:e.source.commandValue}),t.editing.view.focus();}),s;};t.ui.componentFactory.add("resizeImage",o),t.ui.componentFactory.add("imageResize",o);}},{key:"_getOptionLabelValue",value:function _getOptionLabelValue(e,t){var i=this.editor.t;return e.label?e.label:t?e.value?i("Resize image to %0",e.value+this._resizeUnit):i("Resize image to the original size"):e.value?e.value+this._resizeUnit:i("Original");}},{key:"_getResizeDropdownListItemDefinitions",value:function _getResizeDropdownListItemDefinitions(e,t){var _this253=this;var i=new Zi();return e.map(function(e){var n=e.value?e.value+_this253._resizeUnit:null,o={type:"button",model:new Dd({commandName:"resizeImage",commandValue:n,label:_this253._getOptionLabelValue(e),withText:!0,icon:null})};o.model.bind("isOn").to(t,"value",Nf(n)),i.add(o);}),i;}}],[{key:"requires",get:function get(){return[Sf];}},{key:"pluginName",get:function get(){return"ImageResizeButtons";}}]);return Mf;}(Qe);function Nf(e){return function(t){return null===e&&t===e||t&&t.width===e;};}var Rf=/(image|image-inline)/;var zf=/*#__PURE__*/function(_Qe61){_inherits(zf,_Qe61);var _super175=_createSuper(zf);function zf(){_classCallCheck(this,zf);return _super175.apply(this,arguments);}_createClass(zf,[{key:"init",value:function init(){var e=this.editor.commands.get("resizeImage");this.bind("isEnabled").to(e),this._setupResizerCreator();}},{key:"_setupResizerCreator",value:function _setupResizerCreator(){var _this254=this;var e=this.editor,t=e.editing.view;t.addObserver(mf),this.listenTo(t.document,"imageLoaded",function(i,n){if(!n.target.matches("figure.image.ck-widget > img,figure.image.ck-widget > picture > img,figure.image.ck-widget > a > img,figure.image.ck-widget > a > picture > img,span.image-inline.ck-widget > img,span.image-inline.ck-widget > picture > img"))return;var o=e.editing.view.domConverter,r=o.domToView(n.target).findAncestor({classes:Rf});var s=_this254.editor.plugins.get(Xm).getResizerByViewElement(r);if(s)return void s.redraw();var a=e.editing.mapper,l=a.toModelElement(r);s=e.plugins.get(Xm).attachTo({unit:e.config.get("image.resizeUnit"),modelElement:l,viewElement:r,editor:e,getHandleHost:function getHandleHost(e){return e.querySelector("img");},getResizeHost:function getResizeHost(){return o.viewToDom(a.toViewElement(l.parent));},isCentered:function isCentered(){var e=l.getAttribute("imageStyle");return!e||"block"==e||"alignCenter"==e;},onCommit:function onCommit(i){t.change(function(e){e.removeClass("image_resized",r);}),e.execute("resizeImage",{width:i});}}),s.on("updateSize",function(){r.hasClass("image_resized")||t.change(function(e){e.addClass("image_resized",r);});}),s.bind("isEnabled").to(_this254);});}}],[{key:"requires",get:function get(){return[Xm];}},{key:"pluginName",get:function get(){return"ImageResizeHandles";}}]);return zf;}(Qe);i(82);var Of=/*#__PURE__*/function(_Ze21){_inherits(Of,_Ze21);var _super176=_createSuper(Of);function Of(e,t){var _this255;_classCallCheck(this,Of);_this255=_super176.call(this,e),_this255._defaultStyles={imageBlock:!1,imageInline:!1},_this255._styles=new Map(t.map(function(e){if(e.isDefault){var _iterator369=_createForOfIteratorHelper(e.modelElements),_step369;try{for(_iterator369.s();!(_step369=_iterator369.n()).done;){var _t256=_step369.value;_this255._defaultStyles[_t256]=e.name;}}catch(err){_iterator369.e(err);}finally{_iterator369.f();}}return[e.name,e];}));return _this255;}_createClass(Of,[{key:"refresh",value:function refresh(){var e=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!e,this.isEnabled?e.hasAttribute("imageStyle")?this.value=e.getAttribute("imageStyle"):this.value=this._defaultStyles[e.name]:this.value=!1;}},{key:"execute",value:function execute(){var _this256=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=this.editor,i=t.model,n=t.plugins.get("ImageUtils");i.change(function(t){var o=e.value;var r=n.getClosestSelectedImageElement(i.document.selection);o&&_this256.shouldConvertImageType(o,r)&&(_this256.editor.execute(n.isBlockImage(r)?"imageTypeInline":"imageTypeBlock"),r=n.getClosestSelectedImageElement(i.document.selection)),!o||_this256._styles.get(o).isDefault?t.removeAttribute("imageStyle",r):t.setAttribute("imageStyle",o,r);});}},{key:"shouldConvertImageType",value:function shouldConvertImageType(e,t){return!this._styles.get(e).modelElements.includes(t.name);}}]);return Of;}(Ze);var Df=Cc.objectFullWidth,Lf=Cc.objectInline,Vf=Cc.objectLeft,Bf=Cc.objectRight,jf=Cc.objectCenter,Ff=Cc.objectBlockLeft,Hf=Cc.objectBlockRight,Uf={inline:{name:"inline",title:"In line",icon:Lf,modelElements:["imageInline"],isDefault:!0},alignLeft:{name:"alignLeft",title:"Left aligned image",icon:Vf,modelElements:["imageBlock","imageInline"],className:"image-style-align-left"},alignBlockLeft:{name:"alignBlockLeft",title:"Left aligned image",icon:Ff,modelElements:["imageBlock"],className:"image-style-block-align-left"},alignCenter:{name:"alignCenter",title:"Centered image",icon:jf,modelElements:["imageBlock"],className:"image-style-align-center"},alignRight:{name:"alignRight",title:"Right aligned image",icon:Bf,modelElements:["imageBlock","imageInline"],className:"image-style-align-right"},alignBlockRight:{name:"alignBlockRight",title:"Right aligned image",icon:Hf,modelElements:["imageBlock"],className:"image-style-block-align-right"},block:{name:"block",title:"Centered image",icon:jf,modelElements:["imageBlock"],isDefault:!0},side:{name:"side",title:"Side image",icon:Bf,modelElements:["imageBlock"],className:"image-style-side"}},Wf={full:Df,left:Ff,right:Hf,center:jf,inlineLeft:Vf,inlineRight:Bf,inline:Lf},qf=[{name:"imageStyle:wrapText",title:"Wrap text",defaultItem:"imageStyle:alignLeft",items:["imageStyle:alignLeft","imageStyle:alignRight"]},{name:"imageStyle:breakText",title:"Break text",defaultItem:"imageStyle:block",items:["imageStyle:alignBlockLeft","imageStyle:block","imageStyle:alignBlockRight"]}];function $f(e){Object(l.b)("image-style-configuration-definition-invalid",e);}var Yf={normalizeStyles:function normalizeStyles(e){return(e.configuredStyles.options||[]).map(function(e){return function(e){e="string"==typeof e?Uf[e]?_objectSpread({},Uf[e]):{name:e}:function(e,t){var i=_objectSpread({},t);for(var _n159 in e){Object.prototype.hasOwnProperty.call(t,_n159)||(i[_n159]=e[_n159]);}return i;}(Uf[e.name],e);"string"==typeof e.icon&&(e.icon=Wf[e.icon]||e.icon);return e;}(e);}).filter(function(t){return function(e,_ref66){var t=_ref66.isBlockPluginLoaded,i=_ref66.isInlinePluginLoaded;var n=e.modelElements,o=e.name;if(!(n&&n.length&&o))return $f({style:e}),!1;{var _o99=[t?"imageBlock":null,i?"imageInline":null];if(!n.some(function(e){return _o99.includes(e);}))return Object(l.b)("image-style-missing-dependency",{style:e,missingPlugins:n.map(function(e){return"imageBlock"===e?"ImageBlockEditing":"ImageInlineEditing";})}),!1;}return!0;}(t,e);});},getDefaultStylesConfiguration:function getDefaultStylesConfiguration(e,t){return e&&t?{options:["inline","alignLeft","alignRight","alignCenter","alignBlockLeft","alignBlockRight","block","side"]}:e?{options:["block","side"]}:t?{options:["inline","alignLeft","alignRight"]}:{};},getDefaultDropdownDefinitions:function getDefaultDropdownDefinitions(e){return e.has("ImageBlockEditing")&&e.has("ImageInlineEditing")?[].concat(qf):[];},warnInvalidStyle:$f,DEFAULT_OPTIONS:Uf,DEFAULT_ICONS:Wf,DEFAULT_DROPDOWN_DEFINITIONS:qf};function Gf(e,t){var _iterator370=_createForOfIteratorHelper(t),_step370;try{for(_iterator370.s();!(_step370=_iterator370.n()).done;){var _i269=_step370.value;if(_i269.name===e)return _i269;}}catch(err){_iterator370.e(err);}finally{_iterator370.f();}}var Kf=/*#__PURE__*/function(_Qe62){_inherits(Kf,_Qe62);var _super177=_createSuper(Kf);function Kf(){_classCallCheck(this,Kf);return _super177.apply(this,arguments);}_createClass(Kf,[{key:"init",value:function init(){var e=Yf.normalizeStyles,t=Yf.getDefaultStylesConfiguration,i=this.editor,n=i.plugins.has("ImageBlockEditing"),o=i.plugins.has("ImageInlineEditing");i.config.define("image.styles",t(n,o)),this.normalizedStyles=e({configuredStyles:i.config.get("image.styles"),isBlockPluginLoaded:n,isInlinePluginLoaded:o}),this._setupConversion(n,o),this._setupPostFixer(),i.commands.add("imageStyle",new Of(i,this.normalizedStyles));}},{key:"_setupConversion",value:function _setupConversion(e,t){var i=this.editor,n=i.model.schema,o=(r=this.normalizedStyles,function(e,t,i){if(!i.consumable.consume(t.item,e.name))return;var n=Gf(t.attributeNewValue,r),o=Gf(t.attributeOldValue,r),s=i.mapper.toViewElement(t.item),a=i.writer;o&&a.removeClass(o.className,s),n&&a.addClass(n.className,s);});var r;var s=function(e){var t={imageInline:e.filter(function(e){return!e.isDefault&&e.modelElements.includes("imageInline");}),imageBlock:e.filter(function(e){return!e.isDefault&&e.modelElements.includes("imageBlock");})};return function(e,i,n){if(!i.modelRange)return;var o=i.viewItem,r=Ns(i.modelRange.getItems());if(r&&n.schema.checkAttribute(r,"imageStyle")){var _iterator371=_createForOfIteratorHelper(t[r.name]),_step371;try{for(_iterator371.s();!(_step371=_iterator371.n()).done;){var _e275=_step371.value;n.consumable.consume(o,{classes:_e275.className})&&n.writer.setAttribute("imageStyle",_e275.name,r);}}catch(err){_iterator371.e(err);}finally{_iterator371.f();}}};}(this.normalizedStyles);i.editing.downcastDispatcher.on("attribute:imageStyle",o),i.data.downcastDispatcher.on("attribute:imageStyle",o),e&&(n.extend("imageBlock",{allowAttributes:"imageStyle"}),i.data.upcastDispatcher.on("element:figure",s,{priority:"low"})),t&&(n.extend("imageInline",{allowAttributes:"imageStyle"}),i.data.upcastDispatcher.on("element:img",s,{priority:"low"}));}},{key:"_setupPostFixer",value:function _setupPostFixer(){var e=this.editor,t=e.model.document,i=e.plugins.get(rf),n=new Map(this.normalizedStyles.map(function(e){return[e.name,e];}));t.registerPostFixer(function(e){var o=!1;var _iterator372=_createForOfIteratorHelper(t.differ.getChanges()),_step372;try{for(_iterator372.s();!(_step372=_iterator372.n()).done;){var _r55=_step372.value;if("insert"==_r55.type||"attribute"==_r55.type&&"imageStyle"==_r55.attributeKey){var _t257="insert"==_r55.type?_r55.position.nodeAfter:_r55.range.start.nodeAfter;if(_t257&&_t257.is("element","paragraph")&&_t257.childCount>0&&(_t257=_t257.getChild(0)),!i.isImage(_t257))continue;var _s32=_t257.getAttribute("imageStyle");if(!_s32)continue;var _a19=n.get(_s32);_a19&&_a19.modelElements.includes(_t257.name)||(e.removeAttribute("imageStyle",_t257),o=!0);}}}catch(err){_iterator372.e(err);}finally{_iterator372.f();}return o;});}}],[{key:"pluginName",get:function get(){return"ImageStyleEditing";}},{key:"requires",get:function get(){return[rf];}}]);return Kf;}(Qe);i(84);var Qf=/*#__PURE__*/function(_Qe63){_inherits(Qf,_Qe63);var _super178=_createSuper(Qf);function Qf(){_classCallCheck(this,Qf);return _super178.apply(this,arguments);}_createClass(Qf,[{key:"localizedDefaultStylesTitles",get:function get(){var e=this.editor.t;return{"Wrap text":e("Wrap text"),"Break text":e("Break text"),"In line":e("In line"),"Full size image":e("Full size image"),"Side image":e("Side image"),"Left aligned image":e("Left aligned image"),"Centered image":e("Centered image"),"Right aligned image":e("Right aligned image")};}},{key:"init",value:function init(){var e=this.editor.plugins,t=this.editor.config.get("image.toolbar")||[],i=Jf(e.get("ImageStyleEditing").normalizedStyles,this.localizedDefaultStylesTitles);var _iterator373=_createForOfIteratorHelper(i),_step373;try{for(_iterator373.s();!(_step373=_iterator373.n()).done;){var _e276=_step373.value;this._createButton(_e276);}}catch(err){_iterator373.e(err);}finally{_iterator373.f();}var n=Jf([].concat(_toConsumableArray(t.filter(w)),_toConsumableArray(Yf.getDefaultDropdownDefinitions(e))),this.localizedDefaultStylesTitles);var _iterator374=_createForOfIteratorHelper(n),_step374;try{for(_iterator374.s();!(_step374=_iterator374.n()).done;){var _e277=_step374.value;this._createDropdown(_e277,i);}}catch(err){_iterator374.e(err);}finally{_iterator374.f();}}},{key:"_createDropdown",value:function _createDropdown(e,t){var i=this.editor.ui.componentFactory;i.add(e.name,function(n){var o;var r=e.defaultItem,s=e.items,a=e.title,l=s.filter(function(e){return t.find(function(_ref67){var t=_ref67.name;return Zf(t)===e;});}).map(function(e){var t=i.create(e);return e===r&&(o=t),t;});s.length!==l.length&&Yf.warnInvalidStyle({dropdown:e});var c=Cd(n,ld),d=c.buttonView;return Td(c,l),d.set({label:Xf(a,o.label),"class":null,tooltip:!0}),d.bind("icon").toMany(l,"isOn",function(){for(var _len25=arguments.length,e=new Array(_len25),_key25=0;_key25<_len25;_key25++){e[_key25]=arguments[_key25];}var t=e.findIndex(Z);return t<0?o.icon:l[t].icon;}),d.bind("label").toMany(l,"isOn",function(){for(var _len26=arguments.length,e=new Array(_len26),_key26=0;_key26<_len26;_key26++){e[_key26]=arguments[_key26];}var t=e.findIndex(Z);return Xf(a,t<0?o.label:l[t].label);}),d.bind("isOn").toMany(l,"isOn",function(){for(var _len27=arguments.length,e=new Array(_len27),_key27=0;_key27<_len27;_key27++){e[_key27]=arguments[_key27];}return e.some(Z);}),d.bind("class").toMany(l,"isOn",function(){for(var _len28=arguments.length,e=new Array(_len28),_key28=0;_key28<_len28;_key28++){e[_key28]=arguments[_key28];}return e.some(Z)?"ck-splitbutton_flatten":null;}),d.on("execute",function(){l.some(function(_ref68){var e=_ref68.isOn;return e;})?c.isOpen=!c.isOpen:o.fire("execute");}),c.bind("isEnabled").toMany(l,"isEnabled",function(){for(var _len29=arguments.length,e=new Array(_len29),_key29=0;_key29<_len29;_key29++){e[_key29]=arguments[_key29];}return e.some(Z);}),c;});}},{key:"_createButton",value:function _createButton(e){var _this257=this;var t=e.name;this.editor.ui.componentFactory.add(Zf(t),function(i){var n=_this257.editor.commands.get("imageStyle"),o=new Xc(i);return o.set({label:e.title,icon:e.icon,tooltip:!0,isToggleable:!0}),o.bind("isEnabled").to(n,"isEnabled"),o.bind("isOn").to(n,"value",function(e){return e===t;}),o.on("execute",_this257._executeCommand.bind(_this257,t)),o;});}},{key:"_executeCommand",value:function _executeCommand(e){this.editor.execute("imageStyle",{value:e}),this.editor.editing.view.focus();}}],[{key:"requires",get:function get(){return[Kf];}},{key:"pluginName",get:function get(){return"ImageStyleUI";}}]);return Qf;}(Qe);function Jf(e,t){var _iterator375=_createForOfIteratorHelper(e),_step375;try{for(_iterator375.s();!(_step375=_iterator375.n()).done;){var _i270=_step375.value;t[_i270.title]&&(_i270.title=t[_i270.title]);}}catch(err){_iterator375.e(err);}finally{_iterator375.f();}return e;}function Zf(e){return"imageStyle:"+e;}function Xf(e,t){return(e?e+": ":"")+t;}function ep(e){var t=e.map(function(e){return e.replace("+","\\+");});return new RegExp("^image\\/(".concat(t.join("|"),")$"));}function tp(e){return new Promise(function(t,i){var n=e.getAttribute("src");fetch(n).then(function(e){return e.blob();}).then(function(e){var i=ip(e,n),o=i.replace("image/",""),r=new File([e],"image."+o,{type:i});t(r);})["catch"](function(e){return e&&"TypeError"===e.name?function(e){return function(e){return new Promise(function(t,i){var n=vr.document.createElement("img");n.addEventListener("load",function(){var e=vr.document.createElement("canvas");e.width=n.width,e.height=n.height;e.getContext("2d").drawImage(n,0,0),e.toBlob(function(e){return e?t(e):i();});}),n.addEventListener("error",function(){return i();}),n.src=e;});}(e).then(function(t){var i=ip(t,e),n=i.replace("image/","");return new File([t],"image."+n,{type:i});});}(n).then(t)["catch"](i):i(e);});});}function ip(e,t){return e.type?e.type:t.match(/data:(image\/\w+);base64/)?t.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg";}var np=/*#__PURE__*/function(_Qe64){_inherits(np,_Qe64);var _super179=_createSuper(np);function np(){_classCallCheck(this,np);return _super179.apply(this,arguments);}_createClass(np,[{key:"init",value:function init(){var e=this.editor,t=e.t,i=function i(_i271){var n=new dm(_i271),o=e.commands.get("uploadImage"),r=e.config.get("image.upload.types"),s=ep(r);return n.set({acceptedType:r.map(function(e){return"image/"+e;}).join(","),allowMultipleFiles:!0}),n.buttonView.set({label:t("Insert image"),icon:Cc.image,tooltip:!0}),n.buttonView.bind("isEnabled").to(o),n.on("done",function(t,i){var n=Array.from(i).filter(function(e){return s.test(e.type);});n.length&&e.execute("uploadImage",{file:n});}),n;};e.ui.componentFactory.add("uploadImage",i),e.ui.componentFactory.add("imageUpload",i);}}],[{key:"pluginName",get:function get(){return"ImageUploadUI";}}]);return np;}(Qe);i(86),i(88),i(90);var op=/*#__PURE__*/function(_Qe65){_inherits(op,_Qe65);var _super180=_createSuper(op);function op(e){var _this258;_classCallCheck(this,op);_this258=_super180.call(this,e),_this258.placeholder="data:image/svg+xml;utf8,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 250"><rect rx="4"/></svg>');return _this258;}_createClass(op,[{key:"init",value:function init(){var _this259=this;var e=this.editor;e.plugins.has("ImageBlockEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageBlock",function(){return _this259.uploadStatusChange.apply(_this259,arguments);}),e.plugins.has("ImageInlineEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageInline",function(){return _this259.uploadStatusChange.apply(_this259,arguments);});}},{key:"uploadStatusChange",value:function uploadStatusChange(e,t,i){var n=this.editor,o=t.item,r=o.getAttribute("uploadId");if(!i.consumable.consume(t.item,e.name))return;var s=n.plugins.get("ImageUtils"),a=n.plugins.get(lm),l=r?t.attributeNewValue:null,c=this.placeholder,d=n.editing.mapper.toViewElement(o),u=i.writer;if("reading"==l)return rp(d,u),void sp(s,c,d,u);if("uploading"==l){var _e278=a.loaders.get(r);return rp(d,u),void(_e278?(ap(d,u),function(e,t,i,n){var o=function(e){var t=e.createUIElement("div",{"class":"ck-progress-bar"});return e.setCustomProperty("progressBar",!0,t),t;}(t);t.insert(t.createPositionAt(e,"end"),o),i.on("change:uploadedPercent",function(e,t,i){n.change(function(e){e.setStyle("width",i+"%",o);});});}(d,u,_e278,n.editing.view),function(e,t,i,n){if(n.data){var _o100=e.findViewImgElement(t);i.setAttribute("src",n.data,_o100);}}(s,d,u,_e278)):sp(s,c,d,u));}"complete"==l&&a.loaders.get(r)&&function(e,t,i){var n=t.createUIElement("div",{"class":"ck-image-upload-complete-icon"});t.insert(t.createPositionAt(e,"end"),n),setTimeout(function(){i.change(function(e){return e.remove(e.createRangeOn(n));});},3e3);}(d,u,n.editing.view),function(e,t){cp(e,t,"progressBar");}(d,u),ap(d,u),function(e,t){t.removeClass("ck-appear",e);}(d,u);}}],[{key:"pluginName",get:function get(){return"ImageUploadProgress";}}]);return op;}(Qe);function rp(e,t){e.hasClass("ck-appear")||t.addClass("ck-appear",e);}function sp(e,t,i,n){i.hasClass("ck-image-upload-placeholder")||n.addClass("ck-image-upload-placeholder",i);var o=e.findViewImgElement(i);o.getAttribute("src")!==t&&n.setAttribute("src",t,o),lp(i,"placeholder")||n.insert(n.createPositionAfter(o),function(e){var t=e.createUIElement("div",{"class":"ck-upload-placeholder-loader"});return e.setCustomProperty("placeholder",!0,t),t;}(n));}function ap(e,t){e.hasClass("ck-image-upload-placeholder")&&t.removeClass("ck-image-upload-placeholder",e),cp(e,t,"placeholder");}function lp(e,t){var _iterator376=_createForOfIteratorHelper(e.getChildren()),_step376;try{for(_iterator376.s();!(_step376=_iterator376.n()).done;){var _i272=_step376.value;if(_i272.getCustomProperty(t))return _i272;}}catch(err){_iterator376.e(err);}finally{_iterator376.f();}}function cp(e,t,i){var n=lp(e,i);n&&t.remove(t.createRangeOn(n));}var dp=/*#__PURE__*/function(_Ze22){_inherits(dp,_Ze22);var _super181=_createSuper(dp);function dp(){_classCallCheck(this,dp);return _super181.apply(this,arguments);}_createClass(dp,[{key:"refresh",value:function refresh(){var e=this.editor,t=e.plugins.get("ImageUtils"),i=e.model.document.selection.getSelectedElement();this.isEnabled=t.isImageAllowed()||t.isImage(i);}},{key:"execute",value:function execute(e){var _this260=this;var t=en(e.file),i=this.editor.model.document.selection,n=this.editor.plugins.get("ImageUtils"),o=Object.fromEntries(i.getAttributes());t.forEach(function(e,t){var r=i.getSelectedElement();if(t&&r&&n.isImage(r)){var _t258=_this260.editor.model.createPositionAfter(r);_this260._uploadImage(e,o,_t258);}else _this260._uploadImage(e,o);});}},{key:"_uploadImage",value:function _uploadImage(e,t,i){var n=this.editor,o=n.plugins.get(lm).createLoader(e),r=n.plugins.get("ImageUtils");o&&r.insertImage(_objectSpread(_objectSpread({},t),{},{uploadId:o.id}),i);}}]);return dp;}(Ze);var up=/*#__PURE__*/function(_Qe66){_inherits(up,_Qe66);var _super182=_createSuper(up);function up(e){var _this261;_classCallCheck(this,up);_this261=_super182.call(this,e),e.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}}),_this261._uploadImageElements=new Map();return _this261;}_createClass(up,[{key:"init",value:function init(){var _this262=this;var e=this.editor,t=e.model.document,i=e.conversion,n=e.plugins.get(lm),o=e.plugins.get("ImageUtils"),r=ep(e.config.get("image.upload.types")),s=new dp(e);e.commands.add("uploadImage",s),e.commands.add("imageUpload",s),i["for"]("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}),this.listenTo(e.editing.view.document,"clipboardInput",function(t,i){if(n=i.dataTransfer,Array.from(n.types).includes("text/html")&&""!==n.getData("text/html"))return;var n;var o=Array.from(i.dataTransfer.files).filter(function(e){return!!e&&r.test(e.type);});o.length&&(t.stop(),e.model.change(function(t){i.targetRanges&&t.setSelection(i.targetRanges.map(function(t){return e.editing.mapper.toModelRange(t);})),e.model.enqueueChange("default",function(){e.execute("uploadImage",{file:o});});}));}),this.listenTo(e.plugins.get("ClipboardPipeline"),"inputTransformation",function(t,i){var r=Array.from(e.editing.view.createRangeIn(i.content)).filter(function(e){return function(e,t){return!(!e.isInlineImageView(t)||!t.getAttribute("src"))&&(t.getAttribute("src").match(/^data:image\/\w+;base64,/g)||t.getAttribute("src").match(/^blob:/g));}(o,e.item)&&!e.item.getAttribute("uploadProcessed");}).map(function(e){return{promise:tp(e.item),imageElement:e.item};});if(!r.length)return;var s=new hu(e.editing.view.document);var _iterator377=_createForOfIteratorHelper(r),_step377;try{for(_iterator377.s();!(_step377=_iterator377.n()).done;){var _e279=_step377.value;s.setAttribute("uploadProcessed",!0,_e279.imageElement);var _t259=n.createLoader(_e279.promise);_t259&&(s.setAttribute("src","",_e279.imageElement),s.setAttribute("uploadId",_t259.id,_e279.imageElement));}}catch(err){_iterator377.e(err);}finally{_iterator377.f();}}),e.editing.view.document.on("dragover",function(e,t){t.preventDefault();}),t.on("change",function(){var i=t.differ.getChanges({includeChangesInGraveyard:!0}).reverse(),o=new Set();var _iterator378=_createForOfIteratorHelper(i),_step378;try{for(_iterator378.s();!(_step378=_iterator378.n()).done;){var _t260=_step378.value;if("insert"==_t260.type&&"$text"!=_t260.name){var _i273=_t260.position.nodeAfter,_r56="$graveyard"==_t260.position.root.rootName;var _iterator379=_createForOfIteratorHelper(hp(e,_i273)),_step379;try{for(_iterator379.s();!(_step379=_iterator379.n()).done;){var _t261=_step379.value;var _e280=_t261.getAttribute("uploadId");if(!_e280)continue;var _i274=n.loaders.get(_e280);_i274&&(_r56?o.has(_e280)||_i274.abort():(o.add(_e280),_this262._uploadImageElements.set(_e280,_t261),"idle"==_i274.status&&_this262._readAndUpload(_i274)));}}catch(err){_iterator379.e(err);}finally{_iterator379.f();}}}}catch(err){_iterator378.e(err);}finally{_iterator378.f();}}),this.on("uploadComplete",function(e,_ref69){var t=_ref69.imageElement,i=_ref69.data;var n=i.urls?i.urls:i;_this262.editor.model.change(function(e){e.setAttribute("src",n["default"],t),_this262._parseAndSetSrcsetAttributeOnImage(n,t,e);});},{priority:"low"});}},{key:"afterInit",value:function afterInit(){var e=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&e.extend("imageBlock",{allowAttributes:["uploadId","uploadStatus"]}),this.editor.plugins.has("ImageInlineEditing")&&e.extend("imageInline",{allowAttributes:["uploadId","uploadStatus"]});}},{key:"_readAndUpload",value:function _readAndUpload(e){var _this263=this;var t=this.editor,i=t.model,n=t.locale.t,o=t.plugins.get(lm),r=t.plugins.get(Od),s=t.plugins.get("ImageUtils"),a=this._uploadImageElements;return i.enqueueChange("transparent",function(t){t.setAttribute("uploadStatus","reading",a.get(e.id));}),e.read().then(function(){var n=e.upload(),o=a.get(e.id);if(So.isSafari){var _e281=t.editing.mapper.toViewElement(o),_i275=s.findViewImgElement(_e281);t.editing.view.once("render",function(){if(!_i275.parent)return;var e=t.editing.view.domConverter.mapViewToDom(_i275.parent);if(!e)return;var n=e.style.display;e.style.display="none",e._ckHack=e.offsetHeight,e.style.display=n;});}return i.enqueueChange("transparent",function(e){e.setAttribute("uploadStatus","uploading",o);}),n;}).then(function(t){i.enqueueChange("transparent",function(i){var n=a.get(e.id);i.setAttribute("uploadStatus","complete",n),_this263.fire("uploadComplete",{data:t,imageElement:n});}),l();})["catch"](function(t){if("error"!==e.status&&"aborted"!==e.status)throw t;"error"==e.status&&t&&r.showWarning(t,{title:n("Upload failed"),namespace:"upload"}),i.enqueueChange("transparent",function(t){t.remove(a.get(e.id));}),l();});function l(){i.enqueueChange("transparent",function(t){var i=a.get(e.id);t.removeAttribute("uploadId",i),t.removeAttribute("uploadStatus",i),a["delete"](e.id);}),o.destroyLoader(e);}}},{key:"_parseAndSetSrcsetAttributeOnImage",value:function _parseAndSetSrcsetAttributeOnImage(e,t,i){var n=0;var o=Object.keys(e).filter(function(e){var t=parseInt(e,10);if(!isNaN(t))return n=Math.max(n,t),!0;}).map(function(t){return"".concat(e[t]," ").concat(t,"w");}).join(", ");""!=o&&i.setAttribute("srcset",{data:o,width:n},t);}}],[{key:"requires",get:function get(){return[lm,Od,Wu,rf];}},{key:"pluginName",get:function get(){return"ImageUploadEditing";}}]);return up;}(Qe);function hp(e,t){var i=e.plugins.get("ImageUtils");return Array.from(e.model.createRangeOn(t)).filter(function(e){return i.isImage(e.item);}).map(function(e){return e.item;});}var gp=/*#__PURE__*/function(_Qe67){_inherits(gp,_Qe67);var _super183=_createSuper(gp);function gp(){_classCallCheck(this,gp);return _super183.apply(this,arguments);}_createClass(gp,[{key:"init",value:function init(){var e=this.editor;e.commands.add("indent",new et(e)),e.commands.add("outdent",new et(e));}}],[{key:"pluginName",get:function get(){return"IndentEditing";}}]);return gp;}(Qe);var mp='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zM1.632 6.95 5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>',fp='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zm1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>';var pp=/*#__PURE__*/function(_Qe68){_inherits(pp,_Qe68);var _super184=_createSuper(pp);function pp(){_classCallCheck(this,pp);return _super184.apply(this,arguments);}_createClass(pp,[{key:"init",value:function init(){var e=this.editor,t=e.locale,i=e.t,n="ltr"==t.uiLanguageDirection?mp:fp,o="ltr"==t.uiLanguageDirection?fp:mp;this._defineButton("indent",i("Increase indent"),n),this._defineButton("outdent",i("Decrease indent"),o);}},{key:"_defineButton",value:function _defineButton(e,t,i){var _this264=this;var n=this.editor;n.ui.componentFactory.add(e,function(o){var r=n.commands.get(e),s=new Xc(o);return s.set({label:t,icon:i,tooltip:!0}),s.bind("isOn","isEnabled").to(r,"value","isEnabled"),_this264.listenTo(s,"execute",function(){n.execute(e),n.editing.view.focus();}),s;});}}],[{key:"pluginName",get:function get(){return"IndentUI";}}]);return pp;}(Qe);var bp=/*#__PURE__*/function(_Ze23){_inherits(bp,_Ze23);var _super185=_createSuper(bp);function bp(e,t){var _this265;_classCallCheck(this,bp);_this265=_super185.call(this,e),_this265._indentBehavior=t;return _this265;}_createClass(bp,[{key:"refresh",value:function refresh(){var e=this.editor.model,t=Ns(e.document.selection.getSelectedBlocks());t&&e.schema.checkAttribute(t,"blockIndent")?this.isEnabled=this._indentBehavior.checkEnabled(t.getAttribute("blockIndent")):this.isEnabled=!1;}},{key:"execute",value:function execute(){var _this266=this;var e=this.editor.model,t=function(e){var t=e.document.selection,i=e.schema;return Array.from(t.getSelectedBlocks()).filter(function(e){return i.checkAttribute(e,"blockIndent");});}(e);e.change(function(e){var _iterator380=_createForOfIteratorHelper(t),_step380;try{for(_iterator380.s();!(_step380=_iterator380.n()).done;){var _i276=_step380.value;var _t262=_i276.getAttribute("blockIndent"),_n160=_this266._indentBehavior.getNextIndent(_t262);_n160?e.setAttribute("blockIndent",_n160,_i276):e.removeAttribute("blockIndent",_i276);}}catch(err){_iterator380.e(err);}finally{_iterator380.f();}});}}]);return bp;}(Ze);var wp=/*#__PURE__*/function(){function wp(e){_classCallCheck(this,wp);this.isForward="forward"===e.direction,this.offset=e.offset,this.unit=e.unit;}_createClass(wp,[{key:"checkEnabled",value:function checkEnabled(e){var t=parseFloat(e||0);return this.isForward||t>0;}},{key:"getNextIndent",value:function getNextIndent(e){var t=parseFloat(e||0);if(!(!e||e.endsWith(this.unit)))return this.isForward?this.offset+this.unit:void 0;var i=t+(this.isForward?this.offset:-this.offset);return i>0?i+this.unit:void 0;}}]);return wp;}();var kp=/*#__PURE__*/function(){function kp(e){_classCallCheck(this,kp);this.isForward="forward"===e.direction,this.classes=e.classes;}_createClass(kp,[{key:"checkEnabled",value:function checkEnabled(e){var t=this.classes.indexOf(e);return this.isForward?t<this.classes.length-1:t>=0;}},{key:"getNextIndent",value:function getNextIndent(e){var t=this.classes.indexOf(e),i=this.isForward?1:-1;return this.classes[t+i];}}]);return kp;}();var _p=["paragraph","heading1","heading2","heading3","heading4","heading5","heading6"];var vp=/*#__PURE__*/function(){function vp(){_classCallCheck(this,vp);this._definitions=new Set();}_createClass(vp,[{key:"length",get:function get(){return this._definitions.size;}},{key:"add",value:function add(e){var _this267=this;Array.isArray(e)?e.forEach(function(e){return _this267._definitions.add(e);}):this._definitions.add(e);}},{key:"getDispatcher",value:function getDispatcher(){var _this268=this;return function(e){e.on("attribute:linkHref",function(e,t,i){if(!i.consumable.test(t.item,"attribute:linkHref"))return;var n=i.writer,o=n.document.selection;var _iterator381=_createForOfIteratorHelper(_this268._definitions),_step381;try{for(_iterator381.s();!(_step381=_iterator381.n()).done;){var _e282=_step381.value;var _r57=n.createAttributeElement("a",_e282.attributes,{priority:5});_e282.classes&&n.addClass(_e282.classes,_r57);for(var _t263 in _e282.styles){n.setStyle(_t263,_e282.styles[_t263],_r57);}n.setCustomProperty("link",!0,_r57),_e282.callback(t.attributeNewValue)?t.item.is("selection")?n.wrap(o.getFirstRange(),_r57):n.wrap(i.mapper.toViewRange(t.range),_r57):n.unwrap(i.mapper.toViewRange(t.range),_r57);}}catch(err){_iterator381.e(err);}finally{_iterator381.f();}},{priority:"high"});};}},{key:"getDispatcherForLinkedImage",value:function getDispatcherForLinkedImage(){var _this269=this;return function(e){e.on("attribute:linkHref:imageBlock",function(e,t,_ref70){var i=_ref70.writer,n=_ref70.mapper;var o=n.toViewElement(t.item),r=Array.from(o.getChildren()).find(function(e){return"a"===e.name;});var _iterator382=_createForOfIteratorHelper(_this269._definitions),_step382;try{for(_iterator382.s();!(_step382=_iterator382.n()).done;){var _e283=_step382.value;var _n161=gn(_e283.attributes);if(_e283.callback(t.attributeNewValue)){var _iterator383=_createForOfIteratorHelper(_n161),_step383;try{for(_iterator383.s();!(_step383=_iterator383.n()).done;){var _step383$value=_slicedToArray(_step383.value,2),_e284=_step383$value[0],_t265=_step383$value[1];"class"===_e284?i.addClass(_t265,r):i.setAttribute(_e284,_t265,r);}}catch(err){_iterator383.e(err);}finally{_iterator383.f();}_e283.classes&&i.addClass(_e283.classes,r);for(var _t264 in _e283.styles){i.setStyle(_t264,_e283.styles[_t264],r);}}else{var _iterator384=_createForOfIteratorHelper(_n161),_step384;try{for(_iterator384.s();!(_step384=_iterator384.n()).done;){var _step384$value=_slicedToArray(_step384.value,2),_e285=_step384$value[0],_t267=_step384$value[1];"class"===_e285?i.removeClass(_t267,r):i.removeAttribute(_e285,r);}}catch(err){_iterator384.e(err);}finally{_iterator384.f();}_e283.classes&&i.removeClass(_e283.classes,r);for(var _t266 in _e283.styles){i.removeStyle(_t266,r);}}}}catch(err){_iterator382.e(err);}finally{_iterator382.f();}});};}}]);return vp;}();var yp=function yp(e,t,i){var n=e.length;return i=void 0===i?n:i,!t&&i>=n?e:On(e,t,i);},xp=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var Ap=function Ap(e){return xp.test(e);};var Cp=function Cp(e){return e.split("");},Tp="[\\ud800-\\udfff]",Ep="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Ip="\\ud83c[\\udffb-\\udfff]",Sp="[^\\ud800-\\udfff]",Pp="(?:\\ud83c[\\udde6-\\uddff]){2}",Mp="[\\ud800-\\udbff][\\udc00-\\udfff]",Np="(?:"+Ep+"|"+Ip+")"+"?",Rp="[\\ufe0e\\ufe0f]?"+Np+("(?:\\u200d(?:"+[Sp,Pp,Mp].join("|")+")[\\ufe0e\\ufe0f]?"+Np+")*"),zp="(?:"+[Sp+Ep+"?",Ep,Pp,Mp,Tp].join("|")+")",Op=RegExp(Ip+"(?="+Ip+")|"+zp+Rp,"g");var Dp=function Dp(e){return e.match(Op)||[];};var Lp=function Lp(e){return Ap(e)?Dp(e):Cp(e);};var Vp=function(e){return function(t){t=Pn(t);var i=Ap(t)?Lp(t):void 0,n=i?i[0]:t.charAt(0),o=i?yp(i,1).join(""):t.slice(1);return n[e]()+o;};}("toUpperCase");var Bp=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,jp=/^(?:(?:https?|ftps?|mailto):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))/i,Fp=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,Hp=/^((\w+:(\/{2,})?)|(\W))/i;function Up(e,_ref71){var t=_ref71.writer;var i=t.createAttributeElement("a",{href:e},{priority:5});return t.setCustomProperty("link",!0,i),i;}function Wp(e){return function(e){return e.replace(Bp,"").match(jp);}(e=String(e))?e:"#";}function qp(e,t){return!!e&&t.checkAttribute(e.name,"linkHref");}function $p(e,t){var i=(n=e,Fp.test(n)?"mailto:":t);var n;var o=!!i&&!Hp.test(e);return e&&o?i+e:e;}var Yp=/*#__PURE__*/function(_Ze24){_inherits(Yp,_Ze24);var _super186=_createSuper(Yp);function Yp(e){var _this270;_classCallCheck(this,Yp);_this270=_super186.call(this,e),_this270.manualDecorators=new Zi(),_this270.automaticDecorators=new vp();return _this270;}_createClass(Yp,[{key:"restoreManualDecoratorStates",value:function restoreManualDecoratorStates(){var _iterator385=_createForOfIteratorHelper(this.manualDecorators),_step385;try{for(_iterator385.s();!(_step385=_iterator385.n()).done;){var _e286=_step385.value;_e286.value=this._getDecoratorStateFromModel(_e286.id);}}catch(err){_iterator385.e(err);}finally{_iterator385.f();}}},{key:"refresh",value:function refresh(){var e=this.editor.model,t=e.document.selection,i=t.getSelectedElement()||Ns(t.getSelectedBlocks());qp(i,e.schema)?(this.value=i.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttribute(i,"linkHref")):(this.value=t.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttributeInSelection(t,"linkHref"));var _iterator386=_createForOfIteratorHelper(this.manualDecorators),_step386;try{for(_iterator386.s();!(_step386=_iterator386.n()).done;){var _e287=_step386.value;_e287.value=this._getDecoratorStateFromModel(_e287.id);}}catch(err){_iterator386.e(err);}finally{_iterator386.f();}}},{key:"execute",value:function execute(e){var _this271=this;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=this.editor.model,n=i.document.selection,o=[],r=[];for(var _e288 in t){t[_e288]?o.push(_e288):r.push(_e288);}i.change(function(t){if(n.isCollapsed){var _s33=n.getFirstPosition();if(n.hasAttribute("linkHref")){var _a20=fg(_s33,"linkHref",n.getAttribute("linkHref"),i);t.setAttribute("linkHref",e,_a20),o.forEach(function(e){t.setAttribute(e,!0,_a20);}),r.forEach(function(e){t.removeAttribute(e,_a20);}),t.setSelection(t.createPositionAfter(_a20.end.nodeBefore));}else if(""!==e){var _r58=gn(n.getAttributes());_r58.set("linkHref",e),o.forEach(function(e){_r58.set(e,!0);});var _i$insertContent=i.insertContent(t.createText(e,_r58),_s33),_a21=_i$insertContent.end;t.setSelection(_a21);}["linkHref"].concat(o,r).forEach(function(e){t.removeSelectionAttribute(e);});}else{var _s34=i.schema.getValidRanges(n.getRanges(),"linkHref"),_a22=[];var _iterator387=_createForOfIteratorHelper(n.getSelectedBlocks()),_step387;try{for(_iterator387.s();!(_step387=_iterator387.n()).done;){var _e289=_step387.value;i.schema.checkAttribute(_e289,"linkHref")&&_a22.push(t.createRangeOn(_e289));}}catch(err){_iterator387.e(err);}finally{_iterator387.f();}var _l11=_a22.slice();var _iterator388=_createForOfIteratorHelper(_s34),_step388;try{for(_iterator388.s();!(_step388=_iterator388.n()).done;){var _e290=_step388.value;_this271._isRangeToUpdate(_e290,_a22)&&_l11.push(_e290);}}catch(err){_iterator388.e(err);}finally{_iterator388.f();}var _iterator389=_createForOfIteratorHelper(_l11),_step389;try{var _loop9=function _loop9(){var i=_step389.value;t.setAttribute("linkHref",e,i),o.forEach(function(e){t.setAttribute(e,!0,i);}),r.forEach(function(e){t.removeAttribute(e,i);});};for(_iterator389.s();!(_step389=_iterator389.n()).done;){_loop9();}}catch(err){_iterator389.e(err);}finally{_iterator389.f();}}});}},{key:"_getDecoratorStateFromModel",value:function _getDecoratorStateFromModel(e){var t=this.editor.model,i=t.document.selection,n=i.getSelectedElement();return qp(n,t.schema)?n.getAttribute(e):i.getAttribute(e);}},{key:"_isRangeToUpdate",value:function _isRangeToUpdate(e,t){var _iterator390=_createForOfIteratorHelper(t),_step390;try{for(_iterator390.s();!(_step390=_iterator390.n()).done;){var _i277=_step390.value;if(_i277.containsRange(e))return!1;}}catch(err){_iterator390.e(err);}finally{_iterator390.f();}return!0;}}]);return Yp;}(Ze);var Gp=/*#__PURE__*/function(_Ze25){_inherits(Gp,_Ze25);var _super187=_createSuper(Gp);function Gp(){_classCallCheck(this,Gp);return _super187.apply(this,arguments);}_createClass(Gp,[{key:"refresh",value:function refresh(){var e=this.editor.model,t=e.document.selection,i=t.getSelectedElement();qp(i,e.schema)?this.isEnabled=e.schema.checkAttribute(i,"linkHref"):this.isEnabled=e.schema.checkAttributeInSelection(t,"linkHref");}},{key:"execute",value:function execute(){var e=this.editor,t=this.editor.model,i=t.document.selection,n=e.commands.get("link");t.change(function(e){var o=i.isCollapsed?[fg(i.getFirstPosition(),"linkHref",i.getAttribute("linkHref"),t)]:t.schema.getValidRanges(i.getRanges(),"linkHref");var _iterator391=_createForOfIteratorHelper(o),_step391;try{for(_iterator391.s();!(_step391=_iterator391.n()).done;){var _t268=_step391.value;if(e.removeAttribute("linkHref",_t268),n){var _iterator392=_createForOfIteratorHelper(n.manualDecorators),_step392;try{for(_iterator392.s();!(_step392=_iterator392.n()).done;){var _i278=_step392.value;e.removeAttribute(_i278.id,_t268);}}catch(err){_iterator392.e(err);}finally{_iterator392.f();}}}}catch(err){_iterator391.e(err);}finally{_iterator391.f();}});}}]);return Gp;}(Ze);var Kp=/*#__PURE__*/function(){function Kp(_ref72){var e=_ref72.id,t=_ref72.label,i=_ref72.attributes,n=_ref72.classes,o=_ref72.styles,r=_ref72.defaultValue;_classCallCheck(this,Kp);this.id=e,this.set("value"),this.defaultValue=r,this.label=t,this.attributes=i,this.classes=n,this.styles=o;}_createClass(Kp,[{key:"_createPattern",value:function _createPattern(){return{attributes:this.attributes,classes:this.classes,styles:this.styles};}}]);return Kp;}();Ke(Kp,Ue);i(92);var Qp=/^(https?:)?\/\//;var Jp=/*#__PURE__*/function(_Qe69){_inherits(Jp,_Qe69);var _super188=_createSuper(Jp);function Jp(e){var _this272;_classCallCheck(this,Jp);_this272=_super188.call(this,e),e.config.define("link",{addTargetToExternalLinks:!1});return _this272;}_createClass(Jp,[{key:"init",value:function init(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:"linkHref"}),e.conversion["for"]("dataDowncast").attributeToElement({model:"linkHref",view:Up}),e.conversion["for"]("editingDowncast").attributeToElement({model:"linkHref",view:function view(e,t){return Up(Wp(e),t);}}),e.conversion["for"]("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:function value(e){return e.getAttribute("href");}}}),e.commands.add("link",new Yp(e)),e.commands.add("unlink",new Gp(e));var t=function(e,t){var i={"Open in a new tab":e("Open in a new tab"),Downloadable:e("Downloadable")};return t.forEach(function(e){return e.label&&i[e.label]&&(e.label=i[e.label]),e;}),t;}(e.t,function(e){var t=[];if(e)for(var _i279=0,_Object$entries2=Object.entries(e);_i279<_Object$entries2.length;_i279++){var _Object$entries2$_i=_slicedToArray(_Object$entries2[_i279],2),_i280=_Object$entries2$_i[0],_n162=_Object$entries2$_i[1];var _e291=Object.assign({},_n162,{id:"link"+Vp(_i280)});t.push(_e291);}return t;}(e.config.get("link.decorators")));this._enableAutomaticDecorators(t.filter(function(e){return"automatic"===e.mode;})),this._enableManualDecorators(t.filter(function(e){return"manual"===e.mode;}));e.plugins.get(eg).registerAttribute("linkHref"),function(e,t,i,n){var o=e.editing.view,r=new Set();o.document.registerPostFixer(function(o){var s=e.model.document.selection;var a=!1;if(s.hasAttribute(t)){var _l12=fg(s.getFirstPosition(),t,s.getAttribute(t),e.model),_c6=e.editing.mapper.toViewRange(_l12);var _iterator393=_createForOfIteratorHelper(_c6.getItems()),_step393;try{for(_iterator393.s();!(_step393=_iterator393.n()).done;){var _e292=_step393.value;_e292.is("element",i)&&!_e292.hasClass(n)&&(o.addClass(n,_e292),r.add(_e292),a=!0);}}catch(err){_iterator393.e(err);}finally{_iterator393.f();}}return a;}),e.conversion["for"]("editingDowncast").add(function(e){function t(){o.change(function(e){var _iterator394=_createForOfIteratorHelper(r.values()),_step394;try{for(_iterator394.s();!(_step394=_iterator394.n()).done;){var _t269=_step394.value;e.removeClass(n,_t269),r["delete"](_t269);}}catch(err){_iterator394.e(err);}finally{_iterator394.f();}});}e.on("insert",t,{priority:"highest"}),e.on("remove",t,{priority:"highest"}),e.on("attribute",t,{priority:"highest"}),e.on("selection",t,{priority:"highest"});});}(e,"linkHref","a","ck-link_selected"),this._enableInsertContentSelectionAttributesFixer(),this._enableClickingAfterLink(),this._enableTypingOverLink(),this._handleDeleteContentAfterLink();}},{key:"_enableAutomaticDecorators",value:function _enableAutomaticDecorators(e){var t=this.editor,i=t.commands.get("link").automaticDecorators;t.config.get("link.addTargetToExternalLinks")&&i.add({id:"linkIsExternal",mode:"automatic",callback:function callback(e){return Qp.test(e);},attributes:{target:"_blank",rel:"noopener noreferrer"}}),i.add(e),i.length&&t.conversion["for"]("downcast").add(i.getDispatcher());}},{key:"_enableManualDecorators",value:function _enableManualDecorators(e){if(!e.length)return;var t=this.editor,i=t.commands.get("link").manualDecorators;e.forEach(function(e){t.model.schema.extend("$text",{allowAttributes:e.id}),e=new Kp(e),i.add(e),t.conversion["for"]("downcast").attributeToElement({model:e.id,view:function view(t,_ref73){var i=_ref73.writer;if(t){var _t270=i.createAttributeElement("a",e.attributes,{priority:5});e.classes&&i.addClass(e.classes,_t270);for(var _n163 in e.styles){i.setStyle(_n163,e.styles[_n163],_t270);}return i.setCustomProperty("link",!0,_t270),_t270;}}}),t.conversion["for"]("upcast").elementToAttribute({view:_objectSpread({name:"a"},e._createPattern()),model:{key:e.id}});});}},{key:"_enableInsertContentSelectionAttributesFixer",value:function _enableInsertContentSelectionAttributesFixer(){var e=this.editor.model,t=e.document.selection;this.listenTo(e,"insertContent",function(){var i=t.anchor.nodeBefore,n=t.anchor.nodeAfter;t.hasAttribute("linkHref")&&i&&i.hasAttribute("linkHref")&&(n&&n.hasAttribute("linkHref")||e.change(function(t){Zp(t,eb(e.schema));}));},{priority:"low"});}},{key:"_enableClickingAfterLink",value:function _enableClickingAfterLink(){var e=this.editor,t=e.model;e.editing.view.addObserver(uu);var i=!1;this.listenTo(e.editing.view.document,"mousedown",function(){i=!0;}),this.listenTo(e.editing.view.document,"selectionChange",function(){if(!i)return;i=!1;var e=t.document.selection;if(!e.isCollapsed)return;if(!e.hasAttribute("linkHref"))return;var n=e.getFirstPosition(),o=fg(n,"linkHref",e.getAttribute("linkHref"),t);(n.isTouching(o.start)||n.isTouching(o.end))&&t.change(function(e){Zp(e,eb(t.schema));});});}},{key:"_enableTypingOverLink",value:function _enableTypingOverLink(){var e=this.editor,t=e.editing.view;var i,n;this.listenTo(t.document,"delete",function(){n=!0;},{priority:"high"}),this.listenTo(e.model,"deleteContent",function(){var t=e.model.document.selection;t.isCollapsed||(n?n=!1:Xp(e)&&function(e){var t=e.document.selection,i=t.getFirstPosition(),n=t.getLastPosition(),o=i.nodeAfter;if(!o)return!1;if(!o.is("$text"))return!1;if(!o.hasAttribute("linkHref"))return!1;var r=n.textNode||n.nodeBefore;if(o===r)return!0;return fg(i,"linkHref",o.getAttribute("linkHref"),e).containsRange(e.createRange(i,n),!0);}(e.model)&&(i=t.getAttributes()));},{priority:"high"}),this.listenTo(e.model,"insertContent",function(t,_ref74){var _ref75=_slicedToArray(_ref74,1),o=_ref75[0];n=!1,Xp(e)&&i&&(e.model.change(function(e){var _iterator395=_createForOfIteratorHelper(i),_step395;try{for(_iterator395.s();!(_step395=_iterator395.n()).done;){var _step395$value=_slicedToArray(_step395.value,2),_t271=_step395$value[0],_n164=_step395$value[1];e.setAttribute(_t271,_n164,o);}}catch(err){_iterator395.e(err);}finally{_iterator395.f();}}),i=null);},{priority:"high"});}},{key:"_handleDeleteContentAfterLink",value:function _handleDeleteContentAfterLink(){var e=this.editor,t=e.model,i=t.document.selection,n=e.editing.view;var o=!1,r=!1;this.listenTo(n.document,"delete",function(e,t){r=t.domEvent.keyCode===No.backspace;},{priority:"high"}),this.listenTo(t,"deleteContent",function(){o=!1;var e=i.getFirstPosition(),n=i.getAttribute("linkHref");if(!n)return;var r=fg(e,"linkHref",n,t);o=r.containsPosition(e)||r.end.isEqual(e);},{priority:"high"}),this.listenTo(t,"deleteContent",function(){r&&(r=!1,o||e.model.enqueueChange(function(e){Zp(e,eb(t.schema));}));},{priority:"low"});}}],[{key:"pluginName",get:function get(){return"LinkEditing";}},{key:"requires",get:function get(){return[eg,Qh,Wu];}}]);return Jp;}(Qe);function Zp(e,t){e.removeSelectionAttribute("linkHref");var _iterator396=_createForOfIteratorHelper(t),_step396;try{for(_iterator396.s();!(_step396=_iterator396.n()).done;){var _i281=_step396.value;e.removeSelectionAttribute(_i281);}}catch(err){_iterator396.e(err);}finally{_iterator396.f();}}function Xp(e){return e.plugins.get("Input").isInput(e.model.change(function(e){return e.batch;}));}function eb(e){return e.getDefinition("$text").allowAttributes.filter(function(e){return e.startsWith("link");});}i(94);var tb=/*#__PURE__*/function(_Pc28){_inherits(tb,_Pc28);var _super189=_createSuper(tb);function tb(e,t){var _this273;_classCallCheck(this,tb);_this273=_super189.call(this,e);var i=e.t;_this273.focusTracker=new Rs(),_this273.keystrokes=new zs(),_this273.urlInputView=_this273._createUrlInput(),_this273.saveButtonView=_this273._createButton(i("Save"),Cc.check,"ck-button-save"),_this273.saveButtonView.type="submit",_this273.cancelButtonView=_this273._createButton(i("Cancel"),Cc.cancel,"ck-button-cancel","cancel"),_this273._manualDecoratorSwitches=_this273._createManualDecoratorSwitches(t),_this273.children=_this273._createFormChildren(t.manualDecorators),_this273._focusables=new Sc(),_this273._focusCycler=new nd({focusables:_this273._focusables,focusTracker:_this273.focusTracker,keystrokeHandler:_this273.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});var n=["ck","ck-link-form","ck-responsive-form"];t.manualDecorators.length&&n.push("ck-link-form_layout-vertical","ck-vertical-form"),_this273.setTemplate({tag:"form",attributes:{"class":n,tabindex:"-1"},children:_this273.children}),Ec(_assertThisInitialized(_this273));return _this273;}_createClass(tb,[{key:"getDecoratorSwitchesState",value:function getDecoratorSwitchesState(){return Array.from(this._manualDecoratorSwitches).reduce(function(e,t){return e[t.name]=t.isOn,e;},{});}},{key:"render",value:function render(){var _this274=this;_get(_getPrototypeOf(tb.prototype),"render",this).call(this),Ic({view:this});[this.urlInputView].concat(_toConsumableArray(this._manualDecoratorSwitches),[this.saveButtonView,this.cancelButtonView]).forEach(function(e){_this274._focusables.add(e),_this274.focusTracker.add(e.element);}),this.keystrokes.listenTo(this.element);}},{key:"focus",value:function focus(){this._focusCycler.focusFirst();}},{key:"_createUrlInput",value:function _createUrlInput(){var e=this.locale.t,t=new Rd(this.locale,zd);return t.label=e("Link URL"),t;}},{key:"_createButton",value:function _createButton(e,t,i,n){var o=new Xc(this.locale);return o.set({label:e,icon:t,tooltip:!0}),o.extendTemplate({attributes:{"class":i}}),n&&o.delegate("execute").to(this,n),o;}},{key:"_createManualDecoratorSwitches",value:function _createManualDecoratorSwitches(e){var _this275=this;var t=this.createCollection();var _iterator397=_createForOfIteratorHelper(e.manualDecorators),_step397;try{var _loop10=function _loop10(){var i=_step397.value;var n=new ed(_this275.locale);n.set({name:i.id,label:i.label,withText:!0}),n.bind("isOn").toMany([i,e],"value",function(e,t){return void 0===t&&void 0===e?i.defaultValue:e;}),n.on("execute",function(){i.set("value",!n.isOn);}),t.add(n);};for(_iterator397.s();!(_step397=_iterator397.n()).done;){_loop10();}}catch(err){_iterator397.e(err);}finally{_iterator397.f();}return t;}},{key:"_createFormChildren",value:function _createFormChildren(e){var t=this.createCollection();if(t.add(this.urlInputView),e.length){var _e293=new Pc();_e293.setTemplate({tag:"ul",children:this._manualDecoratorSwitches.map(function(e){return{tag:"li",children:[e],attributes:{"class":["ck","ck-list__item"]}};}),attributes:{"class":["ck","ck-reset","ck-list"]}}),t.add(_e293);}return t.add(this.saveButtonView),t.add(this.cancelButtonView),t;}}]);return tb;}(Pc);i(96);var ib=/*#__PURE__*/function(_Pc29){_inherits(ib,_Pc29);var _super190=_createSuper(ib);function ib(e){var _this276;_classCallCheck(this,ib);_this276=_super190.call(this,e);var t=e.t;_this276.focusTracker=new Rs(),_this276.keystrokes=new zs(),_this276.previewButtonView=_this276._createPreviewButton(),_this276.unlinkButtonView=_this276._createButton(t("Unlink"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>',"unlink"),_this276.editButtonView=_this276._createButton(t("Edit link"),Cc.pencil,"edit"),_this276.set("href"),_this276._focusables=new Sc(),_this276._focusCycler=new nd({focusables:_this276._focusables,focusTracker:_this276.focusTracker,keystrokeHandler:_this276.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),_this276.setTemplate({tag:"div",attributes:{"class":["ck","ck-link-actions","ck-responsive-form"],tabindex:"-1"},children:[_this276.previewButtonView,_this276.editButtonView,_this276.unlinkButtonView]});return _this276;}_createClass(ib,[{key:"render",value:function render(){var _this277=this;_get(_getPrototypeOf(ib.prototype),"render",this).call(this);[this.previewButtonView,this.editButtonView,this.unlinkButtonView].forEach(function(e){_this277._focusables.add(e),_this277.focusTracker.add(e.element);}),this.keystrokes.listenTo(this.element);}},{key:"focus",value:function focus(){this._focusCycler.focusFirst();}},{key:"_createButton",value:function _createButton(e,t,i){var n=new Xc(this.locale);return n.set({label:e,icon:t,tooltip:!0}),n.delegate("execute").to(this,i),n;}},{key:"_createPreviewButton",value:function _createPreviewButton(){var e=new Xc(this.locale),t=this.bindTemplate,i=this.t;return e.set({withText:!0,tooltip:i("Open link in new tab")}),e.extendTemplate({attributes:{"class":["ck","ck-link-actions__preview"],href:t.to("href",function(e){return e&&Wp(e);}),target:"_blank",rel:"noopener noreferrer"}}),e.bind("label").to(this,"href",function(e){return e||i("This link has no URL");}),e.bind("isEnabled").to(this,"href",function(e){return!!e;}),e.template.tag="a",e.template.eventListeners={},e;}}]);return ib;}(Pc);var nb=/*#__PURE__*/function(_Qe70){_inherits(nb,_Qe70);var _super191=_createSuper(nb);function nb(){_classCallCheck(this,nb);return _super191.apply(this,arguments);}_createClass(nb,[{key:"init",value:function init(){var e=this.editor;e.editing.view.addObserver(du),this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._balloon=e.plugins.get(Wd),this._createToolbarLinkButton(),this._enableUserBalloonInteractions(),e.conversion["for"]("editingDowncast").markerToHighlight({model:"link-ui",view:{classes:["ck-fake-link-selection"]}}),e.conversion["for"]("editingDowncast").markerToElement({model:"link-ui",view:{name:"span",classes:["ck-fake-link-selection","ck-fake-link-selection_collapsed"]}});}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(nb.prototype),"destroy",this).call(this),this.formView.destroy();}},{key:"_createActionsView",value:function _createActionsView(){var _this278=this;var e=this.editor,t=new ib(e.locale),i=e.commands.get("link"),n=e.commands.get("unlink");return t.bind("href").to(i,"value"),t.editButtonView.bind("isEnabled").to(i),t.unlinkButtonView.bind("isEnabled").to(n),this.listenTo(t,"edit",function(){_this278._addFormView();}),this.listenTo(t,"unlink",function(){e.execute("unlink"),_this278._hideUI();}),t.keystrokes.set("Esc",function(e,t){_this278._hideUI(),t();}),t.keystrokes.set("Ctrl+K",function(e,t){_this278._addFormView(),t();}),t;}},{key:"_createFormView",value:function _createFormView(){var _this279=this;var e=this.editor,t=e.commands.get("link"),i=e.config.get("link.defaultProtocol"),n=new tb(e.locale,t);return n.urlInputView.fieldView.bind("value").to(t,"value"),n.urlInputView.bind("isReadOnly").to(t,"isEnabled",function(e){return!e;}),n.saveButtonView.bind("isEnabled").to(t),this.listenTo(n,"submit",function(){var t=n.urlInputView.fieldView.element.value,o=$p(t,i);e.execute("link",o,n.getDecoratorSwitchesState()),_this279._closeFormView();}),this.listenTo(n,"cancel",function(){_this279._closeFormView();}),n.keystrokes.set("Esc",function(e,t){_this279._closeFormView(),t();}),n;}},{key:"_createToolbarLinkButton",value:function _createToolbarLinkButton(){var _this280=this;var e=this.editor,t=e.commands.get("link"),i=e.t;e.keystrokes.set("Ctrl+K",function(e,i){i(),t.isEnabled&&_this280._showUI(!0);}),e.ui.componentFactory.add("link",function(e){var n=new Xc(e);return n.isEnabled=!0,n.label=i("Link"),n.icon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>',n.keystroke="Ctrl+K",n.tooltip=!0,n.isToggleable=!0,n.bind("isEnabled").to(t,"isEnabled"),n.bind("isOn").to(t,"value",function(e){return!!e;}),_this280.listenTo(n,"execute",function(){return _this280._showUI(!0);}),n;});}},{key:"_enableUserBalloonInteractions",value:function _enableUserBalloonInteractions(){var _this281=this;var e=this.editor.editing.view.document;this.listenTo(e,"click",function(){_this281._getSelectedLinkElement()&&_this281._showUI();}),this.editor.keystrokes.set("Tab",function(e,t){_this281._areActionsVisible&&!_this281.actionsView.focusTracker.isFocused&&(_this281.actionsView.focus(),t());},{priority:"high"}),this.editor.keystrokes.set("Esc",function(e,t){_this281._isUIVisible&&(_this281._hideUI(),t());}),Tc({emitter:this.formView,activator:function activator(){return _this281._isUIInPanel;},contextElements:[this._balloon.view.element],callback:function callback(){return _this281._hideUI();}});}},{key:"_addActionsView",value:function _addActionsView(){this._areActionsInPanel||this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()});}},{key:"_addFormView",value:function _addFormView(){if(this._isFormInPanel)return;var e=this.editor.commands.get("link");this.formView.disableCssTransitions(),this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions(),this.formView.urlInputView.fieldView.element.value=e.value||"";}},{key:"_closeFormView",value:function _closeFormView(){var e=this.editor.commands.get("link");e.restoreManualDecoratorStates(),void 0!==e.value?this._removeFormView():this._hideUI();}},{key:"_removeFormView",value:function _removeFormView(){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),this._hideFakeVisualSelection());}},{key:"_showUI",value:function _showUI(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:!1;this._getSelectedLinkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),e&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addActionsView(),e&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI();}},{key:"_hideUI",value:function _hideUI(){if(!this._isUIInPanel)return;var e=this.editor;this.stopListening(e.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),e.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView),this._hideFakeVisualSelection();}},{key:"_startUpdatingUI",value:function _startUpdatingUI(){var _this282=this;var e=this.editor,t=e.editing.view.document;var i=this._getSelectedLinkElement(),n=r();var o=function o(){var e=_this282._getSelectedLinkElement(),t=r();i&&!e||!i&&t!==n?_this282._hideUI():_this282._isUIVisible&&_this282._balloon.updatePosition(_this282._getBalloonPositionData()),i=e,n=t;};function r(){return t.selection.focus.getAncestors().reverse().find(function(e){return e.is("element");});}this.listenTo(e.ui,"update",o),this.listenTo(this._balloon,"change:visibleView",o);}},{key:"_isFormInPanel",get:function get(){return this._balloon.hasView(this.formView);}},{key:"_areActionsInPanel",get:function get(){return this._balloon.hasView(this.actionsView);}},{key:"_areActionsVisible",get:function get(){return this._balloon.visibleView===this.actionsView;}},{key:"_isUIInPanel",get:function get(){return this._isFormInPanel||this._areActionsInPanel;}},{key:"_isUIVisible",get:function get(){return this._balloon.visibleView==this.formView||this._areActionsVisible;}},{key:"_getBalloonPositionData",value:function _getBalloonPositionData(){var _this283=this;var e=this.editor.editing.view,t=this.editor.model,i=e.document;var n=null;if(t.markers.has("link-ui")){var _t272=Array.from(this.editor.editing.mapper.markerNameToElements("link-ui")),_i282=e.createRange(e.createPositionBefore(_t272[0]),e.createPositionAfter(_t272[_t272.length-1]));n=e.domConverter.viewRangeToDom(_i282);}else n=function n(){var t=_this283._getSelectedLinkElement();return t?e.domConverter.mapViewToDom(t):e.domConverter.viewRangeToDom(i.selection.getFirstRange());};return{target:n};}},{key:"_getSelectedLinkElement",value:function _getSelectedLinkElement(){var e=this.editor.editing.view,t=e.document.selection,i=t.getSelectedElement();if(t.isCollapsed||i&&oh(i))return ob(t.getFirstPosition());{var _i283=t.getFirstRange().getTrimmed(),_n165=ob(_i283.start),_o101=ob(_i283.end);return _n165&&_n165==_o101&&e.createRangeIn(_n165).getTrimmed().isEqual(_i283)?_n165:null;}}},{key:"_showFakeVisualSelection",value:function _showFakeVisualSelection(){var e=this.editor.model;e.change(function(t){var i=e.document.selection.getFirstRange();if(e.markers.has("link-ui"))t.updateMarker("link-ui",{range:i});else if(i.start.isAtEnd){var _n166=i.start.getLastMatchingPosition(function(_ref76){var t=_ref76.item;return!e.schema.isContent(t);},{boundaries:i});t.addMarker("link-ui",{usingOperation:!1,affectsData:!1,range:t.createRange(_n166,i.end)});}else t.addMarker("link-ui",{usingOperation:!1,affectsData:!1,range:i});});}},{key:"_hideFakeVisualSelection",value:function _hideFakeVisualSelection(){var e=this.editor.model;e.markers.has("link-ui")&&e.change(function(e){e.removeMarker("link-ui");});}}],[{key:"requires",get:function get(){return[Wd];}},{key:"pluginName",get:function get(){return"LinkUI";}}]);return nb;}(Qe);function ob(e){return e.getAncestors().find(function(e){return(t=e).is("attributeElement")&&!!t.getCustomProperty("link");var t;});}var rb=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63})))(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i");var sb=/*#__PURE__*/function(_Qe71){_inherits(sb,_Qe71);var _super192=_createSuper(sb);function sb(){_classCallCheck(this,sb);return _super192.apply(this,arguments);}_createClass(sb,[{key:"init",value:function init(){var _this284=this;var e=this.editor.model.document.selection;e.on("change:range",function(){_this284.isEnabled=!e.anchor.parent.is("element","codeBlock");}),this._enableTypingHandling();}},{key:"afterInit",value:function afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling();}},{key:"_enableTypingHandling",value:function _enableTypingHandling(){var _this285=this;var e=this.editor,t=new Xh(e.model,function(e){if(!function(e){return e.length>4&&" "===e[e.length-1]&&" "!==e[e.length-2];}(e))return;var t=ab(e.substr(0,e.length-1));return t?{url:t}:void 0;}),i=e.plugins.get("Input");t.on("matched:data",function(t,n){var o=n.batch,r=n.range,s=n.url;if(!i.isInput(o))return;var a=r.end.getShiftedBy(-1),l=a.getShiftedBy(-s.length),c=e.model.createRange(l,a);_this285._applyAutoLink(s,c);}),t.bind("isEnabled").to(this);}},{key:"_enableEnterHandling",value:function _enableEnterHandling(){var _this286=this;var e=this.editor,t=e.model,i=e.commands.get("enter");i&&i.on("execute",function(){var e=t.document.selection.getFirstPosition();if(!e.parent.previousSibling)return;var i=t.createRangeIn(e.parent.previousSibling);_this286._checkAndApplyAutoLinkOnRange(i);});}},{key:"_enableShiftEnterHandling",value:function _enableShiftEnterHandling(){var _this287=this;var e=this.editor,t=e.model,i=e.commands.get("shiftEnter");i&&i.on("execute",function(){var e=t.document.selection.getFirstPosition(),i=t.createRange(t.createPositionAt(e.parent,0),e.getShiftedBy(-1));_this287._checkAndApplyAutoLinkOnRange(i);});}},{key:"_checkAndApplyAutoLinkOnRange",value:function _checkAndApplyAutoLinkOnRange(e){var t=this.editor.model,_Zh2=Zh(e,t),i=_Zh2.text,n=_Zh2.range,o=ab(i);if(o){var _e294=t.createRange(n.end.getShiftedBy(-o.length),n.end);this._applyAutoLink(o,_e294);}}},{key:"_applyAutoLink",value:function _applyAutoLink(e,t){var _this288=this;var i=this.editor.model;this.isEnabled&&function(e,t){return t.schema.checkAttributeInSelection(t.createSelection(e),"linkHref");}(t,i)&&i.enqueueChange(function(i){var n=_this288.editor.config.get("link.defaultProtocol"),o=$p(e,n);i.setAttribute("linkHref",o,t);});}}],[{key:"pluginName",get:function get(){return"AutoLink";}}]);return sb;}(Qe);function ab(e){var t=rb.exec(e);return t?t[2]:null;}var lb=/*#__PURE__*/function(_Ze26){_inherits(lb,_Ze26);var _super193=_createSuper(lb);function lb(e,t){var _this289;_classCallCheck(this,lb);_this289=_super193.call(this,e),_this289.type=t;return _this289;}_createClass(lb,[{key:"refresh",value:function refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled();}},{key:"execute",value:function execute(){var _this290=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=this.editor.model,i=t.document,n=Array.from(i.selection.getSelectedBlocks()).filter(function(e){return db(e,t.schema);}),o=void 0!==e.forceValue?!e.forceValue:this.value;t.change(function(e){if(o){var _t273=n[n.length-1].nextSibling,_i284=Number.POSITIVE_INFINITY,_o102=[];for(;_t273&&"listItem"==_t273.name&&0!==_t273.getAttribute("listIndent");){var _e295=_t273.getAttribute("listIndent");_e295<_i284&&(_i284=_e295);var _n167=_e295-_i284;_o102.push({element:_t273,listIndent:_n167}),_t273=_t273.nextSibling;}_o102=_o102.reverse();var _iterator398=_createForOfIteratorHelper(_o102),_step398;try{for(_iterator398.s();!(_step398=_iterator398.n()).done;){var _t274=_step398.value;e.setAttribute("listIndent",_t274.listIndent,_t274.element);}}catch(err){_iterator398.e(err);}finally{_iterator398.f();}}if(!o){var _e296=Number.POSITIVE_INFINITY;var _iterator399=_createForOfIteratorHelper(n),_step399;try{for(_iterator399.s();!(_step399=_iterator399.n()).done;){var _t275=_step399.value;_t275.is("element","listItem")&&_t275.getAttribute("listIndent")<_e296&&(_e296=_t275.getAttribute("listIndent"));}}catch(err){_iterator399.e(err);}finally{_iterator399.f();}_e296=0===_e296?1:_e296,cb(n,!0,_e296),cb(n,!1,_e296);}var _iterator400=_createForOfIteratorHelper(n.reverse()),_step400;try{for(_iterator400.s();!(_step400=_iterator400.n()).done;){var _t276=_step400.value;o&&"listItem"==_t276.name?e.rename(_t276,"paragraph"):o||"listItem"==_t276.name?o||"listItem"!=_t276.name||_t276.getAttribute("listType")==_this290.type||e.setAttribute("listType",_this290.type,_t276):(e.setAttributes({listType:_this290.type,listIndent:0},_t276),e.rename(_t276,"listItem"));}}catch(err){_iterator400.e(err);}finally{_iterator400.f();}_this290.fire("_executeCleanup",n);});}},{key:"_getValue",value:function _getValue(){var e=Ns(this.editor.model.document.selection.getSelectedBlocks());return!!e&&e.is("element","listItem")&&e.getAttribute("listType")==this.type;}},{key:"_checkEnabled",value:function _checkEnabled(){if(this.value)return!0;var e=this.editor.model.document.selection,t=this.editor.model.schema,i=Ns(e.getSelectedBlocks());return!!i&&db(i,t);}}]);return lb;}(Ze);function cb(e,t,i){var n=t?e[0]:e[e.length-1];if(n.is("element","listItem")){var _o103=n[t?"previousSibling":"nextSibling"],_r59=n.getAttribute("listIndent");for(;_o103&&_o103.is("element","listItem")&&_o103.getAttribute("listIndent")>=i;){_r59>_o103.getAttribute("listIndent")&&(_r59=_o103.getAttribute("listIndent")),_o103.getAttribute("listIndent")==_r59&&e[t?"unshift":"push"](_o103),_o103=_o103[t?"previousSibling":"nextSibling"];}}}function db(e,t){return t.checkChild(e.parent,"listItem")&&!t.isObject(e);}var ub=/*#__PURE__*/function(_Ze27){_inherits(ub,_Ze27);var _super194=_createSuper(ub);function ub(e,t){var _this291;_classCallCheck(this,ub);_this291=_super194.call(this,e),_this291._indentBy="forward"==t?1:-1;return _this291;}_createClass(ub,[{key:"refresh",value:function refresh(){this.isEnabled=this._checkEnabled();}},{key:"execute",value:function execute(){var _this292=this;var e=this.editor.model,t=e.document;var i=Array.from(t.selection.getSelectedBlocks());e.change(function(e){var t=i[i.length-1];var n=t.nextSibling;for(;n&&"listItem"==n.name&&n.getAttribute("listIndent")>t.getAttribute("listIndent");){i.push(n),n=n.nextSibling;}_this292._indentBy<0&&(i=i.reverse());var _iterator401=_createForOfIteratorHelper(i),_step401;try{for(_iterator401.s();!(_step401=_iterator401.n()).done;){var _t277=_step401.value;var _i285=_t277.getAttribute("listIndent")+_this292._indentBy;_i285<0?e.rename(_t277,"paragraph"):e.setAttribute("listIndent",_i285,_t277);}}catch(err){_iterator401.e(err);}finally{_iterator401.f();}_this292.fire("_executeCleanup",i);});}},{key:"_checkEnabled",value:function _checkEnabled(){var e=Ns(this.editor.model.document.selection.getSelectedBlocks());if(!e||!e.is("element","listItem"))return!1;if(this._indentBy>0){var _t278=e.getAttribute("listIndent"),_i286=e.getAttribute("listType");var _n168=e.previousSibling;for(;_n168&&_n168.is("element","listItem")&&_n168.getAttribute("listIndent")>=_t278;){if(_n168.getAttribute("listIndent")==_t278)return _n168.getAttribute("listType")==_i286;_n168=_n168.previousSibling;}return!1;}return!0;}}]);return ub;}(Ze);function hb(e,t){var i=t.mapper,n=t.writer,o="numbered"==e.getAttribute("listType")?"ol":"ul",r=function(e){var t=e.createContainerElement("li");return t.getFillerOffset=kb,t;}(n),s=n.createContainerElement(o,null);return n.insert(n.createPositionAt(s,0),r),i.bindElements(e,r),r;}function gb(e,t,i,n){var o=t.parent,r=i.mapper,s=i.writer;var a=r.toViewPosition(n.createPositionBefore(e));var l=pb(e.previousSibling,{sameIndent:!0,smallerIndent:!0,listIndent:e.getAttribute("listIndent")}),c=e.previousSibling;if(l&&l.getAttribute("listIndent")==e.getAttribute("listIndent")){var _e297=r.toViewElement(l);a=s.breakContainer(s.createPositionAfter(_e297));}else if(c&&"listItem"==c.name){a=r.toViewPosition(n.createPositionAt(c,"end"));var _e298=r.findMappedViewAncestor(a),_t279=function(e){var _iterator402=_createForOfIteratorHelper(e.getChildren()),_step402;try{for(_iterator402.s();!(_step402=_iterator402.n()).done;){var _t280=_step402.value;if("ul"==_t280.name||"ol"==_t280.name)return _t280;}}catch(err){_iterator402.e(err);}finally{_iterator402.f();}return null;}(_e298);a=_t279?s.createPositionBefore(_t279):s.createPositionAt(_e298,"end");}else a=r.toViewPosition(n.createPositionBefore(e));if(a=fb(a),s.insert(a,o),c&&"listItem"==c.name){var _e299=r.toViewElement(c),_i287=s.createRange(s.createPositionAt(_e299,0),a).getWalker({ignoreElementEnd:!0});var _iterator403=_createForOfIteratorHelper(_i287),_step403;try{for(_iterator403.s();!(_step403=_iterator403.n()).done;){var _e300=_step403.value;if(_e300.item.is("element","li")){var _n169=s.breakContainer(s.createPositionBefore(_e300.item)),_o104=_e300.item.parent,_r60=s.createPositionAt(t,"end");mb(s,_r60.nodeBefore,_r60.nodeAfter),s.move(s.createRangeOn(_o104),_r60),_i287.position=_n169;}}}catch(err){_iterator403.e(err);}finally{_iterator403.f();}}else{var _i288=o.nextSibling;if(_i288&&(_i288.is("element","ul")||_i288.is("element","ol"))){var _n170=null;var _iterator404=_createForOfIteratorHelper(_i288.getChildren()),_step404;try{for(_iterator404.s();!(_step404=_iterator404.n()).done;){var _t281=_step404.value;var _i289=r.toModelElement(_t281);if(!(_i289&&_i289.getAttribute("listIndent")>e.getAttribute("listIndent")))break;_n170=_t281;}}catch(err){_iterator404.e(err);}finally{_iterator404.f();}_n170&&(s.breakContainer(s.createPositionAfter(_n170)),s.move(s.createRangeOn(_n170.parent),s.createPositionAt(t,"end")));}}mb(s,o,o.nextSibling),mb(s,o.previousSibling,o);}function mb(e,t,i){return!t||!i||"ul"!=t.name&&"ol"!=t.name||t.name!=i.name||t.getAttribute("class")!==i.getAttribute("class")?null:e.mergeContainers(e.createPositionAfter(t));}function fb(e){return e.getLastMatchingPosition(function(e){return e.item.is("uiElement");});}function pb(e,t){var i=!!t.sameIndent,n=!!t.smallerIndent,o=t.listIndent;var r=e;for(;r&&"listItem"==r.name;){var _e301=r.getAttribute("listIndent");if(i&&o==_e301||n&&o>_e301)return r;r="forward"===t.direction?r.nextSibling:r.previousSibling;}return null;}function bb(e,t,i,n){e.ui.componentFactory.add(t,function(o){var r=e.commands.get(t),s=new Xc(o);return s.set({label:i,icon:n,tooltip:!0,isToggleable:!0}),s.bind("isOn","isEnabled").to(r,"value","isEnabled"),s.on("execute",function(){e.execute(t),e.editing.view.focus();}),s;});}function wb(e,t){var i=[],n=e.parent,o={ignoreElementEnd:!0,startPosition:e,shallow:!0,direction:t},r=n.getAttribute("listIndent"),s=_toConsumableArray(new Zs(o)).filter(function(e){return e.item.is("element");}).map(function(e){return e.item;});var _iterator405=_createForOfIteratorHelper(s),_step405;try{for(_iterator405.s();!(_step405=_iterator405.n()).done;){var _e302=_step405.value;if(!_e302.is("element","listItem"))break;if(_e302.getAttribute("listIndent")<r)break;if(!(_e302.getAttribute("listIndent")>r)){if(_e302.getAttribute("listType")!==n.getAttribute("listType"))break;if(_e302.getAttribute("listStyle")!==n.getAttribute("listStyle"))break;"backward"===t?i.unshift(_e302):i.push(_e302);}}}catch(err){_iterator405.e(err);}finally{_iterator405.f();}return i;}function kb(){var e=!this.isEmpty&&("ul"==this.getChild(0).name||"ol"==this.getChild(0).name);return this.isEmpty||e?0:no.call(this);}function _b(e){return function(t,i,n){var o=n.consumable;if(!o.test(i.item,"insert")||!o.test(i.item,"attribute:listType")||!o.test(i.item,"attribute:listIndent"))return;o.consume(i.item,"insert"),o.consume(i.item,"attribute:listType"),o.consume(i.item,"attribute:listIndent");var r=i.item;gb(r,hb(r,n),n,e);};}function vb(e,t,i){if(!i.consumable.consume(t.item,"attribute:listType"))return;var n=i.mapper.toViewElement(t.item),o=i.writer;o.breakContainer(o.createPositionBefore(n)),o.breakContainer(o.createPositionAfter(n));var r=n.parent,s="numbered"==t.attributeNewValue?"ol":"ul";o.rename(s,r);}function yb(e,t,i){var n=i.mapper.toViewElement(t.item).parent,o=i.writer;mb(o,n,n.nextSibling),mb(o,n.previousSibling,n);var _iterator406=_createForOfIteratorHelper(t.item.getChildren()),_step406;try{for(_iterator406.s();!(_step406=_iterator406.n()).done;){var _e303=_step406.value;i.consumable.consume(_e303,"insert");}}catch(err){_iterator406.e(err);}finally{_iterator406.f();}}function xb(e,t,i){if("listItem"!=t.item.name){var _e304=i.mapper.toViewPosition(t.range.start);var _n171=i.writer,_o105=[];for(;("ul"==_e304.parent.name||"ol"==_e304.parent.name)&&(_e304=_n171.breakContainer(_e304),"li"==_e304.parent.name);){var _t282=_e304,_i290=_n171.createPositionAt(_e304.parent,"end");if(!_t282.isEqual(_i290)){var _e305=_n171.remove(_n171.createRange(_t282,_i290));_o105.push(_e305);}_e304=_n171.createPositionAfter(_e304.parent);}if(_o105.length>0){for(var _t283=0;_t283<_o105.length;_t283++){var _i291=_e304.nodeBefore;if(_e304=_n171.insert(_e304,_o105[_t283]).end,_t283>0){var _t284=mb(_n171,_i291,_i291.nextSibling);_t284&&_t284.parent==_i291&&_e304.offset--;}}mb(_n171,_e304.nodeBefore,_e304.nodeAfter);}}}function Ab(e,t,i){var n=i.mapper.toViewPosition(t.position),o=n.nodeBefore,r=n.nodeAfter;mb(i.writer,o,r);}function Cb(e,t,i){if(i.consumable.consume(t.viewItem,{name:!0})){var _e306=i.writer,_n172=_e306.createElement("listItem"),_o106=function(e){var t=0,i=e.parent;for(;i;){if(i.is("element","li"))t++;else{var _e307=i.previousSibling;_e307&&_e307.is("element","li")&&t++;}i=i.parent;}return t;}(t.viewItem);_e306.setAttribute("listIndent",_o106,_n172);var _r61=t.viewItem.parent&&"ol"==t.viewItem.parent.name?"numbered":"bulleted";if(_e306.setAttribute("listType",_r61,_n172),!i.safeInsert(_n172,t.modelCursor))return;var _s35=function(e,t,i){var n=i.writer,o=i.schema;var r=n.createPositionAfter(e);var _iterator407=_createForOfIteratorHelper(t),_step407;try{for(_iterator407.s();!(_step407=_iterator407.n()).done;){var _s36=_step407.value;if("ul"==_s36.name||"ol"==_s36.name)r=i.convertItem(_s36,r).modelCursor;else{var _t285=i.convertItem(_s36,n.createPositionAt(e,"end")),_a23=_t285.modelRange.start.nodeAfter;_a23&&_a23.is("element")&&!o.checkChild(e,_a23.name)&&(e=_t285.modelCursor.parent.is("element","listItem")?_t285.modelCursor.parent:Pb(_t285.modelCursor),r=n.createPositionAfter(e));}}}catch(err){_iterator407.e(err);}finally{_iterator407.f();}return r;}(_n172,t.viewItem.getChildren(),i);t.modelRange=_e306.createRange(t.modelCursor,_s35),i.updateConversionResult(_n172,t);}}function Tb(e,t,i){if(i.consumable.test(t.viewItem,{name:!0})){var _e308=Array.from(t.viewItem.getChildren());for(var _i292=0,_e309=_e308;_i292<_e309.length;_i292++){var _t286=_e309[_i292];!(_t286.is("element","li")||Nb(_t286))&&_t286._remove();}}}function Eb(e,t,i){if(i.consumable.test(t.viewItem,{name:!0})){if(0===t.viewItem.childCount)return;var _e310=_toConsumableArray(t.viewItem.getChildren());var _i293=!1,_n173=!0;var _iterator408=_createForOfIteratorHelper(_e310),_step408;try{for(_iterator408.s();!(_step408=_iterator408.n()).done;){var _t287=_step408.value;_i293&&!Nb(_t287)&&_t287._remove(),_t287.is("$text")?(_n173&&(_t287._data=_t287.data.trimStart()),_t287.nextSibling&&!Nb(_t287.nextSibling)||(_t287._data=_t287.data.trimEnd())):Nb(_t287)&&(_i293=!0),_n173=!1;}}catch(err){_iterator408.e(err);}finally{_iterator408.f();}}}function Ib(e){return function(t,i){if(i.isPhantom)return;var n=i.modelPosition.nodeBefore;if(n&&n.is("element","listItem")){var _t288=i.mapper.toViewElement(n),_o107=_t288.getAncestors().find(Nb),_r62=e.createPositionAt(_t288,0).getWalker();var _iterator409=_createForOfIteratorHelper(_r62),_step409;try{for(_iterator409.s();!(_step409=_iterator409.n()).done;){var _e311=_step409.value;if("elementStart"==_e311.type&&_e311.item.is("element","li")){i.viewPosition=_e311.previousPosition;break;}if("elementEnd"==_e311.type&&_e311.item==_o107){i.viewPosition=_e311.nextPosition;break;}}}catch(err){_iterator409.e(err);}finally{_iterator409.f();}}};}function Sb(e,_ref77){var _ref78=_slicedToArray(_ref77,2),t=_ref78[0],i=_ref78[1];var n,o=t.is("documentFragment")?t.getChild(0):t;if(n=i?this.createSelection(i):this.document.selection,o&&o.is("element","listItem")){var _e312=n.getFirstPosition();var _t289=null;if(_e312.parent.is("element","listItem")?_t289=_e312.parent:_e312.nodeBefore&&_e312.nodeBefore.is("element","listItem")&&(_t289=_e312.nodeBefore),_t289){var _e313=_t289.getAttribute("listIndent");if(_e313>0)for(;o&&o.is("element","listItem");){o._setAttribute("listIndent",o.getAttribute("listIndent")+_e313),o=o.nextSibling;}}}}function Pb(e){var t=new Zs({startPosition:e});var i;do{i=t.next();}while(!i.value.item.is("element","listItem"));return i.value.item;}function Mb(e,t,i,n,o,r){var s=pb(t.nodeBefore,{sameIndent:!0,smallerIndent:!0,listIndent:e,foo:"b"}),a=o.mapper,l=o.writer,c=s?s.getAttribute("listIndent"):null;var d;if(s){if(c==e){var _e314=a.toViewElement(s).parent;d=l.createPositionAfter(_e314);}else{var _e315=r.createPositionAt(s,"end");d=a.toViewPosition(_e315);}}else d=i;d=fb(d);for(var _i294=0,_arr2=_toConsumableArray(n.getChildren());_i294<_arr2.length;_i294++){var _e316=_arr2[_i294];Nb(_e316)&&(d=l.move(l.createRangeOn(_e316),d).end,mb(l,_e316,_e316.nextSibling),mb(l,_e316.previousSibling,_e316));}}function Nb(e){return e.is("element","ol")||e.is("element","ul");}var Rb=/*#__PURE__*/function(_Qe72){_inherits(Rb,_Qe72);var _super195=_createSuper(Rb);function Rb(){_classCallCheck(this,Rb);return _super195.apply(this,arguments);}_createClass(Rb,[{key:"init",value:function init(){var _this293=this;var e=this.editor;e.model.schema.register("listItem",{inheritAllFrom:"$block",allowAttributes:["listType","listIndent"]});var t=e.data,i=e.editing;var n;e.model.document.registerPostFixer(function(t){return function(e,t){var i=e.document.differ.getChanges(),n=new Map();var o=!1;var _iterator410=_createForOfIteratorHelper(i),_step410;try{for(_iterator410.s();!(_step410=_iterator410.n()).done;){var _n175=_step410.value;if("insert"==_n175.type&&"listItem"==_n175.name)r(_n175.position);else if("insert"==_n175.type&&"listItem"!=_n175.name){if("$text"!=_n175.name){var _i295=_n175.position.nodeAfter;_i295.hasAttribute("listIndent")&&(t.removeAttribute("listIndent",_i295),o=!0),_i295.hasAttribute("listType")&&(t.removeAttribute("listType",_i295),o=!0),_i295.hasAttribute("listStyle")&&(t.removeAttribute("listStyle",_i295),o=!0);var _iterator412=_createForOfIteratorHelper(Array.from(e.createRangeIn(_i295)).filter(function(e){return e.item.is("element","listItem");})),_step412;try{for(_iterator412.s();!(_step412=_iterator412.n()).done;){var _t292=_step412.value;r(_t292.previousPosition);}}catch(err){_iterator412.e(err);}finally{_iterator412.f();}}r(_n175.position.getShiftedBy(_n175.length));}else"remove"==_n175.type&&"listItem"==_n175.name?r(_n175.position):("attribute"==_n175.type&&"listIndent"==_n175.attributeKey||"attribute"==_n175.type&&"listType"==_n175.attributeKey)&&r(_n175.range.start);}}catch(err){_iterator410.e(err);}finally{_iterator410.f();}var _iterator411=_createForOfIteratorHelper(n.values()),_step411;try{for(_iterator411.s();!(_step411=_iterator411.n()).done;){var _e318=_step411.value;s(_e318),a(_e318);}}catch(err){_iterator411.e(err);}finally{_iterator411.f();}return o;function r(e){var t=e.nodeBefore;if(t&&t.is("element","listItem")){var _e317=t;if(n.has(_e317))return;for(var _t290=_e317.previousSibling;_t290&&_t290.is("element","listItem");_t290=_e317.previousSibling){if(_e317=_t290,n.has(_e317))return;}n.set(t,_e317);}else{var _t291=e.nodeAfter;_t291&&_t291.is("element","listItem")&&n.set(_t291,_t291);}}function s(e){var i=0,n=null;for(;e&&e.is("element","listItem");){var _r63=e.getAttribute("listIndent");if(_r63>i){var _s37=void 0;null===n?(n=_r63-i,_s37=i):(n>_r63&&(n=_r63),_s37=_r63-n),t.setAttribute("listIndent",_s37,e),o=!0;}else n=null,i=e.getAttribute("listIndent")+1;e=e.nextSibling;}}function a(e){var i=[],n=null;for(;e&&e.is("element","listItem");){var _r64=e.getAttribute("listIndent");if(n&&n.getAttribute("listIndent")>_r64&&(i=i.slice(0,_r64+1)),0!=_r64)if(i[_r64]){var _n174=i[_r64];e.getAttribute("listType")!=_n174&&(t.setAttribute("listType",_n174,e),o=!0);}else i[_r64]=e.getAttribute("listType");n=e,e=e.nextSibling;}}}(e.model,t);}),i.mapper.registerViewToModelLength("li",zb),t.mapper.registerViewToModelLength("li",zb),i.mapper.on("modelToViewPosition",Ib(i.view)),i.mapper.on("viewToModelPosition",(n=e.model,function(e,t){var i=t.viewPosition,o=i.parent,r=t.mapper;if("ul"==o.name||"ol"==o.name){if(i.isAtEnd){var _e319=r.toModelElement(i.nodeBefore),_o108=r.getModelLength(i.nodeBefore);t.modelPosition=n.createPositionBefore(_e319).getShiftedBy(_o108);}else{var _e320=r.toModelElement(i.nodeAfter);t.modelPosition=n.createPositionBefore(_e320);}e.stop();}else if("li"==o.name&&i.nodeBefore&&("ul"==i.nodeBefore.name||"ol"==i.nodeBefore.name)){var _s38=r.toModelElement(o);var _a24=1,_l13=i.nodeBefore;for(;_l13&&Nb(_l13);){_a24+=r.getModelLength(_l13),_l13=_l13.previousSibling;}t.modelPosition=n.createPositionBefore(_s38).getShiftedBy(_a24),e.stop();}})),t.mapper.on("modelToViewPosition",Ib(i.view)),e.conversion["for"]("editingDowncast").add(function(t){t.on("insert",xb,{priority:"high"}),t.on("insert:listItem",_b(e.model)),t.on("attribute:listType:listItem",vb,{priority:"high"}),t.on("attribute:listType:listItem",yb,{priority:"low"}),t.on("attribute:listIndent:listItem",function(e){return function(t,i,n){if(!n.consumable.consume(i.item,"attribute:listIndent"))return;var o=n.mapper.toViewElement(i.item),r=n.writer;r.breakContainer(r.createPositionBefore(o)),r.breakContainer(r.createPositionAfter(o));var s=o.parent,a=s.previousSibling,l=r.createRangeOn(s);r.remove(l),a&&a.nextSibling&&mb(r,a,a.nextSibling),Mb(i.attributeOldValue+1,i.range.start,l.start,o,n,e),gb(i.item,o,n,e);var _iterator413=_createForOfIteratorHelper(i.item.getChildren()),_step413;try{for(_iterator413.s();!(_step413=_iterator413.n()).done;){var _e321=_step413.value;n.consumable.consume(_e321,"insert");}}catch(err){_iterator413.e(err);}finally{_iterator413.f();}};}(e.model)),t.on("remove:listItem",function(e){return function(t,i,n){var o=n.mapper.toViewPosition(i.position).getLastMatchingPosition(function(e){return!e.item.is("element","li");}).nodeAfter,r=n.writer;r.breakContainer(r.createPositionBefore(o)),r.breakContainer(r.createPositionAfter(o));var s=o.parent,a=s.previousSibling,l=r.createRangeOn(s),c=r.remove(l);a&&a.nextSibling&&mb(r,a,a.nextSibling);Mb(n.mapper.toModelElement(o).getAttribute("listIndent")+1,i.position,l.start,o,n,e);var _iterator414=_createForOfIteratorHelper(r.createRangeIn(c).getItems()),_step414;try{for(_iterator414.s();!(_step414=_iterator414.n()).done;){var _e322=_step414.value;n.mapper.unbindViewElement(_e322);}}catch(err){_iterator414.e(err);}finally{_iterator414.f();}t.stop();};}(e.model)),t.on("remove",Ab,{priority:"low"});}),e.conversion["for"]("dataDowncast").add(function(t){t.on("insert",xb,{priority:"high"}),t.on("insert:listItem",_b(e.model));}),e.conversion["for"]("upcast").add(function(e){e.on("element:ul",Tb,{priority:"high"}),e.on("element:ol",Tb,{priority:"high"}),e.on("element:li",Eb,{priority:"high"}),e.on("element:li",Cb);}),e.model.on("insertContent",Sb,{priority:"high"}),e.commands.add("numberedList",new lb(e,"numbered")),e.commands.add("bulletedList",new lb(e,"bulleted")),e.commands.add("indentList",new ub(e,"forward")),e.commands.add("outdentList",new ub(e,"backward"));var o=i.view.document;this.listenTo(o,"enter",function(e,t){var i=_this293.editor.model.document,n=i.selection.getLastPosition().parent;i.selection.isCollapsed&&"listItem"==n.name&&n.isEmpty&&(_this293.editor.execute("outdentList"),t.preventDefault(),e.stop());},{context:"li"}),this.listenTo(o,"delete",function(e,t){if("backward"!==t.direction)return;var i=_this293.editor.model.document.selection;if(!i.isCollapsed)return;var n=i.getFirstPosition();if(!n.isAtStart)return;var o=n.parent;if("listItem"!==o.name)return;o.previousSibling&&"listItem"===o.previousSibling.name||(_this293.editor.execute("outdentList"),t.preventDefault(),e.stop());},{context:"li"});var r=function r(e){return function(t,i){_this293.editor.commands.get(e).isEnabled&&(_this293.editor.execute(e),i());};};e.keystrokes.set("Tab",r("indentList")),e.keystrokes.set("Shift+Tab",r("outdentList"));}},{key:"afterInit",value:function afterInit(){var e=this.editor.commands,t=e.get("indent"),i=e.get("outdent");t&&t.registerChildCommand(e.get("indentList")),i&&i.registerChildCommand(e.get("outdentList"));}}],[{key:"pluginName",get:function get(){return"ListEditing";}},{key:"requires",get:function get(){return[Ku,Xu];}}]);return Rb;}(Qe);function zb(e){var t=1;var _iterator415=_createForOfIteratorHelper(e.getChildren()),_step415;try{for(_iterator415.s();!(_step415=_iterator415.n()).done;){var _i296=_step415.value;if("ul"==_i296.name||"ol"==_i296.name){var _iterator416=_createForOfIteratorHelper(_i296.getChildren()),_step416;try{for(_iterator416.s();!(_step416=_iterator416.n()).done;){var _e323=_step416.value;t+=zb(_e323);}}catch(err){_iterator416.e(err);}finally{_iterator416.f();}}}}catch(err){_iterator415.e(err);}finally{_iterator415.f();}return t;}var Ob='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',Db='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>';var Lb=/*#__PURE__*/function(_Qe73){_inherits(Lb,_Qe73);var _super196=_createSuper(Lb);function Lb(){_classCallCheck(this,Lb);return _super196.apply(this,arguments);}_createClass(Lb,[{key:"init",value:function init(){var e=this.editor.t;bb(this.editor,"numberedList",e("Numbered List"),Ob),bb(this.editor,"bulletedList",e("Bulleted List"),Db);}}],[{key:"pluginName",get:function get(){return"ListUI";}}]);return Lb;}(Qe);var Vb=/*#__PURE__*/function(_Ze28){_inherits(Vb,_Ze28);var _super197=_createSuper(Vb);function Vb(e,t){var _this294;_classCallCheck(this,Vb);_this294=_super197.call(this,e),_this294._defaultType=t;return _this294;}_createClass(Vb,[{key:"refresh",value:function refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled();}},{key:"execute",value:function execute(){var _this295=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=this.editor.model;var i=_toConsumableArray(t.document.selection.getSelectedBlocks()).filter(function(e){return e.is("element","listItem");}).map(function(e){var i=t.change(function(t){return t.createPositionAt(e,0);});return[].concat(_toConsumableArray(wb(i,"backward")),_toConsumableArray(wb(i,"forward")));}).flat();i=_toConsumableArray(new Set(i)),i.length&&t.change(function(t){var _iterator417=_createForOfIteratorHelper(i),_step417;try{for(_iterator417.s();!(_step417=_iterator417.n()).done;){var _n176=_step417.value;t.setAttribute("listStyle",e.type||_this295._defaultType,_n176);}}catch(err){_iterator417.e(err);}finally{_iterator417.f();}});}},{key:"_getValue",value:function _getValue(){var e=this.editor.model.document.selection.getFirstPosition().parent;return e&&e.is("element","listItem")?e.getAttribute("listStyle"):null;}},{key:"_checkEnabled",value:function _checkEnabled(){var e=this.editor,t=e.commands.get("numberedList"),i=e.commands.get("bulletedList");return t.isEnabled||i.isEnabled;}}]);return Vb;}(Ze);var Bb=/*#__PURE__*/function(_Qe74){_inherits(Bb,_Qe74);var _super198=_createSuper(Bb);function Bb(){_classCallCheck(this,Bb);return _super198.apply(this,arguments);}_createClass(Bb,[{key:"init",value:function init(){var e=this.editor,t=e.model;t.schema.extend("listItem",{allowAttributes:["listStyle"]}),e.commands.add("listStyle",new Vb(e,"default")),this.listenTo(e.commands.get("indentList"),"_executeCleanup",function(e){return function(t,i){var n;var o=i[0],r=o.getAttribute("listIndent"),s=i.filter(function(e){return e.getAttribute("listIndent")===r;});if(o.previousSibling.getAttribute("listIndent")+1===r)n="default";else{var _e324=pb(o.previousSibling,{sameIndent:!0,direction:"backward",listIndent:r});n=_e324.getAttribute("listStyle");}e.model.change(function(e){var _iterator418=_createForOfIteratorHelper(s),_step418;try{for(_iterator418.s();!(_step418=_iterator418.n()).done;){var _t293=_step418.value;e.setAttribute("listStyle",n,_t293);}}catch(err){_iterator418.e(err);}finally{_iterator418.f();}});};}(e)),this.listenTo(e.commands.get("outdentList"),"_executeCleanup",function(e){return function(t,i){if(!(i=i.reverse().filter(function(e){return e.is("element","listItem");})).length)return;var n=i[0].getAttribute("listIndent"),o=i[0].getAttribute("listType");var r=i[0].previousSibling;if(r.is("element","listItem"))for(;r.getAttribute("listIndent")!==n;){r=r.previousSibling;}else r=null;r||(r=i[i.length-1].nextSibling),r&&r.is("element","listItem")&&r.getAttribute("listType")===o&&e.model.change(function(e){var t=i.filter(function(e){return e.getAttribute("listIndent")===n;});var _iterator419=_createForOfIteratorHelper(t),_step419;try{for(_iterator419.s();!(_step419=_iterator419.n()).done;){var _i297=_step419.value;e.setAttribute("listStyle",r.getAttribute("listStyle"),_i297);}}catch(err){_iterator419.e(err);}finally{_iterator419.f();}});};}(e)),this.listenTo(e.commands.get("bulletedList"),"_executeCleanup",Hb(e)),this.listenTo(e.commands.get("numberedList"),"_executeCleanup",Hb(e)),t.document.registerPostFixer(function(e){return function(t){var i=!1;var n=Ub(e.model.document.differ.getChanges()).filter(function(e){return"todo"!==e.getAttribute("listType");});if(!n.length)return i;var o=n[n.length-1].nextSibling;if((!o||!o.is("element","listItem"))&&(o=n[n.length-1].previousSibling,o)){var _e325=n[0].getAttribute("listIndent");for(;o.is("element","listItem")&&o.getAttribute("listIndent")!==_e325&&(o=o.previousSibling,o);){;}}var _iterator420=_createForOfIteratorHelper(n),_step420;try{for(_iterator420.s();!(_step420=_iterator420.n()).done;){var _e326=_step420.value;if(_e326.hasAttribute("listStyle")){var _n177=_e326.previousSibling;Fb(_n177,_e326)&&(t.setAttribute("listStyle",_n177.getAttribute("listStyle"),_e326),i=!0);}else jb(o,_e326)?t.setAttribute("listStyle",o.getAttribute("listStyle"),_e326):t.setAttribute("listStyle","default",_e326),i=!0;}}catch(err){_iterator420.e(err);}finally{_iterator420.f();}return i;};}(e)),e.conversion["for"]("upcast").add(function(e){e.on("element:li",function(e,t,i){var n=t.viewItem.parent;if(!n)return;var o=n.getStyle("list-style-type")||"default",r=t.modelRange.start.nodeAfter||t.modelRange.end.nodeBefore;i.writer.setAttribute("listStyle",o,r);},{priority:"low"});}),e.conversion["for"]("downcast").add(function(e){e.on("attribute:listStyle:listItem",function(e,t,i){var n=i.writer,o=t.item,r=pb(o.previousSibling,{sameIndent:!0,listIndent:o.getAttribute("listIndent"),direction:"backward"}),s=i.mapper.toViewElement(o);var a,l,c,d,u;a=o,(l=r)&&a.getAttribute("listType")===l.getAttribute("listType")&&a.getAttribute("listIndent")===l.getAttribute("listIndent")&&a.getAttribute("listStyle")===l.getAttribute("listStyle")||n.breakContainer(n.createPositionBefore(s)),c=n,d=t.attributeNewValue,u=s.parent,d&&"default"!==d?c.setStyle("list-style-type",d,u):c.removeStyle("list-style-type",u);},{priority:"low"});}),this._mergeListStyleAttributeWhileMergingLists();}},{key:"afterInit",value:function afterInit(){var e=this.editor;e.commands.get("todoList")&&e.model.document.registerPostFixer(function(e){return function(t){var i=Ub(e.model.document.differ.getChanges()).filter(function(e){return"todo"===e.getAttribute("listType")&&e.hasAttribute("listStyle");});if(!i.length)return!1;var _iterator421=_createForOfIteratorHelper(i),_step421;try{for(_iterator421.s();!(_step421=_iterator421.n()).done;){var _e327=_step421.value;t.removeAttribute("listStyle",_e327);}}catch(err){_iterator421.e(err);}finally{_iterator421.f();}return!0;};}(e));}},{key:"_mergeListStyleAttributeWhileMergingLists",value:function _mergeListStyleAttributeWhileMergingLists(){var e=this.editor.model;var t;this.listenTo(e,"deleteContent",function(e,_ref79){var _ref80=_slicedToArray(_ref79,1),i=_ref80[0];var n=i.getFirstPosition(),o=i.getLastPosition();if(n.parent===o.parent)return;if(!n.parent.is("element","listItem"))return;var r=o.parent.nextSibling;if(!r||!r.is("element","listItem"))return;var s=pb(n.parent,{sameIndent:!0,listIndent:r.getAttribute("listIndent")});s&&s.getAttribute("listType")===r.getAttribute("listType")&&(t=s);},{priority:"high"}),this.listenTo(e,"deleteContent",function(){t&&(e.change(function(e){var i=pb(t.nextSibling,{sameIndent:!0,listIndent:t.getAttribute("listIndent"),direction:"forward"}),n=[i].concat(_toConsumableArray(wb(e.createPositionAt(i,0),"forward")));var _iterator422=_createForOfIteratorHelper(n),_step422;try{for(_iterator422.s();!(_step422=_iterator422.n()).done;){var _i298=_step422.value;e.setAttribute("listStyle",t.getAttribute("listStyle"),_i298);}}catch(err){_iterator422.e(err);}finally{_iterator422.f();}}),t=null);},{priority:"low"});}}],[{key:"requires",get:function get(){return[Rb];}},{key:"pluginName",get:function get(){return"ListStyleEditing";}}]);return Bb;}(Qe);function jb(e,t){if(!e)return!1;var i=e.getAttribute("listStyle");return!!i&&"default"!==i&&e.getAttribute("listType")===t.getAttribute("listType");}function Fb(e,t){if(!e||!e.is("element","listItem"))return!1;if(t.getAttribute("listType")!==e.getAttribute("listType"))return!1;var i=e.getAttribute("listIndent");if(i<1||i!==t.getAttribute("listIndent"))return!1;var n=e.getAttribute("listStyle");return!(!n||n===t.getAttribute("listStyle"));}function Hb(e){return function(t,i){i=i.filter(function(e){return e.is("element","listItem");}),e.model.change(function(e){var _iterator423=_createForOfIteratorHelper(i),_step423;try{for(_iterator423.s();!(_step423=_iterator423.n()).done;){var _t294=_step423.value;e.removeAttribute("listStyle",_t294);}}catch(err){_iterator423.e(err);}finally{_iterator423.f();}});};}function Ub(e){var t=[];var _iterator424=_createForOfIteratorHelper(e),_step424;try{for(_iterator424.s();!(_step424=_iterator424.n()).done;){var _i299=_step424.value;var _e328=Wb(_i299);_e328&&_e328.is("element","listItem")&&t.push(_e328);}}catch(err){_iterator424.e(err);}finally{_iterator424.f();}return t;}function Wb(e){return"attribute"===e.type?e.range.start.nodeAfter:"insert"===e.type?e.position.nodeAfter:null;}i(98);var qb=/*#__PURE__*/function(_Qe75){_inherits(qb,_Qe75);var _super199=_createSuper(qb);function qb(){_classCallCheck(this,qb);return _super199.apply(this,arguments);}_createClass(qb,[{key:"init",value:function init(){var e=this.editor,t=e.locale.t;e.ui.componentFactory.add("bulletedList",$b({editor:e,parentCommandName:"bulletedList",buttonLabel:t("Bulleted List"),buttonIcon:Db,toolbarAriaLabel:t("Bulleted list styles toolbar"),styleDefinitions:[{label:t("Toggle the disc list style"),tooltip:t("Disc"),type:"disc",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6z"/></svg>'},{label:t("Toggle the circle list style"),tooltip:t("Circle"),type:"circle",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/></svg>'},{label:t("Toggle the square list style"),tooltip:t("Square"),type:"square",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M14 27v6H8v-6h6zm0-9v6H8v-6h6zm0-9v6H8V9h6z"/></svg>'}]})),e.ui.componentFactory.add("numberedList",$b({editor:e,parentCommandName:"numberedList",buttonLabel:t("Numbered List"),buttonIcon:Ob,toolbarAriaLabel:t("Numbered list styles toolbar"),styleDefinitions:[{label:t("Toggle the decimal list style"),tooltip:t("Decimal"),type:"decimal",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M10.29 15V8.531H9.286c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.343 0v-1.235h-1.235V15h1.235zM11.3 24v-1.147H8.848c.064-.111.148-.226.252-.343.104-.117.351-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.494-.824.104-.263.156-.539.156-.829 0-.51-.182-.936-.545-1.279-.363-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.153-.155.358-.233.616-.233.26 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.468.536-1.024 1.055-.692.641-1.155 1.156-1.389 1.544-.234.389-.375.8-.422 1.233H11.3zm2.333 0v-1.235h-1.235V24h1.235zM9.204 34.11c.615 0 1.129-.2 1.542-.598.413-.398.62-.88.62-1.446 0-.39-.11-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.619-.337.928-.788.928-1.353 0-.399-.151-.756-.453-1.073-.366-.386-.852-.58-1.459-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.668.55c-.16.232-.28.544-.358.933l1.138.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.215 0 .386.065.515.194s.193.302.193.518c0 .255-.087.46-.263.613-.176.154-.43.227-.765.218l-.136 1.006c.22-.061.409-.092.567-.092.24 0 .444.09.61.272.168.182.251.428.251.739 0 .328-.087.589-.261.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.307-.698l-1.196.145c.062.542.285.98.668 1.316.384.335.868.503 1.45.503zm4.43-.11v-1.235h-1.236V34h1.235z"/></svg>'},{label:t("Toggle the decimal with leading zero list style"),tooltip:t("Decimal with leading zero"),type:"decimal-leading-zero",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M5.714 15.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm6.078.914V8.531H10.79c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.344 0v-1.235h-1.235V15h1.235zm-9.422 9.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm7.088.914v-1.147H10.35c.065-.111.149-.226.253-.343.104-.117.35-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.493-.824.104-.263.156-.539.156-.829 0-.51-.181-.936-.544-1.279-.364-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.152-.155.357-.233.615-.233.261 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.467.536-1.024 1.055-.691.641-1.154 1.156-1.388 1.544-.235.389-.375.8-.422 1.233h4.328zm2.334 0v-1.235h-1.235V24h1.235zM5.714 34.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm4.992 1.024c.616 0 1.13-.2 1.543-.598.413-.398.62-.88.62-1.446 0-.39-.111-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.618-.337.927-.788.927-1.353 0-.399-.15-.756-.452-1.073-.366-.386-.853-.58-1.46-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.667.55c-.16.232-.28.544-.359.933l1.139.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.214 0 .386.065.515.194s.193.302.193.518c0 .255-.088.46-.264.613-.175.154-.43.227-.764.218l-.136 1.006c.22-.061.408-.092.566-.092.24 0 .444.09.611.272.167.182.25.428.25.739 0 .328-.086.589-.26.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.308-.698l-1.195.145c.062.542.284.98.668 1.316.384.335.867.503 1.45.503zm4.43-.11v-1.235h-1.235V34h1.235z"/></svg>'},{label:t("Toggle the lower–roman list style"),tooltip:t("Lower–roman"),type:"lower-roman",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.88 8.7V7.558h-1.234V8.7h1.234zm0 5.3V9.333h-1.234V14h1.234zm2.5 0v-1.235h-1.234V14h1.235zm-4.75 4.7v-1.142H8.395V18.7H9.63zm0 5.3v-4.667H8.395V24H9.63zm2.5-5.3v-1.142h-1.234V18.7h1.235zm0 5.3v-4.667h-1.234V24h1.235zm2.501 0v-1.235h-1.235V24h1.235zM7.38 28.7v-1.142H6.145V28.7H7.38zm0 5.3v-4.667H6.145V34H7.38zm2.5-5.3v-1.142H8.646V28.7H9.88zm0 5.3v-4.667H8.646V34H9.88zm2.5-5.3v-1.142h-1.234V28.7h1.235zm0 5.3v-4.667h-1.234V34h1.235zm2.501 0v-1.235h-1.235V34h1.235z"/></svg>'},{label:t("Toggle the upper–roman list style"),tooltip:t("Upper-roman"),type:"upper-roman",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.916 15V8.558h-1.301V15h1.3zm2.465 0v-1.235h-1.235V15h1.235zM9.665 25v-6.442h-1.3V25h1.3zm2.5 0v-6.442h-1.3V25h1.3zm2.466 0v-1.235h-1.235V25h1.235zm-7.216 9v-6.442h-1.3V34h1.3zm2.5 0v-6.442h-1.3V34h1.3zm2.501 0v-6.442h-1.3V34h1.3zm2.465 0v-1.235h-1.235V34h1.235z"/></svg>'},{label:t("Toggle the lower–latin list style"),tooltip:t("Lower-latin"),type:"lower-latin",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M9.62 14.105c.272 0 .528-.05.768-.153s.466-.257.677-.462c.009.024.023.072.044.145.047.161.086.283.119.365h1.221a2.649 2.649 0 0 1-.222-.626c-.04-.195-.059-.498-.059-.908l.013-1.441c0-.536-.055-.905-.165-1.105-.11-.201-.3-.367-.569-.497-.27-.13-.68-.195-1.23-.195-.607 0-1.064.108-1.371.325-.308.217-.525.55-.65 1.002l1.12.202c.076-.217.176-.369.299-.455.123-.086.294-.13.514-.13.325 0 .546.05.663.152.118.101.176.27.176.508v.123c-.222.093-.622.194-1.2.303-.427.082-.755.178-.982.288-.227.11-.403.268-.53.474a1.327 1.327 0 0 0-.188.706c0 .398.138.728.415.988.277.261.656.391 1.136.391zm.368-.87a.675.675 0 0 1-.492-.189.606.606 0 0 1-.193-.448c0-.176.08-.32.241-.435.106-.07.33-.142.673-.215a7.19 7.19 0 0 0 .751-.19v.247c0 .296-.016.496-.048.602a.773.773 0 0 1-.295.409 1.07 1.07 0 0 1-.637.22zm4.645.765v-1.235h-1.235V14h1.235zM10.2 25.105c.542 0 1.003-.215 1.382-.646.38-.43.57-1.044.57-1.84 0-.771-.187-1.362-.559-1.774a1.82 1.82 0 0 0-1.41-.617c-.522 0-.973.216-1.354.65v-2.32H7.594V25h1.147v-.686a1.9 1.9 0 0 0 .67.592c.26.133.523.2.79.2zm-.299-.975c-.354 0-.638-.164-.852-.492-.153-.232-.229-.59-.229-1.073 0-.468.098-.818.295-1.048a.93.93 0 0 1 .738-.345c.302 0 .55.118.743.354.193.236.29.62.29 1.154 0 .5-.096.868-.288 1.1-.192.233-.424.35-.697.35zm4.478.87v-1.235h-1.234V25h1.234zm-4.017 9.105c.6 0 1.08-.142 1.437-.426.357-.284.599-.704.725-1.261l-1.213-.207c-.061.326-.167.555-.316.688a.832.832 0 0 1-.576.2.916.916 0 0 1-.75-.343c-.185-.228-.278-.62-.278-1.173 0-.498.091-.853.274-1.066.183-.212.429-.318.736-.318.232 0 .42.061.565.184.145.123.238.306.28.55l1.216-.22c-.146-.501-.387-.874-.722-1.119-.336-.244-.788-.366-1.356-.366-.695 0-1.245.214-1.653.643-.407.43-.61 1.03-.61 1.8 0 .762.202 1.358.608 1.788.406.431.95.646 1.633.646zM14.633 34v-1.235h-1.235V34h1.235z"/></svg>'},{label:t("Toggle the upper–latin list style"),tooltip:t("Upper-latin"),type:"upper-latin",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="m7.88 15 .532-1.463h2.575L11.549 15h1.415l-2.58-6.442H9.01L6.5 15h1.38zm2.69-2.549H8.811l.87-2.39.887 2.39zM14.88 15v-1.235h-1.234V15h1.234zM9.352 25c.83-.006 1.352-.02 1.569-.044.346-.038.636-.14.872-.305.236-.166.422-.387.558-.664.137-.277.205-.562.205-.855 0-.372-.106-.695-.317-.97-.21-.276-.512-.471-.905-.585a1.51 1.51 0 0 0 .661-.567 1.5 1.5 0 0 0 .244-.83c0-.28-.066-.53-.197-.754a1.654 1.654 0 0 0-.495-.539 1.676 1.676 0 0 0-.672-.266c-.25-.042-.63-.063-1.14-.063H7.158V25h2.193zm.142-3.88H8.46v-1.49h.747c.612 0 .983.007 1.112.022.217.026.38.102.49.226.11.125.165.287.165.486a.68.68 0 0 1-.192.503.86.86 0 0 1-.525.23 11.47 11.47 0 0 1-.944.023h.18zm.17 2.795H8.46v-1.723h1.05c.592 0 .977.03 1.154.092.177.062.313.16.406.295a.84.84 0 0 1 .14.492c0 .228-.06.41-.181.547a.806.806 0 0 1-.473.257c-.126.026-.423.04-.892.04zM14.88 25v-1.235h-1.234V25h1.234zm-5.018 9.11c.691 0 1.262-.17 1.711-.512.45-.341.772-.864.965-1.567l-1.261-.4c-.109.472-.287.818-.536 1.037-.25.22-.547.33-.892.33-.47 0-.85-.173-1.143-.519-.293-.345-.44-.925-.44-1.74 0-.767.15-1.322.447-1.665.297-.343.684-.514 1.162-.514.346 0 .64.096.881.29.242.193.4.457.477.79l1.288-.307c-.147-.516-.367-.911-.66-1.187-.492-.465-1.132-.698-1.92-.698-.902 0-1.63.296-2.184.89-.554.593-.83 1.426-.83 2.498 0 1.014.275 1.813.825 2.397.551.585 1.254.877 2.11.877zM14.88 34v-1.235h-1.234V34h1.234z"/></svg>'}]}));}}],[{key:"pluginName",get:function get(){return"ListStyleUI";}}]);return qb;}(Qe);function $b(_ref81){var e=_ref81.editor,t=_ref81.parentCommandName,i=_ref81.buttonLabel,n=_ref81.buttonIcon,o=_ref81.toolbarAriaLabel,r=_ref81.styleDefinitions;var s=e.commands.get(t),a=e.commands.get("listStyle");return function(l){var c=Cd(l,ld),d=c.buttonView,u=function(_ref82){var e=_ref82.editor,t=_ref82.listStyleCommand,i=_ref82.parentCommandName;var n=e.locale,o=e.commands.get(i);return function(_ref83){var r=_ref83.label,s=_ref83.type,a=_ref83.icon,l=_ref83.tooltip;var c=new Xc(n);return c.set({label:r,icon:a,tooltip:l}),t.on("change:value",function(){c.isOn=t.value===s;}),c.on("execute",function(){o.value?t.value!==s?e.execute("listStyle",{type:s}):e.execute("listStyle",{type:t._defaultType}):e.model.change(function(){e.execute(i),e.execute("listStyle",{type:s});}),e.editing.view.focus();}),c;};}({editor:e,parentCommandName:t,listStyleCommand:a});return Td(c,r.map(u)),c.bind("isEnabled").to(s),c.toolbarView.ariaLabel=o,c["class"]="ck-list-styles-dropdown",d.on("execute",function(){e.execute(t),e.editing.view.focus();}),d.set({label:i,icon:n,tooltip:!0,isToggleable:!0}),d.bind("isOn").to(s,"value",function(e){return!!e;}),c;};}function Yb(e,t){return function(e){e.on("attribute:url:media",i);};function i(i,n,o){if(!o.consumable.consume(n.item,i.name))return;var r=n.attributeNewValue,s=o.writer,a=o.mapper.toViewElement(n.item),l=_toConsumableArray(a.getChildren()).find(function(e){return e.getCustomProperty("media-content");});s.remove(l);var c=e.getMediaViewElement(s,r,t);s.insert(s.createPositionAt(a,0),c);}}function Gb(e,t,i,n){var o=e.createContainerElement("figure",{"class":"media"});return e.insert(e.createPositionAt(o,0),t.getMediaViewElement(e,i,n)),o;}function Kb(e){var t=e.getSelectedElement();return t&&t.is("element","media")?t:null;}function Qb(e,t,i){e.change(function(n){var o=n.createElement("media",{url:t});e.insertContent(o,i),n.setSelection(o,"on");});}var Jb=/*#__PURE__*/function(_Ze29){_inherits(Jb,_Ze29);var _super200=_createSuper(Jb);function Jb(){_classCallCheck(this,Jb);return _super200.apply(this,arguments);}_createClass(Jb,[{key:"refresh",value:function refresh(){var e=this.editor.model,t=e.document.selection,i=Kb(t);this.value=i?i.getAttribute("url"):null,this.isEnabled=function(e){var t=e.getSelectedElement();return!!t&&"media"===t.name;}(t)||function(e,t){var i=uh(e,t).start.parent;i.isEmpty&&!t.schema.isLimit(i)&&(i=i.parent);return t.schema.checkChild(i,"media");}(t,e);}},{key:"execute",value:function execute(e){var t=this.editor.model,i=t.document.selection,n=Kb(i);n?t.change(function(t){t.setAttribute("url",e,n);}):Qb(t,e,uh(i,t));}}]);return Jb;}(Ze);var Zb=/*#__PURE__*/function(){function Zb(e,t){_classCallCheck(this,Zb);var i=t.providers,n=t.extraProviders||[],o=new Set(t.removeProviders),r=i.concat(n).filter(function(e){var t=e.name;return t?!o.has(t):(Object(l.b)("media-embed-no-provider-name",{provider:e}),!1);});this.locale=e,this.providerDefinitions=r;}_createClass(Zb,[{key:"hasMedia",value:function hasMedia(e){return!!this._getMedia(e);}},{key:"getMediaViewElement",value:function getMediaViewElement(e,t,i){return this._getMedia(t).getViewElement(e,i);}},{key:"_getMedia",value:function _getMedia(e){if(!e)return new Xb(this.locale);e=e.trim();var _iterator425=_createForOfIteratorHelper(this.providerDefinitions),_step425;try{for(_iterator425.s();!(_step425=_iterator425.n()).done;){var _t295=_step425.value;var _i300=_t295.html,_n178=en(_t295.url);var _iterator426=_createForOfIteratorHelper(_n178),_step426;try{for(_iterator426.s();!(_step426=_iterator426.n()).done;){var _t296=_step426.value;var _n179=this._getUrlMatches(e,_t296);if(_n179)return new Xb(this.locale,e,_n179,_i300);}}catch(err){_iterator426.e(err);}finally{_iterator426.f();}}}catch(err){_iterator425.e(err);}finally{_iterator425.f();}return null;}},{key:"_getUrlMatches",value:function _getUrlMatches(e,t){var i=e.match(t);if(i)return i;var n=e.replace(/^https?:\/\//,"");return i=n.match(t),i||(n=n.replace(/^www\./,""),i=n.match(t),i||null);}}]);return Zb;}();var Xb=/*#__PURE__*/function(){function Xb(e,t,i,n){_classCallCheck(this,Xb);this.url=this._getValidUrl(t),this._t=e.t,this._match=i,this._previewRenderer=n;}_createClass(Xb,[{key:"getViewElement",value:function getViewElement(e,t){var i={};var n;if(t.renderForEditingView||t.renderMediaPreview&&this.url&&this._previewRenderer){this.url&&(i["data-oembed-url"]=this.url),t.renderForEditingView&&(i["class"]="ck-media__wrapper");var _o109=this._getPreviewHtml(t);n=e.createRawElement("div",i,function(e){e.innerHTML=_o109;});}else this.url&&(i.url=this.url),n=e.createEmptyElement(t.elementName,i);return e.setCustomProperty("media-content",!0,n),n;}},{key:"_getPreviewHtml",value:function _getPreviewHtml(e){return this._previewRenderer?this._previewRenderer(this._match):this.url&&e.renderForEditingView?this._getPlaceholderHtml():"";}},{key:"_getPlaceholderHtml",value:function _getPlaceholderHtml(){var e=new Zc(),t=new Jc();e.text=this._t("Open media in new tab"),t.content='<svg viewBox="0 0 64 42" xmlns="http://www.w3.org/2000/svg"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z"/></svg>',t.viewBox="0 0 64 42";return new Mc({tag:"div",attributes:{"class":"ck ck-reset_all ck-media__placeholder"},children:[{tag:"div",attributes:{"class":"ck-media__placeholder__icon"},children:[t]},{tag:"a",attributes:{"class":"ck-media__placeholder__url",target:"_blank",rel:"noopener noreferrer",href:this.url},children:[{tag:"span",attributes:{"class":"ck-media__placeholder__url__text"},children:[this.url]},e]}]}).render().outerHTML;}},{key:"_getValidUrl",value:function _getValidUrl(e){return e?e.match(/^https?/)?e:"https://"+e:null;}}]);return Xb;}();i(100);var ew=/*#__PURE__*/function(_Qe76){_inherits(ew,_Qe76);var _super201=_createSuper(ew);function ew(e){var _this296;_classCallCheck(this,ew);_this296=_super201.call(this,e),e.config.define("mediaEmbed",{elementName:"oembed",providers:[{name:"dailymotion",url:/^dailymotion\.com\/video\/(\w+)/,html:function html(e){return"<div style=\"position: relative; padding-bottom: 100%; height: 0; \"><iframe src=\"https://www.dailymotion.com/embed/video/".concat(e[1],"\" style=\"position: absolute; width: 100%; height: 100%; top: 0; left: 0;\" frameborder=\"0\" width=\"480\" height=\"270\" allowfullscreen allow=\"autoplay\"></iframe></div>");}},{name:"spotify",url:[/^open\.spotify\.com\/(artist\/\w+)/,/^open\.spotify\.com\/(album\/\w+)/,/^open\.spotify\.com\/(track\/\w+)/],html:function html(e){return"<div style=\"position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;\"><iframe src=\"https://open.spotify.com/embed/".concat(e[1],"\" style=\"position: absolute; width: 100%; height: 100%; top: 0; left: 0;\" frameborder=\"0\" allowtransparency=\"true\" allow=\"encrypted-media\"></iframe></div>");}},{name:"youtube",url:[/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)/,/^(?:m\.)?youtube\.com\/v\/([\w-]+)/,/^youtube\.com\/embed\/([\w-]+)/,/^youtu\.be\/([\w-]+)/],html:function html(e){return"<div style=\"position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;\"><iframe src=\"https://www.youtube.com/embed/".concat(e[1],"\" style=\"position: absolute; width: 100%; height: 100%; top: 0; left: 0;\" frameborder=\"0\" allow=\"autoplay; encrypted-media\" allowfullscreen></iframe></div>");}},{name:"vimeo",url:[/^vimeo\.com\/(\d+)/,/^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/album\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/channels\/[^/]+\/(\d+)/,/^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/,/^vimeo\.com\/ondemand\/[^/]+\/(\d+)/,/^player\.vimeo\.com\/video\/(\d+)/],html:function html(e){return"<div style=\"position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;\"><iframe src=\"https://player.vimeo.com/video/".concat(e[1],"\" style=\"position: absolute; width: 100%; height: 100%; top: 0; left: 0;\" frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>");}},{name:"instagram",url:/^instagram\.com\/p\/(\w+)/},{name:"twitter",url:/^twitter\.com/},{name:"googleMaps",url:[/^google\.com\/maps/,/^goo\.gl\/maps/,/^maps\.google\.com/,/^maps\.app\.goo\.gl/]},{name:"flickr",url:/^flickr\.com/},{name:"facebook",url:/^facebook\.com/}]}),_this296.registry=new Zb(e.locale,e.config.get("mediaEmbed"));return _this296;}_createClass(ew,[{key:"init",value:function init(){var e=this.editor,t=e.model.schema,i=e.t,n=e.conversion,o=e.config.get("mediaEmbed.previewsInData"),r=e.config.get("mediaEmbed.elementName"),s=this.registry;e.commands.add("mediaEmbed",new Jb(e)),t.register("media",{isObject:!0,isBlock:!0,allowWhere:"$block",allowAttributes:["url"]}),n["for"]("dataDowncast").elementToElement({model:"media",view:function view(e,_ref84){var t=_ref84.writer;var i=e.getAttribute("url");return Gb(t,s,i,{elementName:r,renderMediaPreview:i&&o});}}),n["for"]("dataDowncast").add(Yb(s,{elementName:r,renderMediaPreview:o})),n["for"]("editingDowncast").elementToElement({model:"media",view:function view(e,_ref85){var t=_ref85.writer;var n=e.getAttribute("url");return function(e,t,i){return t.setCustomProperty("media",!0,e),rh(e,t,{label:i});}(Gb(t,s,n,{elementName:r,renderForEditingView:!0}),t,i("media widget"));}}),n["for"]("editingDowncast").add(Yb(s,{elementName:r,renderForEditingView:!0})),n["for"]("upcast").elementToElement({view:function view(e){return["oembed",r].includes(e.name)&&e.getAttribute("url")?{name:!0}:null;},model:function model(e,_ref86){var t=_ref86.writer;var i=e.getAttribute("url");if(s.hasMedia(i))return t.createElement("media",{url:i});}}).elementToElement({view:{name:"div",attributes:{"data-oembed-url":!0}},model:function model(e,_ref87){var t=_ref87.writer;var i=e.getAttribute("data-oembed-url");if(s.hasMedia(i))return t.createElement("media",{url:i});}});}}],[{key:"pluginName",get:function get(){return"MediaEmbedEditing";}}]);return ew;}(Qe);var tw=/^(?:http(s)?:\/\/)?[\w-]+\.[\w-.~:/?#[\]@!$&'()*+,;=%]+$/;var iw=/*#__PURE__*/function(_Qe77){_inherits(iw,_Qe77);var _super202=_createSuper(iw);function iw(e){var _this297;_classCallCheck(this,iw);_this297=_super202.call(this,e),_this297._timeoutId=null,_this297._positionToInsert=null;return _this297;}_createClass(iw,[{key:"init",value:function init(){var _this298=this;var e=this.editor,t=e.model.document;this.listenTo(e.plugins.get("ClipboardPipeline"),"inputTransformation",function(){var e=t.selection.getFirstRange(),i=ec.fromPosition(e.start);i.stickiness="toPrevious";var n=ec.fromPosition(e.end);n.stickiness="toNext",t.once("change:data",function(){_this298._embedMediaBetweenPositions(i,n),i.detach(),n.detach();},{priority:"high"});}),e.commands.get("undo").on("execute",function(){_this298._timeoutId&&(vr.window.clearTimeout(_this298._timeoutId),_this298._positionToInsert.detach(),_this298._timeoutId=null,_this298._positionToInsert=null);},{priority:"high"});}},{key:"_embedMediaBetweenPositions",value:function _embedMediaBetweenPositions(e,t){var _this299=this;var i=this.editor,n=i.plugins.get(ew).registry,o=new ba(e,t),r=o.getWalker({ignoreElementEnd:!0});var s="";var _iterator427=_createForOfIteratorHelper(r),_step427;try{for(_iterator427.s();!(_step427=_iterator427.n()).done;){var _e329=_step427.value;_e329.item.is("$textProxy")&&(s+=_e329.item.data);}}catch(err){_iterator427.e(err);}finally{_iterator427.f();}if(s=s.trim(),!s.match(tw))return void o.detach();if(!n.hasMedia(s))return void o.detach();i.commands.get("mediaEmbed").isEnabled?(this._positionToInsert=ec.fromPosition(e),this._timeoutId=vr.window.setTimeout(function(){i.model.change(function(e){var t;_this299._timeoutId=null,e.remove(o),o.detach(),"$graveyard"!==_this299._positionToInsert.root.rootName&&(t=_this299._positionToInsert),Qb(i.model,s,t),_this299._positionToInsert.detach(),_this299._positionToInsert=null;});},100)):o.detach();}}],[{key:"requires",get:function get(){return[Rh,Tg];}},{key:"pluginName",get:function get(){return"AutoMediaEmbed";}}]);return iw;}(Qe);i(102);var nw=/*#__PURE__*/function(_Pc30){_inherits(nw,_Pc30);var _super203=_createSuper(nw);function nw(e,t){var _this300;_classCallCheck(this,nw);_this300=_super203.call(this,t);var i=t.t;_this300.focusTracker=new Rs(),_this300.keystrokes=new zs(),_this300.set("mediaURLInputValue",""),_this300.urlInputView=_this300._createUrlInput(),_this300.saveButtonView=_this300._createButton(i("Save"),Cc.check,"ck-button-save"),_this300.saveButtonView.type="submit",_this300.saveButtonView.bind("isEnabled").to(_assertThisInitialized(_this300),"mediaURLInputValue",function(e){return!!e;}),_this300.cancelButtonView=_this300._createButton(i("Cancel"),Cc.cancel,"ck-button-cancel","cancel"),_this300._focusables=new Sc(),_this300._focusCycler=new nd({focusables:_this300._focusables,focusTracker:_this300.focusTracker,keystrokeHandler:_this300.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),_this300._validators=e,_this300.setTemplate({tag:"form",attributes:{"class":["ck","ck-media-form","ck-responsive-form"],tabindex:"-1"},children:[_this300.urlInputView,_this300.saveButtonView,_this300.cancelButtonView]}),Ec(_assertThisInitialized(_this300));return _this300;}_createClass(nw,[{key:"render",value:function render(){var _this301=this;_get(_getPrototypeOf(nw.prototype),"render",this).call(this),Ic({view:this});[this.urlInputView,this.saveButtonView,this.cancelButtonView].forEach(function(e){_this301._focusables.add(e),_this301.focusTracker.add(e.element);}),this.keystrokes.listenTo(this.element);var e=function e(_e330){return _e330.stopPropagation();};this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e),this.listenTo(this.urlInputView.element,"selectstart",function(e,t){t.stopPropagation();},{priority:"high"});}},{key:"focus",value:function focus(){this._focusCycler.focusFirst();}},{key:"url",get:function get(){return this.urlInputView.fieldView.element.value.trim();},set:function set(e){this.urlInputView.fieldView.element.value=e.trim();}},{key:"isValid",value:function isValid(){this.resetFormStatus();var _iterator428=_createForOfIteratorHelper(this._validators),_step428;try{for(_iterator428.s();!(_step428=_iterator428.n()).done;){var _e331=_step428.value;var _t297=_e331(this);if(_t297)return this.urlInputView.errorText=_t297,!1;}}catch(err){_iterator428.e(err);}finally{_iterator428.f();}return!0;}},{key:"resetFormStatus",value:function resetFormStatus(){this.urlInputView.errorText=null,this.urlInputView.infoText=this._urlInputViewInfoDefault;}},{key:"_createUrlInput",value:function _createUrlInput(){var _this302=this;var e=this.locale.t,t=new Rd(this.locale,zd),i=t.fieldView;return this._urlInputViewInfoDefault=e("Paste the media URL in the input."),this._urlInputViewInfoTip=e("Tip: Paste the URL into the content to embed faster."),t.label=e("Media URL"),t.infoText=this._urlInputViewInfoDefault,i.on("input",function(){t.infoText=i.element.value?_this302._urlInputViewInfoTip:_this302._urlInputViewInfoDefault,_this302.mediaURLInputValue=i.element.value.trim();}),t;}},{key:"_createButton",value:function _createButton(e,t,i,n){var o=new Xc(this.locale);return o.set({label:e,icon:t,tooltip:!0}),o.extendTemplate({attributes:{"class":i}}),n&&o.delegate("execute").to(this,n),o;}}]);return nw;}(Pc);var ow=/*#__PURE__*/function(_Qe78){_inherits(ow,_Qe78);var _super204=_createSuper(ow);function ow(){_classCallCheck(this,ow);return _super204.apply(this,arguments);}_createClass(ow,[{key:"init",value:function init(){var _this303=this;var e=this.editor,t=e.commands.get("mediaEmbed"),i=e.plugins.get(ew).registry;e.ui.componentFactory.add("mediaEmbed",function(n){var o=Cd(n),r=new nw(function(e,t){return[function(t){if(!t.url.length)return e("The URL must not be empty.");},function(i){if(!t.hasMedia(i.url))return e("This media URL is not supported.");}];}(e.t,i),e.locale);return _this303._setUpDropdown(o,r,t,e),_this303._setUpForm(o,r,t),o;});}},{key:"_setUpDropdown",value:function _setUpDropdown(e,t,i){var n=this.editor,o=n.t,r=e.buttonView;function s(){n.editing.view.focus(),e.isOpen=!1;}e.bind("isEnabled").to(i),e.panelView.children.add(t),r.set({label:o("Insert media"),icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M18.68 3.03c.6 0 .59-.03.59.55v12.84c0 .59.01.56-.59.56H1.29c-.6 0-.59.03-.59-.56V3.58c0-.58-.01-.55.6-.55h17.38zM15.77 15V5H4.2v10h11.57zM2 4v1h1V4H2zm0 2v1h1V6H2zm0 2v1h1V8H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zM17 4v1h1V4h-1zm0 2v1h1V6h-1zm0 2v1h1V8h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zM7.5 7.177a.4.4 0 0 1 .593-.351l5.133 2.824a.4.4 0 0 1 0 .7l-5.133 2.824a.4.4 0 0 1-.593-.35V7.176v.001z"/></svg>',tooltip:!0}),r.on("open",function(){t.disableCssTransitions(),t.url=i.value||"",t.urlInputView.fieldView.select(),t.focus(),t.enableCssTransitions();},{priority:"low"}),e.on("submit",function(){t.isValid()&&(n.execute("mediaEmbed",t.url),s());}),e.on("change:isOpen",function(){return t.resetFormStatus();}),e.on("cancel",function(){return s();});}},{key:"_setUpForm",value:function _setUpForm(e,t,i){t.delegate("submit","cancel").to(e),t.urlInputView.bind("value").to(i,"value"),t.urlInputView.bind("isReadOnly").to(i,"isEnabled",function(e){return!e;});}}],[{key:"requires",get:function get(){return[ew];}},{key:"pluginName",get:function get(){return"MediaEmbedUI";}}]);return ow;}(Qe);i(104);function rw(e,t){if(!e.childCount)return;var i=new hu(e.document),n=function(e,t){var i=t.createRangeIn(e),n=new mn({name:/^p|h\d+$/,styles:{"mso-list":/.*/}}),o=[];var _iterator429=_createForOfIteratorHelper(i),_step429;try{for(_iterator429.s();!(_step429=_iterator429.n()).done;){var _e332=_step429.value;if("elementStart"===_e332.type&&n.match(_e332.item)){var _t298=lw(_e332.item);o.push({element:_e332.item,id:_t298.id,order:_t298.order,indent:_t298.indent});}}}catch(err){_iterator429.e(err);}finally{_iterator429.f();}return o;}(e,i);if(!n.length)return;var o=null,r=1;n.forEach(function(e,s){var a=function(e,t){if(!e)return!0;if(e.id!==t.id)return t.indent-e.indent!=1;var i=t.element.previousSibling;if(!i)return!0;return n=i,!(n.is("element","ol")||n.is("element","ul"));var n;}(n[s-1],e),l=a?null:n[s-1],c=(u=e,(d=l)?u.indent-d.indent:u.indent-1);var d,u;if(a&&(o=null,r=1),!o||0!==c){var _n180=function(e,t){var i=new RegExp("@list l".concat(e.id,":level").concat(e.indent,"\\s*({[^}]*)"),"gi"),n=/mso-level-number-format:([^;]{0,100});/gi,o=i.exec(t);var r="decimal",s="ol";if(o&&o[1]){var _t299=n.exec(o[1]);if(_t299&&_t299[1]&&(r=_t299[1].trim(),s="bullet"!==r&&"image"!==r?"ol":"ul"),"bullet"===r){var _t300=function(e){var t=function(e){if(e.getChild(0).is("$text"))return null;var _iterator430=_createForOfIteratorHelper(e.getChildren()),_step430;try{for(_iterator430.s();!(_step430=_iterator430.n()).done;){var _t301=_step430.value;if(!_t301.is("element","span"))continue;var _e333=_t301.getChild(0);return _e333.is("$text")?_e333:_e333.getChild(0);}}catch(err){_iterator430.e(err);}finally{_iterator430.f();}}(e);if(!t)return null;var i=t._data;if("o"===i)return"circle";if("·"===i)return"disc";if("§"===i)return"square";return null;}(e.element);_t300&&(r=_t300);}}return{type:s,style:sw(r)};}(e,t);if(o){if(e.indent>r){var _e334=o.getChild(o.childCount-1),_t302=_e334.getChild(_e334.childCount-1);o=aw(_n180,_t302,i),r+=1;}else if(e.indent<r){var _t303=r-e.indent;o=function(e,t){var i=e.getAncestors({parentFirst:!0});var n=null,o=0;var _iterator431=_createForOfIteratorHelper(i),_step431;try{for(_iterator431.s();!(_step431=_iterator431.n()).done;){var _e335=_step431.value;if("ul"!==_e335.name&&"ol"!==_e335.name||o++,o===t){n=_e335;break;}}}catch(err){_iterator431.e(err);}finally{_iterator431.f();}return n;}(o,_t303),r=parseInt(e.indent);}}else o=aw(_n180,e.element,i);e.indent<=r&&(o.is("element",_n180.type)||(o=i.rename(_n180.type,o)));}var h=function(e,t){return function(e,t){var i=new mn({name:"span",styles:{"mso-list":"Ignore"}}),n=t.createRangeIn(e);var _iterator432=_createForOfIteratorHelper(n),_step432;try{for(_iterator432.s();!(_step432=_iterator432.n()).done;){var _e336=_step432.value;"elementStart"===_e336.type&&i.match(_e336.item)&&t.remove(_e336.item);}}catch(err){_iterator432.e(err);}finally{_iterator432.f();}}(e,t),t.rename("li",e);}(e.element,i);i.appendChild(h,o);});}function sw(e){switch(e){case"arabic-leading-zero":return"decimal-leading-zero";case"alpha-upper":return"upper-alpha";case"alpha-lower":return"lower-alpha";case"roman-upper":return"upper-roman";case"roman-lower":return"lower-roman";case"circle":case"disc":case"square":return e;default:return null;}}function aw(e,t,i){var n=t.parent,o=i.createElement(e.type),r=n.getChildIndex(t)+1;return i.insertChild(r,o,n),e.style&&i.setStyle("list-style-type",e.style,o),o;}function lw(e){var t={},i=e.getStyle("mso-list");if(i){var _e337=i.match(/(^|\s{1,100})l(\d+)/i),_n181=i.match(/\s{0,100}lfo(\d+)/i),_o110=i.match(/\s{0,100}level(\d+)/i);_e337&&_n181&&_o110&&(t.id=_e337[2],t.order=_n181[1],t.indent=_o110[1]);}return t;}var cw=/id=("|')docs-internal-guid-[-0-9a-f]+("|')/i;var dw=/*#__PURE__*/function(){function dw(e){_classCallCheck(this,dw);this.document=e;}_createClass(dw,[{key:"isActive",value:function isActive(e){return cw.test(e);}},{key:"execute",value:function execute(e){var t=new hu(this.document),i=e._parsedData.body;!function(e,t){var _iterator433=_createForOfIteratorHelper(e.getChildren()),_step433;try{for(_iterator433.s();!(_step433=_iterator433.n()).done;){var _i301=_step433.value;if(_i301.is("element","b")&&"normal"===_i301.getStyle("font-weight")){var _n182=e.getChildIndex(_i301);t.remove(_i301),t.insertChild(_n182,_i301.getChildren(),e);}}}catch(err){_iterator433.e(err);}finally{_iterator433.f();}}(i,t),function(e,t){var _iterator434=_createForOfIteratorHelper(t.createRangeIn(e)),_step434;try{for(_iterator434.s();!(_step434=_iterator434.n()).done;){var _i302=_step434.value;var _e338=_i302.item;if(_e338.is("element","li")){var _i303=_e338.getChild(0);_i303&&_i303.is("element","p")&&t.unwrapElement(_i303);}}}catch(err){_iterator434.e(err);}finally{_iterator434.f();}}(i,t),e.content=i;}}]);return dw;}();function uw(e,t){if(!e.childCount)return;var i=new hu();!function(e,t,i){var n=i.createRangeIn(t),o=new mn({name:"img"}),r=[];var _iterator435=_createForOfIteratorHelper(n),_step435;try{for(_iterator435.s();!(_step435=_iterator435.n()).done;){var _t304=_step435.value;if(o.match(_t304.item)){var _i305=_t304.item,_n183=_i305.getAttribute("v:shapes")?_i305.getAttribute("v:shapes").split(" "):[];_n183.length&&_n183.every(function(t){return e.indexOf(t)>-1;})?r.push(_i305):_i305.getAttribute("src")||r.push(_i305);}}}catch(err){_iterator435.e(err);}finally{_iterator435.f();}for(var _i304=0,_r65=r;_i304<_r65.length;_i304++){var _e339=_r65[_i304];i.remove(_e339);}}(function(e,t){var i=t.createRangeIn(e),n=new mn({name:/v:(.+)/}),o=[];var _iterator436=_createForOfIteratorHelper(i),_step436;try{for(_iterator436.s();!(_step436=_iterator436.n()).done;){var _e340=_step436.value;var _t305=_e340.item,_i306=_t305.previousSibling&&_t305.previousSibling.name||null;n.match(_t305)&&_t305.getAttribute("o:gfxdata")&&"v:shapetype"!==_i306&&o.push(_e340.item.getAttribute("id"));}}catch(err){_iterator436.e(err);}finally{_iterator436.f();}return o;}(e,i),e,i),function(e,t){var i=t.createRangeIn(e),n=new mn({name:/v:(.+)/}),o=[];var _iterator437=_createForOfIteratorHelper(i),_step437;try{for(_iterator437.s();!(_step437=_iterator437.n()).done;){var _e342=_step437.value;n.match(_e342.item)&&o.push(_e342.item);}}catch(err){_iterator437.e(err);}finally{_iterator437.f();}for(var _i307=0,_o111=o;_i307<_o111.length;_i307++){var _e341=_o111[_i307];t.remove(_e341);}}(e,i);var n=function(e,t){var i=t.createRangeIn(e),n=new mn({name:"img"}),o=[];var _iterator438=_createForOfIteratorHelper(i),_step438;try{for(_iterator438.s();!(_step438=_iterator438.n()).done;){var _e343=_step438.value;n.match(_e343.item)&&_e343.item.getAttribute("src").startsWith("file://")&&o.push(_e343.item);}}catch(err){_iterator438.e(err);}finally{_iterator438.f();}return o;}(e,i);n.length&&function(e,t,i){if(e.length===t.length)for(var _o112=0;_o112<e.length;_o112++){var _r66="data:".concat(t[_o112].type,";base64,").concat((n=t[_o112].hex,btoa(n.match(/\w{2}/g).map(function(e){return String.fromCharCode(parseInt(e,16));}).join(""))));i.setAttribute("src",_r66,e[_o112]);}var n;}(n,function(e){if(!e)return[];var t=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,i=new RegExp("(?:("+t.source+"))([\\da-fA-F\\s]+)\\}","g"),n=e.match(i),o=[];if(n){var _iterator439=_createForOfIteratorHelper(n),_step439;try{for(_iterator439.s();!(_step439=_iterator439.n()).done;){var _e344=_step439.value;var _i308=!1;_e344.includes("\\pngblip")?_i308="image/png":_e344.includes("\\jpegblip")&&(_i308="image/jpeg"),_i308&&o.push({hex:_e344.replace(t,"").replace(/[^\da-fA-F]/g,""),type:_i308});}}catch(err){_iterator439.e(err);}finally{_iterator439.f();}}return o;}(t),i);}var hw=/<meta\s*name="?generator"?\s*content="?microsoft\s*word\s*\d+"?\/?>/i,gw=/xmlns:o="urn:schemas-microsoft-com/i;var mw=/*#__PURE__*/function(){function mw(e){_classCallCheck(this,mw);this.document=e;}_createClass(mw,[{key:"isActive",value:function isActive(e){return hw.test(e)||gw.test(e);}},{key:"execute",value:function execute(e){var _e$_parsedData=e._parsedData,t=_e$_parsedData.body,i=_e$_parsedData.stylesString;rw(t,i),uw(t,e.dataTransfer.getData("text/rtf")),e.content=t;}}]);return mw;}();function fw(e){return e.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,function(e,t){return 1===t.length?" ":Array(t.length+1).join("  ").substr(0,t.length);});}function pw(e,t){var i=new DOMParser(),n=function(e){return fw(fw(e)).replace(/(<span\s+style=['"]mso-spacerun:yes['"]>[^\S\r\n]*?)[\r\n]+([^\S\r\n]*<\/span>)/g,"$1$2").replace(/<span\s+style=['"]mso-spacerun:yes['"]><\/span>/g,"").replace(/ <\//g," </").replace(/ <o:p><\/o:p>/g," <o:p></o:p>").replace(/<o:p>(&nbsp;|\u00A0)<\/o:p>/g,"").replace(/>([^\S\r\n]*[\r\n]\s*)</g,"><");}(function(e){var t=e.indexOf("</body>");if(t<0)return e;var i=e.indexOf("</html>",t+"</body>".length);return e.substring(0,t+"</body>".length)+(i>=0?e.substring(i):"");}(e=e.replace(/<!--\[if gte vml 1]>/g,""))),o=i.parseFromString(n,"text/html");!function(e){e.querySelectorAll("span[style*=spacerun]").forEach(function(e){var t=e.innerText.length||0;e.innerHTML=Array(t+1).join("  ").substr(0,t);});}(o);var r=o.body.innerHTML,s=function(e,t){var i=new yo(t),n=new Er(i,{blockFillerMode:"nbsp"}),o=e.createDocumentFragment(),r=e.body.childNodes;for(;r.length>0;){o.appendChild(r[0]);}return n.domToView(o,{skipComments:!0});}(o,t),a=function(e){var t=[],i=[],n=Array.from(e.getElementsByTagName("style"));for(var _i309=0,_n184=n;_i309<_n184.length;_i309++){var _e345=_n184[_i309];_e345.sheet&&_e345.sheet.cssRules&&_e345.sheet.cssRules.length&&(t.push(_e345.sheet),i.push(_e345.innerHTML));}return{styles:t,stylesString:i.join(" ")};}(o);return{body:s,bodyString:r,styles:a.styles,stylesString:a.stylesString};}function bw(e,t,i,n){var o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:1;t>o?n.setAttribute(e,t,i):n.removeAttribute(e,i);}function ww(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var n=e.createElement("tableCell",i);return e.insertElement("paragraph",n),e.insert(n,t),n;}function kw(e,t){var i=t.parent.parent,n=parseInt(i.getAttribute("headingColumns")||0),_e$getCellLocation=e.getCellLocation(t),o=_e$getCellLocation.column;return!!n&&o<n;}function _w(){return function(e){e.on("element:table",function(e,t,i){var n=t.viewItem;if(!i.consumable.test(n,{name:!0}))return;var _ref88=function(e){var t={headingRows:0,headingColumns:0},i=[],n=[];var o;for(var _i310=0,_Array$from7=Array.from(e.getChildren());_i310<_Array$from7.length;_i310++){var _r67=_Array$from7[_i310];if("tbody"===_r67.name||"thead"===_r67.name||"tfoot"===_r67.name){"thead"!==_r67.name||o||(o=_r67);var _e346=Array.from(_r67.getChildren()).filter(function(e){return e.is("element","tr");});var _iterator440=_createForOfIteratorHelper(_e346),_step440;try{for(_iterator440.s();!(_step440=_iterator440.n()).done;){var _r68=_step440.value;if("thead"===_r68.parent.name&&_r68.parent===o)t.headingRows++,i.push(_r68);else{n.push(_r68);var _e347=yw(_r68);_e347>t.headingColumns&&(t.headingColumns=_e347);}}}catch(err){_iterator440.e(err);}finally{_iterator440.f();}}}return t.rows=[].concat(i,n),t;}(n),o=_ref88.rows,r=_ref88.headingRows,s=_ref88.headingColumns,a={};s&&(a.headingColumns=s),r&&(a.headingRows=r);var l=i.writer.createElement("table",a);if(i.safeInsert(l,t.modelCursor)){if(i.consumable.consume(n,{name:!0}),o.forEach(function(e){return i.convertItem(e,i.writer.createPositionAt(l,"end"));}),i.convertChildren(n,i.writer.createPositionAt(l,"end")),l.isEmpty){var _e348=i.writer.createElement("tableRow");i.writer.insert(_e348,i.writer.createPositionAt(l,"end")),ww(i.writer,i.writer.createPositionAt(_e348,"end"));}i.updateConversionResult(l,t);}});};}function vw(e){return function(t){t.on("element:"+e,function(e,t,i){if(t.modelRange&&t.viewItem.isEmpty){var _e349=t.modelRange.start.nodeAfter,_n185=i.writer.createPositionAt(_e349,0);i.writer.insertElement("paragraph",_n185);}},{priority:"low"});};}function yw(e){var t=0,i=0;var n=Array.from(e.getChildren()).filter(function(e){return"th"===e.name||"td"===e.name;});for(;i<n.length&&"th"===n[i].name;){var _e350=n[i];t+=parseInt(_e350.getAttribute("colspan")||1),i++;}return t;}var xw=/*#__PURE__*/function(_Symbol$iterator14){function xw(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,xw);this._table=e,this._startRow=void 0!==t.row?t.row:t.startRow||0,this._endRow=void 0!==t.row?t.row:t.endRow,this._startColumn=void 0!==t.column?t.column:t.startColumn||0,this._endColumn=void 0!==t.column?t.column:t.endColumn,this._includeAllSlots=!!t.includeAllSlots,this._skipRows=new Set(),this._row=0,this._rowIndex=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map(),this._nextCellAtColumn=-1;}_createClass(xw,[{key:_Symbol$iterator14,value:function value(){return this;}},{key:"next",value:function next(){var e=this._table.getChild(this._rowIndex);if(!e||this._isOverEndRow())return{done:!0};if(!e.is("element","tableRow"))return this._rowIndex++,this.next();if(this._isOverEndColumn())return this._advanceToNextRow();var t=null;var i=this._getSpanned();if(i)this._includeAllSlots&&!this._shouldSkipSlot()&&(t=this._formatOutValue(i.cell,i.row,i.column));else{var _i311=e.getChild(this._cellIndex);if(!_i311)return this._advanceToNextRow();var _n186=parseInt(_i311.getAttribute("colspan")||1),_o113=parseInt(_i311.getAttribute("rowspan")||1);(_n186>1||_o113>1)&&this._recordSpans(_i311,_o113,_n186),this._shouldSkipSlot()||(t=this._formatOutValue(_i311)),this._nextCellAtColumn=this._column+_n186;}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,t||this.next();}},{key:"skipRow",value:function skipRow(e){this._skipRows.add(e);}},{key:"_advanceToNextRow",value:function _advanceToNextRow(){return this._row++,this._rowIndex++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next();}},{key:"_isOverEndRow",value:function _isOverEndRow(){return void 0!==this._endRow&&this._row>this._endRow;}},{key:"_isOverEndColumn",value:function _isOverEndColumn(){return void 0!==this._endColumn&&this._column>this._endColumn;}},{key:"_formatOutValue",value:function _formatOutValue(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this._row;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this._column;return{done:!1,value:new Aw(this,e,t,i)};}},{key:"_shouldSkipSlot",value:function _shouldSkipSlot(){var e=this._skipRows.has(this._row),t=this._row<this._startRow,i=this._column<this._startColumn,n=void 0!==this._endColumn&&this._column>this._endColumn;return e||t||i||n;}},{key:"_getSpanned",value:function _getSpanned(){var e=this._spannedCells.get(this._row);return e&&e.get(this._column)||null;}},{key:"_recordSpans",value:function _recordSpans(e,t,i){var n={cell:e,row:this._row,column:this._column};for(var _e351=this._row;_e351<this._row+t;_e351++){for(var _t306=this._column;_t306<this._column+i;_t306++){_e351==this._row&&_t306==this._column||this._markSpannedCell(_e351,_t306,n);}}}},{key:"_markSpannedCell",value:function _markSpannedCell(e,t,i){this._spannedCells.has(e)||this._spannedCells.set(e,new Map());this._spannedCells.get(e).set(t,i);}}]);return xw;}(Symbol.iterator);var Aw=/*#__PURE__*/function(){function Aw(e,t,i,n){_classCallCheck(this,Aw);this.cell=t,this.row=e._row,this.column=e._column,this.cellAnchorRow=i,this.cellAnchorColumn=n,this._cellIndex=e._cellIndex,this._rowIndex=e._rowIndex,this._table=e._table;}_createClass(Aw,[{key:"isAnchor",get:function get(){return this.row===this.cellAnchorRow&&this.column===this.cellAnchorColumn;}},{key:"cellWidth",get:function get(){return parseInt(this.cell.getAttribute("colspan")||1);}},{key:"cellHeight",get:function get(){return parseInt(this.cell.getAttribute("rowspan")||1);}},{key:"rowIndex",get:function get(){return this._rowIndex;}},{key:"getPositionBefore",value:function getPositionBefore(){return this._table.root.document.model.createPositionAt(this._table.getChild(this.row),this._cellIndex);}}]);return Aw;}();function Cw(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return function(t){return t.on("insert:table",function(t,i,n){var o=i.item;if(!n.consumable.consume(o,"insert"))return;n.consumable.consume(o,"attribute:headingRows:table"),n.consumable.consume(o,"attribute:headingColumns:table");var r=e&&e.asWidget,s=n.writer.createContainerElement("figure",{"class":"table"}),a=n.writer.createContainerElement("table");var l;var c,d;n.writer.insert(n.writer.createPositionAt(s,0),a),r&&(c=s,(d=n.writer).setCustomProperty("table",!0,c),l=rh(c,d,{hasSelectionHandle:!0}));var u=new xw(o),h={headingRows:o.getAttribute("headingRows")||0,headingColumns:o.getAttribute("headingColumns")||0},g=new Map();var _iterator441=_createForOfIteratorHelper(u),_step441;try{for(_iterator441.s();!(_step441=_iterator441.n()).done;){var _t307=_step441.value;var _i312=_t307.row,_r69=_t307.cell,_s39=o.getChild(_i312),_l14=g.get(_i312)||Pw(a,_s39,_i312,h,n);g.set(_i312,_l14),n.consumable.consume(_r69,"insert");Sw(_t307,h,n.writer.createPositionAt(_l14,"end"),n,e);}}catch(err){_iterator441.e(err);}finally{_iterator441.f();}var _iterator442=_createForOfIteratorHelper(o.getChildren()),_step442;try{for(_iterator442.s();!(_step442=_iterator442.n()).done;){var _e352=_step442.value;var _t308=_e352.index;_e352.is("element","tableRow")&&!g.has(_t308)&&g.set(_t308,Pw(a,_e352,_t308,h,n));}}catch(err){_iterator442.e(err);}finally{_iterator442.f();}var m=n.mapper.toViewPosition(i.range.start);n.mapper.bindElements(o,r?l:s),n.writer.insert(m,r?l:s);});};}function Tw(e,t){var i=t.writer;if(e.parent.is("element","tableCell"))return Ew(e)?i.createContainerElement("span",{"class":"ck-table-bogus-paragraph"}):i.createContainerElement("p");}function Ew(e){return 1===e.parent.childCount&&!zw(e);}function Iw(e,t,i){var n=e.cell,o=Mw(e,t),r=i.mapper.toViewElement(n);r&&r.name!==o&&function(e,t,i){var n=i.writer,o=i.mapper.toViewElement(e),r=dh(n.createEditableElement(t,o.getAttributes()),n);lh(r,n,function(e,t,i){return i.addClass(en(t.classes),e);},function(e,t,i){return i.removeClass(en(t.classes),e);}),n.insert(n.createPositionAfter(o),r),n.move(n.createRangeIn(o),n.createPositionAt(r,0)),n.remove(n.createRangeOn(o)),i.mapper.unbindViewElement(o),i.mapper.bindElements(e,r);}(n,o,i);}function Sw(e,t,i,n,o){var r=o&&o.asWidget,s=Mw(e,t),a=r?dh(n.writer.createEditableElement(s),n.writer):n.writer.createContainerElement(s);r&&lh(a,n.writer,function(e,t,i){return i.addClass(en(t.classes),e);},function(e,t,i){return i.removeClass(en(t.classes),e);});var l=e.cell,c=l.getChild(0),d=1===l.childCount&&"paragraph"===c.name;if(n.writer.insert(i,a),n.mapper.bindElements(l,a),!r&&d&&!zw(c)){var _e353=l.getChild(0);n.consumable.consume(_e353,"insert"),n.mapper.bindElements(_e353,a);}}function Pw(e,t,i,n,o){o.consumable.consume(t,"insert");var r=t.isEmpty?o.writer.createEmptyElement("tr"):o.writer.createContainerElement("tr");o.mapper.bindElements(t,r);var s=n.headingRows,a=function(e,t,i){var n=Nw(e,t);return n||function(e,t,i){var n=i.writer.createContainerElement(e),o=i.writer.createPositionAt(t,"tbody"==e?"end":0);return i.writer.insert(o,n),n;}(e,t,i);}(function(e,t){return e<t.headingRows?"thead":"tbody";}(i,n),e,o),l=s>0&&i>=s?i-s:i,c=o.writer.createPositionAt(a,l);return o.writer.insert(c,r),r;}function Mw(e,t){var i=e.row,n=e.column,o=t.headingColumns,r=t.headingRows;if(r&&r>i)return"th";return o&&o>n?"th":"td";}function Nw(e,t){var _iterator443=_createForOfIteratorHelper(t.getChildren()),_step443;try{for(_iterator443.s();!(_step443=_iterator443.n()).done;){var _i313=_step443.value;if(_i313.name==e)return _i313;}}catch(err){_iterator443.e(err);}finally{_iterator443.f();}}function Rw(e,t,i){var n=Nw(e,t);n&&0===n.childCount&&i.writer.remove(i.writer.createRangeOn(n));}function zw(e){return!!_toConsumableArray(e.getAttributeKeys()).length;}var Ow=/*#__PURE__*/function(_Ze30){_inherits(Ow,_Ze30);var _super205=_createSuper(Ow);function Ow(){_classCallCheck(this,Ow);return _super205.apply(this,arguments);}_createClass(Ow,[{key:"refresh",value:function refresh(){var e=this.editor.model,t=e.document.selection,i=e.schema;this.isEnabled=function(e,t){var i=e.getFirstPosition().parent,n=i===i.root?i:i.parent;return t.checkChild(n,"table");}(t,i);}},{key:"execute",value:function execute(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=this.editor.model,i=t.document.selection,n=this.editor.plugins.get("TableUtils"),o=this.editor.config.get("table"),r=uh(i,t),s=o.defaultHeadings.rows,a=o.defaultHeadings.columns;void 0===e.headingRows&&s&&(e.headingRows=s),void 0===e.headingColumns&&a&&(e.headingColumns=a),t.change(function(i){var o=n.createTable(i,e);t.insertContent(o,r),i.setSelection(i.createPositionAt(o.getNodeByPath([0,0,0]),0));});}}]);return Ow;}(Ze);function Dw(e){var t=[];var _iterator444=_createForOfIteratorHelper(Hw(e.getRanges())),_step444;try{for(_iterator444.s();!(_step444=_iterator444.n()).done;){var _i314=_step444.value;var _e354=_i314.getContainedElement();_e354&&_e354.is("element","tableCell")&&t.push(_e354);}}catch(err){_iterator444.e(err);}finally{_iterator444.f();}return t;}function Lw(e){var t=[];var _iterator445=_createForOfIteratorHelper(e.getRanges()),_step445;try{for(_iterator445.s();!(_step445=_iterator445.n()).done;){var _i315=_step445.value;var _e355=_i315.start.findAncestor("tableCell");_e355&&t.push(_e355);}}catch(err){_iterator445.e(err);}finally{_iterator445.f();}return t;}function Vw(e){var t=Dw(e);return t.length?t:Lw(e);}function Bw(e){return Uw(e.map(function(e){return e.parent.index;}));}function jw(e){var t=e[0].findAncestor("table");return Uw(_toConsumableArray(new xw(t)).filter(function(t){return e.includes(t.cell);}).map(function(e){return e.column;}));}function Fw(e,t){if(e.length<2||!function(e){var t=e[0].findAncestor("table"),i=Bw(e),n=parseInt(t.getAttribute("headingRows")||0);if(!qw(i,n))return!1;var o=parseInt(t.getAttribute("headingColumns")||0);return qw(jw(e),o);}(e))return!1;var i=new Set(),n=new Set();var o=0;var _iterator446=_createForOfIteratorHelper(e),_step446;try{for(_iterator446.s();!(_step446=_iterator446.n()).done;){var _r70=_step446.value;var _t$getCellLocation=t.getCellLocation(_r70),_e356=_t$getCellLocation.row,_s40=_t$getCellLocation.column,_a25=parseInt(_r70.getAttribute("rowspan")||1),_l15=parseInt(_r70.getAttribute("colspan")||1);i.add(_e356),n.add(_s40),_a25>1&&i.add(_e356+_a25-1),_l15>1&&n.add(_s40+_l15-1),o+=_a25*_l15;}}catch(err){_iterator446.e(err);}finally{_iterator446.f();}return function(e,t){var i=Array.from(e.values()),n=Array.from(t.values()),o=Math.max.apply(Math,_toConsumableArray(i)),r=Math.min.apply(Math,_toConsumableArray(i)),s=Math.max.apply(Math,_toConsumableArray(n)),a=Math.min.apply(Math,_toConsumableArray(n));return(o-r+1)*(s-a+1);}(i,n)==o;}function Hw(e){return Array.from(e).sort(Ww);}function Uw(e){var t=e.sort(function(e,t){return e-t;});return{first:t[0],last:t[t.length-1]};}function Ww(e,t){var i=e.start,n=t.start;return i.isBefore(n)?-1:1;}function qw(_ref89,i){var e=_ref89.first,t=_ref89.last;return e<i===t<i;}var $w=/*#__PURE__*/function(_Ze31){_inherits($w,_Ze31);var _super206=_createSuper($w);function $w(e){var _this304;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,$w);_this304=_super206.call(this,e),_this304.order=t.order||"below";return _this304;}_createClass($w,[{key:"refresh",value:function refresh(){var e=!!Vw(this.editor.model.document.selection).length;this.isEnabled=e;}},{key:"execute",value:function execute(){var e=this.editor,t=e.model.document.selection,i=e.plugins.get("TableUtils"),n="above"===this.order,o=Vw(t),r=Bw(o),s=n?r.first:r.last,a=o[0].findAncestor("table");i.insertRows(a,{at:n?s:s+1,copyStructureFromAbove:!n});}}]);return $w;}(Ze);var Yw=/*#__PURE__*/function(_Ze32){_inherits(Yw,_Ze32);var _super207=_createSuper(Yw);function Yw(e){var _this305;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,Yw);_this305=_super207.call(this,e),_this305.order=t.order||"right";return _this305;}_createClass(Yw,[{key:"refresh",value:function refresh(){var e=!!Vw(this.editor.model.document.selection).length;this.isEnabled=e;}},{key:"execute",value:function execute(){var e=this.editor,t=e.model.document.selection,i=e.plugins.get("TableUtils"),n="left"===this.order,o=Vw(t),r=jw(o),s=n?r.first:r.last,a=o[0].findAncestor("table");i.insertColumns(a,{columns:1,at:n?s:s+1});}}]);return Yw;}(Ze);var Gw=/*#__PURE__*/function(_Ze33){_inherits(Gw,_Ze33);var _super208=_createSuper(Gw);function Gw(e){var _this306;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,Gw);_this306=_super208.call(this,e),_this306.direction=t.direction||"horizontally";return _this306;}_createClass(Gw,[{key:"refresh",value:function refresh(){var e=Vw(this.editor.model.document.selection);this.isEnabled=1===e.length;}},{key:"execute",value:function execute(){var e=Vw(this.editor.model.document.selection)[0],t="horizontally"===this.direction,i=this.editor.plugins.get("TableUtils");t?i.splitCellHorizontally(e,2):i.splitCellVertically(e,2);}}]);return Gw;}(Ze);function Kw(e,t,i){var n=t.startRow,o=t.startColumn,r=t.endRow,s=t.endColumn,a=i.createElement("table"),l=r-n+1;for(var _e357=0;_e357<l;_e357++){i.insertElement("tableRow",a,"end");}var c=_toConsumableArray(new xw(e,{startRow:n,endRow:r,startColumn:o,endColumn:s,includeAllSlots:!0}));var _iterator447=_createForOfIteratorHelper(c),_step447;try{for(_iterator447.s();!(_step447=_iterator447.n()).done;){var _step447$value=_step447.value,_e358=_step447$value.row,_t309=_step447$value.column,_l16=_step447$value.cell,_d4=_step447$value.isAnchor,_u4=_step447$value.cellAnchorRow,_h3=_step447$value.cellAnchorColumn;var _c7=_e358-n,_g2=a.getChild(_c7);if(_d4){var _n187=i.cloneElement(_l16);i.append(_n187,_g2),ek(_n187,_e358,_t309,r,s,i);}else(_u4<n||_h3<o)&&ww(i,i.createPositionAt(_g2,"end"));}}catch(err){_iterator447.e(err);}finally{_iterator447.f();}return function(e,t,i,n,o){var r=parseInt(t.getAttribute("headingRows")||0);if(r>0){bw("headingRows",r-i,e,o,0);}var s=parseInt(t.getAttribute("headingColumns")||0);if(s>0){bw("headingColumns",s-n,e,o,0);}}(a,e,n,o,i),a;}function Qw(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var n=[],o=new xw(e,{startRow:i,endRow:t-1});var _iterator448=_createForOfIteratorHelper(o),_step448;try{for(_iterator448.s();!(_step448=_iterator448.n()).done;){var _e359=_step448.value;var _i316=_e359.row,_o114=_e359.cellHeight,_r71=_i316+_o114-1;_i316<t&&t<=_r71&&n.push(_e359);}}catch(err){_iterator448.e(err);}finally{_iterator448.f();}return n;}function Jw(e,t,i){var n=e.parent,o=n.parent,r=n.index,s=t-r,a={},l=parseInt(e.getAttribute("rowspan"))-s;l>1&&(a.rowspan=l);var c=parseInt(e.getAttribute("colspan")||1);c>1&&(a.colspan=c);var d=r+s,u=_toConsumableArray(new xw(o,{startRow:r,endRow:d,includeAllSlots:!0}));var h,g=null;var _iterator449=_createForOfIteratorHelper(u),_step449;try{for(_iterator449.s();!(_step449=_iterator449.n()).done;){var _t310=_step449.value;var _n188=_t310.row,_o115=_t310.column,_r72=_t310.cell;_r72===e&&void 0===h&&(h=_o115),void 0!==h&&h===_o115&&_n188===d&&(g=ww(i,_t310.getPositionBefore(),a));}}catch(err){_iterator449.e(err);}finally{_iterator449.f();}return bw("rowspan",s,e,i),g;}function Zw(e,t){var i=[],n=new xw(e);var _iterator450=_createForOfIteratorHelper(n),_step450;try{for(_iterator450.s();!(_step450=_iterator450.n()).done;){var _e360=_step450.value;var _n189=_e360.column,_o116=_e360.cellWidth,_r73=_n189+_o116-1;_n189<t&&t<=_r73&&i.push(_e360);}}catch(err){_iterator450.e(err);}finally{_iterator450.f();}return i;}function Xw(e,t,i,n){var o=i-t,r={},s=parseInt(e.getAttribute("colspan"))-o;s>1&&(r.colspan=s);var a=parseInt(e.getAttribute("rowspan")||1);a>1&&(r.rowspan=a);var l=ww(n,n.createPositionAfter(e),r);return bw("colspan",o,e,n),l;}function ek(e,t,i,n,o,r){var s=parseInt(e.getAttribute("colspan")||1),a=parseInt(e.getAttribute("rowspan")||1);if(i+s-1>o){bw("colspan",o-i+1,e,r,1);}if(t+a-1>n){bw("rowspan",n-t+1,e,r,1);}}function tk(e,t){var i=t.getColumns(e),n=new Array(i).fill(0);var _iterator451=_createForOfIteratorHelper(new xw(e)),_step451;try{for(_iterator451.s();!(_step451=_iterator451.n()).done;){var _t311=_step451.value.column;n[_t311]++;}}catch(err){_iterator451.e(err);}finally{_iterator451.f();}var o=n.reduce(function(e,t,i){return t?e:[].concat(_toConsumableArray(e),[i]);},[]);if(o.length>0){var _i317=o[o.length-1];return t.removeColumns(e,{at:_i317}),!0;}return!1;}function ik(e,t){var i=[],n=t.getRows(e);for(var _t312=0;_t312<n;_t312++){e.getChild(_t312).isEmpty&&i.push(_t312);}if(i.length>0){var _n190=i[i.length-1];return t.removeRows(e,{at:_n190}),!0;}return!1;}function nk(e,t){tk(e,t)||ik(e,t);}function ok(e,t){var i=Array.from(new xw(e,{startColumn:t.firstColumn,endColumn:t.lastColumn,row:t.lastRow}));if(i.every(function(_ref90){var e=_ref90.cellHeight;return 1===e;}))return t.lastRow;var n=i[0].cellHeight-1;return t.lastRow+n;}function rk(e,t){var i=Array.from(new xw(e,{startRow:t.firstRow,endRow:t.lastRow,column:t.lastColumn}));if(i.every(function(_ref91){var e=_ref91.cellWidth;return 1===e;}))return t.lastColumn;var n=i[0].cellWidth-1;return t.lastColumn+n;}var sk=/*#__PURE__*/function(_Ze34){_inherits(sk,_Ze34);var _super209=_createSuper(sk);function sk(e,t){var _this307;_classCallCheck(this,sk);_this307=_super209.call(this,e),_this307.direction=t.direction,_this307.isHorizontal="right"==_this307.direction||"left"==_this307.direction;return _this307;}_createClass(sk,[{key:"refresh",value:function refresh(){var e=this._getMergeableCell();this.value=e,this.isEnabled=!!e;}},{key:"execute",value:function execute(){var _this308=this;var e=this.editor.model,t=Lw(e.document.selection)[0],i=this.value,n=this.direction;e.change(function(e){var o="right"==n||"down"==n,r=o?t:i,s=o?i:t,a=s.parent;!function(e,t,i){ak(e)||(ak(t)&&i.remove(i.createRangeIn(t)),i.move(i.createRangeIn(e),i.createPositionAt(t,"end")));i.remove(e);}(s,r,e);var l=_this308.isHorizontal?"colspan":"rowspan",c=parseInt(t.getAttribute(l)||1),d=parseInt(i.getAttribute(l)||1);e.setAttribute(l,c+d,r),e.setSelection(e.createRangeIn(r));var u=_this308.editor.plugins.get("TableUtils");nk(a.findAncestor("table"),u);});}},{key:"_getMergeableCell",value:function _getMergeableCell(){var e=Lw(this.editor.model.document.selection)[0];if(!e)return;var t=this.editor.plugins.get("TableUtils"),i=this.isHorizontal?function(e,t,i){var n=e.parent.parent,o="right"==t?e.nextSibling:e.previousSibling,r=(n.getAttribute("headingColumns")||0)>0;if(!o)return;var s="right"==t?e:o,a="right"==t?o:e,_i$getCellLocation=i.getCellLocation(s),l=_i$getCellLocation.column,_i$getCellLocation2=i.getCellLocation(a),c=_i$getCellLocation2.column,d=parseInt(s.getAttribute("colspan")||1),u=kw(i,s),h=kw(i,a);if(r&&u!=h)return;return l+d===c?o:void 0;}(e,this.direction,t):function(e,t,i){var n=e.parent,o=n.parent,r=o.getChildIndex(n);if("down"==t&&r===i.getRows(o)-1||"up"==t&&0===r)return;var s=parseInt(e.getAttribute("rowspan")||1),a=o.getAttribute("headingRows")||0,l="down"==t&&r+s===a,c="up"==t&&r===a;if(a&&(l||c))return;var d=parseInt(e.getAttribute("rowspan")||1),u="down"==t?r+d:r,h=_toConsumableArray(new xw(o,{endRow:u})),g=h.find(function(t){return t.cell===e;}).column,m=h.find(function(_ref92){var e=_ref92.row,i=_ref92.cellHeight,n=_ref92.column;return n===g&&("down"==t?e===u:u===e+i);});return m&&m.cell;}(e,this.direction,t);if(!i)return;var n=this.isHorizontal?"rowspan":"colspan",o=parseInt(e.getAttribute(n)||1);return parseInt(i.getAttribute(n)||1)===o?i:void 0;}}]);return sk;}(Ze);function ak(e){return 1==e.childCount&&e.getChild(0).is("element","paragraph")&&e.getChild(0).isEmpty;}var lk=/*#__PURE__*/function(_Ze35){_inherits(lk,_Ze35);var _super210=_createSuper(lk);function lk(){_classCallCheck(this,lk);return _super210.apply(this,arguments);}_createClass(lk,[{key:"refresh",value:function refresh(){var e=Vw(this.editor.model.document.selection),t=e[0];if(t){var _i318=t.findAncestor("table"),_n191=this.editor.plugins.get("TableUtils").getRows(_i318)-1,_o117=Bw(e),_r74=0===_o117.first&&_o117.last===_n191;this.isEnabled=!_r74;}else this.isEnabled=!1;}},{key:"execute",value:function execute(){var e=this.editor.model,t=this.editor.plugins.get("TableUtils"),i=Vw(e.document.selection),n=Bw(i),o=i[0],r=o.findAncestor("table"),s=t.getCellLocation(o).column;e.change(function(e){var i=n.last-n.first+1;t.removeRows(r,{at:n.first,rows:i});var o=function(e,t,i,n){var o=e.getChild(Math.min(t,n-1));var r=o.getChild(0),s=0;var _iterator452=_createForOfIteratorHelper(o.getChildren()),_step452;try{for(_iterator452.s();!(_step452=_iterator452.n()).done;){var _e361=_step452.value;if(s>i)return r;r=_e361,s+=parseInt(_e361.getAttribute("colspan")||1);}}catch(err){_iterator452.e(err);}finally{_iterator452.f();}return r;}(r,n.first,s,t.getRows(r));e.setSelection(e.createPositionAt(o,0));});}}]);return lk;}(Ze);var ck=/*#__PURE__*/function(_Ze36){_inherits(ck,_Ze36);var _super211=_createSuper(ck);function ck(){_classCallCheck(this,ck);return _super211.apply(this,arguments);}_createClass(ck,[{key:"refresh",value:function refresh(){var e=Vw(this.editor.model.document.selection),t=e[0];if(t){var _i319=t.findAncestor("table"),_n192=this.editor.plugins.get("TableUtils").getColumns(_i319),_jw=jw(e),_o118=_jw.first,_r75=_jw.last;this.isEnabled=_r75-_o118<_n192-1;}else this.isEnabled=!1;}},{key:"execute",value:function execute(){var _this309=this;var _ref93=function(e){var t=Vw(e),i=t[0],n=t.pop(),o=[i,n];return i.isBefore(n)?o:o.reverse();}(this.editor.model.document.selection),_ref94=_slicedToArray(_ref93,2),e=_ref94[0],t=_ref94[1],i=e.parent.parent,n=_toConsumableArray(new xw(i)),o={first:n.find(function(t){return t.cell===e;}).column,last:n.find(function(e){return e.cell===t;}).column},r=function(e,t,i,n){return parseInt(i.getAttribute("colspan")||1)>1?i:t.previousSibling||i.nextSibling?i.nextSibling||t.previousSibling:n.first?e.reverse().find(function(_ref95){var e=_ref95.column;return e<n.first;}).cell:e.reverse().find(function(_ref96){var e=_ref96.column;return e>n.last;}).cell;}(n,e,t,o);this.editor.model.change(function(e){var t=o.last-o.first+1;_this309.editor.plugins.get("TableUtils").removeColumns(i,{at:o.first,columns:t}),e.setSelection(e.createPositionAt(r,0));});}}]);return ck;}(Ze);var dk=/*#__PURE__*/function(_Ze37){_inherits(dk,_Ze37);var _super212=_createSuper(dk);function dk(){_classCallCheck(this,dk);return _super212.apply(this,arguments);}_createClass(dk,[{key:"refresh",value:function refresh(){var _this310=this;var e=Vw(this.editor.model.document.selection),t=e.length>0;this.isEnabled=t,this.value=t&&e.every(function(e){return _this310._isInHeading(e,e.parent.parent);});}},{key:"execute",value:function execute(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(e.forceValue===this.value)return;var t=this.editor.model,i=Vw(t.document.selection),n=i[0].findAncestor("table"),_Bw=Bw(i),o=_Bw.first,r=_Bw.last,s=this.value?o:r+1,a=n.getAttribute("headingRows")||0;t.change(function(e){if(s){var _t313=Qw(n,s,s>a?a:0);var _iterator453=_createForOfIteratorHelper(_t313),_step453;try{for(_iterator453.s();!(_step453=_iterator453.n()).done;){var _i320=_step453.value.cell;Jw(_i320,s,e);}}catch(err){_iterator453.e(err);}finally{_iterator453.f();}}bw("headingRows",s,n,e,0);});}},{key:"_isInHeading",value:function _isInHeading(e,t){var i=parseInt(t.getAttribute("headingRows")||0);return!!i&&e.parent.index<i;}}]);return dk;}(Ze);var uk=/*#__PURE__*/function(_Ze38){_inherits(uk,_Ze38);var _super213=_createSuper(uk);function uk(){_classCallCheck(this,uk);return _super213.apply(this,arguments);}_createClass(uk,[{key:"refresh",value:function refresh(){var e=Vw(this.editor.model.document.selection),t=this.editor.plugins.get("TableUtils"),i=e.length>0;this.isEnabled=i,this.value=i&&e.every(function(e){return kw(t,e);});}},{key:"execute",value:function execute(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(e.forceValue===this.value)return;var t=this.editor.model,i=Vw(t.document.selection),n=i[0].findAncestor("table"),_jw2=jw(i),o=_jw2.first,r=_jw2.last,s=this.value?o:r+1;t.change(function(e){if(s){var _t314=Zw(n,s);var _iterator454=_createForOfIteratorHelper(_t314),_step454;try{for(_iterator454.s();!(_step454=_iterator454.n()).done;){var _step454$value=_step454.value,_i321=_step454$value.cell,_n193=_step454$value.column;Xw(_i321,_n193,s,e);}}catch(err){_iterator454.e(err);}finally{_iterator454.f();}}bw("headingColumns",s,n,e,0);});}}]);return uk;}(Ze);var hk=/*#__PURE__*/function(_Qe79){_inherits(hk,_Qe79);var _super214=_createSuper(hk);function hk(){_classCallCheck(this,hk);return _super214.apply(this,arguments);}_createClass(hk,[{key:"init",value:function init(){this.decorate("insertColumns"),this.decorate("insertRows");}},{key:"getCellLocation",value:function getCellLocation(e){var t=e.parent,i=t.parent,n=i.getChildIndex(t),o=new xw(i,{row:n});var _iterator455=_createForOfIteratorHelper(o),_step455;try{for(_iterator455.s();!(_step455=_iterator455.n()).done;){var _step455$value=_step455.value,_t315=_step455$value.cell,_i322=_step455$value.row,_n194=_step455$value.column;if(_t315===e)return{row:_i322,column:_n194};}}catch(err){_iterator455.e(err);}finally{_iterator455.f();}}},{key:"createTable",value:function createTable(e,t){var i=e.createElement("table"),n=parseInt(t.rows)||2,o=parseInt(t.columns)||2;return gk(e,i,0,n,o),t.headingRows&&bw("headingRows",Math.min(t.headingRows,n),i,e,0),t.headingColumns&&bw("headingColumns",Math.min(t.headingColumns,o),i,e,0),i;}},{key:"insertRows",value:function insertRows(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=this.editor.model,n=t.at||0,o=t.rows||1,r=void 0!==t.copyStructureFromAbove,s=t.copyStructureFromAbove?n-1:n,a=this.getRows(e),c=this.getColumns(e);if(n>a)throw new l.a("tableutils-insertrows-insert-out-of-range",this,{options:t});i.change(function(t){var i=e.getAttribute("headingRows")||0;if(i>n&&bw("headingRows",i+o,e,t,0),!r&&(0===n||n===a))return void gk(t,e,n,o,c);var l=r?Math.max(n,s):n,d=new xw(e,{endRow:l}),u=new Array(c).fill(1);var _iterator456=_createForOfIteratorHelper(d),_step456;try{for(_iterator456.s();!(_step456=_iterator456.n()).done;){var _step456$value=_step456.value,_e363=_step456$value.row,_i325=_step456$value.column,_a26=_step456$value.cellHeight,_l17=_step456$value.cellWidth,_c8=_step456$value.cell;var _d5=_e363+_a26-1,_h4=_e363<=s&&s<=_d5;_e363<n&&n<=_d5?(t.setAttribute("rowspan",_a26+o,_c8),u[_i325]=-_l17):r&&_h4&&(u[_i325]=_l17);}}catch(err){_iterator456.e(err);}finally{_iterator456.f();}for(var _i323=0;_i323<o;_i323++){var _i324=t.createElement("tableRow");t.insert(_i324,e,n);for(var _e362=0;_e362<u.length;_e362++){var _n195=u[_e362],_o119=t.createPositionAt(_i324,"end");_n195>0&&ww(t,_o119,_n195>1?{colspan:_n195}:null),_e362+=Math.abs(_n195)-1;}}});}},{key:"insertColumns",value:function insertColumns(e){var _this311=this;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=this.editor.model,n=t.at||0,o=t.columns||1;i.change(function(t){var i=e.getAttribute("headingColumns");n<i&&t.setAttribute("headingColumns",i+o,e);var r=_this311.getColumns(e);if(0===n||r===n){var _iterator457=_createForOfIteratorHelper(e.getChildren()),_step457;try{for(_iterator457.s();!(_step457=_iterator457.n()).done;){var _i326=_step457.value;_i326.is("element","tableRow")&&mk(o,t,t.createPositionAt(_i326,n?"end":0));}}catch(err){_iterator457.e(err);}finally{_iterator457.f();}return;}var s=new xw(e,{column:n,includeAllSlots:!0});var _iterator458=_createForOfIteratorHelper(s),_step458;try{for(_iterator458.s();!(_step458=_iterator458.n()).done;){var _e364=_step458.value;var _i327=_e364.row,_r76=_e364.cell,_a27=_e364.cellAnchorColumn,_l18=_e364.cellAnchorRow,_c9=_e364.cellWidth,_d6=_e364.cellHeight;if(_a27<n){t.setAttribute("colspan",_c9+o,_r76);var _e365=_l18+_d6-1;for(var _t316=_i327;_t316<=_e365;_t316++){s.skipRow(_t316);}}else mk(o,t,_e364.getPositionBefore());}}catch(err){_iterator458.e(err);}finally{_iterator458.f();}});}},{key:"removeRows",value:function removeRows(e,t){var _this312=this;var i=this.editor.model,n=t.rows||1,o=this.getRows(e),r=t.at,s=r+n-1;if(s>o-1)throw new l.a("tableutils-removerows-row-index-out-of-range",this,{table:e,options:t});i.change(function(t){var _ref97=function(e,t,i){var n=new Map(),o=[];var _iterator459=_createForOfIteratorHelper(new xw(e,{endRow:i})),_step459;try{for(_iterator459.s();!(_step459=_iterator459.n()).done;){var _step459$value=_step459.value,_r77=_step459$value.row,_s41=_step459$value.column,_a28=_step459$value.cellHeight,_l19=_step459$value.cell;var _e366=_r77+_a28-1;if(_r77>=t&&_r77<=i&&_e366>i){var _e367=_a28-(i-_r77+1);n.set(_s41,{cell:_l19,rowspan:_e367});}if(_r77<t&&_e366>=t){var _n196=void 0;_n196=_e366>=i?i-t+1:_e366-t+1,o.push({cell:_l19,rowspan:_a28-_n196});}}}catch(err){_iterator459.e(err);}finally{_iterator459.f();}return{cellsToMove:n,cellsToTrim:o};}(e,r,s),i=_ref97.cellsToMove,n=_ref97.cellsToTrim;if(i.size){!function(e,t,i,n){var o=_toConsumableArray(new xw(e,{includeAllSlots:!0,row:t})),r=e.getChild(t);var s;var _iterator460=_createForOfIteratorHelper(o),_step460;try{for(_iterator460.s();!(_step460=_iterator460.n()).done;){var _step460$value=_step460.value,_e368=_step460$value.column,_t317=_step460$value.cell,_a29=_step460$value.isAnchor;if(i.has(_e368)){var _i$get=i.get(_e368),_t318=_i$get.cell,_o120=_i$get.rowspan,_a30=s?n.createPositionAfter(s):n.createPositionAt(r,0);n.move(n.createRangeOn(_t318),_a30),bw("rowspan",_o120,_t318,n),s=_t318;}else _a29&&(s=_t317);}}catch(err){_iterator460.e(err);}finally{_iterator460.f();}}(e,s+1,i,t);}for(var _i328=s;_i328>=r;_i328--){t.remove(e.getChild(_i328));}var _iterator461=_createForOfIteratorHelper(n),_step461;try{for(_iterator461.s();!(_step461=_iterator461.n()).done;){var _step461$value=_step461.value,_e369=_step461$value.rowspan,_i329=_step461$value.cell;bw("rowspan",_e369,_i329,t);}}catch(err){_iterator461.e(err);}finally{_iterator461.f();}!function(e,t,i,n){var o=e.getAttribute("headingRows")||0;if(t<o){bw("headingRows",i<o?o-(i-t+1):t,e,n,0);}}(e,r,s,t),tk(e,_this312)||ik(e,_this312);});}},{key:"removeColumns",value:function removeColumns(e,t){var _this313=this;var i=this.editor.model,n=t.at,o=t.columns||1,r=t.at+o-1;i.change(function(t){!function(e,t,i){var n=e.getAttribute("headingColumns")||0;if(n&&t.first<n){var _o121=Math.min(n-1,t.last)-t.first+1;i.setAttribute("headingColumns",n-_o121,e);}}(e,{first:n,last:r},t);for(var _i330=r;_i330>=n;_i330--){for(var _i331=0,_arr3=_toConsumableArray(new xw(e));_i331<_arr3.length;_i331++){var _arr3$_i=_arr3[_i331],_n197=_arr3$_i.cell,_o122=_arr3$_i.column,_r78=_arr3$_i.cellWidth;_o122<=_i330&&_r78>1&&_o122+_r78>_i330?bw("colspan",_r78-1,_n197,t):_o122===_i330&&t.remove(_n197);}}ik(e,_this313)||tk(e,_this313);});}},{key:"splitCellVertically",value:function splitCellVertically(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:2;var i=this.editor.model,n=e.parent.parent,o=parseInt(e.getAttribute("rowspan")||1),r=parseInt(e.getAttribute("colspan")||1);i.change(function(i){if(r>1){var _fk=fk(r,t),_n198=_fk.newCellsSpan,_s42=_fk.updatedSpan;bw("colspan",_s42,e,i);var _a31={};_n198>1&&(_a31.colspan=_n198),o>1&&(_a31.rowspan=o);mk(r>t?t-1:r-1,i,i.createPositionAfter(e),_a31);}if(r<t){var _s43=t-r,_a32=_toConsumableArray(new xw(n)),_a32$find=_a32.find(function(_ref98){var t=_ref98.cell;return t===e;}),_l20=_a32$find.column,_c10=_a32.filter(function(_ref99){var t=_ref99.cell,i=_ref99.cellWidth,n=_ref99.column;return t!==e&&n===_l20||n<_l20&&n+i>_l20;});var _iterator462=_createForOfIteratorHelper(_c10),_step462;try{for(_iterator462.s();!(_step462=_iterator462.n()).done;){var _step462$value=_step462.value,_e370=_step462$value.cell,_t319=_step462$value.cellWidth;i.setAttribute("colspan",_t319+_s43,_e370);}}catch(err){_iterator462.e(err);}finally{_iterator462.f();}var _d7={};o>1&&(_d7.rowspan=o),mk(_s43,i,i.createPositionAfter(e),_d7);var _u5=n.getAttribute("headingColumns")||0;_u5>_l20&&bw("headingColumns",_u5+_s43,n,i);}});}},{key:"splitCellHorizontally",value:function splitCellHorizontally(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:2;var i=this.editor.model,n=e.parent,o=n.parent,r=o.getChildIndex(n),s=parseInt(e.getAttribute("rowspan")||1),a=parseInt(e.getAttribute("colspan")||1);i.change(function(i){if(s>1){var _n199=_toConsumableArray(new xw(o,{startRow:r,endRow:r+s-1,includeAllSlots:!0})),_fk2=fk(s,t),_l21=_fk2.newCellsSpan,_c11=_fk2.updatedSpan;bw("rowspan",_c11,e,i);var _n199$find=_n199.find(function(_ref100){var t=_ref100.cell;return t===e;}),_d8=_n199$find.column,_u6={};_l21>1&&(_u6.rowspan=_l21),a>1&&(_u6.colspan=a);for(var _i332=0,_n200=_n199;_i332<_n200.length;_i332++){var _e371=_n200[_i332];var _t320=_e371.column,_n201=_e371.row,_o123=_t320===_d8,_s44=(_n201+r+_c11)%_l21==0;_n201>=r+_c11&&_o123&&_s44&&mk(1,i,_e371.getPositionBefore(),_u6);}}if(s<t){var _n202=t-s,_l22=_toConsumableArray(new xw(o,{startRow:0,endRow:r}));var _iterator463=_createForOfIteratorHelper(_l22),_step463;try{for(_iterator463.s();!(_step463=_iterator463.n()).done;){var _step463$value=_step463.value,_t321=_step463$value.cell,_o124=_step463$value.cellHeight,_s45=_step463$value.row;if(_t321!==e&&_s45+_o124>r){var _e372=_o124+_n202;i.setAttribute("rowspan",_e372,_t321);}}}catch(err){_iterator463.e(err);}finally{_iterator463.f();}var _c12={};a>1&&(_c12.colspan=a),gk(i,o,r+1,_n202,1,_c12);var _d9=o.getAttribute("headingRows")||0;_d9>r&&bw("headingRows",_d9+_n202,o,i);}});}},{key:"getColumns",value:function getColumns(e){return _toConsumableArray(e.getChild(0).getChildren()).reduce(function(e,t){return e+parseInt(t.getAttribute("colspan")||1);},0);}},{key:"getRows",value:function getRows(e){return Array.from(e.getChildren()).reduce(function(e,t){return t.is("element","tableRow")?e+1:e;},0);}}],[{key:"pluginName",get:function get(){return"TableUtils";}}]);return hk;}(Qe);function gk(e,t,i,n,o){var r=arguments.length>5&&arguments[5]!==undefined?arguments[5]:{};for(var _s46=0;_s46<n;_s46++){var _n203=e.createElement("tableRow");e.insert(_n203,t,i),mk(o,e,e.createPositionAt(_n203,"end"),r);}}function mk(e,t,i){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};for(var _o125=0;_o125<e;_o125++){ww(t,i,n);}}function fk(e,t){if(e<t)return{newCellsSpan:1,updatedSpan:1};var i=Math.floor(e/t);return{newCellsSpan:i,updatedSpan:e-i*t+i};}var pk=/*#__PURE__*/function(_Ze39){_inherits(pk,_Ze39);var _super215=_createSuper(pk);function pk(){_classCallCheck(this,pk);return _super215.apply(this,arguments);}_createClass(pk,[{key:"refresh",value:function refresh(){var e=Dw(this.editor.model.document.selection);this.isEnabled=Fw(e,this.editor.plugins.get(hk));}},{key:"execute",value:function execute(){var e=this.editor.model,t=this.editor.plugins.get(hk);e.change(function(i){var n=Dw(e.document.selection),o=n.shift(),_ref101=function(e,t,i){var n=0,o=0;var _iterator464=_createForOfIteratorHelper(t),_step464;try{for(_iterator464.s();!(_step464=_iterator464.n()).done;){var _e373=_step464.value;var _i$getCellLocation4=i.getCellLocation(_e373),_t322=_i$getCellLocation4.row,_r79=_i$getCellLocation4.column;n=kk(_e373,_r79,n,"colspan"),o=kk(_e373,_t322,o,"rowspan");}}catch(err){_iterator464.e(err);}finally{_iterator464.f();}var _i$getCellLocation3=i.getCellLocation(e),r=_i$getCellLocation3.row,s=_i$getCellLocation3.column;return{mergeWidth:n-s,mergeHeight:o-r};}(o,n,t),r=_ref101.mergeWidth,s=_ref101.mergeHeight;bw("colspan",r,o,i),bw("rowspan",s,o,i);var _iterator465=_createForOfIteratorHelper(n),_step465;try{for(_iterator465.s();!(_step465=_iterator465.n()).done;){var _e374=_step465.value;bk(_e374,o,i);}}catch(err){_iterator465.e(err);}finally{_iterator465.f();}nk(o.findAncestor("table"),t),i.setSelection(o,"in");});}}]);return pk;}(Ze);function bk(e,t,i){wk(e)||(wk(t)&&i.remove(i.createRangeIn(t)),i.move(i.createRangeIn(e),i.createPositionAt(t,"end"))),i.remove(e);}function wk(e){return 1==e.childCount&&e.getChild(0).is("element","paragraph")&&e.getChild(0).isEmpty;}function kk(e,t,i,n){var o=parseInt(e.getAttribute(n)||1);return Math.max(i,t+o);}var _k=/*#__PURE__*/function(_Ze40){_inherits(_k,_Ze40);var _super216=_createSuper(_k);function _k(){_classCallCheck(this,_k);return _super216.apply(this,arguments);}_createClass(_k,[{key:"refresh",value:function refresh(){var e=Vw(this.editor.model.document.selection);this.isEnabled=e.length>0;}},{key:"execute",value:function execute(){var e=this.editor.model,t=Vw(e.document.selection),i=Bw(t),n=t[0].findAncestor("table"),o=[];for(var _t323=i.first;_t323<=i.last;_t323++){var _iterator466=_createForOfIteratorHelper(n.getChild(_t323).getChildren()),_step466;try{for(_iterator466.s();!(_step466=_iterator466.n()).done;){var _i333=_step466.value;o.push(e.createRangeOn(_i333));}}catch(err){_iterator466.e(err);}finally{_iterator466.f();}}e.change(function(e){e.setSelection(o);});}}]);return _k;}(Ze);var vk=/*#__PURE__*/function(_Ze41){_inherits(vk,_Ze41);var _super217=_createSuper(vk);function vk(){_classCallCheck(this,vk);return _super217.apply(this,arguments);}_createClass(vk,[{key:"refresh",value:function refresh(){var e=Vw(this.editor.model.document.selection);this.isEnabled=e.length>0;}},{key:"execute",value:function execute(){var e=this.editor.model,t=Vw(e.document.selection),i=t[0],n=t.pop(),o=i.findAncestor("table"),r=this.editor.plugins.get("TableUtils"),s=r.getCellLocation(i),a=r.getCellLocation(n),l=Math.min(s.column,a.column),c=Math.max(s.column,a.column),d=[];var _iterator467=_createForOfIteratorHelper(new xw(o,{startColumn:l,endColumn:c})),_step467;try{for(_iterator467.s();!(_step467=_iterator467.n()).done;){var _t324=_step467.value;d.push(e.createRangeOn(_t324.cell));}}catch(err){_iterator467.e(err);}finally{_iterator467.f();}e.change(function(e){e.setSelection(d);});}}]);return vk;}(Ze);function yk(e){e.document.registerPostFixer(function(t){return function(e,t){var i=t.document.differ.getChanges();var n=!1;var o=new Set();var _iterator468=_createForOfIteratorHelper(i),_step468;try{for(_iterator468.s();!(_step468=_iterator468.n()).done;){var _t325=_step468.value;var _i334=void 0;"table"==_t325.name&&"insert"==_t325.type&&(_i334=_t325.position.nodeAfter),"tableRow"!=_t325.name&&"tableCell"!=_t325.name||(_i334=_t325.position.findAncestor("table")),Ck(_t325)&&(_i334=_t325.range.start.findAncestor("table")),_i334&&!o.has(_i334)&&(n=xk(_i334,e)||n,n=Ak(_i334,e)||n,o.add(_i334));}}catch(err){_iterator468.e(err);}finally{_iterator468.f();}return n;}(t,e);});}function xk(e,t){var i=!1;var n=function(e){var t=parseInt(e.getAttribute("headingRows")||0),i=Array.from(e.getChildren()).reduce(function(e,t){return t.is("element","tableRow")?e+1:e;},0),n=[];var _iterator469=_createForOfIteratorHelper(new xw(e)),_step469;try{for(_iterator469.s();!(_step469=_iterator469.n()).done;){var _step469$value=_step469.value,_o126=_step469$value.row,_r80=_step469$value.cell,_s47=_step469$value.cellHeight;if(_s47<2)continue;var _e375=_o126<t?t:i;if(_o126+_s47>_e375){var _t326=_e375-_o126;n.push({cell:_r80,rowspan:_t326});}}}catch(err){_iterator469.e(err);}finally{_iterator469.f();}return n;}(e);if(n.length){i=!0;var _iterator470=_createForOfIteratorHelper(n),_step470;try{for(_iterator470.s();!(_step470=_iterator470.n()).done;){var _e376=_step470.value;bw("rowspan",_e376.rowspan,_e376.cell,t,1);}}catch(err){_iterator470.e(err);}finally{_iterator470.f();}}return i;}function Ak(e,t){var i=!1;var n=function(e){var t=new Array(e.childCount).fill(0);var _iterator471=_createForOfIteratorHelper(new xw(e,{includeAllSlots:!0})),_step471;try{for(_iterator471.s();!(_step471=_iterator471.n()).done;){var _i335=_step471.value.rowIndex;t[_i335]++;}}catch(err){_iterator471.e(err);}finally{_iterator471.f();}return t;}(e),o=[];var _iterator472=_createForOfIteratorHelper(n.entries()),_step472;try{for(_iterator472.s();!(_step472=_iterator472.n()).done;){var _step472$value=_slicedToArray(_step472.value,2),_t327=_step472$value[0],_i338=_step472$value[1];!_i338&&e.getChild(_t327).is("element","tableRow")&&o.push(_t327);}}catch(err){_iterator472.e(err);}finally{_iterator472.f();}if(o.length){i=!0;var _iterator473=_createForOfIteratorHelper(o.reverse()),_step473;try{for(_iterator473.s();!(_step473=_iterator473.n()).done;){var _i336=_step473.value;t.remove(e.getChild(_i336)),n.splice(_i336,1);}}catch(err){_iterator473.e(err);}finally{_iterator473.f();}}var r=n.filter(function(t,i){return e.getChild(i).is("element","tableRow");}),s=r[0];if(!r.every(function(e){return e===s;})){var _n204=r.reduce(function(e,t){return t>e?t:e;},0);var _iterator474=_createForOfIteratorHelper(r.entries()),_step474;try{for(_iterator474.s();!(_step474=_iterator474.n()).done;){var _step474$value=_slicedToArray(_step474.value,2),_o127=_step474$value[0],_s48=_step474$value[1];var _r81=_n204-_s48;if(_r81){for(var _i337=0;_i337<_r81;_i337++){ww(t,t.createPositionAt(e.getChild(_o127),"end"));}i=!0;}}}catch(err){_iterator474.e(err);}finally{_iterator474.f();}}return i;}function Ck(e){var t="attribute"===e.type,i=e.attributeKey;return t&&("headingRows"===i||"colspan"===i||"rowspan"===i);}function Tk(e){e.document.registerPostFixer(function(t){return function(e,t){var i=t.document.differ.getChanges();var n=!1;var _iterator475=_createForOfIteratorHelper(i),_step475;try{for(_iterator475.s();!(_step475=_iterator475.n()).done;){var _t328=_step475.value;"insert"==_t328.type&&"table"==_t328.name&&(n=Ek(_t328.position.nodeAfter,e)||n),"insert"==_t328.type&&"tableRow"==_t328.name&&(n=Ik(_t328.position.nodeAfter,e)||n),"insert"==_t328.type&&"tableCell"==_t328.name&&(n=Sk(_t328.position.nodeAfter,e)||n),Pk(_t328)&&(n=Sk(_t328.position.parent,e)||n);}}catch(err){_iterator475.e(err);}finally{_iterator475.f();}return n;}(t,e);});}function Ek(e,t){var i=!1;var _iterator476=_createForOfIteratorHelper(e.getChildren()),_step476;try{for(_iterator476.s();!(_step476=_iterator476.n()).done;){var _n205=_step476.value;_n205.is("element","tableRow")&&(i=Ik(_n205,t)||i);}}catch(err){_iterator476.e(err);}finally{_iterator476.f();}return i;}function Ik(e,t){var i=!1;var _iterator477=_createForOfIteratorHelper(e.getChildren()),_step477;try{for(_iterator477.s();!(_step477=_iterator477.n()).done;){var _n206=_step477.value;i=Sk(_n206,t)||i;}}catch(err){_iterator477.e(err);}finally{_iterator477.f();}return i;}function Sk(e,t){if(0==e.childCount)return t.insertElement("paragraph",e),!0;var i=Array.from(e.getChildren()).filter(function(e){return e.is("$text");});var _iterator478=_createForOfIteratorHelper(i),_step478;try{for(_iterator478.s();!(_step478=_iterator478.n()).done;){var _e377=_step478.value;t.wrap(t.createRangeOn(_e377),"paragraph");}}catch(err){_iterator478.e(err);}finally{_iterator478.f();}return!!i.length;}function Pk(e){return!(!e.position||!e.position.parent.is("element","tableCell"))&&("insert"==e.type&&"$text"==e.name||"remove"==e.type);}function Mk(e,t){e.document.registerPostFixer(function(){return function(e,t){var i=new Set();var _iterator479=_createForOfIteratorHelper(e.getChanges()),_step479;try{for(_iterator479.s();!(_step479=_iterator479.n()).done;){var _t329=_step479.value;var _e378="attribute"==_t329.type?_t329.range.start.parent:_t329.position.parent;_e378.is("element","tableCell")&&i.add(_e378);}}catch(err){_iterator479.e(err);}finally{_iterator479.f();}var _iterator480=_createForOfIteratorHelper(i.values()),_step480;try{for(_iterator480.s();!(_step480=_iterator480.n()).done;){var _n207=_step480.value;var _iterator481=_createForOfIteratorHelper(_toConsumableArray(_n207.getChildren()).filter(function(e){return Nk(e,t);})),_step481;try{for(_iterator481.s();!(_step481=_iterator481.n()).done;){var _i339=_step481.value;e.refreshItem(_i339);}}catch(err){_iterator481.e(err);}finally{_iterator481.f();}}}catch(err){_iterator480.e(err);}finally{_iterator480.f();}return!1;}(e.document.differ,t);});}function Nk(e,t){if(!e.is("element","paragraph"))return!1;var i=t.toViewElement(e);return!!i&&Ew(e)!==i.is("element","span");}function Rk(e){e.document.registerPostFixer(function(){return function(e){var t=e.document.differ,i=new Set();var _iterator482=_createForOfIteratorHelper(t.getChanges()),_step482;try{for(_iterator482.s();!(_step482=_iterator482.n()).done;){var _e380=_step482.value;if("attribute"!=_e380.type)continue;var _t330=_e380.range.start.nodeAfter;_t330&&_t330.is("element","table")&&"headingRows"==_e380.attributeKey&&i.add(_t330);}}catch(err){_iterator482.e(err);}finally{_iterator482.f();}if(i.size){var _iterator483=_createForOfIteratorHelper(i.values()),_step483;try{for(_iterator483.s();!(_step483=_iterator483.n()).done;){var _e379=_step483.value;t.refreshItem(_e379);}}catch(err){_iterator483.e(err);}finally{_iterator483.f();}return!0;}return!1;}(e);});}i(106);var zk=/*#__PURE__*/function(_Qe80){_inherits(zk,_Qe80);var _super218=_createSuper(zk);function zk(){_classCallCheck(this,zk);return _super218.apply(this,arguments);}_createClass(zk,[{key:"init",value:function init(){var e=this.editor,t=e.model,i=t.schema,n=e.conversion;i.register("table",{allowWhere:"$block",allowAttributes:["headingRows","headingColumns"],isObject:!0,isBlock:!0}),i.register("tableRow",{allowIn:"table",isLimit:!0}),i.register("tableCell",{allowIn:"tableRow",allowChildren:"$block",allowAttributes:["colspan","rowspan"],isLimit:!0,isSelectable:!0}),n["for"]("upcast").add(function(e){e.on("element:figure",function(e,t,i){if(!i.consumable.test(t.viewItem,{name:!0,classes:"table"}))return;var n=function(e){var _iterator484=_createForOfIteratorHelper(e.getChildren()),_step484;try{for(_iterator484.s();!(_step484=_iterator484.n()).done;){var _t331=_step484.value;if(_t331.is("element","table"))return _t331;}}catch(err){_iterator484.e(err);}finally{_iterator484.f();}}(t.viewItem);if(!n||!i.consumable.test(n,{name:!0}))return;var o=Ns(i.convertItem(n,t.modelCursor).modelRange.getItems());o&&(i.convertChildren(t.viewItem,i.writer.createPositionAt(o,"end")),i.updateConversionResult(o,t));});}),n["for"]("upcast").add(_w()),n["for"]("editingDowncast").add(Cw({asWidget:!0})),n["for"]("dataDowncast").add(Cw()),n["for"]("upcast").elementToElement({model:"tableRow",view:"tr"}),n["for"]("upcast").add(function(e){e.on("element:tr",function(e,t){t.viewItem.isEmpty&&0==t.modelCursor.index&&e.stop();},{priority:"high"});}),n["for"]("editingDowncast").add(function(e){return e.on("insert:tableRow",function(e,t,i){var n=t.item;if(!i.consumable.consume(n,"insert"))return;var o=n.parent,r=function(e){var _iterator485=_createForOfIteratorHelper(e.getChildren()),_step485;try{for(_iterator485.s();!(_step485=_iterator485.n()).done;){var _t332=_step485.value;if("table"===_t332.name)return _t332;}}catch(err){_iterator485.e(err);}finally{_iterator485.f();}}(i.mapper.toViewElement(o)),s=o.getChildIndex(n),a=new xw(o,{row:s}),l={headingRows:o.getAttribute("headingRows")||0,headingColumns:o.getAttribute("headingColumns")||0},c=new Map();var _iterator486=_createForOfIteratorHelper(a),_step486;try{for(_iterator486.s();!(_step486=_iterator486.n()).done;){var _e381=_step486.value;var _t333=c.get(s)||Pw(r,n,s,l,i);c.set(s,_t333),i.consumable.consume(_e381.cell,"insert"),Sw(_e381,l,i.writer.createPositionAt(_t333,"end"),i,{asWidget:!0});}}catch(err){_iterator486.e(err);}finally{_iterator486.f();}});}),n["for"]("editingDowncast").add(function(e){return e.on("remove:tableRow",function(e,t,i){e.stop();var n=i.writer,o=i.mapper,r=o.toViewPosition(t.position).getLastMatchingPosition(function(e){return!e.item.is("element","tr");}).nodeAfter,s=r.parent.parent,a=n.createRangeOn(r),l=n.remove(a);var _iterator487=_createForOfIteratorHelper(n.createRangeIn(l).getItems()),_step487;try{for(_iterator487.s();!(_step487=_iterator487.n()).done;){var _e382=_step487.value;o.unbindViewElement(_e382);}}catch(err){_iterator487.e(err);}finally{_iterator487.f();}Rw("thead",s,i),Rw("tbody",s,i);},{priority:"higher"});}),n["for"]("upcast").elementToElement({model:"tableCell",view:"td"}),n["for"]("upcast").elementToElement({model:"tableCell",view:"th"}),n["for"]("upcast").add(vw("td")),n["for"]("upcast").add(vw("th")),n["for"]("editingDowncast").add(function(e){return e.on("insert:tableCell",function(e,t,i){var n=t.item;if(!i.consumable.consume(n,"insert"))return;var o=n.parent,r=o.parent,s=r.getChildIndex(o),a=new xw(r,{row:s}),l={headingRows:r.getAttribute("headingRows")||0,headingColumns:r.getAttribute("headingColumns")||0};var _iterator488=_createForOfIteratorHelper(a),_step488;try{for(_iterator488.s();!(_step488=_iterator488.n()).done;){var _e383=_step488.value;if(_e383.cell===n){var _t334=i.mapper.toViewElement(o);return void Sw(_e383,l,i.writer.createPositionAt(_t334,o.getChildIndex(n)),i,{asWidget:!0});}}}catch(err){_iterator488.e(err);}finally{_iterator488.f();}});}),n["for"]("editingDowncast").elementToElement({model:"paragraph",view:Tw,converterPriority:"high"}),n["for"]("downcast").attributeToAttribute({model:"colspan",view:"colspan"}),n["for"]("upcast").attributeToAttribute({model:{key:"colspan",value:Ok("colspan")},view:"colspan"}),n["for"]("downcast").attributeToAttribute({model:"rowspan",view:"rowspan"}),n["for"]("upcast").attributeToAttribute({model:{key:"rowspan",value:Ok("rowspan")},view:"rowspan"}),n["for"]("editingDowncast").add(function(e){return e.on("attribute:headingColumns:table",function(e,t,i){var n=t.item;if(!i.consumable.consume(t.item,e.name))return;var o={headingRows:n.getAttribute("headingRows")||0,headingColumns:n.getAttribute("headingColumns")||0},r=t.attributeOldValue,s=t.attributeNewValue,a=(r>s?r:s)-1;var _iterator489=_createForOfIteratorHelper(new xw(n,{endColumn:a})),_step489;try{for(_iterator489.s();!(_step489=_iterator489.n()).done;){var _e384=_step489.value;Iw(_e384,o,i);}}catch(err){_iterator489.e(err);}finally{_iterator489.f();}});}),e.data.mapper.on("modelToViewPosition",function(e,t){var i=t.modelPosition.parent,n=t.modelPosition.nodeBefore;if(!i.is("element","tableCell"))return;if(!n||!n.is("element","paragraph"))return;var o=t.mapper.toViewElement(n),r=t.mapper.toViewElement(i);o===r&&(t.viewPosition=t.mapper.findPositionIn(r,n.maxOffset));}),e.config.define("table.defaultHeadings.rows",0),e.config.define("table.defaultHeadings.columns",0),e.commands.add("insertTable",new Ow(e)),e.commands.add("insertTableRowAbove",new $w(e,{order:"above"})),e.commands.add("insertTableRowBelow",new $w(e,{order:"below"})),e.commands.add("insertTableColumnLeft",new Yw(e,{order:"left"})),e.commands.add("insertTableColumnRight",new Yw(e,{order:"right"})),e.commands.add("removeTableRow",new lk(e)),e.commands.add("removeTableColumn",new ck(e)),e.commands.add("splitTableCellVertically",new Gw(e,{direction:"vertically"})),e.commands.add("splitTableCellHorizontally",new Gw(e,{direction:"horizontally"})),e.commands.add("mergeTableCells",new pk(e)),e.commands.add("mergeTableCellRight",new sk(e,{direction:"right"})),e.commands.add("mergeTableCellLeft",new sk(e,{direction:"left"})),e.commands.add("mergeTableCellDown",new sk(e,{direction:"down"})),e.commands.add("mergeTableCellUp",new sk(e,{direction:"up"})),e.commands.add("setTableColumnHeader",new uk(e)),e.commands.add("setTableRowHeader",new dk(e)),e.commands.add("selectTableRow",new _k(e)),e.commands.add("selectTableColumn",new vk(e)),Rk(t),yk(t),Mk(t,e.editing.mapper),Tk(t);}}],[{key:"pluginName",get:function get(){return"TableEditing";}},{key:"requires",get:function get(){return[hk];}}]);return zk;}(Qe);function Ok(e){return function(t){var i=parseInt(t.getAttribute(e));return Number.isNaN(i)||i<=0?null:i;};}i(108);var Dk=/*#__PURE__*/function(_Pc31){_inherits(Dk,_Pc31);var _super219=_createSuper(Dk);function Dk(e){var _this314;_classCallCheck(this,Dk);_this314=_super219.call(this,e);var t=_this314.bindTemplate;_this314.items=_this314._createGridCollection(),_this314.set("rows",0),_this314.set("columns",0),_this314.bind("label").to(_assertThisInitialized(_this314),"columns",_assertThisInitialized(_this314),"rows",function(e,t){return"".concat(t," \xD7 ").concat(e);}),_this314.setTemplate({tag:"div",attributes:{"class":["ck"]},children:[{tag:"div",attributes:{"class":["ck-insert-table-dropdown__grid"]},on:{"mouseover@.ck-insert-table-dropdown-grid-box":t.to("boxover")},children:_this314.items},{tag:"div",attributes:{"class":["ck-insert-table-dropdown__label"]},children:[{text:t.to("label")}]}],on:{mousedown:t.to(function(e){e.preventDefault();}),click:t.to(function(){_this314.fire("execute");})}}),_this314.on("boxover",function(e,t){var _t$target$dataset=t.target.dataset,i=_t$target$dataset.row,n=_t$target$dataset.column;_this314.set({rows:parseInt(i),columns:parseInt(n)});}),_this314.on("change:columns",function(){_this314._highlightGridBoxes();}),_this314.on("change:rows",function(){_this314._highlightGridBoxes();});return _this314;}_createClass(Dk,[{key:"focus",value:function focus(){}},{key:"focusLast",value:function focusLast(){}},{key:"_highlightGridBoxes",value:function _highlightGridBoxes(){var e=this.rows,t=this.columns;this.items.map(function(i,n){var o=Math.floor(n/10)<e&&n%10<t;i.set("isOn",o);});}},{key:"_createGridCollection",value:function _createGridCollection(){var e=[];for(var _t335=0;_t335<100;_t335++){var _i340=Math.floor(_t335/10),_n208=_t335%10;e.push(new Lk(this.locale,_i340+1,_n208+1));}return this.createCollection(e);}}]);return Dk;}(Pc);var Lk=/*#__PURE__*/function(_Pc32){_inherits(Lk,_Pc32);var _super220=_createSuper(Lk);function Lk(e,t,i){var _this315;_classCallCheck(this,Lk);_this315=_super220.call(this,e);var n=_this315.bindTemplate;_this315.set("isOn",!1),_this315.setTemplate({tag:"div",attributes:{"class":["ck-insert-table-dropdown-grid-box",n["if"]("isOn","ck-on")],"data-row":t,"data-column":i}});return _this315;}return _createClass(Lk);}(Pc);var Vk=/*#__PURE__*/function(_Qe81){_inherits(Vk,_Qe81);var _super221=_createSuper(Vk);function Vk(){_classCallCheck(this,Vk);return _super221.apply(this,arguments);}_createClass(Vk,[{key:"init",value:function init(){var _this316=this;var e=this.editor,t=this.editor.t,i="ltr"===e.locale.contentLanguageDirection;e.ui.componentFactory.add("insertTable",function(i){var n=e.commands.get("insertTable"),o=Cd(i);var r;return o.bind("isEnabled").to(n),o.buttonView.set({icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 6v3h4V6H3zm0 4v3h4v-3H3zm0 4v3h4v-3H3zm5 3h4v-3H8v3zm5 0h4v-3h-4v3zm4-4v-3h-4v3h4zm0-4V6h-4v3h4zm1.5 8a1.5 1.5 0 0 1-1.5 1.5H3A1.5 1.5 0 0 1 1.5 17V4c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13zM12 13v-3H8v3h4zm0-4V6H8v3h4z"/></svg>',label:t("Insert table"),tooltip:!0}),o.on("change:isOpen",function(){r||(r=new Dk(i),o.panelView.children.add(r),r.delegate("execute").to(o),o.buttonView.on("open",function(){r.rows=0,r.columns=0;}),o.on("execute",function(){e.execute("insertTable",{rows:r.rows,columns:r.columns}),e.editing.view.focus();}));}),o;}),e.ui.componentFactory.add("tableColumn",function(e){var n=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:t("Header column"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:i?"insertTableColumnLeft":"insertTableColumnRight",label:t("Insert column left")}},{type:"button",model:{commandName:i?"insertTableColumnRight":"insertTableColumnLeft",label:t("Insert column right")}},{type:"button",model:{commandName:"removeTableColumn",label:t("Delete column")}},{type:"button",model:{commandName:"selectTableColumn",label:t("Select column")}}];return _this316._prepareDropdown(t("Column"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>',n,e);}),e.ui.componentFactory.add("tableRow",function(e){var i=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:t("Header row"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowAbove",label:t("Insert row above")}},{type:"button",model:{commandName:"insertTableRowBelow",label:t("Insert row below")}},{type:"button",model:{commandName:"removeTableRow",label:t("Delete row")}},{type:"button",model:{commandName:"selectTableRow",label:t("Select row")}}];return _this316._prepareDropdown(t("Row"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>',i,e);}),e.ui.componentFactory.add("mergeTableCells",function(e){var n=[{type:"button",model:{commandName:"mergeTableCellUp",label:t("Merge cell up")}},{type:"button",model:{commandName:i?"mergeTableCellRight":"mergeTableCellLeft",label:t("Merge cell right")}},{type:"button",model:{commandName:"mergeTableCellDown",label:t("Merge cell down")}},{type:"button",model:{commandName:i?"mergeTableCellLeft":"mergeTableCellRight",label:t("Merge cell left")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:t("Split cell vertically")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:t("Split cell horizontally")}}];return _this316._prepareMergeSplitButtonDropdown(t("Merge cells"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z"/></svg>',n,e);});}},{key:"_prepareDropdown",value:function _prepareDropdown(e,t,i,n){var o=this.editor,r=Cd(n),s=this._fillDropdownWithListOptions(r,i);return r.buttonView.set({label:e,icon:t,tooltip:!0}),r.bind("isEnabled").toMany(s,"isEnabled",function(){for(var _len30=arguments.length,e=new Array(_len30),_key30=0;_key30<_len30;_key30++){e[_key30]=arguments[_key30];}return e.some(function(e){return e;});}),this.listenTo(r,"execute",function(e){o.execute(e.source.commandName),o.editing.view.focus();}),r;}},{key:"_prepareMergeSplitButtonDropdown",value:function _prepareMergeSplitButtonDropdown(e,t,i,n){var o=this.editor,r=Cd(n,ld),s=o.commands.get("mergeTableCells"),a=this._fillDropdownWithListOptions(r,i);return r.buttonView.set({label:e,icon:t,tooltip:!0,isEnabled:!0}),r.bind("isEnabled").toMany([s].concat(_toConsumableArray(a)),"isEnabled",function(){for(var _len31=arguments.length,e=new Array(_len31),_key31=0;_key31<_len31;_key31++){e[_key31]=arguments[_key31];}return e.some(function(e){return e;});}),this.listenTo(r.buttonView,"execute",function(){o.execute("mergeTableCells"),o.editing.view.focus();}),this.listenTo(r,"execute",function(e){o.execute(e.source.commandName),o.editing.view.focus();}),r;}},{key:"_fillDropdownWithListOptions",value:function _fillDropdownWithListOptions(e,t){var i=this.editor,n=[],o=new Zi();var _iterator490=_createForOfIteratorHelper(t),_step490;try{for(_iterator490.s();!(_step490=_iterator490.n()).done;){var _e385=_step490.value;Bk(_e385,i,n,o);}}catch(err){_iterator490.e(err);}finally{_iterator490.f();}return Ed(e,o,i.ui.componentFactory),n;}}],[{key:"pluginName",get:function get(){return"TableUI";}}]);return Vk;}(Qe);function Bk(e,t,i,n){var o=e.model=new Dd(e.model),_e$model2=e.model,r=_e$model2.commandName,s=_e$model2.bindIsOn;if("button"===e.type||"switchbutton"===e.type){var _e386=t.commands.get(r);i.push(_e386),o.set({commandName:r}),o.bind("isEnabled").to(_e386),s&&o.bind("isOn").to(_e386,"value");}o.set({withText:!0}),n.add(e);}i(110);var jk=/*#__PURE__*/function(_Qe82){_inherits(jk,_Qe82);var _super222=_createSuper(jk);function jk(){_classCallCheck(this,jk);return _super222.apply(this,arguments);}_createClass(jk,[{key:"init",value:function init(){var _this317=this;var e=this.editor.model;this.listenTo(e,"deleteContent",function(e,t){return _this317._handleDeleteContent(e,t);},{priority:"high"}),this._defineSelectionConverter(),this._enablePluginDisabling();}},{key:"getSelectedTableCells",value:function getSelectedTableCells(){var e=Dw(this.editor.model.document.selection);return 0==e.length?null:e;}},{key:"getSelectionAsFragment",value:function getSelectionAsFragment(){var _this318=this;var e=this.getSelectedTableCells();return e?this.editor.model.change(function(t){var i=t.createDocumentFragment(),n=_this318.editor.plugins.get("TableUtils"),_jw3=jw(e),o=_jw3.first,r=_jw3.last,_Bw2=Bw(e),s=_Bw2.first,a=_Bw2.last,l=e[0].findAncestor("table");var c=a,d=r;if(Fw(e,n)){var _e387={firstColumn:o,lastColumn:r,firstRow:s,lastRow:a};c=ok(l,_e387),d=rk(l,_e387);}var u=Kw(l,{startRow:s,startColumn:o,endRow:c,endColumn:d},t);return t.insert(u,i,0),i;}):null;}},{key:"setCellSelection",value:function setCellSelection(e,t){var i=this._getCellsToSelect(e,t);this.editor.model.change(function(e){e.setSelection(i.cells.map(function(t){return e.createRangeOn(t);}),{backward:i.backward});});}},{key:"getFocusCell",value:function getFocusCell(){var e=_toConsumableArray(this.editor.model.document.selection.getRanges()).pop().getContainedElement();return e&&e.is("element","tableCell")?e:null;}},{key:"getAnchorCell",value:function getAnchorCell(){var e=Ns(this.editor.model.document.selection.getRanges()).getContainedElement();return e&&e.is("element","tableCell")?e:null;}},{key:"_defineSelectionConverter",value:function _defineSelectionConverter(){var _this319=this;var e=this.editor,t=new Set();e.conversion["for"]("editingDowncast").add(function(e){return e.on("selection",function(e,i,n){var o=n.writer;!function(e){var _iterator491=_createForOfIteratorHelper(t),_step491;try{for(_iterator491.s();!(_step491=_iterator491.n()).done;){var _i341=_step491.value;e.removeClass("ck-editor__editable_selected",_i341);}}catch(err){_iterator491.e(err);}finally{_iterator491.f();}t.clear();}(o);var r=_this319.getSelectedTableCells();if(!r)return;var _iterator492=_createForOfIteratorHelper(r),_step492;try{for(_iterator492.s();!(_step492=_iterator492.n()).done;){var _e388=_step492.value;var _i342=n.mapper.toViewElement(_e388);o.addClass("ck-editor__editable_selected",_i342),t.add(_i342);}}catch(err){_iterator492.e(err);}finally{_iterator492.f();}var s=n.mapper.toViewElement(r[r.length-1]);o.setSelection(s,0);},{priority:"lowest"});});}},{key:"_enablePluginDisabling",value:function _enablePluginDisabling(){var _this320=this;var e=this.editor;this.on("change:isEnabled",function(){if(!_this320.isEnabled){var _t336=_this320.getSelectedTableCells();if(!_t336)return;e.model.change(function(i){var n=i.createPositionAt(_t336[0],0),o=e.model.schema.getNearestSelectionRange(n);i.setSelection(o);});}});}},{key:"_handleDeleteContent",value:function _handleDeleteContent(e,t){var _t337=_slicedToArray(t,2),i=_t337[0],n=_t337[1],o=this.editor.model,r=!n||"backward"==n.direction,s=Dw(i);s.length&&(e.stop(),o.change(function(e){var t=s[r?s.length-1:0];o.change(function(e){var _iterator493=_createForOfIteratorHelper(s),_step493;try{for(_iterator493.s();!(_step493=_iterator493.n()).done;){var _t338=_step493.value;o.deleteContent(e.createSelection(_t338,"in"));}}catch(err){_iterator493.e(err);}finally{_iterator493.f();}});var n=o.schema.getNearestSelectionRange(e.createPositionAt(t,0));i.is("documentSelection")?e.setSelection(n):i.setTo(n);}));}},{key:"_getCellsToSelect",value:function _getCellsToSelect(e,t){var i=this.editor.plugins.get("TableUtils"),n=i.getCellLocation(e),o=i.getCellLocation(t),r=Math.min(n.row,o.row),s=Math.max(n.row,o.row),a=Math.min(n.column,o.column),l=Math.max(n.column,o.column),c=new Array(s-r+1).fill(null).map(function(){return[];}),d={startRow:r,endRow:s,startColumn:a,endColumn:l};var _iterator494=_createForOfIteratorHelper(new xw(e.findAncestor("table"),d)),_step494;try{for(_iterator494.s();!(_step494=_iterator494.n()).done;){var _step494$value=_step494.value,_t339=_step494$value.row,_i343=_step494$value.cell;c[_t339-r].push(_i343);}}catch(err){_iterator494.e(err);}finally{_iterator494.f();}var u=o.row<n.row,h=o.column<n.column;return u&&c.reverse(),h&&c.forEach(function(e){return e.reverse();}),{cells:c.flat(),backward:u||h};}}],[{key:"pluginName",get:function get(){return"TableSelection";}},{key:"requires",get:function get(){return[hk];}}]);return jk;}(Qe);var Fk=/*#__PURE__*/function(_Qe83){_inherits(Fk,_Qe83);var _super223=_createSuper(Fk);function Fk(){_classCallCheck(this,Fk);return _super223.apply(this,arguments);}_createClass(Fk,[{key:"init",value:function init(){var _this321=this;var e=this.editor,t=e.editing.view.document;this.listenTo(t,"copy",function(e,t){return _this321._onCopyCut(e,t);}),this.listenTo(t,"cut",function(e,t){return _this321._onCopyCut(e,t);}),this.listenTo(e.model,"insertContent",function(e,t){return _this321._onInsertContent.apply(_this321,[e].concat(_toConsumableArray(t)));},{priority:"high"}),this.decorate("_replaceTableSlotCell");}},{key:"_onCopyCut",value:function _onCopyCut(e,t){var i=this.editor.plugins.get(jk);if(!i.getSelectedTableCells())return;if("cut"==e.name&&this.editor.isReadOnly)return;t.preventDefault(),e.stop();var n=this.editor.data,o=this.editor.editing.view.document,r=n.toView(i.getSelectionAsFragment());o.fire("clipboardOutput",{dataTransfer:t.dataTransfer,content:r,method:e.name});}},{key:"_onInsertContent",value:function _onInsertContent(e,t,i){var _this322=this;if(i&&!i.is("documentSelection"))return;var n=this.editor.model,o=this.editor.plugins.get(hk);var r=function(e,t){if(!e.is("documentFragment")&&!e.is("element"))return null;if(e.is("element","table"))return e;if(1==e.childCount&&e.getChild(0).is("element","table"))return e.getChild(0);var i=t.createRangeIn(e);var _iterator495=_createForOfIteratorHelper(i.getItems()),_step495;try{for(_iterator495.s();!(_step495=_iterator495.n()).done;){var _e389=_step495.value;if(_e389.is("element","table")){var _n209=t.createRange(i.start,t.createPositionBefore(_e389));if(t.hasContent(_n209,{ignoreWhitespaces:!0}))return null;var _o128=t.createRange(t.createPositionAfter(_e389),i.end);return t.hasContent(_o128,{ignoreWhitespaces:!0})?null:_e389;}}}catch(err){_iterator495.e(err);}finally{_iterator495.f();}return null;}(t,n);if(!r)return;var s=Vw(n.document.selection);s.length?(e.stop(),n.change(function(e){var t={width:o.getColumns(r),height:o.getRows(r)},i=function(e,t,i,n){var o=e[0].findAncestor("table"),r=jw(e),s=Bw(e),a={firstColumn:r.first,lastColumn:r.last,firstRow:s.first,lastRow:s.last},l=1===e.length;l&&(a.lastRow+=t.height-1,a.lastColumn+=t.width-1,function(e,t,i,n){var o=n.getColumns(e),r=n.getRows(e);i>o&&n.insertColumns(e,{at:o,columns:i-o});t>r&&n.insertRows(e,{at:r,rows:t-r});}(o,a.lastRow+1,a.lastColumn+1,n));l||!Fw(e,n)?function(e,t,i){var n=t.firstRow,o=t.lastRow,r=t.firstColumn,s=t.lastColumn,a={first:n,last:o},l={first:r,last:s};Uk(e,r,a,i),Uk(e,s+1,a,i),Hk(e,n,l,i),Hk(e,o+1,l,i,n);}(o,a,i):(a.lastRow=ok(o,a),a.lastColumn=rk(o,a));return a;}(s,t,e,o),n=i.lastRow-i.firstRow+1,a=i.lastColumn-i.firstColumn+1,l={startRow:0,startColumn:0,endRow:Math.min(n,t.height)-1,endColumn:Math.min(a,t.width)-1};r=Kw(r,l,e);var c=s[0].findAncestor("table"),d=_this322._replaceSelectedCellsWithPasted(r,t,c,i,e);if(_this322.editor.plugins.get("TableSelection").isEnabled){var _t340=Hw(d.map(function(t){return e.createRangeOn(t);}));e.setSelection(_t340);}else e.setSelection(d[0],0);})):nk(r,o);}},{key:"_replaceSelectedCellsWithPasted",value:function _replaceSelectedCellsWithPasted(e,t,i,n,o){var r=t.width,s=t.height,a=function(e,t,i){var n=new Array(i).fill(null).map(function(){return new Array(t).fill(null);});var _iterator496=_createForOfIteratorHelper(new xw(e)),_step496;try{for(_iterator496.s();!(_step496=_iterator496.n()).done;){var _step496$value=_step496.value,_t341=_step496$value.column,_i344=_step496$value.row,_o129=_step496$value.cell;n[_i344][_t341]=_o129;}}catch(err){_iterator496.e(err);}finally{_iterator496.f();}return n;}(e,r,s),l=_toConsumableArray(new xw(i,{startRow:n.firstRow,endRow:n.lastRow,startColumn:n.firstColumn,endColumn:n.lastColumn,includeAllSlots:!0})),c=[];var d;for(var _i345=0,_l23=l;_i345<_l23.length;_i345++){var _e390=_l23[_i345];var _t342=_e390.row,_i346=_e390.column;_i346===n.firstColumn&&(d=_e390.getPositionBefore());var _l24=_t342-n.firstRow,_u7=_i346-n.firstColumn,_h5=a[_l24%s][_u7%r],_g3=_h5?o.cloneElement(_h5):null,_m2=this._replaceTableSlotCell(_e390,_g3,d,o);_m2&&(ek(_m2,_t342,_i346,n.lastRow,n.lastColumn,o),c.push(_m2),d=o.createPositionAfter(_m2));}var u=parseInt(i.getAttribute("headingRows")||0),h=parseInt(i.getAttribute("headingColumns")||0),g=n.firstRow<u&&u<=n.lastRow,m=n.firstColumn<h&&h<=n.lastColumn;if(g){var _e391=Hk(i,u,{first:n.firstColumn,last:n.lastColumn},o,n.firstRow);c.push.apply(c,_toConsumableArray(_e391));}if(m){var _e392=Uk(i,h,{first:n.firstRow,last:n.lastRow},o);c.push.apply(c,_toConsumableArray(_e392));}return c;}},{key:"_replaceTableSlotCell",value:function _replaceTableSlotCell(e,t,i,n){var o=e.cell,r=e.isAnchor;return r&&n.remove(o),t?(n.insert(t,i),t):null;}}],[{key:"pluginName",get:function get(){return"TableClipboard";}},{key:"requires",get:function get(){return[jk,hk];}}]);return Fk;}(Qe);function Hk(e,t,i,n){var o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;if(t<1)return;return Qw(e,t,o).filter(function(_ref102){var e=_ref102.column,t=_ref102.cellWidth;return Wk(e,t,i);}).map(function(_ref103){var e=_ref103.cell;return Jw(e,t,n);});}function Uk(e,t,i,n){if(t<1)return;return Zw(e,t).filter(function(_ref104){var e=_ref104.row,t=_ref104.cellHeight;return Wk(e,t,i);}).map(function(_ref105){var e=_ref105.cell,i=_ref105.column;return Xw(e,i,t,n);});}function Wk(e,t,i){var n=e+t-1,o=i.first,r=i.last;return e>=o&&e<=r||e<o&&n>=o;}var qk=/*#__PURE__*/function(_Qe84){_inherits(qk,_Qe84);var _super224=_createSuper(qk);function qk(){_classCallCheck(this,qk);return _super224.apply(this,arguments);}_createClass(qk,[{key:"init",value:function init(){var _this323=this;var e=this.editor.editing.view.document;this.editor.keystrokes.set("Tab",function(){return _this323._handleTabOnSelectedTable.apply(_this323,arguments);},{priority:"low"}),this.editor.keystrokes.set("Tab",this._getTabHandler(!0),{priority:"low"}),this.editor.keystrokes.set("Shift+Tab",this._getTabHandler(!1),{priority:"low"}),this.listenTo(e,"arrowKey",function(){return _this323._onArrowKey.apply(_this323,arguments);},{context:"table"});}},{key:"_handleTabOnSelectedTable",value:function _handleTabOnSelectedTable(e,t){var i=this.editor,n=i.model.document.selection.getSelectedElement();n&&n.is("element","table")&&(t(),i.model.change(function(e){e.setSelection(e.createRangeIn(n.getChild(0).getChild(0)));}));}},{key:"_getTabHandler",value:function _getTabHandler(e){var _this324=this;var t=this.editor;return function(i,n){var o=Lw(t.model.document.selection)[0];if(o||(o=_this324.editor.plugins.get("TableSelection").getFocusCell()),!o)return;n();var r=o.parent,s=r.parent,a=s.getChildIndex(r),l=r.getChildIndex(o),c=0===l;if(!e&&c&&0===a)return void t.model.change(function(e){e.setSelection(e.createRangeOn(s));});var d=_this324.editor.plugins.get("TableUtils"),u=l===r.childCount-1,h=a===d.getRows(s)-1;if(e&&h&&u&&(t.execute("insertTableRowBelow"),a===d.getRows(s)-1))return void t.model.change(function(e){e.setSelection(e.createRangeOn(s));});var g;if(e&&u){var _e393=s.getChild(a+1);g=_e393.getChild(0);}else if(!e&&c){var _e394=s.getChild(a-1);g=_e394.getChild(_e394.childCount-1);}else g=r.getChild(l+(e?1:-1));t.model.change(function(e){e.setSelection(e.createRangeIn(g));});};}},{key:"_onArrowKey",value:function _onArrowKey(e,t){var i=this.editor,n=Lo(t.keyCode,i.locale.contentLanguageDirection);this._handleArrowKeys(n,t.shiftKey)&&(t.preventDefault(),t.stopPropagation(),e.stop());}},{key:"_handleArrowKeys",value:function _handleArrowKeys(e,t){var i=this.editor.model.document.selection,n=["right","down"].includes(e),o=Dw(i);if(o.length){var _i347;return _i347=t?this.editor.plugins.get("TableSelection").getFocusCell():n?o[o.length-1]:o[0],this._navigateFromCellInDirection(_i347,e,t),!0;}var r=i.focus.findAncestor("tableCell");return!!r&&!(t&&!i.isCollapsed&&i.isBackward==n)&&!!this._isSelectionAtCellEdge(i,r,n)&&(this._navigateFromCellInDirection(r,e,t),!0);}},{key:"_isSelectionAtCellEdge",value:function _isSelectionAtCellEdge(e,t,i){var n=this.editor.model,o=this.editor.model.schema,r=i?e.getLastPosition():e.getFirstPosition();if(!o.getLimitElement(r).is("element","tableCell")){return n.createPositionAt(t,i?"end":0).isTouching(r);}var s=n.createSelection(r);return n.modifySelection(s,{direction:i?"forward":"backward"}),r.isEqual(s.focus);}},{key:"_navigateFromCellInDirection",value:function _navigateFromCellInDirection(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!1;var n=this.editor.model,o=e.findAncestor("table"),r=_toConsumableArray(new xw(o,{includeAllSlots:!0})),_r82=r[r.length-1],s=_r82.row,a=_r82.column,l=r.find(function(_ref106){var t=_ref106.cell;return t==e;});var c=l.row,d=l.column;switch(t){case"left":d--;break;case"up":c--;break;case"right":d+=l.cellWidth;break;case"down":c+=l.cellHeight;}if(c<0||c>s||d<0&&c<=0||d>a&&c>=s)return void n.change(function(e){e.setSelection(e.createRangeOn(o));});d<0?(d=i?0:a,c--):d>a&&(d=i?a:0,c++);var u=r.find(function(e){return e.row==c&&e.column==d;}).cell,h=["right","down"].includes(t),g=this.editor.plugins.get("TableSelection");if(i&&g.isEnabled){var _t343=g.getAnchorCell()||e;g.setCellSelection(_t343,u);}else{var _e395=n.createPositionAt(u,h?0:"end");n.change(function(t){t.setSelection(_e395);});}}}],[{key:"pluginName",get:function get(){return"TableKeyboard";}},{key:"requires",get:function get(){return[jk];}}]);return qk;}(Qe);var $k=/*#__PURE__*/function(_ts8){_inherits($k,_ts8);var _super225=_createSuper($k);function $k(e){var _this325;_classCallCheck(this,$k);_this325=_super225.call(this,e),_this325.domEventType=["mousemove","mouseleave"];return _this325;}_createClass($k,[{key:"onDomEvent",value:function onDomEvent(e){this.fire(e.type,e);}}]);return $k;}(ts);var Yk=/*#__PURE__*/function(_Qe85){_inherits(Yk,_Qe85);var _super226=_createSuper(Yk);function Yk(){_classCallCheck(this,Yk);return _super226.apply(this,arguments);}_createClass(Yk,[{key:"init",value:function init(){this.editor.editing.view.addObserver($k),this._enableShiftClickSelection(),this._enableMouseDragSelection();}},{key:"_enableShiftClickSelection",value:function _enableShiftClickSelection(){var _this326=this;var e=this.editor;var t=!1;var i=e.plugins.get(jk);this.listenTo(e.editing.view.document,"mousedown",function(n,o){if(!_this326.isEnabled||!i.isEnabled)return;if(!o.domEvent.shiftKey)return;var r=i.getAnchorCell()||Lw(e.model.document.selection)[0];if(!r)return;var s=_this326._getModelTableCellFromDomEvent(o);s&&Gk(r,s)&&(t=!0,i.setCellSelection(r,s),o.preventDefault());}),this.listenTo(e.editing.view.document,"mouseup",function(){t=!1;}),this.listenTo(e.editing.view.document,"selectionChange",function(e){t&&e.stop();},{priority:"highest"});}},{key:"_enableMouseDragSelection",value:function _enableMouseDragSelection(){var _this327=this;var e=this.editor;var t,i,n=!1,o=!1;var r=e.plugins.get(jk);this.listenTo(e.editing.view.document,"mousedown",function(e,i){_this327.isEnabled&&r.isEnabled&&(i.domEvent.shiftKey||i.domEvent.ctrlKey||i.domEvent.altKey||(t=_this327._getModelTableCellFromDomEvent(i)));}),this.listenTo(e.editing.view.document,"mousemove",function(e,s){if(!s.domEvent.buttons)return;if(!t)return;var a=_this327._getModelTableCellFromDomEvent(s);a&&Gk(t,a)&&(i=a,n||i==t||(n=!0)),n&&(o=!0,r.setCellSelection(t,i),s.preventDefault());}),this.listenTo(e.editing.view.document,"mouseup",function(){n=!1,o=!1,t=null,i=null;}),this.listenTo(e.editing.view.document,"selectionChange",function(e){o&&e.stop();},{priority:"highest"});}},{key:"_getModelTableCellFromDomEvent",value:function _getModelTableCellFromDomEvent(e){var t=e.target,i=this.editor.editing.view.createPositionAt(t,0);return this.editor.editing.mapper.toModelPosition(i).parent.findAncestor("tableCell",{includeSelf:!0});}}],[{key:"pluginName",get:function get(){return"TableMouse";}},{key:"requires",get:function get(){return[jk];}}]);return Yk;}(Qe);function Gk(e,t){return e.parent.parent==t.parent.parent;}i(112);function Kk(e){var t=e.getSelectedElement();return t&&Jk(t)?t:null;}function Qk(e){var t=e.getFirstPosition().parent;for(;t;){if(t.is("element")&&Jk(t))return t;t=t.parent;}return null;}function Jk(e){return!!e.getCustomProperty("table")&&oh(e);}var Zk={autoRefresh:!0};var Xk=/*#__PURE__*/function(){function Xk(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Zk;_classCallCheck(this,Xk);if(!e)throw new l.a("token-missing-token-url",this);t.initValue&&this._validateTokenValue(t.initValue),this.set("value",t.initValue),this._refresh="function"==typeof e?e:function(){return t=e,new Promise(function(e,i){var n=new XMLHttpRequest();n.open("GET",t),n.addEventListener("load",function(){var t=n.status,o=n.response;return t<200||t>299?i(new l.a("token-cannot-download-new-token",null)):e(o);}),n.addEventListener("error",function(){return i(new Error("Network Error"));}),n.addEventListener("abort",function(){return i(new Error("Abort"));}),n.send();});var t;},this._options=Object.assign({},Zk,t);}_createClass(Xk,[{key:"init",value:function init(){var _this328=this;return new Promise(function(e,t){_this328.value?(_this328._options.autoRefresh&&_this328._registerRefreshTokenTimeout(),e(_this328)):_this328.refreshToken().then(e)["catch"](t);});}},{key:"refreshToken",value:function refreshToken(){var _this329=this;return this._refresh().then(function(e){_this329._validateTokenValue(e),_this329.set("value",e),_this329._options.autoRefresh&&_this329._registerRefreshTokenTimeout();}).then(function(){return _this329;});}},{key:"destroy",value:function destroy(){clearTimeout(this._tokenRefreshTimeout);}},{key:"_validateTokenValue",value:function _validateTokenValue(e){var t="string"==typeof e,i=!/^".*"$/.test(e),n=t&&3===e.split(".").length;if(!i||!n)throw new l.a("token-not-in-jwt-format",this);}},{key:"_registerRefreshTokenTimeout",value:function _registerRefreshTokenTimeout(){var _this330=this;var e=this._getTokenRefreshTimeoutTime();clearTimeout(this._tokenRefreshTimeout),this._tokenRefreshTimeout=setTimeout(function(){_this330.refreshToken();},e);}},{key:"_getTokenRefreshTimeoutTime",value:function _getTokenRefreshTimeoutTime(){try{var _this$value$split=this.value.split("."),_this$value$split2=_slicedToArray(_this$value$split,2),_e396=_this$value$split2[1],_JSON$parse=JSON.parse(atob(_e396)),_t344=_JSON$parse.exp;if(!_t344)return 36e5;return Math.floor((1e3*_t344-Date.now())/2);}catch(e){return 36e5;}}}],[{key:"create",value:function create(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Zk;return new Xk(e,t).init();}}]);return Xk;}();Ke(Xk,Ue);var e_=Xk;var t_=/^data:(\S*?);base64,/;var i_=/*#__PURE__*/function(){function i_(e,t,i){_classCallCheck(this,i_);if(!e)throw new l.a("fileuploader-missing-file",null);if(!t)throw new l.a("fileuploader-missing-token",null);if(!i)throw new l.a("fileuploader-missing-api-address",null);this.file=function(e){if("string"!=typeof e)return!1;var t=e.match(t_);return!(!t||!t.length);}(e)?function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:512;try{var _i348=e.match(t_)[1],_n210=atob(e.replace(t_,"")),_o130=[];for(var _e397=0;_e397<_n210.length;_e397+=t){var _i349=_n210.slice(_e397,_e397+t),_r83=new Array(_i349.length);for(var _e398=0;_e398<_i349.length;_e398++){_r83[_e398]=_i349.charCodeAt(_e398);}_o130.push(new Uint8Array(_r83));}return new Blob(_o130,{type:_i348});}catch(e){throw new l.a("fileuploader-decoding-image-data-error",null);}}(e):e,this._token=t,this._apiAddress=i;}_createClass(i_,[{key:"onProgress",value:function onProgress(e){return this.on("progress",function(t,i){return e(i);}),this;}},{key:"onError",value:function onError(e){return this.once("error",function(t,i){return e(i);}),this;}},{key:"abort",value:function abort(){this.xhr.abort();}},{key:"send",value:function send(){return this._prepareRequest(),this._attachXHRListeners(),this._sendRequest();}},{key:"_prepareRequest",value:function _prepareRequest(){var e=new XMLHttpRequest();e.open("POST",this._apiAddress),e.setRequestHeader("Authorization",this._token.value),e.responseType="json",this.xhr=e;}},{key:"_attachXHRListeners",value:function _attachXHRListeners(){var _this331=this;var e=this,t=this.xhr;function i(t){return function(){return e.fire("error",t);};}t.addEventListener("error",i("Network Error")),t.addEventListener("abort",i("Abort")),t.upload&&t.upload.addEventListener("progress",function(e){e.lengthComputable&&_this331.fire("progress",{total:e.total,uploaded:e.loaded});}),t.addEventListener("load",function(){var e=t.status,i=t.response;if(e<200||e>299)return _this331.fire("error",i.message||i.error);});}},{key:"_sendRequest",value:function _sendRequest(){var _this332=this;var e=new FormData(),t=this.xhr;return e.append("file",this.file),new Promise(function(i,n){t.addEventListener("load",function(){var e=t.status,o=t.response;return e<200||e>299?o.message?n(new l.a("fileuploader-uploading-data-failed",_this332,{message:o.message})):n(o.error):i(o);}),t.addEventListener("error",function(){return n(new Error("Network Error"));}),t.addEventListener("abort",function(){return n(new Error("Abort"));}),t.send(e);});}}]);return i_;}();Ke(i_,u);var n_=/*#__PURE__*/function(){function n_(e,t){_classCallCheck(this,n_);if(!e)throw new l.a("uploadgateway-missing-token",null);if(!t)throw new l.a("uploadgateway-missing-api-address",null);this._token=e,this._apiAddress=t;}_createClass(n_,[{key:"upload",value:function upload(e){return new i_(e,this._token,this._apiAddress);}}]);return n_;}();var o_=/*#__PURE__*/function(_an3){_inherits(o_,_an3);var _super227=_createSuper(o_);function o_(){_classCallCheck(this,o_);return _super227.apply(this,arguments);}_createClass(o_,[{key:"createToken",value:function createToken(e,t){return new e_(e,t);}},{key:"createUploadGateway",value:function createUploadGateway(e,t){return new n_(e,t);}}],[{key:"pluginName",get:function get(){return"CloudServicesCore";}}]);return o_;}(an);var r_=/*#__PURE__*/function(_ju){_inherits(r_,_ju);var _super228=_createSuper(r_);function r_(){_classCallCheck(this,r_);return _super228.apply(this,arguments);}return _createClass(r_);}(ju);r_.builtinPlugins=[/*#__PURE__*/function(_Qe86){_inherits(_class2,_Qe86);var _super229=_createSuper(_class2);function _class2(){_classCallCheck(this,_class2);return _super229.apply(this,arguments);}_createClass(_class2,null,[{key:"requires",get:function get(){return[Rh,Ku,Uh,Lh,Jh,Tg];}},{key:"pluginName",get:function get(){return"Essentials";}}]);return _class2;}(Qe),/*#__PURE__*/function(_Qe87){_inherits(_class3,_Qe87);var _super230=_createSuper(_class3);function _class3(){_classCallCheck(this,_class3);return _super230.apply(this,arguments);}_createClass(_class3,null,[{key:"requires",get:function get(){return[Ng,zg];}},{key:"pluginName",get:function get(){return"Alignment";}}]);return _class3;}(Qe),/*#__PURE__*/function(_Qe88){_inherits(_class4,_Qe88);var _super231=_createSuper(_class4);function _class4(){_classCallCheck(this,_class4);return _super231.apply(this,arguments);}_createClass(_class4,null,[{key:"requires",get:function get(){return[$g,Yg];}},{key:"pluginName",get:function get(){return"FontSize";}}]);return _class4;}(Qe),/*#__PURE__*/function(_Qe89){_inherits(_class5,_Qe89);var _super232=_createSuper(_class5);function _class5(){_classCallCheck(this,_class5);return _super232.apply(this,arguments);}_createClass(_class5,null,[{key:"requires",get:function get(){return[Zg,Xg];}},{key:"pluginName",get:function get(){return"FontFamily";}}]);return _class5;}(Qe),/*#__PURE__*/function(_Qe90){_inherits(_class6,_Qe90);var _super233=_createSuper(_class6);function _class6(){_classCallCheck(this,_class6);return _super233.apply(this,arguments);}_createClass(_class6,null,[{key:"requires",get:function get(){return[tm,nm];}},{key:"pluginName",get:function get(){return"FontColor";}}]);return _class6;}(Qe),/*#__PURE__*/function(_Qe91){_inherits(_class7,_Qe91);var _super234=_createSuper(_class7);function _class7(){_classCallCheck(this,_class7);return _super234.apply(this,arguments);}_createClass(_class7,null,[{key:"requires",get:function get(){return[rm,sm];}},{key:"pluginName",get:function get(){return"FontBackgroundColor";}}]);return _class7;}(Qe),/*#__PURE__*/function(_Qe92){_inherits(_class8,_Qe92);var _super235=_createSuper(_class8);function _class8(){_classCallCheck(this,_class8);return _super235.apply(this,arguments);}_createClass(_class8,[{key:"init",value:function init(){var _this333=this;var e=this.editor.config.get("ckfinder.uploadUrl");e&&(this.editor.plugins.get(lm).createUploadAdapter=function(t){return new gm(t,e,_this333.editor.t);});}}],[{key:"requires",get:function get(){return[lm];}},{key:"pluginName",get:function get(){return"CKFinderUploadAdapter";}}]);return _class8;}(Qe),/*#__PURE__*/function(_Qe93){_inherits(_class9,_Qe93);var _super236=_createSuper(_class9);function _class9(){_classCallCheck(this,_class9);return _super236.apply(this,arguments);}_createClass(_class9,[{key:"afterInit",value:function afterInit(){this._addListAutoformats(),this._addBasicStylesAutoformats(),this._addHeadingAutoformats(),this._addBlockQuoteAutoformats(),this._addCodeBlockAutoformats(),this._addHorizontalLineAutoformats();}},{key:"_addListAutoformats",value:function _addListAutoformats(){var _this334=this;var e=this.editor.commands;e.get("bulletedList")&&mm(this.editor,this,/^[*-]\s$/,"bulletedList"),e.get("numberedList")&&mm(this.editor,this,/^1[.|)]\s$/,"numberedList"),e.get("todoList")&&mm(this.editor,this,/^\[\s?\]\s$/,"todoList"),e.get("checkTodoList")&&mm(this.editor,this,/^\[\s?x\s?\]\s$/,function(){_this334.editor.execute("todoList"),_this334.editor.execute("checkTodoList");});}},{key:"_addBasicStylesAutoformats",value:function _addBasicStylesAutoformats(){var e=this.editor.commands;if(e.get("bold")){var _e399=bm(this.editor,"bold");fm(this.editor,this,/(?:^|\s)(\*\*)([^*]+)(\*\*)$/g,_e399),fm(this.editor,this,/(?:^|\s)(__)([^_]+)(__)$/g,_e399);}if(e.get("italic")){var _e400=bm(this.editor,"italic");fm(this.editor,this,/(?:^|\s)(\*)([^*_]+)(\*)$/g,_e400),fm(this.editor,this,/(?:^|\s)(_)([^_]+)(_)$/g,_e400);}if(e.get("code")){var _e401=bm(this.editor,"code");fm(this.editor,this,/(`)([^`]+)(`)$/g,_e401);}if(e.get("strikethrough")){var _e402=bm(this.editor,"strikethrough");fm(this.editor,this,/(~~)([^~]+)(~~)$/g,_e402);}}},{key:"_addHeadingAutoformats",value:function _addHeadingAutoformats(){var _this335=this;var e=this.editor.commands.get("heading");e&&e.modelElements.filter(function(e){return e.match(/^heading[1-6]$/);}).forEach(function(t){var i=t[7],n=new RegExp("^(#{".concat(i,"})\\s$"));mm(_this335.editor,_this335,n,function(){if(!e.isEnabled||e.value===t)return!1;_this335.editor.execute("heading",{value:t});});});}},{key:"_addBlockQuoteAutoformats",value:function _addBlockQuoteAutoformats(){this.editor.commands.get("blockQuote")&&mm(this.editor,this,/^>\s$/,"blockQuote");}},{key:"_addCodeBlockAutoformats",value:function _addCodeBlockAutoformats(){var _this336=this;var e=this.editor,t=e.model.document.selection;e.commands.get("codeBlock")&&mm(e,this,/^```$/,function(){if(t.getFirstPosition().parent.is("element","listItem"))return!1;_this336.editor.execute("codeBlock",{usePreviousLanguageChoice:!0});});}},{key:"_addHorizontalLineAutoformats",value:function _addHorizontalLineAutoformats(){this.editor.commands.get("horizontalLine")&&mm(this.editor,this,/^---$/,"horizontalLine");}}],[{key:"pluginName",get:function get(){return"Autoformat";}}]);return _class9;}(Qe),/*#__PURE__*/function(_Qe94){_inherits(_class10,_Qe94);var _super237=_createSuper(_class10);function _class10(){_classCallCheck(this,_class10);return _super237.apply(this,arguments);}_createClass(_class10,null,[{key:"requires",get:function get(){return[km,_m];}},{key:"pluginName",get:function get(){return"Bold";}}]);return _class10;}(Qe),/*#__PURE__*/function(_Qe95){_inherits(_class11,_Qe95);var _super238=_createSuper(_class11);function _class11(){_classCallCheck(this,_class11);return _super238.apply(this,arguments);}_createClass(_class11,null,[{key:"requires",get:function get(){return[vm,ym];}},{key:"pluginName",get:function get(){return"Italic";}}]);return _class11;}(Qe),/*#__PURE__*/function(_Qe96){_inherits(_class12,_Qe96);var _super239=_createSuper(_class12);function _class12(){_classCallCheck(this,_class12);return _super239.apply(this,arguments);}_createClass(_class12,null,[{key:"requires",get:function get(){return[xm,Am];}},{key:"pluginName",get:function get(){return"Strikethrough";}}]);return _class12;}(Qe),/*#__PURE__*/function(_Qe97){_inherits(_class13,_Qe97);var _super240=_createSuper(_class13);function _class13(){_classCallCheck(this,_class13);return _super240.apply(this,arguments);}_createClass(_class13,null,[{key:"requires",get:function get(){return[Cm,Tm];}},{key:"pluginName",get:function get(){return"Underline";}}]);return _class13;}(Qe),/*#__PURE__*/function(_Qe98){_inherits(_class14,_Qe98);var _super241=_createSuper(_class14);function _class14(){_classCallCheck(this,_class14);return _super241.apply(this,arguments);}_createClass(_class14,null,[{key:"requires",get:function get(){return[Mm,Nm];}},{key:"pluginName",get:function get(){return"BlockQuote";}}]);return _class14;}(Qe),/*#__PURE__*/function(_Qe99){_inherits(_class15,_Qe99);var _super242=_createSuper(_class15);function _class15(){_classCallCheck(this,_class15);return _super242.apply(this,arguments);}_createClass(_class15,null,[{key:"pluginName",get:function get(){return"CKFinder";}},{key:"requires",get:function get(){return["Link","CKFinderUploadAdapter",Dm,Rm];}}]);return _class15;}(Qe),/*#__PURE__*/function(_an4){_inherits(_class16,_an4);var _super243=_createSuper(_class16);function _class16(){_classCallCheck(this,_class16);return _super243.apply(this,arguments);}_createClass(_class16,[{key:"init",value:function init(){var e=this.context.config.get("cloudServices")||{};for(var _t345 in e){this[_t345]=e[_t345];}if(this._tokens=new Map(),this.tokenUrl)return this.token=this.context.plugins.get("CloudServicesCore").createToken(this.tokenUrl),this._tokens.set(this.tokenUrl,this.token),this.token.init();this.token=null;}},{key:"registerTokenUrl",value:function registerTokenUrl(e){if(this._tokens.has(e))return Promise.resolve(this.getTokenFor(e));var t=this.context.plugins.get("CloudServicesCore").createToken(e);return this._tokens.set(e,t),t.init();}},{key:"getTokenFor",value:function getTokenFor(e){var t=this._tokens.get(e);if(!t)throw new l.a("cloudservices-token-not-registered",this);return t;}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_class16.prototype),"destroy",this).call(this);var _iterator497=_createForOfIteratorHelper(this._tokens.values()),_step497;try{for(_iterator497.s();!(_step497=_iterator497.n()).done;){var _e403=_step497.value;_e403.destroy();}}catch(err){_iterator497.e(err);}finally{_iterator497.f();}}}],[{key:"pluginName",get:function get(){return"CloudServices";}},{key:"requires",get:function get(){return[o_];}}]);return _class16;}(an),/*#__PURE__*/function(_Qe100){_inherits(_class17,_Qe100);var _super244=_createSuper(_class17);function _class17(){_classCallCheck(this,_class17);return _super244.apply(this,arguments);}_createClass(_class17,[{key:"init",value:function init(){var e=this.editor;e.plugins.has("ImageBlockEditing")||e.plugins.has("ImageInlineEditing")||Object(l.b)("easy-image-image-feature-missing",e);}}],[{key:"requires",get:function get(){return[Lm,"ImageUpload"];}},{key:"pluginName",get:function get(){return"EasyImage";}}]);return _class17;}(Qe),/*#__PURE__*/function(_Qe101){_inherits(_class18,_Qe101);var _super245=_createSuper(_class18);function _class18(){_classCallCheck(this,_class18);return _super245.apply(this,arguments);}_createClass(_class18,null,[{key:"requires",get:function get(){return[qm,$m];}},{key:"pluginName",get:function get(){return"Heading";}}]);return _class18;}(Qe),/*#__PURE__*/function(_Qe102){_inherits(_class19,_Qe102);var _super246=_createSuper(_class19);function _class19(){_classCallCheck(this,_class19);return _super246.apply(this,arguments);}_createClass(_class19,null,[{key:"requires",get:function get(){return[kf,vf];}},{key:"pluginName",get:function get(){return"Image";}}]);return _class19;}(Qe),/*#__PURE__*/function(_Qe103){_inherits(_class20,_Qe103);var _super247=_createSuper(_class20);function _class20(){_classCallCheck(this,_class20);return _super247.apply(this,arguments);}_createClass(_class20,null,[{key:"requires",get:function get(){return[Cf,Ef];}},{key:"pluginName",get:function get(){return"ImageCaption";}}]);return _class20;}(Qe),/*#__PURE__*/function(_Qe104){_inherits(_class21,_Qe104);var _super248=_createSuper(_class21);function _class21(){_classCallCheck(this,_class21);return _super248.apply(this,arguments);}_createClass(_class21,null,[{key:"requires",get:function get(){return[Sf,zf,Mf];}},{key:"pluginName",get:function get(){return"ImageResize";}}]);return _class21;}(Qe),/*#__PURE__*/function(_Qe105){_inherits(_class22,_Qe105);var _super249=_createSuper(_class22);function _class22(){_classCallCheck(this,_class22);return _super249.apply(this,arguments);}_createClass(_class22,null,[{key:"requires",get:function get(){return[Kf,Qf];}},{key:"pluginName",get:function get(){return"ImageStyle";}}]);return _class22;}(Qe),/*#__PURE__*/function(_Qe106){_inherits(_class23,_Qe106);var _super250=_createSuper(_class23);function _class23(){_classCallCheck(this,_class23);return _super250.apply(this,arguments);}_createClass(_class23,[{key:"afterInit",value:function afterInit(){var e=this.editor,t=e.t,i=e.plugins.get(Ym),n=e.plugins.get("ImageUtils");var o;i.register("image",{ariaLabel:t("Image toolbar"),items:(o=e.config.get("image.toolbar")||[],o.map(function(e){return w(e)?e.name:e;})),getRelatedElement:function getRelatedElement(e){return n.getClosestSelectedImageWidget(e);}});}}],[{key:"requires",get:function get(){return[Ym,rf];}},{key:"pluginName",get:function get(){return"ImageToolbar";}}]);return _class23;}(Qe),/*#__PURE__*/function(_Qe107){_inherits(_class24,_Qe107);var _super251=_createSuper(_class24);function _class24(){_classCallCheck(this,_class24);return _super251.apply(this,arguments);}_createClass(_class24,null,[{key:"pluginName",get:function get(){return"ImageUpload";}},{key:"requires",get:function get(){return[up,np,op];}}]);return _class24;}(Qe),/*#__PURE__*/function(_Qe108){_inherits(_class25,_Qe108);var _super252=_createSuper(_class25);function _class25(){_classCallCheck(this,_class25);return _super252.apply(this,arguments);}_createClass(_class25,null,[{key:"pluginName",get:function get(){return"Indent";}},{key:"requires",get:function get(){return[gp,pp];}}]);return _class25;}(Qe),/*#__PURE__*/function(_Qe109){_inherits(_class26,_Qe109);var _super253=_createSuper(_class26);function _class26(e){var _this337;_classCallCheck(this,_class26);_this337=_super253.call(this,e),e.config.define("indentBlock",{offset:40,unit:"px"});return _this337;}_createClass(_class26,[{key:"init",value:function init(){var e=this.editor,t=e.config.get("indentBlock"),i=!t.classes||!t.classes.length,n=Object.assign({direction:"forward"},t),o=Object.assign({direction:"backward"},t);i?(e.data.addStyleProcessorRules(Lu),this._setupConversionUsingOffset(e.conversion),e.commands.add("indentBlock",new bp(e,new wp(n))),e.commands.add("outdentBlock",new bp(e,new wp(o)))):(this._setupConversionUsingClasses(t.classes),e.commands.add("indentBlock",new bp(e,new kp(n))),e.commands.add("outdentBlock",new bp(e,new kp(o))));}},{key:"afterInit",value:function afterInit(){var e=this.editor,t=e.model.schema,i=e.commands.get("indent"),n=e.commands.get("outdent"),o=e.config.get("heading.options");(o&&o.map(function(e){return e.model;})||_p).forEach(function(e){t.isRegistered(e)&&t.extend(e,{allowAttributes:"blockIndent"});}),t.setAttributeProperties("blockIndent",{isFormatting:!0}),i.registerChildCommand(e.commands.get("indentBlock")),n.registerChildCommand(e.commands.get("outdentBlock"));}},{key:"_setupConversionUsingOffset",value:function _setupConversionUsingOffset(){var e=this.editor.conversion,t="rtl"===this.editor.locale.contentLanguageDirection?"margin-right":"margin-left";e["for"]("upcast").attributeToAttribute({view:{styles:_defineProperty({},t,/[\s\S]+/)},model:{key:"blockIndent",value:function value(e){return e.getStyle(t);}}}),e["for"]("downcast").attributeToAttribute({model:"blockIndent",view:function view(e){return{key:"style",value:_defineProperty({},t,e)};}});}},{key:"_setupConversionUsingClasses",value:function _setupConversionUsingClasses(e){var t={model:{key:"blockIndent",values:[]},view:{}};var _iterator498=_createForOfIteratorHelper(e),_step498;try{for(_iterator498.s();!(_step498=_iterator498.n()).done;){var _i350=_step498.value;t.model.values.push(_i350),t.view[_i350]={key:"class",value:[_i350]};}}catch(err){_iterator498.e(err);}finally{_iterator498.f();}this.editor.conversion.attributeToAttribute(t);}}],[{key:"pluginName",get:function get(){return"IndentBlock";}}]);return _class26;}(Qe),/*#__PURE__*/function(_Qe110){_inherits(_class27,_Qe110);var _super254=_createSuper(_class27);function _class27(){_classCallCheck(this,_class27);return _super254.apply(this,arguments);}_createClass(_class27,null,[{key:"requires",get:function get(){return[Jp,nb,sb];}},{key:"pluginName",get:function get(){return"Link";}}]);return _class27;}(Qe),/*#__PURE__*/function(_Qe111){_inherits(_class28,_Qe111);var _super255=_createSuper(_class28);function _class28(){_classCallCheck(this,_class28);return _super255.apply(this,arguments);}_createClass(_class28,null,[{key:"requires",get:function get(){return[Rb,Lb];}},{key:"pluginName",get:function get(){return"List";}}]);return _class28;}(Qe),/*#__PURE__*/function(_Qe112){_inherits(_class29,_Qe112);var _super256=_createSuper(_class29);function _class29(){_classCallCheck(this,_class29);return _super256.apply(this,arguments);}_createClass(_class29,null,[{key:"requires",get:function get(){return[Bb,qb];}},{key:"pluginName",get:function get(){return"ListStyle";}}]);return _class29;}(Qe),/*#__PURE__*/function(_Qe113){_inherits(_class30,_Qe113);var _super257=_createSuper(_class30);function _class30(){_classCallCheck(this,_class30);return _super257.apply(this,arguments);}_createClass(_class30,null,[{key:"requires",get:function get(){return[ew,ow,iw,Ah];}},{key:"pluginName",get:function get(){return"MediaEmbed";}}]);return _class30;}(Qe),Hm,/*#__PURE__*/function(_Qe114){_inherits(_class31,_Qe114);var _super258=_createSuper(_class31);function _class31(){_classCallCheck(this,_class31);return _super258.apply(this,arguments);}_createClass(_class31,[{key:"init",value:function init(){var e=this.editor,t=e.editing.view.document,i=[];i.push(new mw(t)),i.push(new dw(t)),e.plugins.get("ClipboardPipeline").on("inputTransformation",function(e,n){if(n._isTransformedWithPasteFromOffice)return;var o=n.dataTransfer.getData("text/html"),r=i.find(function(e){return e.isActive(o);});r&&(n._parsedData=pw(o,t.stylesProcessor),r.execute(n),n._isTransformedWithPasteFromOffice=!0);},{priority:"high"});}}],[{key:"pluginName",get:function get(){return"PasteFromOffice";}},{key:"requires",get:function get(){return[Wu];}}]);return _class31;}(Qe),/*#__PURE__*/function(_Qe115){_inherits(_class32,_Qe115);var _super259=_createSuper(_class32);function _class32(){_classCallCheck(this,_class32);return _super259.apply(this,arguments);}_createClass(_class32,null,[{key:"requires",get:function get(){return[zk,Vk,jk,Yk,qk,Fk,Ah];}},{key:"pluginName",get:function get(){return"Table";}}]);return _class32;}(Qe),/*#__PURE__*/function(_Qe116){_inherits(_class33,_Qe116);var _super260=_createSuper(_class33);function _class33(){_classCallCheck(this,_class33);return _super260.apply(this,arguments);}_createClass(_class33,[{key:"afterInit",value:function afterInit(){var e=this.editor,t=e.t,i=e.plugins.get(Ym),n=e.config.get("table.contentToolbar"),o=e.config.get("table.tableToolbar");n&&i.register("tableContent",{ariaLabel:t("Table toolbar"),items:n,getRelatedElement:Qk}),o&&i.register("table",{ariaLabel:t("Table toolbar"),items:o,getRelatedElement:Kk});}}],[{key:"requires",get:function get(){return[Ym];}},{key:"pluginName",get:function get(){return"TableToolbar";}}]);return _class33;}(Qe),/*#__PURE__*/function(_Qe117){_inherits(_class34,_Qe117);var _super261=_createSuper(_class34);function _class34(e){var _this338;_classCallCheck(this,_class34);_this338=_super261.call(this,e),e.config.define("typing",{transformations:{include:dg}});return _this338;}_createClass(_class34,[{key:"init",value:function init(){var _this339=this;var e=this.editor.model.document.selection;e.on("change:range",function(){_this339.isEnabled=!e.anchor.parent.is("element","codeBlock");}),this._enableTransformationWatchers();}},{key:"_enableTransformationWatchers",value:function _enableTransformationWatchers(){var e=this.editor,t=e.model,i=e.plugins.get("Input"),n=function(e){var t=e.extra||[],i=e.remove||[],n=function n(e){return!i.includes(e);};return function(e){var t=new Set();var _iterator499=_createForOfIteratorHelper(e),_step499;try{for(_iterator499.s();!(_step499=_iterator499.n()).done;){var _i351=_step499.value;if(cg[_i351]){var _iterator500=_createForOfIteratorHelper(cg[_i351]),_step500;try{for(_iterator500.s();!(_step500=_iterator500.n()).done;){var _e404=_step500.value;t.add(_e404);}}catch(err){_iterator500.e(err);}finally{_iterator500.f();}}else t.add(_i351);}}catch(err){_iterator499.e(err);}finally{_iterator499.f();}return Array.from(t);}(e.include.concat(t).filter(n)).filter(n).map(function(e){return lg[e]||e;}).map(function(e){return{from:ug(e.from),to:hg(e.to)};});}(e.config.get("typing.transformations")),o=new Xh(e.model,function(e){var _iterator501=_createForOfIteratorHelper(n),_step501;try{for(_iterator501.s();!(_step501=_iterator501.n()).done;){var _t346=_step501.value;if(_t346.from.test(e))return{normalizedTransformation:_t346};}}catch(err){_iterator501.e(err);}finally{_iterator501.f();}});o.on("matched:data",function(e,n){if(!i.isInput(n.batch))return;var _n$normalizedTransfor=n.normalizedTransformation,o=_n$normalizedTransfor.from,r=_n$normalizedTransfor.to,s=o.exec(n.text),a=r(s.slice(1)),l=n.range;var c=s.index;t.enqueueChange(function(e){for(var _i352=1;_i352<s.length;_i352++){var _n211=s[_i352],_o131=a[_i352-1];if(null==_o131){c+=_n211.length;continue;}var _r84=l.start.getShiftedBy(c),_d10=t.createRange(_r84,_r84.getShiftedBy(_n211.length)),_u8=gg(_r84);t.insertContent(e.createText(_o131,_u8),_d10),c+=_o131.length;}});}),o.bind("isEnabled").to(this);}}],[{key:"pluginName",get:function get(){return"TextTransformation";}}]);return _class34;}(Qe)],r_.defaultConfig={toolbar:{items:["heading","|","fontfamily","fontsize","fontColor","fontBackgroundColor","|","bold","italic","underline","strikethrough","|","alignment","|","numberedList","bulletedList","|","outdent","indent","|","link","blockquote","uploadImage","insertTable","mediaEmbed","|","undo","redo"]},image:{resizeUnit:"px",toolbar:["imageStyle:inline","imageStyle:wrapText","imageStyle:breakText","|","toggleImageCaption","imageTextAlternative"]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]},language:"en"};}])["default"];});/***/}/******/};/************************************************************************/ /******/ // The module cache
/******/var __webpack_module_cache__={};/******/ /******/ // The require function
/******/function __nested_webpack_require_1133611__(moduleId){/******/ // Check if module is in cache
/******/var cachedModule=__webpack_module_cache__[moduleId];/******/if(cachedModule!==undefined){/******/return cachedModule.exports;/******/}/******/ // Create a new module (and put it into the cache)
/******/var module=__webpack_module_cache__[moduleId]={/******/ // no module.id needed
/******/ // no module.loaded needed
/******/exports:{}/******/};/******/ /******/ // Execute the module function
/******/__webpack_modules__[moduleId](module,module.exports,__nested_webpack_require_1133611__);/******/ /******/ // Return the exports of the module
/******/return module.exports;/******/}/******/ /************************************************************************/ /******/ /* webpack/runtime/compat get default export */ /******/(function(){/******/ // getDefaultExport function for compatibility with non-harmony modules
/******/__nested_webpack_require_1133611__.n=function(module){/******/var getter=module&&module.__esModule?/******/function(){return module['default'];}:/******/function(){return module;};/******/__nested_webpack_require_1133611__.d(getter,{a:getter});/******/return getter;/******/};/******/})();/******/ /******/ /* webpack/runtime/define property getters */ /******/(function(){/******/ // define getter functions for harmony exports
/******/__nested_webpack_require_1133611__.d=function(exports,definition){/******/for(var key in definition){/******/if(__nested_webpack_require_1133611__.o(definition,key)&&!__nested_webpack_require_1133611__.o(exports,key)){/******/Object.defineProperty(exports,key,{enumerable:true,get:definition[key]});/******/}/******/}/******/};/******/})();/******/ /******/ /* webpack/runtime/hasOwnProperty shorthand */ /******/(function(){/******/__nested_webpack_require_1133611__.o=function(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop);};/******/})();/******/ /******/ /* webpack/runtime/make namespace object */ /******/(function(){/******/ // define __esModule on exports
/******/__nested_webpack_require_1133611__.r=function(exports){/******/if(typeof Symbol!=='undefined'&&Symbol.toStringTag){/******/Object.defineProperty(exports,Symbol.toStringTag,{value:'Module'});/******/}/******/Object.defineProperty(exports,'__esModule',{value:true});/******/};/******/})();/******/ /************************************************************************/var __webpack_exports__={};// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(function(){"use strict";/*!*******************************************!*\
  !*** ./resources/js/ckeditor-document.js ***!
  \*******************************************/__nested_webpack_require_1133611__.r(__webpack_exports__);/* harmony import */var _ckeditor_ckeditor5_build_decoupled_document__WEBPACK_IMPORTED_MODULE_0__=__nested_webpack_require_1133611__(/*! @ckeditor/ckeditor5-build-decoupled-document */"./node_modules/@ckeditor/ckeditor5-build-decoupled-document/build/ckeditor.js");/* harmony import */var _ckeditor_ckeditor5_build_decoupled_document__WEBPACK_IMPORTED_MODULE_0___default=/*#__PURE__*/__nested_webpack_require_1133611__.n(_ckeditor_ckeditor5_build_decoupled_document__WEBPACK_IMPORTED_MODULE_0__);$(".editor").each(function(){var el=this;_ckeditor_ckeditor5_build_decoupled_document__WEBPACK_IMPORTED_MODULE_0___default().create($(el).find(".document-editor__editable")[0]).then(function(editor){$(el).closest(".editor").find(".document-editor__toolbar").append(editor.ui.view.toolbar.element);})["catch"](function(error){console.error(error);});});})();/******/})();
})();

/******/ })()
;